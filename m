Return-Path: <linux-kernel-owner+willy=40w.ods.org-S262315AbVERQSY@vger.kernel.org>
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S262315AbVERQSY (ORCPT <rfc822;willy@w.ods.org>);
	Wed, 18 May 2005 12:18:24 -0400
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S262313AbVERQRD
	(ORCPT <rfc822;linux-kernel-outgoing>);
	Wed, 18 May 2005 12:17:03 -0400
Received: from mx2.suse.de ([195.135.220.15]:47775 "EHLO mx2.suse.de")
	by vger.kernel.org with ESMTP id S262281AbVERQOX (ORCPT
	<rfc822;linux-kernel@vger.kernel.org>);
	Wed, 18 May 2005 12:14:23 -0400
Date: Wed, 18 May 2005 18:14:18 +0200
Message-ID: <s5h3bskse91.wl@alsa2.suse.de>
From: Takashi Iwai <tiwai@suse.de>
To: Adrian Bunk <bunk@stusta.de>
Cc: perex@suse.cz, alsa-devel@alsa-project.org, linux-kernel@vger.kernel.org
Subject: Re: [Alsa-devel] [2.6 patch] sound/core/: possible cleanups
In-Reply-To: <20050518085800.GQ5112@stusta.de>
References: <20050518085800.GQ5112@stusta.de>
User-Agent: Wanderlust/2.10.1 (Watching The Wheels) SEMI/1.14.5 (Awara-Onsen) FLIM/1.14.5 (Demachiyanagi) APEL/10.6 MULE XEmacs/21.4 (patch 15) (Security Through Obscurity) (i386-suse-linux)
MIME-Version: 1.0 (generated by SEMI 1.14.5 - "Awara-Onsen")
Content-Type: text/plain; charset=US-ASCII
Sender: linux-kernel-owner@vger.kernel.org
X-Mailing-List: linux-kernel@vger.kernel.org

At Wed, 18 May 2005 10:58:00 +0200,
Adrian Bunk wrote:
> 
> This patch contains the following possible cleanups:
> - make needlessly global code static
> - #if 0 the following unused global functions:
>   - pcm_lib.c: snd_pcm_hw_param_any
>   - pcm_lib.c: snd_pcm_hw_params_any
>   - pcm_lib.c: snd_pcm_hw_param_setinteger

Ack.

>   - pcm_misc.c: snd_pcm_format_cpu_endian
>   - pcm_misc.c: snd_pcm_format_size

They are used by drivers which are not merged to kernel yet.
Anyway, I moved the former one to a macro, and export the latter.

>   - seq/seq_midi_event.c: snd_midi_event_init
>   - seq/seq_midi_event.c: snd_midi_event_resize_buffer
>   - seq/seq_virmidi.c: snd_virmidi_receive

Ack.

>   - timer.c: snd_timer_system_resolution

This one can be killed.  The value is defined in the timer
definition.

> - remove the following unneeded EXPORT_SYMBOL's:
>   - pcm_lib.c: snd_interval_muldivk
>   - pcm_lib.c: snd_interval_mulkdiv
>   - pcm_lib.c: snd_interval_div
>   - pcm_lib.c: snd_pcm_hw_params
>   - pcm.c: snd_pcm_start

Ack.

>   - pcm.c: snd_pcm_suspend

I'd like to keep it global.

>   - rawmidi.c: snd_rawmidi_drop_output
>   - rawmidi.c: snd_rawmidi_drain_input
>   - rawmidi.c: snd_rawmidi_info

Let's keep them.  Rawmidi can be referred from out-of-kernel drivers.

>   - seq/seq_midi_event.c: snd_midi_event_resize_buffer
>   - seq/seq_midi_event.c: snd_midi_event_init
>   - seq/seq_virmidi.c: snd_virmidi_receive

Ack.

>   - timer.c: snd_timer_continue

Let's keep this, too.  This might be referred.

>   - timer.c: snd_timer_system_resolution
>   - sound.c: snd_device_free_all

Ack.


I'll fix the above on ALSA tree.


Thanks.


Takashi
