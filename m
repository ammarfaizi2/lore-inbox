Return-Path: <linux-kernel-owner+willy=40w.ods.org-S262577AbVCPNWR@vger.kernel.org>
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S262577AbVCPNWR (ORCPT <rfc822;willy@w.ods.org>);
	Wed, 16 Mar 2005 08:22:17 -0500
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S262575AbVCPNWR
	(ORCPT <rfc822;linux-kernel-outgoing>);
	Wed, 16 Mar 2005 08:22:17 -0500
Received: from mail.dif.dk ([193.138.115.101]:37011 "EHLO mail.dif.dk")
	by vger.kernel.org with ESMTP id S262577AbVCPNRE (ORCPT
	<rfc822;linux-kernel@vger.kernel.org>);
	Wed, 16 Mar 2005 08:17:04 -0500
Date: Wed, 16 Mar 2005 14:18:28 +0100 (CET)
From: Jesper Juhl <juhl-lkml@dif.dk>
To: Steven French <sfrench@us.ibm.com>
Cc: smfrench@austin.rr.com, linux-kernel@vger.kernel.org
Subject: [PATCH][1/7] cifs: file.c cleanups in incremental bits - whitespace
 changes
Message-ID: <Pine.LNX.4.62.0503161355140.3141@dragon.hyggekrogen.localhost>
MIME-Version: 1.0
Content-Type: MULTIPART/MIXED; BOUNDARY="8323328-2010945033-1110979108=:3141"
Sender: linux-kernel-owner@vger.kernel.org
X-Mailing-List: linux-kernel@vger.kernel.org

  This message is in MIME format.  The first part should be readable text,
  while the remaining parts are likely unreadable without MIME-aware tools.

--8323328-2010945033-1110979108=:3141
Content-Type: TEXT/PLAIN; charset=US-ASCII


This patch (attached) contains all the needed whitespace changes to make 
the file fit inside 80 columns, except for the bits present in cifs_open() 
since that one will be reworked quite a bit by the following patches so 
the whitespace changes for that function are done along with the other 
changes made there (doing them here first would just duplicate a lot of 
lines).

Signed-off-by: Jesper Juhl <juhl-lkml@dif.dk>


-- 
Jesper Juhl


--8323328-2010945033-1110979108=:3141
Content-Type: TEXT/PLAIN; charset=US-ASCII; name=fs_cifs_file-cleanups-3-whitespace-changes.patch
Content-Transfer-Encoding: BASE64
Content-ID: <Pine.LNX.4.62.0503161418280.3141@dragon.hyggekrogen.localhost>
Content-Description: fs_cifs_file-cleanups-3-whitespace-changes.patch
Content-Disposition: attachment; filename=fs_cifs_file-cleanups-3-whitespace-changes.patch

ZGlmZiAtdXAgbGludXgtMi42LjExLW1tMy9mcy9jaWZzL2ZpbGUuYy53aXRo
X3BhdGNoXzEgbGludXgtMi42LjExLW1tMy9mcy9jaWZzL2ZpbGUuYw0KLS0t
IGxpbnV4LTIuNi4xMS1tbTMvZnMvY2lmcy9maWxlLmMud2l0aF9wYXRjaF8x
CTIwMDUtMDMtMTMgMTg6MjE6MTkuMDAwMDAwMDAwICswMTAwDQorKysgbGlu
dXgtMi42LjExLW1tMy9mcy9jaWZzL2ZpbGUuYwkyMDA1LTAzLTE1IDIyOjM5
OjExLjAwMDAwMDAwMCArMDEwMA0KQEAgLTMwNSw5ICszMDUsOSBAQCBzdGF0
aWMgaW50IGNpZnNfcmVvcGVuX2ZpbGUoc3RydWN0IGlub2RlDQogCWNpZnNf
c2IgPSBDSUZTX1NCKGlub2RlLT5pX3NiKTsNCiAJcFRjb24gPSBjaWZzX3Ni
LT50Y29uOw0KIC8qIGNhbiBub3QgZ3JhYiByZW5hbWUgc2VtIGhlcmUgYmVj
YXVzZSB2YXJpb3VzIG9wcywgaW5jbHVkaW5nDQotdGhvc2UgdGhhdCBhbHJl
YWR5IGhhdmUgdGhlIHJlbmFtZSBzZW0gY2FuIGVuZCB1cCBjYXVzaW5nIHdy
aXRlcGFnZQ0KLXRvIGdldCBjYWxsZWQgYW5kIGlmIHRoZSBzZXJ2ZXIgd2Fz
IGRvd24gdGhhdCBtZWFucyB3ZSBlbmQgdXAgaGVyZSwNCi1hbmQgd2UgY2Fu
IG5ldmVyIHRlbGwgaWYgdGhlIGNhbGxlciBhbHJlYWR5IGhhcyB0aGUgcmVu
YW1lX3NlbSAqLw0KKyAgIHRob3NlIHRoYXQgYWxyZWFkeSBoYXZlIHRoZSBy
ZW5hbWUgc2VtIGNhbiBlbmQgdXAgY2F1c2luZyB3cml0ZXBhZ2UNCisgICB0
byBnZXQgY2FsbGVkIGFuZCBpZiB0aGUgc2VydmVyIHdhcyBkb3duIHRoYXQg
bWVhbnMgd2UgZW5kIHVwIGhlcmUsDQorICAgYW5kIHdlIGNhbiBuZXZlciB0
ZWxsIGlmIHRoZSBjYWxsZXIgYWxyZWFkeSBoYXMgdGhlIHJlbmFtZV9zZW0g
Ki8NCiAJZnVsbF9wYXRoID0gYnVpbGRfcGF0aF9mcm9tX2RlbnRyeShmaWxl
LT5mX2RlbnRyeSk7DQogCWlmIChmdWxsX3BhdGggPT0gTlVMTCkgew0KIAkJ
dXAoJnBDaWZzRmlsZS0+Zmhfc2VtKTsNCkBAIC0zMTUsNyArMzE1LDggQEAg
YW5kIHdlIGNhbiBuZXZlciB0ZWxsIGlmIHRoZSBjYWxsZXIgYWxyZQ0KIAkJ
cmV0dXJuIC1FTk9NRU07DQogCX0NCiANCi0JY0ZZSSgxLCAoIiBpbm9kZSA9
IDB4JXAgZmlsZSBmbGFncyBhcmUgMHgleCBmb3IgJXMiLCBpbm9kZSwgZmls
ZS0+Zl9mbGFncyxmdWxsX3BhdGgpKTsNCisJY0ZZSSgxLCAoIiBpbm9kZSA9
IDB4JXAgZmlsZSBmbGFncyBhcmUgMHgleCBmb3IgJXMiLA0KKwkJIGlub2Rl
LCBmaWxlLT5mX2ZsYWdzLGZ1bGxfcGF0aCkpOw0KIAlpZiAoKGZpbGUtPmZf
ZmxhZ3MgJiBPX0FDQ01PREUpID09IE9fUkRPTkxZKQ0KIAkJZGVzaXJlZEFj
Y2VzcyA9IEdFTkVSSUNfUkVBRDsNCiAJZWxzZSBpZiAoKGZpbGUtPmZfZmxh
Z3MgJiBPX0FDQ01PREUpID09IE9fV1JPTkxZKQ0KQEAgLTMyMyw3ICszMjQs
NyBAQCBhbmQgd2UgY2FuIG5ldmVyIHRlbGwgaWYgdGhlIGNhbGxlciBhbHJl
DQogCWVsc2UgaWYgKChmaWxlLT5mX2ZsYWdzICYgT19BQ0NNT0RFKSA9PSBP
X1JEV1IpIHsNCiAJCS8qIEdFTkVSSUNfQUxMIGlzIHRvbyBtdWNoIHBlcm1p
c3Npb24gdG8gcmVxdWVzdCAqLw0KIAkJLyogY2FuIGNhdXNlIHVubmVjZXNz
YXJ5IGFjY2VzcyBkZW5pZWQgb24gY3JlYXRlICovDQotCQkvKiBkZXNpcmVk
QWNjZXNzID0gR0VORVJJQ19BTEw7ICovDQorCQkvKiBkZXNpcmVkQWNjZXNz
ID0gR0VORVJJQ19BTEw7ICAgICAgICAgICAgICAgICAgKi8NCiAJCWRlc2ly
ZWRBY2Nlc3MgPSBHRU5FUklDX1JFQUQgfCBHRU5FUklDX1dSSVRFOw0KIAl9
DQogDQpAQCAtMzMyLDEyICszMzMsMTEgQEAgYW5kIHdlIGNhbiBuZXZlciB0
ZWxsIGlmIHRoZSBjYWxsZXIgYWxyZQ0KIAllbHNlDQogCQlvcGxvY2sgPSBG
QUxTRTsNCiANCi0JDQogCS8qIENhbiBub3QgcmVmcmVzaCBpbm9kZSBieSBw
YXNzaW5nIGluIGZpbGVfaW5mbyBidWYgdG8gYmUgcmV0dXJuZWQNCi0JIGJ5
IFNNQk9wZW4gYW5kIHRoZW4gY2FsbGluZyBnZXRfaW5vZGVfaW5mbyB3aXRo
IHJldHVybmVkIGJ1ZiANCi0JIHNpbmNlIGZpbGUgbWlnaHQgaGF2ZSB3cml0
ZSBiZWhpbmQgZGF0YSB0aGF0IG5lZWRzIHRvIGJlIGZsdXNoZWQgDQotCSBh
bmQgc2VydmVyIHZlcnNpb24gb2YgZmlsZSBzaXplIGNhbiBiZSBzdGFsZS4g
SWYgd2UgDQotCSBrbmV3IGZvciBzdXJlIHRoYXQgaW5vZGUgd2FzIG5vdCBk
aXJ0eSBsb2NhbGx5IHdlIGNvdWxkIGRvIHRoaXMgKi8NCisJICAgYnkgU01C
T3BlbiBhbmQgdGhlbiBjYWxsaW5nIGdldF9pbm9kZV9pbmZvIHdpdGggcmV0
dXJuZWQgYnVmIA0KKwkgICBzaW5jZSBmaWxlIG1pZ2h0IGhhdmUgd3JpdGUg
YmVoaW5kIGRhdGEgdGhhdCBuZWVkcyB0byBiZSBmbHVzaGVkIA0KKwkgICBh
bmQgc2VydmVyIHZlcnNpb24gb2YgZmlsZSBzaXplIGNhbiBiZSBzdGFsZS4g
SWYgd2Uga25ldyBmb3Igc3VyZQ0KKwkgICB0aGF0IGlub2RlIHdhcyBub3Qg
ZGlydHkgbG9jYWxseSB3ZSBjb3VsZCBkbyB0aGlzICovDQogDQogLyoJYnVm
ID0ga21hbGxvYyhzaXplb2YoRklMRV9BTExfSU5GTyksIEdGUF9LRVJORUwp
Ow0KIAlpZiAoYnVmID09IDApIHsNCkBAIC0zNDgsNyArMzQ4LDggQEAgYW5k
IHdlIGNhbiBuZXZlciB0ZWxsIGlmIHRoZSBjYWxsZXIgYWxyZQ0KIAkJcmV0
dXJuIC1FTk9NRU07DQogCX0gKi8NCiAJcmMgPSBDSUZTU01CT3Blbih4aWQs
IHBUY29uLCBmdWxsX3BhdGgsIGRpc3Bvc2l0aW9uLCBkZXNpcmVkQWNjZXNz
LA0KLQkJCQlDUkVBVEVfTk9UX0RJUiwgJm5ldGZpZCwgJm9wbG9jaywgTlVM
TCwgY2lmc19zYi0+bG9jYWxfbmxzKTsNCisJCQkgQ1JFQVRFX05PVF9ESVIs
ICZuZXRmaWQsICZvcGxvY2ssIE5VTEwsDQorCQkJIGNpZnNfc2ItPmxvY2Fs
X25scyk7DQogCWlmIChyYykgew0KIAkJdXAoJnBDaWZzRmlsZS0+Zmhfc2Vt
KTsNCiAJCWNGWUkoMSwgKCJjaWZzX29wZW4gcmV0dXJuZWQgMHgleCAiLCBy
YykpOw0KQEAgLTM2Myw3ICszNjQsNyBAQCBhbmQgd2UgY2FuIG5ldmVyIHRl
bGwgaWYgdGhlIGNhbGxlciBhbHJlDQogCQkJCWZpbGVtYXBfZmRhdGF3cml0
ZShpbm9kZS0+aV9tYXBwaW5nKTsNCiAJCQkJZmlsZW1hcF9mZGF0YXdhaXQo
aW5vZGUtPmlfbWFwcGluZyk7DQogCQkJLyogdGVtcG9yYXJpbHkgZGlzYWJs
ZSBjYWNoaW5nIHdoaWxlIHdlDQotCQkJZ28gdG8gc2VydmVyIHRvIGdldCBp
bm9kZSBpbmZvICovDQorCQkJICAgZ28gdG8gc2VydmVyIHRvIGdldCBpbm9k
ZSBpbmZvICovDQogCQkJCXBDaWZzSW5vZGUtPmNsaWVudENhbkNhY2hlQWxs
ID0gRkFMU0U7DQogCQkJCXBDaWZzSW5vZGUtPmNsaWVudENhbkNhY2hlUmVh
ZCA9IEZBTFNFOw0KIAkJCQlpZiAocFRjb24tPnNlcy0+Y2FwYWJpbGl0aWVz
ICYgQ0FQX1VOSVgpDQpAQCAtMzcxLDE3ICszNzIsMTkgQEAgYW5kIHdlIGNh
biBuZXZlciB0ZWxsIGlmIHRoZSBjYWxsZXIgYWxyZQ0KIAkJCQkJCWZ1bGxf
cGF0aCwgaW5vZGUtPmlfc2IsIHhpZCk7DQogCQkJCWVsc2UNCiAJCQkJCXJj
ID0gY2lmc19nZXRfaW5vZGVfaW5mbygmaW5vZGUsDQotCQkJCQkJZnVsbF9w
YXRoLCBOVUxMLCBpbm9kZS0+aV9zYiwgeGlkKTsNCisJCQkJCQlmdWxsX3Bh
dGgsIE5VTEwsIGlub2RlLT5pX3NiLA0KKwkJCQkJCXhpZCk7DQogCQkJfSAv
KiBlbHNlIHdlIGFyZSB3cml0aW5nIG91dCBkYXRhIHRvIHNlcnZlciBhbHJl
YWR5DQotCQkJYW5kIGNvdWxkIGRlYWRsb2NrIGlmIHdlIHRyaWVkIHRvIGZs
dXNoIGRhdGEsIGFuZCANCi0JCQlzaW5jZSB3ZSBkbyBub3Qga25vdyBpZiB3
ZSBoYXZlIGRhdGEgdGhhdCB3b3VsZA0KLQkJCWludmFsaWRhdGUgdGhlIGN1
cnJlbnQgZW5kIG9mIGZpbGUgb24gdGhlIHNlcnZlcg0KLQkJCXdlIGNhbiBu
b3QgZ28gdG8gdGhlIHNlcnZlciB0byBnZXQgdGhlIG5ldw0KLQkJCWlub2Qg
aW5mbyAqLw0KKwkJCSAgICAgYW5kIGNvdWxkIGRlYWRsb2NrIGlmIHdlIHRy
aWVkIHRvIGZsdXNoIGRhdGEsIGFuZA0KKwkJCSAgICAgc2luY2Ugd2UgZG8g
bm90IGtub3cgaWYgd2UgaGF2ZSBkYXRhIHRoYXQgd291bGQNCisJCQkgICAg
IGludmFsaWRhdGUgdGhlIGN1cnJlbnQgZW5kIG9mIGZpbGUgb24gdGhlIHNl
cnZlcg0KKwkJCSAgICAgd2UgY2FuIG5vdCBnbyB0byB0aGUgc2VydmVyIHRv
IGdldCB0aGUgbmV3IGlub2QNCisJCQkgICAgIGluZm8gKi8NCiAJCQlpZiAo
KG9wbG9jayAmIDB4RikgPT0gT1BMT0NLX0VYQ0xVU0lWRSkgew0KIAkJCQlw
Q2lmc0lub2RlLT5jbGllbnRDYW5DYWNoZUFsbCA9IFRSVUU7DQogCQkJCXBD
aWZzSW5vZGUtPmNsaWVudENhbkNhY2hlUmVhZCA9IFRSVUU7DQotCQkJCWNG
WUkoMSwgKCJFeGNsdXNpdmUgT3Bsb2NrIGdyYW50ZWQgb24gaW5vZGUgJXAi
LCBmaWxlLT5mX2RlbnRyeS0+ZF9pbm9kZSkpOw0KKwkJCQljRllJKDEsICgi
RXhjbHVzaXZlIE9wbG9jayBncmFudGVkIG9uIGlub2RlICVwIiwNCisJCQkJ
CSBmaWxlLT5mX2RlbnRyeS0+ZF9pbm9kZSkpOw0KIAkJCX0gZWxzZSBpZiAo
KG9wbG9jayAmIDB4RikgPT0gT1BMT0NLX1JFQUQpIHsNCiAJCQkJcENpZnNJ
bm9kZS0+Y2xpZW50Q2FuQ2FjaGVSZWFkID0gVFJVRTsNCiAJCQkJcENpZnNJ
bm9kZS0+Y2xpZW50Q2FuQ2FjaGVBbGwgPSBGQUxTRTsNCkBAIC00MTcsMTAg
KzQyMCwxMSBAQCBpbnQgY2lmc19jbG9zZShzdHJ1Y3QgaW5vZGUgKmlub2Rl
LCBzdHJ1DQogCQl3cml0ZV9sb2NrKCZmaWxlLT5mX293bmVyLmxvY2spOw0K
IAkJaWYgKHBUY29uKSB7DQogCQkJLyogbm8gc2Vuc2UgcmVjb25uZWN0aW5n
IHRvIGNsb3NlIGEgZmlsZSB0aGF0IGlzDQotCQkJCWFscmVhZHkgY2xvc2Vk
ICovDQorCQkJICAgYWxyZWFkeSBjbG9zZWQgKi8NCiAJCQlpZiAocFRjb24t
PnRpZFN0YXR1cyAhPSBDaWZzTmVlZFJlY29ubmVjdCkgew0KIAkJCQl3cml0
ZV91bmxvY2soJmZpbGUtPmZfb3duZXIubG9jayk7DQotCQkJCXJjID0gQ0lG
U1NNQkNsb3NlKHhpZCwgcFRjb24sIHBTTUJGaWxlLT5uZXRmaWQpOw0KKwkJ
CQlyYyA9IENJRlNTTUJDbG9zZSh4aWQsIHBUY29uLA0KKwkJCQkJCSAgcFNN
QkZpbGUtPm5ldGZpZCk7DQogCQkJCXdyaXRlX2xvY2soJmZpbGUtPmZfb3du
ZXIubG9jayk7DQogCQkJfQ0KIAkJfQ0KQEAgLTQzNiw4ICs0NDAsOCBAQCBp
bnQgY2lmc19jbG9zZShzdHJ1Y3QgaW5vZGUgKmlub2RlLCBzdHJ1DQogDQog
CWlmIChsaXN0X2VtcHR5KCYoQ0lGU19JKGlub2RlKS0+b3BlbkZpbGVMaXN0
KSkpIHsNCiAJCWNGWUkoMSwgKCJjbG9zaW5nIGxhc3Qgb3BlbiBpbnN0YW5j
ZSBmb3IgaW5vZGUgJXAiLCBpbm9kZSkpOw0KLQkJLyogaWYgdGhlIGZpbGUg
aXMgbm90IG9wZW4gd2UgZG8gbm90IGtub3cgaWYgd2UgY2FuIGNhY2hlDQot
CQlpbmZvIG9uIHRoaXMgaW5vZGUsIG11Y2ggbGVzcyB3cml0ZSBiZWhpbmQg
YW5kIHJlYWQgYWhlYWQgKi8NCisJCS8qIGlmIHRoZSBmaWxlIGlzIG5vdCBv
cGVuIHdlIGRvIG5vdCBrbm93IGlmIHdlIGNhbiBjYWNoZSBpbmZvDQorCQkg
ICBvbiB0aGlzIGlub2RlLCBtdWNoIGxlc3Mgd3JpdGUgYmVoaW5kIGFuZCBy
ZWFkIGFoZWFkICovDQogCQlDSUZTX0koaW5vZGUpLT5jbGllbnRDYW5DYWNo
ZVJlYWQgPSBGQUxTRTsNCiAJCUNJRlNfSShpbm9kZSktPmNsaWVudENhbkNh
Y2hlQWxsICA9IEZBTFNFOw0KIAl9DQpAQCAtNDY5LDE5ICs0NzMsMjAgQEAg
aW50IGNpZnNfY2xvc2VkaXIoc3RydWN0IGlub2RlICppbm9kZSwgcw0KIAkJ
aWYgKHBDRmlsZVN0cnVjdC0+c3JjaF9pbmYuZW5kT2ZTZWFyY2ggPT0gRkFM
U0UpIHsNCiAJCQlwQ0ZpbGVTdHJ1Y3QtPmludmFsaWRIYW5kbGUgPSBUUlVF
Ow0KIAkJCXJjID0gQ0lGU0ZpbmRDbG9zZSh4aWQsIHBUY29uLCBwQ0ZpbGVT
dHJ1Y3QtPm5ldGZpZCk7DQotCQkJY0ZZSSgxLCAoIkNsb3NpbmcgdW5jb21w
bGV0ZWQgcmVhZGRpciB3aXRoIHJjICVkIiwgcmMpKTsNCi0JCQkvKiBub3Qg
bXVjaCB3ZSBjYW4gZG8gaWYgaXQgZmFpbHMgYW55d3dheSwgaWdub3JlIHJj
ICovDQorCQkJY0ZZSSgxLCAoIkNsb3NpbmcgdW5jb21wbGV0ZWQgcmVhZGRp
ciB3aXRoIHJjICVkIiwNCisJCQkJIHJjKSk7DQorCQkJLyogbm90IG11Y2gg
d2UgY2FuIGRvIGlmIGl0IGZhaWxzIGFueXdheSwgaWdub3JlIHJjICovDQog
CQkJcmMgPSAwOw0KIAkJfQ0KIAkJcHRtcCA9IHBDRmlsZVN0cnVjdC0+c3Jj
aF9pbmYubnR3cmtfYnVmX3N0YXJ0Ow0KIAkJaWYgKHB0bXApIHsNCi0JCQlj
RllJKDEsICgiZnJlZWluZyBzbWIgYnVmIGluIHNyY2ggc3RydWN0IGluIGNs
b3NlZGlyIikpOyAvKiBCQiByZW1vdmVtZSBCQiAqLw0KKyAgIC8qIEJCIHJl
bW92ZW1lIEJCICovCWNGWUkoMSwgKCJmcmVlaW5nIHNtYiBidWYgaW4gc3Jj
aCBzdHJ1Y3QgaW4gY2xvc2VkaXIiKSk7DQogCQkJcENGaWxlU3RydWN0LT5z
cmNoX2luZi5udHdya19idWZfc3RhcnQgPSBOVUxMOw0KIAkJCWNpZnNfYnVm
X3JlbGVhc2UocHRtcCk7DQogCQl9DQogCQlwdG1wID0gcENGaWxlU3RydWN0
LT5zZWFyY2hfcmVzdW1lX25hbWU7DQogCQlpZiAocHRtcCkgew0KLQkJCWNG
WUkoMSwgKCJmcmVlaW5nIHJlc3VtZSBuYW1lIGluIGNsb3NlZGlyIikpOyAv
KiBCQiByZW1vdmVtZSBCQiAqLw0KKyAgIC8qIEJCIHJlbW92ZW1lIEJCICov
CWNGWUkoMSwgKCJmcmVlaW5nIHJlc3VtZSBuYW1lIGluIGNsb3NlZGlyIikp
Ow0KIAkJCXBDRmlsZVN0cnVjdC0+c2VhcmNoX3Jlc3VtZV9uYW1lID0gTlVM
TDsNCiAJCQlrZnJlZShwdG1wKTsNCiAJCX0NCkBAIC01MDgsMTAgKzUxMywx
MCBAQCBpbnQgY2lmc19sb2NrKHN0cnVjdCBmaWxlICpmaWxlLCBpbnQgY21k
DQogCXJjID0gLUVBQ0NFUzsNCiAJeGlkID0gR2V0WGlkKCk7DQogDQotCWNG
WUkoMSwNCi0JICAgICAoIkxvY2sgcGFybTogMHgleCBmbG9ja2ZsYWdzOiAw
eCV4IGZsb2NrdHlwZTogMHgleCBzdGFydDogJWxsZCBlbmQ6ICVsbGQiLA0K
LQkgICAgICBjbWQsIHBmTG9jay0+ZmxfZmxhZ3MsIHBmTG9jay0+ZmxfdHlw
ZSwgcGZMb2NrLT5mbF9zdGFydCwNCi0JICAgICAgcGZMb2NrLT5mbF9lbmQp
KTsNCisJY0ZZSSgxLCAoIkxvY2sgcGFybTogMHgleCBmbG9ja2ZsYWdzOiAi
DQorCQkgIjB4JXggZmxvY2t0eXBlOiAweCV4IHN0YXJ0OiAlbGxkIGVuZDog
JWxsZCIsDQorCSAgICAgICAgY21kLCBwZkxvY2stPmZsX2ZsYWdzLCBwZkxv
Y2stPmZsX3R5cGUsIHBmTG9jay0+Zmxfc3RhcnQsDQorCSAgICAgICAgcGZM
b2NrLT5mbF9lbmQpKTsNCiANCiAJaWYgKHBmTG9jay0+ZmxfZmxhZ3MgJiBG
TF9QT1NJWCkNCiAJCWNGWUkoMSwgKCJQb3NpeCAiKSk7DQpAQCAtNTIyLDEw
ICs1MjcsMTIgQEAgaW50IGNpZnNfbG9jayhzdHJ1Y3QgZmlsZSAqZmlsZSwg
aW50IGNtZA0KIAkJd2FpdF9mbGFnID0gVFJVRTsNCiAJfQ0KIAlpZiAocGZM
b2NrLT5mbF9mbGFncyAmIEZMX0FDQ0VTUykNCi0JCWNGWUkoMSwgKCJQcm9j
ZXNzIHN1c3BlbmRlZCBieSBtYW5kYXRvcnkgbG9ja2luZyAtIG5vdCBpbXBs
ZW1lbnRlZCB5ZXQgIikpOw0KKwkJY0ZZSSgxLCAoIlByb2Nlc3Mgc3VzcGVu
ZGVkIGJ5IG1hbmRhdG9yeSBsb2NraW5nIC0gIg0KKwkJCSAibm90IGltcGxl
bWVudGVkIHlldCAiKSk7DQogCWlmIChwZkxvY2stPmZsX2ZsYWdzICYgRkxf
TEVBU0UpDQogCQljRllJKDEsICgiTGVhc2Ugb24gZmlsZSAtIG5vdCBpbXBs
ZW1lbnRlZCB5ZXQiKSk7DQotCWlmIChwZkxvY2stPmZsX2ZsYWdzICYgKH4o
RkxfUE9TSVggfCBGTF9GTE9DSyB8IEZMX1NMRUVQIHwgRkxfQUNDRVNTIHwg
RkxfTEVBU0UpKSkNCisJaWYgKHBmTG9jay0+ZmxfZmxhZ3MgJiANCisJICAg
ICh+KEZMX1BPU0lYIHwgRkxfRkxPQ0sgfCBGTF9TTEVFUCB8IEZMX0FDQ0VT
UyB8IEZMX0xFQVNFKSkpDQogCQljRllJKDEsICgiVW5rbm93biBsb2NrIGZs
YWdzIDB4JXgiLCBwZkxvY2stPmZsX2ZsYWdzKSk7DQogDQogCWlmIChwZkxv
Y2stPmZsX3R5cGUgPT0gRl9XUkxDSykgew0KQEAgLTU3MywxNCArNTgwLDE1
IEBAIGludCBjaWZzX2xvY2soc3RydWN0IGZpbGUgKmZpbGUsIGludCBjbWQN
CiAJCQkJCSAwIC8qIHdhaXQgZmxhZyAqLyApOw0KIAkJCXBmTG9jay0+Zmxf
dHlwZSA9IEZfVU5MQ0s7DQogCQkJaWYgKHJjICE9IDApDQotCQkJCWNFUlJP
UigxLA0KLQkJCQkJKCJFcnJvciB1bmxvY2tpbmcgcHJldmlvdXNseSBsb2Nr
ZWQgcmFuZ2UgJWQgZHVyaW5nIHRlc3Qgb2YgbG9jayAiLA0KLQkJCQkJcmMp
KTsNCisJCQkJY0VSUk9SKDEsICgiRXJyb3IgdW5sb2NraW5nIHByZXZpb3Vz
bHkgbG9ja2VkICINCisJCQkJCSAgICJyYW5nZSAlZCBkdXJpbmcgdGVzdCBv
ZiBsb2NrICIsDQorCQkJCQkgICByYykpOw0KIAkJCXJjID0gMDsNCiANCiAJ
CX0gZWxzZSB7DQogCQkJLyogaWYgcmMgPT0gRVJSX1NIQVJJTkdfVklPTEFU
SU9OID8gKi8NCi0JCQlyYyA9IDA7CS8qIGRvIG5vdCBjaGFuZ2UgbG9jayB0
eXBlIHRvIHVubG9jayBzaW5jZSByYW5nZSBpbiB1c2UgKi8NCisJCQlyYyA9
IDA7CS8qIGRvIG5vdCBjaGFuZ2UgbG9jayB0eXBlIHRvIHVubG9jaw0KKwkJ
CQkgICBzaW5jZSByYW5nZSBpbiB1c2UgKi8NCiAJCX0NCiANCiAJCUZyZWVY
aWQoeGlkKTsNCkBAIC02MzQsNyArNjQyLDcgQEAgc3NpemVfdCBjaWZzX3Vz
ZXJfd3JpdGUoc3RydWN0IGZpbGUgKmZpbA0KIAl9DQogDQogCWlmICgqcG9m
ZnNldCA+IGZpbGUtPmZfZGVudHJ5LT5kX2lub2RlLT5pX3NpemUpDQotCQls
b25nX29wID0gMjsgIC8qIHdyaXRlcyBwYXN0IGVuZCBvZiBmaWxlIGNhbiB0
YWtlIGEgbG9uZyB0aW1lICovDQorCQlsb25nX29wID0gMjsgLyogd3JpdGVz
IHBhc3QgZW5kIG9mIGZpbGUgY2FuIHRha2UgYSBsb25nIHRpbWUgKi8NCiAJ
ZWxzZQ0KIAkJbG9uZ19vcCA9IDE7DQogDQpAQCAtNjQ2LDggKzY1NCw4IEBA
IHNzaXplX3QgY2lmc191c2VyX3dyaXRlKHN0cnVjdCBmaWxlICpmaWwNCiAJ
CQkJLyogZmlsZSBoYXMgYmVlbiBjbG9zZWQgb24gdXMgKi8NCiAJCQkJRnJl
ZVhpZCh4aWQpOw0KIAkJCS8qIGlmIHdlIGhhdmUgZ290dGVuIGhlcmUgd2Ug
aGF2ZSB3cml0dGVuIHNvbWUgZGF0YQ0KLQkJCWFuZCBibG9ja2VkLCBhbmQg
dGhlIGZpbGUgaGFzIGJlZW4gZnJlZWQgb24gdXMNCi0JCQl3aGlsZSB3ZSBi
bG9ja2VkIHNvIHJldHVybiB3aGF0IHdlIG1hbmFnZWQgdG8gd3JpdGUgKi8N
CisJCQkgICBhbmQgYmxvY2tlZCwgYW5kIHRoZSBmaWxlIGhhcyBiZWVuIGZy
ZWVkIG9uIHVzIHdoaWxlDQorCQkJICAgd2UgYmxvY2tlZCBzbyByZXR1cm4g
d2hhdCB3ZSBtYW5hZ2VkIHRvIHdyaXRlICovDQogCQkJCXJldHVybiB0b3Rh
bF93cml0dGVuOw0KIAkJCX0gDQogCQkJaWYgKG9wZW5fZmlsZS0+Y2xvc2VQ
ZW5kKSB7DQpAQCAtNjY0LDggKzY3Miw5IEBAIHNzaXplX3QgY2lmc191c2Vy
X3dyaXRlKHN0cnVjdCBmaWxlICpmaWwNCiAJCQkJCXJldHVybiB0b3RhbF93
cml0dGVuOw0KIAkJCQl9DQogCQkJCS8qIHdlIGNvdWxkIGRlYWRsb2NrIGlm
IHdlIGNhbGxlZA0KLQkJCQkgZmlsZW1hcF9mZGF0YXdhaXQgZnJvbSBoZXJl
IHNvIHRlbGwNCi0JCQkJcmVvcGVuX2ZpbGUgbm90IHRvIGZsdXNoIGRhdGEg
dG8gc2VydmVyIG5vdyAqLw0KKwkJCQkgICBmaWxlbWFwX2ZkYXRhd2FpdCBm
cm9tIGhlcmUgc28gdGVsbA0KKwkJCQkgICByZW9wZW5fZmlsZSBub3QgdG8g
Zmx1c2ggZGF0YSB0byBzZXJ2ZXINCisJCQkJICAgbm93ICovDQogCQkJCXJj
ID0gY2lmc19yZW9wZW5fZmlsZShmaWxlLT5mX2RlbnRyeS0+ZF9pbm9kZSwN
CiAJCQkJCWZpbGUsIEZBTFNFKTsNCiAJCQkJaWYgKHJjICE9IDApDQpAQCAt
Njc0LDcgKzY4Myw4IEBAIHNzaXplX3QgY2lmc191c2VyX3dyaXRlKHN0cnVj
dCBmaWxlICpmaWwNCiANCiAJCQlyYyA9IENJRlNTTUJXcml0ZSh4aWQsIHBU
Y29uLA0KIAkJCQlvcGVuX2ZpbGUtPm5ldGZpZCwNCi0JCQkJbWluX3QoY29u
c3QgaW50LCBjaWZzX3NiLT53c2l6ZSwgd3JpdGVfc2l6ZSAtIHRvdGFsX3dy
aXR0ZW4pLA0KKwkJCQltaW5fdChjb25zdCBpbnQsIGNpZnNfc2ItPndzaXpl
LA0KKwkJCQkgICAgICB3cml0ZV9zaXplIC0gdG90YWxfd3JpdHRlbiksDQog
CQkJCSpwb2Zmc2V0LCAmYnl0ZXNfd3JpdHRlbiwNCiAJCQkJTlVMTCwgd3Jp
dGVfZGF0YSArIHRvdGFsX3dyaXR0ZW4sIGxvbmdfb3ApOw0KIAkJfQ0KQEAg
LTY4Nyw3ICs2OTcsOCBAQCBzc2l6ZV90IGNpZnNfdXNlcl93cml0ZShzdHJ1
Y3QgZmlsZSAqZmlsDQogCQkJfQ0KIAkJfSBlbHNlDQogCQkJKnBvZmZzZXQg
Kz0gYnl0ZXNfd3JpdHRlbjsNCi0JCWxvbmdfb3AgPSBGQUxTRTsgLyogc3Vi
c2VxdWVudCB3cml0ZXMgZmFzdCAtIDE1IHNlY29uZHMgaXMgcGxlbnR5ICov
DQorCQlsb25nX29wID0gRkFMU0U7IC8qIHN1YnNlcXVlbnQgd3JpdGVzIGZh
c3QgLQ0KKwkJCQkgICAgMTUgc2Vjb25kcyBpcyBwbGVudHkgKi8NCiAJfQ0K
IA0KICNpZmRlZiBDT05GSUdfQ0lGU19TVEFUUw0KQEAgLTcwNyw3ICs3MTgs
OCBAQCBzc2l6ZV90IGNpZnNfdXNlcl93cml0ZShzdHJ1Y3QgZmlsZSAqZmls
DQogCQkJCWN1cnJlbnRfZnNfdGltZShpbm9kZS0+aV9zYik7DQogCQkJaWYg
KHRvdGFsX3dyaXR0ZW4gPiAwKSB7DQogCQkJCWlmICgqcG9mZnNldCA+IGZp
bGUtPmZfZGVudHJ5LT5kX2lub2RlLT5pX3NpemUpDQotCQkJCQlpX3NpemVf
d3JpdGUoZmlsZS0+Zl9kZW50cnktPmRfaW5vZGUsICpwb2Zmc2V0KTsNCisJ
CQkJCWlfc2l6ZV93cml0ZShmaWxlLT5mX2RlbnRyeS0+ZF9pbm9kZSwNCisJ
CQkJCSpwb2Zmc2V0KTsNCiAJCQl9DQogCQkJbWFya19pbm9kZV9kaXJ0eV9z
eW5jKGZpbGUtPmZfZGVudHJ5LT5kX2lub2RlKTsNCiAJCX0NCkBAIC03NTIs
NyArNzY0LDcgQEAgc3RhdGljIHNzaXplX3QgY2lmc193cml0ZShzdHJ1Y3Qg
ZmlsZSAqZg0KIAl9DQogDQogCWlmICgqcG9mZnNldCA+IGZpbGUtPmZfZGVu
dHJ5LT5kX2lub2RlLT5pX3NpemUpDQotCQlsb25nX29wID0gMjsgIC8qIHdy
aXRlcyBwYXN0IGVuZCBvZiBmaWxlIGNhbiB0YWtlIGEgbG9uZyB0aW1lICov
DQorCQlsb25nX29wID0gMjsgLyogd3JpdGVzIHBhc3QgZW5kIG9mIGZpbGUg
Y2FuIHRha2UgYSBsb25nIHRpbWUgKi8NCiAJZWxzZQ0KIAkJbG9uZ19vcCA9
IDE7DQogDQpAQCAtNzY1LDcgKzc3Nyw4IEBAIHN0YXRpYyBzc2l6ZV90IGNp
ZnNfd3JpdGUoc3RydWN0IGZpbGUgKmYNCiAJCQkJRnJlZVhpZCh4aWQpOw0K
IAkJCS8qIGlmIHdlIGhhdmUgZ290dGVuIGhlcmUgd2UgaGF2ZSB3cml0dGVu
IHNvbWUgZGF0YQ0KIAkJCSAgIGFuZCBibG9ja2VkLCBhbmQgdGhlIGZpbGUg
aGFzIGJlZW4gZnJlZWQgb24gdXMNCi0JCQkgICB3aGlsZSB3ZSBibG9ja2Vk
IHNvIHJldHVybiB3aGF0IHdlIG1hbmFnZWQgdG8gd3JpdGUgKi8NCisJCQkg
ICB3aGlsZSB3ZSBibG9ja2VkIHNvIHJldHVybiB3aGF0IHdlIG1hbmFnZWQg
dG8gDQorCQkJICAgd3JpdGUgKi8NCiAJCQkJcmV0dXJuIHRvdGFsX3dyaXR0
ZW47DQogCQkJfSANCiAJCQlpZiAob3Blbl9maWxlLT5jbG9zZVBlbmQpIHsN
CkBAIC03ODMsNyArNzk2LDggQEAgc3RhdGljIHNzaXplX3QgY2lmc193cml0
ZShzdHJ1Y3QgZmlsZSAqZg0KIAkJCQl9DQogCQkJCS8qIHdlIGNvdWxkIGRl
YWRsb2NrIGlmIHdlIGNhbGxlZA0KIAkJCQkgICBmaWxlbWFwX2ZkYXRhd2Fp
dCBmcm9tIGhlcmUgc28gdGVsbA0KLQkJCQkgICByZW9wZW5fZmlsZSBub3Qg
dG8gZmx1c2ggZGF0YSB0byBzZXJ2ZXIgbm93ICovDQorCQkJCSAgIHJlb3Bl
bl9maWxlIG5vdCB0byBmbHVzaCBkYXRhIHRvIA0KKwkJCQkgICBzZXJ2ZXIg
bm93ICovDQogCQkJCXJjID0gY2lmc19yZW9wZW5fZmlsZShmaWxlLT5mX2Rl
bnRyeS0+ZF9pbm9kZSwNCiAJCQkJCWZpbGUsIEZBTFNFKTsNCiAJCQkJaWYg
KHJjICE9IDApDQpAQCAtNzkyLDcgKzgwNiw4IEBAIHN0YXRpYyBzc2l6ZV90
IGNpZnNfd3JpdGUoc3RydWN0IGZpbGUgKmYNCiANCiAJCQlyYyA9IENJRlNT
TUJXcml0ZSh4aWQsIHBUY29uLA0KIAkJCQkgb3Blbl9maWxlLT5uZXRmaWQs
DQotCQkJCSBtaW5fdChjb25zdCBpbnQsIGNpZnNfc2ItPndzaXplLCB3cml0
ZV9zaXplIC0gdG90YWxfd3JpdHRlbiksDQorCQkJCSBtaW5fdChjb25zdCBp
bnQsIGNpZnNfc2ItPndzaXplLCANCisJCQkJICAgICAgIHdyaXRlX3NpemUg
LSB0b3RhbF93cml0dGVuKSwNCiAJCQkJICpwb2Zmc2V0LCAmYnl0ZXNfd3Jp
dHRlbiwNCiAJCQkJIHdyaXRlX2RhdGEgKyB0b3RhbF93cml0dGVuLCBOVUxM
LCBsb25nX29wKTsNCiAJCX0NCkBAIC04MDUsNyArODIwLDggQEAgc3RhdGlj
IHNzaXplX3QgY2lmc193cml0ZShzdHJ1Y3QgZmlsZSAqZg0KIAkJCX0NCiAJ
CX0gZWxzZQ0KIAkJCSpwb2Zmc2V0ICs9IGJ5dGVzX3dyaXR0ZW47DQotCQls
b25nX29wID0gRkFMU0U7IC8qIHN1YnNlcXVlbnQgd3JpdGVzIGZhc3QgLSAx
NSBzZWNvbmRzIGlzIHBsZW50eSAqLw0KKwkJbG9uZ19vcCA9IEZBTFNFOyAv
KiBzdWJzZXF1ZW50IHdyaXRlcyBmYXN0IC0gDQorCQkJCSAgICAxNSBzZWNv
bmRzIGlzIHBsZW50eSAqLw0KIAl9DQogDQogI2lmZGVmIENPTkZJR19DSUZT
X1NUQVRTDQpAQCAtODI0LDcgKzg0MCw4IEBAIHN0YXRpYyBzc2l6ZV90IGNp
ZnNfd3JpdGUoc3RydWN0IGZpbGUgKmYNCiAJCQlmaWxlLT5mX2RlbnRyeS0+
ZF9pbm9kZS0+aV9tdGltZSA9IENVUlJFTlRfVElNRTsNCiAJCQlpZiAodG90
YWxfd3JpdHRlbiA+IDApIHsNCiAJCQkJaWYgKCpwb2Zmc2V0ID4gZmlsZS0+
Zl9kZW50cnktPmRfaW5vZGUtPmlfc2l6ZSkNCi0JCQkJCWlfc2l6ZV93cml0
ZShmaWxlLT5mX2RlbnRyeS0+ZF9pbm9kZSwgKnBvZmZzZXQpOw0KKwkJCQkJ
aV9zaXplX3dyaXRlKGZpbGUtPmZfZGVudHJ5LT5kX2lub2RlLCANCisJCQkJ
CQkgICAgICpwb2Zmc2V0KTsNCiAJCQl9DQogCQkJbWFya19pbm9kZV9kaXJ0
eV9zeW5jKGZpbGUtPmZfZGVudHJ5LT5kX2lub2RlKTsNCiAJCX0NCkBAIC04
NzUsNyArODkyLDYgQEAgc3RhdGljIGludCBjaWZzX3BhcnRpYWxwYWdld3Jp
dGUoc3RydWN0IA0KIAkvKiBjaGVjayB0byBtYWtlIHN1cmUgdGhhdCB3ZSBh
cmUgbm90IGV4dGVuZGluZyB0aGUgZmlsZSAqLw0KIAlpZiAobWFwcGluZy0+
aG9zdC0+aV9zaXplIC0gb2Zmc2V0IDwgKGxvZmZfdCl0bykNCiAJCXRvID0g
KHVuc2lnbmVkKShtYXBwaW5nLT5ob3N0LT5pX3NpemUgLSBvZmZzZXQpOyAN
Ci0JCQ0KIA0KIAljaWZzSW5vZGUgPSBDSUZTX0kobWFwcGluZy0+aG9zdCk7
DQogCXJlYWRfbG9jaygmR2xvYmFsU01CU2VzbG9jayk7IA0KQEAgLTg4OSwy
NyArOTA1LDI5IEBAIHN0YXRpYyBpbnQgY2lmc19wYXJ0aWFscGFnZXdyaXRl
KHN0cnVjdCANCiAJCSAgICgob3Blbl9maWxlLT5wZmlsZS0+Zl9mbGFncyAm
IE9fUkRXUikgfHwgDQogCQkJKG9wZW5fZmlsZS0+cGZpbGUtPmZfZmxhZ3Mg
JiBPX1dST05MWSkpKSB7DQogCQkJcmVhZF91bmxvY2soJkdsb2JhbFNNQlNl
c2xvY2spOw0KLQkJCWJ5dGVzX3dyaXR0ZW4gPSBjaWZzX3dyaXRlKG9wZW5f
ZmlsZS0+cGZpbGUsIHdyaXRlX2RhdGEsDQotCQkJCQl0by1mcm9tLCAmb2Zm
c2V0KTsNCisJCQlieXRlc193cml0dGVuID0gY2lmc193cml0ZShvcGVuX2Zp
bGUtPnBmaWxlLA0KKwkJCQkJCXdyaXRlX2RhdGEsIHRvLWZyb20sDQorCQkJ
CQkJJm9mZnNldCk7DQogCQkJcmVhZF9sb2NrKCZHbG9iYWxTTUJTZXNsb2Nr
KTsNCiAJCS8qIERvZXMgbW0gb3IgdmZzIGFscmVhZHkgc2V0IHRpbWVzPyAq
Lw0KLQkJCWlub2RlLT5pX2F0aW1lID0gaW5vZGUtPmlfbXRpbWUgPSBjdXJy
ZW50X2ZzX3RpbWUoaW5vZGUtPmlfc2IpOw0KKwkJCWlub2RlLT5pX2F0aW1l
ID0gDQorCQkJaW5vZGUtPmlfbXRpbWUgPSBjdXJyZW50X2ZzX3RpbWUoaW5v
ZGUtPmlfc2IpOw0KIAkJCWlmICgoYnl0ZXNfd3JpdHRlbiA+IDApICYmIChv
ZmZzZXQpKSB7DQogCQkJCXJjID0gMDsNCiAJCQl9IGVsc2UgaWYgKGJ5dGVz
X3dyaXR0ZW4gPCAwKSB7DQogCQkJCWlmIChyYyA9PSAtRUJBREYpIHsNCi0J
CQkJLyogaGF2ZSBzZWVuIGEgY2FzZSBpbiB3aGljaA0KLQkJCQlrZXJuZWwg
c2VlbWVkIHRvIGhhdmUgY2xvc2VkL2ZyZWVkIGEgZmlsZQ0KLQkJCQlldmVu
IHdpdGggd3JpdGVzIGFjdGl2ZSBzbyB3ZSBtaWdodCBhcyB3ZWxsDQotCQkJ
CXNlZSBpZiB0aGVyZSBhcmUgb3RoZXIgZmlsZSBzdHJ1Y3RzIHRvIHRyeQ0K
LQkJCQlmb3IgdGhlIHNhbWUgaW5vZGUgYmVmb3JlIGdpdmluZyB1cCAqLw0K
KwkJCQkvKiBoYXZlIHNlZW4gYSBjYXNlIGluIHdoaWNoIGtlcm5lbCBzZWVt
ZWQgdG8NCisJCQkJICAgaGF2ZSBjbG9zZWQvZnJlZWQgYSBmaWxlIGV2ZW4g
d2l0aCB3cml0ZXMNCisJCQkJICAgYWN0aXZlIHNvIHdlIG1pZ2h0IGFzIHdl
bGwgc2VlIGlmIHRoZXJlIGFyZQ0KKwkJCQkgICBvdGhlciBmaWxlIHN0cnVj
dHMgdG8gdHJ5IGZvciB0aGUgc2FtZQ0KKwkJCQkgICBpbm9kZSBiZWZvcmUg
Z2l2aW5nIHVwICovDQogCQkJCQljb250aW51ZTsNCiAJCQkJfSBlbHNlDQog
CQkJCQlyYyA9IGJ5dGVzX3dyaXR0ZW47DQogCQkJfQ0KLQkJCWJyZWFrOyAg
Lyogbm93IHRoYXQgd2UgZm91bmQgYSB2YWxpZCBmaWxlIGhhbmRsZQ0KLQkJ
CQlhbmQgdHJpZWQgdG8gd3JpdGUgdG8gaXQgd2UgYXJlIGRvbmUsIG5vDQot
CQkJCXNlbnNlIGNvbnRpbnVpbmcgdG8gbG9vcCBsb29raW5nIGZvciBhbm90
aGVyICovDQorCQkJYnJlYWs7ICAvKiBub3cgdGhhdCB3ZSBmb3VuZCBhIHZh
bGlkIGZpbGUgaGFuZGxlIGFuZA0KKwkJCQkgICB0cmllZCB0byB3cml0ZSB0
byBpdCB3ZSBhcmUgZG9uZSwgbm8gc2Vuc2UNCisJCQkJICAgY29udGludWlu
ZyB0byBsb29wIGxvb2tpbmcgZm9yIGFub3RoZXIgKi8NCiAJCX0NCiAJCWlm
ICh0bXAtPm5leHQgPT0gTlVMTCkgew0KIAkJCWNGWUkoMSwgKCJGaWxlIGlu
c3RhbmNlICVwIHJlbW92ZWQiLCB0bXApKTsNCkBAIC05MzUsMTAgKzk1Mywx
MCBAQCBzdGF0aWMgaW50IGNpZnNfd3JpdGVwYWdlcyhzdHJ1Y3QgYWRkcmVz
DQogDQogCXhpZCA9IEdldFhpZCgpOw0KIA0KLQkvKiBGaW5kIGNvbnRpZ3Vv
dXMgcGFnZXMgdGhlbiBpdGVyYXRlIHRocm91Z2ggcmVwZWF0aW5nICovDQot
CS8qIGNhbGwgMTZLIHdyaXRlIHRoZW4gU2V0cGFnZXVwdG9kYXRlIG9yIGlm
IExBUkdFX1dSSVRFX1ggKi8NCi0JLyogc3VwcG9ydCB0aGVuIHNlbmQgbGFy
Z2VyIHdyaXRlcyB2aWEga2V2ZWMgc28gYXMgdG8gZWxpbWluYXRlICovDQot
CS8qIGEgbWVtY3B5ICovDQorCS8qIEZpbmQgY29udGlndW91cyBwYWdlcyB0
aGVuIGl0ZXJhdGUgdGhyb3VnaCByZXBlYXRpbmcNCisJICAgY2FsbCAxNksg
d3JpdGUgdGhlbiBTZXRwYWdldXB0b2RhdGUgb3IgaWYgTEFSR0VfV1JJVEVf
WA0KKwkgICBzdXBwb3J0IHRoZW4gc2VuZCBsYXJnZXIgd3JpdGVzIHZpYSBr
ZXZlYyBzbyBhcyB0byBlbGltaW5hdGUNCisJICAgYSBtZW1jcHkgKi8NCiAJ
RnJlZVhpZCh4aWQpOw0KIAlyZXR1cm4gcmM7DQogfQ0KQEAgLTk3NCw3ICs5
OTIsOCBAQCBzdGF0aWMgaW50IGNpZnNfY29tbWl0X3dyaXRlKHN0cnVjdCBm
aWxlDQogCWNoYXIgKnBhZ2VfZGF0YTsNCiANCiAJeGlkID0gR2V0WGlkKCk7
DQotCWNGWUkoMSwgKCJjb21taXQgd3JpdGUgZm9yIHBhZ2UgJXAgdXAgdG8g
cG9zaXRpb24gJWxsZCBmb3IgJWQiLCBwYWdlLCBwb3NpdGlvbiwgdG8pKTsN
CisJY0ZZSSgxLCAoImNvbW1pdCB3cml0ZSBmb3IgcGFnZSAlcCB1cCB0byBw
b3NpdGlvbiAlbGxkIGZvciAlZCIsIA0KKwkJIHBhZ2UsIHBvc2l0aW9uLCB0
bykpOw0KIAlpZiAocG9zaXRpb24gPiBpbm9kZS0+aV9zaXplKSB7DQogCQlp
X3NpemVfd3JpdGUoaW5vZGUsIHBvc2l0aW9uKTsNCiAJCS8qIGlmIChmaWxl
LT5wcml2YXRlX2RhdGEgPT0gTlVMTCkgew0KQEAgLTk4NiwxNCArMTAwNSwx
NiBAQCBzdGF0aWMgaW50IGNpZnNfY29tbWl0X3dyaXRlKHN0cnVjdCBmaWxl
DQogCQkJd2hpbGUgKHJjID09IC1FQUdBSU4pIHsNCiAJCQkJaWYgKChvcGVu
X2ZpbGUtPmludmFsaWRIYW5kbGUpICYmIA0KIAkJCQkgICAgKCFvcGVuX2Zp
bGUtPmNsb3NlUGVuZCkpIHsNCi0JCQkJCXJjID0gY2lmc19yZW9wZW5fZmls
ZShmaWxlLT5mX2RlbnRyeS0+ZF9pbm9kZSxmaWxlKTsNCisJCQkJCXJjID0g
Y2lmc19yZW9wZW5fZmlsZSgNCisJCQkJCQlmaWxlLT5mX2RlbnRyeS0+ZF9p
bm9kZSwgZmlsZSk7DQogCQkJCQlpZiAocmMgIT0gMCkNCiAJCQkJCQlicmVh
azsNCiAJCQkJfQ0KIAkJCQlpZiAoIW9wZW5fZmlsZS0+Y2xvc2VQZW5kKSB7
DQotCQkJCQlyYyA9IENJRlNTTUJTZXRGaWxlU2l6ZSh4aWQsIGNpZnNfc2It
PnRjb24sIA0KLQkJCQkJCXBvc2l0aW9uLCBvcGVuX2ZpbGUtPm5ldGZpZCwN
Ci0JCQkJCQlvcGVuX2ZpbGUtPnBpZCxGQUxTRSk7DQorCQkJCQlyYyA9IENJ
RlNTTUJTZXRGaWxlU2l6ZSh4aWQsDQorCQkJCQkJY2lmc19zYi0+dGNvbiwg
cG9zaXRpb24sDQorCQkJCQkJb3Blbl9maWxlLT5uZXRmaWQsDQorCQkJCQkJ
b3Blbl9maWxlLT5waWQsIEZBTFNFKTsNCiAJCQkJfSBlbHNlIHsNCiAJCQkJ
CXJjID0gLUVCQURGOw0KIAkJCQkJYnJlYWs7DQpAQCAtMTAxMSwxOCArMTAz
MiwxNyBAQCBzdGF0aWMgaW50IGNpZnNfY29tbWl0X3dyaXRlKHN0cnVjdCBm
aWxlDQogCQkJRnJlZVhpZCh4aWQpOw0KIAkJCXJldHVybiByYzsNCiAJCX0N
Ci0JCS8qIHRoaXMgaXMgcHJvYmFibHkgYmV0dGVyIHRoYW4gZGlyZWN0bHkg
Y2FsbGluZyANCi0JCXBhcnRpYWxwYWdlX3dyaXRlIHNpbmNlIGluIHRoaXMg
ZnVuY3Rpb24NCi0JCXRoZSBmaWxlIGhhbmRsZSBpcyBrbm93biB3aGljaCB3
ZSBtaWdodCBhcyB3ZWxsDQotCQlsZXZlcmFnZSAqLw0KLQkJLyogQkIgY2hl
Y2sgaWYgYW55dGhpbmcgZWxzZSBtaXNzaW5nIG91dCBvZiBwcHcgKi8NCi0J
CS8qIHN1Y2ggYXMgdXBkYXRpbmcgbGFzdCB3cml0ZSB0aW1lICovDQorCQkv
KiB0aGlzIGlzIHByb2JhYmx5IGJldHRlciB0aGFuIGRpcmVjdGx5IGNhbGxp
bmcNCisJCSAgIHBhcnRpYWxwYWdlX3dyaXRlIHNpbmNlIGluIHRoaXMgZnVu
Y3Rpb24gdGhlIGZpbGUgaGFuZGxlIGlzDQorCQkgICBrbm93biB3aGljaCB3
ZSBtaWdodCBhcyB3ZWxsCWxldmVyYWdlICovDQorCQkvKiBCQiBjaGVjayBp
ZiBhbnl0aGluZyBlbHNlIG1pc3Npbmcgb3V0IG9mIHBwdw0KKwkJICAgc3Vj
aCBhcyB1cGRhdGluZyBsYXN0IHdyaXRlIHRpbWUgKi8NCiAJCXBhZ2VfZGF0
YSA9IGttYXAocGFnZSk7DQogCQlyYyA9IGNpZnNfd3JpdGUoZmlsZSwgcGFn
ZV9kYXRhICsgb2Zmc2V0LCB0by1vZmZzZXQsDQogCQkJCSZwb3NpdGlvbik7
DQogCQlpZiAocmMgPiAwKQ0KIAkJCXJjID0gMDsNCi0JCS8qIGVsc2UgaWYg
cmMgPCAwIHNob3VsZCB3ZSBzZXQgd3JpdGViZWhpbmQgcmM/ICovDQorCQkv
KiBlbHNlIGlmIChyYyA8IDApIHNob3VsZCB3ZSBzZXQgd3JpdGViZWhpbmQg
cmM/ICovDQogCQlrdW5tYXAocGFnZSk7DQogCX0gZWxzZSB7CQ0KIAkJc2V0
X3BhZ2VfZGlydHkocGFnZSk7DQpAQCAtMTA2Nyw3ICsxMDg3LDcgQEAgaW50
IGNpZnNfZnN5bmMoc3RydWN0IGZpbGUgKmZpbGUsIHN0cnVjdA0KIAkJcmV0
dXJuIDA7ICovDQogDQogLyoJZmlsbCBpbiBycGFnZXMgdGhlbiANCi0JcmVz
dWx0ID0gY2lmc19wYWdlaW5faW5vZGUoaW5vZGUsIGluZGV4LCBycGFnZXMp
OyAqLy8qIEJCIGZpbmlzaCAqLw0KKwlyZXN1bHQgPSBjaWZzX3BhZ2Vpbl9p
bm9kZShpbm9kZSwgaW5kZXgsIHJwYWdlcyk7ICovIC8qIEJCIGZpbmlzaCAq
Lw0KIA0KIC8qCWNGWUkoMSwgKCJycGFnZXMgaXMgJWQgZm9yIHN5bmMgcGFn
ZSBvZiBJbmRleCAlbGQgIiwgcnBhZ2VzLCBpbmRleCkpOw0KIA0KQEAgLTEw
NzksMjQgKzEwOTksMjMgQEAgaW50IGNpZnNfZnN5bmMoc3RydWN0IGZpbGUg
KmZpbGUsIHN0cnVjdA0KIC8qDQogICogQXMgZmlsZSBjbG9zZXMsIGZsdXNo
IGFsbCBjYWNoZWQgd3JpdGUgZGF0YSBmb3IgdGhpcyBpbm9kZSBjaGVja2lu
Zw0KICAqIGZvciB3cml0ZSBiZWhpbmQgZXJyb3JzLg0KLSAqDQogICovDQog
aW50IGNpZnNfZmx1c2goc3RydWN0IGZpbGUgKmZpbGUpDQogew0KIAlzdHJ1
Y3QgaW5vZGUgKiBpbm9kZSA9IGZpbGUtPmZfZGVudHJ5LT5kX2lub2RlOw0K
IAlpbnQgcmMgPSAwOw0KIA0KLQkvKiBSYXRoZXIgdGhhbiBkbyB0aGUgc3Rl
cHMgbWFudWFsbHk6ICovDQotCS8qIGxvY2sgdGhlIGlub2RlIGZvciB3cml0
aW5nICovDQotCS8qIGxvb3AgdGhyb3VnaCBwYWdlcyBsb29raW5nIGZvciB3
cml0ZSBiZWhpbmQgZGF0YSAoZGlydHkgcGFnZXMpICovDQotCS8qIGNvYWxl
c2NlIGludG8gY29udGlndW91cyAxNksgKG9yIHNtYWxsZXIpIGNodW5rcyB0
byB3cml0ZSB0byBzZXJ2ZXIgKi8NCi0JLyogc2VuZCB0byBzZXJ2ZXIgKHBy
ZWZlciBpbiBwYXJhbGxlbCkgKi8NCi0JLyogZGVhbCB3aXRoIHdyaXRlYmVo
aW5kIGVycm9ycyAqLw0KLQkvKiB1bmxvY2sgaW5vZGUgZm9yIHdyaXRpbmcg
Ki8NCi0JLyogZmlsZW1hcGZkYXRhd3JpdGUgYXBwZWFycyBlYXNpZXIgZm9y
IHRoZSB0aW1lIGJlaW5nICovDQorCS8qIFJhdGhlciB0aGFuIGRvIHRoZSBz
dGVwcyBtYW51YWxseToNCisJICAgbG9jayB0aGUgaW5vZGUgZm9yIHdyaXRp
bmcNCisJICAgbG9vcCB0aHJvdWdoIHBhZ2VzIGxvb2tpbmcgZm9yIHdyaXRl
IGJlaGluZCBkYXRhIChkaXJ0eSBwYWdlcykNCisJICAgY29hbGVzY2UgaW50
byBjb250aWd1b3VzIDE2SyAob3Igc21hbGxlcikgY2h1bmtzIHRvIHdyaXRl
IHRvIHNlcnZlcg0KKwkgICBzZW5kIHRvIHNlcnZlciAocHJlZmVyIGluIHBh
cmFsbGVsKQ0KKwkgICBkZWFsIHdpdGggd3JpdGViZWhpbmQgZXJyb3JzDQor
CSAgIHVubG9jayBpbm9kZSBmb3Igd3JpdGluZw0KKwkgICBmaWxlbWFwZmRh
dGF3cml0ZSBhcHBlYXJzIGVhc2llciBmb3IgdGhlIHRpbWUgYmVpbmcgKi8N
CiANCiAJcmMgPSBmaWxlbWFwX2ZkYXRhd3JpdGUoaW5vZGUtPmlfbWFwcGlu
Zyk7DQotCWlmIChyYyA9PSAwKSAvKiByZXNldCB3YiByYyBpZiB3ZSB3ZXJl
IGFibGUgdG8gd3JpdGUgb3V0IGRpcnR5IHBhZ2VzICovDQorCWlmICghcmMp
IC8qIHJlc2V0IHdiIHJjIGlmIHdlIHdlcmUgYWJsZSB0byB3cml0ZSBvdXQg
ZGlydHkgcGFnZXMgKi8NCiAJCUNJRlNfSShpbm9kZSktPndyaXRlX2JlaGlu
ZF9yYyA9IDA7DQogCQkNCiAJY0ZZSSgxLCAoIkZsdXNoIGlub2RlICVwIGZp
bGUgJXAgcmMgJWQiLGlub2RlLGZpbGUscmMpKTsNCkBAIC0xMTMyLDEzICsx
MTUxLDE2IEBAIHNzaXplX3QgY2lmc191c2VyX3JlYWQoc3RydWN0IGZpbGUg
KmZpbGUNCiAJaWYgKChmaWxlLT5mX2ZsYWdzICYgT19BQ0NNT0RFKSA9PSBP
X1dST05MWSkgew0KIAkJY0ZZSSgxLCAoImF0dGVtcHRpbmcgcmVhZCBvbiB3
cml0ZSBvbmx5IGZpbGUgaW5zdGFuY2UiKSk7DQogCX0NCi0JZm9yICh0b3Rh
bF9yZWFkID0gMCwgY3VycmVudF9vZmZzZXQgPSByZWFkX2RhdGE7IHJlYWRf
c2l6ZSA+IHRvdGFsX3JlYWQ7DQotCQkJCXRvdGFsX3JlYWQgKz0gYnl0ZXNf
cmVhZCwgY3VycmVudF9vZmZzZXQgKz0gYnl0ZXNfcmVhZCkgew0KLQkJY3Vy
cmVudF9yZWFkX3NpemUgPSBtaW5fdChjb25zdCBpbnQsIHJlYWRfc2l6ZSAt
IHRvdGFsX3JlYWQsIGNpZnNfc2ItPnJzaXplKTsNCisJZm9yICh0b3RhbF9y
ZWFkID0gMCwgY3VycmVudF9vZmZzZXQgPSByZWFkX2RhdGE7DQorCSAgICAg
cmVhZF9zaXplID4gdG90YWxfcmVhZDsNCisJICAgICB0b3RhbF9yZWFkICs9
IGJ5dGVzX3JlYWQsIGN1cnJlbnRfb2Zmc2V0ICs9IGJ5dGVzX3JlYWQpIHsN
CisJCWN1cnJlbnRfcmVhZF9zaXplID0gbWluX3QoY29uc3QgaW50LCByZWFk
X3NpemUgLSB0b3RhbF9yZWFkLCANCisJCQkJCSAgY2lmc19zYi0+cnNpemUp
Ow0KIAkJcmMgPSAtRUFHQUlOOw0KIAkJc21iX3JlYWRfZGF0YSA9IE5VTEw7
DQogCQl3aGlsZSAocmMgPT0gLUVBR0FJTikgew0KLQkJCWlmICgob3Blbl9m
aWxlLT5pbnZhbGlkSGFuZGxlKSAmJiAoIW9wZW5fZmlsZS0+Y2xvc2VQZW5k
KSkgew0KKwkJCWlmICgob3Blbl9maWxlLT5pbnZhbGlkSGFuZGxlKSAmJiAN
CisJCQkgICAgKCFvcGVuX2ZpbGUtPmNsb3NlUGVuZCkpIHsNCiAJCQkJcmMg
PSBjaWZzX3Jlb3Blbl9maWxlKGZpbGUtPmZfZGVudHJ5LT5kX2lub2RlLA0K
IAkJCQkJZmlsZSwgVFJVRSk7DQogCQkJCWlmIChyYyAhPSAwKQ0KQEAgLTEx
NTEsOCArMTE3MywxMCBAQCBzc2l6ZV90IGNpZnNfdXNlcl9yZWFkKHN0cnVj
dCBmaWxlICpmaWxlDQogCQkJCSAmYnl0ZXNfcmVhZCwgJnNtYl9yZWFkX2Rh
dGEpOw0KIA0KIAkJCXBTTUJyID0gKHN0cnVjdCBzbWJfY29tX3JlYWRfcnNw
ICopc21iX3JlYWRfZGF0YTsNCi0JCQlpZiAoY29weV90b191c2VyKGN1cnJl
bnRfb2Zmc2V0LHNtYl9yZWFkX2RhdGEgKyA0IC8qIFJGQzEwMDEgaGRyKi8N
Ci0JCQkJKyBsZTE2X3RvX2NwdShwU01Cci0+RGF0YU9mZnNldCksIGJ5dGVz
X3JlYWQpKSB7DQorCQkJaWYgKGNvcHlfdG9fdXNlcihjdXJyZW50X29mZnNl
dCwgDQorCQkJCQkgc21iX3JlYWRfZGF0YSArIDQgLyogUkZDMTAwMSBoZHIg
Ki8NCisJCQkJCSArIGxlMTZfdG9fY3B1KHBTTUJyLT5EYXRhT2Zmc2V0KSwg
DQorCQkJCQkgYnl0ZXNfcmVhZCkpIHsNCiAJCQkJcmMgPSAtRUZBVUxUOw0K
IAkJCQlGcmVlWGlkKHhpZCk7DQogCQkJCXJldHVybiByYzsNCkBAIC0xMjA5
LDEyICsxMjMzLDE1IEBAIHN0YXRpYyBzc2l6ZV90IGNpZnNfcmVhZChzdHJ1
Y3QgZmlsZSAqZmkNCiAJaWYgKChmaWxlLT5mX2ZsYWdzICYgT19BQ0NNT0RF
KSA9PSBPX1dST05MWSkNCiAJCWNGWUkoMSwgKCJhdHRlbXB0aW5nIHJlYWQg
b24gd3JpdGUgb25seSBmaWxlIGluc3RhbmNlIikpOw0KIA0KLQlmb3IgKHRv
dGFsX3JlYWQgPSAwLCBjdXJyZW50X29mZnNldCA9IHJlYWRfZGF0YTsgcmVh
ZF9zaXplID4gdG90YWxfcmVhZDsNCi0JCQkJdG90YWxfcmVhZCArPSBieXRl
c19yZWFkLCBjdXJyZW50X29mZnNldCArPSBieXRlc19yZWFkKSB7DQotCQlj
dXJyZW50X3JlYWRfc2l6ZSA9IG1pbl90KGNvbnN0IGludCwgcmVhZF9zaXpl
IC0gdG90YWxfcmVhZCwgY2lmc19zYi0+cnNpemUpOw0KKwlmb3IgKHRvdGFs
X3JlYWQgPSAwLCBjdXJyZW50X29mZnNldCA9IHJlYWRfZGF0YTsgDQorCSAg
ICAgcmVhZF9zaXplID4gdG90YWxfcmVhZDsNCisJICAgICB0b3RhbF9yZWFk
ICs9IGJ5dGVzX3JlYWQsIGN1cnJlbnRfb2Zmc2V0ICs9IGJ5dGVzX3JlYWQp
IHsNCisJCWN1cnJlbnRfcmVhZF9zaXplID0gbWluX3QoY29uc3QgaW50LCBy
ZWFkX3NpemUgLSB0b3RhbF9yZWFkLA0KKwkJCQkJICBjaWZzX3NiLT5yc2l6
ZSk7DQogCQlyYyA9IC1FQUdBSU47DQogCQl3aGlsZSAocmMgPT0gLUVBR0FJ
Tikgew0KLQkJCWlmICgob3Blbl9maWxlLT5pbnZhbGlkSGFuZGxlKSAmJiAo
IW9wZW5fZmlsZS0+Y2xvc2VQZW5kKSkgew0KKwkJCWlmICgob3Blbl9maWxl
LT5pbnZhbGlkSGFuZGxlKSAmJiANCisJCQkgICAgKCFvcGVuX2ZpbGUtPmNs
b3NlUGVuZCkpIHsNCiAJCQkJcmMgPSBjaWZzX3Jlb3Blbl9maWxlKGZpbGUt
PmZfZGVudHJ5LT5kX2lub2RlLA0KIAkJCQkJZmlsZSwgVFJVRSk7DQogCQkJ
CWlmIChyYyAhPSAwKQ0KQEAgLTEyNTIsNyArMTI3OSw3IEBAIGludCBjaWZz
X2ZpbGVfbW1hcChzdHJ1Y3QgZmlsZSAqZmlsZSwgc3QNCiAJc3RydWN0IGRl
bnRyeSAqZGVudHJ5ID0gZmlsZS0+Zl9kZW50cnk7DQogCWludCByYywgeGlk
Ow0KIA0KLSNpZmRlZiBDSUZTX0VYUEVSSU1FTlRBTCAgIC8qIEJCIGZpeG1l
IHJlZW5hYmxlIHdoZW4gY2lmc19yZWFkX3dyYXBwZXIgZml4ZWQgKi8NCisj
aWZkZWYgQ0lGU19FWFBFUklNRU5UQUwgLyogQkIgZml4bWUgcmVlbmFibGUg
d2hlbiBjaWZzX3JlYWRfd3JhcHBlciBmaXhlZCAqLw0KIAlpZiAoZGVudHJ5
LT5kX3NiKSB7DQogCQlzdHJ1Y3QgY2lmc19zYl9pbmZvICpjaWZzX3NiOw0K
IAkJY2lmc19zYiA9IENJRlNfU0Ioc2IpOw0KQEAgLTEyODksNyArMTMxNiw4
IEBAIHN0YXRpYyB2b2lkIGNpZnNfY29weV9jYWNoZV9wYWdlcyhzdHJ1Y3QN
CiAJCXBhZ2UgPSBsaXN0X2VudHJ5KHBhZ2VzLT5wcmV2LCBzdHJ1Y3QgcGFn
ZSwgbHJ1KTsNCiAJCWxpc3RfZGVsKCZwYWdlLT5scnUpOw0KIA0KLQkJaWYg
KGFkZF90b19wYWdlX2NhY2hlKHBhZ2UsIG1hcHBpbmcsIHBhZ2UtPmluZGV4
LCBHRlBfS0VSTkVMKSkgew0KKwkJaWYgKGFkZF90b19wYWdlX2NhY2hlKHBh
Z2UsIG1hcHBpbmcsIHBhZ2UtPmluZGV4LA0KKwkJCQkgICAgICBHRlBfS0VS
TkVMKSkgew0KIAkJCXBhZ2VfY2FjaGVfcmVsZWFzZShwYWdlKTsNCiAJCQlj
RllJKDEsICgiQWRkIHBhZ2UgY2FjaGUgZmFpbGVkIikpOw0KIAkJCWNvbnRp
bnVlOw0KQEAgLTEzMDAsNyArMTMyOCw4IEBAIHN0YXRpYyB2b2lkIGNpZnNf
Y29weV9jYWNoZV9wYWdlcyhzdHJ1Y3QNCiAJCWlmIChQQUdFX0NBQ0hFX1NJ
WkUgPiBieXRlc19yZWFkKSB7DQogCQkJbWVtY3B5KHRhcmdldCwgZGF0YSwg
Ynl0ZXNfcmVhZCk7DQogCQkJLyogemVybyB0aGUgdGFpbCBlbmQgb2YgdGhp
cyBwYXJ0aWFsIHBhZ2UgKi8NCi0JCQltZW1zZXQodGFyZ2V0ICtieXRlc19y
ZWFkLCAwLCBQQUdFX0NBQ0hFX1NJWkUgLSBieXRlc19yZWFkKTsNCisJCQlt
ZW1zZXQodGFyZ2V0ICsgYnl0ZXNfcmVhZCwgMCwgDQorCQkJICAgICAgIFBB
R0VfQ0FDSEVfU0laRSAtIGJ5dGVzX3JlYWQpOw0KIAkJCWJ5dGVzX3JlYWQg
PSAwOw0KIAkJfSBlbHNlIHsNCiAJCQltZW1jcHkodGFyZ2V0LCBkYXRhLCBQ
QUdFX0NBQ0hFX1NJWkUpOw0KQEAgLTEzNTgsNyArMTM4Nyw4IEBAIHN0YXRp
YyBpbnQgY2lmc19yZWFkcGFnZXMoc3RydWN0IGZpbGUgKmYNCiANCiAJCS8q
IGNvdW50IGFkamFjZW50IHBhZ2VzIHRoYXQgd2Ugd2lsbCByZWFkIGludG8g
Ki8NCiAJCWNvbnRpZ19wYWdlcyA9IDA7DQotCQlleHBlY3RlZF9pbmRleCA9
IGxpc3RfZW50cnkocGFnZV9saXN0LT5wcmV2LHN0cnVjdCBwYWdlLGxydSkt
PmluZGV4Ow0KKwkJZXhwZWN0ZWRfaW5kZXggPSANCisJCQlsaXN0X2VudHJ5
KHBhZ2VfbGlzdC0+cHJldiwgc3RydWN0IHBhZ2UsIGxydSktPmluZGV4Ow0K
IAkJbGlzdF9mb3JfZWFjaF9lbnRyeV9yZXZlcnNlKHRtcF9wYWdlLHBhZ2Vf
bGlzdCxscnUpIHsNCiAJCQlpZiAodG1wX3BhZ2UtPmluZGV4ID09IGV4cGVj
dGVkX2luZGV4KSB7DQogCQkJCWNvbnRpZ19wYWdlcysrOw0KQEAgLTEzNjks
MTUgKzEzOTksMTggQEAgc3RhdGljIGludCBjaWZzX3JlYWRwYWdlcyhzdHJ1
Y3QgZmlsZSAqZg0KIAkJaWYgKGNvbnRpZ19wYWdlcyArIGkgPiAgbnVtX3Bh
Z2VzKQ0KIAkJCWNvbnRpZ19wYWdlcyA9IG51bV9wYWdlcyAtIGk7DQogDQot
CQkvKiBmb3IgcmVhZHMgb3ZlciBhIGNlcnRhaW4gc2l6ZSBjb3VsZCBpbml0
aWF0ZSBhc3luYyByZWFkIGFoZWFkICovDQorCQkvKiBmb3IgcmVhZHMgb3Zl
ciBhIGNlcnRhaW4gc2l6ZSBjb3VsZCBpbml0aWF0ZSBhc3luYw0KKwkJICAg
cmVhZCBhaGVhZCAqLw0KIA0KIAkJcmVhZF9zaXplID0gY29udGlnX3BhZ2Vz
ICogUEFHRV9DQUNIRV9TSVpFOw0KIAkJLyogUmVhZCBzaXplIG5lZWRzIHRv
IGJlIGluIG11bHRpcGxlcyBvZiBvbmUgcGFnZSAqLw0KLQkJcmVhZF9zaXpl
ID0gbWluX3QoY29uc3QgdW5zaWduZWQgaW50LCByZWFkX3NpemUsIGNpZnNf
c2ItPnJzaXplICYgUEFHRV9DQUNIRV9NQVNLKTsNCisJCXJlYWRfc2l6ZSA9
IG1pbl90KGNvbnN0IHVuc2lnbmVkIGludCwgcmVhZF9zaXplLA0KKwkJCQkg
IGNpZnNfc2ItPnJzaXplICYgUEFHRV9DQUNIRV9NQVNLKTsNCiANCiAJCXJj
ID0gLUVBR0FJTjsNCiAJCXdoaWxlIChyYyA9PSAtRUFHQUlOKSB7DQotCQkJ
aWYgKChvcGVuX2ZpbGUtPmludmFsaWRIYW5kbGUpICYmICghb3Blbl9maWxl
LT5jbG9zZVBlbmQpKSB7DQorCQkJaWYgKChvcGVuX2ZpbGUtPmludmFsaWRI
YW5kbGUpICYmIA0KKwkJCSAgICAoIW9wZW5fZmlsZS0+Y2xvc2VQZW5kKSkg
ew0KIAkJCQlyYyA9IGNpZnNfcmVvcGVuX2ZpbGUoZmlsZS0+Zl9kZW50cnkt
PmRfaW5vZGUsDQogCQkJCQlmaWxlLCBUUlVFKTsNCiAJCQkJaWYgKHJjICE9
IDApDQpAQCAtMTQwMCw3ICsxNDMzLDggQEAgc3RhdGljIGludCBjaWZzX3Jl
YWRwYWdlcyhzdHJ1Y3QgZmlsZSAqZg0KIAkJCWNGWUkoMSwgKCJSZWFkIGVy
cm9yIGluIHJlYWRwYWdlczogJWQiLCByYykpOw0KIAkJCS8qIGNsZWFuIHVw
IHJlbWFpbmcgcGFnZXMgb2ZmIGxpc3QgKi8NCiAJCQl3aGlsZSAoIWxpc3Rf
ZW1wdHkocGFnZV9saXN0KSAmJiAoaSA8IG51bV9wYWdlcykpIHsNCi0JCQkJ
cGFnZSA9IGxpc3RfZW50cnkocGFnZV9saXN0LT5wcmV2LCBzdHJ1Y3QgcGFn
ZSwgbHJ1KTsNCisJCQkJcGFnZSA9IGxpc3RfZW50cnkocGFnZV9saXN0LT5w
cmV2LCBzdHJ1Y3QgcGFnZSwNCisJCQkJCQkgIGxydSk7DQogCQkJCWxpc3Rf
ZGVsKCZwYWdlLT5scnUpOw0KIAkJCQlwYWdlX2NhY2hlX3JlbGVhc2UocGFn
ZSk7DQogCQkJfQ0KQEAgLTE0MjEsMjQgKzE0NTUsMzMgQEAgc3RhdGljIGlu
dCBjaWZzX3JlYWRwYWdlcyhzdHJ1Y3QgZmlsZSAqZg0KIAkJCWlmICgoaW50
KShieXRlc19yZWFkICYgUEFHRV9DQUNIRV9NQVNLKSAhPSBieXRlc19yZWFk
KSB7DQogCQkJCWkrKzsgLyogYWNjb3VudCBmb3IgcGFydGlhbCBwYWdlICov
DQogDQotCQkJCS8qIHNlcnZlciBjb3B5IG9mIGZpbGUgY2FuIGhhdmUgc21h
bGxlciBzaXplIHRoYW4gY2xpZW50ICovDQotCQkJCS8qIEJCIGRvIHdlIG5l
ZWQgdG8gdmVyaWZ5IHRoaXMgY29tbW9uIGNhc2UgPyB0aGlzIGNhc2UgaXMg
b2sgLSANCi0JCQkJaWYgd2UgYXJlIGF0IHNlcnZlciBFT0Ygd2Ugd2lsbCBo
aXQgaXQgb24gbmV4dCByZWFkICovDQorCQkJCS8qIHNlcnZlciBjb3B5IG9m
IGZpbGUgY2FuIGhhdmUgc21hbGxlciBzaXplIA0KKwkJCQkgICB0aGFuIGNs
aWVudCAqLw0KKwkJCQkvKiBCQiBkbyB3ZSBuZWVkIHRvIHZlcmlmeSB0aGlz
IGNvbW1vbiBjYXNlID8gDQorCQkJCSAgIHRoaXMgY2FzZSBpcyBvayAtIGlm
IHdlIGFyZSBhdCBzZXJ2ZXIgRU9GIA0KKwkJCQkgICB3ZSB3aWxsIGhpdCBp
dCBvbiBuZXh0IHJlYWQgKi8NCiANCiAJCQkvKiB3aGlsZSAoIWxpc3RfZW1w
dHkocGFnZV9saXN0KSAmJiAoaSA8IG51bV9wYWdlcykpIHsNCi0JCQkJCXBh
Z2UgPSBsaXN0X2VudHJ5KHBhZ2VfbGlzdC0+cHJldiwgc3RydWN0IHBhZ2Us
IGxpc3QpOw0KKwkJCQkJcGFnZSA9IGxpc3RfZW50cnkocGFnZV9saXN0LT5w
cmV2LCANCisJCQkJCQkJICBzdHJ1Y3QgcGFnZSwgbGlzdCk7DQogCQkJCQls
aXN0X2RlbCgmcGFnZS0+bGlzdCk7DQogCQkJCQlwYWdlX2NhY2hlX3JlbGVh
c2UocGFnZSk7DQogCQkJCX0NCiAJCQkJYnJlYWs7ICovDQogCQkJfQ0KIAkJ
fSBlbHNlIHsNCi0JCQljRllJKDEsICgiTm8gYnl0ZXMgcmVhZCAoJWQpIGF0
IG9mZnNldCAlbGxkIC4gQ2xlYW5pbmcgcmVtYWluaW5nIHBhZ2VzIGZyb20g
cmVhZGFoZWFkIGxpc3QiLCBieXRlc19yZWFkLCBvZmZzZXQpKTsgDQotCQkJ
LyogQkIgdHVybiBvZmYgY2FjaGluZyBhbmQgZG8gbmV3IGxvb2t1cCBvbiBm
aWxlIHNpemUgYXQgc2VydmVyPyAqLw0KKwkJCWNGWUkoMSwgKCJObyBieXRl
cyByZWFkICglZCkgYXQgb2Zmc2V0ICVsbGQgLiAiDQorCQkJCSAiQ2xlYW5p
bmcgcmVtYWluaW5nIHBhZ2VzIGZyb20gcmVhZGFoZWFkIGxpc3QiLA0KKwkJ
CQkgYnl0ZXNfcmVhZCwgb2Zmc2V0KSk7DQorCQkJLyogQkIgdHVybiBvZmYg
Y2FjaGluZyBhbmQgZG8gbmV3IGxvb2t1cCBvbiANCisJCQkgICBmaWxlIHNp
emUgYXQgc2VydmVyPyAqLw0KIAkJCXdoaWxlICghbGlzdF9lbXB0eShwYWdl
X2xpc3QpICYmIChpIDwgbnVtX3BhZ2VzKSkgew0KLQkJCQlwYWdlID0gbGlz
dF9lbnRyeShwYWdlX2xpc3QtPnByZXYsIHN0cnVjdCBwYWdlLCBscnUpOw0K
KwkJCQlwYWdlID0gbGlzdF9lbnRyeShwYWdlX2xpc3QtPnByZXYsIHN0cnVj
dCBwYWdlLA0KKwkJCQkJCSAgbHJ1KTsNCiAJCQkJbGlzdF9kZWwoJnBhZ2Ut
PmxydSk7DQotCQkJCXBhZ2VfY2FjaGVfcmVsZWFzZShwYWdlKTsgLyogQkIg
cmVtb3ZlbWUgLSByZXBsYWNlIHdpdGggemVybyBvZiBwYWdlPyAqLw0KKw0K
KwkJCQkvKiBCQiByZW1vdmVtZSAtIHJlcGxhY2Ugd2l0aCB6ZXJvIG9mIHBh
Z2U/ICovDQorCQkJCXBhZ2VfY2FjaGVfcmVsZWFzZShwYWdlKTsNCiAJCQl9
DQogCQkJYnJlYWs7DQogCQl9DQpAQCAtMTUwNyw3ICsxNTUwLDggQEAgc3Rh
dGljIGludCBjaWZzX3JlYWRwYWdlKHN0cnVjdCBmaWxlICpmaQ0KIAkJcmV0
dXJuIC1FQkFERjsNCiAJfQ0KIA0KLQljRllJKDEsICgicmVhZHBhZ2UgJXAg
YXQgb2Zmc2V0ICVkIDB4JXhcbiIsIHBhZ2UsIChpbnQpb2Zmc2V0LCAoaW50
KW9mZnNldCkpOw0KKwljRllJKDEsICgicmVhZHBhZ2UgJXAgYXQgb2Zmc2V0
ICVkIDB4JXhcbiIsIA0KKwkJIHBhZ2UsIChpbnQpb2Zmc2V0LCAoaW50KW9m
ZnNldCkpOw0KIA0KIAlyYyA9IGNpZnNfcmVhZHBhZ2Vfd29ya2VyKGZpbGUs
IHBhZ2UsICZvZmZzZXQpOw0KIA0KQEAgLTE1MjMsNyArMTU2Nyw2IEBAIHN0
YXRpYyBpbnQgY2lmc19yZWFkcGFnZShzdHJ1Y3QgZmlsZSAqZmkNCiAgICBy
ZWZyZXNoaW5nIHRoZSBpbm9kZSBvbmx5IG9uIGluY3JlYXNlcyBpbiB0aGUg
ZmlsZSBzaXplIA0KICAgIGJ1dCB0aGlzIGlzIHRyaWNreSB0byBkbyB3aXRo
b3V0IHJhY2luZyB3aXRoIHdyaXRlYmVoaW5kDQogICAgcGFnZSBjYWNoaW5n
IGluIHRoZSBjdXJyZW50IExpbnV4IGtlcm5lbCBkZXNpZ24gKi8NCi0gICAN
CiBpbnQgaXNfc2l6ZV9zYWZlX3RvX2NoYW5nZShzdHJ1Y3QgY2lmc0lub2Rl
SW5mbyAqY2lmc0lub2RlKQ0KIHsNCiAJc3RydWN0IGxpc3RfaGVhZCAqdG1w
Ow0KQEAgLTE1NDIsOCArMTU4NSw4IEBAIGludCBpc19zaXplX3NhZmVfdG9f
Y2hhbmdlKHN0cnVjdCBjaWZzSW4NCiAJCWlmIChvcGVuX2ZpbGUtPmNsb3Nl
UGVuZCkNCiAJCQljb250aW51ZTsNCiAJLyogV2UgY2hlY2sgaWYgZmlsZSBp
cyBvcGVuIGZvciB3cml0aW5nLCAgIA0KLQlCQiB3ZSBjb3VsZCBzdXBwbGVt
ZW50IHRoaXMgd2l0aCBhIGNoZWNrIHRvIHNlZSBpZiBmaWxlIHNpemUNCi0J
Y2hhbmdlcyBoYXZlIGJlZW4gZmx1c2hlZCB0byBzZXJ2ZXIgLSBpZSBpbm9k
ZSBtZXRhZGF0YSBkaXJ0eSAqLw0KKwkgICBCQiB3ZSBjb3VsZCBzdXBwbGVt
ZW50IHRoaXMgd2l0aCBhIGNoZWNrIHRvIHNlZSBpZiBmaWxlIHNpemUNCisJ
ICAgY2hhbmdlcyBoYXZlIGJlZW4gZmx1c2hlZCB0byBzZXJ2ZXIgLSBpZSBp
bm9kZSBtZXRhZGF0YSBkaXJ0eSAqLw0KIAkJaWYgKChvcGVuX2ZpbGUtPnBm
aWxlKSAmJiANCiAJCSAgICAoKG9wZW5fZmlsZS0+cGZpbGUtPmZfZmxhZ3Mg
JiBPX1JEV1IpIHx8IA0KIAkJICAgIChvcGVuX2ZpbGUtPnBmaWxlLT5mX2Zs
YWdzICYgT19XUk9OTFkpKSkgew0KQEAgLTE2MDYsMjUgKzE2NDksMjkgQEAg
dm9pZCBmaWxsX2luX2lub2RlKHN0cnVjdCBpbm9kZSAqdG1wX2lubw0KIAkJ
dG1wX2lub2RlLT5pX21vZGUgfD0gU19JRlJFRzsNCiAJCWlmIChhdHRyICYg
QVRUUl9SRUFET05MWSkNCiAJCQl0bXBfaW5vZGUtPmlfbW9kZSAmPSB+KFNf
SVdVR08pOw0KLQl9IC8qIGNvdWxkIGFkZCBjb2RlIGhlcmUgLSB0byB2YWxp
ZGF0ZSBpZiBkZXZpY2Ugb3Igd2VpcmQgc2hhcmUgdHlwZT8gKi8NCisJfSAv
KiBjb3VsZCBhZGQgY29kZSBoZXJlIC0gDQorCSAgICAgdG8gdmFsaWRhdGUg
aWYgZGV2aWNlIG9yIHdlaXJkIHNoYXJlIHR5cGU/ICovDQogDQotCS8qIGNh
biBub3QgZmlsbCBpbiBubGluayBoZXJlIGFzIGluIHFwYXRoaW5mbyB2ZXJz
aW9uIGFuZCBVbnggc2VhcmNoICovDQorCS8qIGNhbiBub3QgZmlsbCBpbiBu
bGluayBoZXJlIGFzIGluIHFwYXRoaW5mbyB2ZXJzaW9uDQorCSAgIGFuZCBV
bnggc2VhcmNoICovDQogCWlmIChhdG9taWNfcmVhZCgmY2lmc0luZm8tPmlu
VXNlKSA9PSAwKSB7DQogCQlhdG9taWNfc2V0KCZjaWZzSW5mby0+aW5Vc2Us
IDEpOw0KIAl9DQogDQogCWlmIChpc19zaXplX3NhZmVfdG9fY2hhbmdlKGNp
ZnNJbmZvKSkgew0KIAkJLyogY2FuIG5vdCBzYWZlbHkgY2hhbmdlIHRoZSBm
aWxlIHNpemUgaGVyZSBpZiB0aGUgDQotCQljbGllbnQgaXMgd3JpdGluZyB0
byBpdCBkdWUgdG8gcG90ZW50aWFsIHJhY2VzICovDQorCQkgICBjbGllbnQg
aXMgd3JpdGluZyB0byBpdCBkdWUgdG8gcG90ZW50aWFsIHJhY2VzICovDQog
CQlpX3NpemVfd3JpdGUodG1wX2lub2RlLCBlbmRfb2ZfZmlsZSk7DQogDQot
CS8qIDUxMiBieXRlcyAoMioqOSkgaXMgdGhlIGZha2UgYmxvY2tzaXplIHRo
YXQgbXVzdCBiZSB1c2VkICovDQotCS8qIGZvciB0aGlzIGNhbGN1bGF0aW9u
LCBldmVuIHRob3VnaCB0aGUgcmVwb3J0ZWQgYmxvY2tzaXplIGlzIGxhcmdl
ciAqLw0KKwkvKiA1MTIgYnl0ZXMgKDIqKjkpIGlzIHRoZSBmYWtlIGJsb2Nr
c2l6ZSB0aGF0IG11c3QgYmUgdXNlZA0KKwkgICBmb3IgdGhpcyBjYWxjdWxh
dGlvbiwgZXZlbiB0aG91Z2ggdGhlIHJlcG9ydGVkIGJsb2Nrc2l6ZQ0KKwkg
ICBpcyBsYXJnZXIuICovDQogCQl0bXBfaW5vZGUtPmlfYmxvY2tzID0gKDUx
MiAtIDEgKyBhbGxvY2F0aW9uX3NpemUpID4+IDk7DQogCX0NCiANCiAJaWYg
KGFsbG9jYXRpb25fc2l6ZSA8IGVuZF9vZl9maWxlKQ0KLQkJY0ZZSSgxLCAo
IlBvc3NpYmxlIHNwYXJzZSBmaWxlOiBhbGxvY2F0aW9uIHNpemUgbGVzcyB0
aGFuIGVuZCBvZiBmaWxlICIpKTsNCisJCWNGWUkoMSwgKCJQb3NzaWJsZSBz
cGFyc2UgZmlsZTogIg0KKwkJCSAiYWxsb2NhdGlvbiBzaXplIGxlc3MgdGhh
biBlbmQgb2YgZmlsZSAiKSk7DQogCWNGWUkoMSwNCiAJICAgICAoIkZpbGUg
U2l6ZSAlbGQgYW5kIGJsb2NrcyAlbGQgYW5kIGJsb2Nrc2l6ZSAlbGQiLA0K
IAkgICAgICAodW5zaWduZWQgbG9uZyl0bXBfaW5vZGUtPmlfc2l6ZSwgdG1w
X2lub2RlLT5pX2Jsb2NrcywNCkBAIC0xNjk4LDEyICsxNzQ1LDEyIEBAIHZv
aWQgdW5peF9maWxsX2luX2lub2RlKHN0cnVjdCBpbm9kZSAqdG0NCiAJdG1w
X2lub2RlLT5pX25saW5rID0gbGU2NF90b19jcHUocGZpbmREYXRhLT5ObGlu
a3MpOw0KIA0KIAlpZiAoaXNfc2l6ZV9zYWZlX3RvX2NoYW5nZShjaWZzSW5m
bykpIHsNCi0JCS8qIGNhbiBub3Qgc2FmZWx5IGNoYW5nZSB0aGUgZmlsZSBz
aXplIGhlcmUgaWYgdGhlIA0KLQkJY2xpZW50IGlzIHdyaXRpbmcgdG8gaXQg
ZHVlIHRvIHBvdGVudGlhbCByYWNlcyAqLw0KKwkJLyogY2FuIG5vdCBzYWZl
bHkgY2hhbmdlIHRoZSBmaWxlIHNpemUgaGVyZSBpZiB0aGUgY2xpZW50DQor
CQkgICBpcyB3cml0aW5nIHRvIGl0IGR1ZSB0byBwb3RlbnRpYWwgcmFjZXMg
Ki8NCiAJCWlfc2l6ZV93cml0ZSh0bXBfaW5vZGUsZW5kX29mX2ZpbGUpOw0K
IA0KLQkvKiA1MTIgYnl0ZXMgKDIqKjkpIGlzIHRoZSBmYWtlIGJsb2Nrc2l6
ZSB0aGF0IG11c3QgYmUgdXNlZCAqLw0KLQkvKiBmb3IgdGhpcyBjYWxjdWxh
dGlvbiwgbm90IHRoZSByZWFsIGJsb2Nrc2l6ZSAqLw0KKwkvKiA1MTIgYnl0
ZXMgKDIqKjkpIGlzIHRoZSBmYWtlIGJsb2Nrc2l6ZSB0aGF0IG11c3QgYmUg
dXNlZA0KKwkgICBmb3IgdGhpcyBjYWxjdWxhdGlvbiwgbm90IHRoZSByZWFs
IGJsb2Nrc2l6ZSAqLw0KIAkJdG1wX2lub2RlLT5pX2Jsb2NrcyA9ICg1MTIg
LSAxICsgbnVtX29mX2J5dGVzKSA+PiA5Ow0KIAl9DQogDQpAQCAtMTcxOSw3
ICsxNzY2LDcgQEAgdm9pZCB1bml4X2ZpbGxfaW5faW5vZGUoc3RydWN0IGlu
b2RlICp0bQ0KIAl9IGVsc2UgaWYgKFNfSVNMTksodG1wX2lub2RlLT5pX21v
ZGUpKSB7DQogCQljRllJKDEsICgiU3ltYm9saWMgTGluayBpbm9kZSIpKTsN
CiAJCXRtcF9pbm9kZS0+aV9vcCA9ICZjaWZzX3N5bWxpbmtfaW5vZGVfb3Bz
Ow0KLS8qIHRtcF9pbm9kZS0+aV9mb3AgPSAqLy8qIGRvIG5vdCBuZWVkIHRv
IHNldCB0byBhbnl0aGluZyAqLw0KKwkJLyogdG1wX2lub2RlLT5pX2ZvcCA9
ICovIC8qIGRvIG5vdCBuZWVkIHRvIHNldCB0byBhbnl0aGluZyAqLw0KIAl9
IGVsc2Ugew0KIAkJY0ZZSSgxLCAoIlNwZWNpYWwgaW5vZGUiKSk7IA0KIAkJ
aW5pdF9zcGVjaWFsX2lub2RlKHRtcF9pbm9kZSwgdG1wX2lub2RlLT5pX21v
ZGUsDQpAQCAtMTc0Miw3ICsxNzg5LDcgQEAgc3RhdGljIGludCBjaWZzX3By
ZXBhcmVfd3JpdGUoc3RydWN0IGZpbA0KIAkJCWt1bm1hcF9hdG9taWMoa2Fk
ZHIsIEtNX1VTRVIwKTsNCiAJCX0gKi8NCiAJCS8qIElmIHdlIGFyZSB3cml0
aW5nIGEgZnVsbCBwYWdlIGl0IHdpbGwgYmUgdXAgdG8gZGF0ZSwNCi0JCW5v
IG5lZWQgdG8gcmVhZCBmcm9tIHRoZSBzZXJ2ZXIgKi8NCisJCSAgIG5vIG5l
ZWQgdG8gcmVhZCBmcm9tIHRoZSBzZXJ2ZXIgKi8NCiAJCWlmICgodG8gPT0g
UEFHRV9DQUNIRV9TSVpFKSAmJiAoZnJvbSA9PSAwKSkNCiAJCQlTZXRQYWdl
VXB0b2RhdGUocGFnZSk7DQogDQpAQCAtMTc1MCwxNCArMTc5NywxNSBAQCBz
dGF0aWMgaW50IGNpZnNfcHJlcGFyZV93cml0ZShzdHJ1Y3QgZmlsDQogCQlp
ZiAoKGZpbGUtPmZfZmxhZ3MgJiBPX0FDQ01PREUpICE9IE9fV1JPTkxZKSB7
DQogCQkJcmMgPSBjaWZzX3JlYWRwYWdlX3dvcmtlcihmaWxlLCBwYWdlLCAm
b2Zmc2V0KTsNCiAJCX0gZWxzZSB7DQotCQkvKiBzaG91bGQgd2UgdHJ5IHVz
aW5nIGFub3RoZXINCi0JCSAgIGZpbGUgaGFuZGxlIGlmIHRoZXJlIGlzIG9u
ZSAtIGhvdyB3b3VsZCB3ZSBsb2NrIGl0DQotCQkgICB0byBwcmV2ZW50IGNs
b3NlIG9mIHRoYXQgaGFuZGxlIHJhY2luZyB3aXRoIHRoaXMgcmVhZD8NCisJ
CS8qIHNob3VsZCB3ZSB0cnkgdXNpbmcgYW5vdGhlciBmaWxlIGhhbmRsZSBp
ZiB0aGVyZSBpcyBvbmUgLQ0KKwkJICAgaG93IHdvdWxkIHdlIGxvY2sgaXQg
dG8gcHJldmVudCBjbG9zZSBvZiB0aGF0IGhhbmRsZQ0KKwkJICAgcmFjaW5n
IHdpdGggdGhpcyByZWFkPw0KIAkJICAgSW4gYW55IGNhc2UgdGhpcyB3aWxs
IGJlIHdyaXR0ZW4gb3V0IGJ5IGNvbW1pdF93cml0ZSAqLw0KIAkJfQ0KIAl9
DQogDQotCS8qIEJCIHNob3VsZCB3ZSBwYXNzIGFueSBlcnJvcnMgYmFjaz8g
ZS5nLiBpZiB3ZSBkbyBub3QgaGF2ZSByZWFkIGFjY2VzcyB0byB0aGUgZmls
ZSAqLw0KKwkvKiBCQiBzaG91bGQgd2UgcGFzcyBhbnkgZXJyb3JzIGJhY2s/
IA0KKwkgICBlLmcuIGlmIHdlIGRvIG5vdCBoYXZlIHJlYWQgYWNjZXNzIHRv
IHRoZSBmaWxlICovDQogCXJldHVybiAwOw0KIH0NCiANCg==

--8323328-2010945033-1110979108=:3141--
