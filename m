Return-Path: <linux-kernel-owner+willy=40w.ods.org-S1030199AbWJCPZF@vger.kernel.org>
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S1030199AbWJCPZF (ORCPT <rfc822;willy@w.ods.org>);
	Tue, 3 Oct 2006 11:25:05 -0400
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S1030196AbWJCPZF
	(ORCPT <rfc822;linux-kernel-outgoing>);
	Tue, 3 Oct 2006 11:25:05 -0400
Received: from mout2.freenet.de ([194.97.50.155]:23008 "EHLO mout2.freenet.de")
	by vger.kernel.org with ESMTP id S1030193AbWJCPZA (ORCPT
	<rfc822;linux-kernel@vger.kernel.org>);
	Tue, 3 Oct 2006 11:25:00 -0400
Date: Tue, 03 Oct 2006 17:25:56 +0200
To: "linux-kernel@vger.kernel.org" <linux-kernel@vger.kernel.org>
Subject: [PATCH 5/11] 2.6.18-mm3 pktcdvd: new pkt_print_info() function
Reply-To: balagi@justmail.de
From: "Thomas Maier" <balagi@justmail.de>
Cc: "petero2@telia.com" <petero2@telia.com>, "akpm@osdl.org" <akpm@osdl.org>
Content-Type: multipart/mixed; boundary=----------rwRBIe130ftI3uuMsNhGKW
MIME-Version: 1.0
Message-ID: <op.tguqhi06iudtyh@master>
User-Agent: Opera Mail/9.00 (Win32)
Sender: linux-kernel-owner@vger.kernel.org
X-Mailing-List: linux-kernel@vger.kernel.org

------------rwRBIe130ftI3uuMsNhGKW
Content-Type: text/plain; charset=iso-8859-15
Content-Transfer-Encoding: 7bit

Hello,

this patch moves the "print" code from pkt_seq_show() into
a new function pkt_print_info() for reusability.

http://people.freenet.de/BalaGi/download/pktcdvd-5-print-info_2.6.18.patch

Signed-off-by: Thomas Maier<balagi@justmail.de>

-Thomas Maier
------------rwRBIe130ftI3uuMsNhGKW
Content-Disposition: attachment; filename=pktcdvd-5-print-info_2.6.18.patch
Content-Type: application/octet-stream; name=pktcdvd-5-print-info_2.6.18.patch
Content-Transfer-Encoding: Base64

ZGlmZiAtdXJwTiA0LW1vZGlmeS1wcm9jZnMvZHJpdmVycy9ibG9jay9wa3RjZHZk
LmMgNS1wcmludC1pbmZvL2RyaXZlcnMvYmxvY2svcGt0Y2R2ZC5jCi0tLSA0LW1v
ZGlmeS1wcm9jZnMvZHJpdmVycy9ibG9jay9wa3RjZHZkLmMJMjAwNi0xMC0wMyAx
MTo0NTo1Ni4wMDAwMDAwMDAgKzAyMDAKKysrIDUtcHJpbnQtaW5mby9kcml2ZXJz
L2Jsb2NrL3BrdGNkdmQuYwkyMDA2LTEwLTAzIDExOjQ2OjE5LjAwMDAwMDAwMCAr
MDIwMApAQCAtMTIwLDYgKzEyMCw4NSBAQCBzdGF0aWMgc3RydWN0IHBrdGNkdmRf
ZGV2aWNlICpwa3RfZmluZF9kCiAJcmV0dXJuIE5VTEw7CiB9CiAKK3N0YXRpYyB2
b2lkIHBrdF9jb3VudF9zdGF0ZXMoc3RydWN0IHBrdGNkdmRfZGV2aWNlICpwZCwg
aW50ICpzdGF0ZXMpCit7CisJc3RydWN0IHBhY2tldF9kYXRhICpwa3Q7CisJaW50
IGk7CisKKwlmb3IgKGkgPSAwOyBpIDwgUEFDS0VUX05VTV9TVEFURVM7IGkrKykK
KwkJc3RhdGVzW2ldID0gMDsKKworCXNwaW5fbG9jaygmcGQtPmNkcncuYWN0aXZl
X2xpc3RfbG9jayk7CisJbGlzdF9mb3JfZWFjaF9lbnRyeShwa3QsICZwZC0+Y2Ry
dy5wa3RfYWN0aXZlX2xpc3QsIGxpc3QpIHsKKwkJc3RhdGVzW3BrdC0+c3RhdGVd
Kys7CisJfQorCXNwaW5fdW5sb2NrKCZwZC0+Y2Rydy5hY3RpdmVfbGlzdF9sb2Nr
KTsKK30KKworc3RhdGljIGludCBwa3RfcHJpbnRfaW5mbyhzdHJ1Y3QgcGt0Y2R2
ZF9kZXZpY2UgKnBkLCBjaGFyICpidWYsIGludCBibGVuKQoreworCWNoYXIgKm1z
ZzsKKwljaGFyIGJkZXZfYnVmW0JERVZOQU1FX1NJWkVdOworCWludCBzdGF0ZXNb
UEFDS0VUX05VTV9TVEFURVNdOworCWludCBuID0gMDsKKworI2RlZmluZSBQUklO
VCguLi4pIFwKKwluICs9IHNjbnByaW50ZihidWYrbiwgYmxlbi1uLCBfX1ZBX0FS
R1NfXykKKworCVBSSU5UKCJXcml0ZXIgJXMgbWFwcGVkIHRvICVzOlxuIiwgcGQt
Pm5hbWUsCisJCSAgIAkJYmRldm5hbWUocGQtPmJkZXYsIGJkZXZfYnVmKSk7CisK
KwlQUklOVCgiXG5TZXR0aW5nczpcbiIpOworCVBSSU5UKCJcdHBhY2tldCBzaXpl
Olx0XHQlZGtCXG4iLCBwZC0+c2V0dGluZ3Muc2l6ZSAvIDIpOworCisJaWYgKHBk
LT5zZXR0aW5ncy53cml0ZV90eXBlID09IDApCisJCW1zZyA9ICJQYWNrZXQiOwor
CWVsc2UKKwkJbXNnID0gIlVua25vd24iOworCVBSSU5UKCJcdHdyaXRlIHR5cGU6
XHRcdCVzXG4iLCBtc2cpOworCisJUFJJTlQoIlx0cGFja2V0IHR5cGU6XHRcdCVz
XG4iLCBwZC0+c2V0dGluZ3MuZnAgPyAiRml4ZWQiIDogIlZhcmlhYmxlIik7CisJ
UFJJTlQoIlx0bGluayBsb3NzOlx0XHQlZFxuIiwgcGQtPnNldHRpbmdzLmxpbmtf
bG9zcyk7CisKKwlQUklOVCgiXHR0cmFjayBtb2RlOlx0XHQlZFxuIiwgcGQtPnNl
dHRpbmdzLnRyYWNrX21vZGUpOworCisJaWYgKHBkLT5zZXR0aW5ncy5ibG9ja19t
b2RlID09IFBBQ0tFVF9CTE9DS19NT0RFMSkKKwkJbXNnID0gIk1vZGUgMSI7CisJ
ZWxzZSBpZiAocGQtPnNldHRpbmdzLmJsb2NrX21vZGUgPT0gUEFDS0VUX0JMT0NL
X01PREUyKQorCQltc2cgPSAiTW9kZSAyIjsKKwllbHNlCisJCW1zZyA9ICJVbmtu
b3duIjsKKwlQUklOVCgiXHRibG9jayBtb2RlOlx0XHQlc1xuIiwgbXNnKTsKKwor
CVBSSU5UKCJcblN0YXRpc3RpY3M6XG4iKTsKKwlQUklOVCgiXHRwYWNrZXRzIHN0
YXJ0ZWQ6XHQlbHVcbiIsIHBkLT5zdGF0cy5wa3Rfc3RhcnRlZCk7CisJUFJJTlQo
Ilx0cGFja2V0cyBlbmRlZDpcdFx0JWx1XG4iLCBwZC0+c3RhdHMucGt0X2VuZGVk
KTsKKwlQUklOVCgiXHR3cml0dGVuOlx0XHQlbHVrQlxuIiwgcGQtPnN0YXRzLnNl
Y3NfdyA+PiAxKTsKKwlQUklOVCgiXHRyZWFkIGdhdGhlcjpcdFx0JWx1a0JcbiIs
IHBkLT5zdGF0cy5zZWNzX3JnID4+IDEpOworCVBSSU5UKCJcdHJlYWQ6XHRcdFx0
JWx1a0JcbiIsIHBkLT5zdGF0cy5zZWNzX3IgPj4gMSk7CisKKwlQUklOVCgiXG5N
aXNjOlxuIik7CisJUFJJTlQoIlx0cmVmZXJlbmNlIGNvdW50Olx0JWRcbiIsIHBk
LT5yZWZjbnQpOworCVBSSU5UKCJcdGZsYWdzOlx0XHRcdDB4JWx4XG4iLCBwZC0+
ZmxhZ3MpOworCVBSSU5UKCJcdHJlYWQgc3BlZWQ6XHRcdCV1a0Ivc1xuIiwgcGQt
PnJlYWRfc3BlZWQpOworCVBSSU5UKCJcdHdyaXRlIHNwZWVkOlx0XHQldWtCL3Nc
biIsIHBkLT53cml0ZV9zcGVlZCk7CisJUFJJTlQoIlx0c3RhcnQgb2Zmc2V0Olx0
XHQlbHVcbiIsIHBkLT5vZmZzZXQpOworCVBSSU5UKCJcdG1vZGUgcGFnZSBvZmZz
ZXQ6XHQldVxuIiwgcGQtPm1vZGVfb2Zmc2V0KTsKKworCVBSSU5UKCJcblF1ZXVl
IHN0YXRlOlxuIik7CisJUFJJTlQoIlx0YmlvcyBxdWV1ZWQ6XHRcdCVkXG4iLCBw
ZC0+YmlvX3F1ZXVlX3NpemUpOworCVBSSU5UKCJcdGJpb3MgcGVuZGluZzpcdFx0
JWRcbiIsIGF0b21pY19yZWFkKCZwZC0+Y2Rydy5wZW5kaW5nX2Jpb3MpKTsKKwlQ
UklOVCgiXHRjdXJyZW50IHNlY3RvcjpcdFx0MHglbGx4XG4iLAorCQkJCQkodW5z
aWduZWQgbG9uZyBsb25nKXBkLT5jdXJyZW50X3NlY3Rvcik7CisKKwlwa3RfY291
bnRfc3RhdGVzKHBkLCBzdGF0ZXMpOworCVBSSU5UKCJcdHN0YXRlOlx0XHRcdGk6
JWQgb3c6JWQgcnc6JWQgd3c6JWQgcmVjOiVkIGZpbjolZFxuIiwKKwkgICAgICBz
dGF0ZXNbMF0sIHN0YXRlc1sxXSwgc3RhdGVzWzJdLCBzdGF0ZXNbM10sIHN0YXRl
c1s0XSwgc3RhdGVzWzVdKTsKKyN1bmRlZiBQUklOVAorCWJ1ZltibGVuLTFdID0g
MDsKKwlyZXR1cm4gbjsKK30KKwogLyoqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLwogCiBzdGF0
aWMgdm9pZCBwa3RfYmlvX2ZpbmlzaGVkKHN0cnVjdCBwa3RjZHZkX2RldmljZSAq
cGQpCkBAIC0xMjAyLDIxICsxMjgxLDYgQEAgc3RhdGljIHZvaWQgcGt0X2hhbmRs
ZV9wYWNrZXRzKHN0cnVjdCBwawogCXNwaW5fdW5sb2NrKCZwZC0+Y2Rydy5hY3Rp
dmVfbGlzdF9sb2NrKTsKIH0KIAotc3RhdGljIHZvaWQgcGt0X2NvdW50X3N0YXRl
cyhzdHJ1Y3QgcGt0Y2R2ZF9kZXZpY2UgKnBkLCBpbnQgKnN0YXRlcykKLXsKLQlz
dHJ1Y3QgcGFja2V0X2RhdGEgKnBrdDsKLQlpbnQgaTsKLQotCWZvciAoaSA9IDA7
IGkgPCBQQUNLRVRfTlVNX1NUQVRFUzsgaSsrKQotCQlzdGF0ZXNbaV0gPSAwOwot
Ci0Jc3Bpbl9sb2NrKCZwZC0+Y2Rydy5hY3RpdmVfbGlzdF9sb2NrKTsKLQlsaXN0
X2Zvcl9lYWNoX2VudHJ5KHBrdCwgJnBkLT5jZHJ3LnBrdF9hY3RpdmVfbGlzdCwg
bGlzdCkgewotCQlzdGF0ZXNbcGt0LT5zdGF0ZV0rKzsKLQl9Ci0Jc3Bpbl91bmxv
Y2soJnBkLT5jZHJ3LmFjdGl2ZV9saXN0X2xvY2spOwotfQotCiAvKgogICoga2Nk
cndkIGlzIHdva2VuIHVwIHdoZW4gd3JpdGVzIGhhdmUgYmVlbiBxdWV1ZWQgZm9y
IG9uZSBvZiBvdXIKICAqIHJlZ2lzdGVyZWQgZGV2aWNlcwpAQCAtMjI3Miw1OSAr
MjMzNiwxMCBAQCBzdGF0aWMgdm9pZCBwa3RfaW5pdF9xdWV1ZShzdHJ1Y3QgcGt0
Y2R2CiBzdGF0aWMgaW50IHBrdF9zZXFfc2hvdyhzdHJ1Y3Qgc2VxX2ZpbGUgKm0s
IHZvaWQgKnApCiB7CiAJc3RydWN0IHBrdGNkdmRfZGV2aWNlICpwZCA9IG0tPnBy
aXZhdGU7Ci0JY2hhciAqbXNnOwotCWNoYXIgYmRldl9idWZbQkRFVk5BTUVfU0la
RV07Ci0JaW50IHN0YXRlc1tQQUNLRVRfTlVNX1NUQVRFU107Ci0KLQlzZXFfcHJp
bnRmKG0sICJXcml0ZXIgJXMgbWFwcGVkIHRvICVzOlxuIiwgcGQtPm5hbWUsCi0J
CSAgIGJkZXZuYW1lKHBkLT5iZGV2LCBiZGV2X2J1ZikpOwotCi0Jc2VxX3ByaW50
ZihtLCAiXG5TZXR0aW5nczpcbiIpOwotCXNlcV9wcmludGYobSwgIlx0cGFja2V0
IHNpemU6XHRcdCVka0JcbiIsIHBkLT5zZXR0aW5ncy5zaXplIC8gMik7Ci0KLQlp
ZiAocGQtPnNldHRpbmdzLndyaXRlX3R5cGUgPT0gMCkKLQkJbXNnID0gIlBhY2tl
dCI7Ci0JZWxzZQotCQltc2cgPSAiVW5rbm93biI7Ci0Jc2VxX3ByaW50ZihtLCAi
XHR3cml0ZSB0eXBlOlx0XHQlc1xuIiwgbXNnKTsKLQotCXNlcV9wcmludGYobSwg
Ilx0cGFja2V0IHR5cGU6XHRcdCVzXG4iLCBwZC0+c2V0dGluZ3MuZnAgPyAiRml4
ZWQiIDogIlZhcmlhYmxlIik7Ci0Jc2VxX3ByaW50ZihtLCAiXHRsaW5rIGxvc3M6
XHRcdCVkXG4iLCBwZC0+c2V0dGluZ3MubGlua19sb3NzKTsKLQotCXNlcV9wcmlu
dGYobSwgIlx0dHJhY2sgbW9kZTpcdFx0JWRcbiIsIHBkLT5zZXR0aW5ncy50cmFj
a19tb2RlKTsKLQotCWlmIChwZC0+c2V0dGluZ3MuYmxvY2tfbW9kZSA9PSBQQUNL
RVRfQkxPQ0tfTU9ERTEpCi0JCW1zZyA9ICJNb2RlIDEiOwotCWVsc2UgaWYgKHBk
LT5zZXR0aW5ncy5ibG9ja19tb2RlID09IFBBQ0tFVF9CTE9DS19NT0RFMikKLQkJ
bXNnID0gIk1vZGUgMiI7Ci0JZWxzZQotCQltc2cgPSAiVW5rbm93biI7Ci0Jc2Vx
X3ByaW50ZihtLCAiXHRibG9jayBtb2RlOlx0XHQlc1xuIiwgbXNnKTsKLQotCXNl
cV9wcmludGYobSwgIlxuU3RhdGlzdGljczpcbiIpOwotCXNlcV9wcmludGYobSwg
Ilx0cGFja2V0cyBzdGFydGVkOlx0JWx1XG4iLCBwZC0+c3RhdHMucGt0X3N0YXJ0
ZWQpOwotCXNlcV9wcmludGYobSwgIlx0cGFja2V0cyBlbmRlZDpcdFx0JWx1XG4i
LCBwZC0+c3RhdHMucGt0X2VuZGVkKTsKLQlzZXFfcHJpbnRmKG0sICJcdHdyaXR0
ZW46XHRcdCVsdWtCXG4iLCBwZC0+c3RhdHMuc2Vjc193ID4+IDEpOwotCXNlcV9w
cmludGYobSwgIlx0cmVhZCBnYXRoZXI6XHRcdCVsdWtCXG4iLCBwZC0+c3RhdHMu
c2Vjc19yZyA+PiAxKTsKLQlzZXFfcHJpbnRmKG0sICJcdHJlYWQ6XHRcdFx0JWx1
a0JcbiIsIHBkLT5zdGF0cy5zZWNzX3IgPj4gMSk7Ci0KLQlzZXFfcHJpbnRmKG0s
ICJcbk1pc2M6XG4iKTsKLQlzZXFfcHJpbnRmKG0sICJcdHJlZmVyZW5jZSBjb3Vu
dDpcdCVkXG4iLCBwZC0+cmVmY250KTsKLQlzZXFfcHJpbnRmKG0sICJcdGZsYWdz
Olx0XHRcdDB4JWx4XG4iLCBwZC0+ZmxhZ3MpOwotCXNlcV9wcmludGYobSwgIlx0
cmVhZCBzcGVlZDpcdFx0JXVrQi9zXG4iLCBwZC0+cmVhZF9zcGVlZCk7Ci0Jc2Vx
X3ByaW50ZihtLCAiXHR3cml0ZSBzcGVlZDpcdFx0JXVrQi9zXG4iLCBwZC0+d3Jp
dGVfc3BlZWQpOwotCXNlcV9wcmludGYobSwgIlx0c3RhcnQgb2Zmc2V0Olx0XHQl
bHVcbiIsIHBkLT5vZmZzZXQpOwotCXNlcV9wcmludGYobSwgIlx0bW9kZSBwYWdl
IG9mZnNldDpcdCV1XG4iLCBwZC0+bW9kZV9vZmZzZXQpOwotCi0Jc2VxX3ByaW50
ZihtLCAiXG5RdWV1ZSBzdGF0ZTpcbiIpOwotCXNlcV9wcmludGYobSwgIlx0Ymlv
cyBxdWV1ZWQ6XHRcdCVkXG4iLCBwZC0+YmlvX3F1ZXVlX3NpemUpOwotCXNlcV9w
cmludGYobSwgIlx0YmlvcyBwZW5kaW5nOlx0XHQlZFxuIiwgYXRvbWljX3JlYWQo
JnBkLT5jZHJ3LnBlbmRpbmdfYmlvcykpOwotCXNlcV9wcmludGYobSwgIlx0Y3Vy
cmVudCBzZWN0b3I6XHRcdDB4JWxseFxuIiwgKHVuc2lnbmVkIGxvbmcgbG9uZylw
ZC0+Y3VycmVudF9zZWN0b3IpOwotCi0JcGt0X2NvdW50X3N0YXRlcyhwZCwgc3Rh
dGVzKTsKLQlzZXFfcHJpbnRmKG0sICJcdHN0YXRlOlx0XHRcdGk6JWQgb3c6JWQg
cnc6JWQgd3c6JWQgcmVjOiVkIGZpbjolZFxuIiwKLQkJICAgc3RhdGVzWzBdLCBz
dGF0ZXNbMV0sIHN0YXRlc1syXSwgc3RhdGVzWzNdLCBzdGF0ZXNbNF0sIHN0YXRl
c1s1XSk7Ci0KKwljaGFyIGJ1ZlsxMDI0XTsKKwkKKwlwa3RfcHJpbnRfaW5mbyhw
ZCwgYnVmLCBzaXplb2YoYnVmKSk7CisJc2VxX3ByaW50ZihtLCAiJXMiLCBidWYp
OwogCXJldHVybiAwOwogfQogCg==

------------rwRBIe130ftI3uuMsNhGKW--

