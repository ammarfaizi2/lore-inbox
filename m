Return-Path: <linux-kernel-owner@vger.kernel.org>
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id <S274288AbRITAwB>; Wed, 19 Sep 2001 20:52:01 -0400
Received: (majordomo@vger.kernel.org) by vger.kernel.org
	id <S274286AbRITAvl>; Wed, 19 Sep 2001 20:51:41 -0400
Received: from 211-174-51-118.kidc.net ([211.174.51.118]:64009 "EHLO
	mail.wowlinux.com") by vger.kernel.org with ESMTP
	id <S274289AbRITAve>; Wed, 19 Sep 2001 20:51:34 -0400
Message-Id: <200109200051.f8K0pow08011@mail.wowlinux.com>
From: Kim Yong Il <nalabi@formail.org>
Reply-To: nalabi@formail.org
To: linux-kernel@vger.kernel.org
Subject: 2.4.9-ipt_string.patch
Date: Thu, 20 Sep 2001 09:52:01 +0900
X-Mailer: KMail [version 1.3.1]
MIME-Version: 1.0
Content-Type: Multipart/Mixed;
  boundary="------------Boundary-00=_PQRXEPR4YM22TXT8CFZ3"
Sender: linux-kernel-owner@vger.kernel.org
X-Mailing-List: linux-kernel@vger.kernel.org


--------------Boundary-00=_PQRXEPR4YM22TXT8CFZ3
Content-Type: text/plain;
  charset="euc-kr"
Content-Transfer-Encoding: 8bit

This is "iptables --string" patch


--------------Boundary-00=_PQRXEPR4YM22TXT8CFZ3
Content-Type: text/x-diff;
  charset="euc-kr";
  name="2.4.9-ipt_string.patch"
Content-Transfer-Encoding: base64
Content-Disposition: attachment; filename="2.4.9-ipt_string.patch"

ZGlmZiAtdXJOIGxpbnV4LTIuNC45Lm9yaWcvRG9jdW1lbnRhdGlvbi9Db25maWd1cmUuaGVscCBs
aW51eC0yLjQuOS9Eb2N1bWVudGF0aW9uL0NvbmZpZ3VyZS5oZWxwCi0tLSBsaW51eC0yLjQuOS5v
cmlnL0RvY3VtZW50YXRpb24vQ29uZmlndXJlLmhlbHAJTW9uIEF1ZyAxMyAwMjo1MTo0MSAyMDAx
CisrKyBsaW51eC0yLjQuOS9Eb2N1bWVudGF0aW9uL0NvbmZpZ3VyZS5oZWxwCUZyaSBBdWcgMTcg
MTI6Mjg6MjUgMjAwMQpAQCAtMTkzOSw2ICsxOTM5LDE0IEBACiAgIElmIHlvdSB3YW50IHRvIGNv
bXBpbGUgaXQgYXMgYSBtb2R1bGUsIHNheSBNIGhlcmUgYW5kIHJlYWQKICAgRG9jdW1lbnRhdGlv
bi9tb2R1bGVzLnR4dC4gIElmIHVuc3VyZSwgc2F5IGBOJy4KIAorU3RyaW5nIG1hdGNoIHN1cHBv
cnQgKEVYUEVSSU1FTlRBTCkKK0NPTkZJR19JUF9ORl9NQVRDSF9TVFJJTkcKKyAgU3RyaW5nIG1h
dGNoaW5nIGFsb3dzIHlvdSB0byBtYXRjaCBwYWNrZXRzIHdoaWNoIGNvbnRhaW4gYQorICBzcGVj
aWZpZWQgc3RyaW5nIG9mIGNoYXJhY3RlcnMuCisKKyAgSWYgeW91IHdhbnQgdG8gY29tcGlsZSBp
dCBhcyBhIG1vZHVsZSwgc2F5IE0gaGVyZSBhbmQgcmVhZAorICBEb2N1bWVudGF0aW9uL21vZHVs
ZXMudHh0LiAgSWYgdW5zdXJlLCBzYXkgYE4nLgorCiBVbmNsZWFuIG1hdGNoIHN1cHBvcnQgKEVY
UEVSSU1FTlRBTCkKIENPTkZJR19JUF9ORl9NQVRDSF9VTkNMRUFOCiAgIFVuY2xlYW4gcGFja2V0
IG1hdGNoaW5nIG1hdGNoZXMgYW55IHN0cmFuZ2Ugb3IgaW52YWxpZCBwYWNrZXRzLCBieQpkaWZm
IC11ck4gbGludXgtMi40Ljkub3JpZy9pbmNsdWRlL2xpbnV4L25ldGZpbHRlcl9pcHY0L2lwdF9z
dHJpbmcuaCBsaW51eC0yLjQuOS9pbmNsdWRlL2xpbnV4L25ldGZpbHRlcl9pcHY0L2lwdF9zdHJp
bmcuaAotLS0gbGludXgtMi40Ljkub3JpZy9pbmNsdWRlL2xpbnV4L25ldGZpbHRlcl9pcHY0L2lw
dF9zdHJpbmcuaAlUaHUgSmFuICAxIDA5OjAwOjAwIDE5NzAKKysrIGxpbnV4LTIuNC45L2luY2x1
ZGUvbGludXgvbmV0ZmlsdGVyX2lwdjQvaXB0X3N0cmluZy5oCVNhdCBBdWcgMTEgMTM6MTg6MzIg
MjAwMQpAQCAtMCwwICsxLDIxIEBACisjaWZuZGVmIF9JUFRfU1RSSU5HX0gKKyNkZWZpbmUgX0lQ
VF9TVFJJTkdfSAorCisvKiAqKiogUEVSRk9STUFOQ0UgVFdFQUsgKioqCisgKiBQYWNrZXQgc2l6
ZSBhbmQgc2VhcmNoIHN0cmluZyB0aHJlc2hvbGQsCisgKiBhYm92ZSB3aGljaCBzdWJsaW5lYXIg
c2VhcmNoZXMgaXMgdXNlZC4gKi8KKyNkZWZpbmUgSVBUX1NUUklOR19IQVlTVEFDS19USFJFU0gJ
MTAwCisjZGVmaW5lIElQVF9TVFJJTkdfTkVFRExFX1RIUkVTSAkyMAorCisjZGVmaW5lIEJNX01B
WF9OTEVOIDI1NgorI2RlZmluZSBCTV9NQVhfSExFTiAxMDI0CisKK3R5cGVkZWYgY2hhciAqKCpw
cm9jX2lwdF9zZWFyY2gpIChjaGFyICosIGNoYXIgKiwgaW50LCBpbnQpOworCitzdHJ1Y3QgaXB0
X3N0cmluZ19pbmZvIHsKKyAgICBjaGFyIHN0cmluZ1tCTV9NQVhfTkxFTl07CisgICAgdV9pbnQx
Nl90IGludmVydDsKKyAgICB1X2ludDE2X3QgbGVuOworfTsKKworI2VuZGlmIC8qIF9JUFRfU1RS
SU5HX0ggKi8KZGlmZiAtdXJOIGxpbnV4LTIuNC45Lm9yaWcvbmV0L2lwdjQvbmV0ZmlsdGVyL0Nv
bmZpZy5pbiBsaW51eC0yLjQuOS9uZXQvaXB2NC9uZXRmaWx0ZXIvQ29uZmlnLmluCi0tLSBsaW51
eC0yLjQuOS5vcmlnL25ldC9pcHY0L25ldGZpbHRlci9Db25maWcuaW4JV2VkIE1hciAgNyAxNTo0
NDoxNiAyMDAxCisrKyBsaW51eC0yLjQuOS9uZXQvaXB2NC9uZXRmaWx0ZXIvQ29uZmlnLmluCUZy
aSBBdWcgMTcgMTI6Mjk6MTEgMjAwMQpAQCAtMjYsNiArMjYsNyBAQAogICBmaQogICBpZiBbICIk
Q09ORklHX0VYUEVSSU1FTlRBTCIgPSAieSIgXTsgdGhlbgogICAgIGRlcF90cmlzdGF0ZSAnICBV
bmNsZWFuIG1hdGNoIHN1cHBvcnQgKEVYUEVSSU1FTlRBTCknIENPTkZJR19JUF9ORl9NQVRDSF9V
TkNMRUFOICRDT05GSUdfSVBfTkZfSVBUQUJMRVMKKyAgICBkZXBfdHJpc3RhdGUgJyAgU3RyaW5n
IG1hdGNoIHN1cHBvcnQgKEVYUEVSSU1FTlRBTCknIENPTkZJR19JUF9ORl9NQVRDSF9TVFJJTkcg
JENPTkZJR19JUF9ORl9JUFRBQkxFUwogICAgIGRlcF90cmlzdGF0ZSAnICBPd25lciBtYXRjaCBz
dXBwb3J0IChFWFBFUklNRU5UQUwpJyBDT05GSUdfSVBfTkZfTUFUQ0hfT1dORVIgJENPTkZJR19J
UF9ORl9JUFRBQkxFUwogICBmaQogIyBUaGUgdGFyZ2V0cwpkaWZmIC11ck4gbGludXgtMi40Ljku
b3JpZy9uZXQvaXB2NC9uZXRmaWx0ZXIvTWFrZWZpbGUgbGludXgtMi40LjkvbmV0L2lwdjQvbmV0
ZmlsdGVyL01ha2VmaWxlCi0tLSBsaW51eC0yLjQuOS5vcmlnL25ldC9pcHY0L25ldGZpbHRlci9N
YWtlZmlsZQlUaHUgQXByIDI2IDA3OjAwOjI4IDIwMDEKKysrIGxpbnV4LTIuNC45L25ldC9pcHY0
L25ldGZpbHRlci9NYWtlZmlsZQlGcmkgQXVnIDE3IDEyOjI4OjUzIDIwMDEKQEAgLTU0LDYgKzU0
LDcgQEAKIG9iai0kKENPTkZJR19JUF9ORl9NQVRDSF9UT1MpICs9IGlwdF90b3Mubwogb2JqLSQo
Q09ORklHX0lQX05GX01BVENIX1NUQVRFKSArPSBpcHRfc3RhdGUubwogb2JqLSQoQ09ORklHX0lQ
X05GX01BVENIX1VOQ0xFQU4pICs9IGlwdF91bmNsZWFuLm8KK29iai0kKENPTkZJR19JUF9ORl9N
QVRDSF9TVFJJTkcpICs9IGlwdF9zdHJpbmcubwogb2JqLSQoQ09ORklHX0lQX05GX01BVENIX1RD
UE1TUykgKz0gaXB0X3RjcG1zcy5vCiAKICMgdGFyZ2V0cwpkaWZmIC11ck4gbGludXgtMi40Ljku
b3JpZy9uZXQvaXB2NC9uZXRmaWx0ZXIvaXB0X3N0cmluZy5jIGxpbnV4LTIuNC45L25ldC9pcHY0
L25ldGZpbHRlci9pcHRfc3RyaW5nLmMKLS0tIGxpbnV4LTIuNC45Lm9yaWcvbmV0L2lwdjQvbmV0
ZmlsdGVyL2lwdF9zdHJpbmcuYwlUaHUgSmFuICAxIDA5OjAwOjAwIDE5NzAKKysrIGxpbnV4LTIu
NC45L25ldC9pcHY0L25ldGZpbHRlci9pcHRfc3RyaW5nLmMJU2F0IEF1ZyAxMSAxMzoxODozMiAy
MDAxCkBAIC0wLDAgKzEsMTU2IEBACisvKiBLZXJuZWwgbW9kdWxlIHRvIG1hdGNoIGEgc3RyaW5n
IGludG8gYSBwYWNrZXQuCisgKgorICogQ29weXJpZ2h0IChDKSAyMDAwIEVtbWFudWVsIFJvZ2Vy
ICA8d2luZmllbGRAZnJlZWdhdGVzLmJlPgorICogCisgKiBDaGFuZ2VMb2cKKyAqCTAyLjA1LjIw
MDE6IEdpYW5uaSBUZWRlc2NvIDxnaWFubmlAZWNzYy5jby51az4KKyAqCQlGaXhlZCBrZXJuZWwg
cGFuaWMsIGR1ZSB0byBvdmVycnVubmluZyBib3llciBtb29yZSBzdHJpbmcKKyAqCQl0YWJsZXMu
IEFsc28gc2xpZ2h0bHkgdHdlYWtlZCBoZXVyaXN0aWMgZm9yIGRlY2lkaW5nIHdoYXQKKyAqIAkJ
c2VhcmNoIGFsZ28gdG8gdXNlLgorICogCTI3LjAxLjIwMDE6IEdpYW5uaSBUZWRlc2NvIDxnaWFu
bmlAZWNzYy5jby51az4KKyAqIAkJSW1wbGVtZW50ZWQgQm95ZXIgTW9vcmUgU3VibGluZWFyIHNl
YXJjaCBhbGdvcml0aG0KKyAqIAkJYWxvbmdzaWRlIHRoZSBleGlzdGluZyBsaW5lYXIgc2VhcmNo
IGJhc2VkIG9uIG1lbWNtcCgpLgorICogCQlBbHNvIGEgcXVpY2sgY2hlY2sgdG8gZGVjaWRlIHdo
aWNoIG1ldGhvZCB0byB1c2Ugb24gYSBwZXIKKyAqIAkJcGFja2V0IGJhc2lzLgorICovCisKKyNp
bmNsdWRlIDxsaW51eC9tb2R1bGUuaD4KKyNpbmNsdWRlIDxsaW51eC9za2J1ZmYuaD4KKyNpbmNs
dWRlIDxsaW51eC9maWxlLmg+CisjaW5jbHVkZSA8bmV0L3NvY2suaD4KKworI2luY2x1ZGUgPGxp
bnV4L25ldGZpbHRlcl9pcHY0L2lwX3RhYmxlcy5oPgorI2luY2x1ZGUgPGxpbnV4L25ldGZpbHRl
cl9pcHY0L2lwdF9zdHJpbmcuaD4KKworaW50IHNraXBbQk1fTUFYX0hMRU5dOworaW50IHNoaWZ0
W0JNX01BWF9ITEVOXTsKKworLyogQm95ZXIgTW9vcmUgU3VibGluZWFyIHN0cmluZyBzZWFyY2gg
LSBWRVJZIEZBU1QgKi8KK2NoYXIgKnNlYXJjaF9zdWJsaW5lYXIgKGNoYXIgKm5lZWRsZSwgY2hh
ciAqaGF5c3RhY2ssIGludCBuZWVkbGVfbGVuLCBpbnQgaGF5c3RhY2tfbGVuKSAKK3sKKwlpbnQg
TTEsIHJpZ2h0X2VuZCwgc2ssIHNoOyAgCisJaW50IGVuZGVkLCBqLCBsZW5bQk1fTUFYX0hMRU5d
OworCWludCBpOworCisJLyogU2V0dXAgc2tpcC9zaGlmdCB0YWJsZXMgKi8KKwlNMSA9IHJpZ2h0
X2VuZCA9IG5lZWRsZV9sZW4tMTsKKwlmb3IgKGkgPSAwOyBpIDwgQk1fTUFYX0hMRU47IGkrKykg
c2tpcFtpXSA9IG5lZWRsZV9sZW47ICAKKwlmb3IgKGkgPSAwOyBuZWVkbGVbaV07IGkrKykgc2tp
cFtuZWVkbGVbaV1dID0gTTEgLSBpOyAgCisKKwlmb3IgKGkgPSAxOyBpIDwgbmVlZGxlX2xlbjsg
aSsrKSB7ICAgCisJCWZvciAoaiA9IDA7IGogPCBuZWVkbGVfbGVuICYmIG5lZWRsZVtNMSAtIGpd
ID09IG5lZWRsZVtNMSAtIGkgLSBqXTsgaisrKTsgIAorCQlsZW5baV0gPSBqOyAgCisJfSAgCisK
KwlzaGlmdFswXSA9IDE7ICAKKwlmb3IgKGkgPSAxOyBpIDwgbmVlZGxlX2xlbjsgaSsrKSBzaGlm
dFtpXSA9IG5lZWRsZV9sZW47ICAKKwlmb3IgKGkgPSBNMTsgaSA+IDA7IGktLSkgc2hpZnRbbGVu
W2ldXSA9IGk7ICAKKwllbmRlZCA9IDA7ICAKKwkKKwlmb3IgKGkgPSAwOyBpIDwgbmVlZGxlX2xl
bjsgaSsrKSB7ICAKKwkJaWYgKGxlbltpXSA9PSBNMSAtIGkpIGVuZGVkID0gaTsgIAorCQlpZiAo
ZW5kZWQpIHNoaWZ0W2ldID0gZW5kZWQ7ICAKKwl9ICAKKworCS8qIERvIHRoZSBzZWFyY2gqLyAg
CisJd2hpbGUgKHJpZ2h0X2VuZCA8IGhheXN0YWNrX2xlbikKKwl7CisJCWZvciAoaSA9IDA7IGkg
PCBuZWVkbGVfbGVuICYmIGhheXN0YWNrW3JpZ2h0X2VuZCAtIGldID09IG5lZWRsZVtNMSAtIGld
OyBpKyspOyAgCisJCWlmIChpID09IG5lZWRsZV9sZW4pIHsKKwkJCXJldHVybiBoYXlzdGFjayso
cmlnaHRfZW5kIC0gTTEpOworCQl9CisJCQorCQlzayA9IHNraXBbaGF5c3RhY2tbcmlnaHRfZW5k
IC0gaV1dOyAgCisJCXNoID0gc2hpZnRbaV07CisJCXJpZ2h0X2VuZCA9IG1heChpbnQsIHJpZ2h0
X2VuZCAtIGkgKyBzaywgcmlnaHRfZW5kICsgc2gpOyAgCisJfQorCisJcmV0dXJuIE5VTEw7Cit9
ICAKKworLyogTGluZWFyIHN0cmluZyBzZWFyY2ggYmFzZWQgb24gbWVtY21wKCkgKi8KK2NoYXIg
KnNlYXJjaF9saW5lYXIgKGNoYXIgKm5lZWRsZSwgY2hhciAqaGF5c3RhY2ssIGludCBuZWVkbGVf
bGVuLCBpbnQgaGF5c3RhY2tfbGVuKSAKK3sKKwljaGFyICprID0gaGF5c3RhY2sgKyAoaGF5c3Rh
Y2tfbGVuLW5lZWRsZV9sZW4pOworCWNoYXIgKnQgPSBoYXlzdGFjazsKKwkKKwl3aGlsZSAoIHQr
KyA8IGsgKSB7CisJCWlmICggbWVtY21wKHQsIG5lZWRsZSwgbmVlZGxlX2xlbikgPT0gMCApIHJl
dHVybiB0OworCX0KKworCXJldHVybiBOVUxMOworfQorCisKK3N0YXRpYyBpbnQKK21hdGNoKGNv
bnN0IHN0cnVjdCBza19idWZmICpza2IsCisgICAgICBjb25zdCBzdHJ1Y3QgbmV0X2RldmljZSAq
aW4sCisgICAgICBjb25zdCBzdHJ1Y3QgbmV0X2RldmljZSAqb3V0LAorICAgICAgY29uc3Qgdm9p
ZCAqbWF0Y2hpbmZvLAorICAgICAgaW50IG9mZnNldCwKKyAgICAgIGNvbnN0IHZvaWQgKmhkciwK
KyAgICAgIHVfaW50MTZfdCBkYXRhbGVuLAorICAgICAgaW50ICpob3Rkcm9wKQoreworCWNvbnN0
IHN0cnVjdCBpcHRfc3RyaW5nX2luZm8gKmluZm8gPSBtYXRjaGluZm87CisJc3RydWN0IGlwaGRy
ICppcCA9IHNrYi0+bmguaXBoOworCWludCBobGVuLCBubGVuOworCWNoYXIgKm5lZWRsZSwgKmhh
eXN0YWNrOworCXByb2NfaXB0X3NlYXJjaCBzZWFyY2g9c2VhcmNoX2xpbmVhcjsKKworCWlmICgg
IWlwICkgcmV0dXJuIDA7CisKKwkvKiBnZXQgbGVuZ2h0cywgYW5kIHZhbGlkYXRlIHRoZW0gKi8K
KwlubGVuPWluZm8tPmxlbjsKKwlobGVuPW50b2hzKGlwLT50b3RfbGVuKS0oaXAtPmlobCo0KTsK
KwlpZiAoIG5sZW4gPiBobGVuICkgcmV0dXJuIDA7CisKKwluZWVkbGU9KGNoYXIgKikmaW5mby0+
c3RyaW5nOworCWhheXN0YWNrPShjaGFyICopaXArKGlwLT5paGwqNCk7CisKKwkvKiBUaGUgc3Vi
bGluZWFyIHNlYXJjaCBjb21lcyBpbiB0byBpdHMgb3duCisJICogb24gdGhlIGxhcmdlciBwYWNr
ZXRzICovCisJaWYgKCAoaGxlbj5JUFRfU1RSSU5HX0hBWVNUQUNLX1RIUkVTSCkgJiYKKwkgIAko
bmxlbj5JUFRfU1RSSU5HX05FRURMRV9USFJFU0gpICkgeworCQlpZiAoIGhsZW4gPCBCTV9NQVhf
SExFTiApIHsKKwkJCXNlYXJjaD1zZWFyY2hfc3VibGluZWFyOworCQl9ZWxzZXsKKwkJCWlmIChu
ZXRfcmF0ZWxpbWl0KCkpCisJCQkJcHJpbnRrKEtFUk5fSU5GTyAiaXB0X3N0cmluZzogUGFja2V0
IHRvbyBiaWcgIgorCQkJCQkidG8gYXR0ZW1wdCBzdWJsaW5lYXIgc3RyaW5nIHNlYXJjaCAiCisJ
CQkJCSIoJWQgYnl0ZXMpXG4iLCBobGVuICk7CisJCX0KKwl9CisJCisgICAgcmV0dXJuICgoc2Vh
cmNoKG5lZWRsZSwgaGF5c3RhY2ssIG5sZW4sIGhsZW4pIT1OVUxMKSBeIGluZm8tPmludmVydCk7
Cit9CisKK3N0YXRpYyBpbnQKK2NoZWNrZW50cnkoY29uc3QgY2hhciAqdGFibGVuYW1lLAorICAg
ICAgICAgICBjb25zdCBzdHJ1Y3QgaXB0X2lwICppcCwKKyAgICAgICAgICAgdm9pZCAqbWF0Y2hp
bmZvLAorICAgICAgICAgICB1bnNpZ25lZCBpbnQgbWF0Y2hzaXplLAorICAgICAgICAgICB1bnNp
Z25lZCBpbnQgaG9va19tYXNrKQoreworCisgICAgICAgaWYgKG1hdGNoc2l6ZSAhPSBJUFRfQUxJ
R04oc2l6ZW9mKHN0cnVjdCBpcHRfc3RyaW5nX2luZm8pKSkKKyAgICAgICAgICAgICAgIHJldHVy
biAwOworCisgICAgICAgcmV0dXJuIDE7Cit9CisKK3N0YXRpYyBzdHJ1Y3QgaXB0X21hdGNoIHN0
cmluZ19tYXRjaAorPSB7IHsgTlVMTCwgTlVMTCB9LCAic3RyaW5nIiwgJm1hdGNoLCAmY2hlY2tl
bnRyeSwgTlVMTCwgVEhJU19NT0RVTEUgfTsKKworc3RhdGljIGludCBfX2luaXQgaW5pdCh2b2lk
KQoreworICAgICAgIHJldHVybiBpcHRfcmVnaXN0ZXJfbWF0Y2goJnN0cmluZ19tYXRjaCk7Cit9
CisKK3N0YXRpYyB2b2lkIF9fZXhpdCBmaW5pKHZvaWQpCit7CisgICAgICAgaXB0X3VucmVnaXN0
ZXJfbWF0Y2goJnN0cmluZ19tYXRjaCk7Cit9CisKK21vZHVsZV9pbml0KGluaXQpOworbW9kdWxl
X2V4aXQoZmluaSk7Cg==

--------------Boundary-00=_PQRXEPR4YM22TXT8CFZ3--
