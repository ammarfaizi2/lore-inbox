Return-Path: <linux-kernel-owner+willy=40w.ods.org@vger.kernel.org>
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id <S265048AbSJOW1g>; Tue, 15 Oct 2002 18:27:36 -0400
Received: (majordomo@vger.kernel.org) by vger.kernel.org
	id <S264843AbSJOW0Y>; Tue, 15 Oct 2002 18:26:24 -0400
Received: from mg02.austin.ibm.com ([192.35.232.12]:41628 "EHLO
	mg02.austin.ibm.com") by vger.kernel.org with ESMTP
	id <S264872AbSJOWVI>; Tue, 15 Oct 2002 18:21:08 -0400
Date: Tue, 15 Oct 2002 17:26:48 -0500 (CDT)
From: Kent Yoder <key@austin.ibm.com>
To: linux-kernel@vger.kernel.org
cc: linux-mm@kvack.org
Subject: 2.5.42 kernel BUG at mm/slab.c:1300
Message-ID: <Pine.LNX.4.44.0210151712320.1366-100000@ennui.austin.ibm.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
Sender: linux-kernel-owner@vger.kernel.org
X-Mailing-List: linux-kernel@vger.kernel.org


  These two oopses occurred after doing 'ifup tr0', 'route'.  Config below, 
this kernel has CONFIG_PREEMPT turned off and the kdb-2.3 patches applied.

Kent

------------[ cut here ]------------
kernel BUG at mm/slab.c:1300!
invalid operand: 0000
lanstreamer
CPU:    0
EIP:    0060:[<c013f7cc>]    Not tainted
EFLAGS: 00010802
EIP is at kmem_cache_alloc_one_tail+0xec/0x120
eax: 811001f1   ebx: cfe77690   ecx: 00000108   edx: cfe77798
esi: c1285b00   edi: 00000100   ebp: cfe77793   esp: ce43fdb0
ds: 0068   es: 0068   ss: 0068
Process klogd (pid: 457, threadinfo=ce43e000 task=ce474160)
Stack: 00000086 00000100 cfe77694 c1285b00 00000246 000001d0 c1285b24 
c013f8f2
       c1285b00 cfe77000 c1285b08 ce43fe00 c01197da cfd42f5c cfd42f5c 
00000246
       000001d0 c030b837 c1285b00 000001d0 ffffffe0 00000000 ced8c570 
ce43e000
Call Trace:
 [<c013f8f2>] __kmem_cache_alloc+0xf2/0x1a0
 [<c01197da>] __wake_up_common+0x3a/0x60
 [<c030b837>] alloc_skb+0xb7/0x1f0
 [<c030a9a5>] sock_alloc_send_pskb+0xd5/0x1d0
 [<c030aacf>] sock_alloc_send_skb+0x2f/0x40
 [<c035d752>] unix_dgram_sendmsg+0x102/0x4f0
 [<c010e87d>] timer_interrupt+0x4d/0x60
 [<c0307862>] __sock_sendmsg+0xa2/0xf0
 [<c015074c>] do_sync_write+0x8c/0xc0
 [<c015089a>] vfs_write+0x11a/0x150
 [<c015096e>] sys_write+0x3e/0x60
 [<c0107d1f>] syscall_call+0x7/0xb

Code: 0f 0b 14 05 53 ad 38 c0 83 c3 04 83 c4 0c 89 d8 5b 5e 5f 5d


------------[ cut here ]------------
kernel BUG at mm/slab.c:1300!
invalid operand: 0000
lanstreamer
CPU:    0
EIP:    0060:[<c013f7cc>]    Not tainted
EFLAGS: 00010802
EIP is at kmem_cache_alloc_one_tail+0xec/0x120
eax: 811001f1   ebx: cfe77ab0   ecx: 00000108   edx: cfe77bb8
esi: c1285b00   edi: 00000100   ebp: cfe77bb3   esp: cd94bb6c
ds: 0068   es: 0068   ss: 0068
Process route (pid: 739, threadinfo=cd94a000 task=cd832020)
Stack: ffffffff 00000100 cfe77ab4 c1285b00 00000246 00000020 c1285b24 c013f8f2
       c1285b00 cfe77000 c1285b08 ce6842dc 74ae3509 cfd42c64 cfd42c64 00000246
       00000020 c030b837 c1285b00 00000020 00000000 ced22870 cd8300a4 ced22800
Call Trace:
 [<c013f8f2>] __kmem_cache_alloc+0xf2/0x1a0
 [<c030b837>] alloc_skb+0xb7/0x1f0
 [<c034f6f1>] arp_send+0x51/0x240
 [<c034f225>] arp_solicit+0xa5/0x160
 [<c03141a7>] __neigh_event_send+0x147/0x280
 [<c0314b44>] neigh_resolve_output+0x224/0x260
 [<c032f0ed>] ip_finish_output2+0xed/0x130
 [<c032e822>] ip_build_xmit+0x2c2/0x3b0
 [<c034d8a5>] udp_sendmsg+0x2b5/0x510
 [<c034d450>] udp_getfrag+0x0/0x120
 [<c01292a6>] update_wall_time+0x16/0x40
 [<c01295a8>] do_timer+0xc8/0xd0
 [<c010eb72>] do_timer_interrupt+0x92/0x141
 [<c010e87d>] timer_interrupt+0x4d/0x60
 [<c010a061>] do_IRQ+0x131/0x1b0
 [<c0355cfd>] inet_sendmsg+0x4d/0x60
 [<c0307862>] __sock_sendmsg+0xa2/0xf0
 [<c030792b>] sock_sendmsg+0x7b/0xa0
 [<c03278e4>] rt_set_nexthop+0x44/0xf0
 [<c03288f3>] ip_route_output_slow+0x373/0x770
 [<c0308e1c>] sys_sendto+0xdc/0x100
 [<c0308bb9>] sys_connect+0x89/0xb0
 [<c030763f>] sock_map_fd+0x11f/0x140
 [<c0308e77>] sys_send+0x37/0x40
 [<c0309707>] sys_socketcall+0x147/0x270
 [<c0107d1f>] syscall_call+0x7/0xb

Code: 0f 0b 14 05 53 ad 38 c0 83 c3 04 83 c4 0c 89 d8 5b 5e 5f 5d

.config:

CONFIG_X86=y
CONFIG_UID16=y
CONFIG_GENERIC_ISA_DMA=y
CONFIG_EXPERIMENTAL=y
CONFIG_NET=y
CONFIG_SYSVIPC=y
CONFIG_SYSCTL=y
CONFIG_MODULES=y
CONFIG_MODVERSIONS=y
CONFIG_KMOD=y
CONFIG_MPENTIUMIII=y
CONFIG_X86_WP_WORKS_OK=y
CONFIG_X86_INVLPG=y
CONFIG_X86_CMPXCHG=y
CONFIG_X86_XADD=y
CONFIG_X86_BSWAP=y
CONFIG_X86_POPAD_OK=y
CONFIG_RWSEM_XCHGADD_ALGORITHM=y
CONFIG_X86_TSC=y
CONFIG_X86_GOOD_APIC=y
CONFIG_X86_USE_PPRO_CHECKSUM=y
CONFIG_SMP=y
CONFIG_X86_MCE=y
CONFIG_X86_MCE_P4THERMAL=y
CONFIG_NOHIGHMEM=y
CONFIG_MTRR=y
CONFIG_HAVE_DEC_LOCK=y
CONFIG_ACPI=y
CONFIG_ACPI_BOOT=y
CONFIG_ACPI_AC=y
CONFIG_ACPI_BATTERY=y
CONFIG_ACPI_BUTTON=y
CONFIG_ACPI_FAN=y
CONFIG_ACPI_PROCESSOR=y
CONFIG_ACPI_THERMAL=y
CONFIG_ACPI_DEBUG=y
CONFIG_ACPI_BOOT=y
CONFIG_ACPI_BUS=y
CONFIG_ACPI_INTERPRETER=y
CONFIG_ACPI_EC=y
CONFIG_ACPI_POWER=y
CONFIG_ACPI_PCI=y
CONFIG_ACPI_SYSTEM=y
CONFIG_PM=y
CONFIG_X86_IO_APIC=y
CONFIG_X86_LOCAL_APIC=y
CONFIG_PCI=y
CONFIG_PCI_GOANY=y
CONFIG_PCI_BIOS=y
CONFIG_PCI_DIRECT=y
CONFIG_PCI_NAMES=y
CONFIG_ISA=y
CONFIG_HOTPLUG=y
CONFIG_PCMCIA=y
CONFIG_CARDBUS=y
CONFIG_KCORE_ELF=y
CONFIG_BINFMT_AOUT=y
CONFIG_BINFMT_ELF=y
CONFIG_BINFMT_MISC=y
CONFIG_PARPORT=y
CONFIG_PARPORT_PC=y
CONFIG_PARPORT_PC_CML1=y
CONFIG_PARPORT_1284=y
CONFIG_PNP=y
CONFIG_ISAPNP=y
CONFIG_BLK_DEV_FD=y
CONFIG_IDE=y
CONFIG_BLK_DEV_IDE=y
CONFIG_BLK_DEV_IDEDISK=y
CONFIG_IDEDISK_MULTI_MODE=y
CONFIG_BLK_DEV_IDECD=y
CONFIG_BLK_DEV_CMD640=y
CONFIG_BLK_DEV_IDEPCI=y
CONFIG_BLK_DEV_GENERIC=y
CONFIG_IDEPCI_SHARE_IRQ=y
CONFIG_BLK_DEV_IDEDMA_PCI=y
CONFIG_IDEDMA_PCI_AUTO=y
CONFIG_BLK_DEV_IDEDMA=y
CONFIG_BLK_DEV_ADMA=y
CONFIG_BLK_DEV_PIIX=y
CONFIG_BLK_DEV_RZ1000=y
CONFIG_IDEDMA_AUTO=y
CONFIG_BLK_DEV_IDE_MODES=y
CONFIG_PACKET=y
CONFIG_UNIX=y
CONFIG_INET=y
CONFIG_IP_MULTICAST=y
CONFIG_IPV6_SCTP__=y
CONFIG_LLC=y
CONFIG_NETDEVICES=y
CONFIG_NET_ETHERNET=y
CONFIG_NET_PCI=y
CONFIG_E100=y
CONFIG_TR=y
CONFIG_NET_PCMCIA=y
CONFIG_PCMCIA_PCNET=y
CONFIG_NET_PCMCIA_RADIO=y
CONFIG_PCMCIA_RAYCS=y
CONFIG_INPUT=y
CONFIG_INPUT_MOUSEDEV=y
CONFIG_INPUT_MOUSEDEV_PSAUX=y
CONFIG_SOUND_GAMEPORT=y
CONFIG_SERIO=y
CONFIG_SERIO_I8042=y
CONFIG_INPUT_KEYBOARD=y
CONFIG_KEYBOARD_ATKBD=y
CONFIG_INPUT_MOUSE=y
CONFIG_MOUSE_PS2=y
CONFIG_VT=y
CONFIG_VT_CONSOLE=y
CONFIG_HW_CONSOLE=y
CONFIG_SERIAL_8250=y
CONFIG_SERIAL_8250_CONSOLE=y
CONFIG_SERIAL_CORE=y
CONFIG_SERIAL_CORE_CONSOLE=y
CONFIG_UNIX98_PTYS=y
CONFIG_PRINTER=y
CONFIG_INTEL_RNG=y
CONFIG_AGP=y
CONFIG_AGP_INTEL=y
CONFIG_AGP_I810=y
CONFIG_AGP_VIA=y
CONFIG_AGP_AMD=y
CONFIG_AGP_SIS=y
CONFIG_AGP_ALI=y
CONFIG_AGP_SWORKS=y
CONFIG_DRM=y
CONFIG_DRM_RADEON=y
CONFIG_AUTOFS4_FS=y
CONFIG_REISERFS_FS=y
CONFIG_EXT3_FS=y
CONFIG_JBD=y
CONFIG_FAT_FS=y
CONFIG_MSDOS_FS=y
CONFIG_VFAT_FS=y
CONFIG_TMPFS=y
CONFIG_RAMFS=y
CONFIG_ISO9660_FS=y
CONFIG_JOLIET=y
CONFIG_PROC_FS=y
CONFIG_DEVPTS_FS=y
CONFIG_EXT2_FS=y
CONFIG_UDF_FS=y
CONFIG_NFS_FS=y
CONFIG_NFSD=y
CONFIG_SUNRPC=y
CONFIG_LOCKD=y
CONFIG_EXPORTFS=y
CONFIG_MSDOS_PARTITION=y
CONFIG_NLS=y
CONFIG_NLS_CODEPAGE_437=y
CONFIG_NLS_ISO8859_1=y
CONFIG_VGA_CONSOLE=y
CONFIG_DEBUG_KERNEL=y
CONFIG_DEBUG_SLAB=y
CONFIG_MAGIC_SYSRQ=y
CONFIG_DEBUG_SPINLOCK=y
CONFIG_FRAME_POINTER=y
CONFIG_KALLSYMS=y
CONFIG_X86_EXTRA_IRQS=y
CONFIG_X86_FIND_SMP_CONFIG=y
CONFIG_X86_MPPARSE=y
CONFIG_SECURITY_CAPABILITIES=y
CONFIG_X86_SMP=y
CONFIG_X86_HT=y
CONFIG_X86_BIOS_REBOOT=y
CONFIG_DUMMY=m
CONFIG_IBMLS=m


