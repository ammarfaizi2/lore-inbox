Return-Path: <linux-kernel-owner+willy=40w.ods.org-S1751355AbVKELTS@vger.kernel.org>
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S1751355AbVKELTS (ORCPT <rfc822;willy@w.ods.org>);
	Sat, 5 Nov 2005 06:19:18 -0500
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S1751462AbVKELTS
	(ORCPT <rfc822;linux-kernel-outgoing>);
	Sat, 5 Nov 2005 06:19:18 -0500
Received: from xproxy.gmail.com ([66.249.82.204]:31063 "EHLO xproxy.gmail.com")
	by vger.kernel.org with ESMTP id S1751355AbVKELTR convert rfc822-to-8bit
	(ORCPT <rfc822;linux-kernel@vger.kernel.org>);
	Sat, 5 Nov 2005 06:19:17 -0500
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=VPzTkgJPNqhT4V6odN/vSLQVKjXe+kuPbVBdVdVwH9457ZFEj2yw5APep3LnwRE61z6TA5N0LWk8qh2pd2XdFx/2tFDygqdA2ajZtZsj0E+B2cURWLxgpu3wknTsGkkZEDNXtZ4ILjfTPoHl544HTUDjU/mzdvDJO1BhaMEH8oo=
Message-ID: <3c0797c60511050319s79772d84td8ceeaa3b243da30@mail.gmail.com>
Date: Sat, 5 Nov 2005 22:19:17 +1100
From: Patrick Barnes <patrick.barnes@gmail.com>
To: linux-kernel@vger.kernel.org
Subject: Killing a process with a kernel module
MIME-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7BIT
Content-Disposition: inline
Sender: linux-kernel-owner@vger.kernel.org
X-Mailing-List: linux-kernel@vger.kernel.org

Hi there,

RedHat recently released RHEL4 U2, and this update has some
unfortunate consequences, mainly
https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=170087

As stated in the bugzilla report above, useradd gets stuck in a R
state and ignores all signals.

I have a critical system which I can't take down for another week or
so, but the extra load generated by the rogue useradd process is
slowing things down a little too much.

I was wondering if it was possible to safely terminate the process
using a more direct method (perhaps by manipulating kernel data
structures.)

What I'd like to know is if it is actually possible before attempting
to write the code to do it.

I know this is a long shot, but it's probably worth trying. :)

Thanks for your time. I look forward to any replies.

Regards,
Patrick
