Return-Path: <linux-kernel-owner+willy=40w.ods.org@vger.kernel.org>
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S262902AbUA0QGQ (ORCPT <rfc822;willy@w.ods.org>);
	Tue, 27 Jan 2004 11:06:16 -0500
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S264889AbUA0QGQ
	(ORCPT <rfc822;linux-kernel-outgoing>);
	Tue, 27 Jan 2004 11:06:16 -0500
Received: from ns.suse.de ([195.135.220.2]:30372 "EHLO Cantor.suse.de")
	by vger.kernel.org with ESMTP id S262902AbUA0QGP (ORCPT
	<rfc822;linux-kernel@vger.kernel.org>);
	Tue, 27 Jan 2004 11:06:15 -0500
Date: Tue, 27 Jan 2004 17:00:46 +0100
Message-ID: <s5h1xpl1ivl.wl@alsa2.suse.de>
From: Takashi Iwai <tiwai@suse.de>
To: linux-kernel <linux-kernel@vger.kernel.org>
Subject: Re: [Bug 1959] New: cs46xx driver mmap_valid 0-->1 in	kernel 2.6.x? 
In-Reply-To: <365550000.1075216480@[10.10.2.4]>
References: <365550000.1075216480@10.10.2.4>
User-Agent: Wanderlust/2.10.1 (Watching The Wheels) SEMI/1.14.5 (Awara-Onsen) FLIM/1.14.5 (Demachiyanagi) APEL/10.6 MULE XEmacs/21.4 (patch 13) (Rational FORTRAN) (i386-suse-linux)
MIME-Version: 1.0 (generated by SEMI 1.14.5 - "Awara-Onsen")
Content-Type: text/plain; charset=US-ASCII
Sender: linux-kernel-owner@vger.kernel.org
X-Mailing-List: linux-kernel@vger.kernel.org

At Tue, 27 Jan 2004 07:14:40 -0800,
Martin J. Bligh wrote:
> 
> Is there a reason to keep mmap_valid=0 in cs46xx driver or is this a real bug? I
> haven't seen any new bugs with this patch applied, all the multimedia
> applications (mplayer, xine, xmms, noatun) keeps on working.

cs46xx doesn't always support the direct hardware buffer.
Only in some cases with a proper period (fragment) numbers, it can
support the direct buffer access.  mmap_valid option forces the driver
to allow OSS apps the direct accessing via mmap.  This might not work
always, depending on the parameter the app uses.  Use at your own
risk.

In short: it's not a real bug as long as mmap_valid=1 option works.
You had luck that your OSS apps (using mmap) seem working :)

--
Takashi Iwai <tiwai@suse.de>		ALSA Developer - www.alsa-project.org
