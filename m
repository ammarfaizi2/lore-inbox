Return-Path: <linux-kernel-owner+willy=40w.ods.org@vger.kernel.org>
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S264371AbTKMSp4 (ORCPT <rfc822;willy@w.ods.org>);
	Thu, 13 Nov 2003 13:45:56 -0500
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S264372AbTKMSp4
	(ORCPT <rfc822;linux-kernel-outgoing>);
	Thu, 13 Nov 2003 13:45:56 -0500
Received: from dd1234.kasserver.com ([81.209.148.157]:36309 "EHLO
	dd1234.kasserver.com") by vger.kernel.org with ESMTP
	id S264371AbTKMSpx (ORCPT <rfc822;linux-kernel@vger.kernel.org>);
	Thu, 13 Nov 2003 13:45:53 -0500
Date: Thu, 13 Nov 2003 18:45:06 +0000
From: Jochen Voss <voss@seehuhn.de>
To: Linus Torvalds <torvalds@osdl.org>
Cc: linux-kernel@vger.kernel.org
Subject: Re: invalid SMP mptable on Toshiba Satellite 2430-301
Message-ID: <20031113184506.GA602@seehuhn.de>
References: <20031113180442.GA2161@seehuhn.de> <Pine.LNX.4.44.0311131009450.8093-100000@home.osdl.org>
Mime-Version: 1.0
Content-Type: multipart/signed; micalg=pgp-sha1;
	protocol="application/pgp-signature"; boundary="fdj2RfSjLxBAspz7"
Content-Disposition: inline
In-Reply-To: <Pine.LNX.4.44.0311131009450.8093-100000@home.osdl.org>
User-Agent: Mutt/1.5.4i
Sender: linux-kernel-owner@vger.kernel.org
X-Mailing-List: linux-kernel@vger.kernel.org


--fdj2RfSjLxBAspz7
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
Content-Transfer-Encoding: quoted-printable

Hello,

On Thu, Nov 13, 2003 at 10:13:08AM -0800, Linus Torvalds wrote:
> Hmm.. Do you have ACPI enabled? We really shouldn't need the MP table if=
=20
> the information is elsewhere, but the mptable assumptions might be a bit=
=20
> entrenched.

With SMP and ACPI enabled I get the following kernel
boot messages

    Intel MultiProcessor Specification v1.4
	Virtual Wire compatibility mode.
    SMP mptable: bad signature [0x0]!
    BIOS bug, MP table errors detected!...
    ... disabling SMP support. (tell your hw vendor)

The last message is generated by the following code
in arch/i386/kernel/mpparse.c:

    if (!smp_read_mpc((void *)mpf->mpf_physptr)) {
        smp_found_config =3D 0;
        printk(KERN_ERR "BIOS bug, MP table errors detected!...\n");
        printk(KERN_ERR "... disabling SMP support. (tell your hw vendor)\n=
");
        return;
    }

I don't know what effects are caused by the 'smp_found_config =3D 0',
but later-on the following messages appear:

    No local APIC present or hardware disabled
    ...
    CPU:     After generic identify, caps: bfebf9ff 00000000 00000000 00000=
000
    CPU:     After vendor identify, caps: bfebf9ff 00000000 00000000 000000=
00
    CPU: Trace cache: 12K uops, L1 D cache: 8K
    CPU: L2 cache: 512K
    CPU: Hyper-Threading is disabled
    CPU:     After all inits, caps: bfebf9ff 00000000 00000000 00000080
    ...
    SMP motherboard not detected.
    Local APIC not detected. Using dummy APIC emulation.
    Starting migration thread for cpu 0
    CPUS done 4

I hope this helps,
Jochen
--=20
http://seehuhn.de/

--fdj2RfSjLxBAspz7
Content-Type: application/pgp-signature; name="signature.asc"
Content-Description: Digital signature
Content-Disposition: inline

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.2.3 (GNU/Linux)

iD8DBQE/s9Eyf+iD8yEbECURArdYAJ9S1u9n26giPgCwdEMluLA7J5IzmQCdG4II
ShqS6DPpFhLvNIkCu3908+0=
=/fAi
-----END PGP SIGNATURE-----

--fdj2RfSjLxBAspz7--
