Return-Path: <linux-kernel-owner+willy=40w.ods.org@vger.kernel.org>
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id <S315414AbSHISvp>; Fri, 9 Aug 2002 14:51:45 -0400
Received: (majordomo@vger.kernel.org) by vger.kernel.org
	id <S315431AbSHISvp>; Fri, 9 Aug 2002 14:51:45 -0400
Received: from neon-gw-l3.transmeta.com ([63.209.4.196]:64270 "EHLO
	neon-gw.transmeta.com") by vger.kernel.org with ESMTP
	id <S315414AbSHISvo>; Fri, 9 Aug 2002 14:51:44 -0400
Message-ID: <3D541018.4050004@zytor.com>
Date: Fri, 09 Aug 2002 11:55:20 -0700
From: "H. Peter Anvin" <hpa@zytor.com>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.0.0) Gecko/20020703
X-Accept-Language: en-us, en, sv
MIME-Version: 1.0
To: Arnd Bergmann <arnd@bergmann-dalldorf.de>
CC: linux-kernel@vger.kernel.org
Subject: Re: klibc development release
References: <aivdi8$r2i$1@cesium.transmeta.com> <200208090934.g799YVZe116824@d12relay01.de.ibm.com> <200208091754.g79HsJkN058572@d06relay02.portsmouth.uk.ibm.com>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
Sender: linux-kernel-owner@vger.kernel.org
X-Mailing-List: linux-kernel@vger.kernel.org

Arnd Bergmann wrote:
>> You could say you are 50% there ;-)
> 
> For the autogenerated system call objects, a quick grep in include/asm-*/unistd
> showed some more that appear to be missing on some platforms:
> 
> alpha: alarm, fdatasync, getegid, geteuid, getgid, getpid, getppid, getuid, nice,
> 	pause, umount2, utime, time
> ia64:	alarm, fork, getpgrp, nice, pause, umount2, utime, vfork, time
> mips64: pivot_root, select, vfork
> mips:	vfork
> parisc: select, umount
> x86_64:	nice, umount
> sparc: setresgid, setresuid
> s390x: time
> s390: select
> m68k: pivot_root
 >

Hmf... some of these seem to be outright omissions (pivot_root() and 
umount2() especially), and probably indicate bugs or that the stock 
kernel isn't up to date anymore.

I can see umount() being missing (as in "use umount2()").  time() I 
guess can be emulated with gettimeofday(), but select() being missing is 
rather odd (is this a "emulate using poll()" philosophy?  Barf...)

If the maintainers of the above ports could give me a pointer to how the 
above system calls are expected to be done I'd appreciate it.  I'll 
probably look through the glibc sources for hints in the meantime.

	-hpa

