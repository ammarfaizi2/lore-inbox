Return-Path: <linux-kernel-owner+willy=40w.ods.org-S1423553AbWKHUnJ@vger.kernel.org>
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S1423553AbWKHUnJ (ORCPT <rfc822;willy@w.ods.org>);
	Wed, 8 Nov 2006 15:43:09 -0500
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S1423682AbWKHUnJ
	(ORCPT <rfc822;linux-kernel-outgoing>);
	Wed, 8 Nov 2006 15:43:09 -0500
Received: from gw.goop.org ([64.81.55.164]:40406 "EHLO mail.goop.org")
	by vger.kernel.org with ESMTP id S1423553AbWKHUnI (ORCPT
	<rfc822;linux-kernel@vger.kernel.org>);
	Wed, 8 Nov 2006 15:43:08 -0500
Message-ID: <45524158.7040301@goop.org>
Date: Wed, 08 Nov 2006 12:43:04 -0800
From: Jeremy Fitzhardinge <jeremy@goop.org>
User-Agent: Thunderbird 1.5.0.7 (X11/20061027)
MIME-Version: 1.0
To: Hugh Dickins <hugh@veritas.com>
CC: Jan Beulich <jbeulich@novell.com>, linux-kernel@vger.kernel.org,
       Andrew Morton <akpm@osdl.org>
Subject: Re: [PATCH] i386: make BUG() expansion look like instruction
References: <45521329.76E4.0078.0@novell.com> <Pine.LNX.4.64.0611081733300.5025@blonde.wat.veritas.com>
In-Reply-To: <Pine.LNX.4.64.0611081733300.5025@blonde.wat.veritas.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Sender: linux-kernel-owner@vger.kernel.org
X-Mailing-List: linux-kernel@vger.kernel.org

Hugh Dickins wrote:
> On Wed, 8 Nov 2006, Jan Beulich wrote:
>   
>> This gets i386's handle_BUG() in sync with x86-64's, namely introducing
>> a 'struct bug_frame' and arranging for the code generated by the BUG()
>> macro to represent an instruction, so that disassembling code
>> containing such constructs doesn't produce garbage anymore. The
>> resulting increase of code size is marginal (1 byte per instance).
>>     
>
> I thought we were heading towards merging Jeremy's generic-bug-*
> (with file and line in another section), in -mm for a while now?
>   

That's certainly my impression.  Andrew already NAKed my original patch 
which did something similar to Jan's, in favour of making the powerpc 
BUG handling code generic.  I'm hoping the generic bug can be put in 
mainline fairly soon, and then encourage other arch maintainers to use it.

I think there's still some question in the air over powerpc's use of the 
generic bug stuff, but as far as I know Andrew is the only person to 
have a problem with it.

    J
