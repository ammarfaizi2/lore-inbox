Return-Path: <linux-kernel-owner@vger.kernel.org>
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id <S129183AbQLAN0o>; Fri, 1 Dec 2000 08:26:44 -0500
Received: (majordomo@vger.kernel.org) by vger.kernel.org
	id <S129210AbQLAN0i>; Fri, 1 Dec 2000 08:26:38 -0500
Received: from leibniz.math.psu.edu ([146.186.130.2]:57729 "EHLO math.psu.edu")
	by vger.kernel.org with ESMTP id <S129183AbQLAN0K>;
	Fri, 1 Dec 2000 08:26:10 -0500
Date: Fri, 1 Dec 2000 07:55:42 -0500 (EST)
From: Alexander Viro <viro@math.psu.edu>
To: "Theodore Y. Ts'o" <tytso@MIT.EDU>
cc: linux-kernel@vger.kernel.org
Subject: Re: [CFT][RFC] ext2_new_inode() fixes and cleanup
In-Reply-To: <200011302318.SAA17390@tsx-prime.MIT.EDU>
Message-ID: <Pine.GSO.4.21.0012010748010.22427-800000@weyl.math.psu.edu>
MIME-Version: 1.0
Content-Type: MULTIPART/MIXED; BOUNDARY="-559023410-1903590565-975675342=:22427"
Sender: linux-kernel-owner@vger.kernel.org
X-Mailing-List: linux-kernel@vger.kernel.org

  This message is in MIME format.  The first part should be readable text,
  while the remaining parts are likely unreadable without MIME-aware tools.
  Send mail to mime@docserver.cac.washington.edu for more info.

---559023410-1903590565-975675342=:22427
Content-Type: TEXT/PLAIN; charset=US-ASCII



On Thu, 30 Nov 2000, Theodore Y. Ts'o wrote:

> If you could send me the split up, I'd appreciate it, as it'll make it
> easier to find any subtle bugs.  I certainly like the general way you've
> cleaned up the interfaces and factored out the code.

See attachments. Order of patches is alphabetical ;-)
							Cheers,
								Al

---559023410-1903590565-975675342=:22427
Content-Type: TEXT/PLAIN; charset=US-ASCII; name=A-ext2_new_inode
Content-Transfer-Encoding: BASE64
Content-ID: <Pine.GSO.4.21.0012010755420.22427@weyl.math.psu.edu>
Content-Description: ext2_new_inode prototype sanitized
Content-Disposition: attachment; filename=A-ext2_new_inode

ZGlmZiAtdXJOIGV4dDIvZnMvZXh0Mi9pYWxsb2MuYyBleHQyLTEvZnMvZXh0
Mi9pYWxsb2MuYw0KLS0tIGV4dDIvZnMvZXh0Mi9pYWxsb2MuYwlUaHUgTm92
IDMwIDExOjIzOjE4IDIwMDANCisrKyBleHQyLTEvZnMvZXh0Mi9pYWxsb2Mu
YwlGcmkgRGVjICAxIDEwOjM1OjI0IDIwMDANCkBAIC0yNTYsNyArMjU2LDcg
QEANCiAgKiBGb3Igb3RoZXIgaW5vZGVzLCBzZWFyY2ggZm9yd2FyZCBmcm9t
IHRoZSBwYXJlbnQgZGlyZWN0b3J5XCdzIGJsb2NrDQogICogZ3JvdXAgdG8g
ZmluZCBhIGZyZWUgaW5vZGUuDQogICovDQotc3RydWN0IGlub2RlICogZXh0
Ml9uZXdfaW5vZGUgKGNvbnN0IHN0cnVjdCBpbm9kZSAqIGRpciwgaW50IG1v
ZGUsIGludCAqIGVycikNCitzdHJ1Y3QgaW5vZGUgKiBleHQyX25ld19pbm9k
ZSAoY29uc3Qgc3RydWN0IGlub2RlICogZGlyLCBpbnQgbW9kZSkNCiB7DQog
CXN0cnVjdCBzdXBlcl9ibG9jayAqIHNiOw0KIAlzdHJ1Y3QgYnVmZmVyX2hl
YWQgKiBiaDsNCkBAIC0yNjcsMjYgKzI2NywyMiBAQA0KIAlzdHJ1Y3QgZXh0
Ml9ncm91cF9kZXNjICogZ2RwOw0KIAlzdHJ1Y3QgZXh0Ml9ncm91cF9kZXNj
ICogdG1wOw0KIAlzdHJ1Y3QgZXh0Ml9zdXBlcl9ibG9jayAqIGVzOw0KKwlp
bnQgZXJyOw0KIA0KIAkvKiBDYW5ub3QgY3JlYXRlIGZpbGVzIGluIGEgZGVs
ZXRlZCBkaXJlY3RvcnkgKi8NCi0JaWYgKCFkaXIgfHwgIWRpci0+aV9ubGlu
aykgew0KLQkJKmVyciA9IC1FUEVSTTsNCi0JCXJldHVybiBOVUxMOw0KLQl9
DQorCWlmICghZGlyIHx8ICFkaXItPmlfbmxpbmspDQorCQlyZXR1cm4gRVJS
X1BUUigtRVBFUk0pOw0KIA0KIAlzYiA9IGRpci0+aV9zYjsNCiAJaW5vZGUg
PSBuZXdfaW5vZGUoc2IpOw0KLQlpZiAoIWlub2RlKSB7DQotCQkqZXJyID0g
LUVOT01FTTsNCi0JCXJldHVybiBOVUxMOw0KLQl9DQorCWlmICghaW5vZGUp
DQorCQlyZXR1cm4gRVJSX1BUUigtRU5PTUVNKTsNCiANCiAJbG9ja19zdXBl
ciAoc2IpOw0KIAllcyA9IHNiLT51LmV4dDJfc2Iuc19lczsNCiByZXBlYXQ6
DQogCWdkcCA9IE5VTEw7IGk9MDsNCiAJDQotCSplcnIgPSAtRU5PU1BDOw0K
IAlpZiAoU19JU0RJUihtb2RlKSkgew0KIAkJYXZlZnJlZWkgPSBsZTMyX3Rv
X2NwdShlcy0+c19mcmVlX2lub2Rlc19jb3VudCkgLw0KIAkJCXNiLT51LmV4
dDJfc2Iuc19ncm91cHNfY291bnQ7DQpAQCAtMzY1LDE4ICszNjEsMTQgQEAN
CiAJCX0NCiAJfQ0KIA0KLQlpZiAoIWdkcCkgew0KLQkJdW5sb2NrX3N1cGVy
IChzYik7DQotCQlpcHV0KGlub2RlKTsNCi0JCXJldHVybiBOVUxMOw0KLQl9
DQorCWVyciA9IC1FTk9TUEM7DQorCWlmICghZ2RwKQ0KKwkJZ290byBmYWls
Ow0KKw0KKwllcnIgPSAtRUlPOw0KIAliaXRtYXBfbnIgPSBsb2FkX2lub2Rl
X2JpdG1hcCAoc2IsIGkpOw0KLQlpZiAoYml0bWFwX25yIDwgMCkgew0KLQkJ
dW5sb2NrX3N1cGVyIChzYik7DQotCQlpcHV0KGlub2RlKTsNCi0JCSplcnIg
PSAtRUlPOw0KLQkJcmV0dXJuIE5VTEw7DQotCX0NCisJaWYgKGJpdG1hcF9u
ciA8IDApDQorCQlnb3RvIGZhaWw7DQogDQogCWJoID0gc2ItPnUuZXh0Ml9z
Yi5zX2lub2RlX2JpdG1hcFtiaXRtYXBfbnJdOw0KIAlpZiAoKGogPSBleHQy
X2ZpbmRfZmlyc3RfemVyb19iaXQgKCh1bnNpZ25lZCBsb25nICopIGJoLT5i
X2RhdGEsDQpAQCAtMzk3LDExICszODksMTEgQEANCiAJCQlleHQyX2Vycm9y
IChzYiwgImV4dDJfbmV3X2lub2RlIiwNCiAJCQkJICAgICJGcmVlIGlub2Rl
cyBjb3VudCBjb3JydXB0ZWQgaW4gZ3JvdXAgJWQiLA0KIAkJCQkgICAgaSk7
DQotCQkJaWYgKHNiLT5zX2ZsYWdzICYgTVNfUkRPTkxZKSB7DQotCQkJCXVu
bG9ja19zdXBlciAoc2IpOw0KLQkJCQlpcHV0IChpbm9kZSk7DQotCQkJCXJl
dHVybiBOVUxMOw0KLQkJCX0NCisJCQkvKiBJcyBpdCByZWFsbHkgRU5PU1BD
PyAqLw0KKwkJCWVyciA9IC1FTk9TUEM7DQorCQkJaWYgKHNiLT5zX2ZsYWdz
ICYgTVNfUkRPTkxZKQ0KKwkJCQlnb3RvIGZhaWw7DQorDQogCQkJZ2RwLT5i
Z19mcmVlX2lub2Rlc19jb3VudCA9IDA7DQogCQkJbWFya19idWZmZXJfZGly
dHkoYmgyKTsNCiAJCX0NCkBAIC00MTIsMTAgKzQwNCw4IEBADQogCQlleHQy
X2Vycm9yIChzYiwgImV4dDJfbmV3X2lub2RlIiwNCiAJCQkgICAgInJlc2Vy
dmVkIGlub2RlIG9yIGlub2RlID4gaW5vZGVzIGNvdW50IC0gIg0KIAkJCSAg
ICAiYmxvY2tfZ3JvdXAgPSAlZCxpbm9kZT0lZCIsIGksIGopOw0KLQkJdW5s
b2NrX3N1cGVyIChzYik7DQotCQlpcHV0IChpbm9kZSk7DQotCQkqZXJyID0g
LUVJTzsNCi0JCXJldHVybiBOVUxMOw0KKwkJZXJyID0gLUVJTzsNCisJCWdv
dG8gZmFpbDsNCiAJfQ0KIAlnZHAtPmJnX2ZyZWVfaW5vZGVzX2NvdW50ID0N
CiAJCWNwdV90b19sZTE2KGxlMTZfdG9fY3B1KGdkcC0+YmdfZnJlZV9pbm9k
ZXNfY291bnQpIC0gMSk7DQpAQCAtNDY0LDEzICs0NTQsMTUgQEANCiAJCXNi
LT5kcV9vcC0+ZHJvcChpbm9kZSk7DQogCQlpbm9kZS0+aV9ubGluayA9IDA7
DQogCQlpcHV0KGlub2RlKTsNCi0JCSplcnIgPSAtRURRVU9UOw0KLQkJcmV0
dXJuIE5VTEw7DQorCQlyZXR1cm4gRVJSX1BUUigtRURRVU9UKTsNCiAJfQ0K
IAlleHQyX2RlYnVnICgiYWxsb2NhdGluZyBpbm9kZSAlbHVcbiIsIGlub2Rl
LT5pX2lubyk7DQotDQotCSplcnIgPSAwOw0KIAlyZXR1cm4gaW5vZGU7DQor
DQorZmFpbDoNCisJdW5sb2NrX3N1cGVyKHNiKTsNCisJaXB1dChpbm9kZSk7
DQorCXJldHVybiBFUlJfUFRSKGVycik7DQogfQ0KIA0KIHVuc2lnbmVkIGxv
bmcgZXh0Ml9jb3VudF9mcmVlX2lub2RlcyAoc3RydWN0IHN1cGVyX2Jsb2Nr
ICogc2IpDQpkaWZmIC11ck4gZXh0Mi9mcy9leHQyL25hbWVpLmMgZXh0Mi0x
L2ZzL2V4dDIvbmFtZWkuYw0KLS0tIGV4dDIvZnMvZXh0Mi9uYW1laS5jCVRo
dSBOb3YgMzAgMTE6MjM6MTggMjAwMA0KKysrIGV4dDItMS9mcy9leHQyL25h
bWVpLmMJRnJpIERlYyAgMSAxMDozNToyNCAyMDAwDQpAQCAtMzYxLDExICsz
NjEsOSBAQA0KICAqLw0KIHN0YXRpYyBpbnQgZXh0Ml9jcmVhdGUgKHN0cnVj
dCBpbm9kZSAqIGRpciwgc3RydWN0IGRlbnRyeSAqIGRlbnRyeSwgaW50IG1v
ZGUpDQogew0KLQlzdHJ1Y3QgaW5vZGUgKiBpbm9kZTsNCi0JaW50IGVycjsN
Ci0NCi0JaW5vZGUgPSBleHQyX25ld19pbm9kZSAoZGlyLCBtb2RlLCAmZXJy
KTsNCi0JaWYgKCFpbm9kZSkNCisJc3RydWN0IGlub2RlICogaW5vZGUgPSBl
eHQyX25ld19pbm9kZSAoZGlyLCBtb2RlKTsNCisJaW50IGVyciA9IFBUUl9F
UlIoaW5vZGUpOw0KKwlpZiAoSVNfRVJSKGlub2RlKSkNCiAJCXJldHVybiBl
cnI7DQogDQogCWlub2RlLT5pX29wID0gJmV4dDJfZmlsZV9pbm9kZV9vcGVy
YXRpb25zOw0KQEAgLTM4NywxMSArMzg1LDEwIEBADQogDQogc3RhdGljIGlu
dCBleHQyX21rbm9kIChzdHJ1Y3QgaW5vZGUgKiBkaXIsIHN0cnVjdCBkZW50
cnkgKmRlbnRyeSwgaW50IG1vZGUsIGludCByZGV2KQ0KIHsNCi0Jc3RydWN0
IGlub2RlICogaW5vZGU7DQotCWludCBlcnI7DQorCXN0cnVjdCBpbm9kZSAq
IGlub2RlID0gZXh0Ml9uZXdfaW5vZGUgKGRpciwgbW9kZSk7DQorCWludCBl
cnIgPSBQVFJfRVJSKGlub2RlKTsNCiANCi0JaW5vZGUgPSBleHQyX25ld19p
bm9kZSAoZGlyLCBtb2RlLCAmZXJyKTsNCi0JaWYgKCFpbm9kZSkNCisJaWYg
KElTX0VSUihpbm9kZSkpDQogCQlyZXR1cm4gZXJyOw0KIA0KIAlpbm9kZS0+
aV91aWQgPSBjdXJyZW50LT5mc3VpZDsNCkBAIC00MjEsOCArNDE4LDkgQEAN
CiAJaWYgKGRpci0+aV9ubGluayA+PSBFWFQyX0xJTktfTUFYKQ0KIAkJcmV0
dXJuIC1FTUxJTks7DQogDQotCWlub2RlID0gZXh0Ml9uZXdfaW5vZGUgKGRp
ciwgU19JRkRJUiwgJmVycik7DQotCWlmICghaW5vZGUpDQorCWlub2RlID0g
ZXh0Ml9uZXdfaW5vZGUgKGRpciwgU19JRkRJUik7DQorCWVyciA9IFBUUl9F
UlIoaW5vZGUpOw0KKwlpZiAoSVNfRVJSKGlub2RlKSkNCiAJCXJldHVybiBl
cnI7DQogDQogCWlub2RlLT5pX29wID0gJmV4dDJfZGlyX2lub2RlX29wZXJh
dGlvbnM7DQpAQCAtNjI4LDcgKzYyNiw5IEBADQogCWlmIChsID4gZGlyLT5p
X3NiLT5zX2Jsb2Nrc2l6ZSkNCiAJCXJldHVybiAtRU5BTUVUT09MT05HOw0K
IA0KLQlpZiAoIShpbm9kZSA9IGV4dDJfbmV3X2lub2RlIChkaXIsIFNfSUZM
TkssICZlcnIpKSkNCisJaW5vZGUgPSBleHQyX25ld19pbm9kZSAoZGlyLCBT
X0lGTE5LKTsNCisJZXJyID0gUFRSX0VSUihpbm9kZSk7DQorCWlmIChJU19F
UlIoaW5vZGUpKQ0KIAkJcmV0dXJuIGVycjsNCiANCiAJaW5vZGUtPmlfbW9k
ZSA9IFNfSUZMTksgfCBTX0lSV1hVR087DQpkaWZmIC11ck4gZXh0Mi9pbmNs
dWRlL2xpbnV4L2V4dDJfZnMuaCBleHQyLTEvaW5jbHVkZS9saW51eC9leHQy
X2ZzLmgNCi0tLSBleHQyL2luY2x1ZGUvbGludXgvZXh0Ml9mcy5oCVRodSBO
b3YgMzAgMTE6MjM6MTggMjAwMA0KKysrIGV4dDItMS9pbmNsdWRlL2xpbnV4
L2V4dDJfZnMuaAlGcmkgRGVjICAxIDEwOjM1OjI0IDIwMDANCkBAIC01NTIs
NyArNTUyLDcgQEANCiBleHRlcm4gaW50IGV4dDJfZnN5bmNfaW5vZGUgKHN0
cnVjdCBpbm9kZSAqLCBpbnQpOw0KIA0KIC8qIGlhbGxvYy5jICovDQotZXh0
ZXJuIHN0cnVjdCBpbm9kZSAqIGV4dDJfbmV3X2lub2RlIChjb25zdCBzdHJ1
Y3QgaW5vZGUgKiwgaW50LCBpbnQgKik7DQorZXh0ZXJuIHN0cnVjdCBpbm9k
ZSAqIGV4dDJfbmV3X2lub2RlIChjb25zdCBzdHJ1Y3QgaW5vZGUgKiwgaW50
KTsNCiBleHRlcm4gdm9pZCBleHQyX2ZyZWVfaW5vZGUgKHN0cnVjdCBpbm9k
ZSAqKTsNCiBleHRlcm4gdW5zaWduZWQgbG9uZyBleHQyX2NvdW50X2ZyZWVf
aW5vZGVzIChzdHJ1Y3Qgc3VwZXJfYmxvY2sgKik7DQogZXh0ZXJuIHZvaWQg
ZXh0Ml9jaGVja19pbm9kZXNfYml0bWFwIChzdHJ1Y3Qgc3VwZXJfYmxvY2sg
Kik7DQo=
---559023410-1903590565-975675342=:22427
Content-Type: TEXT/PLAIN; charset=US-ASCII; name=B-ext2_i_mode
Content-Transfer-Encoding: BASE64
Content-ID: <Pine.GSO.4.21.0012010755421.22427@weyl.math.psu.edu>
Content-Description: i_mode cleanups
Content-Disposition: attachment; filename=B-ext2_i_mode

ZGlmZiAtdXJOIGV4dDItMS9mcy9leHQyL25hbWVpLmMgZXh0Mi0yL2ZzL2V4
dDIvbmFtZWkuYw0KLS0tIGV4dDItMS9mcy9leHQyL25hbWVpLmMJRnJpIERl
YyAgMSAxMDozNToyNCAyMDAwDQorKysgZXh0Mi0yL2ZzL2V4dDIvbmFtZWku
YwlGcmkgRGVjICAxIDEwOjM3OjMyIDIwMDANCkBAIC0zNjksNyArMzY5LDYg
QEANCiAJaW5vZGUtPmlfb3AgPSAmZXh0Ml9maWxlX2lub2RlX29wZXJhdGlv
bnM7DQogCWlub2RlLT5pX2ZvcCA9ICZleHQyX2ZpbGVfb3BlcmF0aW9uczsN
CiAJaW5vZGUtPmlfbWFwcGluZy0+YV9vcHMgPSAmZXh0Ml9hb3BzOw0KLQlp
bm9kZS0+aV9tb2RlID0gbW9kZTsNCiAJbWFya19pbm9kZV9kaXJ0eShpbm9k
ZSk7DQogCWVyciA9IGV4dDJfYWRkX2VudHJ5IChkaXIsIGRlbnRyeS0+ZF9u
YW1lLm5hbWUsIGRlbnRyeS0+ZF9uYW1lLmxlbiwgDQogCQkJICAgICBpbm9k
ZSk7DQpAQCAtNDE4LDcgKzQxNywxMCBAQA0KIAlpZiAoZGlyLT5pX25saW5r
ID49IEVYVDJfTElOS19NQVgpDQogCQlyZXR1cm4gLUVNTElOSzsNCiANCi0J
aW5vZGUgPSBleHQyX25ld19pbm9kZSAoZGlyLCBTX0lGRElSKTsNCisJaWYg
KGRpci0+aV9tb2RlICYgU19JU0dJRCkNCisJCW1vZGUgfD0gU19JU0dJRDsN
CisNCisJaW5vZGUgPSBleHQyX25ld19pbm9kZSAoZGlyLCBTX0lGRElSIHwg
bW9kZSk7DQogCWVyciA9IFBUUl9FUlIoaW5vZGUpOw0KIAlpZiAoSVNfRVJS
KGlub2RlKSkNCiAJCXJldHVybiBlcnI7DQpAQCAtNDI2LDcgKzQyOCw2IEBA
DQogCWlub2RlLT5pX29wID0gJmV4dDJfZGlyX2lub2RlX29wZXJhdGlvbnM7
DQogCWlub2RlLT5pX2ZvcCA9ICZleHQyX2Rpcl9vcGVyYXRpb25zOw0KIAlp
bm9kZS0+aV9zaXplID0gaW5vZGUtPmlfc2ItPnNfYmxvY2tzaXplOw0KLQlp
bm9kZS0+aV9ibG9ja3MgPSAwOwkNCiAJZGlyX2Jsb2NrID0gZXh0Ml9icmVh
ZCAoaW5vZGUsIDAsIDEsICZlcnIpOw0KIAlpZiAoIWRpcl9ibG9jaykgew0K
IAkJaW5vZGUtPmlfbmxpbmstLTsgLyogaXMgdGhpcyBubGluayA9PSAwPyAq
Lw0KQEAgLTQ0OSw5ICs0NTAsNiBAQA0KIAlpbm9kZS0+aV9ubGluayA9IDI7
DQogCW1hcmtfYnVmZmVyX2RpcnR5X2lub2RlKGRpcl9ibG9jaywgZGlyKTsN
CiAJYnJlbHNlIChkaXJfYmxvY2spOw0KLQlpbm9kZS0+aV9tb2RlID0gU19J
RkRJUiB8IG1vZGU7DQotCWlmIChkaXItPmlfbW9kZSAmIFNfSVNHSUQpDQot
CQlpbm9kZS0+aV9tb2RlIHw9IFNfSVNHSUQ7DQogCW1hcmtfaW5vZGVfZGly
dHkoaW5vZGUpOw0KIAllcnIgPSBleHQyX2FkZF9lbnRyeSAoZGlyLCBkZW50
cnktPmRfbmFtZS5uYW1lLCBkZW50cnktPmRfbmFtZS5sZW4sIA0KIAkJCSAg
ICAgaW5vZGUpOw0KQEAgLTYyNiwxMiArNjI0LDEwIEBADQogCWlmIChsID4g
ZGlyLT5pX3NiLT5zX2Jsb2Nrc2l6ZSkNCiAJCXJldHVybiAtRU5BTUVUT09M
T05HOw0KIA0KLQlpbm9kZSA9IGV4dDJfbmV3X2lub2RlIChkaXIsIFNfSUZM
TkspOw0KKwlpbm9kZSA9IGV4dDJfbmV3X2lub2RlIChkaXIsIFNfSUZMTkt8
U19JUldYVUdPKTsNCiAJZXJyID0gUFRSX0VSUihpbm9kZSk7DQogCWlmIChJ
U19FUlIoaW5vZGUpKQ0KIAkJcmV0dXJuIGVycjsNCi0NCi0JaW5vZGUtPmlf
bW9kZSA9IFNfSUZMTksgfCBTX0lSV1hVR087DQogDQogCWlmIChsID4gc2l6
ZW9mIChpbm9kZS0+dS5leHQyX2kuaV9kYXRhKSkgew0KIAkJaW5vZGUtPmlf
b3AgPSAmcGFnZV9zeW1saW5rX2lub2RlX29wZXJhdGlvbnM7DQo=
---559023410-1903590565-975675342=:22427
Content-Type: TEXT/PLAIN; charset=US-ASCII; name=C-load_inode_bitmap-1
Content-Transfer-Encoding: BASE64
Content-ID: <Pine.GSO.4.21.0012010755422.22427@weyl.math.psu.edu>
Content-Description: load_inode_bitmap - initial cleanup
Content-Disposition: attachment; filename=C-load_inode_bitmap-1

ZGlmZiAtdXJOIGV4dDItMi9mcy9leHQyL2lhbGxvYy5jIGV4dDItMy9mcy9l
eHQyL2lhbGxvYy5jDQotLS0gZXh0Mi0yL2ZzL2V4dDIvaWFsbG9jLmMJRnJp
IERlYyAgMSAxMDozNToyNCAyMDAwDQorKysgZXh0Mi0zL2ZzL2V4dDIvaWFs
bG9jLmMJRnJpIERlYyAgMSAxMDo0MDo0MSAyMDAwDQpAQCAtOTEsMTkgKzkx
LDIwIEBADQogCWludCBpLCBqLCByZXR2YWwgPSAwOw0KIAl1bnNpZ25lZCBs
b25nIGlub2RlX2JpdG1hcF9udW1iZXI7DQogCXN0cnVjdCBidWZmZXJfaGVh
ZCAqIGlub2RlX2JpdG1hcDsNCisJc3RydWN0IGV4dDJfc2JfaW5mbyAqc2Jp
ID0gJnNiLT51LmV4dDJfc2I7DQogDQotCWlmIChibG9ja19ncm91cCA+PSBz
Yi0+dS5leHQyX3NiLnNfZ3JvdXBzX2NvdW50KQ0KKwlpZiAoYmxvY2tfZ3Jv
dXAgPj0gc2JpLT5zX2dyb3Vwc19jb3VudCkNCiAJCWV4dDJfcGFuaWMgKHNi
LCAibG9hZF9pbm9kZV9iaXRtYXAiLA0KIAkJCSAgICAiYmxvY2tfZ3JvdXAg
Pj0gZ3JvdXBzX2NvdW50IC0gIg0KIAkJCSAgICAiYmxvY2tfZ3JvdXAgPSAl
ZCwgZ3JvdXBzX2NvdW50ID0gJWx1IiwNCi0JCQkgICAgIGJsb2NrX2dyb3Vw
LCBzYi0+dS5leHQyX3NiLnNfZ3JvdXBzX2NvdW50KTsNCi0JaWYgKHNiLT51
LmV4dDJfc2Iuc19sb2FkZWRfaW5vZGVfYml0bWFwcyA+IDAgJiYNCi0JICAg
IHNiLT51LmV4dDJfc2Iuc19pbm9kZV9iaXRtYXBfbnVtYmVyWzBdID09IGJs
b2NrX2dyb3VwICYmDQotCSAgICBzYi0+dS5leHQyX3NiLnNfaW5vZGVfYml0
bWFwWzBdICE9IE5VTEwpDQorCQkJICAgICBibG9ja19ncm91cCwgc2JpLT5z
X2dyb3Vwc19jb3VudCk7DQorCWlmIChzYmktPnNfbG9hZGVkX2lub2RlX2Jp
dG1hcHMgPiAwICYmDQorCSAgICBzYmktPnNfaW5vZGVfYml0bWFwX251bWJl
clswXSA9PSBibG9ja19ncm91cCAmJg0KKwkgICAgc2JpLT5zX2lub2RlX2Jp
dG1hcFswXSAhPSBOVUxMKQ0KIAkJcmV0dXJuIDA7DQotCWlmIChzYi0+dS5l
eHQyX3NiLnNfZ3JvdXBzX2NvdW50IDw9IEVYVDJfTUFYX0dST1VQX0xPQURF
RCkgew0KLQkJaWYgKHNiLT51LmV4dDJfc2Iuc19pbm9kZV9iaXRtYXBbYmxv
Y2tfZ3JvdXBdKSB7DQotCQkJaWYgKHNiLT51LmV4dDJfc2Iuc19pbm9kZV9i
aXRtYXBfbnVtYmVyW2Jsb2NrX2dyb3VwXSAhPSBibG9ja19ncm91cCkNCisJ
aWYgKHNiaS0+c19ncm91cHNfY291bnQgPD0gRVhUMl9NQVhfR1JPVVBfTE9B
REVEKSB7DQorCQlpZiAoc2JpLT5zX2lub2RlX2JpdG1hcFtibG9ja19ncm91
cF0pIHsNCisJCQlpZiAoc2JpLT5zX2lub2RlX2JpdG1hcF9udW1iZXJbYmxv
Y2tfZ3JvdXBdICE9IGJsb2NrX2dyb3VwKQ0KIAkJCQlleHQyX3BhbmljIChz
YiwgImxvYWRfaW5vZGVfYml0bWFwIiwNCiAJCQkJCSAgICAiYmxvY2tfZ3Jv
dXAgIT0gaW5vZGVfYml0bWFwX251bWJlciIpOw0KIAkJCWVsc2UNCkBAIC0x
MTcsMjIgKzExOCwyMiBAQA0KIAkJfQ0KIAl9DQogDQotCWZvciAoaSA9IDA7
IGkgPCBzYi0+dS5leHQyX3NiLnNfbG9hZGVkX2lub2RlX2JpdG1hcHMgJiYN
Ci0JCSAgICBzYi0+dS5leHQyX3NiLnNfaW5vZGVfYml0bWFwX251bWJlcltp
XSAhPSBibG9ja19ncm91cDsNCisJZm9yIChpID0gMDsgaSA8IHNiaS0+c19s
b2FkZWRfaW5vZGVfYml0bWFwcyAmJg0KKwkJICAgIHNiaS0+c19pbm9kZV9i
aXRtYXBfbnVtYmVyW2ldICE9IGJsb2NrX2dyb3VwOw0KIAkgICAgIGkrKykN
CiAJCTsNCi0JaWYgKGkgPCBzYi0+dS5leHQyX3NiLnNfbG9hZGVkX2lub2Rl
X2JpdG1hcHMgJiYNCi0gIAkgICAgc2ItPnUuZXh0Ml9zYi5zX2lub2RlX2Jp
dG1hcF9udW1iZXJbaV0gPT0gYmxvY2tfZ3JvdXApIHsNCi0JCWlub2RlX2Jp
dG1hcF9udW1iZXIgPSBzYi0+dS5leHQyX3NiLnNfaW5vZGVfYml0bWFwX251
bWJlcltpXTsNCi0JCWlub2RlX2JpdG1hcCA9IHNiLT51LmV4dDJfc2Iuc19p
bm9kZV9iaXRtYXBbaV07DQorCWlmIChpIDwgc2JpLT5zX2xvYWRlZF9pbm9k
ZV9iaXRtYXBzICYmDQorICAJICAgIHNiaS0+c19pbm9kZV9iaXRtYXBfbnVt
YmVyW2ldID09IGJsb2NrX2dyb3VwKSB7DQorCQlpbm9kZV9iaXRtYXBfbnVt
YmVyID0gc2JpLT5zX2lub2RlX2JpdG1hcF9udW1iZXJbaV07DQorCQlpbm9k
ZV9iaXRtYXAgPSBzYmktPnNfaW5vZGVfYml0bWFwW2ldOw0KIAkJZm9yIChq
ID0gaTsgaiA+IDA7IGotLSkgew0KLQkJCXNiLT51LmV4dDJfc2Iuc19pbm9k
ZV9iaXRtYXBfbnVtYmVyW2pdID0NCi0JCQkJc2ItPnUuZXh0Ml9zYi5zX2lu
b2RlX2JpdG1hcF9udW1iZXJbaiAtIDFdOw0KLQkJCXNiLT51LmV4dDJfc2Iu
c19pbm9kZV9iaXRtYXBbal0gPQ0KLQkJCQlzYi0+dS5leHQyX3NiLnNfaW5v
ZGVfYml0bWFwW2ogLSAxXTsNCisJCQlzYmktPnNfaW5vZGVfYml0bWFwX251
bWJlcltqXSA9DQorCQkJCXNiaS0+c19pbm9kZV9iaXRtYXBfbnVtYmVyW2og
LSAxXTsNCisJCQlzYmktPnNfaW5vZGVfYml0bWFwW2pdID0NCisJCQkJc2Jp
LT5zX2lub2RlX2JpdG1hcFtqIC0gMV07DQogCQl9DQotCQlzYi0+dS5leHQy
X3NiLnNfaW5vZGVfYml0bWFwX251bWJlclswXSA9IGlub2RlX2JpdG1hcF9u
dW1iZXI7DQotCQlzYi0+dS5leHQyX3NiLnNfaW5vZGVfYml0bWFwWzBdID0g
aW5vZGVfYml0bWFwOw0KKwkJc2JpLT5zX2lub2RlX2JpdG1hcF9udW1iZXJb
MF0gPSBpbm9kZV9iaXRtYXBfbnVtYmVyOw0KKwkJc2JpLT5zX2lub2RlX2Jp
dG1hcFswXSA9IGlub2RlX2JpdG1hcDsNCiANCiAJCS8qDQogCQkgKiBUaGVy
ZSdzIHN0aWxsIG9uZSBzcGVjaWFsIGNhc2UgaGVyZSAtLS0gaWYgaW5vZGVf
Yml0bWFwID09IDANCkBAIC0xNDMsMTUgKzE0NCwxNSBAQA0KIAkJCXJldHZh
bCA9IHJlYWRfaW5vZGVfYml0bWFwIChzYiwgYmxvY2tfZ3JvdXAsIDApOw0K
IAkJDQogCX0gZWxzZSB7DQotCQlpZiAoc2ItPnUuZXh0Ml9zYi5zX2xvYWRl
ZF9pbm9kZV9iaXRtYXBzIDwgRVhUMl9NQVhfR1JPVVBfTE9BREVEKQ0KLQkJ
CXNiLT51LmV4dDJfc2Iuc19sb2FkZWRfaW5vZGVfYml0bWFwcysrOw0KKwkJ
aWYgKHNiaS0+c19sb2FkZWRfaW5vZGVfYml0bWFwcyA8IEVYVDJfTUFYX0dS
T1VQX0xPQURFRCkNCisJCQlzYmktPnNfbG9hZGVkX2lub2RlX2JpdG1hcHMr
KzsNCiAJCWVsc2UNCi0JCQlicmVsc2UgKHNiLT51LmV4dDJfc2Iuc19pbm9k
ZV9iaXRtYXBbRVhUMl9NQVhfR1JPVVBfTE9BREVEIC0gMV0pOw0KLQkJZm9y
IChqID0gc2ItPnUuZXh0Ml9zYi5zX2xvYWRlZF9pbm9kZV9iaXRtYXBzIC0g
MTsgaiA+IDA7IGotLSkgew0KLQkJCXNiLT51LmV4dDJfc2Iuc19pbm9kZV9i
aXRtYXBfbnVtYmVyW2pdID0NCi0JCQkJc2ItPnUuZXh0Ml9zYi5zX2lub2Rl
X2JpdG1hcF9udW1iZXJbaiAtIDFdOw0KLQkJCXNiLT51LmV4dDJfc2Iuc19p
bm9kZV9iaXRtYXBbal0gPQ0KLQkJCQlzYi0+dS5leHQyX3NiLnNfaW5vZGVf
Yml0bWFwW2ogLSAxXTsNCisJCQlicmVsc2UgKHNiaS0+c19pbm9kZV9iaXRt
YXBbRVhUMl9NQVhfR1JPVVBfTE9BREVEIC0gMV0pOw0KKwkJZm9yIChqID0g
c2JpLT5zX2xvYWRlZF9pbm9kZV9iaXRtYXBzIC0gMTsgaiA+IDA7IGotLSkg
ew0KKwkJCXNiaS0+c19pbm9kZV9iaXRtYXBfbnVtYmVyW2pdID0NCisJCQkJ
c2JpLT5zX2lub2RlX2JpdG1hcF9udW1iZXJbaiAtIDFdOw0KKwkJCXNiaS0+
c19pbm9kZV9iaXRtYXBbal0gPQ0KKwkJCQlzYmktPnNfaW5vZGVfYml0bWFw
W2ogLSAxXTsNCiAJCX0NCiAJCXJldHZhbCA9IHJlYWRfaW5vZGVfYml0bWFw
IChzYiwgYmxvY2tfZ3JvdXAsIDApOw0KIAl9DQo=
---559023410-1903590565-975675342=:22427
Content-Type: TEXT/PLAIN; charset=US-ASCII; name=D-load_inode_bitmap-2
Content-Transfer-Encoding: BASE64
Content-ID: <Pine.GSO.4.21.0012010755423.22427@weyl.math.psu.edu>
Content-Description: ditto, read_inode_bitmap calls gathered in one place
Content-Disposition: attachment; filename=D-load_inode_bitmap-2

ZGlmZiAtdXJOIGV4dDItMy9mcy9leHQyL2lhbGxvYy5jIGV4dDItNC9mcy9l
eHQyL2lhbGxvYy5jDQotLS0gZXh0Mi0zL2ZzL2V4dDIvaWFsbG9jLmMJRnJp
IERlYyAgMSAxMDo0MDo0MSAyMDAwDQorKysgZXh0Mi00L2ZzL2V4dDIvaWFs
bG9jLmMJRnJpIERlYyAgMSAxMTowMDoxOSAyMDAwDQpAQCAtODgsNDQgKzg4
LDM5IEBADQogc3RhdGljIGludCBsb2FkX2lub2RlX2JpdG1hcCAoc3RydWN0
IHN1cGVyX2Jsb2NrICogc2IsDQogCQkJICAgICAgdW5zaWduZWQgaW50IGJs
b2NrX2dyb3VwKQ0KIHsNCi0JaW50IGksIGosIHJldHZhbCA9IDA7DQorCWlu
dCBpLCBqLCByZXR2YWwgPSAwLCBzbG90ID0gMDsNCiAJdW5zaWduZWQgbG9u
ZyBpbm9kZV9iaXRtYXBfbnVtYmVyOw0KLQlzdHJ1Y3QgYnVmZmVyX2hlYWQg
KiBpbm9kZV9iaXRtYXA7DQogCXN0cnVjdCBleHQyX3NiX2luZm8gKnNiaSA9
ICZzYi0+dS5leHQyX3NiOw0KKwlzdHJ1Y3QgYnVmZmVyX2hlYWQgKmJoID0g
c2JpLT5zX2lub2RlX2JpdG1hcFswXTsNCiANCiAJaWYgKGJsb2NrX2dyb3Vw
ID49IHNiaS0+c19ncm91cHNfY291bnQpDQogCQlleHQyX3BhbmljIChzYiwg
ImxvYWRfaW5vZGVfYml0bWFwIiwNCiAJCQkgICAgImJsb2NrX2dyb3VwID49
IGdyb3Vwc19jb3VudCAtICINCiAJCQkgICAgImJsb2NrX2dyb3VwID0gJWQs
IGdyb3Vwc19jb3VudCA9ICVsdSIsDQogCQkJICAgICBibG9ja19ncm91cCwg
c2JpLT5zX2dyb3Vwc19jb3VudCk7DQorDQogCWlmIChzYmktPnNfbG9hZGVk
X2lub2RlX2JpdG1hcHMgPiAwICYmDQotCSAgICBzYmktPnNfaW5vZGVfYml0
bWFwX251bWJlclswXSA9PSBibG9ja19ncm91cCAmJg0KLQkgICAgc2JpLT5z
X2lub2RlX2JpdG1hcFswXSAhPSBOVUxMKQ0KLQkJcmV0dXJuIDA7DQorCSAg
ICBzYmktPnNfaW5vZGVfYml0bWFwX251bWJlclswXSA9PSBibG9ja19ncm91
cCAmJiBiaCkNCisJCWdvdG8gZm91bmQ7DQorDQogCWlmIChzYmktPnNfZ3Jv
dXBzX2NvdW50IDw9IEVYVDJfTUFYX0dST1VQX0xPQURFRCkgew0KLQkJaWYg
KHNiaS0+c19pbm9kZV9iaXRtYXBbYmxvY2tfZ3JvdXBdKSB7DQotCQkJaWYg
KHNiaS0+c19pbm9kZV9iaXRtYXBfbnVtYmVyW2Jsb2NrX2dyb3VwXSAhPSBi
bG9ja19ncm91cCkNCi0JCQkJZXh0Ml9wYW5pYyAoc2IsICJsb2FkX2lub2Rl
X2JpdG1hcCIsDQotCQkJCQkgICAgImJsb2NrX2dyb3VwICE9IGlub2RlX2Jp
dG1hcF9udW1iZXIiKTsNCi0JCQllbHNlDQotCQkJCXJldHVybiBibG9ja19n
cm91cDsNCi0JCX0gZWxzZSB7DQotCQkJcmV0dmFsID0gcmVhZF9pbm9kZV9i
aXRtYXAgKHNiLCBibG9ja19ncm91cCwNCi0JCQkJCQkgICAgYmxvY2tfZ3Jv
dXApOw0KLQkJCWlmIChyZXR2YWwgPCAwKQ0KLQkJCQlyZXR1cm4gcmV0dmFs
Ow0KLQkJCXJldHVybiBibG9ja19ncm91cDsNCi0JCX0NCisJCXNsb3QgPSBi
bG9ja19ncm91cDsNCisJCWJoID0gc2JpLT5zX2lub2RlX2JpdG1hcFtzbG90
XTsNCisJCWlmICghYmgpDQorCQkJZ290byByZWFkX2l0Ow0KKwkJaWYgKHNi
aS0+c19pbm9kZV9iaXRtYXBfbnVtYmVyW3Nsb3RdID09IHNsb3QpDQorCQkJ
Z290byBmb3VuZDsNCisJCWV4dDJfcGFuaWMgKHNiLCAibG9hZF9pbm9kZV9i
aXRtYXAiLA0KKwkJCSAgICAiYmxvY2tfZ3JvdXAgIT0gaW5vZGVfYml0bWFw
X251bWJlciIpOw0KIAl9DQogDQogCWZvciAoaSA9IDA7IGkgPCBzYmktPnNf
bG9hZGVkX2lub2RlX2JpdG1hcHMgJiYNCiAJCSAgICBzYmktPnNfaW5vZGVf
Yml0bWFwX251bWJlcltpXSAhPSBibG9ja19ncm91cDsNCiAJICAgICBpKysp
DQogCQk7DQotCWlmIChpIDwgc2JpLT5zX2xvYWRlZF9pbm9kZV9iaXRtYXBz
ICYmDQotICAJICAgIHNiaS0+c19pbm9kZV9iaXRtYXBfbnVtYmVyW2ldID09
IGJsb2NrX2dyb3VwKSB7DQorCWlmIChpIDwgc2JpLT5zX2xvYWRlZF9pbm9k
ZV9iaXRtYXBzKSB7DQogCQlpbm9kZV9iaXRtYXBfbnVtYmVyID0gc2JpLT5z
X2lub2RlX2JpdG1hcF9udW1iZXJbaV07DQotCQlpbm9kZV9iaXRtYXAgPSBz
YmktPnNfaW5vZGVfYml0bWFwW2ldOw0KKwkJYmggPSBzYmktPnNfaW5vZGVf
Yml0bWFwW2ldOw0KIAkJZm9yIChqID0gaTsgaiA+IDA7IGotLSkgew0KIAkJ
CXNiaS0+c19pbm9kZV9iaXRtYXBfbnVtYmVyW2pdID0NCiAJCQkJc2JpLT5z
X2lub2RlX2JpdG1hcF9udW1iZXJbaiAtIDFdOw0KQEAgLTEzMywxNSArMTI4
LDE1IEBADQogCQkJCXNiaS0+c19pbm9kZV9iaXRtYXBbaiAtIDFdOw0KIAkJ
fQ0KIAkJc2JpLT5zX2lub2RlX2JpdG1hcF9udW1iZXJbMF0gPSBpbm9kZV9i
aXRtYXBfbnVtYmVyOw0KLQkJc2JpLT5zX2lub2RlX2JpdG1hcFswXSA9IGlu
b2RlX2JpdG1hcDsNCisJCXNiaS0+c19pbm9kZV9iaXRtYXBbMF0gPSBiaDsN
CiANCiAJCS8qDQogCQkgKiBUaGVyZSdzIHN0aWxsIG9uZSBzcGVjaWFsIGNh
c2UgaGVyZSAtLS0gaWYgaW5vZGVfYml0bWFwID09IDANCiAJCSAqIHRoZW4g
b3VyIGxhc3QgYXR0ZW1wdCB0byByZWFkIHRoZSBiaXRtYXAgZmFpbGVkIGFu
ZCB3ZSBoYXZlDQogCQkgKiBqdXN0IGVuZGVkIHVwIGNhY2hpbmcgdGhhdCBm
YWlsdXJlLiAgVHJ5IGFnYWluIHRvIHJlYWQgaXQuDQogCQkgKi8NCi0JCWlm
ICghaW5vZGVfYml0bWFwKQ0KLQkJCXJldHZhbCA9IHJlYWRfaW5vZGVfYml0
bWFwIChzYiwgYmxvY2tfZ3JvdXAsIDApOw0KKwkJaWYgKGJoKQ0KKwkJCWdv
dG8gZm91bmQ7DQogCQkNCiAJfSBlbHNlIHsNCiAJCWlmIChzYmktPnNfbG9h
ZGVkX2lub2RlX2JpdG1hcHMgPCBFWFQyX01BWF9HUk9VUF9MT0FERUQpDQpA
QCAtMTU0LDkgKzE0OSwxNCBAQA0KIAkJCXNiaS0+c19pbm9kZV9iaXRtYXBb
al0gPQ0KIAkJCQlzYmktPnNfaW5vZGVfYml0bWFwW2ogLSAxXTsNCiAJCX0N
Ci0JCXJldHZhbCA9IHJlYWRfaW5vZGVfYml0bWFwIChzYiwgYmxvY2tfZ3Jv
dXAsIDApOw0KIAl9DQotCXJldHVybiByZXR2YWw7DQorDQorcmVhZF9pdDoN
CisJcmV0dmFsID0gcmVhZF9pbm9kZV9iaXRtYXAgKHNiLCBibG9ja19ncm91
cCwgc2xvdCk7DQorCWlmIChyZXR2YWwgPCAwKQ0KKwkJcmV0dXJuIHJldHZh
bDsNCitmb3VuZDoNCisJcmV0dXJuIHNsb3Q7DQogfQ0KIA0KIC8qDQo=
---559023410-1903590565-975675342=:22427
Content-Type: TEXT/PLAIN; charset=US-ASCII; name=E-load_inode_bitmap-3
Content-Transfer-Encoding: BASE64
Content-ID: <Pine.GSO.4.21.0012010755424.22427@weyl.math.psu.edu>
Content-Description: ditto, locals moved to their real scopes
Content-Disposition: attachment; filename=E-load_inode_bitmap-3

ZGlmZiAtdXJOIGV4dDItNC9mcy9leHQyL2lhbGxvYy5jIGV4dDItNS9mcy9l
eHQyL2lhbGxvYy5jDQotLS0gZXh0Mi00L2ZzL2V4dDIvaWFsbG9jLmMJRnJp
IERlYyAgMSAxMTowMDoxOSAyMDAwDQorKysgZXh0Mi01L2ZzL2V4dDIvaWFs
bG9jLmMJRnJpIERlYyAgMSAxMTowMDo0OSAyMDAwDQpAQCAtODgsOCArODgs
NyBAQA0KIHN0YXRpYyBpbnQgbG9hZF9pbm9kZV9iaXRtYXAgKHN0cnVjdCBz
dXBlcl9ibG9jayAqIHNiLA0KIAkJCSAgICAgIHVuc2lnbmVkIGludCBibG9j
a19ncm91cCkNCiB7DQotCWludCBpLCBqLCByZXR2YWwgPSAwLCBzbG90ID0g
MDsNCi0JdW5zaWduZWQgbG9uZyBpbm9kZV9iaXRtYXBfbnVtYmVyOw0KKwlp
bnQgaSwgcmV0dmFsID0gMCwgc2xvdCA9IDA7DQogCXN0cnVjdCBleHQyX3Ni
X2luZm8gKnNiaSA9ICZzYi0+dS5leHQyX3NiOw0KIAlzdHJ1Y3QgYnVmZmVy
X2hlYWQgKmJoID0gc2JpLT5zX2lub2RlX2JpdG1hcFswXTsNCiANCkBAIC0x
MTksNyArMTE4LDggQEANCiAJICAgICBpKyspDQogCQk7DQogCWlmIChpIDwg
c2JpLT5zX2xvYWRlZF9pbm9kZV9iaXRtYXBzKSB7DQotCQlpbm9kZV9iaXRt
YXBfbnVtYmVyID0gc2JpLT5zX2lub2RlX2JpdG1hcF9udW1iZXJbaV07DQor
CQlpbnQgajsNCisJCXVuc2lnbmVkIGxvbmcgbnIgPSBzYmktPnNfaW5vZGVf
Yml0bWFwX251bWJlcltpXTsNCiAJCWJoID0gc2JpLT5zX2lub2RlX2JpdG1h
cFtpXTsNCiAJCWZvciAoaiA9IGk7IGogPiAwOyBqLS0pIHsNCiAJCQlzYmkt
PnNfaW5vZGVfYml0bWFwX251bWJlcltqXSA9DQpAQCAtMTI3LDE4ICsxMjcs
MTcgQEANCiAJCQlzYmktPnNfaW5vZGVfYml0bWFwW2pdID0NCiAJCQkJc2Jp
LT5zX2lub2RlX2JpdG1hcFtqIC0gMV07DQogCQl9DQotCQlzYmktPnNfaW5v
ZGVfYml0bWFwX251bWJlclswXSA9IGlub2RlX2JpdG1hcF9udW1iZXI7DQor
CQlzYmktPnNfaW5vZGVfYml0bWFwX251bWJlclswXSA9IG5yOw0KIAkJc2Jp
LT5zX2lub2RlX2JpdG1hcFswXSA9IGJoOw0KLQ0KKwkJaWYgKGJoKQ0KKwkJ
CWdvdG8gZm91bmQ7DQogCQkvKg0KIAkJICogVGhlcmUncyBzdGlsbCBvbmUg
c3BlY2lhbCBjYXNlIGhlcmUgLS0tIGlmIGlub2RlX2JpdG1hcCA9PSAwDQog
CQkgKiB0aGVuIG91ciBsYXN0IGF0dGVtcHQgdG8gcmVhZCB0aGUgYml0bWFw
IGZhaWxlZCBhbmQgd2UgaGF2ZQ0KIAkJICoganVzdCBlbmRlZCB1cCBjYWNo
aW5nIHRoYXQgZmFpbHVyZS4gIFRyeSBhZ2FpbiB0byByZWFkIGl0Lg0KIAkJ
ICovDQotCQlpZiAoYmgpDQotCQkJZ290byBmb3VuZDsNCi0JCQ0KIAl9IGVs
c2Ugew0KKwkJaW50IGo7DQogCQlpZiAoc2JpLT5zX2xvYWRlZF9pbm9kZV9i
aXRtYXBzIDwgRVhUMl9NQVhfR1JPVVBfTE9BREVEKQ0KIAkJCXNiaS0+c19s
b2FkZWRfaW5vZGVfYml0bWFwcysrOw0KIAkJZWxzZQ0K
---559023410-1903590565-975675342=:22427
Content-Type: TEXT/PLAIN; charset=US-ASCII; name=F-read_inode_bitmap
Content-Transfer-Encoding: BASE64
Content-ID: <Pine.GSO.4.21.0012010755425.22427@weyl.math.psu.edu>
Content-Description: read_inode_bitmap returns bh
Content-Disposition: attachment; filename=F-read_inode_bitmap

ZGlmZiAtdXJOIGV4dDItNS9mcy9leHQyL2lhbGxvYy5jIGV4dDItNi9mcy9l
eHQyL2lhbGxvYy5jDQotLS0gZXh0Mi01L2ZzL2V4dDIvaWFsbG9jLmMJRnJp
IERlYyAgMSAxMTowMDo0OSAyMDAwDQorKysgZXh0Mi02L2ZzL2V4dDIvaWFs
bG9jLmMJRnJpIERlYyAgMSAxMTowNTo0MCAyMDAwDQpAQCAtMzksMzcgKzM5
LDI2IEBADQogICogUmVhZCB0aGUgaW5vZGUgYWxsb2NhdGlvbiBiaXRtYXAg
Zm9yIGEgZ2l2ZW4gYmxvY2tfZ3JvdXAsIHJlYWRpbmcNCiAgKiBpbnRvIHRo
ZSBzcGVjaWZpZWQgc2xvdCBpbiB0aGUgc3VwZXJibG9jaydzIGJpdG1hcCBj
YWNoZS4NCiAgKg0KLSAqIFJldHVybiA+PTAgb24gc3VjY2VzcyBvciBhIC12
ZSBlcnJvciBjb2RlLg0KKyAqIFJldHVybiBidWZmZXJfaGVhZCBvZiBiaXRt
YXAgb24gc3VjY2VzcyBvciBOVUxMLg0KICAqLw0KLXN0YXRpYyBpbnQgcmVh
ZF9pbm9kZV9iaXRtYXAgKHN0cnVjdCBzdXBlcl9ibG9jayAqIHNiLA0KLQkJ
CSAgICAgICB1bnNpZ25lZCBsb25nIGJsb2NrX2dyb3VwLA0KLQkJCSAgICAg
ICB1bnNpZ25lZCBpbnQgYml0bWFwX25yKQ0KK3N0YXRpYyBzdHJ1Y3QgYnVm
ZmVyX2hlYWQgKnJlYWRfaW5vZGVfYml0bWFwIChzdHJ1Y3Qgc3VwZXJfYmxv
Y2sgKiBzYiwNCisJCQkJCSAgICAgICB1bnNpZ25lZCBsb25nIGJsb2NrX2dy
b3VwKQ0KIHsNCiAJc3RydWN0IGV4dDJfZ3JvdXBfZGVzYyAqIGdkcDsNCiAJ
c3RydWN0IGJ1ZmZlcl9oZWFkICogYmggPSBOVUxMOw0KLQlpbnQgcmV0dmFs
ID0gMDsNCiANCiAJZ2RwID0gZXh0Ml9nZXRfZ3JvdXBfZGVzYyAoc2IsIGJs
b2NrX2dyb3VwLCBOVUxMKTsNCi0JaWYgKCFnZHApIHsNCi0JCXJldHZhbCA9
IC1FSU87DQorCWlmICghZ2RwKQ0KIAkJZ290byBlcnJvcl9vdXQ7DQotCX0N
CisNCiAJYmggPSBicmVhZCAoc2ItPnNfZGV2LCBsZTMyX3RvX2NwdShnZHAt
PmJnX2lub2RlX2JpdG1hcCksIHNiLT5zX2Jsb2Nrc2l6ZSk7DQotCWlmICgh
YmgpIHsNCisJaWYgKCFiaCkNCiAJCWV4dDJfZXJyb3IgKHNiLCAicmVhZF9p
bm9kZV9iaXRtYXAiLA0KIAkJCSAgICAiQ2Fubm90IHJlYWQgaW5vZGUgYml0
bWFwIC0gIg0KIAkJCSAgICAiYmxvY2tfZ3JvdXAgPSAlbHUsIGlub2RlX2Jp
dG1hcCA9ICVsdSIsDQogCQkJICAgIGJsb2NrX2dyb3VwLCAodW5zaWduZWQg
bG9uZykgZ2RwLT5iZ19pbm9kZV9iaXRtYXApOw0KLQkJcmV0dmFsID0gLUVJ
TzsNCi0JfQ0KLQkvKg0KLQkgKiBPbiBJTyBlcnJvciwganVzdCBsZWF2ZSBh
IHplcm8gaW4gdGhlIHN1cGVyYmxvY2sncyBibG9jayBwb2ludGVyIGZvcg0K
LQkgKiB0aGlzIGdyb3VwLiAgVGhlIElPIHdpbGwgYmUgcmV0cmllZCBuZXh0
IHRpbWUuDQotCSAqLw0KIGVycm9yX291dDoNCi0Jc2ItPnUuZXh0Ml9zYi5z
X2lub2RlX2JpdG1hcF9udW1iZXJbYml0bWFwX25yXSA9IGJsb2NrX2dyb3Vw
Ow0KLQlzYi0+dS5leHQyX3NiLnNfaW5vZGVfYml0bWFwW2JpdG1hcF9ucl0g
PSBiaDsNCi0JcmV0dXJuIHJldHZhbDsNCisJcmV0dXJuIGJoOw0KIH0NCiAN
CiAvKg0KQEAgLTg4LDcgKzc3LDcgQEANCiBzdGF0aWMgaW50IGxvYWRfaW5v
ZGVfYml0bWFwIChzdHJ1Y3Qgc3VwZXJfYmxvY2sgKiBzYiwNCiAJCQkgICAg
ICB1bnNpZ25lZCBpbnQgYmxvY2tfZ3JvdXApDQogew0KLQlpbnQgaSwgcmV0
dmFsID0gMCwgc2xvdCA9IDA7DQorCWludCBpLCBzbG90ID0gMDsNCiAJc3Ry
dWN0IGV4dDJfc2JfaW5mbyAqc2JpID0gJnNiLT51LmV4dDJfc2I7DQogCXN0
cnVjdCBidWZmZXJfaGVhZCAqYmggPSBzYmktPnNfaW5vZGVfYml0bWFwWzBd
Ow0KIA0KQEAgLTE1MSw5ICsxNDAsMTUgQEANCiAJfQ0KIA0KIHJlYWRfaXQ6
DQotCXJldHZhbCA9IHJlYWRfaW5vZGVfYml0bWFwIChzYiwgYmxvY2tfZ3Jv
dXAsIHNsb3QpOw0KLQlpZiAocmV0dmFsIDwgMCkNCi0JCXJldHVybiByZXR2
YWw7DQorCWJoID0gcmVhZF9pbm9kZV9iaXRtYXAgKHNiLCBibG9ja19ncm91
cCk7DQorCS8qDQorCSAqIE9uIElPIGVycm9yLCBqdXN0IGxlYXZlIGEgemVy
byBpbiB0aGUgc3VwZXJibG9jaydzIGJsb2NrIHBvaW50ZXIgZm9yDQorCSAq
IHRoaXMgZ3JvdXAuICBUaGUgSU8gd2lsbCBiZSByZXRyaWVkIG5leHQgdGlt
ZS4NCisJICovDQorCXNiaS0+c19pbm9kZV9iaXRtYXBfbnVtYmVyW3Nsb3Rd
ID0gYmxvY2tfZ3JvdXA7DQorCXNiaS0+c19pbm9kZV9iaXRtYXBbc2xvdF0g
PSBiaDsNCisJaWYgKCFiaCkNCisJCXJldHVybiAtRUlPOw0KIGZvdW5kOg0K
IAlyZXR1cm4gc2xvdDsNCiB9DQo=
---559023410-1903590565-975675342=:22427
Content-Type: TEXT/PLAIN; charset=US-ASCII; name=G-load_inode_bitmap-4
Content-Transfer-Encoding: BASE64
Content-ID: <Pine.GSO.4.21.0012010755426.22427@weyl.math.psu.edu>
Content-Description: load_inode_bitmap returns bh
Content-Disposition: attachment; filename=G-load_inode_bitmap-4

ZGlmZiAtdXJOIGV4dDItNi9mcy9leHQyL2lhbGxvYy5jIGV4dDItNy9mcy9l
eHQyL2lhbGxvYy5jDQotLS0gZXh0Mi02L2ZzL2V4dDIvaWFsbG9jLmMJRnJp
IERlYyAgMSAxMTowNTo0MCAyMDAwDQorKysgZXh0Mi03L2ZzL2V4dDIvaWFs
bG9jLmMJRnJpIERlYyAgMSAxMTowODo1NiAyMDAwDQpAQCAtNzIsMTAgKzcy
LDEwIEBADQogICogMi8gSWYgdGhlIGZpbGUgc3lzdGVtIGNvbnRhaW5zIGxl
c3MgdGhhbiBFWFQyX01BWF9HUk9VUF9MT0FERUQgZ3JvdXBzLA0KICAqICAg
IHRoaXMgZnVuY3Rpb24gcmVhZHMgdGhlIGJpdG1hcCB3aXRob3V0IG1haW50
YWluaW5nIGEgTFJVIGNhY2hlLg0KICAqIA0KLSAqIFJldHVybiB0aGUgc2xv
dCB1c2VkIHRvIHN0b3JlIHRoZSBiaXRtYXAsIG9yIGEgLXZlIGVycm9yIGNv
ZGUuDQorICogUmV0dXJuIHRoZSBidWZmZXJfaGVhZCBvZiB0aGUgYml0bWFw
IG9yIHRoZSBFUlJfUFRSKGVycm9yKQ0KICAqLw0KLXN0YXRpYyBpbnQgbG9h
ZF9pbm9kZV9iaXRtYXAgKHN0cnVjdCBzdXBlcl9ibG9jayAqIHNiLA0KLQkJ
CSAgICAgIHVuc2lnbmVkIGludCBibG9ja19ncm91cCkNCitzdGF0aWMgc3Ry
dWN0IGJ1ZmZlcl9oZWFkICpsb2FkX2lub2RlX2JpdG1hcCAoc3RydWN0IHN1
cGVyX2Jsb2NrICogc2IsDQorCQkJCQkgICAgICB1bnNpZ25lZCBpbnQgYmxv
Y2tfZ3JvdXApDQogew0KIAlpbnQgaSwgc2xvdCA9IDA7DQogCXN0cnVjdCBl
eHQyX3NiX2luZm8gKnNiaSA9ICZzYi0+dS5leHQyX3NiOw0KQEAgLTE0OCw5
ICsxNDgsOSBAQA0KIAlzYmktPnNfaW5vZGVfYml0bWFwX251bWJlcltzbG90
XSA9IGJsb2NrX2dyb3VwOw0KIAlzYmktPnNfaW5vZGVfYml0bWFwW3Nsb3Rd
ID0gYmg7DQogCWlmICghYmgpDQotCQlyZXR1cm4gLUVJTzsNCisJCXJldHVy
biBFUlJfUFRSKC1FSU8pOw0KIGZvdW5kOg0KLQlyZXR1cm4gc2xvdDsNCisJ
cmV0dXJuIGJoOw0KIH0NCiANCiAvKg0KQEAgLTE3OCw3ICsxNzgsNiBAQA0K
IAlzdHJ1Y3QgYnVmZmVyX2hlYWQgKiBiaDI7DQogCXVuc2lnbmVkIGxvbmcg
YmxvY2tfZ3JvdXA7DQogCXVuc2lnbmVkIGxvbmcgYml0Ow0KLQlpbnQgYml0
bWFwX25yOw0KIAlzdHJ1Y3QgZXh0Ml9ncm91cF9kZXNjICogZ2RwOw0KIAlz
dHJ1Y3QgZXh0Ml9zdXBlcl9ibG9jayAqIGVzOw0KIA0KQEAgLTIwMiwxMiAr
MjAxLDEwIEBADQogCX0NCiAJYmxvY2tfZ3JvdXAgPSAoaW5vIC0gMSkgLyBF
WFQyX0lOT0RFU19QRVJfR1JPVVAoc2IpOw0KIAliaXQgPSAoaW5vIC0gMSkg
JSBFWFQyX0lOT0RFU19QRVJfR1JPVVAoc2IpOw0KLQliaXRtYXBfbnIgPSBs
b2FkX2lub2RlX2JpdG1hcCAoc2IsIGJsb2NrX2dyb3VwKTsNCi0JaWYgKGJp
dG1hcF9uciA8IDApDQorCWJoID0gbG9hZF9pbm9kZV9iaXRtYXAgKHNiLCBi
bG9ja19ncm91cCk7DQorCWlmIChJU19FUlIoYmgpKQ0KIAkJZ290byBlcnJv
cl9yZXR1cm47DQogCQ0KLQliaCA9IHNiLT51LmV4dDJfc2Iuc19pbm9kZV9i
aXRtYXBbYml0bWFwX25yXTsNCi0NCiAJaXNfZGlyZWN0b3J5ID0gU19JU0RJ
Uihpbm9kZS0+aV9tb2RlKTsNCiANCiAJLyogRG8gdGhpcyBCRUZPUkUgbWFy
a2luZyB0aGUgaW5vZGUgbm90IGluIHVzZSAqLw0KQEAgLTI1OCw3ICsyNTUs
NiBAQA0KIAlzdHJ1Y3QgYnVmZmVyX2hlYWQgKiBiaDI7DQogCWludCBpLCBq
LCBhdmVmcmVlaTsNCiAJc3RydWN0IGlub2RlICogaW5vZGU7DQotCWludCBi
aXRtYXBfbnI7DQogCXN0cnVjdCBleHQyX2dyb3VwX2Rlc2MgKiBnZHA7DQog
CXN0cnVjdCBleHQyX2dyb3VwX2Rlc2MgKiB0bXA7DQogCXN0cnVjdCBleHQy
X3N1cGVyX2Jsb2NrICogZXM7DQpAQCAtMzYxLDExICszNTcsMTAgQEANCiAJ
CWdvdG8gZmFpbDsNCiANCiAJZXJyID0gLUVJTzsNCi0JYml0bWFwX25yID0g
bG9hZF9pbm9kZV9iaXRtYXAgKHNiLCBpKTsNCi0JaWYgKGJpdG1hcF9uciA8
IDApDQorCWJoID0gbG9hZF9pbm9kZV9iaXRtYXAgKHNiLCBpKTsNCisJaWYg
KElTX0VSUihiaCkpDQogCQlnb3RvIGZhaWw7DQogDQotCWJoID0gc2ItPnUu
ZXh0Ml9zYi5zX2lub2RlX2JpdG1hcFtiaXRtYXBfbnJdOw0KIAlpZiAoKGog
PSBleHQyX2ZpbmRfZmlyc3RfemVyb19iaXQgKCh1bnNpZ25lZCBsb25nICop
IGJoLT5iX2RhdGEsDQogCQkJCSAgICAgIEVYVDJfSU5PREVTX1BFUl9HUk9V
UChzYikpKSA8DQogCSAgICBFWFQyX0lOT0RFU19QRVJfR1JPVVAoc2IpKSB7
DQpAQCAtNDY1LDcgKzQ2MCw2IEBADQogI2lmZGVmIEVYVDJGU19ERUJVRw0K
IAlzdHJ1Y3QgZXh0Ml9zdXBlcl9ibG9jayAqIGVzOw0KIAl1bnNpZ25lZCBs
b25nIGRlc2NfY291bnQsIGJpdG1hcF9jb3VudCwgeDsNCi0JaW50IGJpdG1h
cF9ucjsNCiAJc3RydWN0IGV4dDJfZ3JvdXBfZGVzYyAqIGdkcDsNCiAJaW50
IGk7DQogDQpAQCAtNDc1LDE2ICs0NjksMTYgQEANCiAJYml0bWFwX2NvdW50
ID0gMDsNCiAJZ2RwID0gTlVMTDsNCiAJZm9yIChpID0gMDsgaSA8IHNiLT51
LmV4dDJfc2Iuc19ncm91cHNfY291bnQ7IGkrKykgew0KKwkJc3RydWN0IGJ1
ZmZlcl9oZWFkICpiaDsNCiAJCWdkcCA9IGV4dDJfZ2V0X2dyb3VwX2Rlc2Mg
KHNiLCBpLCBOVUxMKTsNCiAJCWlmICghZ2RwKQ0KIAkJCWNvbnRpbnVlOw0K
IAkJZGVzY19jb3VudCArPSBsZTE2X3RvX2NwdShnZHAtPmJnX2ZyZWVfaW5v
ZGVzX2NvdW50KTsNCi0JCWJpdG1hcF9uciA9IGxvYWRfaW5vZGVfYml0bWFw
IChzYiwgaSk7DQotCQlpZiAoYml0bWFwX25yIDwgMCkNCisJCWJoID0gbG9h
ZF9pbm9kZV9iaXRtYXAgKHNiLCBpKTsNCisJCWlmIChJU19FUlIoYmgpKQ0K
IAkJCWNvbnRpbnVlOw0KIA0KLQkJeCA9IGV4dDJfY291bnRfZnJlZSAoc2It
PnUuZXh0Ml9zYi5zX2lub2RlX2JpdG1hcFtiaXRtYXBfbnJdLA0KLQkJCQkg
ICAgIEVYVDJfSU5PREVTX1BFUl9HUk9VUChzYikgLyA4KTsNCisJCXggPSBl
eHQyX2NvdW50X2ZyZWUgKGJoLCBFWFQyX0lOT0RFU19QRVJfR1JPVVAoc2Ip
IC8gOCk7DQogCQlwcmludGsgKCJncm91cCAlZDogc3RvcmVkID0gJWQsIGNv
dW50ZWQgPSAlbHVcbiIsDQogCQkJaSwgbGUxNl90b19jcHUoZ2RwLT5iZ19m
cmVlX2lub2Rlc19jb3VudCksIHgpOw0KIAkJYml0bWFwX2NvdW50ICs9IHg7
DQpAQCAtNTA0LDcgKzQ5OCw2IEBADQogew0KIAlzdHJ1Y3QgZXh0Ml9zdXBl
cl9ibG9jayAqIGVzOw0KIAl1bnNpZ25lZCBsb25nIGRlc2NfY291bnQsIGJp
dG1hcF9jb3VudCwgeDsNCi0JaW50IGJpdG1hcF9ucjsNCiAJc3RydWN0IGV4
dDJfZ3JvdXBfZGVzYyAqIGdkcDsNCiAJaW50IGk7DQogDQpAQCAtNTEzLDE2
ICs1MDYsMTYgQEANCiAJYml0bWFwX2NvdW50ID0gMDsNCiAJZ2RwID0gTlVM
TDsNCiAJZm9yIChpID0gMDsgaSA8IHNiLT51LmV4dDJfc2Iuc19ncm91cHNf
Y291bnQ7IGkrKykgew0KKwkJc3RydWN0IGJ1ZmZlcl9oZWFkICpiaDsNCiAJ
CWdkcCA9IGV4dDJfZ2V0X2dyb3VwX2Rlc2MgKHNiLCBpLCBOVUxMKTsNCiAJ
CWlmICghZ2RwKQ0KIAkJCWNvbnRpbnVlOw0KIAkJZGVzY19jb3VudCArPSBs
ZTE2X3RvX2NwdShnZHAtPmJnX2ZyZWVfaW5vZGVzX2NvdW50KTsNCi0JCWJp
dG1hcF9uciA9IGxvYWRfaW5vZGVfYml0bWFwIChzYiwgaSk7DQotCQlpZiAo
Yml0bWFwX25yIDwgMCkNCisJCWJoID0gbG9hZF9pbm9kZV9iaXRtYXAgKHNi
LCBpKTsNCisJCWlmIChJU19FUlIoYmgpKQ0KIAkJCWNvbnRpbnVlOw0KIAkJ
DQotCQl4ID0gZXh0Ml9jb3VudF9mcmVlIChzYi0+dS5leHQyX3NiLnNfaW5v
ZGVfYml0bWFwW2JpdG1hcF9ucl0sDQotCQkJCSAgICAgRVhUMl9JTk9ERVNf
UEVSX0dST1VQKHNiKSAvIDgpOw0KKwkJeCA9IGV4dDJfY291bnRfZnJlZSAo
YmgsIEVYVDJfSU5PREVTX1BFUl9HUk9VUChzYikgLyA4KTsNCiAJCWlmIChs
ZTE2X3RvX2NwdShnZHAtPmJnX2ZyZWVfaW5vZGVzX2NvdW50KSAhPSB4KQ0K
IAkJCWV4dDJfZXJyb3IgKHNiLCAiZXh0Ml9jaGVja19pbm9kZXNfYml0bWFw
IiwNCiAJCQkJICAgICJXcm9uZyBmcmVlIGlub2RlcyBjb3VudCBpbiBncm91
cCAlZCwgIg0K
---559023410-1903590565-975675342=:22427
Content-Type: TEXT/PLAIN; charset=US-ASCII; name=H-ext2_new_inode
Content-Transfer-Encoding: BASE64
Content-ID: <Pine.GSO.4.21.0012010755427.22427@weyl.math.psu.edu>
Content-Description: find_cg_... added, ext2_new_inode cleaned up
Content-Disposition: attachment; filename=H-ext2_new_inode

ZGlmZiAtdXJOIGV4dDItNy9mcy9leHQyL2lhbGxvYy5jIGV4dDItOC9mcy9l
eHQyL2lhbGxvYy5jDQotLS0gZXh0Mi03L2ZzL2V4dDIvaWFsbG9jLmMJRnJp
IERlYyAgMSAxMTowODo1NiAyMDAwDQorKysgZXh0Mi04L2ZzL2V4dDIvaWFs
bG9jLmMJRnJpIERlYyAgMSAxMToxMToxMiAyMDAwDQpAQCAtMjQ4LDE1ICsy
NDgsMTExIEBADQogICogRm9yIG90aGVyIGlub2Rlcywgc2VhcmNoIGZvcndh
cmQgZnJvbSB0aGUgcGFyZW50IGRpcmVjdG9yeVwncyBibG9jaw0KICAqIGdy
b3VwIHRvIGZpbmQgYSBmcmVlIGlub2RlLg0KICAqLw0KKw0KK3N0YXRpYyBp
bnQgZmluZF9jZ19kaXIoc3RydWN0IHN1cGVyX2Jsb2NrICpzYiwgaW50IHBh
cmVudF9jZykNCit7DQorCXN0cnVjdCBleHQyX3N1cGVyX2Jsb2NrICogZXMg
PSBzYi0+dS5leHQyX3NiLnNfZXM7DQorCWludCBuZ3JvdXBzID0gc2ItPnUu
ZXh0Ml9zYi5zX2dyb3Vwc19jb3VudDsNCisJaW50IGF2ZWZyZWVpID0gbGUz
Ml90b19jcHUoZXMtPnNfZnJlZV9pbm9kZXNfY291bnQpIC8gbmdyb3VwczsN
CisJc3RydWN0IGV4dDJfZ3JvdXBfZGVzYyAqY2csICpiZXN0X2NnID0gTlVM
TDsNCisJc3RydWN0IGJ1ZmZlcl9oZWFkICpiaCwgKmJlc3RfYmggPSBOVUxM
Ow0KKwlpbnQgaSA9IC0xLCBqOw0KKw0KKy8qIEkgYW0gbm90IHlldCBjb252
aW5jZWQgdGhhdCB0aGlzIG5leHQgYml0IGlzIG5lY2Vzc2FyeS4NCisJZm9y
IChpID0gcGFyZW50X2NnLCBqID0gMDsgaiA8IG5ncm91cHM7IGorKywgaSA9
ICsraSAlIG5ncm91cHMpIHsNCisJCWNnID0gZXh0Ml9nZXRfZ3JvdXBfZGVz
YyAoc2IsIGksICZiaCk7DQorCQlpZiAoIWNnKQ0KKwkJCWNvbnRpbnVlOw0K
KwkJaWYgKChsZTE2X3RvX2NwdShjZy0+YmdfdXNlZF9kaXJzX2NvdW50KSA8
PCA4KSA8IA0KKwkJICAgICBsZTE2X3RvX2NwdShjZy0+YmdfZnJlZV9pbm9k
ZXNfY291bnQpKSB7DQorCQkJYmVzdF9jZyA9IGNnOw0KKwkJCWJlc3RfYmgg
PSBiaDsNCisJCQlnb3RvIGZvdW5kOw0KKwkJfQ0KKwl9DQorKi8NCisJZm9y
IChqID0gMDsgaiA8IG5ncm91cHM7IGorKykgew0KKwkJY2cgPSBleHQyX2dl
dF9ncm91cF9kZXNjIChzYiwgaiwgJmJoKTsNCisJCWlmICghY2cgfHwgIWNn
LT5iZ19mcmVlX2lub2Rlc19jb3VudCkNCisJCQljb250aW51ZTsNCisJCWlm
IChsZTE2X3RvX2NwdShjZy0+YmdfZnJlZV9pbm9kZXNfY291bnQpIDwgYXZl
ZnJlZWkpDQorCQkJY29udGludWU7DQorCQlpZiAoIWJlc3RfY2cgfHwgDQor
CQkgICAgKGxlMTZfdG9fY3B1KGNnLT5iZ19mcmVlX2Jsb2Nrc19jb3VudCkg
Pg0KKwkJICAgICBsZTE2X3RvX2NwdShiZXN0X2NnLT5iZ19mcmVlX2Jsb2Nr
c19jb3VudCkpKSB7DQorCQkJaSA9IGo7DQorCQkJYmVzdF9jZyA9IGNnOw0K
KwkJCWJlc3RfYmggPSBiaDsNCisJCX0NCisJfQ0KKwlpZiAoIWJlc3RfY2cp
DQorCQlyZXR1cm4gLTE7DQorZm91bmQ6DQorCWJlc3RfY2ctPmJnX2ZyZWVf
aW5vZGVzX2NvdW50ID0NCisJCWNwdV90b19sZTE2KGxlMTZfdG9fY3B1KGJl
c3RfY2ctPmJnX2ZyZWVfaW5vZGVzX2NvdW50KSAtIDEpOw0KKwliZXN0X2Nn
LT5iZ191c2VkX2RpcnNfY291bnQgPQ0KKwkJY3B1X3RvX2xlMTYobGUxNl90
b19jcHUoYmVzdF9jZy0+YmdfdXNlZF9kaXJzX2NvdW50KSArIDEpOw0KKwlt
YXJrX2J1ZmZlcl9kaXJ0eShiZXN0X2JoKTsNCisJcmV0dXJuIGk7DQorfQ0K
Kw0KK3N0YXRpYyBpbnQgZmluZF9jZ19vdGhlcihzdHJ1Y3Qgc3VwZXJfYmxv
Y2sgKnNiLCBpbnQgcGFyZW50X2NnKQ0KK3sNCisJaW50IG5ncm91cHMgPSBz
Yi0+dS5leHQyX3NiLnNfZ3JvdXBzX2NvdW50Ow0KKwlzdHJ1Y3QgZXh0Ml9n
cm91cF9kZXNjICpjZzsNCisJc3RydWN0IGJ1ZmZlcl9oZWFkICpiaDsNCisJ
aW50IGksIGo7DQorDQorCS8qDQorCSAqIFRyeSB0byBwbGFjZSB0aGUgaW5v
ZGUgaW4gaXRzIHBhcmVudCBkaXJlY3RvcnkNCisJICovDQorCWkgPSBwYXJl
bnRfY2c7DQorCWNnID0gZXh0Ml9nZXRfZ3JvdXBfZGVzYyAoc2IsIGksICZi
aCk7DQorCWlmIChjZyAmJiBsZTE2X3RvX2NwdShjZy0+YmdfZnJlZV9pbm9k
ZXNfY291bnQpKQ0KKwkJZ290byBmb3VuZDsNCisNCisJLyoNCisJICogVXNl
IGEgcXVhZHJhdGljIGhhc2ggdG8gZmluZCBhIGdyb3VwIHdpdGggYQ0KKwkg
KiBmcmVlIGlub2RlDQorCSAqLw0KKwlmb3IgKGogPSAxOyBqIDwgbmdyb3Vw
czsgaiA8PD0gMSkgew0KKwkJaSArPSBqOw0KKwkJaWYgKGkgPj0gbmdyb3Vw
cykNCisJCQlpIC09IG5ncm91cHM7DQorCQljZyA9IGV4dDJfZ2V0X2dyb3Vw
X2Rlc2MgKHNiLCBpLCAmYmgpOw0KKwkJaWYgKGNnICYmIGxlMTZfdG9fY3B1
KGNnLT5iZ19mcmVlX2lub2Rlc19jb3VudCkpDQorCQkJZ290byBmb3VuZDsN
CisJfQ0KKw0KKwkvKg0KKwkgKiBUaGF0IGZhaWxlZDogdHJ5IGxpbmVhciBz
ZWFyY2ggZm9yIGEgZnJlZSBpbm9kZQ0KKwkgKi8NCisJaSA9IHBhcmVudF9j
ZyArIDE7DQorCWZvciAoaiA9IDI7IGogPCBuZ3JvdXBzOyBqKyspIHsNCisJ
CWlmICgrK2kgPj0gbmdyb3VwcykNCisJCQlpID0gMDsNCisJCWNnID0gZXh0
Ml9nZXRfZ3JvdXBfZGVzYyAoc2IsIGksICZiaCk7DQorCQlpZiAoY2cgJiYg
bGUxNl90b19jcHUoY2ctPmJnX2ZyZWVfaW5vZGVzX2NvdW50KSkNCisJCQln
b3RvIGZvdW5kOw0KKwl9DQorDQorCXJldHVybiAtMTsNCisNCitmb3VuZDoN
CisJY2ctPmJnX2ZyZWVfaW5vZGVzX2NvdW50ID0NCisJCWNwdV90b19sZTE2
KGxlMTZfdG9fY3B1KGNnLT5iZ19mcmVlX2lub2Rlc19jb3VudCkgLSAxKTsN
CisJbWFya19idWZmZXJfZGlydHkoYmgpOw0KKwlyZXR1cm4gaTsNCit9DQor
DQogc3RydWN0IGlub2RlICogZXh0Ml9uZXdfaW5vZGUgKGNvbnN0IHN0cnVj
dCBpbm9kZSAqIGRpciwgaW50IG1vZGUpDQogew0KIAlzdHJ1Y3Qgc3VwZXJf
YmxvY2sgKiBzYjsNCiAJc3RydWN0IGJ1ZmZlcl9oZWFkICogYmg7DQogCXN0
cnVjdCBidWZmZXJfaGVhZCAqIGJoMjsNCi0JaW50IGksIGosIGF2ZWZyZWVp
Ow0KKwlpbnQgaSwgajsNCiAJc3RydWN0IGlub2RlICogaW5vZGU7DQogCXN0
cnVjdCBleHQyX2dyb3VwX2Rlc2MgKiBnZHA7DQotCXN0cnVjdCBleHQyX2dy
b3VwX2Rlc2MgKiB0bXA7DQogCXN0cnVjdCBleHQyX3N1cGVyX2Jsb2NrICog
ZXM7DQogCWludCBlcnI7DQogDQpAQCAtMjcyLDEzNyArMzY4LDQxIEBADQog
CWxvY2tfc3VwZXIgKHNiKTsNCiAJZXMgPSBzYi0+dS5leHQyX3NiLnNfZXM7
DQogcmVwZWF0Og0KLQlnZHAgPSBOVUxMOyBpPTA7DQotCQ0KLQlpZiAoU19J
U0RJUihtb2RlKSkgew0KLQkJYXZlZnJlZWkgPSBsZTMyX3RvX2NwdShlcy0+
c19mcmVlX2lub2Rlc19jb3VudCkgLw0KLQkJCXNiLT51LmV4dDJfc2Iuc19n
cm91cHNfY291bnQ7DQotLyogSSBhbSBub3QgeWV0IGNvbnZpbmNlZCB0aGF0
IHRoaXMgbmV4dCBiaXQgaXMgbmVjZXNzYXJ5Lg0KLQkJaSA9IGRpci0+dS5l
eHQyX2kuaV9ibG9ja19ncm91cDsNCi0JCWZvciAoaiA9IDA7IGogPCBzYi0+
dS5leHQyX3NiLnNfZ3JvdXBzX2NvdW50OyBqKyspIHsNCi0JCQl0bXAgPSBl
eHQyX2dldF9ncm91cF9kZXNjIChzYiwgaSwgJmJoMik7DQotCQkJaWYgKHRt
cCAmJg0KLQkJCSAgICAobGUxNl90b19jcHUodG1wLT5iZ191c2VkX2RpcnNf
Y291bnQpIDw8IDgpIDwgDQotCQkJICAgICBsZTE2X3RvX2NwdSh0bXAtPmJn
X2ZyZWVfaW5vZGVzX2NvdW50KSkgew0KLQkJCQlnZHAgPSB0bXA7DQotCQkJ
CWJyZWFrOw0KLQkJCX0NCi0JCQllbHNlDQotCQkJaSA9ICsraSAlIHNiLT51
LmV4dDJfc2Iuc19ncm91cHNfY291bnQ7DQotCQl9DQotKi8NCi0JCWlmICgh
Z2RwKSB7DQotCQkJZm9yIChqID0gMDsgaiA8IHNiLT51LmV4dDJfc2Iuc19n
cm91cHNfY291bnQ7IGorKykgew0KLQkJCQl0bXAgPSBleHQyX2dldF9ncm91
cF9kZXNjIChzYiwgaiwgJmJoMik7DQotCQkJCWlmICh0bXAgJiYNCi0JCQkJ
ICAgIGxlMTZfdG9fY3B1KHRtcC0+YmdfZnJlZV9pbm9kZXNfY291bnQpICYm
DQotCQkJCSAgICBsZTE2X3RvX2NwdSh0bXAtPmJnX2ZyZWVfaW5vZGVzX2Nv
dW50KSA+PSBhdmVmcmVlaSkgew0KLQkJCQkJaWYgKCFnZHAgfHwgDQotCQkJ
CQkgICAgKGxlMTZfdG9fY3B1KHRtcC0+YmdfZnJlZV9ibG9ja3NfY291bnQp
ID4NCi0JCQkJCSAgICAgbGUxNl90b19jcHUoZ2RwLT5iZ19mcmVlX2Jsb2Nr
c19jb3VudCkpKSB7DQotCQkJCQkJaSA9IGo7DQotCQkJCQkJZ2RwID0gdG1w
Ow0KLQkJCQkJfQ0KLQkJCQl9DQotCQkJfQ0KLQkJfQ0KLQl9DQorCWlmIChT
X0lTRElSKG1vZGUpKSANCisJCWkgPSBmaW5kX2NnX2RpcihzYiwgZGlyLT51
LmV4dDJfaS5pX2Jsb2NrX2dyb3VwKTsNCiAJZWxzZSANCi0Jew0KLQkJLyoN
Ci0JCSAqIFRyeSB0byBwbGFjZSB0aGUgaW5vZGUgaW4gaXRzIHBhcmVudCBk
aXJlY3RvcnkNCi0JCSAqLw0KLQkJaSA9IGRpci0+dS5leHQyX2kuaV9ibG9j
a19ncm91cDsNCi0JCXRtcCA9IGV4dDJfZ2V0X2dyb3VwX2Rlc2MgKHNiLCBp
LCAmYmgyKTsNCi0JCWlmICh0bXAgJiYgbGUxNl90b19jcHUodG1wLT5iZ19m
cmVlX2lub2Rlc19jb3VudCkpDQotCQkJZ2RwID0gdG1wOw0KLQkJZWxzZQ0K
LQkJew0KLQkJCS8qDQotCQkJICogVXNlIGEgcXVhZHJhdGljIGhhc2ggdG8g
ZmluZCBhIGdyb3VwIHdpdGggYQ0KLQkJCSAqIGZyZWUgaW5vZGUNCi0JCQkg
Ki8NCi0JCQlmb3IgKGogPSAxOyBqIDwgc2ItPnUuZXh0Ml9zYi5zX2dyb3Vw
c19jb3VudDsgaiA8PD0gMSkgew0KLQkJCQlpICs9IGo7DQotCQkJCWlmIChp
ID49IHNiLT51LmV4dDJfc2Iuc19ncm91cHNfY291bnQpDQotCQkJCQlpIC09
IHNiLT51LmV4dDJfc2Iuc19ncm91cHNfY291bnQ7DQotCQkJCXRtcCA9IGV4
dDJfZ2V0X2dyb3VwX2Rlc2MgKHNiLCBpLCAmYmgyKTsNCi0JCQkJaWYgKHRt
cCAmJg0KLQkJCQkgICAgbGUxNl90b19jcHUodG1wLT5iZ19mcmVlX2lub2Rl
c19jb3VudCkpIHsNCi0JCQkJCWdkcCA9IHRtcDsNCi0JCQkJCWJyZWFrOw0K
LQkJCQl9DQotCQkJfQ0KLQkJfQ0KLQkJaWYgKCFnZHApIHsNCi0JCQkvKg0K
LQkJCSAqIFRoYXQgZmFpbGVkOiB0cnkgbGluZWFyIHNlYXJjaCBmb3IgYSBm
cmVlIGlub2RlDQotCQkJICovDQotCQkJaSA9IGRpci0+dS5leHQyX2kuaV9i
bG9ja19ncm91cCArIDE7DQotCQkJZm9yIChqID0gMjsgaiA8IHNiLT51LmV4
dDJfc2Iuc19ncm91cHNfY291bnQ7IGorKykgew0KLQkJCQlpZiAoKytpID49
IHNiLT51LmV4dDJfc2Iuc19ncm91cHNfY291bnQpDQotCQkJCQlpID0gMDsN
Ci0JCQkJdG1wID0gZXh0Ml9nZXRfZ3JvdXBfZGVzYyAoc2IsIGksICZiaDIp
Ow0KLQkJCQlpZiAodG1wICYmDQotCQkJCSAgICBsZTE2X3RvX2NwdSh0bXAt
PmJnX2ZyZWVfaW5vZGVzX2NvdW50KSkgew0KLQkJCQkJZ2RwID0gdG1wOw0K
LQkJCQkJYnJlYWs7DQotCQkJCX0NCi0JCQl9DQotCQl9DQotCX0NCisJCWkg
PSBmaW5kX2NnX290aGVyKHNiLCBkaXItPnUuZXh0Ml9pLmlfYmxvY2tfZ3Jv
dXApOw0KIA0KIAllcnIgPSAtRU5PU1BDOw0KLQlpZiAoIWdkcCkNCisJaWYg
KGkgPT0gLTEpDQogCQlnb3RvIGZhaWw7DQogDQogCWVyciA9IC1FSU87DQog
CWJoID0gbG9hZF9pbm9kZV9iaXRtYXAgKHNiLCBpKTsNCiAJaWYgKElTX0VS
UihiaCkpDQotCQlnb3RvIGZhaWw7DQotDQotCWlmICgoaiA9IGV4dDJfZmlu
ZF9maXJzdF96ZXJvX2JpdCAoKHVuc2lnbmVkIGxvbmcgKikgYmgtPmJfZGF0
YSwNCi0JCQkJICAgICAgRVhUMl9JTk9ERVNfUEVSX0dST1VQKHNiKSkpIDwN
Ci0JICAgIEVYVDJfSU5PREVTX1BFUl9HUk9VUChzYikpIHsNCi0JCWlmIChl
eHQyX3NldF9iaXQgKGosIGJoLT5iX2RhdGEpKSB7DQotCQkJZXh0Ml9lcnJv
ciAoc2IsICJleHQyX25ld19pbm9kZSIsDQotCQkJCSAgICAgICJiaXQgYWxy
ZWFkeSBzZXQgZm9yIGlub2RlICVkIiwgaik7DQotCQkJZ290byByZXBlYXQ7
DQotCQl9DQotCQltYXJrX2J1ZmZlcl9kaXJ0eShiaCk7DQotCQlpZiAoc2It
PnNfZmxhZ3MgJiBNU19TWU5DSFJPTk9VUykgew0KLQkJCWxsX3J3X2Jsb2Nr
IChXUklURSwgMSwgJmJoKTsNCi0JCQl3YWl0X29uX2J1ZmZlciAoYmgpOw0K
LQkJfQ0KLQl9IGVsc2Ugew0KLQkJaWYgKGxlMTZfdG9fY3B1KGdkcC0+Ymdf
ZnJlZV9pbm9kZXNfY291bnQpICE9IDApIHsNCi0JCQlleHQyX2Vycm9yIChz
YiwgImV4dDJfbmV3X2lub2RlIiwNCi0JCQkJICAgICJGcmVlIGlub2RlcyBj
b3VudCBjb3JydXB0ZWQgaW4gZ3JvdXAgJWQiLA0KLQkJCQkgICAgaSk7DQot
CQkJLyogSXMgaXQgcmVhbGx5IEVOT1NQQz8gKi8NCi0JCQllcnIgPSAtRU5P
U1BDOw0KLQkJCWlmIChzYi0+c19mbGFncyAmIE1TX1JET05MWSkNCi0JCQkJ
Z290byBmYWlsOw0KKwkJZ290byBmYWlsMjsNCiANCi0JCQlnZHAtPmJnX2Zy
ZWVfaW5vZGVzX2NvdW50ID0gMDsNCi0JCQltYXJrX2J1ZmZlcl9kaXJ0eShi
aDIpOw0KLQkJfQ0KLQkJZ290byByZXBlYXQ7DQorCWogPSBleHQyX2ZpbmRf
Zmlyc3RfemVyb19iaXQgKCh1bnNpZ25lZCBsb25nICopIGJoLT5iX2RhdGEs
DQorCQkJCQkgICAgICBFWFQyX0lOT0RFU19QRVJfR1JPVVAoc2IpKTsNCisJ
aWYgKGogPj0gRVhUMl9JTk9ERVNfUEVSX0dST1VQKHNiKSkNCisJCWdvdG8g
YmFkX2NvdW50Ow0KKwlleHQyX3NldF9iaXQgKGosIGJoLT5iX2RhdGEpOw0K
Kw0KKwltYXJrX2J1ZmZlcl9kaXJ0eShiaCk7DQorCWlmIChzYi0+c19mbGFn
cyAmIE1TX1NZTkNIUk9OT1VTKSB7DQorCQlsbF9yd19ibG9jayAoV1JJVEUs
IDEsICZiaCk7DQorCQl3YWl0X29uX2J1ZmZlciAoYmgpOw0KIAl9DQorDQog
CWogKz0gaSAqIEVYVDJfSU5PREVTX1BFUl9HUk9VUChzYikgKyAxOw0KIAlp
ZiAoaiA8IEVYVDJfRklSU1RfSU5PKHNiKSB8fCBqID4gbGUzMl90b19jcHUo
ZXMtPnNfaW5vZGVzX2NvdW50KSkgew0KIAkJZXh0Ml9lcnJvciAoc2IsICJl
eHQyX25ld19pbm9kZSIsDQogCQkJICAgICJyZXNlcnZlZCBpbm9kZSBvciBp
bm9kZSA+IGlub2RlcyBjb3VudCAtICINCiAJCQkgICAgImJsb2NrX2dyb3Vw
ID0gJWQsaW5vZGU9JWQiLCBpLCBqKTsNCiAJCWVyciA9IC1FSU87DQotCQln
b3RvIGZhaWw7DQorCQlnb3RvIGZhaWwyOw0KIAl9DQotCWdkcC0+YmdfZnJl
ZV9pbm9kZXNfY291bnQgPQ0KLQkJY3B1X3RvX2xlMTYobGUxNl90b19jcHUo
Z2RwLT5iZ19mcmVlX2lub2Rlc19jb3VudCkgLSAxKTsNCi0JaWYgKFNfSVNE
SVIobW9kZSkpDQotCQlnZHAtPmJnX3VzZWRfZGlyc19jb3VudCA9DQotCQkJ
Y3B1X3RvX2xlMTYobGUxNl90b19jcHUoZ2RwLT5iZ191c2VkX2RpcnNfY291
bnQpICsgMSk7DQotCW1hcmtfYnVmZmVyX2RpcnR5KGJoMik7DQorDQogCWVz
LT5zX2ZyZWVfaW5vZGVzX2NvdW50ID0NCiAJCWNwdV90b19sZTMyKGxlMzJf
dG9fY3B1KGVzLT5zX2ZyZWVfaW5vZGVzX2NvdW50KSAtIDEpOw0KIAltYXJr
X2J1ZmZlcl9kaXJ0eShzYi0+dS5leHQyX3NiLnNfc2JoKTsNCkBAIC00NDks
MTAgKzQ0OSwzMiBAQA0KIAlleHQyX2RlYnVnICgiYWxsb2NhdGluZyBpbm9k
ZSAlbHVcbiIsIGlub2RlLT5pX2lubyk7DQogCXJldHVybiBpbm9kZTsNCiAN
CitmYWlsMjoNCisJZ2RwID0gZXh0Ml9nZXRfZ3JvdXBfZGVzYyAoc2IsIGks
ICZiaDIpOw0KKwlnZHAtPmJnX2ZyZWVfaW5vZGVzX2NvdW50ID0NCisJCWNw
dV90b19sZTE2KGxlMTZfdG9fY3B1KGdkcC0+YmdfZnJlZV9pbm9kZXNfY291
bnQpICsgMSk7DQorCWlmIChTX0lTRElSKG1vZGUpKQ0KKwkJZ2RwLT5iZ191
c2VkX2RpcnNfY291bnQgPQ0KKwkJCWNwdV90b19sZTE2KGxlMTZfdG9fY3B1
KGdkcC0+YmdfdXNlZF9kaXJzX2NvdW50KSAtIDEpOw0KKwltYXJrX2J1ZmZl
cl9kaXJ0eShiaDIpOw0KIGZhaWw6DQogCXVubG9ja19zdXBlcihzYik7DQog
CWlwdXQoaW5vZGUpOw0KIAlyZXR1cm4gRVJSX1BUUihlcnIpOw0KKw0KK2Jh
ZF9jb3VudDoNCisJZXh0Ml9lcnJvciAoc2IsICJleHQyX25ld19pbm9kZSIs
DQorCQkgICAgIkZyZWUgaW5vZGVzIGNvdW50IGNvcnJ1cHRlZCBpbiBncm91
cCAlZCIsDQorCQkgICAgaSk7DQorCS8qIElzIGl0IHJlYWxseSBFTk9TUEM/
ICovDQorCWVyciA9IC1FTk9TUEM7DQorCWlmIChzYi0+c19mbGFncyAmIE1T
X1JET05MWSkNCisJCWdvdG8gZmFpbDsNCisNCisJZ2RwID0gZXh0Ml9nZXRf
Z3JvdXBfZGVzYyAoc2IsIGksICZiaDIpOw0KKwlnZHAtPmJnX2ZyZWVfaW5v
ZGVzX2NvdW50ID0gMDsNCisJbWFya19idWZmZXJfZGlydHkoYmgyKTsNCisJ
Z290byByZXBlYXQ7DQogfQ0KIA0KIHVuc2lnbmVkIGxvbmcgZXh0Ml9jb3Vu
dF9mcmVlX2lub2RlcyAoc3RydWN0IHN1cGVyX2Jsb2NrICogc2IpDQo=
---559023410-1903590565-975675342=:22427--
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
Please read the FAQ at http://www.tux.org/lkml/
