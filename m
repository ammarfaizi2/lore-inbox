Return-Path: <linux-kernel-owner+willy=40w.ods.org-S262816AbUKXSGB@vger.kernel.org>
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S262816AbUKXSGB (ORCPT <rfc822;willy@w.ods.org>);
	Wed, 24 Nov 2004 13:06:01 -0500
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S262806AbUKXSEN
	(ORCPT <rfc822;linux-kernel-outgoing>);
	Wed, 24 Nov 2004 13:04:13 -0500
Received: from mx1.redhat.com ([66.187.233.31]:59334 "EHLO mx1.redhat.com")
	by vger.kernel.org with ESMTP id S262808AbUKXSD4 (ORCPT
	<rfc822;linux-kernel@vger.kernel.org>);
	Wed, 24 Nov 2004 13:03:56 -0500
From: David Howells <dhowells@redhat.com>
In-Reply-To: <41A49940.6030104@snapgear.com> 
References: <41A49940.6030104@snapgear.com>  <20041122155434.758c6fff.akpm@osdl.org> <11948.1101130077@redhat.com> <29356.1101201515@redhat.com> <20041123081129.3e0121fd.akpm@osdl.org> <20041123171039.GK2714@holomorphy.com> 
To: Greg Ungerer <gerg@snapgear.com>
Cc: William Lee Irwin III <wli@holomorphy.com>, Andrew Morton <akpm@osdl.org>,
       torvalds@osdl.org, hch@infradead.org, linux-kernel@vger.kernel.org
Subject: Re: [PATCH] Compound page overhaul 
User-Agent: EMH/1.14.1 SEMI/1.14.5 (Awara-Onsen) FLIM/1.14.5 (Demachiyanagi) APEL/10.6 Emacs/21.3 (i386-redhat-linux-gnu) MULE/5.0 (SAKAKI)
MIME-Version: 1.0 (generated by SEMI 1.14.5 - "Awara-Onsen")
Content-Type: text/plain; charset=US-ASCII
Date: Wed, 24 Nov 2004 18:03:27 +0000
Message-ID: <30282.1101319407@redhat.com>
Sender: linux-kernel-owner@vger.kernel.org
X-Mailing-List: linux-kernel@vger.kernel.org


Greg Ungerer <gerg@snapgear.com>:
> The refcounting has been annoying me for a while, it just feels
> wrong. It has been done that way for a very long time (since 2.4.0
> IIRC). I am sure there was more to it back in the 2.4 but I don't
> think we need to do it like this any more.

It was like that in 2.4 also - where I first developed this arch and these mm
changes. The refcount-on-free bug is there also. I don't know why no one else
has hit it.

> I don't have any problem with what David has done so far though
> I need to test it more extensively first.

That'd be great! :-)

I need to look at dumping my 2.4 arch & changes into the 2.4-uc kernels too.

David
