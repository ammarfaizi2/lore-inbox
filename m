Return-Path: <linux-kernel-owner@vger.kernel.org>
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id <S272244AbRIQC5g>; Sun, 16 Sep 2001 22:57:36 -0400
Received: (majordomo@vger.kernel.org) by vger.kernel.org
	id <S272450AbRIQC50>; Sun, 16 Sep 2001 22:57:26 -0400
Received: from zok.SGI.COM ([204.94.215.101]:64195 "EHLO zok.sgi.com")
	by vger.kernel.org with ESMTP id <S272244AbRIQC5P>;
	Sun, 16 Sep 2001 22:57:15 -0400
X-Mailer: exmh version 2.2 06/23/2000 with nmh-1.0.4
From: Keith Owens <kaos@ocs.com.au>
To: Tom Rini <trini@kernel.crashing.org>
Cc: Linus Torvalds <torvalds@transmeta.com>,
        Kernel Mailing List <linux-kernel@vger.kernel.org>
Subject: Re: Linux-2.4.10-pre10 
In-Reply-To: Your message of "Sun, 16 Sep 2001 19:17:05 MST."
             <20010916191705.B14279@cpe-24-221-152-185.az.sprintbbd.net> 
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Date: Mon, 17 Sep 2001 12:56:32 +1000
Message-ID: <1077.1000695392@kao2.melbourne.sgi.com>
Sender: linux-kernel-owner@vger.kernel.org
X-Mailing-List: linux-kernel@vger.kernel.org

On Sun, 16 Sep 2001 19:17:05 -0700, 
Tom Rini <trini@kernel.crashing.org> wrote:
>I just posted this to the maintainer and linux-scsi, but is there any
>reason not do do this with either a CONFIG option or
>#ifdef CONFIG_SCSI_DRIVER_OR_ARCH_DOES_MEM_MAP
>#define MEM_MAPPED
>#endif
>
>53c700-mem.c is 53c700.c + a warning about being autogenerated + 
>#define MEM_MAPPED

Kernel build works best if the source and object have the same name.
Generating two objects with different names from the same source is
awkward, it is even worse for kbuild 2.5.  The obvious solution of

53c700-mem.c:
#define MEM_MAPPED
#include "53c700.c"

does not work correctly with current kbuild due to mkdep restrictions.
It does work with kbuild 2.5 and is exactly what I have done.

