Return-Path: <linux-kernel-owner+willy=40w.ods.org@vger.kernel.org>
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id <S264756AbSJ3Rqd>; Wed, 30 Oct 2002 12:46:33 -0500
Received: (majordomo@vger.kernel.org) by vger.kernel.org
	id <S264751AbSJ3Rqd>; Wed, 30 Oct 2002 12:46:33 -0500
Received: from ns.suse.de ([213.95.15.193]:53010 "EHLO Cantor.suse.de")
	by vger.kernel.org with ESMTP id <S264756AbSJ3Rqc>;
	Wed, 30 Oct 2002 12:46:32 -0500
Date: Wed, 30 Oct 2002 18:52:54 +0100
Message-ID: <s5hhef3byq1.wl@alsa2.suse.de>
From: Takashi Iwai <tiwai@suse.de>
To: Osamu Tomita <tomita@cinet.co.jp>
Cc: LKML <linux-kernel@vger.kernel.org>
Subject: Re: [PATCHSET 22/25] add support for PC-9800 architecture (sound alsa)
In-Reply-To: <3DBEC8BA.F2043BEF@cinet.co.jp>
References: <20021026115417.A1424@precia.cinet.co.jp>
	<s5hu1j630qh.wl@alsa2.suse.de>
	<s5hsmyp36c4.wl@alsa2.suse.de>
	<3DBEC8BA.F2043BEF@cinet.co.jp>
User-Agent: Wanderlust/2.6.1 (Upside Down) SEMI/1.14.4 (Hosorogi)
 FLIM/1.14.4 (=?ISO-8859-4?Q?Kashiharajing=FE-mae?=) APEL/10.2 MULE
 XEmacs/21.4 (patch 8) (Honest Recruiter) (i386-suse-linux)
MIME-Version: 1.0 (generated by SEMI 1.14.4 - "Hosorogi")
Content-Type: text/plain; charset=US-ASCII
Sender: linux-kernel-owner@vger.kernel.org
X-Mailing-List: linux-kernel@vger.kernel.org

At Wed, 30 Oct 2002 02:43:22 +0900,
Osamu Tomita wrote:
> 
> Takashi Iwai wrote:
> > 
> > Hi,
> > 
> > the attached is a patch to create a new driver module,
> > snd-pc98-cs4232, which supports CS4232 on PC9800 and PC98II MPU
> > daughterboard.  (if you find the module name weird, please change as
> > you like.  the name is tentative :)
> > in this patch, almost all pc98-specific hardware initialization is
> > done in the card module, hence the changes to common modules become
> > minimum.
> (snip)
> > please check whether it works for you.  if it's ok, i'd like to merge
> > it into alsa cvs, so the changes will be sent as ALSA update patches
> > later.
> Thank you very much. I'm testing patch. And found some problems.
> sound/drivers/opl3/Makefile, sound/core/Makefile, sound/core/seq/Makefile
> and sound/core/seq/instr/Makefile needed additional patch for compile.

oops, yes, thanks.

> PCM works fine. But mpu401 plays very slow tempo. I can't find reason
> yet.

do you mean that the interrupts are generated too slowly?
you can measure how many UART interrupts are generated per second by
checking /proc/interrupts.
if it's too little, the problem is likely in the hardware
initialization part, which i simply copied from your patch.
but it could be a wrong copy & paste.
please check pc98_mpu401_init() in pc98.c.

btw, which MPU mode are you using, PC98II or normal MPU401?


Takashi
