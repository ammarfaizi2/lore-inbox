Return-Path: <linux-kernel-owner+willy=40w.ods.org@vger.kernel.org>
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S263930AbUBEG7j (ORCPT <rfc822;willy@w.ods.org>);
	Thu, 5 Feb 2004 01:59:39 -0500
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S264361AbUBEG7j
	(ORCPT <rfc822;linux-kernel-outgoing>);
	Thu, 5 Feb 2004 01:59:39 -0500
Received: from dsl081-085-091.lax1.dsl.speakeasy.net ([64.81.85.91]:25484 "EHLO
	mrhankey.megahappy.net") by vger.kernel.org with ESMTP
	id S263930AbUBEG7h (ORCPT <rfc822;linux-kernel@vger.kernel.org>);
	Thu, 5 Feb 2004 01:59:37 -0500
To: mdharm-usb@one-eyed-alien.net
Subject: [PATCH 2.6.2] drivers/usb/storage/dpcm.c
Cc: linux-kernel@vger.kernel.org
Message-Id: <20040205065839.844B8FA5F1@mrhankey.megahappy.net>
Date: Wed,  4 Feb 2004 22:58:39 -0800 (PST)
From: driver@megahappy.net (Bryan Whitehead)
Sender: linux-kernel-owner@vger.kernel.org
X-Mailing-List: linux-kernel@vger.kernel.org


If CONFIG_USB_STORAGE_SDDR09 is not set the var "ret" is not used. This makes use
of ret for all cases to avoid warning generated by compiler about unused variable.

Patch:
--- linux-2.6.2/drivers/usb/storage/dpcm.c.orig 2004-02-04 22:48:41.317859936 -0800
+++ linux-2.6.2/drivers/usb/storage/dpcm.c      2004-02-04 22:49:00.824894416 -0800
@@ -56,7 +56,8 @@ int dpcm_transport(Scsi_Cmnd *srb, struc
     /*
      * LUN 0 corresponds to the CompactFlash card reader.
      */
-    return usb_stor_CB_transport(srb, us);
+    ret = usb_stor_CB_transport(srb, us);
+    break;
                                                                                                                                    
 #ifdef CONFIG_USB_STORAGE_SDDR09
   case 1:
@@ -72,11 +73,12 @@ int dpcm_transport(Scsi_Cmnd *srb, struc
     ret = sddr09_transport(srb, us);
     srb->device->lun = 1; us->srb->device->lun = 1;
                                                                                                                                    
-    return ret;
+    break;
 #endif
  
   default:
     US_DEBUGP("dpcm_transport: Invalid LUN %d\n", srb->device->lun);
-    return USB_STOR_TRANSPORT_ERROR;
+    ret = USB_STOR_TRANSPORT_ERROR;
   }
+  return ret;
 }


--
Bryan Whitehead
driver@megahappy.net
