Return-Path: <linux-kernel-owner+willy=40w.ods.org-S935605AbWK1Fd5@vger.kernel.org>
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S935605AbWK1Fd5 (ORCPT <rfc822;willy@w.ods.org>);
	Tue, 28 Nov 2006 00:33:57 -0500
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S935606AbWK1Fd5
	(ORCPT <rfc822;linux-kernel-outgoing>);
	Tue, 28 Nov 2006 00:33:57 -0500
Received: from ug-out-1314.google.com ([66.249.92.172]:39475 "EHLO
	ug-out-1314.google.com") by vger.kernel.org with ESMTP
	id S935605AbWK1Fd4 (ORCPT <rfc822;linux-kernel@vger.kernel.org>);
	Tue, 28 Nov 2006 00:33:56 -0500
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:cc:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=pmVX5HKvM8dUktKyQ+BO22pRn1V2ilNGk/3eYnJVyFeHqKw9owThP04vc5R8r23PsVRXnyrOgf5ik7Olz//5Sa5yDdGBP3vUDxWuEO4/Td4UBsPgopNrC56S+Id57L0bquC8HN2+A1Hb7kiZo2IwKhLx1VCid5ydOeV0jaJSn5c=
Message-ID: <ac8af0be0611272133s6a209a53j4c493ec872570a08@mail.gmail.com>
Date: Mon, 27 Nov 2006 21:33:55 -0800
From: "Zhao Forrest" <forrest.zhao@gmail.com>
To: "Andi Kleen" <ak@suse.de>
Subject: Re: Which patch fix the 8G memory problem on x64 platform?
Cc: discuss@x86-64.org, linux-kernel@vger.kernel.org
In-Reply-To: <200611271115.55899.ak@suse.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <ac8af0be0611270202i54e376b5jedf91fd7cba35434@mail.gmail.com>
	 <200611271115.55899.ak@suse.de>
Sender: linux-kernel-owner@vger.kernel.org
X-Mailing-List: linux-kernel@vger.kernel.org

On 11/27/06, Andi Kleen <ak@suse.de> wrote:
> On Monday 27 November 2006 11:02, Zhao Forrest wrote:
> > Hi Andi,
> >
> > The kernel 2.6.18.3 runs very well on my x64 server with 2 CPU's and
> > 8G memory; however kernel 2.6.16.32 kernel panic(Kernel panic - not
> > syncing: Attempted to kill init) under the stress test. After I use
> > mem=4000M for kernel 2.6.16.32, the kernel panic doesn't happen under
> > stress test.
>
> I'm not aware of a "8G memory problem"
>
> Best you write a full bug report and possibly git bisect it.
>

Hi Andy,

My bad. After the further testing, we found this bug is not related to
the volumn of physical memory. During the stress test, when the system
halt, there's only "Kernel panic - not
 syncing: Attempted to kill init" on the screen, no stack call trace
is printed out. Also we found the content in the address pointed by
rSP is all 0xff, so don't know how to debug it.
This bug is reproduced with kernel 2.6.16.32 on both IBM and SUN MP servers.

I first need to contact the author of test case if we could send the
test case to open source. The test case is called "crashme", and the
main idea of test case is:
A signal handler is set up so that in most cases the machine exception
generated by the illegal instructions, bad operands, etc in the procedure
made up of random data are caught; and another round of randomness may
be tried. Eventually a random instruction may corrupt the program or
the machine state in such a way that the program must halt. This is
a test of the robustness of the hardware/software for instruction
fault handling.

Now we are doing git-bisect, which will take some time......

Thanks,
Forrest
