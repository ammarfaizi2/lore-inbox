Return-Path: <linux-kernel-owner+willy=40w.ods.org@vger.kernel.org>
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S269557AbTHBQ0L (ORCPT <rfc822;willy@w.ods.org>);
	Sat, 2 Aug 2003 12:26:11 -0400
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S269583AbTHBQ0L
	(ORCPT <rfc822;linux-kernel-outgoing>);
	Sat, 2 Aug 2003 12:26:11 -0400
Received: from hueytecuilhuitl.mtu.ru ([195.34.32.123]:27654 "EHLO
	hueymiccailhuitl.mtu.ru") by vger.kernel.org with ESMTP
	id S269557AbTHBQ0K (ORCPT <rfc822;linux-kernel@vger.kernel.org>);
	Sat, 2 Aug 2003 12:26:10 -0400
From: Andrey Borzenkov <arvidjaar@mail.ru>
To: Rusty Russell <rusty@rustcorp.com.au>
Subject: Re: module-init-tools - input devices id support
Date: Sat, 2 Aug 2003 20:26:08 +0400
User-Agent: KMail/1.5
Cc: linux-kernel@vger.kernel.org
References: <20030801234824.A199E2C129@lists.samba.org>
In-Reply-To: <20030801234824.A199E2C129@lists.samba.org>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="koi8-r"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200308022026.08906.arvidjaar@mail.ru>
Sender: linux-kernel-owner@vger.kernel.org
X-Mailing-List: linux-kernel@vger.kernel.org

On Saturday 02 August 2003 03:13, Rusty Russell wrote:
> In message <200308020129.51737.arvidjaar@mail.ru> you write:
> > this adds support for generating modules.inputmap with input handler
> > match table that is used by input hotplug agent posted separately. Using
> > hotplug allowed me to completely eliminate any manual (input handler)
> > module loading in 2.6, it is also compatible with 2.4 in that usb.agent
> > for 2.4 includes fake usb table that maps device class to input handlers
> > so this is mostly transparent to users.
>
> Hi Andrey,
>
> 	For 2.6 you should not be using the maps generated by depmod.
> You should be adding to scripts/file2alias.c, and using those aliases
> to insert modules.  This is much more flexible.
>

well ... file2alias assumes scalar fields with "is equal" or "do not care" 
values. Input handler matching requires bit (sub-)fields matching (with 
longest filed being 512 bits). I od not see how it can be implemented using 
standard alias syntax. This syntax fails even for some PCI entries already 
(while using pcimap allows for more elaborate matching)

Can you name some current users of module.alias?

thank you

-andrey
