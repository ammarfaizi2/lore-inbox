Return-Path: <linux-kernel-owner+willy=40w.ods.org-S932329AbWHBXQh@vger.kernel.org>
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S932329AbWHBXQh (ORCPT <rfc822;willy@w.ods.org>);
	Wed, 2 Aug 2006 19:16:37 -0400
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S932333AbWHBXQh
	(ORCPT <rfc822;linux-kernel-outgoing>);
	Wed, 2 Aug 2006 19:16:37 -0400
Received: from smtp.ono.com ([62.42.230.12]:45397 "EHLO resmta03.ono.com")
	by vger.kernel.org with ESMTP id S932329AbWHBXQg (ORCPT
	<rfc822;linux-kernel@vger.kernel.org>);
	Wed, 2 Aug 2006 19:16:36 -0400
Date: Thu, 3 Aug 2006 01:16:33 +0200
From: "J.A. =?UTF-8?B?TWFnYWxsw7Nu?=" <jamagallon@ono.com>
To: "Linux-Kernel, " <linux-kernel@vger.kernel.org>
Cc: Alan Cox <alan@lxorguk.ukuu.org.uk>
Subject: [2.6.18-rc2-mm1] libata cdroms not automounted
Message-ID: <20060803011633.13338417@werewolf.auna.net>
X-Mailer: Sylpheed-Claws 2.4.0cvs16 (GTK+ 2.10.1; i686-pc-linux-gnu)
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
Sender: linux-kernel-owner@vger.kernel.org
X-Mailing-List: linux-kernel@vger.kernel.org

Hi...

Following with my switch to libata for everything...
After latest patches, my burner and dvd work ok, apart from the fact that
they do not get auto-mounted in gnome environment.
udevmonitor shows nothing when a CD is inserted.

More:
- USB sticks work
- IDE ZIP drive works:
UEVENT[1154559818.714967] add@/block/sda/sda1
UEVENT[1154559820.046948] mount@/block/sda/sda1
- cdroms work under the old IDE driver (not tested in the same box, but
  with the same software)
- srX cdroms generated by libata do not automount (tested in 2 boxes)

As software is the same in the 3 boxes, and some things work, I suspect
the kernel is not generating the correct events ?
Or is the combo udev+dbus+hal userspace what fails ?
But as udevmonitor shows events for zip drive but none for cdrom, I would
vote against the kernel :)

Someone with a real SCSI cdrom can check if it works ?

Software:
- Linux 2.6.18-rc2-mm1+scsi-media-detection-patch [1]
- udev-096
- dbus-0.91
- hal-0.5.7.1

(mandriva cooker)

More info on demand.

TIA

[1] http://marc.theaimsgroup.com/?l=linux-kernel&m=115412002912837&w=2

--
J.A. Magallon <jamagallon()ono!com>     \               Software is like sex:
                                         \         It's better when it's free
Mandriva Linux release 2007.0 (Cooker) for i586
Linux 2.6.17-jam05 (gcc 4.1.1 20060724 (prerelease) (4.1.1-3mdk)) #1 SMP PREEMPT
