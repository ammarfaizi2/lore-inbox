Return-Path: <linux-kernel-owner+willy=40w.ods.org@vger.kernel.org>
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S269999AbTGQJaf (ORCPT <rfc822;willy@w.ods.org>);
	Thu, 17 Jul 2003 05:30:35 -0400
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S270000AbTGQJaf
	(ORCPT <rfc822;linux-kernel-outgoing>);
	Thu, 17 Jul 2003 05:30:35 -0400
Received: from ns.suse.de ([213.95.15.193]:32272 "EHLO Cantor.suse.de")
	by vger.kernel.org with ESMTP id S269999AbTGQJad (ORCPT
	<rfc822;linux-kernel@vger.kernel.org>);
	Thu, 17 Jul 2003 05:30:33 -0400
Date: Thu, 17 Jul 2003 11:45:26 +0200
Message-ID: <s5hr84pzdu1.wl@alsa2.suse.de>
From: Takashi Iwai <tiwai@suse.de>
To: Wil Reichert <wilreichert@yahoo.com>
Cc: linux-kernel@vger.kernel.org
Subject: Re: kernel 2.6.0-test1 snd-ice1724 module OOPS
In-Reply-To: <20030716115156.2b5a1992.wilreichert@yahoo.com>
References: <20030716115156.2b5a1992.wilreichert@yahoo.com>
User-Agent: Wanderlust/2.6.1 (Upside Down) SEMI/1.14.4 (Hosorogi)
 FLIM/1.14.4 (=?ISO-8859-4?Q?Kashiharajing=FE-mae?=) APEL/10.2 MULE
 XEmacs/21.4 (patch 12) (Portable Code) (i386-suse-linux)
MIME-Version: 1.0 (generated by SEMI 1.14.4 - "Hosorogi")
Content-Type: multipart/mixed;
 boundary="Multipart_Thu_Jul_17_11:45:26_2003-1"
Sender: linux-kernel-owner@vger.kernel.org
X-Mailing-List: linux-kernel@vger.kernel.org

--Multipart_Thu_Jul_17_11:45:26_2003-1
Content-Type: text/plain; charset=US-ASCII

At Wed, 16 Jul 2003 11:51:56 -0400,
Wil Reichert wrote:
> 
> I get the following OOPS when loading the snd-ice1724 module for my Envy 24HT card.  Works fine if I build all the alsa code straight into the kernel.
> 

does the attached patch fix the problem?

-- 
Takashi Iwai <tiwai@suse.de>		SuSE Linux AG - www.suse.de
ALSA Developer				ALSA Project - www.alsa-project.org

--Multipart_Thu_Jul_17_11:45:26_2003-1
Content-Type: application/octet-stream
Content-Disposition: attachment; filename="ak4xxx-fix.dif"
Content-Transfer-Encoding: 7bit

--- linux/sound/pci/ice1712/ak4xxx.c	1 Jul 2003 15:47:56 -0000	1.5
+++ linux/sound/pci/ice1712/ak4xxx.c	17 Jul 2003 09:26:08 -0000	1.6
@@ -122,8 +122,8 @@
 /*
  * initialize the akm4xxx_t record with the template
  */
-int __devinit snd_ice1712_akm4xxx_init(akm4xxx_t *ak, const akm4xxx_t *temp,
-				       const struct snd_ak4xxx_private *_priv, ice1712_t *ice)
+int snd_ice1712_akm4xxx_init(akm4xxx_t *ak, const akm4xxx_t *temp,
+			     const struct snd_ak4xxx_private *_priv, ice1712_t *ice)
 {
 	struct snd_ak4xxx_private *priv;
 
@@ -145,7 +145,7 @@
 	return 0;
 }
 
-void __devexit snd_ice1712_akm4xxx_free(ice1712_t *ice)
+void snd_ice1712_akm4xxx_free(ice1712_t *ice)
 {
 	unsigned int akidx;
 	if (ice->akm == NULL)
@@ -161,7 +161,7 @@
 /*
  * build AK4xxx controls
  */
-int __devinit snd_ice1712_akm4xxx_build_controls(ice1712_t *ice)
+int snd_ice1712_akm4xxx_build_controls(ice1712_t *ice)
 {
 	unsigned int akidx;
 	int err;

--Multipart_Thu_Jul_17_11:45:26_2003-1--
