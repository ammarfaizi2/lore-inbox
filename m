Return-Path: <linux-kernel-owner+willy=40w.ods.org-S935986AbWK1RqO@vger.kernel.org>
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S935986AbWK1RqO (ORCPT <rfc822;willy@w.ods.org>);
	Tue, 28 Nov 2006 12:46:14 -0500
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S935987AbWK1RqN
	(ORCPT <rfc822;linux-kernel-outgoing>);
	Tue, 28 Nov 2006 12:46:13 -0500
Received: from iriserv.iradimed.com ([69.44.168.233]:8314 "EHLO iradimed.com")
	by vger.kernel.org with ESMTP id S935986AbWK1RqL (ORCPT
	<rfc822;linux-kernel@vger.kernel.org>);
	Tue, 28 Nov 2006 12:46:11 -0500
Message-ID: <456C7603.7030005@cfl.rr.com>
Date: Tue, 28 Nov 2006 12:46:43 -0500
From: Phillip Susi <psusi@cfl.rr.com>
User-Agent: Thunderbird 1.5.0.8 (Windows/20061025)
MIME-Version: 1.0
To: Martin Mares <mj@ucw.cz>
CC: David Wagner <daw-usenet@taverner.cs.berkeley.edu>,
       linux-kernel@vger.kernel.org
Subject: Re: Entropy Pool Contents
References: <ek2nva$vgk$1@sea.gmane.org> <456B3483.4010704@cfl.rr.com> <ekfehh$kbu$1@taverner.cs.berkeley.edu> <456B4CD2.7090208@cfl.rr.com> <ekfifg$n41$1@taverner.cs.berkeley.edu> <mj+md-20061128.131233.3594.atrey@ucw.cz> <456C704F.3050008@cfl.rr.com> <mj+md-20061128.172328.19498.atrey@ucw.cz>
In-Reply-To: <mj+md-20061128.172328.19498.atrey@ucw.cz>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 28 Nov 2006 17:46:19.0314 (UTC) FILETIME=[1C491120:01C71315]
X-TM-AS-Product-Ver: SMEX-7.2.0.1122-3.6.1039-14840.003
X-TM-AS-Result: No--9.651200-5.000000-31
Sender: linux-kernel-owner@vger.kernel.org
X-Mailing-List: linux-kernel@vger.kernel.org

Martin Mares wrote:
> I'm adding entropy, but unless I record the exact amount of entropy when
> dumping the pool, I don't know how much I am adding, so using any fixed
> number is obviously wrong.

You aren't dumping and restoring the entropy pool; you are dumping 
random data generated by the pool, and using that data to stir the new 
entropy pool after the next boot.  There is no direct relationship 
between the entropy of the old and new pools.  The kernel needs to 
decide how much entropy you added based on how much random data you 
provide it with to stir the pool.


