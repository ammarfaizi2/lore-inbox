Return-Path: <linux-kernel-owner+willy=40w.ods.org-S1750922AbWFSHOt@vger.kernel.org>
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S1750922AbWFSHOt (ORCPT <rfc822;willy@w.ods.org>);
	Mon, 19 Jun 2006 03:14:49 -0400
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S1751216AbWFSHOt
	(ORCPT <rfc822;linux-kernel-outgoing>);
	Mon, 19 Jun 2006 03:14:49 -0400
Received: from main.gmane.org ([80.91.229.2]:47037 "EHLO ciao.gmane.org")
	by vger.kernel.org with ESMTP id S1750929AbWFSHOs (ORCPT
	<rfc822;linux-kernel@vger.kernel.org>);
	Mon, 19 Jun 2006 03:14:48 -0400
X-Injected-Via-Gmane: http://gmane.org/
To: linux-kernel@vger.kernel.org
From: "Alexander E. Patrakov" <patrakov@ums.usu.ru>
Subject: Re: [GIT PATCH] Remove devfs from 2.6.17
Date: Mon, 19 Jun 2006 13:14:36 +0600
Message-ID: <44964EDC.3030104@ums.usu.ru>
References: <20060618221343.GA20277@kroah.com>	 <20060618230041.GG4744@bouh.residence.ens-lyon.fr>	 <4495F5C3.1030203@zytor.com>	 <bda6d13a0606181817q2ab4e5cev670ef5c537b63e6c@mail.gmail.com>	 <4495FF59.2010100@zytor.com> <8e6f94720606182255u400964c2v1ea16221ffc5c94d@mail.gmail.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Complaints-To: usenet@sea.gmane.org
Cc: Joshua Hudson <joshudson@gmail.com>, "H. Peter Anvin" <hpa@zytor.com>
X-Gmane-NNTP-Posting-Host: 212.220.94.199
User-Agent: Mozilla/5.0 (X11; U; Linux i686; ru-RU; rv:1.8.0.2) Gecko/20060405 SeaMonkey/1.0.1
In-Reply-To: <8e6f94720606182255u400964c2v1ea16221ffc5c94d@mail.gmail.com>
Sender: linux-kernel-owner@vger.kernel.org
X-Mailing-List: linux-kernel@vger.kernel.org

Will Dyson wrote:
> On 6/18/06, H. Peter Anvin <hpa@zytor.com> wrote:
>> Joshua Hudson wrote:
>> > With udev, you could mknod it yourself (in your application), then 
>> open it.
>> > That would fire up the auto-module-load.
>>
>> Sure, but it would be even better if pointing udev to a set of modules
>> (or perhaps a file generated by depmod) and have it do it all 
>> automatically.
> 
> Providing the information about what devices a virtual driver will
> register when loaded seems like a good idea.

Why? This information is currently useless. What you want is that something 
knows that you want this driver to be loaded. So, everything you need is one line:

MODULE_ALIAS("virtual_dev");

(add this to loop, nbd, ppp_generic, uinput, dm-mod and other "virtual" drivers 
of your choice)

and the initscript that does a "modprobe virtual_dev" to catch them all.

-- 
Alexander E. Patrakov

