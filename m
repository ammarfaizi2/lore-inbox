Return-Path: <linux-kernel-owner+willy=40w.ods.org-S1750712AbVLTSBS@vger.kernel.org>
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S1750712AbVLTSBS (ORCPT <rfc822;willy@w.ods.org>);
	Tue, 20 Dec 2005 13:01:18 -0500
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S1750766AbVLTSBS
	(ORCPT <rfc822;linux-kernel-outgoing>);
	Tue, 20 Dec 2005 13:01:18 -0500
Received: from warden-p.diginsite.com ([208.29.163.248]:60634 "HELO
	warden.diginsite.com") by vger.kernel.org with SMTP
	id S1750712AbVLTSBR (ORCPT <rfc822;linux-kernel@vger.kernel.org>);
	Tue, 20 Dec 2005 13:01:17 -0500
Date: Tue, 20 Dec 2005 09:56:10 -0800 (PST)
From: David Lang <dlang@digitalinsight.com>
X-X-Sender: dlang@dlang.diginsite.com
To: Horst von Brand <vonbrand@inf.utfsm.cl>
cc: Parag Warudkar <kernel-stuff@comcast.net>,
       Dumitru Ciobarcianu <Dumitru.Ciobarcianu@iNES.RO>,
       Helge Hafting <helge.hafting@aitel.hist.no>, Andi Kleen <ak@suse.de>,
       Adrian Bunk <bunk@stusta.de>, Kyle Moffett <mrmacman_g4@mac.com>,
       akpm@osdl.org, linux-kernel@vger.kernel.org, arjan@infradead.org
Subject: Re: [2.6 patch] i386: always use 4k stacks 
In-Reply-To: <200512201428.jBKESAJ5004673@laptop11.inf.utfsm.cl>
Message-ID: <Pine.LNX.4.62.0512200951080.11093@qynat.qvtvafvgr.pbz>
References: <200512201428.jBKESAJ5004673@laptop11.inf.utfsm.cl>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII; format=flowed
Sender: linux-kernel-owner@vger.kernel.org
X-Mailing-List: linux-kernel@vger.kernel.org

On Tue, 20 Dec 2005, Horst von Brand wrote:

>
> "With some drawbacks" is the point: It has been determined that the
> drawbacks are heavy enough that the 8KiB stack option should go. Given
> there is /no/ compelling argument /against/ 4KiB stacks, even very minor
> drawbacks are important. So first make 4KiB the standard (popular
> distributions work that way for /years/ now, with no measurable downsides),

at least one of the 'popular distributions' that switched to 4k stacks 
years ago worked around the problems that it generated by simply lableing 
the portions that didn't work with 4k stacks as 'unsupported by this 
distro' (XFS has been explicitly stated to be in this catagory in these 
discussions)

how many other corner cases are there that these distros just choose not 
to support, but need to be supported and tested for the vanilla kernel?

also for those who are arguing that it's only dropping from 6k to 4k, you 
are forgetting that the patches to move the interrupts to a seperate stack 
have already gone into the kernel, so today it is really 8k+4k and the 
talk is to move it to 4k+4k.

I think it's a good idea to change the default (especially in -mm) to 4k 
stacks and to schedule a change of the default in mainline for a few 
versions out, but there needs to be a safety net other then telling people 
to downgrade to a prior kernel if they run into problems when the switch 
is made

David Lang

-- 
There are two ways of constructing a software design. One way is to make it so simple that there are obviously no deficiencies. And the other way is to make it so complicated that there are no obvious deficiencies.
  -- C.A.R. Hoare

