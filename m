Return-Path: <linux-kernel-owner+willy=40w.ods.org-S261363AbVG1IJL@vger.kernel.org>
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S261363AbVG1IJL (ORCPT <rfc822;willy@w.ods.org>);
	Thu, 28 Jul 2005 04:09:11 -0400
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S261358AbVG1IJF
	(ORCPT <rfc822;linux-kernel-outgoing>);
	Thu, 28 Jul 2005 04:09:05 -0400
Received: from cantor2.suse.de ([195.135.220.15]:45223 "EHLO mx2.suse.de")
	by vger.kernel.org with ESMTP id S261363AbVG1IGg (ORCPT
	<rfc822;linux-kernel@vger.kernel.org>);
	Thu, 28 Jul 2005 04:06:36 -0400
Date: Thu, 28 Jul 2005 10:06:35 +0200
Message-ID: <s5hr7djtkvo.wl%tiwai@suse.de>
From: Takashi Iwai <tiwai@suse.de>
To: Pavel Machek <pavel@suse.cz>
Cc: "Rafael J. Wysocki" <rjw@sisk.pl>, LKML <linux-kernel@vger.kernel.org>,
       ACPI mailing list <acpi-devel@lists.sourceforge.net>,
       Andrew Morton <akpm@osdl.org>, alsa-devel@alsa-project.org
Subject: Re: [ACPI] Re: [Alsa-devel] [PATCH] 2.6.13-rc3-git5: fix Bug #4416 (1/2)
In-Reply-To: <20050727205249.GA708@openzaurus.ucw.cz>
References: <200507261247.05684.rjw@sisk.pl>
	<200507261251.48291.rjw@sisk.pl>
	<s5hmzo8ljf6.wl%tiwai@suse.de>
	<20050727205249.GA708@openzaurus.ucw.cz>
User-Agent: Wanderlust/2.12.0 (Your Wildest Dreams) SEMI/1.14.6 (Maruoka)
 FLIM/1.14.7 (=?ISO-8859-4?Q?Sanj=F2?=) APEL/10.6 MULE XEmacs/21.5 (beta18)
 (chestnut) (+CVS-20041021) (i386-suse-linux)
MIME-Version: 1.0 (generated by SEMI 1.14.6 - "Maruoka")
Content-Type: text/plain; charset=US-ASCII
Sender: linux-kernel-owner@vger.kernel.org
X-Mailing-List: linux-kernel@vger.kernel.org

At Wed, 27 Jul 2005 22:52:49 +0200,
Pavel Machek wrote:
> 
> Hi!
> 
> > > The following patch adds free_irq() and request_irq() to the suspend and
> > > resume, respectively, routines in the snd_intel8x0 driver.
> > 
> > The patch looks OK to me although I have some concerns.
> > 
> > - The error in resume can't be handled properly.
> > 
> >   What should we do for the error of request_irq()?
> > 
> > - Adding this to all drivers seem too much.
> 
> There's probably no other way. Talk to Len Brown.
> 
> >   We just need to stop the irq processing until resume, so something
> >   like suspend_irq(irq, dev_id) and resume_irq(irq, dev_id) would be
> >   more uesful?
> 
> Its more complex than that. Irq numbers may change during resume.

Hmm, then the patch looks wrong.  It assumes that the irq number is
as same as before suspend.

Sorry for ignorance, but, is only irq affected?  Are the other
resources like ioport consistent after resume?


Takashi
