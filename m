Return-Path: <linux-kernel-owner+willy=40w.ods.org-S265274AbUETX3E@vger.kernel.org>
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S265274AbUETX3E (ORCPT <rfc822;willy@w.ods.org>);
	Thu, 20 May 2004 19:29:04 -0400
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S265278AbUETX3E
	(ORCPT <rfc822;linux-kernel-outgoing>);
	Thu, 20 May 2004 19:29:04 -0400
Received: from pao-nav01.pao.digeo.com ([12.47.58.24]:54023 "HELO
	pao-nav01.pao.digeo.com") by vger.kernel.org with SMTP
	id S265274AbUETX27 (ORCPT <rfc822;linux-kernel@vger.kernel.org>);
	Thu, 20 May 2004 19:28:59 -0400
Date: Thu, 20 May 2004 16:30:26 -0700
From: Andrew Morton <akpm@osdl.org>
To: davidm@hpl.hp.com
Cc: hch@infradead.org, linux-kernel@vger.kernel.org
Subject: Re: [PATCH] fixing sendfile on 64bit architectures
Message-Id: <20040520163026.64cc0421.akpm@osdl.org>
In-Reply-To: <16557.11429.671546.228557@napali.hpl.hp.com>
References: <26879984$108499340940abaf81679ba6.07529629@config22.schlund.de>
	<16556.19979.951743.994128@napali.hpl.hp.com>
	<20040519234106.52b6db78.davem@redhat.com>
	<16556.65456.624986.552865@napali.hpl.hp.com>
	<20040520120645.3accf048.akpm@osdl.org>
	<16557.1651.307484.282000@napali.hpl.hp.com>
	<20040520203532.A11902@infradead.org>
	<16557.4709.694265.314748@napali.hpl.hp.com>
	<20040520145658.3a7bf7df.akpm@osdl.org>
	<16557.11429.671546.228557@napali.hpl.hp.com>
X-Mailer: Sylpheed version 0.9.7 (GTK+ 1.2.10; i586-pc-linux-gnu)
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 20 May 2004 23:27:45.0828 (UTC) FILETIME=[0E558640:01C43EC2]
Sender: linux-kernel-owner@vger.kernel.org
X-Mailing-List: linux-kernel@vger.kernel.org

David Mosberger <davidm@napali.hpl.hp.com> wrote:
>
> Here is what the reversed-sense patch looks like (mostly autogenerated
> via a script).

ppc64 is happy.

x86_64 is not happy:

fs/stat.c:287: warning: `struct stat64' declared inside parameter list
fs/stat.c:287: warning: its scope is only this definition or declaration, which is probably not what you want
fs/stat.c: In function `cp_new_stat64':
fs/stat.c:289: storage size of `tmp' isn't known
fs/stat.c:291: sizeof applied to an incomplete type
fs/stat.c:289: warning: unused variable `tmp'
fs/stat.c: At top level:
fs/stat.c:322: warning: `struct stat64' declared inside parameter list
fs/stat.c: In function `sys_stat64':
fs/stat.c:328: warning: passing arg 2 of `cp_new_stat64' from incompatible pointer type
fs/stat.c: At top level:
fs/stat.c:332: warning: `struct stat64' declared inside parameter list
fs/stat.c: In function `sys_lstat64':
fs/stat.c:338: warning: passing arg 2 of `cp_new_stat64' from incompatible pointer type
fs/stat.c: At top level:
fs/stat.c:342: warning: `struct stat64' declared inside parameter list
fs/stat.c: In function `sys_fstat64':
fs/stat.c:348: warning: passing arg 2 of `cp_new_stat64' from incompatible pointer type

sparc64 is not happy:

fs/stat.c:115: warning: `struct __old_kernel_stat' declared inside parameter list
fs/stat.c:115: warning: its scope is only this definition or declaration, which is probably not what you want
fs/stat.c: In function `cp_old_stat':
fs/stat.c:118: error: storage size of `tmp' isn't known
fs/stat.c:129: error: invalid application of `sizeof' to an incomplete type
fs/stat.c:129: error: invalid application of `sizeof' to an incomplete type
fs/stat.c:129: error: invalid application of `sizeof' to an incomplete type
fs/stat.c:129: error: invalid application of `sizeof' to an incomplete type
fs/stat.c:129: error: invalid application of `sizeof' to an incomplete type
fs/stat.c:118: warning: unused variable `tmp'
fs/stat.c: At top level:
fs/stat.c:148: warning: `struct __old_kernel_stat' declared inside parameter list
fs/stat.c: In function `sys_stat':
fs/stat.c:154: warning: passing arg 2 of `cp_old_stat' from incompatible pointer type
fs/stat.c: At top level:
fs/stat.c:158: warning: `struct __old_kernel_stat' declared inside parameter list
fs/stat.c: In function `sys_lstat':
fs/stat.c:164: warning: passing arg 2 of `cp_old_stat' from incompatible pointer type
fs/stat.c: At top level:
fs/stat.c:168: warning: `struct __old_kernel_stat' declared inside parameter list
fs/stat.c: In function `sys_fstat':
fs/stat.c:174: warning: passing arg 2 of `cp_old_stat' from incompatible pointer type

