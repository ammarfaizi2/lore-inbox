Return-Path: <linux-kernel-owner@vger.kernel.org>
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id <S129562AbQKCCQP>; Thu, 2 Nov 2000 21:16:15 -0500
Received: (majordomo@vger.kernel.org) by vger.kernel.org
	id <S129848AbQKCCQF>; Thu, 2 Nov 2000 21:16:05 -0500
Received: from tantale.fifi.org ([216.15.47.52]:62853 "EHLO tantale.fifi.org")
	by vger.kernel.org with ESMTP id <S129562AbQKCCP6>;
	Thu, 2 Nov 2000 21:15:58 -0500
To: Rob Landley <telomerase@yahoo.com>
Cc: Jeff Garzik <jgarzik@mandrakesoft.com>, linux-kernel@vger.kernel.org
Subject: Re: 255.255.255.255 won't broadcast to multiple NICs
In-Reply-To: <20001103012247.8956.qmail@web5205.mail.yahoo.com>
MIME-Version: 1.0 (generated by SEMI 1.12.1 - "[JR] Nonoichi")
Content-Type: text/plain; charset=US-ASCII
From: Philippe Troin <phil@fifi.org>
Date: 02 Nov 2000 18:14:25 -0800
In-Reply-To: <20001103012247.8956.qmail@web5205.mail.yahoo.com> (Rob Landley's message of "Thu, 2 Nov 2000 17:22:47 -0800 (PST)")
Message-ID: <87bsvxn6ny.fsf@tantale.fifi.org>
User-Agent: Semi-gnus/6.10.12 SEMI/1.12.1 ([JR] Nonoichi) FLIM/1.12.7
 (Yþzaki) Emacs/20.7 (i386-debian-linux-gnu) MULE/4.0
 (HANANOEN)
Sender: linux-kernel-owner@vger.kernel.org
X-Mailing-List: linux-kernel@vger.kernel.org

Rob Landley <telomerase@yahoo.com> writes:

> --- Jeff Garzik <jgarzik@mandrakesoft.com> wrote:
> > Rob Landley wrote:
> > > Under 2.2.16, broadcast packets addressed to
> > > 255.255.255.255 do not go out to all interfaces in
> > a
> > > machine with multiple network cards.  They're
> > getting
> > > routed out the default gateway's interface
> > instead.
> > 
> > Are the network cards on the same network?
> 
> Two subnets.  (both martians: 10.blah and
> 192.168.blah).  Gateway's off of 10.blah (beyond which
> lives the internet), the 192 thing is the small
> cluster I'm putting together in my office to test the
> software.
> 
> I take it this makes a difference?  If there's some
> kind of "don't do that" here, I might be happy just
> documenting it.  (In theory, I could iterate through
> the NICs and send out a broadcast packet to each
> interface's broadcast address (although for reasons
> that are a bit complicated to go into right now unless
> you really want to know, that's not easy to do in this
> case).)  But that's just a workaround to cover up the
> fact that the IP stack isn't doing the obvious with
> global broadcasts.
> 
> So the question is, is the stack's behavior right?  If
> not, what's involved in fixing it, and if so, is it
> documented anywhere?

I think historically, BSD stacks were routing 255.255.255.255 to the
"primary interface" (whatever that means).

All the code I've encountered which actually needed to perform
broadcast on all interfaces was sending subnet-directed broadcasts by
hand on all interfaces.

Broadcast is ugly anyways, why don't you use multicast ?

Phil.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
Please read the FAQ at http://www.tux.org/lkml/
