Return-Path: <linux-kernel-owner+willy=40w.ods.org-S932095AbWHPQVw@vger.kernel.org>
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S932095AbWHPQVw (ORCPT <rfc822;willy@w.ods.org>);
	Wed, 16 Aug 2006 12:21:52 -0400
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S932098AbWHPQVv
	(ORCPT <rfc822;linux-kernel-outgoing>);
	Wed, 16 Aug 2006 12:21:51 -0400
Received: from pentafluge.infradead.org ([213.146.154.40]:38066 "EHLO
	pentafluge.infradead.org") by vger.kernel.org with ESMTP
	id S932095AbWHPQVu (ORCPT <rfc822;linux-kernel@vger.kernel.org>);
	Wed, 16 Aug 2006 12:21:50 -0400
Subject: Re: DEBUG_LOCKS_WARN_ON triggered by bcm43xx-SoftMAC
From: Arjan van de Ven <arjan@infradead.org>
To: Michael Buesch <mb@bu3sch.de>
Cc: Larry Finger <Larry.Finger@lwfinger.net>, bcm43xx-dev@lists.berlios.de,
       netdev@vger.kernel.org, linux-kernel@vger.kernel.org
In-Reply-To: <200608161806.10348.mb@bu3sch.de>
References: <44E296DD.3040803@lwfinger.net>
	 <200608161806.10348.mb@bu3sch.de>
Content-Type: text/plain
Organization: Intel International BV
Date: Wed, 16 Aug 2006 18:21:44 +0200
Message-Id: <1155745304.3023.55.camel@laptopd505.fenrus.org>
Mime-Version: 1.0
X-Mailer: Evolution 2.2.3 (2.2.3-2.fc4) 
Content-Transfer-Encoding: 7bit
X-SRS-Rewrite: SMTP reverse-path rewritten from <arjan@infradead.org> by pentafluge.infradead.org
	See http://www.infradead.org/rpr.html
Sender: linux-kernel-owner@vger.kernel.org
X-Mailing-List: linux-kernel@vger.kernel.org

On Wed, 2006-08-16 at 18:06 +0200, Michael Buesch wrote:
> On Wednesday 16 August 2006 05:54, Larry Finger wrote:
> > Using vanilla wireless-2.6 from Linville's tree as updated today, I
> > get a warning generated by the statement
> >          if (DEBUG_LOCKS_WARN_ON(!irqs_disabled()))
> > in kernel.lockdep.c. This warning only occurs when my wireless
> > interface is inserted and bcm43xx-softmac is activated. For that
> > reason I have included the SoftMAC and bcm43xx messages.
> > 
> > kernel: SoftMAC: sent association request!
> > kernel: SoftMAC: associated!
> > kernel: bcm43xx: set security called, .active_key = 0, .level = 2,
> > .enabled = 1, .encrypt = 1
> > kernel: bcm43xx: set security called, .enabled = 1, .encrypt = 1
> > kernel: BUG: warning at kernel/lockdep.c:1801/trace_hardirqs_on()
> > kernel:  [<c0103da7>] show_trace_log_lvl+0x197/0x1c0
> > kernel:  [<c01052db>] show_trace+0x1b/0x20
> > kernel:  [<c0105306>] dump_stack+0x26/0x30
> > kernel:  [<c013596f>] trace_hardirqs_on+0x17f/0x190
> > kernel:  [<c0104a15>] do_general_protection+0xc5/0x230
> > kernel:  [<c01034b1>] error_code+0x39/0x40
> > kernel:  [<000038c7>] 0x38c7
> > kernel:  [<c01052db>] show_trace+0x1b/0x20
> > kernel:  [<c0105306>] dump_stack+0x26/0x30
> > kernel:  [<c013596f>] trace_hardirqs_on+0x17f/0x190
> > kernel:  [<c0104a15>] do_general_protection+0xc5/0x230
> > kernel:  [<c01034b1>] error_code+0x39/0x40
> > 
> > I'm at a loss here. Can anyone explain how to interpret this dump? I
> > think I see a general protection fault, but what to do from there is a
> > mystery.
> 
> Hm, weird bug.
> I can't reproduce this on i386 or PPC.
> Could it be a bug in the lockdep code?

is there anything more in the trace???



