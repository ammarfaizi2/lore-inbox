Return-Path: <linux-kernel-owner+willy=40w.ods.org@vger.kernel.org>
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S261282AbUBUMsq (ORCPT <rfc822;willy@w.ods.org>);
	Sat, 21 Feb 2004 07:48:46 -0500
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S261546AbUBUMsp
	(ORCPT <rfc822;linux-kernel-outgoing>);
	Sat, 21 Feb 2004 07:48:45 -0500
Received: from p062096.ppp.asahi-net.or.jp ([221.113.62.96]:6650 "EHLO
	mitou.ysato.dip.jp") by vger.kernel.org with ESMTP id S261551AbUBUMse
	(ORCPT <rfc822;linux-kernel@vger.kernel.org>);
	Sat, 21 Feb 2004 07:48:34 -0500
Date: Sat, 21 Feb 2004 21:47:41 +0900
Message-ID: <m2fzd4bnv6.wl%ysato@users.sourceforge.jp>
From: Yoshinori Sato <ysato@users.sourceforge.jp>
To: Linus Torvalds <torvalds@osdl.org>
Cc: linux kernel Mailing List <linux-kernel@vger.kernel.org>
Subject: [PATCH] H8/300 warning fix
User-Agent: Wanderlust/2.11.20 (Wonderwall) SEMI/1.14.5 (Awara-Onsen)
 LIMIT/1.14.7 (Fujiidera) APEL/10.6 Emacs/21.3 (i386-pc-linux-gnu)
 MULE/5.0 (SAKAKI)
MIME-Version: 1.0 (generated by SEMI 1.14.5 - "Awara-Onsen")
Content-Type: text/plain; charset=US-ASCII
Sender: linux-kernel-owner@vger.kernel.org
X-Mailing-List: linux-kernel@vger.kernel.org

Fix any warnings

diff -X .exclude-diff -Nru linux-2.6.3/arch/h8300/platform/h8300h/entry.S linux-2.6.3-h8300/arch/h8300/platform/h8300h/entry.S
--- linux-2.6.3/arch/h8300/platform/h8300h/entry.S	2004-01-09 15:59:26.000000000 +0900
+++ linux-2.6.3-h8300/arch/h8300/platform/h8300h/entry.S	2004-02-20 01:50:32.000000000 +0900
@@ -236,7 +236,7 @@
 	mov.l	@(LER3:16,sp),er2
 	jsr	@er4
 	mov.l	er0,@(LER0:16,sp)		/* save the return value */
-	jsr	SYMBOL_NAME(syscall_trace)
+	jsr	@SYMBOL_NAME(syscall_trace)
 
 SYMBOL_NAME_LABEL(ret_from_signal)
 
@@ -253,7 +253,7 @@
 1:
 	mov.l	@(TI_FLAGS:16,er2),er1
 	btst	#TIF_NEED_RESCHED,r1l
-	bne	@SYMBOL_NAME(reschedule):16
+	bne	SYMBOL_NAME(reschedule):16
 	mov.l	sp,er1
 	subs	#4,er1			/* adjust retpc */
 	mov.l	er2,er0
@@ -273,7 +273,7 @@
 SYMBOL_NAME_LABEL(ret_from_fork)
 	mov.l	er2,er0
 	jsr	@SYMBOL_NAME(schedule_tail)
-	jmp	@SYMBOL_NAME_LABEL(ret_from_exception)	
+	jmp	@SYMBOL_NAME(ret_from_exception)	
 
 SYMBOL_NAME_LABEL(resume)
 	/*
diff -X .exclude-diff -Nru linux-2.6.3/arch/h8300/platform/h8300h/generic/crt0_rom.S linux-2.6.3-h8300/arch/h8300/platform/h8300h/generic/crt0_rom.S
--- linux-2.6.3/arch/h8300/platform/h8300h/generic/crt0_rom.S	2004-01-09 15:59:04.000000000 +0900
+++ linux-2.6.3-h8300/arch/h8300/platform/h8300h/generic/crt0_rom.S	2004-02-04 23:33:52.000000000 +0900
@@ -105,6 +105,7 @@
 	;; PBDDR
 	.byte	0x00,0x00
 
+	.section .rodata
 __target_name:	
 	.asciz	"generic"
 	
diff -X .exclude-diff -Nru linux-2.6.3/arch/h8300/platform/h8s/edosk2674/crt0_rom.S linux-2.6.3-h8300/arch/h8300/platform/h8s/edosk2674/crt0_rom.S
--- linux-2.6.3/arch/h8300/platform/h8s/edosk2674/crt0_rom.S	2004-01-09 15:59:42.000000000 +0900
+++ linux-2.6.3-h8300/arch/h8300/platform/h8s/edosk2674/crt0_rom.S	2004-02-04 23:33:52.000000000 +0900
@@ -168,6 +168,7 @@
 	;; PHDDR
 	.byte	0x00,0x00
 
+	.section .rodata
 __target_name:	
 	.asciz	"EDOSK-2674"
 	
diff -X .exclude-diff -Nru linux-2.6.3/arch/h8300/platform/h8s/entry.S linux-2.6.3-h8300/arch/h8300/platform/h8s/entry.S
--- linux-2.6.3/arch/h8300/platform/h8s/entry.S	2004-01-09 15:59:56.000000000 +0900
+++ linux-2.6.3-h8300/arch/h8300/platform/h8s/entry.S	2004-02-20 03:00:03.000000000 +0900
@@ -233,7 +233,7 @@
 	mov.l	@(LER3:16,sp),er2
 	jsr	@er4
 	mov.l	er0,@(LER0:16,sp)		/* save the return value */
-	jsr	SYMBOL_NAME(syscall_trace)
+	jsr	@SYMBOL_NAME(syscall_trace)
 
 SYMBOL_NAME_LABEL(ret_from_signal)
 
@@ -250,7 +250,7 @@
 1:
 	mov.l	@(TI_FLAGS:16,er2),er1
 	btst	#TIF_NEED_RESCHED,r1l
-	bne	@SYMBOL_NAME(reschedule):16
+	bne	SYMBOL_NAME(reschedule):16
 	mov.l	sp,er1
 	subs	#4,er1			/* adjust retpc */
 	mov.l	er2,er0
@@ -270,6 +270,6 @@
 SYMBOL_NAME_LABEL(ret_from_fork)
 	mov.l	er2,er0
 	jsr	@SYMBOL_NAME(schedule_tail)
-	jmp	@SYMBOL_NAME_LABEL(ret_from_exception)	
+	jmp	@SYMBOL_NAME(ret_from_exception)	
 
 
diff -X .exclude-diff -Nru linux-2.6.3/arch/h8300/platform/h8s/generic/crt0_rom.S linux-2.6.3-h8300/arch/h8300/platform/h8s/generic/crt0_rom.S
--- linux-2.6.3/arch/h8300/platform/h8s/generic/crt0_rom.S	2004-01-09 16:00:03.000000000 +0900
+++ linux-2.6.3-h8300/arch/h8300/platform/h8s/generic/crt0_rom.S	2004-02-04 23:33:52.000000000 +0900
@@ -110,6 +110,7 @@
 	;; PHDDR
 	.byte	0x00,0x00
 
+	.section .rodata
 __target_name:	
 	.asciz	"generic"
 	
diff -X .exclude-diff -Nru linux-2.6.3/include/asm-h8300/ide.h linux-2.6.3-h8300/include/asm-h8300/ide.h
--- linux-2.6.3/include/asm-h8300/ide.h	2004-01-09 15:59:09.000000000 +0900
+++ linux-2.6.3-h8300/include/asm-h8300/ide.h	2004-02-20 02:43:11.000000000 +0900
@@ -18,7 +18,7 @@
 
 void h8300_ide_print_resource(char *name, hw_regs_t *hw);
-static inline int ide_default_irq(unsigned long base) { return 0; };
-static inline ide_ioreg_t ide_default_io_base(int index) { return 0; };
+static __inline__ int ide_default_irq(unsigned long base) { return 0; };
+static __inline__ unsigned long ide_default_io_base(int index) { return 0; };
 
 static __inline__ void ide_init_hwif_ports(hw_regs_t *hw, unsigned long data_port,
 	 unsigned long ctrl_port, int *irq)
diff -X .exclude-diff -Nru linux-2.6.3/include/asm-h8300/page.h linux-2.6.3-h8300/include/asm-h8300/page.h
--- linux-2.6.3/include/asm-h8300/page.h	2004-01-09 15:59:56.000000000 +0900
+++ linux-2.6.3-h8300/include/asm-h8300/page.h	2004-02-20 02:44:01.000000000 +0900
@@ -1,12 +1,12 @@
-#ifndef _H8300NOMMU_PAGE_H
-#define _H8300NOMMU_PAGE_H
+#ifndef _H8300_PAGE_H
+#define _H8300_PAGE_H
 
 #include <linux/config.h>
 
 /* PAGE_SHIFT determines the page size */
 
 #define PAGE_SHIFT	(12)
-#define PAGE_SIZE	(4096)
+#define PAGE_SIZE	(1UL << PAGE_SHIFT)
 #define PAGE_MASK	(~(PAGE_SIZE-1))
 
 #ifdef __KERNEL__
@@ -98,4 +98,4 @@
 
 #endif /* __KERNEL__ */
 
-#endif /* _H8300NOMMU_PAGE_H */
+#endif /* _H8300_PAGE_H */

-- 
Yoshinori Sato
<ysato@users.sourceforge.jp>
