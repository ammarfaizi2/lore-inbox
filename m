Return-Path: <linux-kernel-owner+willy=40w.ods.org-S262006AbUFVKll@vger.kernel.org>
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S262006AbUFVKll (ORCPT <rfc822;willy@w.ods.org>);
	Tue, 22 Jun 2004 06:41:41 -0400
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S262045AbUFVKll
	(ORCPT <rfc822;linux-kernel-outgoing>);
	Tue, 22 Jun 2004 06:41:41 -0400
Received: from cantor.suse.de ([195.135.220.2]:17537 "EHLO Cantor.suse.de")
	by vger.kernel.org with ESMTP id S262006AbUFVKlj (ORCPT
	<rfc822;linux-kernel@vger.kernel.org>);
	Tue, 22 Jun 2004 06:41:39 -0400
Date: Tue, 22 Jun 2004 12:40:45 +0200
Message-ID: <s5hfz8nnadu.wl@alsa2.suse.de>
From: Takashi Iwai <tiwai@suse.de>
To: Linus Torvalds <torvalds@osdl.org>
Cc: Jeff Garzik <jgarzik@pobox.com>, Russell King <rmk+lkml@arm.linux.org.uk>,
       Matt Porter <mporter@kernel.crashing.org>,
       Jamey Hicks <jamey.hicks@hp.com>, Ian Molton <spyro@f2s.com>,
       linux-kernel@vger.kernel.org, greg@kroah.com, tony@atomide.com,
       david-b@pacbell.net, joshua@joshuawise.com
Subject: Re: DMA API issues
In-Reply-To: <Pine.LNX.4.58.0406212024550.6530@ppc970.osdl.org>
References: <20040618175902.778e616a.spyro@f2s.com>
	<20040618110721.B3851@home.com>
	<40D3356E.8040800@hp.com>
	<20040618122112.D3851@home.com>
	<20040618204322.C17516@flint.arm.linux.org.uk>
	<s5hoendm3td.wl@alsa2.suse.de>
	<20040622000838.B7802@flint.arm.linux.org.uk>
	<40D7941F.3020909@pobox.com>
	<Pine.LNX.4.58.0406212006270.6530@ppc970.osdl.org>
	<Pine.LNX.4.58.0406212024550.6530@ppc970.osdl.org>
User-Agent: Wanderlust/2.10.1 (Watching The Wheels) SEMI/1.14.5 (Awara-Onsen) FLIM/1.14.5 (Demachiyanagi) APEL/10.6 MULE XEmacs/21.4 (patch 15) (Security Through Obscurity) (i386-suse-linux)
MIME-Version: 1.0 (generated by SEMI 1.14.5 - "Awara-Onsen")
Content-Type: text/plain; charset=US-ASCII
Sender: linux-kernel-owner@vger.kernel.org
X-Mailing-List: linux-kernel@vger.kernel.org

At Mon, 21 Jun 2004 20:26:39 -0700 (PDT),
Linus Torvalds wrote:
> 
> On Mon, 21 Jun 2004, Linus Torvalds wrote:
> > 
> > The argument at some point was that some architectures may not even _have_
> > a "struct page" for DMA memory, since it's not "normal" memory (ie "slow
> > memory" on m68k). However, I thought we all agreed that such a "struct
> > page" could be furnished if that architecture wants so support mmap'ing.
> 
> .. which is not to say that we shouldn't have a "pci_mmap_pages()" thing
> _too_. Pretty clearly the easiest interface often is to just map the pages
> at mmap() time, and then we should just have a helper function to do that. 
> 
> I thought we did one already, but hey, maybe not.

I don't think we have such.

Russell has once proposed a similar one (but not pci-specific), and I
believe it makes sense for many drivers.  We can hide the
architecture-specific cache handling inside the helper function, too.


Takashi
