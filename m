Return-Path: <linux-kernel-owner+willy=40w.ods.org@vger.kernel.org>
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S263225AbTJKB6O (ORCPT <rfc822;willy@w.ods.org>);
	Fri, 10 Oct 2003 21:58:14 -0400
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S263229AbTJKB6O
	(ORCPT <rfc822;linux-kernel-outgoing>);
	Fri, 10 Oct 2003 21:58:14 -0400
Received: from oris.opensource.jp ([218.44.239.77]:12958 "EHLO
	oris.opensource.jp") by vger.kernel.org with ESMTP id S263225AbTJKB6K convert rfc822-to-8bit
	(ORCPT <rfc822;linux-kernel@vger.kernel.org>);
	Fri, 10 Oct 2003 21:58:10 -0400
Date: Sat, 11 Oct 2003 10:58:04 +0900
Message-ID: <80k77ch6xf.wl@oris.opensource.jp>
From: GOTO Masanori <gotom@debian.or.jp>
To: Olaf Hering <olh@suse.de>
Cc: Marcelo Tosatti <marcelo.tosatti@cyclades.com>,
       linux-kernel@vger.kernel.org,
       YOKOTA Hiroshi <yokota@netlab.is.tsukuba.ac.jp>,
       GOTO Masanori <gotom@debian.or.jp>
Subject: Re: Linux 2.4.23-pre7
In-Reply-To: <20031010155930.GA15496@suse.de>
References: <Pine.LNX.4.44.0310091939100.6403-100000@logos.cnet>
	<20031010155930.GA15496@suse.de>
User-Agent: Wanderlust/2.9.9 (Unchained Melody) SEMI/1.14.3 (Ushinoya)
 FLIM/1.14.3 (=?ISO-8859-4?Q?Unebigory=F2mae?=) APEL/10.3 Emacs/21.2
 (i386-debian-linux-gnu) MULE/5.0 (SAKAKI)
MIME-Version: 1.0 (generated by SEMI 1.14.3 - "Ushinoya")
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 8BIT
Sender: linux-kernel-owner@vger.kernel.org
X-Mailing-List: linux-kernel@vger.kernel.org

At Fri, 10 Oct 2003 17:59:30 +0200,
Olaf Hering wrote:
> 
>  On Thu, Oct 09, Marcelo Tosatti wrote:
> 
> > 
> > Hi,
> > 
> > Here goes -pre7... 
> 
> This patch is required to compile the NinjaSCSI-32Bi Cardbus driver:

Yes, it looks fine.  Thanks for your patch!  Marcelo, please apply
this patch, even not only for nsp_cs (as you patched) but also for
nsp32.

Regards,
-- gotom

> diff -purNX /suse/olh/kernel/kernel_exclude.txt linux-2.4.22/drivers/scsi/nsp32.h linux-2.4.23-pre7/drivers/scsi/nsp32.h
> --- linux-2.4.22/drivers/scsi/nsp32.h   2003-10-10 17:40:05.000000000 +0200
> +++ linux-2.4.23-pre7/drivers/scsi/nsp32.h      2003-10-10 16:08:10.000000000 +0200
> @@ -642,10 +642,12 @@ typedef struct _nsp32_hw_data {
>  # define scsi_host_put(host)            scsi_unregister(host)
>  # define pci_name(pci_dev)              ((pci_dev)->slot_name)
> 
> +#if (LINUX_VERSION_CODE < KERNEL_VERSION(2,4,23))
>  typedef void irqreturn_t;
>  # define IRQ_NONE      /* */
>  # define IRQ_HANDLED   /* */
>  # define IRQ_RETVAL(x) /* */
> +#endif
> 
>  /* This is ad-hoc version of scsi_host_get_next() */
>  static inline struct Scsi_Host *scsi_host_get_next(struct Scsi_Host *host)
> 
> -- 
> USB is for mice, FireWire is for men!
> 
> sUse lINUX ag, nÜRNBERG
> 
