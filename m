Return-Path: <linux-kernel-owner@vger.kernel.org>
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id <S132465AbQLKAbi>; Sun, 10 Dec 2000 19:31:38 -0500
Received: (majordomo@vger.kernel.org) by vger.kernel.org
	id <S132455AbQLKAb2>; Sun, 10 Dec 2000 19:31:28 -0500
Received: from smtp1.libero.it ([193.70.192.51]:60548 "EHLO smtp1.libero.it")
	by vger.kernel.org with ESMTP id <S132277AbQLKAbI>;
	Sun, 10 Dec 2000 19:31:08 -0500
Date: Sun, 10 Dec 2000 23:54:58 +0100 (CET)
From: Giuseppe Guerrini <giusguerrini@racine.ra.it>
To: linux-kernel@vger.kernel.org, linux-kernel-patch@vger.kernel.org
Subject: [PATCH] serial.c, kernel 2.2.14
Message-ID: <Pine.LNX.4.21.0012102350390.1084-300000@gaia.localdomain>
MIME-Version: 1.0
Content-Type: MULTIPART/MIXED; BOUNDARY="279707904-1153298320-976488898=:1084"
Sender: linux-kernel-owner@vger.kernel.org
X-Mailing-List: linux-kernel@vger.kernel.org

  This message is in MIME format.  The first part should be readable text,
  while the remaining parts are likely unreadable without MIME-aware tools.
  Send mail to mime@docserver.cac.washington.edu for more info.

--279707904-1153298320-976488898=:1084
Content-Type: TEXT/PLAIN; charset=US-ASCII



 Hi, Linux community!

 Some time ago I had to add a proprietary multiport card to my Linux box,
and found a small incompatibility with the standard Linux serial
driver. The driver confuses the NEC NS1655x-family UARTs with Startch
ST16550, and decide not to use the FIFO, although the NEC UARTs fully
support it. In addition, the identifying algorithm is able to mess up the
state of NEC16552 Dual UART. The patch in attachment solved my problem. I
generated and tested it only on my RedHat 6.2 Linux box with kernel
2.2.14. The patch adds an item in the kernel configuration menu
("CONFIG_NEC_DUART_SUPPORT"). Although it should be harmless, I suggest to
use it only if really needed.

	Bye

P.S. Please answer at my personal address, because I am not subscribed to
the mailing list.

-- 


-- 


		Giuseppe Guerrini <giusguerrini@racine.ra.it>
------------------------------------------------------------
L'ordine non e` che una configurazione particolare del caos.




--279707904-1153298320-976488898=:1084
Content-Type: TEXT/PLAIN; charset=US-ASCII; name=README-NecDUART-patch
Content-Transfer-Encoding: BASE64
Content-ID: <Pine.LNX.4.21.0012102354580.1084@gaia.localdomain>
Content-Description: 
Content-Disposition: attachment; filename=README-NecDUART-patch

DQoNClN1biBEZWMgMTAgMjM6MjU6MjQgQ0VUIDIwMDANCg0KIFRoZSBORUMt
RFVBUlQgcGF0Y2ggY29ycmVjdHMgYSBidWcgaW4gTGludXgtMi4yLjE0JyBz
ZXJpYWwgZHJpdmVyDQooZmlsZSBsaW51eC9kcml2ZXJzL2NoYXIvc2VyaWFs
LmMpLiBUaGUgY2hpcHNldCBwcm9iZSBhbGdvcml0aG0NCmRvZXNuJ3QgaWRl
bnRpZnkgYXMgZnVsbC1jb21wYXRpYmxlIDE2NTUwQSBVQVJUIHRoZSBjaGlw
cyBvZiB0aGUgTkVDDQpOUzE2NTV4IGZhbWlseTogdGhlIEZJRk8gaXMgbm90
IGVuYWJsZWQsIGFsdGhvdWdoIHByZXNlbnQgYW5kIGZ1bGx5IHdvcmtpbmcu
DQpJbiBhZGRpdGlvbiwgd2l0aCB0aGUgRFVBTCBVQVJUIE5TMTY1NTJBLCB0
aGUgY2hpcCBzdGF0ZSBpcyBtZXNzZWQgdXAuDQogQWx0aG91Z2ggaGFybWZ1
bCwgdGhlIHBhdGNoIHNob3VsZCBiZSBhcHBsaWVkIG9ubHkgaWYgcmVhbGx5
IG5lZWRlZC4NClVzZSBpdCBvbmx5IGlmIHlvdSBhcmUgc3VyZSB0aGF0IHlv
dSBhcmUgdXNpbmcgYSBORUMgTlMxNjU1eCBVQVJUIGFuZA0KYXJlIGV4cGVy
aWVuY2luZyBsb3NzIG9mIGNoYXJhY3RlcnMuIA0KIEkgaGF2ZSBkZXZlbG9w
ZWQgYW5kIHRlc3RlZCBteSBwYXRjaCBvbiBMaW51eCAyLjIuMTQuIEkgY2Fu
J3QgZ3VhcmF0ZWUNCnRoYXQgaXQgd29ya3Mgd2VsbCB3aXRoIG90aGVyIGtl
cm5lbHMuDQogVGhlIHBhdGNoIG11c3QgYmUgYXBwbGllZCBhcyBmb2xsb3dz
Og0KKEkgYXNzdW1lIHRoYXQgdGhlcmUgaXMgYSBjb21wbGV0ZSBrZXJuZWwg
c291cmNlIHRyZWUNCmluIC91c3Ivc3JjL2xpbnV4LTIuMi4xNCkNCg0Kc3UN
CmNkIC91c3Ivc3JjDQpwYXRjaCAtcDAgPCBwYXRjaC1OZWNEdWFydA0KDQog
QSBuZXcgY29uZmlndXJhdGlvbiBpdGVtIHdpbGwgYmUgYWRkZWQgaW4gImNo
YXJhY3RlciBkZXZpY2VzIiBzZWN0aW9uOg0KDQogICBCdWdmaXggZm9yIE5F
QyBVQVJUcyAoTlMxNkM1NXgpDQogDQogRW5hYmxlIGl0LCBzYXZlIHRoZSBu
ZXcgY29uZmlndXJhdGlvbiBhbmQgcmVidWlsZCB0aGUga2VybmVsLg0KDQog
RW5qb3ksDQoNCglHaXVzZXBwZSBHdWVycmluaSA8Z2l1c2d1ZXJyaW5pQHJh
Y2luZS5yYS5pdD4NCg0K
--279707904-1153298320-976488898=:1084
Content-Type: TEXT/PLAIN; charset=US-ASCII; name=patch-NecDuart
Content-Transfer-Encoding: BASE64
Content-ID: <Pine.LNX.4.21.0012102354581.1084@gaia.localdomain>
Content-Description: 
Content-Disposition: attachment; filename=patch-NecDuart

ZGlmZiAtTmF1ciBsaW51eC0yLjIuMTQvRG9jdW1lbnRhdGlvbi9Db25maWd1
cmUuaGVscCBsaW51eC0yLjIuMTQtTmVjRHVhcnQvRG9jdW1lbnRhdGlvbi9D
b25maWd1cmUuaGVscA0KLS0tIGxpbnV4LTIuMi4xNC9Eb2N1bWVudGF0aW9u
L0NvbmZpZ3VyZS5oZWxwCVR1ZSBBcHIgMjUgMTY6MjE6MTUgMjAwMA0KKysr
IGxpbnV4LTIuMi4xNC1OZWNEdWFydC9Eb2N1bWVudGF0aW9uL0NvbmZpZ3Vy
ZS5oZWxwCVN1biBEZWMgMTAgMTM6Mzk6NTIgMjAwMA0KQEAgLTEzNDMsNiAr
MTM0MywyMCBAQA0KIA0KICAgTW9zdCBwZW9wbGUgY2FuIHNheSBOIGhlcmUu
DQogDQorQnVnZml4IGZvciBORUMgTlMxNkM1NXggVUFSVHMNCitDT05GSUdf
TkVDX0RVQVJUX1NVUFBPUlQNCisgIFNheSBZIGhlcmUgaWYgeW91IGhhdmUg
YSBORUMgTlMxNjU1eC1mYW1pbHkgVUFSVCAoTlMxNjU1MEF4LA0KKyAgTlMx
NkM1NTJ4KSwgYW5kIGFyZSBleHBlcmllbmNpbmcgcHJvYmxlbXMgKGNoYXJh
Y3RlcnMgbG9zcykuDQorICBUaGUgc3RhbmRhcmQgc2VyaWFsIGRyaXZlciBp
cyB1c2VkIHRvIGNvbmZ1c2UgdGhlIE5FQyBVQVJUcw0KKyAgd2l0aCBTdGFy
dGVjaCBVQVJUcyB3aXRob3V0IEZJRk8gc3VwcG9ydCAoTkVDIFVBUlRzIGhh
dmUNCisgIGZ1bGwgMTY1NTBBIEZJRk8pLiBVc2UgdGhlICJzZXRzZXJpYWwi
IGNvbW1hbmQgdG8ga25vdyBpZiB0aGUNCisgIGtlcm5lbCBoYXMgZGV0ZWN0
ZWQgdGhlIHdyb25nIGNoaXAgbW9kZWwuDQorDQorICBZb3UgbXVzdCBzYXkg
WSBhbHNvIGlmIHlvdSBhcmUgdXNpbmcgdGhlIFNFUjIgb3IgSU9TUEM2NCBj
YXJkcw0KKyAgcHJvZHVjZWQgYnkgQ05pICh3d3cuY25pc3JsLml0KS4NCisN
CisgIElmIHVuc3VyZSwgc2F5IE4uDQorDQogRXh0ZW5kZWQgZHVtYiBzZXJp
YWwgZHJpdmVyIG9wdGlvbnMNCiBDT05GSUdfU0VSSUFMX0VYVEVOREVEDQog
ICBJZiB5b3Ugd2lzaCB0byB1c2UgYW55IG5vbi1zdGFuZGFyZCBmZWF0dXJl
cyBvZiB0aGUgc3RhbmRhcmQgImR1bWIiDQpkaWZmIC1OYXVyIGxpbnV4LTIu
Mi4xNC9kcml2ZXJzL2NoYXIvQ29uZmlnLmluIGxpbnV4LTIuMi4xNC1OZWNE
dWFydC9kcml2ZXJzL2NoYXIvQ29uZmlnLmluDQotLS0gbGludXgtMi4yLjE0
L2RyaXZlcnMvY2hhci9Db25maWcuaW4JVHVlIEFwciAyNSAxNjoyMToxNCAy
MDAwDQorKysgbGludXgtMi4yLjE0LU5lY0R1YXJ0L2RyaXZlcnMvY2hhci9D
b25maWcuaW4JU3VuIERlYyAxMCAxMzozNToyOSAyMDAwDQpAQCAtMTAsNiAr
MTAsNyBAQA0KIGZpDQogdHJpc3RhdGUgJ1N0YW5kYXJkL2dlbmVyaWMgKGR1
bWIpIHNlcmlhbCBzdXBwb3J0JyBDT05GSUdfU0VSSUFMDQogaWYgWyAiJENP
TkZJR19TRVJJQUwiID0gInkiIF07IHRoZW4NCisgICBib29sICcgICBCdWdm
aXggZm9yIE5FQyBVQVJUcyAoTlMxNkM1NXgpJyBDT05GSUdfTkVDX0RVQVJU
X1NVUFBPUlQNCiAgICBib29sICcgICBTdXBwb3J0IGZvciBjb25zb2xlIG9u
IHNlcmlhbCBwb3J0JyBDT05GSUdfU0VSSUFMX0NPTlNPTEUNCiBmaQ0KIGJv
b2wgJ0V4dGVuZGVkIGR1bWIgc2VyaWFsIGRyaXZlciBvcHRpb25zJyBDT05G
SUdfU0VSSUFMX0VYVEVOREVEDQpkaWZmIC1OYXVyIGxpbnV4LTIuMi4xNC9k
cml2ZXJzL2NoYXIvc2VyaWFsLmMgbGludXgtMi4yLjE0LU5lY0R1YXJ0L2Ry
aXZlcnMvY2hhci9zZXJpYWwuYw0KLS0tIGxpbnV4LTIuMi4xNC9kcml2ZXJz
L2NoYXIvc2VyaWFsLmMJVHVlIEFwciAyNSAxNjoyMToxMyAyMDAwDQorKysg
bGludXgtMi4yLjE0LU5lY0R1YXJ0L2RyaXZlcnMvY2hhci9zZXJpYWwuYwlT
dW4gRGVjIDEwIDEzOjQzOjE3IDIwMDANCkBAIC0xNTQsOCArMTU0LDEzIEBA
DQogI2RlZmluZSBfSU5MSU5FXyBpbmxpbmUNCiAjZW5kaWYNCiAJDQorDQog
c3RhdGljIGNoYXIgKnNlcmlhbF9uYW1lID0gIlNlcmlhbCBkcml2ZXIiOw0K
LXN0YXRpYyBjaGFyICpzZXJpYWxfdmVyc2lvbiA9ICI0LjI3IjsNCitzdGF0
aWMgY2hhciAqc2VyaWFsX3ZlcnNpb24gPSAiNC4yNyINCisjaWZkZWYgQ09O
RklHX05FQ19EVUFSVF9TVVBQT1JUDQorCSIgLSBORUNEVUFSVCBmaXggMS4w
Ig0KKyNlbmRpZg0KKwkJCQkJOw0KIA0KIHN0YXRpYyBERUNMQVJFX1RBU0tf
UVVFVUUodHFfc2VyaWFsKTsNCiANCkBAIC0xOTksNiArMjA0LDE4IEBADQog
CXsgIlNUMTY2NTBWMiIsIDMyLCBVQVJUX0NMRUFSX0ZJRk8gfCBVQVJUX1VT
RV9GSUZPIHwNCiAJCSAgVUFSVF9TVEFSVEVDSCB9LCANCiAJeyAiVEkxNjc1
MCIsIDY0LCBVQVJUX0NMRUFSX0ZJRk8gfCBVQVJUX1VTRV9GSUZPfSwNCisj
aWZkZWYgQ09ORklHX05FQ19EVUFSVF9TVVBQT1JUDQorCSAgLyogVGhlIE5F
QyBOUzE2QzU1eCBpcyBhY3R1YWxseSBhIDE2NTUwQS4gSWYgSSBhZGRlZA0K
KwkgICAqIGEgc3BlY2lmaWMgcmVjb3JkIGZvciB0aGlzIHBhcnRpY3VsYXIg
Y2hpcHNldCBpbiAidWFydF9jb25maWciLA0KKwkgICAqIEkgd291bGQgaGF2
ZSB0byBjaGFuZ2UgYm90aCAic2VyaWFsLmgiIGFuZCB0aGUgInNldHNlcmlh
bCINCisJICAgKiB1dGlsaXR5LiBJIGRvbid0IHRoaW5rIGl0J3Mgd29ydGgu
IEFueXdheSwgdGhpcyBzb3VyY2UgaXMNCisJICAgKiByZWFkeSB0byBhY2Nl
cHQgdGhlIGNoYW5nZS4gKi8NCisjaWZuZGVmIFBPUlRfTlMxNkM1NTBBRg0K
KyNkZWZpbmUgUE9SVF9OUzE2QzU1MEFGIChQT1JUX01BWCArIDEpDQorI2Vs
c2UNCisJeyAiTlMxNkM1NXgiLCAxNiwgVUFSVF9DTEVBUl9GSUZPIHwgVUFS
VF9VU0VfRklGTyB9LCANCisjZW5kaWYNCisjZW5kaWYNCiAJeyAwLCAwfQ0K
IH07DQogDQpAQCAtMjgyMSw2ICsyODM4LDEwIEBADQogc3RhdGljIF9JTkxJ
TkVfIHZvaWQgc2hvd19zZXJpYWxfdmVyc2lvbih2b2lkKQ0KIHsNCiAgCXBy
aW50ayhLRVJOX0lORk8gIiVzIHZlcnNpb24gJXMgd2l0aCIsIHNlcmlhbF9u
YW1lLCBzZXJpYWxfdmVyc2lvbik7DQorI2lmZGVmIENPTkZJR19ORUNfRFVB
UlRfU1VQUE9SVA0KKwlwcmludGsoIiBORUNfRFVBUlQiKTsNCisjZGVmaW5l
IFNFUklBTF9PUFQNCisjZW5kaWYNCiAjaWZkZWYgQ09ORklHX0hVQjYNCiAJ
cHJpbnRrKCIgSFVCLTYiKTsNCiAjZGVmaW5lIFNFUklBTF9PUFQNCkBAIC0y
OTU5LDggKzI5ODAsOCBAQA0KIAlzY3JhdGNoMiA9IHNlcmlhbF9pbnAoaW5m
bywgVUFSVF9JRVIpOw0KIAlzZXJpYWxfb3V0cChpbmZvLCBVQVJUX0lFUiwg
c2NyYXRjaCk7DQogCWlmIChzY3JhdGNoMikgew0KLQkJcmVzdG9yZV9mbGFn
cyhmbGFncyk7DQotCQlyZXR1cm47CQkvKiBXZSBmYWlsZWQ7IHRoZXJlJ3Mg
bm90aGluZyBoZXJlICovDQorCQkvKiBXZSBmYWlsZWQ7IHRoZXJlJ3Mgbm90
aGluZyBoZXJlICovDQorCQlnb3RvIGF1dG9jb25maWdfRU5EX2ZhaWw7DQog
CX0NCiANCiAJLyogDQpAQCAtMjk3OSw4ICszMDAwLDcgQEANCiAJCXN0YXR1
czEgPSBzZXJpYWxfaW5wKGluZm8sIFVBUlRfTVNSKSAmIDB4RjA7DQogCQlz
ZXJpYWxfb3V0cChpbmZvLCBVQVJUX01DUiwgc2NyYXRjaCk7DQogCQlpZiAo
c3RhdHVzMSAhPSAweDkwKSB7DQotCQkJcmVzdG9yZV9mbGFncyhmbGFncyk7
DQotCQkJcmV0dXJuOw0KKwkJCWdvdG8gYXV0b2NvbmZpZ19FTkRfZmFpbDsN
CiAJCX0NCiAJfSANCiAJDQpAQCAtMzAwOCwxMyArMzAyOCw2MSBAQA0KIAkJ
LyogQ2hlY2sgZm9yIFN0YXJ0ZWNoIFVBUlQncyAqLw0KIAkJc2VyaWFsX291
dHAoaW5mbywgVUFSVF9MQ1IsIHNjcmF0Y2gyIHwgVUFSVF9MQ1JfRExBQik7
DQogCQlpZiAoc2VyaWFsX2luKGluZm8sIFVBUlRfRUZSKSA9PSAwKSB7DQor
I2lmZGVmIENPTkZJR19ORUNfRFVBUlRfU1VQUE9SVA0KKwkJICAvKiBnaXVz
Z3VlcnJpbmlAcmFjaW5lLnJhLml0OiBCb3RoIFNUMTY2NTAgYW5kIE5TMTZD
NTV4DQorCQkgICAqIGJlaGF2ZXMgdGhlIHNhbWUsIHNvIHRoZSBvcnRpZ2lu
YWwgYWxnb3JpdGhtIGlzIG5vdA0KKwkJICAgKiBlbm91Z2ggdG8gZGV0ZWN0
IHRoZW0uIFdlIGhhdmUgdG8gZG8gc29tZXRoaW5nDQorCQkgICAqIHNtYXJ0
ZXIuICovDQorCQkgIC8qIE9LLCB0aGVyZSBjb3VsZCBiZSBhbiBTVDE2NjUw
IG9yIGEgTkVDIE5TMTZDNTV4Lg0KKwkJICAgKiBUaGUgZm9ybWVyIHVzZXMg
bWFueSBiaXRzIGluIEVGUig9RkNSK0RMQUIpLCB0aGUgbGF0dGVyDQorCQkg
ICAqIHVzZXMgb25seSBiaXRzIDAsIDEgYW5kIDIsIGFuZCB6ZXJvZXMgb3Ro
ZXIgYml0cy4NCisJCSAgICogU28sIHdlJ2xsIHRyeSB0byBkZXRlY3QgYW4g
U1QxNjY1MCBieSBzZXR0aW5nIHNvbWUNCisJCSAgICogaGlnaCBiaXQgaW4g
RUZSIChlLmcuIHRoZSBDVFMgcHJvdG9jb2wgZW5hYmxlciksIGFuZA0KKwkJ
ICAgKiB0aGVuIHZlcmlmeWluZyBpZiBpdCBoYXMgcmVhbGx5IGJlZW4gc2V0
LiAqLw0KKwkJCXNlcmlhbF9vdXRwKGluZm8sIFVBUlRfTENSLCAweEJGKTsN
CisJCQlzZXJpYWxfb3V0cChpbmZvLCBVQVJUX0VGUiwgVUFSVF9FRlJfQ1RT
KTsNCisJCQlzZXJpYWxfb3V0cChpbmZvLCBVQVJUX0xDUiwgMHhCRik7DQor
CQkJaWYgKHNlcmlhbF9pbihpbmZvLCBVQVJUX0VGUikgJiBVQVJUX0VGUl9D
VFMpIHsNCisJCQkgIC8qIGJpdCBzZXQgc3VjY2VlZGVkLiBJdCdzIGFuIFNU
MTY2NTAuICovDQorCQkJCXN0YXRlLT50eXBlID0gUE9SVF8xNjY1MDsNCisJ
CQkJc2VyaWFsX291dHAoaW5mbywgVUFSVF9MQ1IsIDB4QkYpOw0KKwkJCQlz
ZXJpYWxfb3V0cChpbmZvLCBVQVJUX0VGUiwgMCk7DQorCQkJfQ0KKwkJCWVs
c2Ugew0KKwkJCSAgLyogYml0IHNldCB1bnN1Y2Nlc2Z1bC4gUGVyaGFwcyB3
ZSBhcmUgdXNpbmcgYSBORUMgZG91YmxlIFVBUlQuDQorCQkJICAgKiBXZSBt
dXN0IHJlbWViZXIgaXQsIGJlY2F1c2UNCisJCQkgICAqICAtIHRoaXMgY2hp
cCBmdWxseSBzdXBwb3J0cyB0aGUgMTY2NTUwQSBtb2RlLA0KKwkJCSAgICog
IC0gdGhpcyBjaGlwIGRvZXNuJ3QgbGlrZSB0aGUgVEkgMTY3NTANCisJCQkg
ICAqICAgIGRldGVjdGlvbiBhbGdvcml0aG0sIHNvIHdlIG11c3QgYXZvaWQg
aXQuICovDQorCQkJCXN0YXRlLT50eXBlID0gUE9SVF9OUzE2QzU1MEFGOw0K
KwkJCQlzZXJpYWxfb3V0cChpbmZvLCBVQVJUX0xDUiwgc2NyYXRjaDIpOw0K
KwkJCX0NCisjZWxzZSAvKiBDT05GSUdfTkVDX0RVQVJUX1NVUFBPUlQgKi8N
CiAJCQlzdGF0ZS0+dHlwZSA9IFBPUlRfMTY2NTA7DQorI2VuZGlmIC8qIENP
TkZJR19ORUNfRFVBUlRfU1VQUE9SVCAqLw0KIAkJfSBlbHNlIHsNCiAJCQlz
ZXJpYWxfb3V0cChpbmZvLCBVQVJUX0xDUiwgMHhCRik7DQogCQkJaWYgKHNl
cmlhbF9pbihpbmZvLCBVQVJUX0VGUikgPT0gMCkNCiAJCQkJc3RhdGUtPnR5
cGUgPSBQT1JUXzE2NjUwVjI7DQogCQl9DQogCX0NCisjaWZkZWYgQ09ORklH
X05FQ19EVUFSVF9TVVBQT1JUDQorCWlmIChzdGF0ZS0+dHlwZSA9PSBQT1JU
X05TMTZDNTUwQUYpIHsNCisjaWYgUE9SVF9OUzE2QzU1MEFGID09IChQT1JU
X01BWCArIDEpDQorCSAgLyogSGlkZSB0aGUgImludGVybmFsIiB0eXBlIGNv
ZGUuIEknbSB0b28gbGF6eSB0byBjaGFuZ2UNCisJICAgKiBzZXJhaWwuaCwg
c2V0c2VyaWFsLC4uLiBCdXQgdGhlIGNvZGUgaXMgcmVhZHkuICovDQorCQlz
dGF0ZS0+dHlwZSA9IFBPUlRfMTY1NTBBOw0KKyNlbmRpZg0KKwkJc2VyaWFs
X291dHAoaW5mbywgVUFSVF9GQ1IsIFVBUlRfRkNSX0VOQUJMRV9GSUZPKTsN
CisJfQ0KKwllbHNlDQorCS8qIGdpdXNndWVycmluaUByYWNpbmUucmEuaXQ6
IEFycnJnaCEgVGhpcyBtZXNzZXMgdXAgdGhlIE5FQw0KKwkgKiBOUzE2QzU1
MkEgZHVhbCBVQVJULiBCaXQgMCBvZiBGQ1IrRExBQiBlbmFibGVzIGNvbmN1
cnJlbnQgd3JpdGUNCisJICogb24gcmVnaXN0ZXJzIG9mIEJPVEggVUFSVHMu
IFNvLCB3aXRoIHRoaXMgY2hpcCB3ZSBjYW4ndCB3cml0ZQ0KKwkgKiB0aGUg
RU5BQkxFX0ZJRk8gYml0IHdoZW4gRExBQiBpcyBzZXQuIFRoYXQncyB3aHkg
d2Ugd29uJ3QNCisJICogZXhlY3V0ZSB0aGlzIGNvZGUgaWYgd2UgZGV0ZWN0
ZWQgYSBOUzE2QzU1eCAoYW5kLCBhbnl3YXksDQorCSAqIHdlIGhhdmUgYWxy
ZWFkeSBkZXRlY3RlZCB0aGUgY2hpcCEpLiAqLw0KKyNlbmRpZiAvKiBDT05G
SUdfTkVDX0RVQVJUX1NVUFBPUlQgKi8NCiAJaWYgKHN0YXRlLT50eXBlID09
IFBPUlRfMTY1NTBBKSB7DQogCQkvKiBDaGVjayBmb3IgVEkgMTY3NTAgKi8N
CiAJCXNlcmlhbF9vdXRwKGluZm8sIFVBUlRfTENSLCBzY3JhdGNoMiB8IFVB
UlRfTENSX0RMQUIpOw0KQEAgLTMwNDQsOCArMzExMiw3IEBADQogCXN0YXRl
LT54bWl0X2ZpZm9fc2l6ZSA9CXVhcnRfY29uZmlnW3N0YXRlLT50eXBlXS5k
ZmxfeG1pdF9maWZvX3NpemU7DQogDQogCWlmIChzdGF0ZS0+dHlwZSA9PSBQ
T1JUX1VOS05PV04pIHsNCi0JCXJlc3RvcmVfZmxhZ3MoZmxhZ3MpOw0KLQkJ
cmV0dXJuOw0KKwkJZ290byBhdXRvY29uZmlnX0VORF9mYWlsOw0KIAl9DQog
DQogCXJlcXVlc3RfcmVnaW9uKGluZm8tPnBvcnQsOCwic2VyaWFsKGF1dG8p
Iik7DQpAQCAtMzA2Niw4ICszMTMzLDEzIEBADQogCQkJCSAgICAgVUFSVF9G
Q1JfQ0xFQVJfWE1JVCkpOw0KIAkodm9pZClzZXJpYWxfaW4oaW5mbywgVUFS
VF9SWCk7DQogCXNlcmlhbF9vdXRwKGluZm8sIFVBUlRfSUVSLCAwKTsNCi0J
DQorDQorYXV0b2NvbmZpZ19FTkQ6DQogCXJlc3RvcmVfZmxhZ3MoZmxhZ3Mp
Ow0KKwlyZXR1cm47DQorDQorYXV0b2NvbmZpZ19FTkRfZmFpbDoNCisJZ290
byBhdXRvY29uZmlnX0VORDsNCiB9DQogDQogaW50IHJlZ2lzdGVyX3Nlcmlh
bChzdHJ1Y3Qgc2VyaWFsX3N0cnVjdCAqcmVxKTsNCg==
--279707904-1153298320-976488898=:1084--
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
Please read the FAQ at http://www.tux.org/lkml/
