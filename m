Return-Path: <linux-kernel-owner+willy=40w.ods.org-S261594AbUKCNit@vger.kernel.org>
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S261594AbUKCNit (ORCPT <rfc822;willy@w.ods.org>);
	Wed, 3 Nov 2004 08:38:49 -0500
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S261595AbUKCNit
	(ORCPT <rfc822;linux-kernel-outgoing>);
	Wed, 3 Nov 2004 08:38:49 -0500
Received: from mx1.redhat.com ([66.187.233.31]:37798 "EHLO mx1.redhat.com")
	by vger.kernel.org with ESMTP id S261594AbUKCNir (ORCPT
	<rfc822;linux-kernel@vger.kernel.org>);
	Wed, 3 Nov 2004 08:38:47 -0500
From: David Howells <dhowells@redhat.com>
In-Reply-To: <Pine.LNX.4.58.0411021750440.2187@ppc970.osdl.org> 
References: <Pine.LNX.4.58.0411021750440.2187@ppc970.osdl.org>  <20041101162929.63af1d0d.akpm@osdl.org> <76b4a884-2c3c-11d9-91a1-0002b3163499@redhat.com> <200411011930.iA1JUMgs023243@warthog.cambridge.redhat.com> <5109.1099394496@redhat.com> <Pine.LNX.4.58.0411021747420.2187@ppc970.osdl.org> 
To: Linus Torvalds <torvalds@osdl.org>
Cc: Andrew Morton <akpm@osdl.org>, davidm@snapgear.com,
       linux-kernel@vger.kernel.org, uclinux-dev@uclinux.org
Subject: Re: [PATCH 12/14] FRV: Generate more useful debug info 
User-Agent: EMH/1.14.1 SEMI/1.14.5 (Awara-Onsen) FLIM/1.14.5 (Demachiyanagi) APEL/10.6 Emacs/21.3 (i386-redhat-linux-gnu) MULE/5.0 (SAKAKI)
MIME-Version: 1.0 (generated by SEMI 1.14.5 - "Awara-Onsen")
Content-Type: text/plain; charset=US-ASCII
Date: Wed, 03 Nov 2004 13:38:23 +0000
Message-ID: <12014.1099489103@redhat.com>
Sender: linux-kernel-owner@vger.kernel.org
X-Mailing-List: linux-kernel@vger.kernel.org


> > That may not be true today, but what is true is that -O1 is not a light 
> > thing to just do.
> 
> And btw, in some cases the inlining used to be a correcness issue, so no,
> just making it be "static inline" doesn't necessarily fix the basic issue. 
> 
> Again, whether that is necessarily true today is not something I'm ready 
> to guarantee one way or the other, so this is just an observation that 
> things can be a lot more subtle than you seem to assume.

I've been able to run a range of 2.4 and 2.6 kernels compiled with -O1 and
without any -O flag at all, and with all "extern inline" changed to "static
inline". It doesn't seem to be a problem on i386, x86_64, frv (which I'm
trying to add) and am33 (which I haven't tried to add yet).

When debugging, -O2 makes for a real problem because, amongst other
inconvenient things, it enables the explicit parallelisation features that frv
cpus support.

Would you object to making it possible for the arch to override the
optimisation level when debugging?

David
