Return-Path: <linux-kernel-owner@vger.kernel.org>
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id <S269042AbRG3Rts>; Mon, 30 Jul 2001 13:49:48 -0400
Received: (majordomo@vger.kernel.org) by vger.kernel.org
	id <S269046AbRG3Rti>; Mon, 30 Jul 2001 13:49:38 -0400
Received: from ACAP-DEV.NAS.CMU.EDU ([128.2.6.63]:30468 "EHLO
	acap-dev.nas.cmu.edu") by vger.kernel.org with ESMTP
	id <S269042AbRG3RtW>; Mon, 30 Jul 2001 13:49:22 -0400
Date: Mon, 30 Jul 2001 13:49:12 -0400
Message-Id: <200107301749.f6UHnCHE001961@acap-dev.nas.cmu.edu>
From: Lawrence Greenfield <leg+@andrew.cmu.edu>
X-Mailer: BatIMail version 3.2
To: Rik van Riel <riel@conectiva.com.br>, Chris Wedgwood <cw@f00f.org>
Cc: Chris Mason <mason@suse.com>, Alan Cox <alan@lxorguk.ukuu.org.uk>,
        linux-kernel@vger.kernel.org,
        "Patrick J. LoPresti" <patl@cag.lcs.mit.edu>
In-Reply-To: <20010731053813.A5961@weta.f00f.org>
Subject: Re: ext3-2.4-0.9.4
In-Reply-To: <Pine.LNX.4.33L.0107301422120.5582-100000@duckman.distro.conectiva> <20010731053813.A5961@weta.f00f.org>
Mime-Version: 1.0 (generated by tm-edit 7.106)
Content-Type: text/plain; charset=US-ASCII
Sender: linux-kernel-owner@vger.kernel.org
X-Mailing-List: linux-kernel@vger.kernel.org
Original-Recipient: rfc822;linux-kernel-outgoing

   Date: Tue, 31 Jul 2001 05:38:13 +1200
   From: Chris Wedgwood <cw@f00f.org>

   On Mon, Jul 30, 2001 at 02:25:51PM -0300, Rik van Riel wrote:

       Note that this is very different from the "link() should be
       synchronous()" mantra we've been hearing over the last days.

       These fsync() semantics make lots of sense to me, I'm all
       for it.

   And what if the file has hundreds or thousands of links? How do we
   cleanly keep track of all those?

You don't have to keep track of all of them, just the uncommitted
ones.  I could imagine the filesystem forcing periodic commits on
pathological files (those with thousands of links) to limit the number
of pending directory operations per file.

While the softupdates paper doesn't appear to directly address this
concern, clearly their implementation has to deal with it in some way.

Larry

