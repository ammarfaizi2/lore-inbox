Return-Path: <linux-kernel-owner+willy=40w.ods.org-S261891AbUEABQi@vger.kernel.org>
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S261891AbUEABQi (ORCPT <rfc822;willy@w.ods.org>);
	Fri, 30 Apr 2004 21:16:38 -0400
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S261897AbUEABQi
	(ORCPT <rfc822;linux-kernel-outgoing>);
	Fri, 30 Apr 2004 21:16:38 -0400
Received: from gateway-1237.mvista.com ([12.44.186.158]:61166 "EHLO
	av.mvista.com") by vger.kernel.org with ESMTP id S261891AbUEABQg
	(ORCPT <rfc822;linux-kernel@vger.kernel.org>);
	Fri, 30 Apr 2004 21:16:36 -0400
Message-ID: <4092FA66.20704@mvista.com>
Date: Fri, 30 Apr 2004 18:16:22 -0700
From: Todd Poynor <tpoynor@mvista.com>
User-Agent: Mozilla Thunderbird 0.5 (X11/20040208)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Greg KH <greg@kroah.com>
CC: Russell King <rmk+lkml@arm.linux.org.uk>,
       Benjamin Herrenschmidt <benh@kernel.crashing.org>,
       Patrick Mochel <mochel@digitalimplant.org>,
       linux-hotplug-devel@lists.sourceforge.net,
       Linux Kernel list <linux-kernel@vger.kernel.org>
Subject: Re: [PATCH] Hotplug for device power state changes
References: <20040429202654.GA9971@dhcp193.mvista.com> <20040429224243.L16407@flint.arm.linux.org.uk> <40918375.2090806@mvista.com> <1083286226.20473.159.camel@gaston> <20040430093012.A30928@flint.arm.linux.org.uk> <4092B02C.5090205@mvista.com> <20040430215621.GA14015@kroah.com>
In-Reply-To: <20040430215621.GA14015@kroah.com>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
Sender: linux-kernel-owner@vger.kernel.org
X-Mailing-List: linux-kernel@vger.kernel.org

Greg KH wrote:
> On Fri, Apr 30, 2004 at 12:59:40PM -0700, Todd Poynor wrote:
> 
>>* Changes to kobject to allow kobject hotplug to optionally be 
>>synchronous if desired.  I'd assume this is a new hotplug_ops field.
> 
> 
> Ick.

Is the objection to using kobject for synchronous hotplug events, or to 
using a hotplug_ops flag to indicate which kind is needed?  Would the 
addition of a kobject_hotplug_sync function be better?  Or a 
handshake-like interface as with firmware downloads?

>>* Synchronous hotplug events for system suspend and resume (without 
>>individual device notifications).  These events can probably be 
>>generated by the kobject hotplug methods by the existing power subsys 
>>(once the above enhancement is in place).
> 
> 
> But why?  Do you really need this?  Have you actually tested a system to
> see if it is needed?

This is something that was requested of me by others who build Linux 
into consumer electronics devices.  Perhaps some of the interested 
parties may speak up here to add more insight.  Among the intended uses 
that I'm aware of are: saving application state to stable storage (for 
example, to be prepared in case the battery dies during an extended 
"suspended" period, and such gadgets often do not have a device suitable 
for a complete system suspend-to-disk), terminating applications that 
reside in memory banks to be powered off during the suspend (this also 
relies on other enhancements to allocate memory accordingly), and 
dropping network connections in order to conserve resources on servers 
that support mobile devices.  It sounds like the folks that deal with 
ACPI power management have found use for such a mechanism in the 
server/desktop world as well.

Thanks,

-- 
Todd Poynor
MontaVista Software

