Return-Path: <linux-kernel-owner+willy=40w.ods.org-S264686AbUEEOSS@vger.kernel.org>
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S264686AbUEEOSS (ORCPT <rfc822;willy@w.ods.org>);
	Wed, 5 May 2004 10:18:18 -0400
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S264690AbUEEOSS
	(ORCPT <rfc822;linux-kernel-outgoing>);
	Wed, 5 May 2004 10:18:18 -0400
Received: from smtp102.mail.sc5.yahoo.com ([216.136.174.140]:11402 "HELO
	smtp102.mail.sc5.yahoo.com") by vger.kernel.org with SMTP
	id S264686AbUEEOSM (ORCPT <rfc822;linux-kernel@vger.kernel.org>);
	Wed, 5 May 2004 10:18:12 -0400
Message-ID: <001401c432ab$ca03ce60$0202a8c0@boxa>
From: "Bill Catlan" <wcatlan@yahoo.com>
To: "Paulo Marques" <pmarques@grupopie.com>
Cc: "Randy.Dunlap" <rddunlap@osdl.org>, <linux-kernel@vger.kernel.org>
References: <003201c4309c$fd93cd90$0202a8c0@boxa> <20040502182731.1e1cced6.rddunlap@osdl.org> <003d01c4314d$9118c920$0202a8c0@boxa> <4097E693.3090501@grupopie.com>
Subject: Re: Possible to delay boot process to boot from USB subsystem?
Date: Wed, 5 May 2004 10:18:06 -0400
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1409
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1409
Sender: linux-kernel-owner@vger.kernel.org
X-Mailing-List: linux-kernel@vger.kernel.org

Hi Paulo,

Thanks for the feedback.  I was starting to think the same thing myself, but it
turns out the root cause is the same thing - namely, slow startup of the USB
storage subsystem.

The differing symptom (i.e., different error messages) is entirely due to the
difference in kernel versions.  I got my setup (2.4.26) working with Willy's
patch.  I am going to re-test Randy's patch as I needed to modify the "preload"
order of my modules in my initrd image in order to even get Willy's patch to
work.  With the reordering, I suspect (50/50 chance I think) that Randy's patch
for the 2.4.22 kernel may work on the 2.4.26 kernel as well.

I originally thought that I had compiled the necessary scsi and usb stuff into
the kernel, but upon eventually revisiting my kernel config file I learned along
the way and to my chagrin that I had left them as modules, adding this slight
complication.

Stay tuned for our next episode! :)

Bill

----- Original Message ----- 
From: "Paulo Marques" <pmarques@grupopie.com>
To: "Bill Catlan" <wcatlan@yahoo.com>
Cc: "Randy.Dunlap" <rddunlap@osdl.org>; <linux-kernel@vger.kernel.org>
Sent: Tuesday, May 04, 2004 2:53 PM
Subject: Re: Possible to delay boot process to boot from USB subsystem?


> Bill Catlan wrote:
>
> > Randy,
> >
> > Thanks for the patch, but it does not work for 2.4.26.  The kernel panic I
get
> > ("Kernel panic: No init found. Try passing init= option to kernel.")  is
> > generated by the init() function in init/main.c.  Willy's patch applies to
> > init/main.c, perhaps yours should now as well (i.e., in later kernels)?  (I
have
> > not tested Willy's patch, but he claims success with a 2.4.23 kernel.)
>
>
> This is a completely different error from "VFS: Cannot open root device" or
> "unable to mount root".
>
> Are you sure you have a "/sbin" directory with an *executable* "init" file on
> the usb harddrive?
>
> Does your init file depend on libraries that you do not have under "/lib"?
(you
> can check with "ldd init")
>
> If your init is a script, does it specify a complete path to the interpreter,
> and do you have an *executable* interpreter there? Does the interpreter
require
> libraries or is it static?
>
> I hope this helps,
>
> -- 
> Paulo Marques - www.grupopie.com
> "In a world without walls and fences who needs windows and gates?"

