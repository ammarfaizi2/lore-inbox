Return-Path: <linux-kernel-owner+willy=40w.ods.org-S267325AbUGNIvx@vger.kernel.org>
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S267325AbUGNIvx (ORCPT <rfc822;willy@w.ods.org>);
	Wed, 14 Jul 2004 04:51:53 -0400
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S267327AbUGNIvw
	(ORCPT <rfc822;linux-kernel-outgoing>);
	Wed, 14 Jul 2004 04:51:52 -0400
Received: from cantor.suse.de ([195.135.220.2]:7870 "EHLO Cantor.suse.de")
	by vger.kernel.org with ESMTP id S267325AbUGNIvk (ORCPT
	<rfc822;linux-kernel@vger.kernel.org>);
	Wed, 14 Jul 2004 04:51:40 -0400
Date: Wed, 14 Jul 2004 10:51:39 +0200
Message-ID: <s5hk6x79dk4.wl@alsa2.suse.de>
From: Takashi Iwai <tiwai@suse.de>
To: Lee Revell <rlrevell@joe-job.com>
Cc: Andrew Morton <akpm@osdl.org>, andrea@suse.de,
       linux-audio-dev@music.columbia.edu, linux-kernel@vger.kernel.org
Subject: Re: [linux-audio-dev] Re: [announce] [patch] Voluntary Kernel	Preemption Patch
In-Reply-To: <1089755130.22175.21.camel@mindpipe>
References: <20040712163141.31ef1ad6.akpm@osdl.org>
	<200407130001.i6D01pkJ003489@localhost.localdomain>
	<20040712170844.6bd01712.akpm@osdl.org>
	<20040713162539.GD974@dualathlon.random>
	<1089744137.20381.49.camel@mindpipe>
	<20040713142923.568fa35e.akpm@osdl.org>
	<1089755130.22175.21.camel@mindpipe>
User-Agent: Wanderlust/2.10.1 (Watching The Wheels) SEMI/1.14.5 (Awara-Onsen) FLIM/1.14.5 (Demachiyanagi) APEL/10.6 MULE XEmacs/21.4 (patch 15) (Security Through Obscurity) (i386-suse-linux)
MIME-Version: 1.0 (generated by SEMI 1.14.5 - "Awara-Onsen")
Content-Type: text/plain; charset=US-ASCII
Sender: linux-kernel-owner@vger.kernel.org
X-Mailing-List: linux-kernel@vger.kernel.org

At Tue, 13 Jul 2004 17:45:30 -0400,
Lee Revell wrote:
> 
> On Tue, 2004-07-13 at 17:29, Andrew Morton wrote:
> > Lee Revell <rlrevell@joe-job.com> wrote:
> > >
> > > Would this explain these?  When running JACK with settings that need
> > > sub-millisecond latencies, I get them when I generate any load at all on
> > > the system (typing, switching windows, etc).  I also get lots of these
> > > if I run JACK from an X terminal, but very few if I run it from a text
> > > console, even if X is running in the background.
> > > 
> > > Jul 13 14:36:16 mindpipe kernel: ALSA /usr/src/alsa-cvs-1.0.5/alsa-driver/alsa-kernel/core/pcm_lib.c:199: Unexpected hw_pointer value [1] (stream = 0, delta: -25, max jitter = 32): wrong interrupt acknowledge?
> > 
> > I'm wondering what this message actually means.  "Unexpected hw_pointer
> > value"?
> > 
> > Does this actually indicate an underrun, or is the debug code screwy?
> 
> Not sure.  Here is what Takashi had to say about it:
> 
> "The message appears when an unexpected DMA pointer is read in the
> interrupt handler.  Either the handling of irq was delayed more than
> the buffer size, an irq is issued at the wrong timing, or the DMA
> pointer reigster is somehow screwed up.
> 
> Since you're using quite small buffer, I guess the former case."
> 
> My response:
> 
> "I thought this was what an XRUN was, when the handling of the irq is
> delayed more than the buffer size.  Sometimes these messages are
> associated with XRUNs, sometimes not."
> 
> Haven't heard back yet. 
> 
> Is it possible that I am simply pushing my hardware past its limits? 
> Keep in mind this is a 600Mhz C3 processor.

I think yes.  32 frames / 44.1kHz = 0.725 ms.


Takashi
