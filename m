Return-Path: <linux-kernel-owner@vger.kernel.org>
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id <S129828AbRB1LTv>; Wed, 28 Feb 2001 06:19:51 -0500
Received: (majordomo@vger.kernel.org) by vger.kernel.org
	id <S130129AbRB1LTl>; Wed, 28 Feb 2001 06:19:41 -0500
Received: from mons.uio.no ([129.240.130.14]:22756 "EHLO mons.uio.no")
	by vger.kernel.org with ESMTP id <S129828AbRB1LT2>;
	Wed, 28 Feb 2001 06:19:28 -0500
Message-ID: <15004.57000.33634.592757@charged.uio.no>
Date: Wed, 28 Feb 2001 12:19:04 +0100 (CET)
To: "H . J . Lu" <hjl@valinux.com>
Cc: NFS maillist <nfs@lists.sourceforge.net>,
        Linux Kernel <linux-kernel@vger.kernel.org>
Subject: Re: [NFS] Updated patch for the [2.4.x] NFS 'missing directory entry a.k.a. IRIX server' problem...
In-Reply-To: <20010227152437.A18517@valinux.com>
In-Reply-To: <14997.9938.106305.635202@charged.uio.no>
	<20010227150432.A18066@valinux.com>
	<20010227152437.A18517@valinux.com>
X-Mailer: VM 6.75 under 21.1 (patch 14) "Cuyahoga Valley" XEmacs Lucid
Reply-To: trond.myklebust@fys.uio.no
From: Trond Myklebust <trond.myklebust@fys.uio.no>
Mime-Version: 1.0 (generated by tm-edit 1.7)
Content-Type: text/plain; charset=US-ASCII
Sender: linux-kernel-owner@vger.kernel.org
X-Mailing-List: linux-kernel@vger.kernel.org

>>>>> " " == H J Lu <hjl@valinux.com> writes:

     > On Tue, Feb 27, 2001 at 03:04:32PM -0800, H . J . Lu wrote:
    >> >  	entry->prev_cookie = entry->cookie;
    >> > - p = xdr_decode_hyper(p, &entry->cookie);
    >> > + p = xdr_decode_hyper(p, cookie);
    >> > + entry->cookie = nfs_transform_cookie64(cookie);
    >>
    >> I don't understand this. As far as I can tell, "cookie" is not
    >> initialized at all. Even if it is initialized, what does
    >>
    >> p = xdr_decode_hyper(p, cookie);
    >>

     > Trond, I think you missed

     > 	p = xdr_decode_hyper(p, &cookie);
     > 				^

Oops. You're quite right. As far as I can see, this bug seems to have
crept in when I created the patch itself. My own source has the
correct dereference, hence I didn't see any errors.

I've also updated the copy on http://www.fys.uio.no/~trondmy/src/2.4.2

Thanks,
  Trond
