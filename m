Return-Path: <linux-kernel-owner+willy=40w.ods.org@vger.kernel.org>
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S265073AbTFUChI (ORCPT <rfc822;willy@w.ods.org>);
	Fri, 20 Jun 2003 22:37:08 -0400
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S265071AbTFUChI
	(ORCPT <rfc822;linux-kernel-outgoing>);
	Fri, 20 Jun 2003 22:37:08 -0400
Received: from unity.unh.edu ([132.177.137.40]:13453 "EHLO unity.unh.edu")
	by vger.kernel.org with ESMTP id S265070AbTFUChF (ORCPT
	<rfc822;linux-kernel@vger.kernel.org>);
	Fri, 20 Jun 2003 22:37:05 -0400
Date: Fri, 20 Jun 2003 22:51:05 -0400
From: Samuel Thibault <Samuel.Thibault@ens-lyon.fr>
To: linux-kernel@vger.kernel.org, linux-laptop@vger.kernel.org
Subject: Time freezing on Armada E500 Laptop
Message-ID: <20030621025104.GA4906@bouh.unh.edu>
Reply-To: Samuel Thibault <samuel.thibault@fnac.net>
Mail-Followup-To: linux-kernel@vger.kernel.org,
	linux-laptop@vger.kernel.org
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
User-Agent: Mutt/1.4i-nntp
X-MailScanner-Information: http://pubpages.unh.edu/notes/mailfiltering.html
X-MailScanner: Found to be clean
X-MailScanner-SpamCheck: not spam, SpamAssassin (score=-3.7, required 5,
	BAYES_30, USER_AGENT_MUTT)
Sender: linux-kernel-owner@vger.kernel.org
X-Mailing-List: linux-kernel@vger.kernel.org

Hi,

This has been happening for months since I bougth my laptop: it
sometimes seems to be frozen, and merely pressing a key unfreezes it.
Sending chars on serial port does as well, but the USB mouse does not.
I had a closer look and realized that the only matter was the IRQ0 not
being generated by the pit any more... So that jiffies wouldn't
increase, hence any program based on time would indeed freeze while
cpu burners would still run for instance. Fancy things being the window
manager still working, but freezing on raising a window. The system
clock goes round within ~5s. Remote shells still work of course, since
network generates IRQs, but sshd is frozen :/.

I tried 2.4 & 2.5, enabling / disabling APM, ACPI, speedstep, without
any change. Flashing my bios to the latest version didn't add any option
to the setup, it still only has a dozen, the only one related to power
management being speedstep, which I tried to enable / disable as well.
The Power Management program shipped by compaq for win95 won't run ("you
need administrator rights", uh? on w95?)

Just to be sure, Linux wouldn't ever disable IRQ0, would it? Could it
on the other hand use other timers such as the rtc for detecting this
trouble, and even use them as fallbacks?

Regards,
Samuel Thibault
