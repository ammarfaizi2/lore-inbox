Return-Path: <linux-kernel-owner+willy=40w.ods.org-S932347AbWAZPzZ@vger.kernel.org>
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S932347AbWAZPzZ (ORCPT <rfc822;willy@w.ods.org>);
	Thu, 26 Jan 2006 10:55:25 -0500
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S932370AbWAZPzY
	(ORCPT <rfc822;linux-kernel-outgoing>);
	Thu, 26 Jan 2006 10:55:24 -0500
Received: from mx2.suse.de ([195.135.220.15]:36044 "EHLO mx2.suse.de")
	by vger.kernel.org with ESMTP id S932347AbWAZPzY (ORCPT
	<rfc822;linux-kernel@vger.kernel.org>);
	Thu, 26 Jan 2006 10:55:24 -0500
Date: Thu, 26 Jan 2006 17:02:53 +0100
Message-ID: <s5hzmljt1si.wl%tiwai@suse.de>
From: Takashi Iwai <tiwai@suse.de>
To: Atsushi Nemoto <anemo@mba.ocn.ne.jp>
Cc: linux-kernel@vger.kernel.org, tbm@cyrius.com, t.sailer@alumni.ethz.ch,
       perex@suse.cz, ralf@linux-mips.org
Subject: Re: ALSA on MIPS platform
In-Reply-To: <20060127.002925.25911749.anemo@mba.ocn.ne.jp>
References: <20060125.235007.126576298.anemo@mba.ocn.ne.jp>
	<s5hek2wb05q.wl%tiwai@suse.de>
	<20060127.002925.25911749.anemo@mba.ocn.ne.jp>
User-Agent: Wanderlust/2.12.0 (Your Wildest Dreams) SEMI/1.14.6 (Maruoka)
 FLIM/1.14.7 (=?ISO-8859-4?Q?Sanj=F2?=) APEL/10.6 MULE XEmacs/21.5 (beta21)
 (corn) (+CVS-20050720) (i386-suse-linux)
MIME-Version: 1.0 (generated by SEMI 1.14.6 - "Maruoka")
Content-Type: text/plain; charset=US-ASCII
Sender: linux-kernel-owner@vger.kernel.org
X-Mailing-List: linux-kernel@vger.kernel.org

At Fri, 27 Jan 2006 00:29:25 +0900 (JST),
Atsushi Nemoto wrote:
> 
> >>>>> On Wed, 25 Jan 2006 20:03:13 +0100, Takashi Iwai <tiwai@suse.de> said:
> 
> tiwai> The right fix is, IMO, to port dma_mmap_coherent() to all
> tiwai> archs.  Currently, it's only on ARM.
> 
> Thanks.  Is this solve both issue #1 and #2 ?
 
Yes.  In theory, dma_alloc_coherent() and dma_mmap_coherent() should
cover all the magic each arch requires.

> The most part of issue #1 will vanish if NEED_RESERVE_PAGES was
> defined, and currently only ARM define this.  ARM defines
> NEED_RESERVE_PAGES because it has dma_mmap_coherent(), right?

Well, the whole page-reserve kludge should disappear anyway in near
future.  Right now it's in the process.

The memory allocation stuff in ALSA is being largely rewritten on my
local tree, but it's not released yet.  One reason is to wait for the
finish of page-reserve removals, and another reason is that I've had
little time to tidy them up :)

--
Takashi Iwai <tiwai@suse.de>		ALSA Developer - www.alsa-project.org
