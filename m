Return-Path: <linux-kernel-owner+willy=40w.ods.org@vger.kernel.org>
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id <S261412AbTCOLsc>; Sat, 15 Mar 2003 06:48:32 -0500
Received: (majordomo@vger.kernel.org) by vger.kernel.org
	id <S261413AbTCOLsc>; Sat, 15 Mar 2003 06:48:32 -0500
Received: from holomorphy.com ([66.224.33.161]:35537 "EHLO holomorphy")
	by vger.kernel.org with ESMTP id <S261412AbTCOLsa>;
	Sat, 15 Mar 2003 06:48:30 -0500
Date: Sat, 15 Mar 2003 03:58:56 -0800
From: William Lee Irwin III <wli@holomorphy.com>
To: Andrew Morton <akpm@digeo.com>, bzzz@tmi.comex.ru, adilger@clusterfs.com,
       linux-kernel@vger.kernel.org, ext2-devel@lists.sourceforge.net,
       hawkes@sgi.com, hannal@us.ibm.com
Subject: Re: [PATCH] concurrent block allocation for ext2 against 2.5.64
Message-ID: <20030315115856.GU20188@holomorphy.com>
Mail-Followup-To: William Lee Irwin III <wli@holomorphy.com>,
	Andrew Morton <akpm@digeo.com>, bzzz@tmi.comex.ru,
	adilger@clusterfs.com, linux-kernel@vger.kernel.org,
	ext2-devel@lists.sourceforge.net, hawkes@sgi.com, hannal@us.ibm.com
References: <20030313165641.H12806@schatzie.adilger.int> <m38yvixvlz.fsf@lexa.home.net> <20030315043744.GM1399@holomorphy.com> <20030314205455.49f834c2.akpm@digeo.com> <20030315054910.GN20188@holomorphy.com> <20030315062025.GP20188@holomorphy.com> <20030314224413.6a1fc39c.akpm@digeo.com> <20030315070511.GQ20188@holomorphy.com> <20030315082431.GG5891@holomorphy.com> <20030315094758.GT20188@holomorphy.com>
Mime-Version: 1.0
Content-Type: multipart/mixed; boundary="0eh6TmSyL6TZE2Uz"
Content-Disposition: inline
In-Reply-To: <20030315094758.GT20188@holomorphy.com>
User-Agent: Mutt/1.3.28i
Organization: The Domain of Holomorphy
Sender: linux-kernel-owner@vger.kernel.org
X-Mailing-List: linux-kernel@vger.kernel.org


--0eh6TmSyL6TZE2Uz
Content-Type: text/plain; charset=us-ascii
Content-Description: brief message
Content-Disposition: inline

On Sat, Mar 15, 2003 at 12:24:31AM -0800, William Lee Irwin III wrote:
>> Next pass involves lockmeter:

On Sat, Mar 15, 2003 at 01:47:58AM -0800, William Lee Irwin III wrote:
> Throughput 39.2014 MB/sec 128 procs
> dbench 128  142.51s user 10828.91s system 964% cpu 18:57.88 total
> That's an 83% reduction in throughput from applying lockmeter.
> Um, somebody should look into this. The thing is a bloody doorstop:

Okay, dump_stack() every once in a while when we schedule() in down().

No good ideas how to script the results so I have the foggiest idea
who's the bad guy. gzipped and MIME attached (Sorry!) for space reasons.


-- wli

--0eh6TmSyL6TZE2Uz
Content-Type: application/octet-stream
Content-Description: sem.log.gz
Content-Disposition: attachment; filename="sem.log.gz"
Content-Transfer-Encoding: base64

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

--0eh6TmSyL6TZE2Uz--
