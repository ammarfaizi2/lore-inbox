Return-Path: <linux-kernel-owner+willy=40w.ods.org-S1751347AbWDKXYA@vger.kernel.org>
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S1751347AbWDKXYA (ORCPT <rfc822;willy@w.ods.org>);
	Tue, 11 Apr 2006 19:24:00 -0400
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S1751355AbWDKXYA
	(ORCPT <rfc822;linux-kernel-outgoing>);
	Tue, 11 Apr 2006 19:24:00 -0400
Received: from holly.csn.ul.ie ([193.1.99.76]:43690 "EHLO holly.csn.ul.ie")
	by vger.kernel.org with ESMTP id S1751347AbWDKXX7 (ORCPT
	<rfc822;linux-kernel@vger.kernel.org>);
	Tue, 11 Apr 2006 19:23:59 -0400
Date: Wed, 12 Apr 2006 00:23:45 +0100 (IST)
From: Mel Gorman <mel@skynet.ie>
To: "Luck, Tony" <tony.luck@intel.com>
Cc: linuxppc-dev@ozlabs.org, davej@codemonkey.org.uk,
       Linux Kernel Mailing List <linux-kernel@vger.kernel.org>, ak@suse.de
Subject: Re: [PATCH 0/6] [RFC] Sizing zones and holes in an architecture
 independent manner
In-Reply-To: <20060411222029.GA7743@agluck-lia64.sc.intel.com>
Message-ID: <Pine.LNX.4.64.0604112352230.6624@skynet.skynet.ie>
References: <20060411103946.18153.83059.sendpatchset@skynet>
 <20060411222029.GA7743@agluck-lia64.sc.intel.com>
MIME-Version: 1.0
Content-Type: MULTIPART/MIXED; BOUNDARY="29444707-1293766146-1144796725=:8991"
Content-ID: <Pine.LNX.4.64.0604120005320.8991@skynet.skynet.ie>
Sender: linux-kernel-owner@vger.kernel.org
X-Mailing-List: linux-kernel@vger.kernel.org

  This message is in MIME format.  The first part should be readable text,
  while the remaining parts are likely unreadable without MIME-aware tools.

--29444707-1293766146-1144796725=:8991
Content-Type: TEXT/PLAIN; CHARSET=US-ASCII; format=flowed
Content-ID: <Pine.LNX.4.64.0604120005321.8991@skynet.skynet.ie>

On Tue, 11 Apr 2006, Luck, Tony wrote:

> On Tue, Apr 11, 2006 at 11:39:46AM +0100, Mel Gorman wrote:
>
>> The patches have only been *compile tested* for ia64 with a flatmem
>> configuration. At attempt was made to boot test on an ancient RS/6000
>> but the vanilla kernel does not boot so I have to investigate there.
>
> The good news: Compilation is clean on the ia64 config variants that
> I usually build (all 10 of them).
>

One plus at least.

> The bad (or at least consistent) news: It doesn't boot on an Intel
> Tiger either (oops at kmem_cache_alloc+0x41).
>

Darn.

o Did it boot on other IA64 machines or was the Tiger the first boot failure?
o Possibly a stupid question but does the Tiger configuration use the
   flatmem memory model, sparsemem or discontig?

If it's flatmem, I noticed I made a stupid mistake where vmem_map is not 
getting set to (void *)0 for machines with small memory holes. Nothing 
else really obvious jumped out at me.

I've attached a patch called "105-ia64_use_init_nodes.patch". Can you 
reverse Patch 5/6 and apply this one instead please? I've also attached 
107-debug.diff that applies on top of patch 6/6. It just prints out 
debugging information during startup that may tell me where I went wrong 
in arch/ia64. I'd really appreciate it if you could use both patches, let 
me know if it still fails to boot and send me the console log of the 
machine starting up if it fails so I can make guesses as to what is going 
wrong.

Thanks a lot for trying the patches out on ia64. It was the one arch of 
the set I had no chance to test with at all :/

-- 
Mel Gorman
Part-time Phd Student                          Linux Technology Center
University of Limerick                         IBM Dublin Software Lab
--29444707-1293766146-1144796725=:8991
Content-Type: TEXT/PLAIN; CHARSET=US-ASCII; NAME=105-ia64_use_init_nodes.patch
Content-Transfer-Encoding: BASE64
Content-ID: <Pine.LNX.4.64.0604120005250.8991@skynet.skynet.ie>
Content-Description: 105-ia64_use_init_nodes.patch
Content-Disposition: ATTACHMENT; FILENAME=105-ia64_use_init_nodes.patch

ZGlmZiAtcnVwIC1YIC91c3Ivc3JjL3BhdGNoc2V0LTAuNS9iaW4vL2RvbnRk
aWZmIGxpbnV4LTIuNi4xNy1yYzEtMTA0LXg4Nl82NF91c2VfaW5pdF9ub2Rl
cy9hcmNoL2lhNjQvS2NvbmZpZyBsaW51eC0yLjYuMTctcmMxLTEwNS1pYTY0
X3VzZV9pbml0X25vZGVzL2FyY2gvaWE2NC9LY29uZmlnDQotLS0gbGludXgt
Mi42LjE3LXJjMS0xMDQteDg2XzY0X3VzZV9pbml0X25vZGVzL2FyY2gvaWE2
NC9LY29uZmlnCTIwMDYtMDQtMDMgMDQ6MjI6MTAuMDAwMDAwMDAwICswMTAw
DQorKysgbGludXgtMi42LjE3LXJjMS0xMDUtaWE2NF91c2VfaW5pdF9ub2Rl
cy9hcmNoL2lhNjQvS2NvbmZpZwkyMDA2LTA0LTExIDIzOjMxOjM4LjAwMDAw
MDAwMCArMDEwMA0KQEAgLTM1Miw2ICszNTIsOSBAQCBjb25maWcgTlVNQQ0K
IAkgIEFjY2VzcykuICBUaGlzIG9wdGlvbiBpcyBmb3IgY29uZmlndXJpbmcg
aGlnaC1lbmQgbXVsdGlwcm9jZXNzb3INCiAJICBzZXJ2ZXIgc3lzdGVtcy4g
IElmIGluIGRvdWJ0LCBzYXkgTi4NCiANCitjb25maWcgQVJDSF9QT1BVTEFU
RVNfTk9ERV9NQVANCisJZGVmX2Jvb2wgeQ0KKw0KICMgVklSVFVBTF9NRU1f
TUFQIGFuZCBGTEFUX05PREVfTUVNX01BUCBhcmUgZnVuY3Rpb25hbGx5IGVx
dWl2YWxlbnQuDQogIyBWSVJUVUFMX01FTV9NQVAgaGFzIGJlZW4gcmV0YWlu
ZWQgZm9yIGhpc3RvcmljYWwgcmVhc29ucy4NCiBjb25maWcgVklSVFVBTF9N
RU1fTUFQDQpkaWZmIC1ydXAgLVggL3Vzci9zcmMvcGF0Y2hzZXQtMC41L2Jp
bi8vZG9udGRpZmYgbGludXgtMi42LjE3LXJjMS0xMDQteDg2XzY0X3VzZV9p
bml0X25vZGVzL2FyY2gvaWE2NC9tbS9jb250aWcuYyBsaW51eC0yLjYuMTct
cmMxLTEwNS1pYTY0X3VzZV9pbml0X25vZGVzL2FyY2gvaWE2NC9tbS9jb250
aWcuYw0KLS0tIGxpbnV4LTIuNi4xNy1yYzEtMTA0LXg4Nl82NF91c2VfaW5p
dF9ub2Rlcy9hcmNoL2lhNjQvbW0vY29udGlnLmMJMjAwNi0wNC0wMyAwNDoy
MjoxMC4wMDAwMDAwMDAgKzAxMDANCisrKyBsaW51eC0yLjYuMTctcmMxLTEw
NS1pYTY0X3VzZV9pbml0X25vZGVzL2FyY2gvaWE2NC9tbS9jb250aWcuYwky
MDA2LTA0LTExIDIzOjU2OjQ1LjAwMDAwMDAwMCArMDEwMA0KQEAgLTI2LDEw
ICsyNiw2IEBADQogI2luY2x1ZGUgPGFzbS9zZWN0aW9ucy5oPg0KICNpbmNs
dWRlIDxhc20vbWNhLmg+DQogDQotI2lmZGVmIENPTkZJR19WSVJUVUFMX01F
TV9NQVANCi1zdGF0aWMgdW5zaWduZWQgbG9uZyBudW1fZG1hX3BoeXNwYWdl
czsNCi0jZW5kaWYNCi0NCiAvKioNCiAgKiBzaG93X21lbSAtIGRpc3BsYXkg
YSBtZW1vcnkgc3RhdGlzdGljcyBzdW1tYXJ5DQogICoNCkBAIC0yMTIsMTgg
KzIwOCw2IEBAIGNvdW50X3BhZ2VzICh1NjQgc3RhcnQsIHU2NCBlbmQsIHZv
aWQgKmENCiAJcmV0dXJuIDA7DQogfQ0KIA0KLSNpZmRlZiBDT05GSUdfVklS
VFVBTF9NRU1fTUFQDQotc3RhdGljIGludA0KLWNvdW50X2RtYV9wYWdlcyAo
dTY0IHN0YXJ0LCB1NjQgZW5kLCB2b2lkICphcmcpDQotew0KLQl1bnNpZ25l
ZCBsb25nICpjb3VudCA9IGFyZzsNCi0NCi0JaWYgKHN0YXJ0IDwgTUFYX0RN
QV9BRERSRVNTKQ0KLQkJKmNvdW50ICs9IChtaW4oZW5kLCBNQVhfRE1BX0FE
RFJFU1MpIC0gc3RhcnQpID4+IFBBR0VfU0hJRlQ7DQotCXJldHVybiAwOw0K
LX0NCi0jZW5kaWYNCi0NCiAvKg0KICAqIFNldCB1cCB0aGUgcGFnZSB0YWJs
ZXMuDQogICovDQpAQCAtMjMyLDQ3ICsyMTYsMjQgQEAgdm9pZCBfX2luaXQN
CiBwYWdpbmdfaW5pdCAodm9pZCkNCiB7DQogCXVuc2lnbmVkIGxvbmcgbWF4
X2RtYTsNCi0JdW5zaWduZWQgbG9uZyB6b25lc19zaXplW01BWF9OUl9aT05F
U107DQogI2lmZGVmIENPTkZJR19WSVJUVUFMX01FTV9NQVANCi0JdW5zaWdu
ZWQgbG9uZyB6aG9sZXNfc2l6ZVtNQVhfTlJfWk9ORVNdOw0KKwl1bnNpZ25l
ZCBsb25nIG5pZCA9IDA7DQogCXVuc2lnbmVkIGxvbmcgbWF4X2dhcDsNCiAj
ZW5kaWYNCiANCi0JLyogaW5pdGlhbGl6ZSBtZW1fbWFwW10gKi8NCi0NCi0J
bWVtc2V0KHpvbmVzX3NpemUsIDAsIHNpemVvZih6b25lc19zaXplKSk7DQot
DQogCW51bV9waHlzcGFnZXMgPSAwOw0KIAllZmlfbWVtbWFwX3dhbGsoY291
bnRfcGFnZXMsICZudW1fcGh5c3BhZ2VzKTsNCiANCiAJbWF4X2RtYSA9IHZp
cnRfdG9fcGh5cygodm9pZCAqKSBNQVhfRE1BX0FERFJFU1MpID4+IFBBR0Vf
U0hJRlQ7DQogDQogI2lmZGVmIENPTkZJR19WSVJUVUFMX01FTV9NQVANCi0J
bWVtc2V0KHpob2xlc19zaXplLCAwLCBzaXplb2YoemhvbGVzX3NpemUpKTsN
Ci0NCi0JbnVtX2RtYV9waHlzcGFnZXMgPSAwOw0KLQllZmlfbWVtbWFwX3dh
bGsoY291bnRfZG1hX3BhZ2VzLCAmbnVtX2RtYV9waHlzcGFnZXMpOw0KLQ0K
LQlpZiAobWF4X2xvd19wZm4gPCBtYXhfZG1hKSB7DQotCQl6b25lc19zaXpl
W1pPTkVfRE1BXSA9IG1heF9sb3dfcGZuOw0KLQkJemhvbGVzX3NpemVbWk9O
RV9ETUFdID0gbWF4X2xvd19wZm4gLSBudW1fZG1hX3BoeXNwYWdlczsNCi0J
fSBlbHNlIHsNCi0JCXpvbmVzX3NpemVbWk9ORV9ETUFdID0gbWF4X2RtYTsN
Ci0JCXpob2xlc19zaXplW1pPTkVfRE1BXSA9IG1heF9kbWEgLSBudW1fZG1h
X3BoeXNwYWdlczsNCi0JCWlmIChudW1fcGh5c3BhZ2VzID4gbnVtX2RtYV9w
aHlzcGFnZXMpIHsNCi0JCQl6b25lc19zaXplW1pPTkVfTk9STUFMXSA9IG1h
eF9sb3dfcGZuIC0gbWF4X2RtYTsNCi0JCQl6aG9sZXNfc2l6ZVtaT05FX05P
Uk1BTF0gPQ0KLQkJCQkoKG1heF9sb3dfcGZuIC0gbWF4X2RtYSkgLQ0KLQkJ
CQkgKG51bV9waHlzcGFnZXMgLSBudW1fZG1hX3BoeXNwYWdlcykpOw0KLQkJ
fQ0KLQl9DQotDQogCW1heF9nYXAgPSAwOw0KKwllZmlfbWVtbWFwX3dhbGso
cmVnaXN0ZXJfYWN0aXZlX3JhbmdlcywgJm5pZCk7DQogCWVmaV9tZW1tYXBf
d2FsayhmaW5kX2xhcmdlc3RfaG9sZSwgKHU2NCAqKSZtYXhfZ2FwKTsNCiAJ
aWYgKG1heF9nYXAgPCBMQVJHRV9HQVApIHsNCiAJCXZtZW1fbWFwID0gKHN0
cnVjdCBwYWdlICopIDA7DQotCQlmcmVlX2FyZWFfaW5pdF9ub2RlKDAsIE5P
REVfREFUQSgwKSwgem9uZXNfc2l6ZSwgMCwNCi0JCQkJICAgIHpob2xlc19z
aXplKTsNCisJCWZyZWVfYXJlYV9pbml0X25vZGVzKG1heF9kbWEsIG1heF9k
bWEsDQorCQkJCW1heF9sb3dfcGZuLCBtYXhfbG93X3Bmbik7DQogCX0gZWxz
ZSB7DQogCQl1bnNpZ25lZCBsb25nIG1hcF9zaXplOw0KIA0KQEAgLTI4NCwx
OSArMjQ1LDE0IEBAIHBhZ2luZ19pbml0ICh2b2lkKQ0KIAkJZWZpX21lbW1h
cF93YWxrKGNyZWF0ZV9tZW1fbWFwX3BhZ2VfdGFibGUsIE5VTEwpOw0KIA0K
IAkJTk9ERV9EQVRBKDApLT5ub2RlX21lbV9tYXAgPSB2bWVtX21hcDsNCi0J
CWZyZWVfYXJlYV9pbml0X25vZGUoMCwgTk9ERV9EQVRBKDApLCB6b25lc19z
aXplLA0KLQkJCQkgICAgMCwgemhvbGVzX3NpemUpOw0KKwkJZnJlZV9hcmVh
X2luaXRfbm9kZXMobWF4X2RtYSwgbWF4X2RtYSwNCisJCQkJbWF4X2xvd19w
Zm4sIG1heF9sb3dfcGZuKTsNCiANCiAJCXByaW50aygiVmlydHVhbCBtZW1f
bWFwIHN0YXJ0cyBhdCAweCVwXG4iLCBtZW1fbWFwKTsNCiAJfQ0KICNlbHNl
IC8qICFDT05GSUdfVklSVFVBTF9NRU1fTUFQICovDQotCWlmIChtYXhfbG93
X3BmbiA8IG1heF9kbWEpDQotCQl6b25lc19zaXplW1pPTkVfRE1BXSA9IG1h
eF9sb3dfcGZuOw0KLQllbHNlIHsNCi0JCXpvbmVzX3NpemVbWk9ORV9ETUFd
ID0gbWF4X2RtYTsNCi0JCXpvbmVzX3NpemVbWk9ORV9OT1JNQUxdID0gbWF4
X2xvd19wZm4gLSBtYXhfZG1hOw0KLQl9DQotCWZyZWVfYXJlYV9pbml0KHpv
bmVzX3NpemUpOw0KKwlhZGRfYWN0aXZlX3JhbmdlKDAsIDAsIG1heF9sb3df
cGZuKTsNCisJZnJlZV9hcmVhX2luaXRfbm9kZXMobWF4X2RtYSwgbWF4X2Rt
YSwgbWF4X2xvd19wZm4sIG1heF9sb3dfcGZuKTsNCiAjZW5kaWYgLyogIUNP
TkZJR19WSVJUVUFMX01FTV9NQVAgKi8NCiAJemVyb19wYWdlX21lbW1hcF9w
dHIgPSB2aXJ0X3RvX3BhZ2UoaWE2NF9pbXZhKGVtcHR5X3plcm9fcGFnZSkp
Ow0KIH0NCmRpZmYgLXJ1cCAtWCAvdXNyL3NyYy9wYXRjaHNldC0wLjUvYmlu
Ly9kb250ZGlmZiBsaW51eC0yLjYuMTctcmMxLTEwNC14ODZfNjRfdXNlX2lu
aXRfbm9kZXMvYXJjaC9pYTY0L21tL2Rpc2NvbnRpZy5jIGxpbnV4LTIuNi4x
Ny1yYzEtMTA1LWlhNjRfdXNlX2luaXRfbm9kZXMvYXJjaC9pYTY0L21tL2Rp
c2NvbnRpZy5jDQotLS0gbGludXgtMi42LjE3LXJjMS0xMDQteDg2XzY0X3Vz
ZV9pbml0X25vZGVzL2FyY2gvaWE2NC9tbS9kaXNjb250aWcuYwkyMDA2LTA0
LTAzIDA0OjIyOjEwLjAwMDAwMDAwMCArMDEwMA0KKysrIGxpbnV4LTIuNi4x
Ny1yYzEtMTA1LWlhNjRfdXNlX2luaXRfbm9kZXMvYXJjaC9pYTY0L21tL2Rp
c2NvbnRpZy5jCTIwMDYtMDQtMTEgMjM6NTQ6MDYuMDAwMDAwMDAwICswMTAw
DQpAQCAtODcsNiArODcsNyBAQCBzdGF0aWMgaW50IF9faW5pdCBidWlsZF9u
b2RlX21hcHModW5zaWduDQogDQogCW1pbl9sb3dfcGZuID0gbWluKG1pbl9s
b3dfcGZuLCBiZHAtPm5vZGVfYm9vdF9zdGFydD4+UEFHRV9TSElGVCk7DQog
CW1heF9sb3dfcGZuID0gbWF4KG1heF9sb3dfcGZuLCBiZHAtPm5vZGVfbG93
X3Bmbik7DQorCWFkZF9hY3RpdmVfcmFuZ2Uobm9kZSwgc3RhcnQsIGVuZCk7
DQogDQogCXJldHVybiAwOw0KIH0NCkBAIC02NjAsOSArNjYxLDggQEAgc3Rh
dGljIF9faW5pdCBpbnQgY291bnRfbm9kZV9wYWdlcyh1bnNpZw0KIHZvaWQg
X19pbml0IHBhZ2luZ19pbml0KHZvaWQpDQogew0KIAl1bnNpZ25lZCBsb25n
IG1heF9kbWE7DQotCXVuc2lnbmVkIGxvbmcgem9uZXNfc2l6ZVtNQVhfTlJf
Wk9ORVNdOw0KLQl1bnNpZ25lZCBsb25nIHpob2xlc19zaXplW01BWF9OUl9a
T05FU107DQogCXVuc2lnbmVkIGxvbmcgcGZuX29mZnNldCA9IDA7DQorCXVu
c2lnbmVkIGxvbmcgbWF4X3BmbiA9IDA7DQogCWludCBub2RlOw0KIA0KIAlt
YXhfZG1hID0gdmlydF90b19waHlzKCh2b2lkICopIE1BWF9ETUFfQUREUkVT
UykgPj4gUEFHRV9TSElGVDsNCkBAIC02NzksNDYgKzY3OSwxNyBAQCB2b2lk
IF9faW5pdCBwYWdpbmdfaW5pdCh2b2lkKQ0KICNlbmRpZg0KIA0KIAlmb3Jf
ZWFjaF9vbmxpbmVfbm9kZShub2RlKSB7DQotCQltZW1zZXQoem9uZXNfc2l6
ZSwgMCwgc2l6ZW9mKHpvbmVzX3NpemUpKTsNCi0JCW1lbXNldCh6aG9sZXNf
c2l6ZSwgMCwgc2l6ZW9mKHpob2xlc19zaXplKSk7DQotDQogCQludW1fcGh5
c3BhZ2VzICs9IG1lbV9kYXRhW25vZGVdLm51bV9waHlzcGFnZXM7DQotDQot
CQlpZiAobWVtX2RhdGFbbm9kZV0ubWluX3BmbiA+PSBtYXhfZG1hKSB7DQot
CQkJLyogQWxsIG9mIHRoaXMgbm9kZSdzIG1lbW9yeSBpcyBhYm92ZSBaT05F
X0RNQSAqLw0KLQkJCXpvbmVzX3NpemVbWk9ORV9OT1JNQUxdID0gbWVtX2Rh
dGFbbm9kZV0ubWF4X3BmbiAtDQotCQkJCW1lbV9kYXRhW25vZGVdLm1pbl9w
Zm47DQotCQkJemhvbGVzX3NpemVbWk9ORV9OT1JNQUxdID0gbWVtX2RhdGFb
bm9kZV0ubWF4X3BmbiAtDQotCQkJCW1lbV9kYXRhW25vZGVdLm1pbl9wZm4g
LQ0KLQkJCQltZW1fZGF0YVtub2RlXS5udW1fcGh5c3BhZ2VzOw0KLQkJfSBl
bHNlIGlmIChtZW1fZGF0YVtub2RlXS5tYXhfcGZuIDwgbWF4X2RtYSkgew0K
LQkJCS8qIEFsbCBvZiB0aGlzIG5vZGUncyBtZW1vcnkgaXMgaW4gWk9ORV9E
TUEgKi8NCi0JCQl6b25lc19zaXplW1pPTkVfRE1BXSA9IG1lbV9kYXRhW25v
ZGVdLm1heF9wZm4gLQ0KLQkJCQltZW1fZGF0YVtub2RlXS5taW5fcGZuOw0K
LQkJCXpob2xlc19zaXplW1pPTkVfRE1BXSA9IG1lbV9kYXRhW25vZGVdLm1h
eF9wZm4gLQ0KLQkJCQltZW1fZGF0YVtub2RlXS5taW5fcGZuIC0NCi0JCQkJ
bWVtX2RhdGFbbm9kZV0ubnVtX2RtYV9waHlzcGFnZXM7DQotCQl9IGVsc2Ug
ew0KLQkJCS8qIFRoaXMgbm9kZSBoYXMgbWVtb3J5IGluIGJvdGggem9uZXMg
Ki8NCi0JCQl6b25lc19zaXplW1pPTkVfRE1BXSA9IG1heF9kbWEgLQ0KLQkJ
CQltZW1fZGF0YVtub2RlXS5taW5fcGZuOw0KLQkJCXpob2xlc19zaXplW1pP
TkVfRE1BXSA9IHpvbmVzX3NpemVbWk9ORV9ETUFdIC0NCi0JCQkJbWVtX2Rh
dGFbbm9kZV0ubnVtX2RtYV9waHlzcGFnZXM7DQotCQkJem9uZXNfc2l6ZVta
T05FX05PUk1BTF0gPSBtZW1fZGF0YVtub2RlXS5tYXhfcGZuIC0NCi0JCQkJ
bWF4X2RtYTsNCi0JCQl6aG9sZXNfc2l6ZVtaT05FX05PUk1BTF0gPSB6b25l
c19zaXplW1pPTkVfTk9STUFMXSAtDQotCQkJCShtZW1fZGF0YVtub2RlXS5u
dW1fcGh5c3BhZ2VzIC0NCi0JCQkJIG1lbV9kYXRhW25vZGVdLm51bV9kbWFf
cGh5c3BhZ2VzKTsNCi0JCX0NCi0NCiAJCXBmbl9vZmZzZXQgPSBtZW1fZGF0
YVtub2RlXS5taW5fcGZuOw0KIA0KICNpZmRlZiBDT05GSUdfVklSVFVBTF9N
RU1fTUFQDQogCQlOT0RFX0RBVEEobm9kZSktPm5vZGVfbWVtX21hcCA9IHZt
ZW1fbWFwICsgcGZuX29mZnNldDsNCiAjZW5kaWYNCi0JCWZyZWVfYXJlYV9p
bml0X25vZGUobm9kZSwgTk9ERV9EQVRBKG5vZGUpLCB6b25lc19zaXplLA0K
LQkJCQkgICAgcGZuX29mZnNldCwgemhvbGVzX3NpemUpOw0KKwkJaWYgKG1l
bV9kYXRhW25vZGVdLm1heF9wZm4gPiBtYXhfcGZuKQ0KKwkJCW1heF9wZm4g
PSBtZW1fZGF0YVtub2RlXS5tYXhfcGZuOw0KIAl9DQogDQorCWZyZWVfYXJl
YV9pbml0X25vZGVzKG1heF9kbWEsIG1heF9kbWEsIG1heF9wZm4sIG1heF9w
Zm4pOw0KKwkNCiAJemVyb19wYWdlX21lbW1hcF9wdHIgPSB2aXJ0X3RvX3Bh
Z2UoaWE2NF9pbXZhKGVtcHR5X3plcm9fcGFnZSkpOw0KIH0NCmRpZmYgLXJ1
cCAtWCAvdXNyL3NyYy9wYXRjaHNldC0wLjUvYmluLy9kb250ZGlmZiBsaW51
eC0yLjYuMTctcmMxLTEwNC14ODZfNjRfdXNlX2luaXRfbm9kZXMvYXJjaC9p
YTY0L21tL2luaXQuYyBsaW51eC0yLjYuMTctcmMxLTEwNS1pYTY0X3VzZV9p
bml0X25vZGVzL2FyY2gvaWE2NC9tbS9pbml0LmMNCi0tLSBsaW51eC0yLjYu
MTctcmMxLTEwNC14ODZfNjRfdXNlX2luaXRfbm9kZXMvYXJjaC9pYTY0L21t
L2luaXQuYwkyMDA2LTA0LTAzIDA0OjIyOjEwLjAwMDAwMDAwMCArMDEwMA0K
KysrIGxpbnV4LTIuNi4xNy1yYzEtMTA1LWlhNjRfdXNlX2luaXRfbm9kZXMv
YXJjaC9pYTY0L21tL2luaXQuYwkyMDA2LTA0LTExIDIzOjQwOjE1LjAwMDAw
MDAwMCArMDEwMA0KQEAgLTUzOSw2ICs1MzksMTYgQEAgZmluZF9sYXJnZXN0
X2hvbGUgKHU2NCBzdGFydCwgdTY0IGVuZCwgdg0KIAlsYXN0X2VuZCA9IGVu
ZDsNCiAJcmV0dXJuIDA7DQogfQ0KKw0KK2ludCBfX2luaXQNCityZWdpc3Rl
cl9hY3RpdmVfcmFuZ2VzKHU2NCBzdGFydCwgdTY0IGVuZCwgdm9pZCAqbmlk
KQ0KK3sNCisJQlVHX09OKG5pZCA9PSBOVUxMKTsNCisJQlVHX09OKCoodW5z
aWduZWQgbG9uZyAqKW5pZCA+PSBNQVhfTlVNTk9ERVMpOw0KKw0KKwlhZGRf
YWN0aXZlX3JhbmdlKCoodW5zaWduZWQgbG9uZyAqKW5pZCwgc3RhcnQsIGVu
ZCk7DQorCXJldHVybiAwOw0KK30NCiAjZW5kaWYgLyogQ09ORklHX1ZJUlRV
QUxfTUVNX01BUCAqLw0KIA0KIHN0YXRpYyBpbnQgX19pbml0DQpkaWZmIC1y
dXAgLVggL3Vzci9zcmMvcGF0Y2hzZXQtMC41L2Jpbi8vZG9udGRpZmYgbGlu
dXgtMi42LjE3LXJjMS0xMDQteDg2XzY0X3VzZV9pbml0X25vZGVzL2luY2x1
ZGUvYXNtLWlhNjQvbWVtaW5pdC5oIGxpbnV4LTIuNi4xNy1yYzEtMTA1LWlh
NjRfdXNlX2luaXRfbm9kZXMvaW5jbHVkZS9hc20taWE2NC9tZW1pbml0LmgN
Ci0tLSBsaW51eC0yLjYuMTctcmMxLTEwNC14ODZfNjRfdXNlX2luaXRfbm9k
ZXMvaW5jbHVkZS9hc20taWE2NC9tZW1pbml0LmgJMjAwNi0wNC0wMyAwNDoy
MjoxMC4wMDAwMDAwMDAgKzAxMDANCisrKyBsaW51eC0yLjYuMTctcmMxLTEw
NS1pYTY0X3VzZV9pbml0X25vZGVzL2luY2x1ZGUvYXNtLWlhNjQvbWVtaW5p
dC5oCTIwMDYtMDQtMTEgMjM6MzQ6NTguMDAwMDAwMDAwICswMTAwDQpAQCAt
NTYsNiArNTYsNyBAQCBleHRlcm4gdm9pZCBlZmlfbWVtbWFwX2luaXQodW5z
aWduZWQgbG9uDQogICBleHRlcm4gdW5zaWduZWQgbG9uZyB2bWFsbG9jX2Vu
ZDsNCiAgIGV4dGVybiBzdHJ1Y3QgcGFnZSAqdm1lbV9tYXA7DQogICBleHRl
cm4gaW50IGZpbmRfbGFyZ2VzdF9ob2xlICh1NjQgc3RhcnQsIHU2NCBlbmQs
IHZvaWQgKmFyZyk7DQorICBleHRlcm4gaW50IHJlZ2lzdGVyX2FjdGl2ZV9y
YW5nZXMgKHU2NCBzdGFydCwgdTY0IGVuZCwgdm9pZCAqYXJnKTsNCiAgIGV4
dGVybiBpbnQgY3JlYXRlX21lbV9tYXBfcGFnZV90YWJsZSAodTY0IHN0YXJ0
LCB1NjQgZW5kLCB2b2lkICphcmcpOw0KICNlbmRpZg0KIA0K

--29444707-1293766146-1144796725=:8991
Content-Type: TEXT/PLAIN; CHARSET=US-ASCII; NAME=107-debug.diff
Content-Transfer-Encoding: BASE64
Content-ID: <Pine.LNX.4.64.0604120005251.8991@skynet.skynet.ie>
Content-Description: 107-debug.diff
Content-Disposition: ATTACHMENT; FILENAME=107-debug.diff

ZGlmZiAtcnVwIC1YIC91c3Ivc3JjL3BhdGNoc2V0LTAuNS9iaW4vL2RvbnRk
aWZmIGxpbnV4LTIuNi4xNy1yYzEtMTA2LWJyZWFrb3V0X21lbV9pbml0L21t
L21lbV9pbml0LmMgbGludXgtMi42LjE3LXJjMS0xMDctZGVidWcvbW0vbWVt
X2luaXQuYw0KLS0tIGxpbnV4LTIuNi4xNy1yYzEtMTA2LWJyZWFrb3V0X21l
bV9pbml0L21tL21lbV9pbml0LmMJMjAwNi0wNC0xMSAyMzo0OTo1Mi4wMDAw
MDAwMDAgKzAxMDANCisrKyBsaW51eC0yLjYuMTctcmMxLTEwNy1kZWJ1Zy9t
bS9tZW1faW5pdC5jCTIwMDYtMDQtMTEgMjM6NTI6MDAuMDAwMDAwMDAwICsw
MTAwDQpAQCAtNjQ1LDEzICs2NDUsMjMgQEAgdm9pZCBfX2luaXQgZnJlZV9i
b290bWVtX3dpdGhfYWN0aXZlX3JlZw0KIAlmb3JfZWFjaF9hY3RpdmVfcmFu
Z2VfaW5kZXhfaW5fbmlkKGksIG5pZCkgew0KIAkJdW5zaWduZWQgbG9uZyBz
aXplX3BhZ2VzID0gMDsNCiAJCXVuc2lnbmVkIGxvbmcgZW5kX3BmbiA9IGVh
cmx5X25vZGVfbWFwW2ldLmVuZF9wZm47DQotCQlpZiAoZWFybHlfbm9kZV9t
YXBbaV0uc3RhcnRfcGZuID49IG1heF9sb3dfcGZuKQ0KKwkJaWYgKGVhcmx5
X25vZGVfbWFwW2ldLnN0YXJ0X3BmbiA+PSBtYXhfbG93X3Bmbikgew0KKwkJ
CXByaW50aygic3RhcnRfcGZuICVsdSA+PSAlbHVcbiIsIGVhcmx5X25vZGVf
bWFwW2ldLnN0YXJ0X3BmbiwNCisJCQkJCQkJCW1heF9sb3dfcGZuKTsNCiAJ
CQljb250aW51ZTsNCisJCX0NCiANCi0JCWlmIChlbmRfcGZuID4gbWF4X2xv
d19wZm4pDQorCQlpZiAoZW5kX3BmbiA+IG1heF9sb3dfcGZuKSB7DQorCQkJ
cHJpbnRrKCJlbmRfcGZuICVsdSBnb2luZyBiYWNrIHRvICVsdVxuIiwgZWFy
bHlfbm9kZV9tYXBbaV0uZW5kX3BmbiwNCisJCQkJCQkJCQltYXhfbG93X3Bm
bik7DQogCQkJZW5kX3BmbiA9IG1heF9sb3dfcGZuOw0KKwkJfQ0KIA0KIAkJ
c2l6ZV9wYWdlcyA9IGVuZF9wZm4gLSBlYXJseV9ub2RlX21hcFtpXS5zdGFy
dF9wZm47DQorCQlwcmludGsoImZyZWVfYm9vdG1lbV9ub2RlKCVkLCAlbHUs
ICVsdSlcbiIsDQorCQkJCWVhcmx5X25vZGVfbWFwW2ldLm5pZCwNCisJCQkJ
UEZOX1BIWVMoZWFybHlfbm9kZV9tYXBbaV0uc3RhcnRfcGZuKSwNCisJCQkJ
UEZOX1BIWVMoc2l6ZV9wYWdlcykpOw0KIAkJZnJlZV9ib290bWVtX25vZGUo
Tk9ERV9EQVRBKGVhcmx5X25vZGVfbWFwW2ldLm5pZCksDQogCQkJCVBGTl9Q
SFlTKGVhcmx5X25vZGVfbWFwW2ldLnN0YXJ0X3BmbiksDQogCQkJCVBGTl9Q
SFlTKHNpemVfcGFnZXMpKTsNCkBAIC02NjEsMTAgKzY3MSwxNSBAQCB2b2lk
IF9faW5pdCBmcmVlX2Jvb3RtZW1fd2l0aF9hY3RpdmVfcmVnDQogdm9pZCBf
X2luaXQgbWVtb3J5X3ByZXNlbnRfd2l0aF9hY3RpdmVfcmVnaW9ucyhpbnQg
bmlkKQ0KIHsNCiAJdW5zaWduZWQgaW50IGk7DQotCWZvcl9lYWNoX2FjdGl2
ZV9yYW5nZV9pbmRleF9pbl9uaWQoaSwgbmlkKQ0KKwlmb3JfZWFjaF9hY3Rp
dmVfcmFuZ2VfaW5kZXhfaW5fbmlkKGksIG5pZCkgew0KKwkJcHJpbnRrKCJt
ZW1vcnlfcHJlc2VudCglZCwgJWx1LCAlbHUpXG4iLA0KKwkJCWVhcmx5X25v
ZGVfbWFwW2ldLm5pZCwNCisJCQllYXJseV9ub2RlX21hcFtpXS5zdGFydF9w
Zm4sDQorCQkJZWFybHlfbm9kZV9tYXBbaV0uZW5kX3Bmbik7DQogCQltZW1v
cnlfcHJlc2VudChlYXJseV9ub2RlX21hcFtpXS5uaWQsDQogCQkJCWVhcmx5
X25vZGVfbWFwW2ldLnN0YXJ0X3BmbiwNCiAJCQkJZWFybHlfbm9kZV9tYXBb
aV0uZW5kX3Bmbik7DQorCX0NCiB9DQogDQogdm9pZCBfX2luaXQgZ2V0X3Bm
bl9yYW5nZV9mb3JfbmlkKHVuc2lnbmVkIGludCBuaWQsDQpAQCAtNzUyLDgg
Kzc2NywxNiBAQCB1bnNpZ25lZCBsb25nIF9faW5pdCB6b25lX2Fic2VudF9w
YWdlc19pDQogCQkvKiBJbmNyZWFzZSB0aGUgaG9sZSBzaXplIGlmIHRoZSBo
b2xlIGlzIHdpdGhpbiB0aGUgem9uZSAqLw0KIAkJc3RhcnRfcGZuID0gZWFy
bHlfbm9kZV9tYXBbaV0uc3RhcnRfcGZuOw0KIAkJaWYgKHBmbl9yYW5nZV9p
bl96b25lKHByZXZfZW5kX3Bmbiwgc3RhcnRfcGZuLCB6b25lX3R5cGUpKSB7
DQotCQkJQlVHX09OKHByZXZfZW5kX3BmbiA+IHN0YXJ0X3Bmbik7DQorCQkJ
aWYgKHByZXZfZW5kX3BmbiA+IHN0YXJ0X3Bmbikgew0KKwkJCQlwcmludGso
InByZXZfZW5kID4gc3RhcnRfcGZuIDogJWx1ID4gJWx1XG4iLA0KKwkJCQkJ
CXByZXZfZW5kX3BmbiwNCisJCQkJCQlzdGFydF9wZm4pOw0KKwkJCQlCVUco
KTsNCisJCQl9DQorCQkJLy9CVUdfT04ocHJldl9lbmRfcGZuID4gc3RhcnRf
cGZuKTsNCiAJCQlob2xlX3BhZ2VzICs9IHN0YXJ0X3BmbiAtIHByZXZfZW5k
X3BmbjsNCisJCQlwcmludGsoIkhvbGUgZm91bmQgaW5kZXggJWQ6ICVsdSAt
PiAlbHVcbiIsDQorCQkJCQlpLCBwcmV2X2VuZF9wZm4sIHN0YXJ0X3Bmbik7
DQogCQl9DQogDQogCQlwcmV2X2VuZF9wZm4gPSBlYXJseV9ub2RlX21hcFtp
XS5lbmRfcGZuOw0KQEAgLTkwNywxNyArOTMwLDIxIEBAIHZvaWQgX19pbml0
IGFkZF9hY3RpdmVfcmFuZ2UodW5zaWduZWQgaW4NCiAJdW5zaWduZWQgaW50
IGk7DQogCXVuc2lnbmVkIGxvbmcgcGFnZXMgPSBlbmRfcGZuIC0gc3RhcnRf
cGZuOw0KIA0KKwlwcmludGsoImFkZF9hY3RpdmVfcmFuZ2UoJWQsICVsdSwg
JWx1KTogIiwNCisJCQluaWQsIHN0YXJ0X3BmbiwgZW5kX3Bmbik7DQogCS8q
IE1lcmdlIHdpdGggZXhpc3RpbmcgYWN0aXZlIHJlZ2lvbnMgaWYgcG9zc2li
bGUgKi8NCiAJZm9yIChpID0gMDsgZWFybHlfbm9kZV9tYXBbaV0uZW5kX3Bm
bjsgaSsrKSB7DQogCQlpZiAoZWFybHlfbm9kZV9tYXBbaV0ubmlkICE9IG5p
ZCkNCiAJCQljb250aW51ZTsNCiANCiAJCWlmIChlYXJseV9ub2RlX21hcFtp
XS5lbmRfcGZuID09IHN0YXJ0X3Bmbikgew0KKwkJCXByaW50aygiTWVyZ2lu
ZyBmb3J3YXJkXG4iKTsNCiAJCQllYXJseV9ub2RlX21hcFtpXS5lbmRfcGZu
ICs9IHBhZ2VzOw0KIAkJCXJldHVybjsNCiAJCX0NCiANCiAJCWlmIChlYXJs
eV9ub2RlX21hcFtpXS5zdGFydF9wZm4gPT0gKHN0YXJ0X3BmbiArIHBhZ2Vz
KSkgew0KKwkJCXByaW50aygiTWVyZ2luZyBiYWNrd2FyZHNcbiIpOw0KIAkJ
CWVhcmx5X25vZGVfbWFwW2ldLnN0YXJ0X3BmbiAtPSBwYWdlczsNCiAJCQly
ZXR1cm47DQogCQl9DQpAQCAtOTMzLDYgKzk2MCw3IEBAIHZvaWQgX19pbml0
IGFkZF9hY3RpdmVfcmFuZ2UodW5zaWduZWQgaW4NCiAJCXJldHVybjsNCiAJ
fQ0KIA0KKwlwcmludGsoIk5ld1xuIik7DQogCWVhcmx5X25vZGVfbWFwW2ld
Lm5pZCA9IG5pZDsNCiAJZWFybHlfbm9kZV9tYXBbaV0uc3RhcnRfcGZuID0g
c3RhcnRfcGZuOw0KIAllYXJseV9ub2RlX21hcFtpXS5lbmRfcGZuID0gZW5k
X3BmbjsNCkBAIC05NjIsNiArOTkwLDE0IEBAIHN0YXRpYyB2b2lkIF9faW5p
dCBzb3J0X25vZGVfbWFwKHZvaWQpDQogDQogCXNvcnQoZWFybHlfbm9kZV9t
YXAsIG51bSwgc2l6ZW9mKHN0cnVjdCBub2RlX2FjdGl2ZV9yZWdpb24pLA0K
IAkJCQkJCWNtcF9ub2RlX2FjdGl2ZV9yZWdpb24sIE5VTEwpOw0KKw0KKwlw
cmludGsoIkR1bXBpbmcgc29ydGVkIG5vZGUgbWFwXG4iKTsNCisJZm9yIChu
dW0gPSAwOyBlYXJseV9ub2RlX21hcFtudW1dLmVuZF9wZm47IG51bSsrKSB7
DQorCQlwcmludGsoImVudHJ5ICVsdTogJWQgICVsdSAtPiAlbHVcbiIsIG51
bSwNCisJCQkJZWFybHlfbm9kZV9tYXBbbnVtXS5uaWQsDQorCQkJCWVhcmx5
X25vZGVfbWFwW251bV0uc3RhcnRfcGZuLA0KKwkJCQllYXJseV9ub2RlX21h
cFtudW1dLmVuZF9wZm4pOw0KKwl9DQogfQ0KIA0KIHVuc2lnbmVkIGxvbmcg
X19pbml0IGZpbmRfbWluX3Bmbih2b2lkKQ0K

--29444707-1293766146-1144796725=:8991--
