Return-Path: <linux-kernel-owner+willy=40w.ods.org-S964821AbWCHLqa@vger.kernel.org>
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S964821AbWCHLqa (ORCPT <rfc822;willy@w.ods.org>);
	Wed, 8 Mar 2006 06:46:30 -0500
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S932499AbWCHLq3
	(ORCPT <rfc822;linux-kernel-outgoing>);
	Wed, 8 Mar 2006 06:46:29 -0500
Received: from cantor.suse.de ([195.135.220.2]:43675 "EHLO mx1.suse.de")
	by vger.kernel.org with ESMTP id S932497AbWCHLq3 (ORCPT
	<rfc822;linux-kernel@vger.kernel.org>);
	Wed, 8 Mar 2006 06:46:29 -0500
Date: Wed, 08 Mar 2006 12:46:27 +0100
Message-ID: <s5h4q29rwfg.wl%tiwai@suse.de>
From: Takashi Iwai <tiwai@suse.de>
To: Fernando Lopez-Lezcano <nando@ccrma.Stanford.EDU>
Cc: Ingo Molnar <mingo@elte.hu>, linux-kernel@vger.kernel.org,
       alsa-devel@lists.sourceforge.net, cc@ccrma.Stanford.EDU
Subject: Re: [Alsa-devel] Re: 2.6.15-rt18, alsa sequencer, rosegarden -> alsa hangs
In-Reply-To: <1141800836.6150.3.camel@cmn3.stanford.edu>
References: <1141769000.5565.21.camel@cmn3.stanford.edu>
	<20060307220628.GA27536@elte.hu>
	<1141800836.6150.3.camel@cmn3.stanford.edu>
User-Agent: Wanderlust/2.12.0 (Your Wildest Dreams) SEMI/1.14.6 (Maruoka)
 FLIM/1.14.7 (=?ISO-8859-4?Q?Sanj=F2?=) APEL/10.6 MULE XEmacs/21.5 (beta21)
 (corn) (+CVS-20050720) (i386-suse-linux)
MIME-Version: 1.0 (generated by SEMI 1.14.6 - "Maruoka")
Content-Type: text/plain; charset=US-ASCII
Sender: linux-kernel-owner@vger.kernel.org
X-Mailing-List: linux-kernel@vger.kernel.org

At Tue, 07 Mar 2006 22:53:55 -0800,
Fernando Lopez-Lezcano wrote:
> 
> On Tue, 2006-03-07 at 23:06 +0100, Ingo Molnar wrote:
> > * Fernando Lopez-Lezcano <nando@ccrma.Stanford.EDU> wrote:
> > 
> > > The symptoms are as follows:
> > >   - start jack using qjackctl
> > >   - start qsynth (gui front end for fluidsynth, a synth)
> > >   - start rosegarden (midi sequencer and audio recorder)
> > >   - load a midi file into rosegarden
> > >   - midi file plays successfully
> > >   - close rosegarden
> > > at this point one of the threads of rosegarden fails to exit and stays
> > > forever in the process list, in a ps axuw it shows as:
> > > 
> > > nando 5484 0.0 0.0 0 0 pts/1    D    13:32   0:00 [rosegardenseque]
> > > 
> > > Anything else that I try to stop that touches the alsa sequencer never
> > > dies (qjackctl, vkeybd, qsynth, etc). Anything I try to start that tries
> > > to use it does not start. This happened with two widely different
> > 
> > could you get a tasklist-dump? It's either SysRq-T, or:
> > 
> > 	echo t > /proc/sysrq-trigger
> > 
> > that should dump all tasks and their backtraces - including the hung 
> > rosegardensequencer task.
> 
> I'll try to do that tomorrow. 

That'll be helpful.  A deadlocked mutex could be easily found by a
backtrace. 


Takashi
