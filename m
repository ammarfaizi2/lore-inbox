Return-Path: <linux-kernel-owner+willy=40w.ods.org-S263334AbVCKObP@vger.kernel.org>
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S263334AbVCKObP (ORCPT <rfc822;willy@w.ods.org>);
	Fri, 11 Mar 2005 09:31:15 -0500
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S263338AbVCKObP
	(ORCPT <rfc822;linux-kernel-outgoing>);
	Fri, 11 Mar 2005 09:31:15 -0500
Received: from tempo.di-net.ru ([213.248.12.5]:16134 "EHLO tempo.di-net.ru")
	by vger.kernel.org with ESMTP id S263334AbVCKO0K (ORCPT
	<rfc822;linux-kernel@vger.kernel.org>);
	Fri, 11 Mar 2005 09:26:10 -0500
Date: Fri, 11 Mar 2005 17:20:22 +0300
From: Leo Yuriev <leo@yuriev.ru>
X-Mailer: The Bat! (v3.0.1.33) Professional
Reply-To: "leo.yuriev.ru" <leo@yuriev.ru>
X-Priority: 3 (Normal)
Message-ID: <914610115.20050311172022@yuriev.ru>
To: Lennert Buytenhek <buytenh@wantstofly.org>
CC: Patrick McHardy <kaber@trash.net>, jamal <hadi@cyberus.ca>,
       Ben Greear <greearb@candelatech.com>, <shemminger@osdl.org>,
       <netdev@oss.sgi.com>, <linux-kernel@vger.kernel.org>
Subject: [PATCH] updated, ethernet-bridge: update skb->priority in case forwarded frame has VLAN-header
MIME-Version: 1.0
Content-Type: multipart/signed; protocol="application/pgp-signature"; micalg="pgp-md5";
  boundary="----------461B81E2282DA6C5"
X-Greylist: Sender DNS name whitelisted, not delayed by milter-greylist-1.6 (tempo.di-net.ru [213.248.12.5]); Fri, 11 Mar 2005 17:20:49 +0300 (MSK)
Sender: linux-kernel-owner@vger.kernel.org
X-Mailing-List: linux-kernel@vger.kernel.org

------------461B81E2282DA6C5
Content-Type: multipart/mixed;
 boundary="----------AF1D920B3861F438"

------------AF1D920B3861F438
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: base64

S2VybmVsIDIuNiAoMi42LjExKQ0KDQpXaGVuIGV0aGVybmV0LWJyaWRnZSBmb3J3YXJkIGEg
cGFja2V0IGFuZCBzdWNoIGV0aGVybmV0LWZyYW1lIGhhcw0KVkxBTi10YWcsIGJyaWRnZSBz
aG91bGQgdXBkYXRlIHNrYi0+cHJpb3JpcnkgZm9yIHByb3Blcmx5IFFvUw0KaGFuZGxpbmcu
IFRoaXMgc21hbGwgcGF0Y2ggZG9lcyB0aGlzLg0KDQpCYXNlZCB1cG9uIGRpc2N1c3Npb24g
ZHVyaW5nIGxhc3Qgd2VlayBJIGFkZGVkIHBza2JfbWF5X3B1bGwoKQ0KY2hlY2tpbmcgYW5k
IHNpbXBsZSBtYXBwaW5nIGZyb20gODAyLjFwL3VzZXJfcHJpb3JpdHkgdG8gc2tiLT5wcmlv
cml0eS4NCg0KUGF0Y2gtYnk6IExlbyBZdXJpZXYgPGxlb0B5dXJpZXYucnU+DQoNCi0tDQpC
ZXN0IHJlZ2FyZHMsDQogTGVvICAgICAgICAgICAgICAgICAgICAgICAgICBtYWlsdG86bGVv
QHl1cmlldi5ydQ0KDQotLS0tLUJFR0lOIFBHUCBQVUJMSUMgS0VZIEJMT0NLLS0tLS0NClZl
cnNpb246IDIuNg0KDQptUUNQQTBITUlta0JiUUVFQUxuV1hwbmNobDFkSGFDZnduWGUyUk84
ZnQ5ZTdLNUlHUlcxbEU5UkVSTXk2UjNMDQpKbk1YTVBpdVdtLzR0eDZIL3lUUlVNTDhMYnVB
Q3pmMk5wOW9IVHhiRFd4UDQwd0d4UUtyUERsenYvOWdMRXA2DQpad0dGOG1TZnZaclBIdXgx
THdJYnJ5UXhqbG13Zk5Da0UrcWlWT0JXTXNEN3lBRkNXclp6dGJXVFdKNnBBQkVCDQpBQUcw
R2t4bGJ5QlpkWEpwWlhZZ1BHeGxiMEI1ZFhKcFpYWXVjblUraVFDVkF3VVFRY3dpYWJaenRi
V1RXSjZwDQpBUUc2Y0FQOUgwTytNTWEwV0RsR0UySkdHK1NXdXU5SXVxZzc2SHA2dGp0cnoy
cExXRXpicThvcUNrRTBUSGZmDQovWVVVYUtxbnJMRUx3RWFwdEUrTXJXU3Y5WnQxSy9QYXVN
cEtVV1hobFlxR2NHQjJOcUpMNjlBT05RdGUwTTRCDQpyUFNTdHM0Q1U3Z0syWnVkczFET0xp
T043ZTlTYnBqYzVUKzREN0p3NVhHS016NjZuaFk9DQo9cUdJaw0KLS0tLS1FTkQgUEdQIFBV
QkxJQyBLRVkgQkxPQ0stLS0tLQ0KDQoNCi0tLSBuZXQvYnJpZGdlL2JyX2lucHV0LmMub3Jp
ZyAgMjAwNS0wMy0wMiAxMDozNzo1MC4wMDAwMDAwMDAgKzAzMDANCisrKyBuZXQvYnJpZGdl
L2JyX2lucHV0LmMgICAgICAgMjAwNS0wMy0xMSAxNjoyODowMi4wMDAwMDAwMDAgKzAzMDAN
CkBAIC01LDYgKzUsMTAgQEANCiAgKiAgICAgQXV0aG9yczoNCiAgKiAgICAgTGVubmVydCBC
dXl0ZW5oZWsgICAgICAgICAgICAgICA8YnV5dGVuaEBnbnUub3JnPg0KICAqDQorICogICAg
IENoYW5nZXM6DQorICogICAgICAgICAgICAgMTEvTWFyLzIwMDUgLSBMWSAoTGVvIFl1cmll
diA8bGVvQHl1cmlldi5ydT4pDQorICogICAgICAgICAgICAgVXBkYXRlIHNrYi0+cHJpb3Jp
dHkgZm9yIHBhY2tldHMgd2l0aCBWTEFOLXRhZy4NCisgKg0KICAqICAgICAkSWQ6IGJyX2lu
cHV0LmMsdiAxLjEwIDIwMDEvMTIvMjQgMDQ6NTA6MjAgZGF2ZW0gRXhwICQNCiAgKg0KICAq
ICAgICBUaGlzIHByb2dyYW0gaXMgZnJlZSBzb2Z0d2FyZTsgeW91IGNhbiByZWRpc3RyaWJ1
dGUgaXQgYW5kL29yDQpAQCAtMTcsNiArMjEsMTAgQEANCiAjaW5jbHVkZSA8bGludXgvbmV0
ZGV2aWNlLmg+DQogI2luY2x1ZGUgPGxpbnV4L2V0aGVyZGV2aWNlLmg+DQogI2luY2x1ZGUg
PGxpbnV4L25ldGZpbHRlcl9icmlkZ2UuaD4NCisjaWZkZWYgQ09ORklHX05FVF9TQ0hFRA0K
KyMgICAgICBpbmNsdWRlIDxsaW51eC9wa3Rfc2NoZWQuaD4NCisjICAgICAgaW5jbHVkZSA8
bGludXgvaWZfdmxhbi5oPg0KKyNlbmRpZiAvKiBDT05GSUdfTkVUX1NDSEVEKi8NCiAjaW5j
bHVkZSAiYnJfcHJpdmF0ZS5oIg0KIA0KIGNvbnN0IHVuc2lnbmVkIGNoYXIgYnJpZGdlX3Vs
YVs2XSA9IHsgMHgwMSwgMHg4MCwgMHhjMiwgMHgwMCwgMHgwMCwgMHgwMCB9Ow0KQEAgLTQ1
LDYgKzUzLDc1IEBAIHN0YXRpYyB2b2lkIGJyX3Bhc3NfZnJhbWVfdXAoc3RydWN0IG5ldF8N
CiAgICAgICAgICAgICAgICAgICAgICAgIGJyX3Bhc3NfZnJhbWVfdXBfZmluaXNoKTsNCiB9
DQogDQorDQorI2lmZGVmIENPTkZJR19ORVRfU0NIRUQNCisvKg0KKyAqICAgICBMWSAoTGVv
IFl1cmlldik6DQorICogICAgICAgICAgICAgSnVzdCB1cGRhdGUgc2tiLT5wcmlvcml0eSBm
b3IgcHJvcGVybHkgUW9TIGhhbmRsaW5nIGluIGNhc2UNCisgKiAgICAgICAgICAgICBmcmFt
ZSBpbiB0aGUgc2tiIGlzIGNvbnRhaW4gVkxBTi1oZWFkZXIuDQorICoNCisgKiAgICAgU0FO
SVRZIE5PVEU6DQorICogICAgICAgICAgICAgV2UgYXJlIHJlZmVyZW5jaW5nIHRvIHRoZSBW
TEFOX0hEUiBmcmllbGRzLCB3aGljaCBNQVkgYmUNCisgKiAgICAgICAgICAgICBzdG9yZWQg
VU5BTElHTkVEIGluIHRoZSBtZW1vcnkuDQorICogICAgICAgICAgICAgQWNjb3JkaW5nIHRv
IERhdmUgTWlsbGVyICYgQWxleGV5LCBpdCB3aWxsIGFsd2F5cyBiZSBhbGlnbmVkLA0KKyAq
ICAgICAgICAgICAgIHNvIHRoZXJlIGRvZXNuJ3QgbmVlZCB0byBiZSBhbnkgb2YgdGhlIHVu
YWxpZ25lZCBzdHVmZi4NCisgKg0KKyAqLw0KK3N0YXRpYyBfX2lubGluZV9fIHZvaWQgYnJf
dXBkYXRlX3NrYl9wcmlvcml0eV9pZl92bGFuKHN0cnVjdCBza19idWZmICpza2IpDQorew0K
KyAgICAgICAvKg0KKyAgICAgICAgKiAgICAgIE1BQy1MYXllciBQcmlvcml0aXphdGlvbiAo
ODAyLjFwIGFzIHBhcnQgb2YgODAyLjFELTE5OTgpDQorICAgICAgICAqICAgICAgLSBwcmlv
cml0eSAwOg0KKyAgICAgICAgKiAgICAgICAgICAgICAgTm9uY3JpdGljYWwgdHJhZmZpYyBz
dWNoIGFzIGJhY2t1cHMsIG5vbmNyaXRpY2FsDQorICAgICAgICAqICAgICAgICAgICAgICBy
ZXBsaWNhdGlvbnMsIHNvbWUgZWxlY3Ryb25pYyBtYWlsLCBhbmQgc28gb247DQorICAgICAg
ICAqICAgICAgLSBwcmlvcml0eSAxOg0KKyAgICAgICAgKiAgICAgICAgICAgICAgVGhlIGRl
ZmF1bHQgbW9kZSBpZiBub25lIGlzIHNwZWNpZmllZDsNCisgICAgICAgICogICAgICAtIHBy
aW9yaXR5IDI6DQorICAgICAgICAqICAgICAgICAgICAgICBCZXN0LWVmZm9ydCB0cmFmZmlj
Ow0KKyAgICAgICAgKiAgICAgIC0gcHJpb3JpdHkgMzoNCisgICAgICAgICogICAgICAgICAg
ICAgIEJldHRlciB0aGFuIGJlc3QgZWZmb3J0LCB3aGljaCB3b3VsZCBpbmNsdWRlIGltcG9y
dGFudA0KKyAgICAgICAgKiAgICAgICAgICAgICAgYnVzaW5lc3MgdHJhZmZpYyB0aGF0IGNh
biB0b2xlcmF0ZSBzb21lIGRlbGF5Ow0KKyAgICAgICAgKiAgICAgIC0gcHJpb3JpdHkgNDoN
CisgICAgICAgICogICAgICAgICAgICAgIENvbnRyb2xsZWQgbG9hZCwgbGF0ZW5jeS1zZW5z
aXRpdmUgdHJhZmZpYw0KKyAgICAgICAgKiAgICAgICAgICAgICAgc3VjaCBhcyBTTkEgdHJh
bnNhY3Rpb25zOw0KKyAgICAgICAgKiAgICAgIC0gcHJpb3JpdHkgNToNCisgICAgICAgICog
ICAgICAgICAgICAgIFZpZGVvLCB3aGljaCBpcyBoaWdoIGJhbmR3aWR0aCBhbmQgc2Vuc2l0
aXZlIHRvIGppdHRlcjsNCisgICAgICAgICogICAgICAtIHByaW9yaXR5IDY6DQorICAgICAg
ICAqICAgICAgICAgICAgICBWb2ljZSB0cmFmZmljLCBzdWNoIGFzIE5ldE1lZXRpbmcsIHRo
YXQgaXMgZXNwZWNpYWxseQ0KKyAgICAgICAgKiAgICAgICAgICAgICAgc2Vuc2l0aXZlIHRv
IGppdHRlcjsNCisgICAgICAgICogICAgICAtIHByaW9yaXR5IDc6DQorICAgICAgICAqICAg
ICAgICAgICAgICBOZXR3b3JrIGNvbnRyb2wgdHJhZmZpYw0KKyAgICAgICAgKiAgICAgICAg
ICAgICAgc3VjaCBhcyByb3V0ZXIgY29uZmlndXJhdGlvbiBtZXNzYWdlczsNCisgICAgICAg
ICovDQorICAgICAgIHN0YXRpYyBjb25zdCBfX3U4IG1hY191c2VycHJpbzJwcmlvWzhdID0g
ew0KKyAgICAgICAgVENfUFJJT19GSUxMRVIsICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAvKiBwcmlvIDAgPT4gYmFuZCAyICovDQorICAgICAgICAgICAgICAgVENfUFJJT19C
VUxLLCAgICAgICAgICAgICAgICAgICAvKiBwcmlvIDEgPT4gYmFuZCAyICovDQorICAgICAg
ICAgICAgICAgVENfUFJJT19CRVNURUZGT1JULCAgICAgICAgICAgICAvKiBwcmlvIDIgPT4g
YmFuZCAxICovDQorICAgICAgICAgICAgICAgVENfUFJJT19CRVNURUZGT1JULCAgICAgICAg
ICAgICAvKiBwcmlvIDMgPT4gYmFuZCAxICovDQorICAgICAgICAgICAgICAgVENfUFJJT19J
TlRFUkFDVElWRV9CVUxLLCAgICAgICAvKiBwcmlvIDQgPT4gYmFuZCAxICovDQorICAgICAg
ICAgICAgICAgVENfUFJJT19JTlRFUkFDVElWRV9CVUxLLCAgICAgICAvKiBwcmlvIDUgPT4g
YmFuZCAxICovDQorICAgICAgICAgICAgICAgVENfUFJJT19JTlRFUkFDVElWRSwgICAgICAg
ICAgICAvKiBwcmlvIDYgPT4gYmFuZCAwICovDQorICAgICAgICAgICAgICAgVENfUFJJT19D
T05UUk9MLCAgICAgICAgICAgICAgICAvKiBwcmlvIDcgPT4gYmFuZCAwICovDQorICAgICAg
IH07DQorICAgICAgIHVuc2lnbmVkIHNob3J0IHZsYW5fVENJOw0KKyAgICAgICBzdHJ1Y3Qg
dmxhbl9oZHIgKnZoZHI7DQorDQorICAgICAgIGlmIChfX2NvbnN0YW50X2h0b25zKEVUSF9Q
XzgwMjFRKSA9PSBza2ItPnByb3RvY29sICYmIHBza2JfbWF5X3B1bGwoc2tiLCBWTEFOX0hM
RU4pKSB7DQorICAgICAgICAgICAgICAgdmhkciA9IChzdHJ1Y3Qgdmxhbl9oZHIgKikoc2ti
LT5kYXRhKTsNCisgICAgICAgICAgICAgICAvKiB2bGFuX1RDSSA9IG50b2hzKGdldF91bmFs
aWduZWQoJnZoZHItPmhfdmxhbl9UQ0kpKTsgKi8NCisgICAgICAgICAgICAgICB2bGFuX1RD
SSA9IG50b2hzKHZoZHItPmhfdmxhbl9UQ0kpOw0KKyNpZmRlZiBWTEFOX0RFQlVHDQorICAg
ICAgICAgICAgICAgcHJpbnRrKFZMQU5fREJHICIlczogc2tiOiAlcCB2bGFuX2lkOiAlaHhc
biIsDQorICAgICAgICAgICAgICAgICAgICAgICBfX0ZVTkNUSU9OX18sIHNrYiwgKHZsYW5f
VENJICYgVkxBTl9WSURfTUFTSykpOw0KKyNlbmRpZg0KKyAgICAgICAgICAgICAgIC8qIExZ
OiB3aGV0aGVyIHdlIGNhbiBhc3N1bWUgaGVyZSB2bGFuX1RDSSA8PSA2NTUzNSBhbHdheXMg
Pw0KKyAgICAgICAgICAgICAgICAqIEkgdGhpbmsgeWVzLCB0aGVuICImIDciIGlzIG5lZWRs
ZXNzIGFmdGVyIHNoaWZ0aW5nLg0KKyAgICAgICAgICAgICAgICAqLw0KKyAgICAgICAgICAg
ICAgIHNrYi0+cHJpb3JpdHkgPSBtYWNfdXNlcnByaW8ycHJpb1t2bGFuX1RDSSA+PiAxM107
DQorICAgICAgIH0NCit9DQorI2VuZGlmIC8qIENPTkZJR19ORVRfU0NIRUQgKi8NCisNCiAv
KiBub3RlOiBhbHJlYWR5IGNhbGxlZCB3aXRoIHJjdV9yZWFkX2xvY2sgKHByZWVtcHRfZGlz
YWJsZWQpICovDQogaW50IGJyX2hhbmRsZV9mcmFtZV9maW5pc2goc3RydWN0IHNrX2J1ZmYg
KnNrYikNCiB7DQpAQCAtNTQsNiArMTMxLDEwIEBAIGludCBicl9oYW5kbGVfZnJhbWVfZmlu
aXNoKHN0cnVjdCBza19idWYNCiAgICAgICAgc3RydWN0IG5ldF9icmlkZ2VfZmRiX2VudHJ5
ICpkc3Q7DQogICAgICAgIGludCBwYXNzZWR1cCA9IDA7DQogDQorI2lmZGVmIENPTkZJR19O
RVRfU0NIRUQNCisgICAgICAgYnJfdXBkYXRlX3NrYl9wcmlvcml0eV9pZl92bGFuKHNrYik7
DQorI2VuZGlmIC8qIENPTkZJR19ORVRfU0NIRUQqLw0KKw0KICAgICAgICBpZiAoYnItPmRl
di0+ZmxhZ3MgJiBJRkZfUFJPTUlTQykgew0KICAgICAgICAgICAgICAgIHN0cnVjdCBza19i
dWZmICpza2IyOw0KIA0KDQo=
------------AF1D920B3861F438
Content-Type: application/octet-stream; name=bridge-ly-patch
Content-transfer-encoding: base64
Content-Disposition: attachment; filename=bridge-ly-patch

LS0tIG5ldC9icmlkZ2UvYnJfaW5wdXQuYy5vcmlnCTIwMDUtMDMtMDIgMTA6Mzc6NTAuMDAw
MDAwMDAwICswMzAwCisrKyBuZXQvYnJpZGdlL2JyX2lucHV0LmMJMjAwNS0wMy0xMSAxNjoy
ODowMi4wMDAwMDAwMDAgKzAzMDAKQEAgLTUsNiArNSwxMCBAQAogICoJQXV0aG9yczoKICAq
CUxlbm5lcnQgQnV5dGVuaGVrCQk8YnV5dGVuaEBnbnUub3JnPgogICoKKyAqCUNoYW5nZXM6
CisgKgkJMTEvTWFyLzIwMDUgLSBMWSAoTGVvIFl1cmlldiA8bGVvQHl1cmlldi5ydT4pCisg
KgkJVXBkYXRlIHNrYi0+cHJpb3JpdHkgZm9yIHBhY2tldHMgd2l0aCBWTEFOLXRhZy4KKyAq
CiAgKgkkSWQ6IGJyX2lucHV0LmMsdiAxLjEwIDIwMDEvMTIvMjQgMDQ6NTA6MjAgZGF2ZW0g
RXhwICQKICAqCiAgKglUaGlzIHByb2dyYW0gaXMgZnJlZSBzb2Z0d2FyZTsgeW91IGNhbiBy
ZWRpc3RyaWJ1dGUgaXQgYW5kL29yCkBAIC0xNyw2ICsyMSwxMCBAQAogI2luY2x1ZGUgPGxp
bnV4L25ldGRldmljZS5oPgogI2luY2x1ZGUgPGxpbnV4L2V0aGVyZGV2aWNlLmg+CiAjaW5j
bHVkZSA8bGludXgvbmV0ZmlsdGVyX2JyaWRnZS5oPgorI2lmZGVmIENPTkZJR19ORVRfU0NI
RUQKKyMJaW5jbHVkZSA8bGludXgvcGt0X3NjaGVkLmg+CisjCWluY2x1ZGUgPGxpbnV4L2lm
X3ZsYW4uaD4KKyNlbmRpZiAvKiBDT05GSUdfTkVUX1NDSEVEKi8KICNpbmNsdWRlICJicl9w
cml2YXRlLmgiCiAKIGNvbnN0IHVuc2lnbmVkIGNoYXIgYnJpZGdlX3VsYVs2XSA9IHsgMHgw
MSwgMHg4MCwgMHhjMiwgMHgwMCwgMHgwMCwgMHgwMCB9OwpAQCAtNDUsNiArNTMsNzUgQEAg
c3RhdGljIHZvaWQgYnJfcGFzc19mcmFtZV91cChzdHJ1Y3QgbmV0XwogCQkJYnJfcGFzc19m
cmFtZV91cF9maW5pc2gpOwogfQogCisKKyNpZmRlZiBDT05GSUdfTkVUX1NDSEVECisvKgor
ICoJTFkgKExlbyBZdXJpZXYpOgorICoJCUp1c3QgdXBkYXRlIHNrYi0+cHJpb3JpdHkgZm9y
IHByb3Blcmx5IFFvUyBoYW5kbGluZyBpbiBjYXNlCisgKgkJZnJhbWUgaW4gdGhlIHNrYiBp
cyBjb250YWluIFZMQU4taGVhZGVyLgorICoKKyAqCVNBTklUWSBOT1RFOgorICoJCVdlIGFy
ZSByZWZlcmVuY2luZyB0byB0aGUgVkxBTl9IRFIgZnJpZWxkcywgd2hpY2ggTUFZIGJlCisg
KgkJc3RvcmVkIFVOQUxJR05FRCBpbiB0aGUgbWVtb3J5LgorICoJCUFjY29yZGluZyB0byBE
YXZlIE1pbGxlciAmIEFsZXhleSwgaXQgd2lsbCBhbHdheXMgYmUgYWxpZ25lZCwKKyAqCQlz
byB0aGVyZSBkb2Vzbid0IG5lZWQgdG8gYmUgYW55IG9mIHRoZSB1bmFsaWduZWQgc3R1ZmYu
CisgKgorICovCitzdGF0aWMgX19pbmxpbmVfXyB2b2lkIGJyX3VwZGF0ZV9za2JfcHJpb3Jp
dHlfaWZfdmxhbihzdHJ1Y3Qgc2tfYnVmZiAqc2tiKQoreworCS8qCisJICoJTUFDLUxheWVy
IFByaW9yaXRpemF0aW9uICg4MDIuMXAgYXMgcGFydCBvZiA4MDIuMUQtMTk5OCkKKwkgKgkt
IHByaW9yaXR5IDA6CisJICoJCU5vbmNyaXRpY2FsIHRyYWZmaWMgc3VjaCBhcyBiYWNrdXBz
LCBub25jcml0aWNhbAorCSAqCQlyZXBsaWNhdGlvbnMsIHNvbWUgZWxlY3Ryb25pYyBtYWls
LCBhbmQgc28gb247CisJICoJLSBwcmlvcml0eSAxOgorCSAqCQlUaGUgZGVmYXVsdCBtb2Rl
IGlmIG5vbmUgaXMgc3BlY2lmaWVkOworCSAqCS0gcHJpb3JpdHkgMjoKKwkgKgkJQmVzdC1l
ZmZvcnQgdHJhZmZpYzsKKwkgKgktIHByaW9yaXR5IDM6CisJICoJCUJldHRlciB0aGFuIGJl
c3QgZWZmb3J0LCB3aGljaCB3b3VsZCBpbmNsdWRlIGltcG9ydGFudAorCSAqCQlidXNpbmVz
cyB0cmFmZmljIHRoYXQgY2FuIHRvbGVyYXRlIHNvbWUgZGVsYXk7CisJICoJLSBwcmlvcml0
eSA0OgorCSAqCQlDb250cm9sbGVkIGxvYWQsIGxhdGVuY3ktc2Vuc2l0aXZlIHRyYWZmaWMK
KwkgKgkJc3VjaCBhcyBTTkEgdHJhbnNhY3Rpb25zOworCSAqCS0gcHJpb3JpdHkgNToKKwkg
KgkJVmlkZW8sIHdoaWNoIGlzIGhpZ2ggYmFuZHdpZHRoIGFuZCBzZW5zaXRpdmUgdG8gaml0
dGVyOworCSAqCS0gcHJpb3JpdHkgNjoKKwkgKgkJVm9pY2UgdHJhZmZpYywgc3VjaCBhcyBO
ZXRNZWV0aW5nLCB0aGF0IGlzIGVzcGVjaWFsbHkKKwkgKgkJc2Vuc2l0aXZlIHRvIGppdHRl
cjsKKwkgKgktIHByaW9yaXR5IDc6CisJICoJCU5ldHdvcmsgY29udHJvbCB0cmFmZmljCisJ
ICoJCXN1Y2ggYXMgcm91dGVyIGNvbmZpZ3VyYXRpb24gbWVzc2FnZXM7CisJICovCisJc3Rh
dGljIGNvbnN0IF9fdTggbWFjX3VzZXJwcmlvMnByaW9bOF0gPSB7CisgICAgICAgIFRDX1BS
SU9fRklMTEVSLAkJCQkvKiBwcmlvIDAgPT4gYmFuZCAyICovCisJCVRDX1BSSU9fQlVMSywJ
CQkvKiBwcmlvIDEgPT4gYmFuZCAyICovCisJCVRDX1BSSU9fQkVTVEVGRk9SVCwJCS8qIHBy
aW8gMiA9PiBiYW5kIDEgKi8KKwkJVENfUFJJT19CRVNURUZGT1JULAkJLyogcHJpbyAzID0+
IGJhbmQgMSAqLworCQlUQ19QUklPX0lOVEVSQUNUSVZFX0JVTEssCS8qIHByaW8gNCA9PiBi
YW5kIDEgKi8KKwkJVENfUFJJT19JTlRFUkFDVElWRV9CVUxLLAkvKiBwcmlvIDUgPT4gYmFu
ZCAxICovCisJCVRDX1BSSU9fSU5URVJBQ1RJVkUsCQkvKiBwcmlvIDYgPT4gYmFuZCAwICov
CisJCVRDX1BSSU9fQ09OVFJPTCwJCS8qIHByaW8gNyA9PiBiYW5kIDAgKi8KKwl9OworCXVu
c2lnbmVkIHNob3J0IHZsYW5fVENJOworCXN0cnVjdCB2bGFuX2hkciAqdmhkcjsKKworCWlm
IChfX2NvbnN0YW50X2h0b25zKEVUSF9QXzgwMjFRKSA9PSBza2ItPnByb3RvY29sICYmIHBz
a2JfbWF5X3B1bGwoc2tiLCBWTEFOX0hMRU4pKSB7CisJCXZoZHIgPSAoc3RydWN0IHZsYW5f
aGRyICopKHNrYi0+ZGF0YSk7CisJCS8qIHZsYW5fVENJID0gbnRvaHMoZ2V0X3VuYWxpZ25l
ZCgmdmhkci0+aF92bGFuX1RDSSkpOyAqLworCQl2bGFuX1RDSSA9IG50b2hzKHZoZHItPmhf
dmxhbl9UQ0kpOworI2lmZGVmIFZMQU5fREVCVUcKKwkJcHJpbnRrKFZMQU5fREJHICIlczog
c2tiOiAlcCB2bGFuX2lkOiAlaHhcbiIsCisJCQlfX0ZVTkNUSU9OX18sIHNrYiwgKHZsYW5f
VENJICYgVkxBTl9WSURfTUFTSykpOworI2VuZGlmCisJCS8qIExZOiB3aGV0aGVyIHdlIGNh
biBhc3N1bWUgaGVyZSB2bGFuX1RDSSA8PSA2NTUzNSBhbHdheXMgPworCQkgKiBJIHRoaW5r
IHllcywgdGhlbiAiJiA3IiBpcyBuZWVkbGVzcyBhZnRlciBzaGlmdGluZy4KKwkJICovCisJ
CXNrYi0+cHJpb3JpdHkgPSBtYWNfdXNlcnByaW8ycHJpb1t2bGFuX1RDSSA+PiAxM107CisJ
fQorfQorI2VuZGlmIC8qIENPTkZJR19ORVRfU0NIRUQgKi8KKwogLyogbm90ZTogYWxyZWFk
eSBjYWxsZWQgd2l0aCByY3VfcmVhZF9sb2NrIChwcmVlbXB0X2Rpc2FibGVkKSAqLwogaW50
IGJyX2hhbmRsZV9mcmFtZV9maW5pc2goc3RydWN0IHNrX2J1ZmYgKnNrYikKIHsKQEAgLTU0
LDYgKzEzMSwxMCBAQCBpbnQgYnJfaGFuZGxlX2ZyYW1lX2ZpbmlzaChzdHJ1Y3Qgc2tfYnVm
CiAJc3RydWN0IG5ldF9icmlkZ2VfZmRiX2VudHJ5ICpkc3Q7CiAJaW50IHBhc3NlZHVwID0g
MDsKIAorI2lmZGVmIENPTkZJR19ORVRfU0NIRUQKKwlicl91cGRhdGVfc2tiX3ByaW9yaXR5
X2lmX3ZsYW4oc2tiKTsKKyNlbmRpZiAvKiBDT05GSUdfTkVUX1NDSEVEKi8KKwogCWlmIChi
ci0+ZGV2LT5mbGFncyAmIElGRl9QUk9NSVNDKSB7CiAJCXN0cnVjdCBza19idWZmICpza2Iy
OwogCg==

------------AF1D920B3861F438--

------------461B81E2282DA6C5
Content-Type: application/pgp-signature

-----BEGIN PGP MESSAGE-----
Version: 2.6

iQCVAwUAQjGpJrZztbWTWJ6pAQFzgAP/ZwW2AUlTYu9N/fJQpfPzddKjb4u195V0
eohRRd2rN26YyZZhRb/iw5KFu4aZN6E3z9u0Ho5NqYggFt2IOKnAZQoakxA3hMcb
9NfEoY2PVkzLsG99SmHSRbiTknZRvKMalex0T0WdJ6z2t66kf6qR6B3Bc1xvJk7c
7blSxGWLgbY=
=9/cX
-----END PGP MESSAGE-----

------------461B81E2282DA6C5--

