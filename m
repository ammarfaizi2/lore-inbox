Return-Path: <linux-kernel-owner+willy=40w.ods.org-S932187AbWJASwI@vger.kernel.org>
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S932187AbWJASwI (ORCPT <rfc822;willy@w.ods.org>);
	Sun, 1 Oct 2006 14:52:08 -0400
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S932194AbWJASwI
	(ORCPT <rfc822;linux-kernel-outgoing>);
	Sun, 1 Oct 2006 14:52:08 -0400
Received: from mout1.freenet.de ([194.97.50.132]:43733 "EHLO mout1.freenet.de")
	by vger.kernel.org with ESMTP id S932193AbWJASwE (ORCPT
	<rfc822;linux-kernel@vger.kernel.org>);
	Sun, 1 Oct 2006 14:52:04 -0400
Date: Sun, 01 Oct 2006 20:52:52 +0200
To: "linux-kernel@vger.kernel.org" <linux-kernel@vger.kernel.org>
Subject: [PATCH 1/4] 2.6.18-mm2 pktcdvd: replace pktcdvd strings with macro DRIVER_NAME
Reply-To: balagi@justmail.de
From: "Thomas Maier" <balagi@justmail.de>
Cc: "petero2@telia.com" <petero2@telia.com>, akpm@osdl.org
Content-Type: multipart/mixed; boundary=----------du52SLlLHLlRd5wW6liyhI
MIME-Version: 1.0
Message-ID: <op.tgraqehniudtyh@master>
User-Agent: Opera Mail/9.00 (Win32)
Sender: linux-kernel-owner@vger.kernel.org
X-Mailing-List: linux-kernel@vger.kernel.org

------------du52SLlLHLlRd5wW6liyhI
Content-Type: text/plain; charset=iso-8859-15
Content-Transfer-Encoding: 7bit

Hi,

this patch 1/4 for pktcdvd against Linux 2.6.18 (stable)
or 2.6.18-mm2 replaces all "pktcdvd" strings against
the DRIVER_NAME macro.

Sorry, my mail client damages the inline patch, so please
use the (text) attachment or get the patch from
http://people.freenet.de/BalaGi/download/1-drvname-pktcdvd-patch-2.6.18

The merged patch (parts 1 to 4) is available at:
http://people.freenet.de/BalaGi/download/pktcdvd-patch-2.6.18

Signed-off-by: Thomas Maier<balagi@justmail.de>
------------du52SLlLHLlRd5wW6liyhI
Content-Disposition: attachment; filename=1-drvname-pktcdvd-patch-2.6.18
Content-Type: application/octet-stream; name=1-drvname-pktcdvd-patch-2.6.18
Content-Transfer-Encoding: Base64

ZGlmZiAtdXJwTiBsaW51eC0yLjYuMTgvZHJpdmVycy9ibG9jay9wa3RjZHZkLmMg
cDEtZHJpdmVyLW5hbWUvZHJpdmVycy9ibG9jay9wa3RjZHZkLmMKLS0tIGxpbnV4
LTIuNi4xOC9kcml2ZXJzL2Jsb2NrL3BrdGNkdmQuYwkyMDA2LTA5LTI0IDE0OjI1
OjQxLjAwMDAwMDAwMCArMDIwMAorKysgcDEtZHJpdmVyLW5hbWUvZHJpdmVycy9i
bG9jay9wa3RjZHZkLmMJMjAwNi0xMC0wMSAxNjoxMTozMS4wMDAwMDAwMDAgKzAy
MDAKQEAgLTYyLDYgKzYyLDggQEAKIAogI2luY2x1ZGUgPGFzbS91YWNjZXNzLmg+
CiAKKyNkZWZpbmUgRFJJVkVSX05BTUUJInBrdGNkdmQiCisKICNpZiBQQUNLRVRf
REVCVUcKICNkZWZpbmUgRFBSSU5USyhmbXQsIGFyZ3MuLi4pIHByaW50ayhLRVJO
X05PVElDRSBmbXQsICMjYXJncykKICNlbHNlCkBAIC04OSw3ICs5MSw3IEBAIHN0
YXRpYyB2b2lkIHBrdF9iaW9fZmluaXNoZWQoc3RydWN0IHBrdGMKIHsKIAlCVUdf
T04oYXRvbWljX3JlYWQoJnBkLT5jZHJ3LnBlbmRpbmdfYmlvcykgPD0gMCk7CiAJ
aWYgKGF0b21pY19kZWNfYW5kX3Rlc3QoJnBkLT5jZHJ3LnBlbmRpbmdfYmlvcykp
IHsKLQkJVlBSSU5USygicGt0Y2R2ZDogcXVldWUgZW1wdHlcbiIpOworCQlWUFJJ
TlRLKERSSVZFUl9OQU1FIjogcXVldWUgZW1wdHlcbiIpOwogCQlhdG9taWNfc2V0
KCZwZC0+aW9zY2hlZC5hdHRlbnRpb24sIDEpOwogCQl3YWtlX3VwKCZwZC0+d3F1
ZXVlKTsKIAl9CkBAIC00MDAsNyArNDAyLDcgQEAgc3RhdGljIHZvaWQgcGt0X2R1
bXBfc2Vuc2Uoc3RydWN0IHBhY2tldAogCWludCBpOwogCXN0cnVjdCByZXF1ZXN0
X3NlbnNlICpzZW5zZSA9IGNnYy0+c2Vuc2U7CiAKLQlwcmludGsoInBrdGNkdmQ6
Iik7CisJcHJpbnRrKERSSVZFUl9OQU1FIjoiKTsKIAlmb3IgKGkgPSAwOyBpIDwg
Q0RST01fUEFDS0VUX1NJWkU7IGkrKykKIAkJcHJpbnRrKCIgJTAyeCIsIGNnYy0+
Y21kW2ldKTsKIAlwcmludGsoIiAtICIpOwpAQCAtNTI4LDcgKzUzMCw3IEBAIHN0
YXRpYyB2b2lkIHBrdF9pb3NjaGVkX3Byb2Nlc3NfcXVldWUoc3QKIAkJCQluZWVk
X3dyaXRlX3NlZWsgPSAwOwogCQkJaWYgKG5lZWRfd3JpdGVfc2VlayAmJiByZWFk
c19xdWV1ZWQpIHsKIAkJCQlpZiAoYXRvbWljX3JlYWQoJnBkLT5jZHJ3LnBlbmRp
bmdfYmlvcykgPiAwKSB7Ci0JCQkJCVZQUklOVEsoInBrdGNkdmQ6IHdyaXRlLCB3
YWl0aW5nXG4iKTsKKwkJCQkJVlBSSU5USyhEUklWRVJfTkFNRSI6IHdyaXRlLCB3
YWl0aW5nXG4iKTsKIAkJCQkJYnJlYWs7CiAJCQkJfQogCQkJCXBrdF9mbHVzaF9j
YWNoZShwZCk7CkBAIC01MzcsNyArNTM5LDcgQEAgc3RhdGljIHZvaWQgcGt0X2lv
c2NoZWRfcHJvY2Vzc19xdWV1ZShzdAogCQl9IGVsc2UgewogCQkJaWYgKCFyZWFk
c19xdWV1ZWQgJiYgd3JpdGVzX3F1ZXVlZCkgewogCQkJCWlmIChhdG9taWNfcmVh
ZCgmcGQtPmNkcncucGVuZGluZ19iaW9zKSA+IDApIHsKLQkJCQkJVlBSSU5USygi
cGt0Y2R2ZDogcmVhZCwgd2FpdGluZ1xuIik7CisJCQkJCVZQUklOVEsoRFJJVkVS
X05BTUUiOiByZWFkLCB3YWl0aW5nXG4iKTsKIAkJCQkJYnJlYWs7CiAJCQkJfQog
CQkJCXBkLT5pb3NjaGVkLndyaXRpbmcgPSAxOwpAQCAtNjAwLDcgKzYwMiw3IEBA
IHN0YXRpYyBpbnQgcGt0X3NldF9zZWdtZW50X21lcmdpbmcoc3RydWMKIAkJc2V0
X2JpdChQQUNLRVRfTUVSR0VfU0VHUywgJnBkLT5mbGFncyk7CiAJCXJldHVybiAw
OwogCX0gZWxzZSB7Ci0JCXByaW50aygicGt0Y2R2ZDogY2Ryb20gbWF4X3BoeXNf
c2VnbWVudHMgdG9vIHNtYWxsXG4iKTsKKwkJcHJpbnRrKERSSVZFUl9OQU1FIjog
Y2Ryb20gbWF4X3BoeXNfc2VnbWVudHMgdG9vIHNtYWxsXG4iKTsKIAkJcmV0dXJu
IC1FSU87CiAJfQogfQpAQCAtMTA0OSw3ICsxMDUxLDcgQEAgc3RhdGljIHZvaWQg
cGt0X3N0YXJ0X3dyaXRlKHN0cnVjdCBwa3RjZAogCWZvciAoZiA9IDA7IGYgPCBw
a3QtPmZyYW1lczsgZisrKQogCQlpZiAoIWJpb19hZGRfcGFnZShwa3QtPndfYmlv
LCBidmVjW2ZdLmJ2X3BhZ2UsIENEX0ZSQU1FU0laRSwgYnZlY1tmXS5idl9vZmZz
ZXQpKQogCQkJQlVHKCk7Ci0JVlBSSU5USygicGt0Y2R2ZDogdmNudD0lZFxuIiwg
cGt0LT53X2Jpby0+YmlfdmNudCk7CisJVlBSSU5USyhEUklWRVJfTkFNRSI6IHZj
bnQ9JWRcbiIsIHBrdC0+d19iaW8tPmJpX3ZjbnQpOwogCiAJYXRvbWljX3NldCgm
cGt0LT5pb193YWl0LCAxKTsKIAlwa3QtPndfYmlvLT5iaV9ydyA9IFdSSVRFOwpA
QCAtMTI4Niw3ICsxMjg4LDcgQEAgd29ya190b19kbzoKIAogc3RhdGljIHZvaWQg
cGt0X3ByaW50X3NldHRpbmdzKHN0cnVjdCBwa3RjZHZkX2RldmljZSAqcGQpCiB7
Ci0JcHJpbnRrKCJwa3RjZHZkOiAlcyBwYWNrZXRzLCAiLCBwZC0+c2V0dGluZ3Mu
ZnAgPyAiRml4ZWQiIDogIlZhcmlhYmxlIik7CisJcHJpbnRrKERSSVZFUl9OQU1F
IjogJXMgcGFja2V0cywgIiwgcGQtPnNldHRpbmdzLmZwID8gIkZpeGVkIiA6ICJW
YXJpYWJsZSIpOwogCXByaW50aygiJXUgYmxvY2tzLCAiLCBwZC0+c2V0dGluZ3Mu
c2l6ZSA+PiAyKTsKIAlwcmludGsoIk1vZGUtJWMgZGlzY1xuIiwgcGQtPnNldHRp
bmdzLmJsb2NrX21vZGUgPT0gOCA/ICcxJyA6ICcyJyk7CiB9CkBAIC0xNDcxLDcg
KzE0NzMsNyBAQCBzdGF0aWMgaW50IHBrdF9zZXRfd3JpdGVfc2V0dGluZ3Moc3Ry
dWN0CiAJCS8qCiAJCSAqIHBhcmFub2lhCiAJCSAqLwotCQlwcmludGsoInBrdGNk
dmQ6IHdyaXRlIG1vZGUgd3JvbmcgJWRcbiIsIHdwLT5kYXRhX2Jsb2NrX3R5cGUp
OworCQlwcmludGsoRFJJVkVSX05BTUUiOiB3cml0ZSBtb2RlIHdyb25nICVkXG4i
LCB3cC0+ZGF0YV9ibG9ja190eXBlKTsKIAkJcmV0dXJuIDE7CiAJfQogCXdwLT5w
YWNrZXRfc2l6ZSA9IGNwdV90b19iZTMyKHBkLT5zZXR0aW5ncy5zaXplID4+IDIp
OwpAQCAtMTUxNSw3ICsxNTE3LDcgQEAgc3RhdGljIGludCBwa3Rfd3JpdGFibGVf
dHJhY2soc3RydWN0IHBrdAogCWlmICh0aS0+cnQgPT0gMSAmJiB0aS0+Ymxhbmsg
PT0gMCkKIAkJcmV0dXJuIDE7CiAKLQlwcmludGsoInBrdGNkdmQ6IGJhZCBzdGF0
ZSAlZC0lZC0lZFxuIiwgdGktPnJ0LCB0aS0+YmxhbmssIHRpLT5wYWNrZXQpOwor
CXByaW50ayhEUklWRVJfTkFNRSI6IGJhZCBzdGF0ZSAlZC0lZC0lZFxuIiwgdGkt
PnJ0LCB0aS0+YmxhbmssIHRpLT5wYWNrZXQpOwogCXJldHVybiAwOwogfQogCkBA
IC0xNTMzLDcgKzE1MzUsNyBAQCBzdGF0aWMgaW50IHBrdF93cml0YWJsZV9kaXNj
KHN0cnVjdCBwa3RjCiAJCWNhc2UgMHgxMjogLyogRFZELVJBTSAqLwogCQkJcmV0
dXJuIDE7CiAJCWRlZmF1bHQ6Ci0JCQlWUFJJTlRLKCJwa3RjZHZkOiBXcm9uZyBk
aXNjIHByb2ZpbGUgKCV4KVxuIiwgcGQtPm1tYzNfcHJvZmlsZSk7CisJCQlWUFJJ
TlRLKERSSVZFUl9OQU1FIjogV3JvbmcgZGlzYyBwcm9maWxlICgleClcbiIsIHBk
LT5tbWMzX3Byb2ZpbGUpOwogCQkJcmV0dXJuIDA7CiAJfQogCkBAIC0xNTQyLDIy
ICsxNTQ0LDIyIEBAIHN0YXRpYyBpbnQgcGt0X3dyaXRhYmxlX2Rpc2Moc3RydWN0
IHBrdGMKIAkgKiBidXQgaSdtIG5vdCBzdXJlLCBzaG91bGQgd2UgbGVhdmUgdGhp
cyB0byB1c2VyIGFwcHM/IHByb2JhYmx5LgogCSAqLwogCWlmIChkaS0+ZGlzY190
eXBlID09IDB4ZmYpIHsKLQkJcHJpbnRrKCJwa3RjZHZkOiBVbmtub3duIGRpc2Mu
IE5vIHRyYWNrP1xuIik7CisJCXByaW50ayhEUklWRVJfTkFNRSI6IFVua25vd24g
ZGlzYy4gTm8gdHJhY2s/XG4iKTsKIAkJcmV0dXJuIDA7CiAJfQogCiAJaWYgKGRp
LT5kaXNjX3R5cGUgIT0gMHgyMCAmJiBkaS0+ZGlzY190eXBlICE9IDApIHsKLQkJ
cHJpbnRrKCJwa3RjZHZkOiBXcm9uZyBkaXNjIHR5cGUgKCV4KVxuIiwgZGktPmRp
c2NfdHlwZSk7CisJCXByaW50ayhEUklWRVJfTkFNRSI6IFdyb25nIGRpc2MgdHlw
ZSAoJXgpXG4iLCBkaS0+ZGlzY190eXBlKTsKIAkJcmV0dXJuIDA7CiAJfQogCiAJ
aWYgKGRpLT5lcmFzYWJsZSA9PSAwKSB7Ci0JCXByaW50aygicGt0Y2R2ZDogRGlz
YyBub3QgZXJhc2FibGVcbiIpOworCQlwcmludGsoRFJJVkVSX05BTUUiOiBEaXNj
IG5vdCBlcmFzYWJsZVxuIik7CiAJCXJldHVybiAwOwogCX0KIAogCWlmIChkaS0+
Ym9yZGVyX3N0YXR1cyA9PSBQQUNLRVRfU0VTU0lPTl9SRVNFUlZFRCkgewotCQlw
cmludGsoInBrdGNkdmQ6IENhbid0IHdyaXRlIHRvIGxhc3QgdHJhY2sgKHJlc2Vy
dmVkKVxuIik7CisJCXByaW50ayhEUklWRVJfTkFNRSI6IENhbid0IHdyaXRlIHRv
IGxhc3QgdHJhY2sgKHJlc2VydmVkKVxuIik7CiAJCXJldHVybiAwOwogCX0KIApA
QCAtMTU5MywxMiArMTU5NSwxMiBAQCBzdGF0aWMgaW50IHBrdF9wcm9iZV9zZXR0
aW5ncyhzdHJ1Y3QgcGt0CiAKIAl0cmFjayA9IDE7IC8qIChkaS5sYXN0X3RyYWNr
X21zYiA8PCA4KSB8IGRpLmxhc3RfdHJhY2tfbHNiOyAqLwogCWlmICgocmV0ID0g
cGt0X2dldF90cmFja19pbmZvKHBkLCB0cmFjaywgMSwgJnRpKSkpIHsKLQkJcHJp
bnRrKCJwa3RjZHZkOiBmYWlsZWQgZ2V0X3RyYWNrXG4iKTsKKwkJcHJpbnRrKERS
SVZFUl9OQU1FIjogZmFpbGVkIGdldF90cmFja1xuIik7CiAJCXJldHVybiByZXQ7
CiAJfQogCiAJaWYgKCFwa3Rfd3JpdGFibGVfdHJhY2socGQsICZ0aSkpIHsKLQkJ
cHJpbnRrKCJwa3RjZHZkOiBjYW4ndCB3cml0ZSB0byB0aGlzIHRyYWNrXG4iKTsK
KwkJcHJpbnRrKERSSVZFUl9OQU1FIjogY2FuJ3Qgd3JpdGUgdG8gdGhpcyB0cmFj
a1xuIik7CiAJCXJldHVybiAtRVJPRlM7CiAJfQogCkBAIC0xNjA4LDExICsxNjEw
LDExIEBAIHN0YXRpYyBpbnQgcGt0X3Byb2JlX3NldHRpbmdzKHN0cnVjdCBwa3QK
IAkgKi8KIAlwZC0+c2V0dGluZ3Muc2l6ZSA9IGJlMzJfdG9fY3B1KHRpLmZpeGVk
X3BhY2tldF9zaXplKSA8PCAyOwogCWlmIChwZC0+c2V0dGluZ3Muc2l6ZSA9PSAw
KSB7Ci0JCXByaW50aygicGt0Y2R2ZDogZGV0ZWN0ZWQgemVybyBwYWNrZXQgc2l6
ZSFcbiIpOworCQlwcmludGsoRFJJVkVSX05BTUUiOiBkZXRlY3RlZCB6ZXJvIHBh
Y2tldCBzaXplIVxuIik7CiAJCXJldHVybiAtRU5YSU87CiAJfQogCWlmIChwZC0+
c2V0dGluZ3Muc2l6ZSA+IFBBQ0tFVF9NQVhfU0VDVE9SUykgewotCQlwcmludGso
InBrdGNkdmQ6IHBhY2tldCBzaXplIGlzIHRvbyBiaWdcbiIpOworCQlwcmludGso
RFJJVkVSX05BTUUiOiBwYWNrZXQgc2l6ZSBpcyB0b28gYmlnXG4iKTsKIAkJcmV0
dXJuIC1FUk9GUzsKIAl9CiAJcGQtPnNldHRpbmdzLmZwID0gdGkuZnA7CkBAIC0x
NjU0LDcgKzE2NTYsNyBAQCBzdGF0aWMgaW50IHBrdF9wcm9iZV9zZXR0aW5ncyhz
dHJ1Y3QgcGt0CiAJCQlwZC0+c2V0dGluZ3MuYmxvY2tfbW9kZSA9IFBBQ0tFVF9C
TE9DS19NT0RFMjsKIAkJCWJyZWFrOwogCQlkZWZhdWx0OgotCQkJcHJpbnRrKCJw
a3RjZHZkOiB1bmtub3duIGRhdGEgbW9kZVxuIik7CisJCQlwcmludGsoRFJJVkVS
X05BTUUiOiB1bmtub3duIGRhdGEgbW9kZVxuIik7CiAJCQlyZXR1cm4gLUVST0ZT
OwogCX0KIAlyZXR1cm4gMDsKQEAgLTE2ODgsMTAgKzE2OTAsMTAgQEAgc3RhdGlj
IGludCBwa3Rfd3JpdGVfY2FjaGluZyhzdHJ1Y3QgcGt0YwogCWNnYy5idWZsZW4g
PSBjZ2MuY21kWzhdID0gMiArICgoYnVmWzBdIDw8IDgpIHwgKGJ1ZlsxXSAmIDB4
ZmYpKTsKIAlyZXQgPSBwa3RfbW9kZV9zZWxlY3QocGQsICZjZ2MpOwogCWlmIChy
ZXQpIHsKLQkJcHJpbnRrKCJwa3RjZHZkOiB3cml0ZSBjYWNoaW5nIGNvbnRyb2wg
ZmFpbGVkXG4iKTsKKwkJcHJpbnRrKERSSVZFUl9OQU1FIjogd3JpdGUgY2FjaGlu
ZyBjb250cm9sIGZhaWxlZFxuIik7CiAJCXBrdF9kdW1wX3NlbnNlKCZjZ2MpOwog
CX0gZWxzZSBpZiAoIXJldCAmJiBzZXQpCi0JCXByaW50aygicGt0Y2R2ZDogZW5h
YmxlZCB3cml0ZSBjYWNoaW5nIG9uICVzXG4iLCBwZC0+bmFtZSk7CisJCXByaW50
ayhEUklWRVJfTkFNRSI6IGVuYWJsZWQgd3JpdGUgY2FjaGluZyBvbiAlc1xuIiwg
cGQtPm5hbWUpOwogCXJldHVybiByZXQ7CiB9CiAKQEAgLTE4MDUsMTEgKzE4MDcs
MTEgQEAgc3RhdGljIGludCBwa3RfbWVkaWFfc3BlZWQoc3RydWN0IHBrdGNkdgog
CX0KIAogCWlmICghYnVmWzZdICYgMHg0MCkgewotCQlwcmludGsoInBrdGNkdmQ6
IERpc2MgdHlwZSBpcyBub3QgQ0QtUldcbiIpOworCQlwcmludGsoRFJJVkVSX05B
TUUiOiBEaXNjIHR5cGUgaXMgbm90IENELVJXXG4iKTsKIAkJcmV0dXJuIDE7CiAJ
fQogCWlmICghYnVmWzZdICYgMHg0KSB7Ci0JCXByaW50aygicGt0Y2R2ZDogQTEg
dmFsdWVzIG9uIG1lZGlhIGFyZSBub3QgdmFsaWQsIG1heWJlIG5vdCBDRFJXP1xu
Iik7CisJCXByaW50ayhEUklWRVJfTkFNRSI6IEExIHZhbHVlcyBvbiBtZWRpYSBh
cmUgbm90IHZhbGlkLCBtYXliZSBub3QgQ0RSVz9cbiIpOwogCQlyZXR1cm4gMTsK
IAl9CiAKQEAgLTE4MjksMTQgKzE4MzEsMTQgQEAgc3RhdGljIGludCBwa3RfbWVk
aWFfc3BlZWQoc3RydWN0IHBrdGNkdgogCQkJKnNwZWVkID0gdXNfY2x2X3RvX3Nw
ZWVkW3NwXTsKIAkJCWJyZWFrOwogCQlkZWZhdWx0OgotCQkJcHJpbnRrKCJwa3Rj
ZHZkOiBVbmtub3duIGRpc2Mgc3ViLXR5cGUgJWRcbiIsc3QpOworCQkJcHJpbnRr
KERSSVZFUl9OQU1FIjogVW5rbm93biBkaXNjIHN1Yi10eXBlICVkXG4iLHN0KTsK
IAkJCXJldHVybiAxOwogCX0KIAlpZiAoKnNwZWVkKSB7Ci0JCXByaW50aygicGt0
Y2R2ZDogTWF4LiBtZWRpYSBzcGVlZDogJWRcbiIsKnNwZWVkKTsKKwkJcHJpbnRr
KERSSVZFUl9OQU1FIjogTWF4LiBtZWRpYSBzcGVlZDogJWRcbiIsKnNwZWVkKTsK
IAkJcmV0dXJuIDA7CiAJfSBlbHNlIHsKLQkJcHJpbnRrKCJwa3RjZHZkOiBVbmtu
b3duIHNwZWVkICVkIGZvciBzdWItdHlwZSAlZFxuIixzcCxzdCk7CisJCXByaW50
ayhEUklWRVJfTkFNRSI6IFVua25vd24gc3BlZWQgJWQgZm9yIHN1Yi10eXBlICVk
XG4iLHNwLHN0KTsKIAkJcmV0dXJuIDE7CiAJfQogfQpAQCAtMTg0Nyw3ICsxODQ5
LDcgQEAgc3RhdGljIGludCBwa3RfcGVyZm9ybV9vcGMoc3RydWN0IHBrdGNkdgog
CXN0cnVjdCByZXF1ZXN0X3NlbnNlIHNlbnNlOwogCWludCByZXQ7CiAKLQlWUFJJ
TlRLKCJwa3RjZHZkOiBQZXJmb3JtaW5nIE9QQ1xuIik7CisJVlBSSU5USyhEUklW
RVJfTkFNRSI6IFBlcmZvcm1pbmcgT1BDXG4iKTsKIAogCWluaXRfY2Ryb21fY29t
bWFuZCgmY2djLCBOVUxMLCAwLCBDR0NfREFUQV9OT05FKTsKIAljZ2Muc2Vuc2Ug
PSAmc2Vuc2U7CkBAIC0xODY1LDEyICsxODY3LDEyIEBAIHN0YXRpYyBpbnQgcGt0
X29wZW5fd3JpdGUoc3RydWN0IHBrdGNkdmQKIAl1bnNpZ25lZCBpbnQgd3JpdGVf
c3BlZWQsIG1lZGlhX3dyaXRlX3NwZWVkLCByZWFkX3NwZWVkOwogCiAJaWYgKChy
ZXQgPSBwa3RfcHJvYmVfc2V0dGluZ3MocGQpKSkgewotCQlWUFJJTlRLKCJwa3Rj
ZHZkOiAlcyBmYWlsZWQgcHJvYmVcbiIsIHBkLT5uYW1lKTsKKwkJVlBSSU5USyhE
UklWRVJfTkFNRSI6ICVzIGZhaWxlZCBwcm9iZVxuIiwgcGQtPm5hbWUpOwogCQly
ZXR1cm4gcmV0OwogCX0KIAogCWlmICgocmV0ID0gcGt0X3NldF93cml0ZV9zZXR0
aW5ncyhwZCkpKSB7Ci0JCURQUklOVEsoInBrdGNkdmQ6ICVzIGZhaWxlZCBzYXZp
bmcgd3JpdGUgc2V0dGluZ3NcbiIsIHBkLT5uYW1lKTsKKwkJRFBSSU5USyhEUklW
RVJfTkFNRSI6ICVzIGZhaWxlZCBzYXZpbmcgd3JpdGUgc2V0dGluZ3NcbiIsIHBk
LT5uYW1lKTsKIAkJcmV0dXJuIC1FSU87CiAJfQogCkBAIC0xODgyLDI2ICsxODg0
LDI2IEBAIHN0YXRpYyBpbnQgcGt0X29wZW5fd3JpdGUoc3RydWN0IHBrdGNkdmQK
IAkJY2FzZSAweDEzOiAvKiBEVkQtUlcgKi8KIAkJY2FzZSAweDFhOiAvKiBEVkQr
UlcgKi8KIAkJY2FzZSAweDEyOiAvKiBEVkQtUkFNICovCi0JCQlEUFJJTlRLKCJw
a3RjZHZkOiB3cml0ZSBzcGVlZCAldWtCL3NcbiIsIHdyaXRlX3NwZWVkKTsKKwkJ
CURQUklOVEsoRFJJVkVSX05BTUUiOiB3cml0ZSBzcGVlZCAldWtCL3NcbiIsIHdy
aXRlX3NwZWVkKTsKIAkJCWJyZWFrOwogCQlkZWZhdWx0OgogCQkJaWYgKChyZXQg
PSBwa3RfbWVkaWFfc3BlZWQocGQsICZtZWRpYV93cml0ZV9zcGVlZCkpKQogCQkJ
CW1lZGlhX3dyaXRlX3NwZWVkID0gMTY7CiAJCQl3cml0ZV9zcGVlZCA9IG1pbih3
cml0ZV9zcGVlZCwgbWVkaWFfd3JpdGVfc3BlZWQgKiAxNzcpOwotCQkJRFBSSU5U
SygicGt0Y2R2ZDogd3JpdGUgc3BlZWQgJXV4XG4iLCB3cml0ZV9zcGVlZCAvIDE3
Nik7CisJCQlEUFJJTlRLKERSSVZFUl9OQU1FIjogd3JpdGUgc3BlZWQgJXV4XG4i
LCB3cml0ZV9zcGVlZCAvIDE3Nik7CiAJCQlicmVhazsKIAl9CiAJcmVhZF9zcGVl
ZCA9IHdyaXRlX3NwZWVkOwogCiAJaWYgKChyZXQgPSBwa3Rfc2V0X3NwZWVkKHBk
LCB3cml0ZV9zcGVlZCwgcmVhZF9zcGVlZCkpKSB7Ci0JCURQUklOVEsoInBrdGNk
dmQ6ICVzIGNvdWxkbid0IHNldCB3cml0ZSBzcGVlZFxuIiwgcGQtPm5hbWUpOwor
CQlEUFJJTlRLKERSSVZFUl9OQU1FIjogJXMgY291bGRuJ3Qgc2V0IHdyaXRlIHNw
ZWVkXG4iLCBwZC0+bmFtZSk7CiAJCXJldHVybiAtRUlPOwogCX0KIAlwZC0+d3Jp
dGVfc3BlZWQgPSB3cml0ZV9zcGVlZDsKIAlwZC0+cmVhZF9zcGVlZCA9IHJlYWRf
c3BlZWQ7CiAKIAlpZiAoKHJldCA9IHBrdF9wZXJmb3JtX29wYyhwZCkpKSB7Ci0J
CURQUklOVEsoInBrdGNkdmQ6ICVzIE9wdGltdW0gUG93ZXIgQ2FsaWJyYXRpb24g
ZmFpbGVkXG4iLCBwZC0+bmFtZSk7CisJCURQUklOVEsoRFJJVkVSX05BTUUiOiAl
cyBPcHRpbXVtIFBvd2VyIENhbGlicmF0aW9uIGZhaWxlZFxuIiwgcGQtPm5hbWUp
OwogCX0KIAogCXJldHVybiAwOwpAQCAtMTkyOSw3ICsxOTMxLDcgQEAgc3RhdGlj
IGludCBwa3Rfb3Blbl9kZXYoc3RydWN0IHBrdGNkdmRfZAogCQlnb3RvIG91dF9w
dXRkZXY7CiAKIAlpZiAoKHJldCA9IHBrdF9nZXRfbGFzdF93cml0dGVuKHBkLCAm
bGJhKSkpIHsKLQkJcHJpbnRrKCJwa3RjZHZkOiBwa3RfZ2V0X2xhc3Rfd3JpdHRl
biBmYWlsZWRcbiIpOworCQlwcmludGsoRFJJVkVSX05BTUUiOiBwa3RfZ2V0X2xh
c3Rfd3JpdHRlbiBmYWlsZWRcbiIpOwogCQlnb3RvIG91dF91bmNsYWltOwogCX0K
IApAQCAtMTk1OSwxMSArMTk2MSwxMSBAQCBzdGF0aWMgaW50IHBrdF9vcGVuX2Rl
dihzdHJ1Y3QgcGt0Y2R2ZF9kCiAKIAlpZiAod3JpdGUpIHsKIAkJaWYgKCFwa3Rf
Z3Jvd19wa3RsaXN0KHBkLCBDT05GSUdfQ0RST01fUEtUQ0RWRF9CVUZGRVJTKSkg
ewotCQkJcHJpbnRrKCJwa3RjZHZkOiBub3QgZW5vdWdoIG1lbW9yeSBmb3IgYnVm
ZmVyc1xuIik7CisJCQlwcmludGsoRFJJVkVSX05BTUUiOiBub3QgZW5vdWdoIG1l
bW9yeSBmb3IgYnVmZmVyc1xuIik7CiAJCQlyZXQgPSAtRU5PTUVNOwogCQkJZ290
byBvdXRfdW5jbGFpbTsKIAkJfQotCQlwcmludGsoInBrdGNkdmQ6ICVsdWtCIGF2
YWlsYWJsZSBvbiBkaXNjXG4iLCBsYmEgPDwgMSk7CisJCXByaW50ayhEUklWRVJf
TkFNRSI6ICVsdWtCIGF2YWlsYWJsZSBvbiBkaXNjXG4iLCBsYmEgPDwgMSk7CiAJ
fQogCiAJcmV0dXJuIDA7CkBAIC0xOTgzLDcgKzE5ODUsNyBAQCBvdXQ6CiBzdGF0
aWMgdm9pZCBwa3RfcmVsZWFzZV9kZXYoc3RydWN0IHBrdGNkdmRfZGV2aWNlICpw
ZCwgaW50IGZsdXNoKQogewogCWlmIChmbHVzaCAmJiBwa3RfZmx1c2hfY2FjaGUo
cGQpKQotCQlEUFJJTlRLKCJwa3RjZHZkOiAlcyBub3QgZmx1c2hpbmcgY2FjaGVc
biIsIHBkLT5uYW1lKTsKKwkJRFBSSU5USyhEUklWRVJfTkFNRSI6ICVzIG5vdCBm
bHVzaGluZyBjYWNoZVxuIiwgcGQtPm5hbWUpOwogCiAJcGt0X2xvY2tfZG9vcihw
ZCwgMCk7CiAKQEAgLTIwMDYsNyArMjAwOCw3IEBAIHN0YXRpYyBpbnQgcGt0X29w
ZW4oc3RydWN0IGlub2RlICppbm9kZSwKIAlzdHJ1Y3QgcGt0Y2R2ZF9kZXZpY2Ug
KnBkID0gTlVMTDsKIAlpbnQgcmV0OwogCi0JVlBSSU5USygicGt0Y2R2ZDogZW50
ZXJpbmcgb3BlblxuIik7CisJVlBSSU5USyhEUklWRVJfTkFNRSI6IGVudGVyaW5n
IG9wZW5cbiIpOwogCiAJbXV0ZXhfbG9jaygmY3RsX211dGV4KTsKIAlwZCA9IHBr
dF9maW5kX2Rldl9mcm9tX21pbm9yKGltaW5vcihpbm9kZSkpOwpAQCAtMjA0MCw3
ICsyMDQyLDcgQEAgc3RhdGljIGludCBwa3Rfb3BlbihzdHJ1Y3QgaW5vZGUgKmlu
b2RlLAogb3V0X2RlYzoKIAlwZC0+cmVmY250LS07CiBvdXQ6Ci0JVlBSSU5USygi
cGt0Y2R2ZDogZmFpbGVkIG9wZW4gKCVkKVxuIiwgcmV0KTsKKwlWUFJJTlRLKERS
SVZFUl9OQU1FIjogZmFpbGVkIG9wZW4gKCVkKVxuIiwgcmV0KTsKIAltdXRleF91
bmxvY2soJmN0bF9tdXRleCk7CiAJcmV0dXJuIHJldDsKIH0KQEAgLTIwODgsNyAr
MjA5MCw3IEBAIHN0YXRpYyBpbnQgcGt0X21ha2VfcmVxdWVzdChyZXF1ZXN0X3F1
ZXUKIAogCXBkID0gcS0+cXVldWVkYXRhOwogCWlmICghcGQpIHsKLQkJcHJpbnRr
KCJwa3RjZHZkOiAlcyBpbmNvcnJlY3QgcmVxdWVzdCBxdWV1ZVxuIiwgYmRldm5h
bWUoYmlvLT5iaV9iZGV2LCBiKSk7CisJCXByaW50ayhEUklWRVJfTkFNRSI6ICVz
IGluY29ycmVjdCByZXF1ZXN0IHF1ZXVlXG4iLCBiZGV2bmFtZShiaW8tPmJpX2Jk
ZXYsIGIpKTsKIAkJZ290byBlbmRfaW87CiAJfQogCkBAIC0yMTEwLDEzICsyMTEy
LDEzIEBAIHN0YXRpYyBpbnQgcGt0X21ha2VfcmVxdWVzdChyZXF1ZXN0X3F1ZXUK
IAl9CiAKIAlpZiAoIXRlc3RfYml0KFBBQ0tFVF9XUklUQUJMRSwgJnBkLT5mbGFn
cykpIHsKLQkJcHJpbnRrKCJwa3RjZHZkOiBXUklURSBmb3Igcm8gZGV2aWNlICVz
ICglbGx1KVxuIiwKKwkJcHJpbnRrKERSSVZFUl9OQU1FIjogV1JJVEUgZm9yIHJv
IGRldmljZSAlcyAoJWxsdSlcbiIsCiAJCQlwZC0+bmFtZSwgKHVuc2lnbmVkIGxv
bmcgbG9uZyliaW8tPmJpX3NlY3Rvcik7CiAJCWdvdG8gZW5kX2lvOwogCX0KIAog
CWlmICghYmlvLT5iaV9zaXplIHx8IChiaW8tPmJpX3NpemUgJSBDRF9GUkFNRVNJ
WkUpKSB7Ci0JCXByaW50aygicGt0Y2R2ZDogd3JvbmcgYmlvIHNpemVcbiIpOwor
CQlwcmludGsoRFJJVkVSX05BTUUiOiB3cm9uZyBiaW8gc2l6ZVxuIik7CiAJCWdv
dG8gZW5kX2lvOwogCX0KIApAQCAtMjMxOSw3ICsyMzIxLDcgQEAgc3RhdGljIGlu
dCBwa3RfbmV3X2RldihzdHJ1Y3QgcGt0Y2R2ZF9kZQogCXN0cnVjdCBibG9ja19k
ZXZpY2UgKmJkZXY7CiAKIAlpZiAocGQtPnBrdF9kZXYgPT0gZGV2KSB7Ci0JCXBy
aW50aygicGt0Y2R2ZDogUmVjdXJzaXZlIHNldHVwIG5vdCBhbGxvd2VkXG4iKTsK
KwkJcHJpbnRrKERSSVZFUl9OQU1FIjogUmVjdXJzaXZlIHNldHVwIG5vdCBhbGxv
d2VkXG4iKTsKIAkJcmV0dXJuIC1FQlVTWTsKIAl9CiAJZm9yIChpID0gMDsgaSA8
IE1BWF9XUklURVJTOyBpKyspIHsKQEAgLTIzMjcsMTEgKzIzMjksMTEgQEAgc3Rh
dGljIGludCBwa3RfbmV3X2RldihzdHJ1Y3QgcGt0Y2R2ZF9kZQogCQlpZiAoIXBk
MikKIAkJCWNvbnRpbnVlOwogCQlpZiAocGQyLT5iZGV2LT5iZF9kZXYgPT0gZGV2
KSB7Ci0JCQlwcmludGsoInBrdGNkdmQ6ICVzIGFscmVhZHkgc2V0dXBcbiIsIGJk
ZXZuYW1lKHBkMi0+YmRldiwgYikpOworCQkJcHJpbnRrKERSSVZFUl9OQU1FIjog
JXMgYWxyZWFkeSBzZXR1cFxuIiwgYmRldm5hbWUocGQyLT5iZGV2LCBiKSk7CiAJ
CQlyZXR1cm4gLUVCVVNZOwogCQl9CiAJCWlmIChwZDItPnBrdF9kZXYgPT0gZGV2
KSB7Ci0JCQlwcmludGsoInBrdGNkdmQ6IENhbid0IGNoYWluIHBrdGNkdmQgZGV2
aWNlc1xuIik7CisJCQlwcmludGsoRFJJVkVSX05BTUUiOiBDYW4ndCBjaGFpbiBw
a3RjZHZkIGRldmljZXNcbiIpOwogCQkJcmV0dXJuIC1FQlVTWTsKIAkJfQogCX0K
QEAgLTIzNTQsNyArMjM1Niw3IEBAIHN0YXRpYyBpbnQgcGt0X25ld19kZXYoc3Ry
dWN0IHBrdGNkdmRfZGUKIAlhdG9taWNfc2V0KCZwZC0+Y2Rydy5wZW5kaW5nX2Jp
b3MsIDApOwogCXBkLT5jZHJ3LnRocmVhZCA9IGt0aHJlYWRfcnVuKGtjZHJ3ZCwg
cGQsICIlcyIsIHBkLT5uYW1lKTsKIAlpZiAoSVNfRVJSKHBkLT5jZHJ3LnRocmVh
ZCkpIHsKLQkJcHJpbnRrKCJwa3RjZHZkOiBjYW4ndCBzdGFydCBrZXJuZWwgdGhy
ZWFkXG4iKTsKKwkJcHJpbnRrKERSSVZFUl9OQU1FIjogY2FuJ3Qgc3RhcnQga2Vy
bmVsIHRocmVhZFxuIik7CiAJCXJldCA9IC1FTk9NRU07CiAJCWdvdG8gb3V0X21l
bTsKIAl9CkBAIC0yMzY0LDcgKzIzNjYsNyBAQCBzdGF0aWMgaW50IHBrdF9uZXdf
ZGV2KHN0cnVjdCBwa3RjZHZkX2RlCiAJCXByb2MtPmRhdGEgPSBwZDsKIAkJcHJv
Yy0+cHJvY19mb3BzID0gJnBrdF9wcm9jX2ZvcHM7CiAJfQotCURQUklOVEsoInBr
dGNkdmQ6IHdyaXRlciAlcyBtYXBwZWQgdG8gJXNcbiIsIHBkLT5uYW1lLCBiZGV2
bmFtZShiZGV2LCBiKSk7CisJRFBSSU5USyhEUklWRVJfTkFNRSI6IHdyaXRlciAl
cyBtYXBwZWQgdG8gJXNcbiIsIHBkLT5uYW1lLCBiZGV2bmFtZShiZGV2LCBiKSk7
CiAJcmV0dXJuIDA7CiAKIG91dF9tZW06CkBAIC0yNDAxLDcgKzI0MDMsNyBAQCBz
dGF0aWMgaW50IHBrdF9pb2N0bChzdHJ1Y3QgaW5vZGUgKmlub2RlCiAJCXJldHVy
biBibGtkZXZfaW9jdGwocGQtPmJkZXYtPmJkX2lub2RlLCBmaWxlLCBjbWQsIGFy
Zyk7CiAKIAlkZWZhdWx0OgotCQlWUFJJTlRLKCJwa3RjZHZkOiBVbmtub3duIGlv
Y3RsIGZvciAlcyAoJXgpXG4iLCBwZC0+bmFtZSwgY21kKTsKKwkJVlBSSU5USyhE
UklWRVJfTkFNRSI6IFVua25vd24gaW9jdGwgZm9yICVzICgleClcbiIsIHBkLT5u
YW1lLCBjbWQpOwogCQlyZXR1cm4gLUVOT1RUWTsKIAl9CiAKQEAgLTI0NDYsNyAr
MjQ0OCw3IEBAIHN0YXRpYyBpbnQgcGt0X3NldHVwX2RldihzdHJ1Y3QgcGt0X2N0
cmwKIAkJaWYgKCFwa3RfZGV2c1tpZHhdKQogCQkJYnJlYWs7CiAJaWYgKGlkeCA9
PSBNQVhfV1JJVEVSUykgewotCQlwcmludGsoInBrdGNkdmQ6IG1heCAlZCB3cml0
ZXJzIHN1cHBvcnRlZFxuIiwgTUFYX1dSSVRFUlMpOworCQlwcmludGsoRFJJVkVS
X05BTUUiOiBtYXggJWQgd3JpdGVycyBzdXBwb3J0ZWRcbiIsIE1BWF9XUklURVJT
KTsKIAkJcmV0dXJuIC1FQlVTWTsKIAl9CiAKQEAgLTI0NzAsNyArMjQ3Miw3IEBA
IHN0YXRpYyBpbnQgcGt0X3NldHVwX2RldihzdHJ1Y3QgcGt0X2N0cmwKIAogCXNw
aW5fbG9ja19pbml0KCZwZC0+bG9jayk7CiAJc3Bpbl9sb2NrX2luaXQoJnBkLT5p
b3NjaGVkLmxvY2spOwotCXNwcmludGYocGQtPm5hbWUsICJwa3RjZHZkJWQiLCBp
ZHgpOworCXNwcmludGYocGQtPm5hbWUsIERSSVZFUl9OQU1FIiVkIiwgaWR4KTsK
IAlpbml0X3dhaXRxdWV1ZV9oZWFkKCZwZC0+d3F1ZXVlKTsKIAlwZC0+YmlvX3F1
ZXVlID0gUkJfUk9PVDsKIApAQCAtMjQ3OCw3ICsyNDgwLDcgQEAgc3RhdGljIGlu
dCBwa3Rfc2V0dXBfZGV2KHN0cnVjdCBwa3RfY3RybAogCWRpc2stPmZpcnN0X21p
bm9yID0gaWR4OwogCWRpc2stPmZvcHMgPSAmcGt0Y2R2ZF9vcHM7CiAJZGlzay0+
ZmxhZ3MgPSBHRU5IRF9GTF9SRU1PVkFCTEU7Ci0Jc3ByaW50ZihkaXNrLT5kaXNr
X25hbWUsICJwa3RjZHZkJWQiLCBpZHgpOworCXNwcmludGYoZGlzay0+ZGlza19u
YW1lLCBEUklWRVJfTkFNRSIlZCIsIGlkeCk7CiAJZGlzay0+cHJpdmF0ZV9kYXRh
ID0gcGQ7CiAJZGlzay0+cXVldWUgPSBibGtfYWxsb2NfcXVldWUoR0ZQX0tFUk5F
TCk7CiAJaWYgKCFkaXNrLT5xdWV1ZSkKQEAgLTI1MjAsNyArMjUyMiw3IEBAIHN0
YXRpYyBpbnQgcGt0X3JlbW92ZV9kZXYoc3RydWN0IHBrdF9jdHIKIAkJCWJyZWFr
OwogCX0KIAlpZiAoaWR4ID09IE1BWF9XUklURVJTKSB7Ci0JCURQUklOVEsoInBr
dGNkdmQ6IGRldiBub3Qgc2V0dXBcbiIpOworCQlEUFJJTlRLKERSSVZFUl9OQU1F
IjogZGV2IG5vdCBzZXR1cFxuIik7CiAJCXJldHVybiAtRU5YSU87CiAJfQogCkBA
IC0yNTMzLDcgKzI1MzUsNyBAQCBzdGF0aWMgaW50IHBrdF9yZW1vdmVfZGV2KHN0
cnVjdCBwa3RfY3RyCiAJYmxrZGV2X3B1dChwZC0+YmRldik7CiAKIAlyZW1vdmVf
cHJvY19lbnRyeShwZC0+bmFtZSwgcGt0X3Byb2MpOwotCURQUklOVEsoInBrdGNk
dmQ6IHdyaXRlciAlcyB1bm1hcHBlZFxuIiwgcGQtPm5hbWUpOworCURQUklOVEso
RFJJVkVSX05BTUUiOiB3cml0ZXIgJXMgdW5tYXBwZWRcbiIsIHBkLT5uYW1lKTsK
IAogCWRlbF9nZW5kaXNrKHBkLT5kaXNrKTsKIAlibGtfY2xlYW51cF9xdWV1ZShw
ZC0+ZGlzay0+cXVldWUpOwpAQCAtMjYxMCw3ICsyNjEyLDcgQEAgc3RhdGljIHN0
cnVjdCBmaWxlX29wZXJhdGlvbnMgcGt0X2N0bF9mbwogCiBzdGF0aWMgc3RydWN0
IG1pc2NkZXZpY2UgcGt0X21pc2MgPSB7CiAJLm1pbm9yIAkJPSBNSVNDX0RZTkFN
SUNfTUlOT1IsCi0JLm5hbWUgIAkJPSAicGt0Y2R2ZCIsCisJLm5hbWUgIAkJPSBE
UklWRVJfTkFNRSwKIAkuZm9wcyAgCQk9ICZwa3RfY3RsX2ZvcHMKIH07CiAKQEAg
LTI2MjMsOSArMjYyNSw5IEBAIHN0YXRpYyBpbnQgX19pbml0IHBrdF9pbml0KHZv
aWQpCiAJaWYgKCFwc2RfcG9vbCkKIAkJcmV0dXJuIC1FTk9NRU07CiAKLQlyZXQg
PSByZWdpc3Rlcl9ibGtkZXYocGt0X21ham9yLCAicGt0Y2R2ZCIpOworCXJldCA9
IHJlZ2lzdGVyX2Jsa2Rldihwa3RfbWFqb3IsIERSSVZFUl9OQU1FKTsKIAlpZiAo
cmV0IDwgMCkgewotCQlwcmludGsoInBrdGNkdmQ6IFVuYWJsZSB0byByZWdpc3Rl
ciBibG9jayBkZXZpY2VcbiIpOworCQlwcmludGsoRFJJVkVSX05BTUUiOiBVbmFi
bGUgdG8gcmVnaXN0ZXIgYmxvY2sgZGV2aWNlXG4iKTsKIAkJZ290byBvdXQyOwog
CX0KIAlpZiAoIXBrdF9tYWpvcikKQEAgLTI2MzMsMTggKzI2MzUsMTggQEAgc3Rh
dGljIGludCBfX2luaXQgcGt0X2luaXQodm9pZCkKIAogCXJldCA9IG1pc2NfcmVn
aXN0ZXIoJnBrdF9taXNjKTsKIAlpZiAocmV0KSB7Ci0JCXByaW50aygicGt0Y2R2
ZDogVW5hYmxlIHRvIHJlZ2lzdGVyIG1pc2MgZGV2aWNlXG4iKTsKKwkJcHJpbnRr
KERSSVZFUl9OQU1FIjogVW5hYmxlIHRvIHJlZ2lzdGVyIG1pc2MgZGV2aWNlXG4i
KTsKIAkJZ290byBvdXQ7CiAJfQogCiAJbXV0ZXhfaW5pdCgmY3RsX211dGV4KTsK
IAotCXBrdF9wcm9jID0gcHJvY19ta2RpcigicGt0Y2R2ZCIsIHByb2Nfcm9vdF9k
cml2ZXIpOworCXBrdF9wcm9jID0gcHJvY19ta2RpcihEUklWRVJfTkFNRSwgcHJv
Y19yb290X2RyaXZlcik7CiAKIAlyZXR1cm4gMDsKIAogb3V0OgotCXVucmVnaXN0
ZXJfYmxrZGV2KHBrdF9tYWpvciwgInBrdGNkdmQiKTsKKwl1bnJlZ2lzdGVyX2Js
a2Rldihwa3RfbWFqb3IsIERSSVZFUl9OQU1FKTsKIG91dDI6CiAJbWVtcG9vbF9k
ZXN0cm95KHBzZF9wb29sKTsKIAlyZXR1cm4gcmV0OwpAQCAtMjY1Miw5ICsyNjU0
LDkgQEAgb3V0MjoKIAogc3RhdGljIHZvaWQgX19leGl0IHBrdF9leGl0KHZvaWQp
CiB7Ci0JcmVtb3ZlX3Byb2NfZW50cnkoInBrdGNkdmQiLCBwcm9jX3Jvb3RfZHJp
dmVyKTsKKwlyZW1vdmVfcHJvY19lbnRyeShEUklWRVJfTkFNRSwgcHJvY19yb290
X2RyaXZlcik7CiAJbWlzY19kZXJlZ2lzdGVyKCZwa3RfbWlzYyk7Ci0JdW5yZWdp
c3Rlcl9ibGtkZXYocGt0X21ham9yLCAicGt0Y2R2ZCIpOworCXVucmVnaXN0ZXJf
YmxrZGV2KHBrdF9tYWpvciwgRFJJVkVSX05BTUUpOwogCW1lbXBvb2xfZGVzdHJv
eShwc2RfcG9vbCk7CiB9CiAK
------------du52SLlLHLlRd5wW6liyhI--

