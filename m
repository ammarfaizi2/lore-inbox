Return-Path: <linux-kernel-owner@vger.kernel.org>
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id <S131999AbRCVMVM>; Thu, 22 Mar 2001 07:21:12 -0500
Received: (majordomo@vger.kernel.org) by vger.kernel.org
	id <S132012AbRCVMVC>; Thu, 22 Mar 2001 07:21:02 -0500
Received: from mail1.dexterus.com ([212.95.255.99]:47625 "EHLO
	mail1.dexterus.com") by vger.kernel.org with ESMTP
	id <S131999AbRCVMUv>; Thu, 22 Mar 2001 07:20:51 -0500
Message-ID: <3AB9EDE3.E01A2AA8@dexterus.com>
Date: Thu, 22 Mar 2001 12:19:47 +0000
From: Vincent Sweeney <v.sweeney@dexterus.com>
Organization: Dexterus
X-Mailer: Mozilla 4.76 [en] (X11; U; SunOS 5.8 sun4u)
X-Accept-Language: en
MIME-Version: 1.0
To: "linux-kernel@vger.kernel.org" <linux-kernel@vger.kernel.org>
Subject: More 2.4 memory usage wierdness?
Content-Type: multipart/mixed;
 boundary="------------E7405ADB836A96A8D2AB0EC2"
Sender: linux-kernel-owner@vger.kernel.org
X-Mailing-List: linux-kernel@vger.kernel.org

This is a multi-part message in MIME format.
--------------E7405ADB836A96A8D2AB0EC2
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

I have a question regarding a busy box I recently updated to
'2.4.2-ac20'. It has been running for several hours without any real
problems until I started getting 'dmesg' entries like:

Out of Memory: Killed process 30293 (httpd).
Out of Memory: Killed process 32552 (mysqld).

Not a quick check with 'top' shows:

Mem:   771440K av,  396060K used,  375380K free,       0K shrd,    4972K
buff
Swap:  379416K av,  345000K used,   34416K free                  337128K
cached

I have also attached my "/proc/meminfo" & "/proc/slabinfo" details.

Basically they all show the server has 370MB of free physical memory but
its using lots of swap space and OOM is killing processes.

What gives?

Vince.

-- 
Vincent Sweeney
System Architect
--------------E7405ADB836A96A8D2AB0EC2
Content-Type: application/octet-stream;
 name="meminfo"
Content-Transfer-Encoding: base64
Content-Disposition: attachment;
 filename="meminfo"

ICAgICAgICB0b3RhbDogICAgdXNlZDogICAgZnJlZTogIHNoYXJlZDogYnVmZmVyczogIGNh
Y2hlZDoKTWVtOiAgNzg5OTU0NTYwIDQwNTIyNTQ3MiAzODQ3MjkwODggICAgICAgIDAgIDUw
NTQ0NjQgMzQ0ODgzMjAwClN3YXA6IDM4ODUyMTk4NCAzNTMyODAwMDAgMzUyNDE5ODQKTWVt
VG90YWw6ICAgICAgIDc3MTQ0MCBrQgpNZW1GcmVlOiAgICAgICAgMzc1NzEyIGtCCk1lbVNo
YXJlZDogICAgICAgICAgIDAga0IKQnVmZmVyczogICAgICAgICAgNDkzNiBrQgpDYWNoZWQ6
ICAgICAgICAgMzM2ODAwIGtCCkFjdGl2ZTogICAgICAgICAgOTI3MDAga0IKSW5hY3RfZGly
dHk6ICAgIDI0NzMxMiBrQgpJbmFjdF9jbGVhbjogICAgICAxNzI0IGtCCkluYWN0X3Rhcmdl
dDogICAgICAxMTIga0IKSGlnaFRvdGFsOiAgICAgICAgICAgMCBrQgpIaWdoRnJlZTogICAg
ICAgICAgICAwIGtCCkxvd1RvdGFsOiAgICAgICA3NzE0NDAga0IKTG93RnJlZTogICAgICAg
IDM3NTcxMiBrQgpTd2FwVG90YWw6ICAgICAgMzc5NDE2IGtCClN3YXBGcmVlOiAgICAgICAg
MzQ0MTYga0IK
--------------E7405ADB836A96A8D2AB0EC2
Content-Type: application/octet-stream;
 name="slabinfo"
Content-Transfer-Encoding: base64
Content-Disposition: attachment;
 filename="slabinfo"

c2xhYmluZm8gLSB2ZXJzaW9uOiAxLjEgKFNNUCkKa21lbV9jYWNoZSAgICAgICAgICAgIDY4
ICAgICA2OCAgICAyMzIgICAgNCAgICA0ICAgIDEgOiAgMjUyICAxMjYKaXBfY29ubnRyYWNr
ICAgICAgICAgNjkyICAgIDg2NyAgICAyMjQgICA1MCAgIDUxICAgIDEgOiAgMjUyICAxMjYK
dGNwX3R3X2J1Y2tldCAgICAgICAgMzc1ICAgIDQwMCAgICAgOTYgICAxMCAgIDEwICAgIDEg
OiAgMjUyICAxMjYKdGNwX2JpbmRfYnVja2V0ICAgICAgMjc2ICAgIDMzOSAgICAgMzIgICAg
MyAgICAzICAgIDEgOiAgMjUyICAxMjYKdGNwX29wZW5fcmVxdWVzdCAgICAgMjk1ICAgIDI5
NSAgICAgNjQgICAgNSAgICA1ICAgIDEgOiAgMjUyICAxMjYKaW5ldF9wZWVyX2NhY2hlICAg
ICAgICAwICAgICAgMCAgICAgNjQgICAgMCAgICAwICAgIDEgOiAgMjUyICAxMjYKaXBfZmli
X2hhc2ggICAgICAgICAgIDE3ICAgIDIyNiAgICAgMzIgICAgMiAgICAyICAgIDEgOiAgMjUy
ICAxMjYKaXBfZHN0X2NhY2hlICAgICAgICAgNTIxICAgIDY0OCAgICAxNjAgICAyNiAgIDI3
ICAgIDEgOiAgMjUyICAxMjYKYXJwX2NhY2hlICAgICAgICAgICAgICA1ICAgICA2MCAgICAx
MjggICAgMiAgICAyICAgIDEgOiAgMjUyICAxMjYKYmxrZGV2X3JlcXVlc3RzICAgICA0NjA4
ICAgNDY0MCAgICAgOTYgIDExNiAgMTE2ICAgIDEgOiAgMjUyICAxMjYKZG5vdGlmeSBjYWNo
ZSAgICAgICAgICAwICAgICAgMCAgICAgMjAgICAgMCAgICAwICAgIDEgOiAgMjUyICAxMjYK
ZmlsZSBsb2NrIGNhY2hlICAgICAgMTI2ICAgIDEyNiAgICAgOTIgICAgMyAgICAzICAgIDEg
OiAgMjUyICAxMjYKZmFzeW5jIGNhY2hlICAgICAgICAgICAwICAgICAgMCAgICAgMTYgICAg
MCAgICAwICAgIDEgOiAgMjUyICAxMjYKdWlkX2NhY2hlICAgICAgICAgICAgMjI2ICAgIDIy
NiAgICAgMzIgICAgMiAgICAyICAgIDEgOiAgMjUyICAxMjYKc2tidWZmX2hlYWRfY2FjaGUg
ICAxMDAzICAgMTI3MiAgICAxNjAgICA1MSAgIDUzICAgIDEgOiAgMjUyICAxMjYKc29jayAg
ICAgICAgICAgICAgICAgMzQwICAgIDM0MCAgICA4MDAgICA2OCAgIDY4ICAgIDEgOiAgMTI0
ICAgNjIKaW5vZGVfY2FjaGUgICAgICAgICAyNTc2ICAgMjU3NiAgICA0ODAgIDMyMiAgMzIy
ICAgIDEgOiAgMTI0ICAgNjIKYmRldl9jYWNoZSAgICAgICAgICAgICA2ICAgIDE3NyAgICAg
NjQgICAgMiAgICAzICAgIDEgOiAgMjUyICAxMjYKc2lncXVldWUgICAgICAgICAgICAgMTE2
ICAgIDExNiAgICAxMzIgICAgNCAgICA0ICAgIDEgOiAgMjUyICAxMjYKa2lvYnVmICAgICAg
ICAgICAgICAgICAwICAgICAgMCAgICAxMjggICAgMCAgICAwICAgIDEgOiAgMjUyICAxMjYK
ZGVudHJ5X2NhY2hlICAgICAgICAzMjE2ICAgMzU3MCAgICAxMjggIDExOSAgMTE5ICAgIDEg
OiAgMjUyICAxMjYKZHF1b3QgICAgICAgICAgICAgICAgICAwICAgICAgMCAgICAxMjggICAg
MCAgICAwICAgIDEgOiAgMjUyICAxMjYKZmlscCAgICAgICAgICAgICAgICAgOTU0ICAgMTAw
MCAgICAgOTYgICAyNSAgIDI1ICAgIDEgOiAgMjUyICAxMjYKbmFtZXNfY2FjaGUgICAgICAg
ICAgIDIzICAgICAyMyAgIDQwOTYgICAyMyAgIDIzICAgIDEgOiAgIDYwICAgMzAKYnVmZmVy
X2hlYWQgICAgICAgIDE1MDAwICAxNTAwMCAgICAgOTYgIDM3NSAgMzc1ICAgIDEgOiAgMjUy
ICAxMjYKbW1fc3RydWN0ICAgICAgICAgICAgMzAwICAgIDMzNiAgICAxNjAgICAxMyAgIDE0
ICAgIDEgOiAgMjUyICAxMjYKdm1fYXJlYV9zdHJ1Y3QgICAgICA3OTkwICAxMDM4NCAgICAg
NjQgIDE1MCAgMTc2ICAgIDEgOiAgMjUyICAxMjYKZnNfY2FjaGUgICAgICAgICAgICAgMzIx
ICAgIDM1NCAgICAgNjQgICAgNiAgICA2ICAgIDEgOiAgMjUyICAxMjYKZmlsZXNfY2FjaGUg
ICAgICAgICAgMjI1ICAgIDIyNSAgICA0MTYgICAyNSAgIDI1ICAgIDEgOiAgMTI0ICAgNjIK
c2lnbmFsX2FjdCAgICAgICAgICAgMTYyICAgIDE2MiAgIDEzMTIgICA1NCAgIDU0ICAgIDEg
OiAgIDYwICAgMzAKc2l6ZS0xMzEwNzIoRE1BKSAgICAgICAwICAgICAgMCAxMzEwNzIgICAg
MCAgICAwICAgMzIgOiAgICAwICAgIDAKc2l6ZS0xMzEwNzIgICAgICAgICAgICAwICAgICAg
MCAxMzEwNzIgICAgMCAgICAwICAgMzIgOiAgICAwICAgIDAKc2l6ZS02NTUzNihETUEpICAg
ICAgICAwICAgICAgMCAgNjU1MzYgICAgMCAgICAwICAgMTYgOiAgICAwICAgIDAKc2l6ZS02
NTUzNiAgICAgICAgICAgICAxICAgICAgMSAgNjU1MzYgICAgMSAgICAxICAgMTYgOiAgICAw
ICAgIDAKc2l6ZS0zMjc2OChETUEpICAgICAgICAwICAgICAgMCAgMzI3NjggICAgMCAgICAw
ICAgIDggOiAgICAwICAgIDAKc2l6ZS0zMjc2OCAgICAgICAgICAgICA0ICAgICAxMCAgMzI3
NjggICAgNCAgIDEwICAgIDggOiAgICAwICAgIDAKc2l6ZS0xNjM4NChETUEpICAgICAgICAw
ICAgICAgMCAgMTYzODQgICAgMCAgICAwICAgIDQgOiAgICAwICAgIDAKc2l6ZS0xNjM4NCAg
ICAgICAgICAgICAwICAgICAgMSAgMTYzODQgICAgMCAgICAxICAgIDQgOiAgICAwICAgIDAK
c2l6ZS04MTkyKERNQSkgICAgICAgICAwICAgICAgMCAgIDgxOTIgICAgMCAgICAwICAgIDIg
OiAgICAwICAgIDAKc2l6ZS04MTkyICAgICAgICAgICAgICAwICAgICAxNSAgIDgxOTIgICAg
MCAgIDE1ICAgIDIgOiAgICAwICAgIDAKc2l6ZS00MDk2KERNQSkgICAgICAgICAwICAgICAg
MCAgIDQwOTYgICAgMCAgICAwICAgIDEgOiAgIDYwICAgMzAKc2l6ZS00MDk2ICAgICAgICAg
ICAgIDkyICAgICA5MiAgIDQwOTYgICA5MiAgIDkyICAgIDEgOiAgIDYwICAgMzAKc2l6ZS0y
MDQ4KERNQSkgICAgICAgICAwICAgICAgMCAgIDIwNDggICAgMCAgICAwICAgIDEgOiAgIDYw
ICAgMzAKc2l6ZS0yMDQ4ICAgICAgICAgICAgMzQ4ICAgIDM3OCAgIDIwNDggIDE3NCAgMTg5
ICAgIDEgOiAgIDYwICAgMzAKc2l6ZS0xMDI0KERNQSkgICAgICAgICAwICAgICAgMCAgIDEw
MjQgICAgMCAgICAwICAgIDEgOiAgMTI0ICAgNjIKc2l6ZS0xMDI0ICAgICAgICAgICAgMjU0
ICAgIDMxNiAgIDEwMjQgICA2OCAgIDc5ICAgIDEgOiAgMTI0ICAgNjIKc2l6ZS01MTIoRE1B
KSAgICAgICAgICAwICAgICAgMCAgICA1MTIgICAgMCAgICAwICAgIDEgOiAgMTI0ICAgNjIK
c2l6ZS01MTIgICAgICAgICAgICAgMTIwICAgIDEyMCAgICA1MTIgICAxNSAgIDE1ICAgIDEg
OiAgMTI0ICAgNjIKc2l6ZS0yNTYoRE1BKSAgICAgICAgICAwICAgICAgMCAgICAyNTYgICAg
MCAgICAwICAgIDEgOiAgMjUyICAxMjYKc2l6ZS0yNTYgICAgICAgICAgICAgMjg1ICAgIDI4
NSAgICAyNTYgICAxOSAgIDE5ICAgIDEgOiAgMjUyICAxMjYKc2l6ZS0xMjgoRE1BKSAgICAg
ICAgICAwICAgICAgMCAgICAxMjggICAgMCAgICAwICAgIDEgOiAgMjUyICAxMjYKc2l6ZS0x
MjggICAgICAgICAgICAxMDIwICAgMTAyMCAgICAxMjggICAzNCAgIDM0ICAgIDEgOiAgMjUy
ICAxMjYKc2l6ZS02NChETUEpICAgICAgICAgICAwICAgICAgMCAgICAgNjQgICAgMCAgICAw
ICAgIDEgOiAgMjUyICAxMjYKc2l6ZS02NCAgICAgICAgICAgICAgNDI3ICAgIDc2NyAgICAg
NjQgICAxMyAgIDEzICAgIDEgOiAgMjUyICAxMjYKc2l6ZS0zMihETUEpICAgICAgICAgICAw
ICAgICAgMCAgICAgMzIgICAgMCAgICAwICAgIDEgOiAgMjUyICAxMjYKc2l6ZS0zMiAgICAg
ICAgICAgICAgODI0ICAgNjIxNSAgICAgMzIgICA1MyAgIDU1ICAgIDEgOiAgMjUyICAxMjYK

--------------E7405ADB836A96A8D2AB0EC2--

