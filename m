Return-Path: <linux-kernel-owner+willy=40w.ods.org@vger.kernel.org>
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id <S264954AbSKFKr3>; Wed, 6 Nov 2002 05:47:29 -0500
Received: (majordomo@vger.kernel.org) by vger.kernel.org
	id <S264956AbSKFKr2>; Wed, 6 Nov 2002 05:47:28 -0500
Received: from kim.it.uu.se ([130.238.12.178]:63948 "EHLO kim.it.uu.se")
	by vger.kernel.org with ESMTP id <S264954AbSKFKr2>;
	Wed, 6 Nov 2002 05:47:28 -0500
From: Mikael Pettersson <mikpe@csd.uu.se>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <15816.62663.166644.782004@kim.it.uu.se>
Date: Wed, 6 Nov 2002 11:53:59 +0100
To: george anzinger <george@mvista.com>
Cc: Ingo Molnar <mingo@elte.hu>,
       "linux-kernel@vger.kernel.org" <linux-kernel@vger.kernel.org>
Subject: Re: NMI watchdog question.
In-Reply-To: <3DC8AD8A.20494DC0@mvista.com>
References: <3DC8AD8A.20494DC0@mvista.com>
X-Mailer: VM 6.90 under Emacs 20.7.1
Sender: linux-kernel-owner@vger.kernel.org
X-Mailing-List: linux-kernel@vger.kernel.org

george anzinger writes:
 > In attempting to understand how the NMI watchdog works I
 > think I have found that:
 > 
 > a. the NMI interrupts are generated by the performance
 > counter in the cpu and
...
 > If this is so (and help me to understand if it is not), then
 > what do the timer interrupts going thru the IO_APIC have to
 > do with the NMI watchdog.

Before 2.4, the NMI watchdog was only available for SMP boxes,
since it used the I/O APIC to send NMIs to the CPUs. Then the
ability to use the *local* APIC on UP machines was introduced,
and with it the ability to drive the NMI watchdog from the CPU
itself, via performance counter overflow interrupts.

The NMI watchdog still supports both these modes of operation.
Typically, the performance counter + local APIC mode kicks in
when (a) you asked for it, or (b) you asked for the I/O APIC
mode but it wasn't available.

/Mikael
