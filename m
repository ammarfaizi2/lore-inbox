Return-Path: <linux-kernel-owner+willy=40w.ods.org@vger.kernel.org>
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id <S261920AbTCaX3u>; Mon, 31 Mar 2003 18:29:50 -0500
Received: (majordomo@vger.kernel.org) by vger.kernel.org
	id <S261921AbTCaX3u>; Mon, 31 Mar 2003 18:29:50 -0500
Received: from meg.hrz.tu-chemnitz.de ([134.109.132.57]:983 "EHLO
	meg.hrz.tu-chemnitz.de") by vger.kernel.org with ESMTP
	id <S261920AbTCaX3r>; Mon, 31 Mar 2003 18:29:47 -0500
Date: Tue, 1 Apr 2003 01:32:58 +0200
From: Ingo Oeser <ingo.oeser@informatik.tu-chemnitz.de>
To: Andrew Morton <akpm@digeo.com>
Cc: Nick Piggin <piggin@cyberone.com.au>, helgehaf@aitel.hist.no,
       erik@hensema.net, linux-kernel@vger.kernel.org
Subject: Re: Delaying writes to disk when there's no need
Message-ID: <20030401013258.G626@nightmaster.csn.tu-chemnitz.de>
References: <slrnb843gi.2tt.usenet@bender.home.hensema.net> <20030328231248.GH5147@zaurus.ucw.cz> <slrnb8gbfp.1d6.erik@bender.home.hensema.net> <3E8845A8.20107@aitel.hist.no> <3E88BAF9.8040100@cyberone.com.au> <20030331144500.17bf3a2e.akpm@digeo.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
User-Agent: Mutt/1.2i
In-Reply-To: <20030331144500.17bf3a2e.akpm@digeo.com>; from akpm@digeo.com on Mon, Mar 31, 2003 at 02:45:00PM -0800
X-Spam-Score: -32.5 (--------------------------------)
X-Scanner: exiscan for exim4 (http://duncanthrax.net/exiscan/) *1908to-0008FI-00*Tku781IMIx.*
Sender: linux-kernel-owner@vger.kernel.org
X-Mailing-List: linux-kernel@vger.kernel.org

On Mon, Mar 31, 2003 at 02:45:00PM -0800, Andrew Morton wrote:
> It could have pretty bad failure modes.  Short-lived files in /tmp now
> perform writeout, which needs to be waited on when those files are removed.

/tmp is not a problem, because this can be fixed by using tmpfs
(I use 2GB of it with 1GB of RAM).

Bad are the small writes generated by the proposed behavior. 

The disk is idle, so this is not about performance, but power
consumption. Spinning up a disk costs around 1-2 seconds, so you
should come in with at least the amount of data you write in 1-2
seconds for a spun down disk.

Regards

Ingo Oeser
-- 
Marketing ist die Kunst, Leuten Sachen zu verkaufen, die sie
nicht brauchen, mit Geld, was sie nicht haben, um Leute zu
beeindrucken, die sie nicht moegen.
