Return-Path: <linux-kernel-owner@vger.kernel.org>
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id <S286222AbRLJKxN>; Mon, 10 Dec 2001 05:53:13 -0500
Received: (majordomo@vger.kernel.org) by vger.kernel.org
	id <S286226AbRLJKxE>; Mon, 10 Dec 2001 05:53:04 -0500
Received: from inje.iskon.hr ([213.191.128.16]:51342 "EHLO inje.iskon.hr")
	by vger.kernel.org with ESMTP id <S286222AbRLJKwt>;
	Mon, 10 Dec 2001 05:52:49 -0500
To: Rui Sousa <rui.p.m.sousa@clix.pt>
Cc: <linux-kernel@vger.kernel.org>
Subject: Re: emu10k1 - interrupt storm?
In-Reply-To: <Pine.LNX.4.33.0112101127420.2868-100000@sophia-sousar2.nice.mindspeed.com>
Reply-To: zlatko.calusic@iskon.hr
X-Face: s71Vs\G4I3mB$X2=P4h[aszUL\%"`1!YRYl[JGlC57kU-`kxADX}T/Bq)Q9.$fGh7lFNb.s
 i&L3xVb:q_Pr}>Eo(@kU,c:3:64cR]m@27>1tGl1):#(bs*Ip0c}N{:JGcgOXd9H'Nwm:}jLr\FZtZ
 pri/C@\,4lW<|jrq^<):Nk%Hp@G&F"r+n1@BoH
From: Zlatko Calusic <zlatko.calusic@iskon.hr>
Date: 10 Dec 2001 11:52:38 +0100
In-Reply-To: <Pine.LNX.4.33.0112101127420.2868-100000@sophia-sousar2.nice.mindspeed.com> (Rui Sousa's message of "Mon, 10 Dec 2001 11:39:46 +0100 (CET)")
Message-ID: <dnofl7qrd5.fsf@magla.zg.iskon.hr>
User-Agent: Gnus/5.090003 (Oort Gnus v0.03) XEmacs/21.4 (Civil Service)
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Sender: linux-kernel-owner@vger.kernel.org
X-Mailing-List: linux-kernel@vger.kernel.org


Hi! Thanks for the reply!

Rui Sousa <rui.p.m.sousa@clix.pt> writes:

> On 9 Dec 2001, Zlatko Calusic wrote:
> 
> The emu10k1 only generates interrupts when playing pcm sound.
> The interrupt rate depends on the "fragment" size and is usually
> smaller than ~1000interrupts/s (this is 256bytes fragment 48Khz sample 
> rate, 16bit, stereo).
>

OK, if that's so, that means I really have a problem.

> Is it possible there is another device producing these interrupts?
> On-board devices (usb, ...) that you don't use?
> Does this happen with this kernel only?
>

I was into investigating such possibilities, but then I decided to
send an email before I dig deeper. So I'll make some more extensive
checking when I return home, later today (I'm at work now) and report
results.

> Which functions do you see listed? If it's only "emu10k1_interrupt()"
> then the interrupt was not generated by the emu10k1.

I don't have profile output at hand now, but I remember well seeing
emu10k1_waveout_bh() also. I even consulted the source for those two
functions, but audio drivers are, sad to say, not really my area of
expertise. :)

I remind, interrupts are occurring with no music playing at all. In
fact, I'm going to check things again in the single user mode and
report exact profiling data. So as to exclude esd/mixers and other
possible nuisances that could spoil measurements. And also I'm going
to compile kernel without sblive driver to see if interrupts are
present then.

Expect more data soon...
-- 
Zlatko
