Return-Path: <linux-kernel-owner@vger.kernel.org>
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id <S279798AbRK1TA1>; Wed, 28 Nov 2001 14:00:27 -0500
Received: (majordomo@vger.kernel.org) by vger.kernel.org
	id <S279927AbRK1TAR>; Wed, 28 Nov 2001 14:00:17 -0500
Received: from cc78409-a.hnglo1.ov.nl.home.com ([212.120.97.185]:6531 "EHLO
	dexter.hensema.xs4all.nl") by vger.kernel.org with ESMTP
	id <S279798AbRK1TAI>; Wed, 28 Nov 2001 14:00:08 -0500
From: spamtrap@use.reply-to (Erik Hensema)
Subject: Compilation problem in ndisc.c / 2.5.1-pre2 : possible gcc bug?
Date: 28 Nov 2001 19:00:06 GMT
Message-ID: <slrna0ad1m.4ia.spamtrap@dexter.hensema.xs4all.nl>
Reply-To: erik@hensema.net
User-Agent: slrn/0.9.6.3 (Linux)
To: linux-kernel@vger.kernel.org
Sender: linux-kernel-owner@vger.kernel.org
X-Mailing-List: linux-kernel@vger.kernel.org


I've been looking into the compile problems of net/ipv6/ndisc.c in
2.5.1-pre2 and I found that the asm generated by gcc (2.95.3) is wrong:

This is a small part of a diff betweem two asm files generated by gcc, note
the missing \n's in the wrong code:

-	
-		addl 0(%ebp), %edx
-		adcl 4(%ebp), %edx
-		adcl 8(%ebp), %edx
-		adcl 12(%ebp), %edx
-		adcl 0(%ecx), %edx
-		adcl 4(%ecx), %edx
-		adcl 8(%ecx), %edx
-		adcl 12(%ecx), %edx
-		adcl %edi, %edx
-		adcl %eax, %edx
-		adcl $0, %edx
-		
+	addl 0(%ebp), %edxadcl 4(%ebp), %edxadcl 8(%ebp), %edxadcl 12(%ebp), %edxadcl 0(%ecx), %edxadcl 4(%ecx), %edxadcl 8(%ecx), %edxadcl 12(%ecx), %edxadcl %edi, %edxadcl %eax, %edxadcl $0, %edx

I'll be looking into this further tonight.

-- 
Erik Hensema (erik@hensema.net)
I'm on the list, no need to Cc: me, though I appreciate one if your
a
mailer doesn't support the References header.
