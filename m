Return-Path: <linux-kernel-owner+willy=40w.ods.org-S261948AbVCIQJf@vger.kernel.org>
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S261948AbVCIQJf (ORCPT <rfc822;willy@w.ods.org>);
	Wed, 9 Mar 2005 11:09:35 -0500
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S262032AbVCIQGL
	(ORCPT <rfc822;linux-kernel-outgoing>);
	Wed, 9 Mar 2005 11:06:11 -0500
Received: from smtp004.mail.ukl.yahoo.com ([217.12.11.35]:2393 "HELO
	smtp004.mail.ukl.yahoo.com") by vger.kernel.org with SMTP
	id S261951AbVCIQEg (ORCPT <rfc822;linux-kernel@vger.kernel.org>);
	Wed, 9 Mar 2005 11:04:36 -0500
From: Blaisorblade <blaisorblade@yahoo.it>
To: user-mode-linux-devel@lists.sourceforge.net
Subject: Re: [uml-devel] [PATCH] UML - Make deb-pkg build target build a Debian-style user-mode-linux package
Date: Wed, 9 Mar 2005 10:03:01 +0100
User-Agent: KMail/1.7.2
Cc: Ryan Anderson <ryan@michonline.com>, Jeff Dike <jdike@addtoit.com>,
       Andrew Morton <akpm@osdl.org>,
       Linux Kernel <linux-kernel@vger.kernel.org>
References: <20050307182828.GS7828@mythryan2.michonline.com>
In-Reply-To: <20050307182828.GS7828@mythryan2.michonline.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200503091003.02120.blaisorblade@yahoo.it>
Sender: linux-kernel-owner@vger.kernel.org
X-Mailing-List: linux-kernel@vger.kernel.org

On Monday 07 March 2005 19:28, Ryan Anderson wrote:
> Make the deb-pkg build target understand the "um" arch and set up the
> package and directory structure to match a mainline-Debian style
> user-mode-linux package.
>
> This is primarily so that it stops matching, exactly, the naming
> convention used by normal, non-UML kernels generated by this command.
>
> Installing "linux-2.6.11" and "linux-2.6.11", where one is a UML kernel
> doesn't do the right thing.  This fixes that.
Yes, it must go in... only the Description is a bit problematic, since you'll 
get with the below:
Description: Linux kernel, version linux-2.6.11

Description: Linux kernel, version user-mode-linux-2.6.11
and so on... could you restore $version instead of $packagename and have a 
dual Description (taking the right UML one from the mainline-Debian package 
if you can).

For the rest, no problem I can see (but I'm no Debian user).
> @@ -60,11 +80,11 @@
>  Maintainer: $name
>  Standards-Version: 3.6.1
>
> -Package: linux-$version
> +Package: $packagename
>  Architecture: any
> -Description: Linux kernel, version $version
> +Description: Linux kernel, version $packagename
>   This package contains the Linux kernel, modules and corresponding other
> - files version $version.
> + files version $packagename
>  EOF
>
>  # Fix some ownership and permissions

-- 
Paolo Giarrusso, aka Blaisorblade
Linux registered user n. 292729
http://www.user-mode-linux.org/~blaisorblade


