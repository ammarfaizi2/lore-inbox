Return-Path: <linux-kernel-owner+willy=40w.ods.org@vger.kernel.org>
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id <S265346AbSIRF6Q>; Wed, 18 Sep 2002 01:58:16 -0400
Received: (majordomo@vger.kernel.org) by vger.kernel.org
	id <S265349AbSIRF6Q>; Wed, 18 Sep 2002 01:58:16 -0400
Received: from sccrmhc01.attbi.com ([204.127.202.61]:59641 "EHLO
	sccrmhc01.attbi.com") by vger.kernel.org with ESMTP
	id <S265346AbSIRF6L>; Wed, 18 Sep 2002 01:58:11 -0400
Date: Wed, 18 Sep 2002 02:03:06 -0400 (EDT)
From: Albert Cranford <ac9410@attbi.com>
X-X-Sender: ac9410@home1
Reply-To: Albert Cranford <ac9410@attbi.com>
To: Linus Torvalds <torvalds@transmeta.com>
cc: Kernel mailing list <linux-kernel@vger.kernel.org>
Subject: [patch 1/3] 2.5.36 i2c core drivers module_init/exit cleanup 
Message-ID: <Pine.LNX.4.44.0209180158230.358-200000@home1>
MIME-Version: 1.0
Content-Type: MULTIPART/MIXED; BOUNDARY="0-823697767-1032328986=:358"
Sender: linux-kernel-owner@vger.kernel.org
X-Mailing-List: linux-kernel@vger.kernel.org

  This message is in MIME format.  The first part should be readable text,
  while the remaining parts are likely unreadable without MIME-aware tools.
  Send mail to mime@docserver.cac.washington.edu for more info.

--0-823697767-1032328986=:358
Content-Type: TEXT/PLAIN; charset=US-ASCII

Hello Linus,
Cleanup of i2c-core, i2c-proc and i2c-dev to use new module_init and module_exit
functions.  Cleanup of old compatability statements.
Albert
-- 
ac9410@attbi.com

--0-823697767-1032328986=:358
Content-Type: TEXT/PLAIN; charset=US-ASCII; name=1-mod-cleanup-patch
Content-Transfer-Encoding: BASE64
Content-ID: <Pine.LNX.4.44.0209180203060.358@home1>
Content-Description: 
Content-Disposition: attachment; filename=1-mod-cleanup-patch

LS0tIGxpbnV4LTIuNS4zNi9kcml2ZXJzL2kyYy9pMmMtY29yZS5jLm9yaWcJ
MjAwMi0wOS0wOSAxMzozNTowMy4wMDAwMDAwMDAgLTA0MDANCisrKyBsaW51
eC9kcml2ZXJzL2kyYy9pMmMtY29yZS5jCTIwMDItMDktMTcgMjM6MjA6NTMu
MDAwMDAwMDAwIC0wNDAwDQpAQCAtMjEsNyArMjEsNyBAQA0KICAgIEFsbCBT
TUJ1cy1yZWxhdGVkIHRoaW5ncyBhcmUgd3JpdHRlbiBieSBGcm9kbyBMb29p
amFhcmQgPGZyb2RvbEBkZHMubmw+DQogICAgU01CdXMgMi4wIHN1cHBvcnQg
YnkgTWFyayBTdHVkZWJha2VyIDxtZHN4eXoxMjNAeWFob28uY29tPiAgICAg
ICAgICAgICAgICAqLw0KIA0KLS8qICRJZDogaTJjLWNvcmUuYyx2IDEuODMg
MjAwMi8wNy8wOCAwMTozNzoxNSBtZHMgRXhwICQgKi8NCisvKiAkSWQ6IGky
Yy1jb3JlLmMsdiAxLjg2IDIwMDIvMDkvMTIgMDY6NDc6MjYgYWM5NDEwIEV4
cCAkICovDQogDQogI2luY2x1ZGUgPGxpbnV4L21vZHVsZS5oPg0KICNpbmNs
dWRlIDxsaW51eC9rZXJuZWwuaD4NCkBAIC0zNiwxMCArMzYsNiBAQA0KICNp
bmNsdWRlIDxsaW51eC92ZXJzaW9uLmg+DQogI2luY2x1ZGUgPGxpbnV4L2lu
aXQuaD4NCiANCi0jaWYgTElOVVhfVkVSU0lPTl9DT0RFIDwgS0VSTkVMX1ZF
UlNJT04oMiwzLDEpDQotI2RlZmluZSBpbml0X01VVEVYKHMpIGRvIHsgKihz
KSA9IE1VVEVYOyB9IHdoaWxlKDApDQotI2VuZGlmDQotDQogI2luY2x1ZGUg
PGFzbS91YWNjZXNzLmg+DQogDQogLyogLS0tLS0gZ2xvYmFsIGRlZmluZXMg
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLSAqLw0KQEAgLTcyLDcgKzY4LDcgQEANCiBzdGF0aWMgaW50IGRy
aXZlcl9jb3VudDsNCiANCiAvKioqKiBkZWJ1ZyBsZXZlbCAqLw0KLXN0YXRp
YyBpbnQgaTJjX2RlYnVnPTE7DQorc3RhdGljIGludCBpMmNfZGVidWc9MDsN
CiANCiAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0NCiAgKiAvcHJvYyBlbnRyeSBkZWNsYXJhdGlvbnMN
CkBAIC04NCwxMCArODAsNiBAQA0KIHN0YXRpYyBpbnQgaTJjcHJvY19pbml0
KHZvaWQpOw0KIHN0YXRpYyBpbnQgaTJjcHJvY19jbGVhbnVwKHZvaWQpOw0K
IA0KLSNpZiAoTElOVVhfVkVSU0lPTl9DT0RFIDw9IEtFUk5FTF9WRVJTSU9O
KDIsMywyNykpDQotc3RhdGljIHZvaWQgbW9uaXRvcl9idXNfaTJjKHN0cnVj
dCBpbm9kZSAqaW5vZGUsIGludCBmaWxsKTsNCi0jZW5kaWYgLyogKExJTlVY
X1ZFUlNJT05fQ09ERSA+PSBLRVJORUxfVkVSU0lPTigyLDEsNTgpKSAqLw0K
LQ0KIHN0YXRpYyBzc2l6ZV90IGkyY3Byb2NfYnVzX3JlYWQoc3RydWN0IGZp
bGUgKiBmaWxlLCBjaGFyICogYnVmLHNpemVfdCBjb3VudCwgDQogICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICBsb2ZmX3QgKnBwb3MpOw0KIHN0
YXRpYyBpbnQgcmVhZF9idXNfaTJjKGNoYXIgKmJ1ZiwgY2hhciAqKnN0YXJ0
LCBvZmZfdCBvZmZzZXQsIGludCBsZW4sDQpAQCAtOTksMTIgKzkxLDYgQEAN
CiAJcmVhZDoJCWkyY3Byb2NfYnVzX3JlYWQsDQogfTsNCiANCi0jaWYgKExJ
TlVYX1ZFUlNJT05fQ09ERSA8IEtFUk5FTF9WRVJTSU9OKDIsMyw0OCkpDQot
c3RhdGljIHN0cnVjdCBpbm9kZV9vcGVyYXRpb25zIGkyY3Byb2NfaW5vZGVf
b3BlcmF0aW9ucyA9IHsNCi0JJmkyY3Byb2Nfb3BlcmF0aW9ucw0KLX07DQot
I2VuZGlmDQotDQogc3RhdGljIGludCBpMmNwcm9jX2luaXRpYWxpemVkID0g
MDsNCiANCiAjZWxzZSAvKiB1bmRlZiBDT05GSUdfUFJPQ19GUyAqLw0KQEAg
LTE2NCwxNiArMTUwLDggQEANCiAJCQlnb3RvIEVSUk9SMTsNCiAJCX0NCiAN
Ci0jaWYgKExJTlVYX1ZFUlNJT05fQ09ERSA+PSBLRVJORUxfVkVSU0lPTigy
LDMsNDgpKQ0KIAkJcHJvY19lbnRyeS0+cHJvY19mb3BzID0gJmkyY3Byb2Nf
b3BlcmF0aW9uczsNCi0jZWxzZQ0KLQkJcHJvY19lbnRyeS0+b3BzID0gJmky
Y3Byb2NfaW5vZGVfb3BlcmF0aW9uczsNCi0jZW5kaWYNCi0jaWYgKExJTlVY
X1ZFUlNJT05fQ09ERSA+PSBLRVJORUxfVkVSU0lPTigyLDMsMjcpKQ0KIAkJ
cHJvY19lbnRyeS0+b3duZXIgPSBUSElTX01PRFVMRTsNCi0jZWxzZQ0KLQkJ
cHJvY19lbnRyeS0+ZmlsbF9pbm9kZSA9ICZtb25pdG9yX2J1c19pMmM7DQot
I2VuZGlmIC8qIChMSU5VWF9WRVJTSU9OX0NPREUgPj0gS0VSTkVMX1ZFUlNJ
T04oMiwxLDU4KSkgKi8NCiAJCWFkYXAtPmlub2RlID0gcHJvY19lbnRyeS0+
bG93X2lubzsNCiAJfQ0KIA0KQEAgLTYxMSwxOCArNTg5LDYgQEANCiANCiAj
aWZkZWYgQ09ORklHX1BST0NfRlMNCiANCi0jaWYgKExJTlVYX1ZFUlNJT05f
Q09ERSA8PSBLRVJORUxfVkVSU0lPTigyLDMsMjcpKQ0KLS8qIE1vbml0b3Ig
YWNjZXNzIHRvIC9wcm9jL2J1cy9pMmMqOyBtYWtlIHVubG9hZGluZyBpMmMt
cHJvYyBpbXBvc3NpYmxlDQotICAgaWYgc29tZSBwcm9jZXNzIHN0aWxsIHVz
ZXMgaXQgb3Igc29tZSBmaWxlIGluIGl0ICovDQotdm9pZCBtb25pdG9yX2J1
c19pMmMoc3RydWN0IGlub2RlICppbm9kZSwgaW50IGZpbGwpDQotew0KLQlp
ZiAoZmlsbCkNCi0JCU1PRF9JTkNfVVNFX0NPVU5UOw0KLQllbHNlDQotCQlN
T0RfREVDX1VTRV9DT1VOVDsNCi19DQotI2VuZGlmIC8qIChMSU5VWF9WRVJT
SU9OX0NPREUgPD0gS0VSTkVMX1ZFUlNJT04oMiwzLDM3KSkgKi8NCi0NCiAv
KiBUaGlzIGZ1bmN0aW9uIGdlbmVyYXRlcyB0aGUgb3V0cHV0IGZvciAvcHJv
Yy9idXMvaTJjICovDQogaW50IHJlYWRfYnVzX2kyYyhjaGFyICpidWYsIGNo
YXIgKipzdGFydCwgb2ZmX3Qgb2Zmc2V0LCBpbnQgbGVuLCBpbnQgKmVvZiwg
DQogICAgICAgICAgICAgICAgICB2b2lkICpwcml2YXRlKQ0KQEAgLTY1OCwx
OCArNjI0LDE5IEBADQogCXN0cnVjdCBpMmNfY2xpZW50ICpjbGllbnQ7DQog
CWludCBpLGosayxvcmRlcl9ucixsZW49MCxsZW5fdG90YWw7DQogCWludCBv
cmRlcltJMkNfQ0xJRU5UX01BWF07DQorI2RlZmluZSBPVVRQVVRfTEVOR1RI
X1BFUl9MSU5FIDcwDQogDQotCWlmIChjb3VudCA+IDQwOTYpDQotCQlyZXR1
cm4gLUVJTlZBTDsgDQogCWxlbl90b3RhbCA9IGZpbGUtPmZfcG9zICsgY291
bnQ7DQotCS8qIFRvbyBiYWQgaWYgdGhpcyBnZXRzIGxvbmdlciAodW5saWtl
bHkpICovDQotCWlmIChsZW5fdG90YWwgPiA0MDk2KQ0KLQkJbGVuX3RvdGFs
ID0gNDA5NjsNCisJaWYgKGxlbl90b3RhbCA+IChJMkNfQ0xJRU5UX01BWCAq
IE9VVFBVVF9MRU5HVEhfUEVSX0xJTkUpICkNCisJCS8qIGFkanVzdCB0byBt
YXhpbXVtIGZpbGUgc2l6ZSAqLw0KKwkJbGVuX3RvdGFsID0gKEkyQ19DTElF
TlRfTUFYICogT1VUUFVUX0xFTkdUSF9QRVJfTElORSk7DQogCWZvciAoaSA9
IDA7IGkgPCBJMkNfQURBUF9NQVg7IGkrKykNCiAJCWlmIChhZGFwdGVyc1tp
XS0+aW5vZGUgPT0gaW5vZGUtPmlfaW5vKSB7DQogCQkvKiBXZSBuZWVkIGEg
Yml0IG9mIHNsYWNrIGluIHRoZSBrZXJuZWwgYnVmZmVyOyB0aGlzIG1ha2Vz
IHRoZQ0KIAkJICAgc3ByaW50ZiBzYWZlLiAqLw0KLQkJCWlmICghIChrYnVm
ID0ga21hbGxvYyhjb3VudCArIDgwLEdGUF9LRVJORUwpKSkNCisJCQlpZiAo
ISAoa2J1ZiA9IGttYWxsb2MobGVuX3RvdGFsICsNCisJCQkgICAgICAgICAg
ICAgICAgICAgICAgT1VUUFVUX0xFTkdUSF9QRVJfTElORSwNCisJCQkgICAg
ICAgICAgICAgICAgICAgICAgR0ZQX0tFUk5FTCkpKQ0KIAkJCQlyZXR1cm4g
LUVOT01FTTsNCiAJCQkvKiBPcmRlciB3aWxsIGhvbGQgdGhlIGluZGV4ZXMg
b2YgdGhlIGNsaWVudHMNCiAJCQkgICBzb3J0ZWQgYnkgYWRkcmVzcyAqLw0K
QEAgLTczMSwxMSArNjk4LDcgQEANCiAJCXJldHVybiAtRU5PRU5UOw0KICAJ
fQ0KIAlwcm9jX2J1c19pMmMtPnJlYWRfcHJvYyA9ICZyZWFkX2J1c19pMmM7
DQotI2lmIChMSU5VWF9WRVJTSU9OX0NPREUgPj0gS0VSTkVMX1ZFUlNJT04o
MiwzLDI3KSkNCiAJcHJvY19idXNfaTJjLT5vd25lciA9IFRISVNfTU9EVUxF
Ow0KLSNlbHNlDQotCXByb2NfYnVzX2kyYy0+ZmlsbF9pbm9kZSA9ICZtb25p
dG9yX2J1c19pMmM7DQotI2VuZGlmIC8qIChMSU5VWF9WRVJTSU9OX0NPREUg
Pj0gS0VSTkVMX1ZFUlNJT04oMiwzLDI3KSkgKi8NCiAJaTJjcHJvY19pbml0
aWFsaXplZCArPSAyOw0KIAlyZXR1cm4gMDsNCiB9DQpAQCAtMTQ5Miw2ICsx
NDU1LDExIEBADQogCXJldHVybiAwOw0KIH0NCiANCitzdGF0aWMgdm9pZCBf
X2V4aXQgaTJjX2V4aXQodm9pZCkNCit7DQorCWkyY3Byb2NfY2xlYW51cCgp
Ow0KK30NCisNCiAjaWZuZGVmIE1PRFVMRQ0KICNpZmRlZiBDT05GSUdfSTJD
X0NIQVJERVYNCiAJZXh0ZXJuIGludCBpMmNfZGV2X2luaXQodm9pZCk7DQpA
QCAtMTYyMiwyMCArMTU5MCwxMSBAQA0KIEVYUE9SVF9TWU1CT0woaTJjX2dl
dF9mdW5jdGlvbmFsaXR5KTsNCiBFWFBPUlRfU1lNQk9MKGkyY19jaGVja19m
dW5jdGlvbmFsaXR5KTsNCiANCi0jaWZkZWYgTU9EVUxFDQogTU9EVUxFX0FV
VEhPUigiU2ltb24gRy4gVm9nbCA8c2ltb25AdGsudW5pLWxpbnouYWMuYXQ+
Iik7DQogTU9EVUxFX0RFU0NSSVBUSU9OKCJJMkMtQnVzIG1haW4gbW9kdWxl
Iik7DQogTU9EVUxFX1BBUk0oaTJjX2RlYnVnLCAiaSIpOw0KIE1PRFVMRV9Q
QVJNX0RFU0MoaTJjX2RlYnVnLCJkZWJ1ZyBsZXZlbCIpOw0KIE1PRFVMRV9M
SUNFTlNFKCJHUEwiKTsNCiANCi1pbnQgaW5pdF9tb2R1bGUodm9pZCkgDQot
ew0KLQlyZXR1cm4gaTJjX2luaXQoKTsNCi19DQotDQotdm9pZCBjbGVhbnVw
X21vZHVsZSh2b2lkKSANCi17DQotCWkyY3Byb2NfY2xlYW51cCgpOw0KLX0N
Ci0jZW5kaWYNCittb2R1bGVfaW5pdChpMmNfaW5pdCk7DQorbW9kdWxlX2V4
aXQoaTJjX2V4aXQpOw0KLS0tIGxpbnV4LTIuNS4zNi9kcml2ZXJzL2kyYy9p
MmMtcHJvYy5jLm9yaWcJMjAwMi0wOS0xNyAyMzo0MTozOS4wMDAwMDAwMDAg
LTA0MDANCisrKyBsaW51eC9kcml2ZXJzL2kyYy9pMmMtcHJvYy5jCTIwMDIt
MDktMTcgMjM6NDM6NTguMDAwMDAwMDAwIC0wNDAwDQpAQCAtNTQsOCArNTQs
NiBAQA0KIAkJCQl2b2lkICpuZXd2YWwsIHNpemVfdCBuZXdsZW4sDQogCQkJ
CXZvaWQgKipjb250ZXh0KTsNCiANCi1pbnQgX19pbml0IHNlbnNvcnNfaW5p
dCh2b2lkKTsNCi0NCiAjZGVmaW5lIFNFTlNPUlNfRU5UUllfTUFYIDIwDQog
c3RhdGljIHN0cnVjdCBjdGxfdGFibGVfaGVhZGVyICppMmNfZW50cmllc1tT
RU5TT1JTX0VOVFJZX01BWF07DQogDQpAQCAtODE1LDM1ICs4MTMsMjMgQEAN
CiAJcmV0dXJuIDA7DQogfQ0KIA0KK3N0YXRpYyB2b2lkIF9fZXhpdCBpMmNf
Y2xlYW51cCh2b2lkKQ0KK3sNCisJaWYgKGkyY19pbml0aWFsaXplZCA+PSAx
KSB7DQorCQl1bnJlZ2lzdGVyX3N5c2N0bF90YWJsZShpMmNfcHJvY19oZWFk
ZXIpOw0KKwkJaTJjX2luaXRpYWxpemVkLS07DQorCX0NCit9DQorDQogRVhQ
T1JUX1NZTUJPTChpMmNfZGVyZWdpc3Rlcl9lbnRyeSk7DQogRVhQT1JUX1NZ
TUJPTChpMmNfZGV0ZWN0KTsNCiBFWFBPUlRfU1lNQk9MKGkyY19wcm9jX3Jl
YWwpOw0KIEVYUE9SVF9TWU1CT0woaTJjX3JlZ2lzdGVyX2VudHJ5KTsNCiBF
WFBPUlRfU1lNQk9MKGkyY19zeXNjdGxfcmVhbCk7DQogDQotI2lmZGVmIE1P
RFVMRQ0KLQ0KIE1PRFVMRV9BVVRIT1IoIkZyb2RvIExvb2lqYWFyZCA8ZnJv
ZG9sQGRkcy5ubD4iKTsNCiBNT0RVTEVfREVTQ1JJUFRJT04oImkyYy1wcm9j
IGRyaXZlciIpOw0KIE1PRFVMRV9MSUNFTlNFKCJHUEwiKTsNCiANCi1pbnQg
aTJjX2NsZWFudXAodm9pZCkNCi17DQotCWlmIChpMmNfaW5pdGlhbGl6ZWQg
Pj0gMSkgew0KLQkJdW5yZWdpc3Rlcl9zeXNjdGxfdGFibGUoaTJjX3Byb2Nf
aGVhZGVyKTsNCi0JCWkyY19pbml0aWFsaXplZC0tOw0KLQl9DQotCXJldHVy
biAwOw0KLX0NCi0NCi1pbnQgaW5pdF9tb2R1bGUodm9pZCkNCi17DQotCXJl
dHVybiBzZW5zb3JzX2luaXQoKTsNCi19DQotDQotaW50IGNsZWFudXBfbW9k
dWxlKHZvaWQpDQotew0KLQlyZXR1cm4gaTJjX2NsZWFudXAoKTsNCi19DQot
DQotI2VuZGlmCQkJCS8qIE1PRFVMRSAqLw0KK21vZHVsZV9pbml0KHNlbnNv
cnNfaW5pdCk7DQorbW9kdWxlX2V4aXQoaTJjX2NsZWFudXApOw0KLS0tIGxp
bnV4LTIuNS4zNi9kcml2ZXJzL2kyYy9pMmMtZGV2LmMub3JpZwkyMDAyLTA5
LTE3IDIzOjQ3OjQxLjAwMDAwMDAwMCAtMDQwMA0KKysrIGxpbnV4L2RyaXZl
cnMvaTJjL2kyYy1kZXYuYwkyMDAyLTA5LTE3IDIzOjUzOjM1LjAwMDAwMDAw
MCAtMDQwMA0KQEAgLTM2LDkgKzM2LDcgQEANCiAjaW5jbHVkZSA8bGludXgv
ZnMuaD4NCiAjaW5jbHVkZSA8bGludXgvc2xhYi5oPg0KICNpbmNsdWRlIDxs
aW51eC92ZXJzaW9uLmg+DQotI2lmIExJTlVYX0tFUk5FTF9WRVJTSU9OID49
IEtFUk5FTF9WRVJTSU9OKDIsNCwwKQ0KICNpbmNsdWRlIDxsaW51eC9zbXBf
bG9jay5oPg0KLSNlbmRpZiAvKiBMSU5VWF9LRVJORUxfVkVSU0lPTiA+PSBL
RVJORUxfVkVSU0lPTigyLDQsMCkgKi8NCiAjaWZkZWYgQ09ORklHX0RFVkZT
X0ZTDQogI2luY2x1ZGUgPGxpbnV4L2RldmZzX2ZzX2tlcm5lbC5oPg0KICNl
bmRpZg0KQEAgLTUyLDE2ICs1MCw4IEBADQogI2luY2x1ZGUgPGxpbnV4L2ky
Yy5oPg0KICNpbmNsdWRlIDxsaW51eC9pMmMtZGV2Lmg+DQogDQotI2lmZGVm
IE1PRFVMRQ0KLWV4dGVybiBpbnQgaW5pdF9tb2R1bGUodm9pZCk7DQotZXh0
ZXJuIGludCBjbGVhbnVwX21vZHVsZSh2b2lkKTsNCi0jZW5kaWYgLyogZGVm
IE1PRFVMRSAqLw0KLQ0KIC8qIHN0cnVjdCBmaWxlX29wZXJhdGlvbnMgY2hh
bmdlZCB0b28gb2Z0ZW4gaW4gdGhlIDIuMSBzZXJpZXMgZm9yIG5pY2UgY29k
ZSAqLw0KIA0KLSNpZiBMSU5VWF9LRVJORUxfVkVSU0lPTiA8IEtFUk5FTF9W
RVJTSU9OKDIsNCw5KQ0KLXN0YXRpYyBsb2ZmX3QgaTJjZGV2X2xzZWVrIChz
dHJ1Y3QgZmlsZSAqZmlsZSwgbG9mZl90IG9mZnNldCwgaW50IG9yaWdpbik7
DQotI2VuZGlmDQogc3RhdGljIHNzaXplX3QgaTJjZGV2X3JlYWQgKHN0cnVj
dCBmaWxlICpmaWxlLCBjaGFyICpidWYsIHNpemVfdCBjb3VudCwgDQogICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIGxvZmZfdCAqb2Zmc2V0KTsNCiBz
dGF0aWMgc3NpemVfdCBpMmNkZXZfd3JpdGUgKHN0cnVjdCBmaWxlICpmaWxl
LCBjb25zdCBjaGFyICpidWYsIHNpemVfdCBjb3VudCwgDQpAQCAtNzgsMjMg
KzY4LDkgQEANCiBzdGF0aWMgaW50IGkyY2Rldl9jb21tYW5kKHN0cnVjdCBp
MmNfY2xpZW50ICpjbGllbnQsIHVuc2lnbmVkIGludCBjbWQsDQogICAgICAg
ICAgICAgICAgICAgICAgICAgICAgdm9pZCAqYXJnKTsNCiANCi0jaWZkZWYg
TU9EVUxFDQotc3RhdGljDQotI2Vsc2UNCi1leHRlcm4NCi0jZW5kaWYNCi0g
ICAgICAgaW50IF9faW5pdCBpMmNfZGV2X2luaXQodm9pZCk7DQotc3RhdGlj
IGludCBpMmNkZXZfY2xlYW51cCh2b2lkKTsNCi0NCiBzdGF0aWMgc3RydWN0
IGZpbGVfb3BlcmF0aW9ucyBpMmNkZXZfZm9wcyA9IHsNCi0jaWYgTElOVVhf
S0VSTkVMX1ZFUlNJT04gPj0gS0VSTkVMX1ZFUlNJT04oMiw0LDApDQogCW93
bmVyOgkJVEhJU19NT0RVTEUsDQotI2VuZGlmIC8qIExJTlVYX0tFUk5FTF9W
RVJTSU9OID49IEtFUk5FTF9WRVJTSU9OKDIsNCwwKSAqLw0KLSNpZiBMSU5V
WF9LRVJORUxfVkVSU0lPTiA8IEtFUk5FTF9WRVJTSU9OKDIsNCw5KQ0KLQls
bHNlZWs6CQlpMmNkZXZfbHNlZWssDQotI2Vsc2UNCiAJbGxzZWVrOgkJbm9f
bGxzZWVrLA0KLSNlbmRpZg0KIAlyZWFkOgkJaTJjZGV2X3JlYWQsDQogCXdy
aXRlOgkJaTJjZGV2X3dyaXRlLA0KIAlpb2N0bDoJCWkyY2Rldl9pb2N0bCwN
CkBAIC0xMzIsMjAgKzEwOCw2IEBADQogDQogc3RhdGljIGludCBpMmNkZXZf
aW5pdGlhbGl6ZWQ7DQogDQotI2lmIExJTlVYX0tFUk5FTF9WRVJTSU9OIDwg
S0VSTkVMX1ZFUlNJT04oMiw0LDkpDQotLyogTm90ZSB0aGF0IHRoZSBsc2Vl
ayBmdW5jdGlvbiBpcyBjYWxsZWQgbGxzZWVrIGluIDIuMSBrZXJuZWxzLiBC
dXQgdGhpbmdzDQotICAgYXJlIGNvbXBsaWNhdGVkIGVub3VnaCBhcyBpcy4g
Ki8NCi1sb2ZmX3QgaTJjZGV2X2xzZWVrIChzdHJ1Y3QgZmlsZSAqZmlsZSwg
bG9mZl90IG9mZnNldCwgaW50IG9yaWdpbikNCi17DQotI2lmZGVmIERFQlVH
DQotCXN0cnVjdCBpbm9kZSAqaW5vZGUgPSBmaWxlLT5mX2RlbnRyeS0+ZF9p
bm9kZTsNCi0JcHJpbnRrKEtFUk5fREVCVUcgImkyYy1kZXYubzogaTJjLSVk
IGxzZWVrIHRvICVsZCBieXRlcyByZWxhdGl2ZSB0byAlZC5cbiIsDQotCSAg
ICAgICBtaW5vcihpbm9kZS0+aV9yZGV2KSwobG9uZykgb2Zmc2V0LG9yaWdp
bik7DQotI2VuZGlmIC8qIERFQlVHICovDQotCXJldHVybiAtRVNQSVBFOw0K
LX0NCi0jZW5kaWYNCi0NCiBzdGF0aWMgc3NpemVfdCBpMmNkZXZfcmVhZCAo
c3RydWN0IGZpbGUgKmZpbGUsIGNoYXIgKmJ1Ziwgc2l6ZV90IGNvdW50LA0K
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2ZmX3QgKm9mZnNldCkN
CiB7DQpAQCAtNDExLDkgKzM3Myw2IEBADQogDQogCWlmIChpMmNkZXZfYWRh
cHNbbWlub3JdLT5pbmNfdXNlKQ0KIAkJaTJjZGV2X2FkYXBzW21pbm9yXS0+
aW5jX3VzZShpMmNkZXZfYWRhcHNbbWlub3JdKTsNCi0jaWYgTElOVVhfS0VS
TkVMX1ZFUlNJT04gPCBLRVJORUxfVkVSU0lPTigyLDQsMCkNCi0JTU9EX0lO
Q19VU0VfQ09VTlQ7DQotI2VuZGlmIC8qIExJTlVYX0tFUk5FTF9WRVJTSU9O
IDwgS0VSTkVMX1ZFUlNJT04oMiw0LDApICovDQogDQogI2lmZGVmIERFQlVH
DQogCXByaW50ayhLRVJOX0RFQlVHICJpMmMtZGV2Lm86IG9wZW5lZCBpMmMt
JWRcbiIsbWlub3IpOw0KQEAgLTQyOSwxNiArMzg4LDEwIEBADQogI2lmZGVm
IERFQlVHDQogCXByaW50ayhLRVJOX0RFQlVHICJpMmMtZGV2Lm86IENsb3Nl
ZDogaTJjLSVkXG4iLCBtaW5vcik7DQogI2VuZGlmDQotI2lmIExJTlVYX0tF
Uk5FTF9WRVJTSU9OIDwgS0VSTkVMX1ZFUlNJT04oMiw0LDApDQotCU1PRF9E
RUNfVVNFX0NPVU5UOw0KLSNlbHNlIC8qIExJTlVYX0tFUk5FTF9WRVJTSU9O
ID49IEtFUk5FTF9WRVJTSU9OKDIsNCwwKSAqLw0KIAlsb2NrX2tlcm5lbCgp
Ow0KLSNlbmRpZiAvKiBMSU5VWF9LRVJORUxfVkVSU0lPTiA8IEtFUk5FTF9W
RVJTSU9OKDIsNCwwKSAqLw0KIAlpZiAoaTJjZGV2X2FkYXBzW21pbm9yXS0+
ZGVjX3VzZSkNCiAJCWkyY2Rldl9hZGFwc1ttaW5vcl0tPmRlY191c2UoaTJj
ZGV2X2FkYXBzW21pbm9yXSk7DQotI2lmIExJTlVYX0tFUk5FTF9WRVJTSU9O
ID49IEtFUk5FTF9WRVJTSU9OKDIsNCwwKQ0KIAl1bmxvY2tfa2VybmVsKCk7
DQotI2VuZGlmIC8qIExJTlVYX0tFUk5FTF9WRVJTSU9OID49IEtFUk5FTF9W
RVJTSU9OKDIsNCwwKSAqLw0KIAlyZXR1cm4gMDsNCiB9DQogDQpAQCAtNDkx
LDYgKzQ0NCwzMCBAQA0KIAlyZXR1cm4gLTE7DQogfQ0KIA0KK3N0YXRpYyB2
b2lkIGkyY2Rldl9jbGVhbnVwKHZvaWQpDQorew0KKwlpbnQgcmVzOw0KKw0K
KwlpZiAoaTJjZGV2X2luaXRpYWxpemVkID49IDIpIHsNCisJCWlmICgocmVz
ID0gaTJjX2RlbF9kcml2ZXIoJmkyY2Rldl9kcml2ZXIpKSkgew0KKwkJCXBy
aW50ayhLRVJOX0VSUiAiaTJjLWRldi5vOiBEcml2ZXIgZGVyZWdpc3RyYXRp
b24gZmFpbGVkLCAiDQorCQkJICAgICAgICJtb2R1bGUgbm90IHJlbW92ZWQu
XG4iKTsNCisJCX0NCisJaTJjZGV2X2luaXRpYWxpemVkIC0tOw0KKwl9DQor
DQorCWlmIChpMmNkZXZfaW5pdGlhbGl6ZWQgPj0gMSkgew0KKyNpZmRlZiBD
T05GSUdfREVWRlNfRlMNCisJCWRldmZzX3VucmVnaXN0ZXIoZGV2ZnNfaGFu
ZGxlKTsNCisjZW5kaWYNCisJCWlmICgocmVzID0gdW5yZWdpc3Rlcl9jaHJk
ZXYoSTJDX01BSk9SLCJpMmMiKSkpIHsNCisJCQlwcmludGsoS0VSTl9FUlIg
ImkyYy1kZXYubzogdW5hYmxlIHRvIHJlbGVhc2UgbWFqb3IgJWQgZm9yIGky
YyBidXNcbiIsDQorCQkJICAgICAgIEkyQ19NQUpPUik7DQorCQl9DQorCQlp
MmNkZXZfaW5pdGlhbGl6ZWQgLS07DQorCX0NCit9DQorDQogaW50IF9faW5p
dCBpMmNfZGV2X2luaXQodm9pZCkNCiB7DQogCWludCByZXM7DQpAQCAtNTE3
LDUwICs0OTQsMTEgQEANCiAJcmV0dXJuIDA7DQogfQ0KIA0KLWludCBpMmNk
ZXZfY2xlYW51cCh2b2lkKQ0KLXsNCi0JaW50IHJlczsNCi0NCi0JaWYgKGky
Y2Rldl9pbml0aWFsaXplZCA+PSAyKSB7DQotCQlpZiAoKHJlcyA9IGkyY19k
ZWxfZHJpdmVyKCZpMmNkZXZfZHJpdmVyKSkpIHsNCi0JCQlwcmludGsoS0VS
Tl9FUlIgImkyYy1kZXYubzogRHJpdmVyIGRlcmVnaXN0cmF0aW9uIGZhaWxl
ZCwgIg0KLQkJCSAgICAgICAibW9kdWxlIG5vdCByZW1vdmVkLlxuIik7DQot
CQkJcmV0dXJuIHJlczsNCi0JCX0NCi0JaTJjZGV2X2luaXRpYWxpemVkIC0t
Ow0KLQl9DQotDQotCWlmIChpMmNkZXZfaW5pdGlhbGl6ZWQgPj0gMSkgew0K
LSNpZmRlZiBDT05GSUdfREVWRlNfRlMNCi0JCWRldmZzX3VucmVnaXN0ZXIo
ZGV2ZnNfaGFuZGxlKTsNCi0jZW5kaWYNCi0JCWlmICgocmVzID0gdW5yZWdp
c3Rlcl9jaHJkZXYoSTJDX01BSk9SLCJpMmMiKSkpIHsNCi0JCQlwcmludGso
S0VSTl9FUlIgImkyYy1kZXYubzogdW5hYmxlIHRvIHJlbGVhc2UgbWFqb3Ig
JWQgZm9yIGkyYyBidXNcbiIsDQotCQkJICAgICAgIEkyQ19NQUpPUik7DQot
CQkJcmV0dXJuIHJlczsNCi0JCX0NCi0JCWkyY2Rldl9pbml0aWFsaXplZCAt
LTsNCi0JfQ0KLQlyZXR1cm4gMDsNCi19DQotDQogRVhQT1JUX05PX1NZTUJP
TFM7DQogDQotI2lmZGVmIE1PRFVMRQ0KLQ0KIE1PRFVMRV9BVVRIT1IoIkZy
b2RvIExvb2lqYWFyZCA8ZnJvZG9sQGRkcy5ubD4gYW5kIFNpbW9uIEcuIFZv
Z2wgPHNpbW9uQHRrLnVuaS1saW56LmFjLmF0PiIpOw0KIE1PRFVMRV9ERVND
UklQVElPTigiSTJDIC9kZXYgZW50cmllcyBkcml2ZXIiKTsNCiBNT0RVTEVf
TElDRU5TRSgiR1BMIik7DQogDQotaW50IGluaXRfbW9kdWxlKHZvaWQpDQot
ew0KLQlyZXR1cm4gaTJjX2Rldl9pbml0KCk7DQotfQ0KLQ0KLWludCBjbGVh
bnVwX21vZHVsZSh2b2lkKQ0KLXsNCi0JcmV0dXJuIGkyY2Rldl9jbGVhbnVw
KCk7DQotfQ0KLQ0KLSNlbmRpZiAvKiBkZWYgTU9EVUxFICovDQotDQorbW9k
dWxlX2luaXQoaTJjX2Rldl9pbml0KTsNCittb2R1bGVfZXhpdChpMmNkZXZf
Y2xlYW51cCk7DQo=
--0-823697767-1032328986=:358--
