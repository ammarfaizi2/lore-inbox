Return-Path: <linux-kernel-owner+akpm=40zip.com.au@vger.kernel.org>
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id <S317331AbSFCJXg>; Mon, 3 Jun 2002 05:23:36 -0400
Received: (majordomo@vger.kernel.org) by vger.kernel.org
	id <S317334AbSFCJXf>; Mon, 3 Jun 2002 05:23:35 -0400
Received: from host.alias.fr ([62.23.174.163]:7948 "EHLO host.alias.fr")
	by vger.kernel.org with ESMTP id <S317331AbSFCJX0>;
	Mon, 3 Jun 2002 05:23:26 -0400
Date: Mon, 3 Jun 2002 11:23:23 +0200 (CEST)
From: Pierrick Hascoet <pierrick.hascoet@hydromel.net>
X-X-Sender: pierrick@host.alias.fr
To: linux-kernel@vger.kernel.org
Subject: [PATCH] I2O support on alpha.
Message-ID: <Pine.LNX.4.44.0206031049010.11680-200000@host.alias.fr>
MIME-Version: 1.0
Content-Type: MULTIPART/MIXED; BOUNDARY="389981102-1238584545-1023096203=:12819"
Sender: linux-kernel-owner@vger.kernel.org
X-Mailing-List: linux-kernel@vger.kernel.org

  This message is in MIME format.  The first part should be readable text,
  while the remaining parts are likely unreadable without MIME-aware tools.
  Send mail to mime@docserver.cac.washington.edu for more info.

--389981102-1238584545-1023096203=:12819
Content-Type: TEXT/PLAIN; charset=US-ASCII


Hi,

Please find enclosed a little patch to support i2o controllers on alpha.
This patch is against 2.4.19-pre9 and works correctly with my i2o
controller used with the i2o_block driver.

Best regards,
Pierrick.


PS: Please, cc me to reply.

--389981102-1238584545-1023096203=:12819
Content-Type: TEXT/PLAIN; charset=US-ASCII; name="i2o_alpha_support.diff"
Content-Transfer-Encoding: BASE64
Content-ID: <Pine.LNX.4.44.0206031123230.12819@host.alias.fr>
Content-Description: 
Content-Disposition: attachment; filename="i2o_alpha_support.diff"

ZGlmZiAtTmF1ciBsaW51eC0yLjQuMTktcHJlOS9hcmNoL2FscGhhL2NvbmZp
Zy5pbiBsaW51eC0yLjQuMTktcHJlOS1waC9hcmNoL2FscGhhL2NvbmZpZy5p
bg0KLS0tIGxpbnV4LTIuNC4xOS1wcmU5L2FyY2gvYWxwaGEvY29uZmlnLmlu
CU1vbiBKdW4gIDMgMTE6MTM6NDcgMjAwMg0KKysrIGxpbnV4LTIuNC4xOS1w
cmU5LXBoL2FyY2gvYWxwaGEvY29uZmlnLmluCVdlZCBNYXkgMjkgMTE6NTY6
NDQgMjAwMg0KQEAgLTMyNiw2ICszMjYsNyBAQA0KIA0KIGlmIFsgIiRDT05G
SUdfUENJIiA9ICJ5IiBdOyB0aGVuDQogICBzb3VyY2UgZHJpdmVycy9tZXNz
YWdlL2Z1c2lvbi9Db25maWcuaW4NCisgIHNvdXJjZSBkcml2ZXJzL21lc3Nh
Z2UvaTJvL0NvbmZpZy5pbg0KIGZpDQogDQogaWYgWyAiJENPTkZJR19ORVQi
ID0gInkiIF07IHRoZW4NCmRpZmYgLU5hdXIgbGludXgtMi40LjE5LXByZTkv
ZHJpdmVycy9tZXNzYWdlL2kyby9pMm9fYmxvY2suYyBsaW51eC0yLjQuMTkt
cHJlOS1waC9kcml2ZXJzL21lc3NhZ2UvaTJvL2kyb19ibG9jay5jDQotLS0g
bGludXgtMi40LjE5LXByZTkvZHJpdmVycy9tZXNzYWdlL2kyby9pMm9fYmxv
Y2suYwlNb24gSnVuICAzIDExOjE0OjA0IDIwMDINCisrKyBsaW51eC0yLjQu
MTktcHJlOS1waC9kcml2ZXJzL21lc3NhZ2UvaTJvL2kyb19ibG9jay5jCVN1
biBKdW4gIDIgMTY6NTA6NTYgMjAwMg0KQEAgLTU2LDEyICs1NiwxMiBAQA0K
ICNpbmNsdWRlIDxsaW51eC9lcnJuby5oPg0KICNpbmNsdWRlIDxsaW51eC9m
aWxlLmg+DQogI2luY2x1ZGUgPGxpbnV4L2lvY3RsLmg+DQotI2luY2x1ZGUg
PGxpbnV4L2kyby5oPg0KICNpbmNsdWRlIDxsaW51eC9ibGtkZXYuaD4NCiAj
aW5jbHVkZSA8bGludXgvYmxrcGcuaD4NCiAjaW5jbHVkZSA8bGludXgvc2xh
Yi5oPg0KICNpbmNsdWRlIDxsaW51eC9oZHJlZy5oPg0KICNpbmNsdWRlIDxs
aW51eC9zcGlubG9jay5oPg0KKyNpbmNsdWRlIDxsaW51eC9pbml0Lmg+DQog
DQogI2luY2x1ZGUgPGxpbnV4L25vdGlmaWVyLmg+DQogI2luY2x1ZGUgPGxp
bnV4L3JlYm9vdC5oPg0KQEAgLTczLDYgKzczLDcgQEANCiAjaW5jbHVkZSA8
YXNtL2F0b21pYy5oPg0KICNpbmNsdWRlIDxsaW51eC9zbXBfbG9jay5oPg0K
ICNpbmNsdWRlIDxsaW51eC93YWl0Lmg+DQorI2luY2x1ZGUgPGxpbnV4L2ky
by5oPg0KIA0KICNkZWZpbmUgTUFKT1JfTlIgSTJPX01BSk9SDQogDQpAQCAt
MTEwNCw3ICsxMTA1LDcgQEANCiAJCW1zZ1swXSA9IChGSVZFX1dPUkRfTVNH
X1NJWkV8U0dMX09GRlNFVF8wKTsNCiAJCW1zZ1sxXSA9IEkyT19DTURfQkxP
Q0tfQ0ZMVVNIPDwyNHxIT1NUX1RJRDw8MTJ8ZGV2LT50aWQ7DQogCQltc2db
Ml0gPSBpMm9iX2NvbnRleHR8MHg0MDAwMDAwMDsNCi0JCW1zZ1szXSA9ICh1
MzIpcXVlcnlfZG9uZTsNCisJCW1zZ1szXSA9ICh1bnNpZ25lZCBsb25nKXF1
ZXJ5X2RvbmU7DQogCQltc2dbNF0gPSA2MDw8MTY7DQogCQlERUJVRygiRmx1
c2hpbmcuLi4iKTsNCiAJCWkyb19wb3N0X3dhaXQoZGV2LT5jb250cm9sbGVy
LCBtc2csIDIwLCA2MCk7DQpAQCAtMTExNSw3ICsxMTE2LDcgQEANCiAJCW1z
Z1swXSA9IEZJVkVfV09SRF9NU0dfU0laRXxTR0xfT0ZGU0VUXzA7DQogCQlt
c2dbMV0gPSBJMk9fQ01EX0JMT0NLX01VTkxPQ0s8PDI0fEhPU1RfVElEPDwx
MnxkZXYtPnRpZDsNCiAJCW1zZ1syXSA9IGkyb2JfY29udGV4dHwweDQwMDAw
MDAwOw0KLQkJbXNnWzNdID0gKHUzMilxdWVyeV9kb25lOw0KKwkJbXNnWzNd
ID0gKHVuc2lnbmVkIGxvbmcpcXVlcnlfZG9uZTsNCiAJCW1zZ1s0XSA9IC0x
Ow0KIAkJREVCVUcoIlVubG9ja2luZy4uLiIpOw0KIAkJaTJvX3Bvc3Rfd2Fp
dChkZXYtPmNvbnRyb2xsZXIsIG1zZywgMjAsIDIpOw0KQEAgLTE3MTgsNyAr
MTcxOSw3IEBADQogCQkJbXNnWzBdID0gRklWRV9XT1JEX01TR19TSVpFfFNH
TF9PRkZTRVRfMDsNCiAJCQltc2dbMV0gPSBJMk9fQ01EX0JMT0NLX0NGTFVT
SDw8MjR8SE9TVF9USUQ8PDEyfGRldi0+dGlkOw0KIAkJCW1zZ1syXSA9IGky
b2JfY29udGV4dHwweDQwMDAwMDAwOw0KLQkJCW1zZ1szXSA9ICh1MzIpcXVl
cnlfZG9uZTsNCisJCQltc2dbM10gPSAodW5zaWduZWQgbG9uZylxdWVyeV9k
b25lOw0KIAkJCW1zZ1s0XSA9IDYwPDwxNjsNCiAJCQkNCiAJCQlERUJVRygi
Rmx1c2hpbmcuLi4iKTsNCkBAIC0xNzMxLDcgKzE3MzIsNyBAQA0KIAkJCW1z
Z1swXSA9IEZJVkVfV09SRF9NU0dfU0laRXxTR0xfT0ZGU0VUXzA7DQogCQkJ
bXNnWzFdID0gSTJPX0NNRF9CTE9DS19NVU5MT0NLPDwyNHxIT1NUX1RJRDw8
MTJ8ZGV2LT50aWQ7DQogCQkJbXNnWzJdID0gaTJvYl9jb250ZXh0fDB4NDAw
MDAwMDA7DQotCQkJbXNnWzNdID0gKHUzMilxdWVyeV9kb25lOw0KKwkJCW1z
Z1szXSA9ICh1bnNpZ25lZCBsb25nKXF1ZXJ5X2RvbmU7DQogCQkJbXNnWzRd
ID0gLTE7DQogCQkJaTJvX3Bvc3Rfd2FpdChkZXYtPmNvbnRyb2xsZXIsIG1z
ZywgMjAsIDIpOw0KIAkJCQ0KQEAgLTE5MzQsMyArMTkzNSw0IEBADQogDQog
bW9kdWxlX2luaXQoaTJvX2Jsb2NrX2luaXQpOw0KIG1vZHVsZV9leGl0KGky
b19ibG9ja19leGl0KTsNCisNCmRpZmYgLU5hdXIgbGludXgtMi40LjE5LXBy
ZTkvZHJpdmVycy9tZXNzYWdlL2kyby9pMm9fY29uZmlnLmMgbGludXgtMi40
LjE5LXByZTktcGgvZHJpdmVycy9tZXNzYWdlL2kyby9pMm9fY29uZmlnLmMN
Ci0tLSBsaW51eC0yLjQuMTktcHJlOS9kcml2ZXJzL21lc3NhZ2UvaTJvL2ky
b19jb25maWcuYwlNb24gSnVuICAzIDExOjE0OjA0IDIwMDINCisrKyBsaW51
eC0yLjQuMTktcHJlOS1waC9kcml2ZXJzL21lc3NhZ2UvaTJvL2kyb19jb25m
aWcuYwlTdW4gSnVuICAyIDE2OjMxOjA1IDIwMDINCkBAIC0yOCw3ICsyOCw2
IEBADQogI2luY2x1ZGUgPGxpbnV4L21vZHVsZS5oPg0KICNpbmNsdWRlIDxs
aW51eC9rZXJuZWwuaD4NCiAjaW5jbHVkZSA8bGludXgvcGNpLmg+DQotI2lu
Y2x1ZGUgPGxpbnV4L2kyby5oPg0KICNpbmNsdWRlIDxsaW51eC9lcnJuby5o
Pg0KICNpbmNsdWRlIDxsaW51eC9pbml0Lmg+DQogI2luY2x1ZGUgPGxpbnV4
L3NsYWIuaD4NCkBAIC0zOSw2ICszOCw3IEBADQogDQogI2luY2x1ZGUgPGFz
bS91YWNjZXNzLmg+DQogI2luY2x1ZGUgPGFzbS9pby5oPg0KKyNpbmNsdWRl
IDxsaW51eC9pMm8uaD4NCiANCiBzdGF0aWMgaW50IGkyb19jZmdfY29udGV4
dCA9IC0xOw0KIHN0YXRpYyB2b2lkICpwYWdlX2J1ZjsNCkBAIC03NzYsNyAr
Nzc2LDcgQEANCiAJbXNnWzBdID0gRk9VUl9XT1JEX01TR19TSVpFfFNHTF9P
RkZTRVRfMDsNCiAJbXNnWzFdID0gSTJPX0NNRF9VVElMX0VWVF9SRUdJU1RF
Ujw8MjQgfCBIT1NUX1RJRDw8MTIgfCBrZGVzYy50aWQ7DQogCW1zZ1syXSA9
ICh1MzIpaTJvX2NmZ19jb250ZXh0Ow0KLQltc2dbM10gPSAodTMyKWZwLT5w
cml2YXRlX2RhdGE7DQorCW1zZ1szXSA9ICh1bnNpZ25lZCBsb25nKWZwLT5w
cml2YXRlX2RhdGE7DQogCW1zZ1s0XSA9IGtkZXNjLmV2dF9tYXNrOw0KIA0K
IAlpMm9fcG9zdF90aGlzKGlvcCwgbXNnLCAyMCk7DQpAQCAtNzg2LDcgKzc4
Niw3IEBADQogDQogc3RhdGljIGludCBpb2N0bF9ldnRfZ2V0KHVuc2lnbmVk
IGxvbmcgYXJnLCBzdHJ1Y3QgZmlsZSAqZnApDQogew0KLQl1MzIgaWQgPSAo
dTMyKWZwLT5wcml2YXRlX2RhdGE7DQorCXVuc2lnbmVkIGxvbmcgaWQgPSAo
dW5zaWduZWQgbG9uZylmcC0+cHJpdmF0ZV9kYXRhOw0KIAlzdHJ1Y3QgaTJv
X2NmZ19pbmZvICpwID0gTlVMTDsNCiAJc3RydWN0IGkyb19ldnRfZ2V0ICp1
Z2V0ID0gKHN0cnVjdCBpMm9fZXZ0X2dldCopYXJnOw0KIAlzdHJ1Y3QgaTJv
X2V2dF9nZXQga2dldDsNCkBAIC04MjQsMTAgKzgyNCwxMCBAQA0KIAlpZigh
dG1wKQ0KIAkJcmV0dXJuIC1FTk9NRU07DQogDQotCWZpbGUtPnByaXZhdGVf
ZGF0YSA9ICh2b2lkKikoaTJvX2NmZ19pbmZvX2lkKyspOw0KKwlmaWxlLT5w
cml2YXRlX2RhdGEgPSAodm9pZCopKChsb25nKWkyb19jZmdfaW5mb19pZCsr
KTsNCiAJdG1wLT5mcCA9IGZpbGU7DQogCXRtcC0+ZmFzeW5jID0gTlVMTDsN
Ci0JdG1wLT5xX2lkID0gKHUzMilmaWxlLT5wcml2YXRlX2RhdGE7DQorCXRt
cC0+cV9pZCA9ICh1bnNpZ25lZCBsb25nKWZpbGUtPnByaXZhdGVfZGF0YTsN
CiAJdG1wLT5xX2xlbiA9IDA7DQogCXRtcC0+cV9pbiA9IDA7DQogCXRtcC0+
cV9vdXQgPSAwOw0KQEAgLTg0Myw3ICs4NDMsNyBAQA0KIA0KIHN0YXRpYyBp
bnQgY2ZnX3JlbGVhc2Uoc3RydWN0IGlub2RlICppbm9kZSwgc3RydWN0IGZp
bGUgKmZpbGUpDQogew0KLQl1MzIgaWQgPSAodTMyKWZpbGUtPnByaXZhdGVf
ZGF0YTsNCisJdW5zaWduZWQgbG9uZyBpZCA9ICh1bnNpZ25lZCBsb25nKWZp
bGUtPnByaXZhdGVfZGF0YTsNCiAJc3RydWN0IGkyb19jZmdfaW5mbyAqcDEs
ICpwMjsNCiAJdW5zaWduZWQgbG9uZyBmbGFnczsNCiANCkBAIC04NzcsNyAr
ODc3LDcgQEANCiANCiBzdGF0aWMgaW50IGNmZ19mYXN5bmMoaW50IGZkLCBz
dHJ1Y3QgZmlsZSAqZnAsIGludCBvbikNCiB7DQotCXUzMiBpZCA9ICh1MzIp
ZnAtPnByaXZhdGVfZGF0YTsNCisJdW5zaWduZWQgbG9uZyBpZCA9ICh1bnNp
Z25lZCBsb25nKWZwLT5wcml2YXRlX2RhdGE7DQogCXN0cnVjdCBpMm9fY2Zn
X2luZm8gKnA7DQogDQogCWZvcihwID0gb3Blbl9maWxlczsgcDsgcCA9IHAt
Pm5leHQpDQpkaWZmIC1OYXVyIGxpbnV4LTIuNC4xOS1wcmU5L2RyaXZlcnMv
bWVzc2FnZS9pMm8vaTJvX2NvcmUuYyBsaW51eC0yLjQuMTktcHJlOS1waC9k
cml2ZXJzL21lc3NhZ2UvaTJvL2kyb19jb3JlLmMNCi0tLSBsaW51eC0yLjQu
MTktcHJlOS9kcml2ZXJzL21lc3NhZ2UvaTJvL2kyb19jb3JlLmMJTW9uIEp1
biAgMyAxMToxNDowNCAyMDAyDQorKysgbGludXgtMi40LjE5LXByZTktcGgv
ZHJpdmVycy9tZXNzYWdlL2kyby9pMm9fY29yZS5jCVN1biBKdW4gIDIgMTY6
MzM6MjcgMjAwMg0KQEAgLTI3LDggKzI3LDYgQEANCiAjaW5jbHVkZSA8bGlu
dXgva2VybmVsLmg+DQogI2luY2x1ZGUgPGxpbnV4L3BjaS5oPg0KIA0KLSNp
bmNsdWRlIDxsaW51eC9pMm8uaD4NCi0NCiAjaW5jbHVkZSA8bGludXgvZXJy
bm8uaD4NCiAjaW5jbHVkZSA8bGludXgvaW5pdC5oPg0KICNpbmNsdWRlIDxs
aW51eC9zbGFiLmg+DQpAQCAtNDYsNiArNDQsNyBAQA0KICNpbmNsdWRlIDxs
aW51eC9jb21wbGV0aW9uLmg+DQogDQogI2luY2x1ZGUgPGFzbS9pby5oPg0K
KyNpbmNsdWRlIDxsaW51eC9pMm8uaD4NCiAjaW5jbHVkZSA8bGludXgvcmVi
b290Lmg+DQogDQogI2luY2x1ZGUgImkyb19sYW4uaCINCmRpZmYgLU5hdXIg
bGludXgtMi40LjE5LXByZTkvZHJpdmVycy9tZXNzYWdlL2kyby9pMm9fcGNp
LmMgbGludXgtMi40LjE5LXByZTktcGgvZHJpdmVycy9tZXNzYWdlL2kyby9p
Mm9fcGNpLmMNCi0tLSBsaW51eC0yLjQuMTktcHJlOS9kcml2ZXJzL21lc3Nh
Z2UvaTJvL2kyb19wY2kuYwlNb24gSnVuICAzIDExOjE0OjA0IDIwMDINCisr
KyBsaW51eC0yLjQuMTktcHJlOS1waC9kcml2ZXJzL21lc3NhZ2UvaTJvL2ky
b19wY2kuYwlNb24gSnVuICAzIDEwOjUzOjA4IDIwMDINCkBAIC0yMywxMSAr
MjMsMTEgQEANCiAjaW5jbHVkZSA8bGludXgvbW9kdWxlLmg+DQogI2luY2x1
ZGUgPGxpbnV4L2tlcm5lbC5oPg0KICNpbmNsdWRlIDxsaW51eC9wY2kuaD4N
Ci0jaW5jbHVkZSA8bGludXgvaTJvLmg+DQogI2luY2x1ZGUgPGxpbnV4L2Vy
cm5vLmg+DQogI2luY2x1ZGUgPGxpbnV4L2luaXQuaD4NCiAjaW5jbHVkZSA8
bGludXgvc2xhYi5oPg0KICNpbmNsdWRlIDxhc20vaW8uaD4NCisjaW5jbHVk
ZSA8bGludXgvaTJvLmg+DQogDQogI2lmZGVmIENPTkZJR19NVFJSDQogI2lu
Y2x1ZGUgPGFzbS9tdHJyLmg+DQpAQCAtMzg0LDQgKzM4NCw0IEBADQogTU9E
VUxFX1BBUk1fREVTQyhkcHQsICJTZXQgdGhpcyBpZiB5b3Ugd2FudCB0byBk
cml2ZSBEUFQgY2FyZHMgbm9ybWFsbHkgaGFuZGxlZCBieSBkcHRfaTJvIik7
DQogbW9kdWxlX2luaXQoaTJvX3BjaV9jb3JlX2F0dGFjaCk7DQogbW9kdWxl
X2V4aXQoaTJvX3BjaV9jb3JlX2RldGFjaCk7DQotIA0KXCBObyBuZXdsaW5l
IGF0IGVuZCBvZiBmaWxlDQorIA0KZGlmZiAtTmF1ciBsaW51eC0yLjQuMTkt
cHJlOS9kcml2ZXJzL21lc3NhZ2UvaTJvL2kyb19wcm9jLmMgbGludXgtMi40
LjE5LXByZTktcGgvZHJpdmVycy9tZXNzYWdlL2kyby9pMm9fcHJvYy5jDQot
LS0gbGludXgtMi40LjE5LXByZTkvZHJpdmVycy9tZXNzYWdlL2kyby9pMm9f
cHJvYy5jCU1vbiBKdW4gIDMgMTE6MTQ6MDUgMjAwMg0KKysrIGxpbnV4LTIu
NC4xOS1wcmU5LXBoL2RyaXZlcnMvbWVzc2FnZS9pMm8vaTJvX3Byb2MuYwlT
dW4gSnVuICAyIDE2OjM1OjMxIDIwMDINCkBAIC0zNSw3ICszNSw2IEBADQog
I2luY2x1ZGUgPGxpbnV4L3R5cGVzLmg+DQogI2luY2x1ZGUgPGxpbnV4L2tl
cm5lbC5oPg0KICNpbmNsdWRlIDxsaW51eC9wY2kuaD4NCi0jaW5jbHVkZSA8
bGludXgvaTJvLmg+DQogI2luY2x1ZGUgPGxpbnV4L3Byb2NfZnMuaD4NCiAj
aW5jbHVkZSA8bGludXgvaW5pdC5oPg0KICNpbmNsdWRlIDxsaW51eC9tb2R1
bGUuaD4NCkBAIC00Myw2ICs0Miw3IEBADQogI2luY2x1ZGUgPGxpbnV4L3Nw
aW5sb2NrLmg+DQogDQogI2luY2x1ZGUgPGFzbS9pby5oPg0KKyNpbmNsdWRl
IDxsaW51eC9pMm8uaD4NCiAjaW5jbHVkZSA8YXNtL3VhY2Nlc3MuaD4NCiAj
aW5jbHVkZSA8YXNtL2J5dGVvcmRlci5oPg0KIA0K
--389981102-1238584545-1023096203=:12819--
