Return-Path: <linux-kernel-owner+willy=40w.ods.org-S261667AbUKCPjd@vger.kernel.org>
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S261667AbUKCPjd (ORCPT <rfc822;willy@w.ods.org>);
	Wed, 3 Nov 2004 10:39:33 -0500
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S261623AbUKCPer
	(ORCPT <rfc822;linux-kernel-outgoing>);
	Wed, 3 Nov 2004 10:34:47 -0500
Received: from mx1.redhat.com ([66.187.233.31]:59620 "EHLO mx1.redhat.com")
	by vger.kernel.org with ESMTP id S261663AbUKCPbi (ORCPT
	<rfc822;linux-kernel@vger.kernel.org>);
	Wed, 3 Nov 2004 10:31:38 -0500
From: David Howells <dhowells@redhat.com>
In-Reply-To: <20041103151341.GA20481@infradead.org> 
References: <20041103151341.GA20481@infradead.org>  <20041102094336.GC5841@infradead.org> <76b4a884-2c3c-11d9-91a1-0002b3163499@redhat.com> <200411011930.iA1JULvA023219@warthog.cambridge.redhat.com> <19027.1099494404@redhat.com> 
To: Christoph Hellwig <hch@infradead.org>
Cc: torvalds@osdl.org, akpm@osdl.org, davidm@snapgear.com,
       linux-kernel@vger.kernel.org, uclinux-dev@uclinux.org
Subject: Re: [PATCH 9/14] FRV: CONFIG_MMU fixes 
User-Agent: EMH/1.14.1 SEMI/1.14.5 (Awara-Onsen) FLIM/1.14.5 (Demachiyanagi) APEL/10.6 Emacs/21.3 (i386-redhat-linux-gnu) MULE/5.0 (SAKAKI)
MIME-Version: 1.0 (generated by SEMI 1.14.5 - "Awara-Onsen")
Content-Type: text/plain; charset=US-ASCII
Date: Wed, 03 Nov 2004 15:30:53 +0000
Message-ID: <19415.1099495853@redhat.com>
Sender: linux-kernel-owner@vger.kernel.org
X-Mailing-List: linux-kernel@vger.kernel.org


> > That won't work. The else-if clause has to be within the context of the
> > parent function in which it now resides.
> 
> but you can still have the body of the if clause a noop for !MMU

No, you can't. That else-if clause mustn't be there at all for !MMU. It'd be
too permissive on some nommu archs and wouldn't compile on others.

> > It might actually be better to make /proc/kcore conditional on CONFIG_MMU.
> 
> Yupp.  In fact I'm pretty sure it can't be selected for m68knommu currently.

I'll do that, and that renders the whole argument moot anyway.

David
