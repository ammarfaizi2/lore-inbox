Return-Path: <linux-kernel-owner@vger.kernel.org>
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id <S262723AbRE0Cts>; Sat, 26 May 2001 22:49:48 -0400
Received: (majordomo@vger.kernel.org) by vger.kernel.org
	id <S262724AbRE0Cti>; Sat, 26 May 2001 22:49:38 -0400
Received: from penguin.e-mind.com ([195.223.140.120]:31060 "EHLO
	penguin.e-mind.com") by vger.kernel.org with ESMTP
	id <S262723AbRE0Ctc>; Sat, 26 May 2001 22:49:32 -0400
Date: Sun, 27 May 2001 04:49:24 +0200
From: Andrea Arcangeli <andrea@suse.de>
To: Jeff Garzik <jgarzik@mandrakesoft.com>
Cc: "Ingo T. Storm" <it@lapavoni.de>, linux-kernel@vger.kernel.org
Subject: Re: 2.4.5 does not link on Ruffian (alpha)
Message-ID: <20010527044924.H1834@athlon.random>
In-Reply-To: <3B0BFE90.CE148B7@kjist.ac.kr> <20010523210923.A730@athlon.random> <022e01c0e5fc$39ac0cf0$2e2ca8c0@buxtown.de> <20010526193649.B1834@athlon.random> <20010526201442.D1834@athlon.random> <3B10521D.346E5886@mandrakesoft.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <3B10521D.346E5886@mandrakesoft.com>; from jgarzik@mandrakesoft.com on Sat, May 26, 2001 at 09:02:21PM -0400
X-GnuPG-Key-URL: http://e-mind.com/~andrea/aa.gnupg.asc
X-PGP-Key-URL: http://e-mind.com/~andrea/aa.asc
Sender: linux-kernel-owner@vger.kernel.org
X-Mailing-List: linux-kernel@vger.kernel.org

On Sat, May 26, 2001 at 09:02:21PM -0400, Jeff Garzik wrote:
> Andrea Arcangeli wrote:
> > diff -urN alpha/arch/alpha/kernel/sys_dp264.c alpha-1/arch/alpha/kernel/sys_dp264.c
> > --- alpha/arch/alpha/kernel/sys_dp264.c Sun Apr  1 01:17:07 2001
> > +++ alpha-1/arch/alpha/kernel/sys_dp264.c       Wed May 23 02:43:49 2001
> > @@ -16,15 +16,18 @@
> >  #include <linux/pci.h>
> >  #include <linux/init.h>
> > 
> > +#define __EXTERN_INLINE inline
> > +#include <asm/io.h>
> > +#include <asm/core_tsunami.h>
> > +#undef  __EXTERN_INLINE
> > +
> 
> Why is "__EXTERN_INLINE" defined as "inline" not "extern inline"?

because it must be implemented somewhere for the alpha_mv pointer to
functions and for some reason they are not implemented by
core_tsunami.c in my tree (but they are in mainline and that's right).

> I simply added "extern" and things started working (as noted in my
> previous message in this thread)..

defining it as `extern inline' is completly equivalent to backing out
the patch I posted, see core_tsunami.h:

#ifndef __EXTERN_INLINE
#define __EXTERN_INLINE extern inline
#define __IO_EXTERN_INLINE
#endif

Of course your patch works like a charm too. A cleaner fix is to backout my
patch because core_tsunami.h will define it to `extern inline'
atuomatically.

Tomorrow I'll go through the log generated by the script that did the
binary search for me while I was out to find out what patch in my tree
caused me to write the posted patch to get all compilations right.

Andrea
