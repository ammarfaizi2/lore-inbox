Return-Path: <linux-kernel-owner+willy=40w.ods.org@vger.kernel.org>
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S263734AbUCXPAf (ORCPT <rfc822;willy@w.ods.org>);
	Wed, 24 Mar 2004 10:00:35 -0500
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S263738AbUCXPAf
	(ORCPT <rfc822;linux-kernel-outgoing>);
	Wed, 24 Mar 2004 10:00:35 -0500
Received: from ns.suse.de ([195.135.220.2]:44456 "EHLO Cantor.suse.de")
	by vger.kernel.org with ESMTP id S263734AbUCXPAc (ORCPT
	<rfc822;linux-kernel@vger.kernel.org>);
	Wed, 24 Mar 2004 10:00:32 -0500
Date: Wed, 24 Mar 2004 16:00:31 +0100
Message-ID: <s5h7jxa1e9c.wl@alsa2.suse.de>
From: Takashi Iwai <tiwai@suse.de>
To: Robert Love <rml@ximian.com>
Cc: Valdis.Kletnieks@vt.edu, Andrew Morton <akpm@osdl.org>, andrea@suse.de,
       mjy@geizhals.at, linux-kernel@vger.kernel.org
Subject: Re: CONFIG_PREEMPT and server workloads
In-Reply-To: <1079734375.14039.106.camel@localhost>
References: <40591EC1.1060204@geizhals.at>
	<20040318060358.GC29530@dualathlon.random>
	<s5hlllycgz3.wl@alsa2.suse.de>
	<20040318110159.321754d8.akpm@osdl.org>
	<s5hd67ac6r8.wl@alsa2.suse.de>
	<1079637899.6363.8.camel@localhost>
	<200403192203.i2JM3nSN016646@turing-police.cc.vt.edu>
	<1079734375.14039.106.camel@localhost>
User-Agent: Wanderlust/2.10.1 (Watching The Wheels) SEMI/1.14.5 (Awara-Onsen) FLIM/1.14.5 (Demachiyanagi) APEL/10.6 MULE XEmacs/21.4 (patch 13) (Rational FORTRAN) (i386-suse-linux)
MIME-Version: 1.0 (generated by SEMI 1.14.5 - "Awara-Onsen")
Content-Type: text/plain; charset=US-ASCII
Sender: linux-kernel-owner@vger.kernel.org
X-Mailing-List: linux-kernel@vger.kernel.org

At Fri, 19 Mar 2004 17:12:55 -0500,
Robert Love wrote:
> 
> 
> > Is one of these yours?  My machine has 3 (but only one soundcard) ;)
> > 
> > %  find /proc/asound/ -name xrun_debug -ls
> >   4480    0 -r--r--r--   1 root     root            0 Mar 19 16:00 /proc/asound/card0/pcm1c/xrun_debug
> >   4470    0 -r--r--r--   1 root     root            0 Mar 19 16:00 /proc/asound/card0/pcm0c/xrun_debug
> >   4462    0 -r--r--r--   1 root     root            0 Mar 19 16:00 /proc/asound/card0/pcm0p/xrun_debug
> > 
> > (Are these 3 different controls, or 3 places to set the same variable?)
> 
> Heh :)
> 
> I suspect I need debugging enabled.

yes, please turn on CONFIG_SND_DEBUG.

these files appear in each PCM stream, so that only one of them can be
activated.  for example, pcm0p is the first PCM for playback, pcm1c
the second PCM for capture.

in the latest version of ALSA (the patchset will be submitted by
Jaroslav hopefully soon later), the debug messages are suppressed
until xrun_debug > 0 is set, because in many cases they are triggered
by the sloppy irq handler and harmless.
when xrun_debug > 1, the driver will show stacktraces together with
the xrun (overrun/underrun) notifications.

there is a new document, Documentation/sound/alsa/Procfile.txt, for
describing these and other proc files of ALSA.


Takashi
