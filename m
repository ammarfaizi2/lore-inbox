Return-Path: <linux-kernel-owner+willy=40w.ods.org@vger.kernel.org>
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S270548AbTGSVsk (ORCPT <rfc822;willy@w.ods.org>);
	Sat, 19 Jul 2003 17:48:40 -0400
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S270551AbTGSVsk
	(ORCPT <rfc822;linux-kernel-outgoing>);
	Sat, 19 Jul 2003 17:48:40 -0400
Received: from mx1.elte.hu ([157.181.1.137]:57219 "EHLO mx1.elte.hu")
	by vger.kernel.org with ESMTP id S270548AbTGSVsg (ORCPT
	<rfc822;linux-kernel@vger.kernel.org>);
	Sat, 19 Jul 2003 17:48:36 -0400
Date: Sun, 20 Jul 2003 00:02:47 +0200 (CEST)
From: Ingo Molnar <mingo@elte.hu>
Reply-To: Ingo Molnar <mingo@elte.hu>
To: linux-kernel@vger.kernel.org
Cc: linux-mm@kvack.org
Subject: [patch] 4G/4G split patch, 2.6.0-test1-G7
Message-ID: <Pine.LNX.4.44.0307192337050.13990-100000@localhost.localdomain>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
Sender: linux-kernel-owner@vger.kernel.org
X-Mailing-List: linux-kernel@vger.kernel.org


the latest 4G/4G split patch can be found at:

   http://redhat.com/~mingo/4g-patches/4g-2.6.0-test1-mm1-G7

besides being a merge to 2.6.0-test-mm1, this version also includes many
cleanups, bugfixes and speedups. All quirks are fixed and sysenter based
syscalls work now too.

Changes:

 - merge to the 2.6.0-test1-mm1 kernel

 - the 4G/4G trampoline is now linked to the high address - this is faster
   and also enabled the removal of the ugly runtime linking code.

 - removed all 4G/4G hardcoded limits, they are not generated by
   asm-offsets.c, compile-time.

 - moved the TI_ hardcoded constants to asm-offsets.c as well.

 - add remap_numa_kva() again, to fix NUMA booting.

 - fixed hardware-debug-register handling.

 - entry.S entry/exit assembly speedups. Got rid of %cr3 accesses. Reload 
   %esp only if necessary.

 - restore lcall7/lcall27 binary-compatibility gates

 - increased the TSS mappings - it should now work up to 32 CPUs.

 - increased the entry trampoline to 2 pages

 - made the FPU code not use __get_user loops for FPU conversion, but a
   conversion loop into a kernel-internal scratch area, and a user-copy 
   afterwards.

 - made the signal code use less user-copy looping in the signal-frame 
   construction code. This change and the FPU change brought down signal 
   latency from 120 usecs to 28 usecs.

 - got rid of __PAGE_OFFSET_USER, it's now done via TASK_SIZE.

 - fixed SMP deadlock in the futex code.

 - fixed the reboot code's 4G/4G-incompatible assumptions.

 - remove assumptions about the # of pmds the trampoline window uses.

Thanks go to everyone who provided feedback: Kirill Korotaev, William Lee
Irwin, Martin J. Bligh, Dave Hansen and others.

(there are no known bugs or design problems at the moment, so please
resend any item that got lost in this cycle.)

	Ingo

