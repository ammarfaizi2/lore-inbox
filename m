Return-Path: <linux-kernel-owner+willy=40w.ods.org-S261996AbULHGqg@vger.kernel.org>
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S261996AbULHGqg (ORCPT <rfc822;willy@w.ods.org>);
	Wed, 8 Dec 2004 01:46:36 -0500
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S261991AbULHGqg
	(ORCPT <rfc822;linux-kernel-outgoing>);
	Wed, 8 Dec 2004 01:46:36 -0500
Received: from NK210-202-245-3.vdsl.static.apol.com.tw ([210.202.245.3]:30418
	"EHLO uli.com.tw") by vger.kernel.org with ESMTP id S261715AbULHGp6
	(ORCPT <rfc822;linux-kernel@vger.kernel.org>);
	Wed, 8 Dec 2004 01:45:58 -0500
Subject: [patch] scsi/libata: correct bug for ULi M5281
To: Jeff Garzik <jgarzik@pobox.com>
Cc: linux-kernel@vger.kernel.org, linux-ide@vger.kernel.org,
       andrebalsa@mailingaddress.org, Peer.Chen@uli.com.tw,
       Emily.Jiang@uli.com.tw, Eric.Lo@uli.com.tw
X-Mailer: Lotus Notes R5.0 (Intl) 30 March 1999
Message-ID: <OF518056F7.FB1438A8-ON48256F64.0024A22B@uli.com.tw>
From: Clear.Zhang@uli.com.tw
Date: Wed, 8 Dec 2004 14:45:40 +0800
MIME-Version: 1.0
X-MIMETrack: Serialize by Router on ulicnm01/ULI(Release 5.0.11  |July 24, 2002) at 2004-12-08
 14:45:42,
	Itemize by SMTP Server on ulim01/ULI(Release 5.0.11  |July 24, 2002) at
 2004/12/08 02:45:44 PM,
	Serialize by Router on ulim01/ULI(Release 5.0.11  |July 24, 2002) at 2004/12/08
 02:45:46 PM
Content-type: multipart/mixed; 
	Boundary="0__=C7BBE5F7DFB724BB8f9e8a93df938690918cC7BBE5F7DFB724BB"
Content-Disposition: inline
Sender: linux-kernel-owner@vger.kernel.org
X-Mailing-List: linux-kernel@vger.kernel.org

--0__=C7BBE5F7DFB724BB8f9e8a93df938690918cC7BBE5F7DFB724BB
Content-transfer-encoding: base64
Content-type: text/plain; charset=gb2312


DQpIaSwgSmVmZg0KDQpUaGUgc2F0YV91bGkgcGF0Y2ggZm9yIG01MjgxIGxvb2tzIGZpbmUsYnV0
IHNvbWUgb2YgTTUyODEgY2hpcCdzIFBIWQ0KaXMgbm90IHN0YWJsZSBzb21ldGltZSwgc28gaXQg
bmVlZCBhIHdvcmthcm91bmQgdG8gY29ycmVjdCB0aGUgYnVnLg0KDQpwYXRjaF9NNTI4MXdvcmth
cm91bmQgaXMganVzdCBmb3IgaXQuDQoNClRoZSBwYXRjaCBpcyBhcHBsaWVkIHRvIGtlcm5lbCAy
LjYuOS4gUGxlYXNlcyBhcHBseSB0byBuZXcga2VybmVscywgdGhhbmtzDQphIGxvdC4NCg0KU2ln
bmVkLW9mZi1ieTogQ2xlYXIgWmhhbmcgPENsZWFyLlpoYW5nQHVsaS5jb20udHc+DQoNClRoYW5r
cyAgICAgICAgICAgICAgICAgICAgICAgIChTZWUgYXR0YWNoZWQgZmlsZTogcGF0Y2hfTTUyODF3
b3JrYXJvdW5kKQ0KQ2xlYXINCg0KDQoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAg
ICAgICAgSmVmZiBHYXJ6aWsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIA0K
ICAgICAgICAgICAgICAgICAgICAgIDxqZ2FyemlrQHBvYm94LmMgICAgICAgICDK1bz+yMujuiBD
bGVhci5aaGFuZ0B1bGkuY29tLnR3ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgICBvbT4gICAgICAgICAgICAgICAg
ICAgICAgs63LzaO6ICAgUGVlci5DaGVuQHVsaS5jb20udHcsIEVtaWx5LkppYW5nQHVsaS5jb20u
dHcsIEVyaWMuTG9AdWxpLmNvbS50dyAgICAgICAgDQogICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgINb3zOKjuiAgIFJlOiBbcGF0Y2hdIG5ldC90dWxpcDogQWRk
IHN1cHBvcnQgZm9yIFVMaSBNNTI2WCAgICAgICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAg
ICAgICAgICAgICAgIDIwMDQtMTEtMTcgMDU6MTIgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIA0KDQoNCg0KVGhlIHBhdGNoIGZv
cm1hdCBsb29rcyBnb29kLiAgSSB3aWxsIHJldmlldyBhbmQgYXBwbHksIHRoYW5rcy4NCg0KQlRX
LCBJIGp1c3QgbWVyZ2VkIHN1cHBvcnQgZm9yIDUyODEgU0FUQS4NCg0KVGhlIGVtYWlsIGNvbnRh
aW5pbmcgdGhpcyBwYXRjaCBpcyBhdHRhY2hlZC4gIFRoaXMgd2lsbCBhcHBlYXIgaW4gTGludXgN
Cmtlcm5lbCAyLjQuMjkgYW5kIDIuNi4xMS4NCg0KUmVnYXJkcywNCg0KICAgICAgICAgICAgIEpl
ZmYNCg0KDQoNCg0KLS0tLS3AtNfUIEplZmYgR2FyemlrIDxqZ2FyemlrQHBvYm94LmNvbT4gtcTP
+8+io6zU2iBUdWUsIDE2IE5vdiAyMDA0DQowMjoyMTozMSAtMDUwMCAtLS0tLQ0KICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIA0KICDK1bz+yMs6IGxpbnV4LWlk
ZUB2Z2VyLmtlcm5lbC5vcmcgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIA0KICAgILOty806IGxpbnV4LWtlcm5lbEB2Z2VyLmtlcm5lbC5v
cmcgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
IA0KICAgINb3zOI6IFtQQVRDSF0gVUxpIFNBVEEgZml4ZXMsIG5ldyBzdXBwb3J0IA0KICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIA0KDQoNCg0KQW5vdGhlciBv
bmUganVzdCBjaGVja2VkIGludG8gbGliYXRhLWRldi0yLjYuDQoNCg0KIGRyaXZlcnMvc2NzaS9z
YXRhX3VsaS5jIHwgICA1MQ0KKysrKysrKysrKysrKysrKysrKysrLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tDQogMSBmaWxlcyBjaGFuZ2VkLCAyMyBpbnNlcnRpb25zKCspLCAyOCBkZWxldGlv
bnMoLSkNCg0KdGhyb3VnaCB0aGVzZSBDaGFuZ2VTZXRzOg0KDQo8amdhcnppa0Bwb2JveC5jb20+
ICgwNC8xMS8xNiAxLjIxNjkpDQogICBbbGliYXRhIHNhdGFfdWxpXSBhZGQgNTI4MSBzdXBwb3J0
LCBmaXggU0FUQSBwaHkgc2V0dXAgZm9yIG90aGVycw0KDQogICBDb250cmlidXRlZCBieSBQZWVy
IENoZW4gQCBVTGkgYW5kIHRlc3RlZCBieSBhIHVzZXIuDQoNCmRpZmYgLU5ydSBhL2RyaXZlcnMv
c2NzaS9zYXRhX3VsaS5jIGIvZHJpdmVycy9zY3NpL3NhdGFfdWxpLmMNCi0tLSBhL2RyaXZlcnMv
c2NzaS9zYXRhX3VsaS5jICAgICAgICAyMDA0LTExLTE2IDAyOjE5OjU4IC0wNTowMA0KKysrIGIv
ZHJpdmVycy9zY3NpL3NhdGFfdWxpLmMgICAgICAgIDIwMDQtMTEtMTYgMDI6MTk6NTggLTA1OjAw
DQpAQCAtMzIsMTYgKzMyLDE4IEBADQogI2luY2x1ZGUgPGxpbnV4L2xpYmF0YS5oPg0KDQogI2Rl
ZmluZSBEUlZfTkFNRSAgICAgICAgInNhdGFfdWxpIg0KLSNkZWZpbmUgRFJWX1ZFUlNJT04gICAg
ICAgICAgICIwLjIiDQorI2RlZmluZSBEUlZfVkVSU0lPTiAgICAgICAgICAgIjAuNSINCg0KIGVu
dW0gew0KICAgICAgICAgICAgIHVsaV81Mjg5ICAgICAgICAgICAgICAgICAgICAgID0gMCwNCiAg
ICAgICAgICAgICB1bGlfNTI4NyAgICAgICAgICAgICAgICAgICAgICA9IDEsDQorICAgICAgICAg
ICAgdWxpXzUyODEgICAgICAgICAgICAgICAgICAgICAgPSAyLA0KDQogICAgICAgICAgICAgLyog
UENJIGNvbmZpZ3VyYXRpb24gcmVnaXN0ZXJzICovDQotICAgICAgICAgICAgVUxJX1NDUl9CQVNF
ICAgICAgICAgICAgICAgICAgICAgICAgPSAweDkwLCAvKiBzYXRhMCBwaHkgU0NSDQpyZWdpc3Rl
cnMgKi8NCi0gICAgICAgICAgICBVTElfU0FUQTFfT0ZTICAgICAgICAgICAgICAgICAgICAgICA9
IDB4MTAsIC8qIG9mZnNldCBmcm9tDQpzYXRhMC0+c2F0YTEgcGh5IHJlZ3MgKi8NCi0NCisgICAg
ICAgICAgICBVTEk1Mjg3X0JBU0UgICAgICAgICAgICAgICAgICAgICAgICA9IDB4OTAsIC8qIHNh
dGEwIHBoeSBTQ1INCnJlZ2lzdGVycyAqLw0KKyAgICAgICAgICAgIFVMSTUyODdfT0ZGUyAgICAg
ICAgICAgICAgICAgICAgICAgID0gMHgxMCwgLyogb2Zmc2V0IGZyb20NCnNhdGEwLT5zYXRhMSBw
aHkgcmVncyAqLw0KKyAgICAgICAgICAgIFVMSTUyODFfQkFTRSAgICAgICAgICAgICAgICAgICAg
ICAgID0gMHg2MCwgLyogc2F0YTAgcGh5IFNDUg0KcmVnaXN0ZXJzICovDQorICAgICAgICAgICAg
VUxJNTI4MV9PRkZTICAgICAgICAgICAgICAgICAgICAgICAgPSAweDYwLCAvKiBvZmZzZXQgZnJv
bQ0Kc2F0YTAtPnNhdGExIHBoeSByZWdzICovDQogfTsNCg0KIHN0YXRpYyBpbnQgdWxpX2luaXRf
b25lIChzdHJ1Y3QgcGNpX2RldiAqcGRldiwgY29uc3Qgc3RydWN0IHBjaV9kZXZpY2VfaWQNCipl
bnQpOw0KQEAgLTUxLDYgKzUzLDcgQEANCiBzdGF0aWMgc3RydWN0IHBjaV9kZXZpY2VfaWQgdWxp
X3BjaV90YmxbXSA9IHsNCiAgICAgICAgICAgICB7IFBDSV9WRU5ET1JfSURfQUwsIDB4NTI4OSwg
UENJX0FOWV9JRCwgUENJX0FOWV9JRCwgMCwgMCwNCnVsaV81Mjg5IH0sDQogICAgICAgICAgICAg
eyBQQ0lfVkVORE9SX0lEX0FMLCAweDUyODcsIFBDSV9BTllfSUQsIFBDSV9BTllfSUQsIDAsIDAs
DQp1bGlfNTI4NyB9LA0KKyAgICAgICAgICAgIHsgUENJX1ZFTkRPUl9JRF9BTCwgMHg1MjgxLCBQ
Q0lfQU5ZX0lELCBQQ0lfQU5ZX0lELCAwLCAwLA0KdWxpXzUyODEgfSwNCiAgICAgICAgICAgICB7
IH0gICAgICAgICAvKiB0ZXJtaW5hdGUgbGlzdCAqLw0KIH07DQoNCkBAIC0xMjUsMzMgKzEyOCwx
NSBAQA0KIE1PRFVMRV9ERVZJQ0VfVEFCTEUocGNpLCB1bGlfcGNpX3RibCk7DQogTU9EVUxFX1ZF
UlNJT04oRFJWX1ZFUlNJT04pOw0KDQotc3RhdGljIHVuc2lnbmVkIGludCBnZXRfc2NyX2NmZ19h
ZGRyKHVuc2lnbmVkIGludCBwb3J0X25vLCB1bnNpZ25lZCBpbnQNCnNjX3JlZykNCitzdGF0aWMg
dW5zaWduZWQgaW50IGdldF9zY3JfY2ZnX2FkZHIoc3RydWN0IGF0YV9wb3J0ICphcCwgdW5zaWdu
ZWQgaW50DQpzY19yZWcpDQogew0KLSAgICAgICAgICAgIHVuc2lnbmVkIGludCBhZGRyID0gVUxJ
X1NDUl9CQVNFICsgKDQgKiBzY19yZWcpOw0KLQ0KLSAgICAgICAgICAgIHN3aXRjaCAocG9ydF9u
bykgew0KLSAgICAgICAgICAgIGNhc2UgMDoNCi0gICAgICAgICAgICAgICAgICAgICAgICBicmVh
azsNCi0gICAgICAgICAgICBjYXNlIDE6DQotICAgICAgICAgICAgICAgICAgICAgICAgYWRkciAr
PSBVTElfU0FUQTFfT0ZTOw0KLSAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KLSAgICAg
ICAgICAgIGNhc2UgMjoNCi0gICAgICAgICAgICAgICAgICAgICAgICBhZGRyICs9IFVMSV9TQVRB
MV9PRlMqNDsNCi0gICAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCi0gICAgICAgICAgICBj
YXNlIDM6DQotICAgICAgICAgICAgICAgICAgICAgICAgYWRkciArPSBVTElfU0FUQTFfT0ZTKjU7
DQotICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQotICAgICAgICAgICAgZGVmYXVsdDoN
Ci0gICAgICAgICAgICAgICAgICAgICAgICBCVUcoKTsNCi0gICAgICAgICAgICAgICAgICAgICAg
ICBicmVhazsNCi0gICAgICAgICAgICB9DQotICAgICAgICAgICAgcmV0dXJuIGFkZHI7DQorICAg
ICAgICAgICAgcmV0dXJuIGFwLT5pb2FkZHIuc2NyX2FkZHIgKyAoNCAqIHNjX3JlZyk7DQogfQ0K
DQogc3RhdGljIHUzMiB1bGlfc2NyX2NmZ19yZWFkIChzdHJ1Y3QgYXRhX3BvcnQgKmFwLCB1bnNp
Z25lZCBpbnQgc2NfcmVnKQ0KIHsNCiAgICAgICAgICAgICBzdHJ1Y3QgcGNpX2RldiAqcGRldiA9
IHRvX3BjaV9kZXYoYXAtPmhvc3Rfc2V0LT5kZXYpOw0KLSAgICAgICAgICAgIHVuc2lnbmVkIGlu
dCBjZmdfYWRkciA9IGdldF9zY3JfY2ZnX2FkZHIoYXAtPnBvcnRfbm8sIHNjX3JlZyk7DQorICAg
ICAgICAgICAgdW5zaWduZWQgaW50IGNmZ19hZGRyID0gZ2V0X3Njcl9jZmdfYWRkcihhcCwgc2Nf
cmVnKTsNCiAgICAgICAgICAgICB1MzIgdmFsOw0KDQogICAgICAgICAgICAgcGNpX3JlYWRfY29u
ZmlnX2R3b3JkKHBkZXYsIGNmZ19hZGRyLCAmdmFsKTsNCkBAIC0xNjEsNyArMTQ2LDcgQEANCiBz
dGF0aWMgdm9pZCB1bGlfc2NyX2NmZ193cml0ZSAoc3RydWN0IGF0YV9wb3J0ICphcCwgdW5zaWdu
ZWQgaW50IHNjciwgdTMyDQp2YWwpDQogew0KICAgICAgICAgICAgIHN0cnVjdCBwY2lfZGV2ICpw
ZGV2ID0gdG9fcGNpX2RldihhcC0+aG9zdF9zZXQtPmRldik7DQotICAgICAgICAgICAgdW5zaWdu
ZWQgaW50IGNmZ19hZGRyID0gZ2V0X3Njcl9jZmdfYWRkcihhcC0+cG9ydF9ubywgc2NyKTsNCisg
ICAgICAgICAgICB1bnNpZ25lZCBpbnQgY2ZnX2FkZHIgPSBnZXRfc2NyX2NmZ19hZGRyKGFwLCBz
Y3IpOw0KDQogICAgICAgICAgICAgcGNpX3dyaXRlX2NvbmZpZ19kd29yZChwZGV2LCBjZmdfYWRk
ciwgdmFsKTsNCiB9DQpAQCAtMjIyLDkgKzIwNywxMSBAQA0KICAgICAgICAgICAgICAgICAgICAg
ICAgIHJjID0gLUVOT01FTTsNCiAgICAgICAgICAgICAgICAgICAgICAgICBnb3RvIGVycl9vdXRf
cmVnaW9uczsNCiAgICAgICAgICAgICB9DQotDQorDQogICAgICAgICAgICAgc3dpdGNoIChib2Fy
ZF9pZHgpIHsNCiAgICAgICAgICAgICBjYXNlIHVsaV81Mjg3Og0KKyAgICAgICAgICAgICAgICAg
ICAgICAgIHByb2JlX2VudC0+cG9ydFswXS5zY3JfYWRkciA9IFVMSTUyODdfQkFTRTsNCisgICAg
ICAgICAgICAgICAgICAgICAgICBwcm9iZV9lbnQtPnBvcnRbMV0uc2NyX2FkZHIgPSBVTEk1Mjg3
X0JBU0UgKw0KVUxJNTI4N19PRkZTOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBy
b2JlX2VudC0+bl9wb3J0cyA9IDQ7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBw
cm9iZV9lbnQtPnBvcnRbMl0uY21kX2FkZHIgPQ0KcGNpX3Jlc291cmNlX3N0YXJ0KHBkZXYsIDAp
ICsgODsNCkBAIC0yMzIsMTkgKzIxOSwyNyBAQA0KICAgICAgICAgICAgICAgICAgICAgICAgIHBy
b2JlX2VudC0+cG9ydFsyXS5jdGxfYWRkciA9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgKHBjaV9yZXNvdXJjZV9zdGFydChwZGV2LCAxKSB8DQpBVEFfUENJX0NUTF9PRlMp
ICsgNDsNCiAgICAgICAgICAgICAgICAgICAgICAgICBwcm9iZV9lbnQtPnBvcnRbMl0uYm1kbWFf
YWRkciA9DQpwY2lfcmVzb3VyY2Vfc3RhcnQocGRldiwgNCkgKyAxNjsNCisgICAgICAgICAgICAg
ICAgICAgICAgICBwcm9iZV9lbnQtPnBvcnRbMl0uc2NyX2FkZHIgPSBVTEk1Mjg3X0JBU0UgKw0K
VUxJNTI4N19PRkZTKjQ7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgICBwcm9iZV9lbnQtPnBv
cnRbM10uY21kX2FkZHIgPQ0KcGNpX3Jlc291cmNlX3N0YXJ0KHBkZXYsIDIpICsgODsNCiAgICAg
ICAgICAgICAgICAgICAgICAgICBwcm9iZV9lbnQtPnBvcnRbM10uYWx0c3RhdHVzX2FkZHIgPQ0K
ICAgICAgICAgICAgICAgICAgICAgICAgIHByb2JlX2VudC0+cG9ydFszXS5jdGxfYWRkciA9DQog
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHBjaV9yZXNvdXJjZV9zdGFydChw
ZGV2LCAzKSB8DQpBVEFfUENJX0NUTF9PRlMpICsgNDsNCiAgICAgICAgICAgICAgICAgICAgICAg
ICBwcm9iZV9lbnQtPnBvcnRbM10uYm1kbWFfYWRkciA9DQpwY2lfcmVzb3VyY2Vfc3RhcnQocGRl
diwgNCkgKyAyNDsNCisgICAgICAgICAgICAgICAgICAgICAgICBwcm9iZV9lbnQtPnBvcnRbM10u
c2NyX2FkZHIgPSBVTEk1Mjg3X0JBU0UgKw0KVUxJNTI4N19PRkZTKjU7DQoNCiAgICAgICAgICAg
ICAgICAgICAgICAgICBhdGFfc3RkX3BvcnRzKCZwcm9iZV9lbnQtPnBvcnRbMl0pOw0KICAgICAg
ICAgICAgICAgICAgICAgICAgIGF0YV9zdGRfcG9ydHMoJnByb2JlX2VudC0+cG9ydFszXSk7DQog
ICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQoNCiAgICAgICAgICAgICBjYXNlIHVsaV81
Mjg5Og0KLSAgICAgICAgICAgICAgICAgICAgICAgIC8qIGRvIG5vdGhpbmc7IGF0YV9wY2lfaW5p
dF9uYXRpdmVfbW9kZSBkaWQgaXQgYWxsDQoqLw0KKyAgICAgICAgICAgICAgICAgICAgICAgIHBy
b2JlX2VudC0+cG9ydFswXS5zY3JfYWRkciA9IFVMSTUyODdfQkFTRTsNCisgICAgICAgICAgICAg
ICAgICAgICAgICBwcm9iZV9lbnQtPnBvcnRbMV0uc2NyX2FkZHIgPSBVTEk1Mjg3X0JBU0UgKw0K
VUxJNTI4N19PRkZTOw0KKyAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KKw0KKyAgICAg
ICAgICAgIGNhc2UgdWxpXzUyODE6DQorICAgICAgICAgICAgICAgICAgICAgICAgcHJvYmVfZW50
LT5wb3J0WzBdLnNjcl9hZGRyID0gVUxJNTI4MV9CQVNFOw0KKyAgICAgICAgICAgICAgICAgICAg
ICAgIHByb2JlX2VudC0+cG9ydFsxXS5zY3JfYWRkciA9IFVMSTUyODFfQkFTRSArDQpVTEk1Mjgx
X09GRlM7DQogICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQoNCiAgICAgICAgICAgICBk
ZWZhdWx0Og0KDQoNCg0KDQoNCg==

--0__=C7BBE5F7DFB724BB8f9e8a93df938690918cC7BBE5F7DFB724BB
Content-type: application/octet-stream; 
	name="=?gb2312?B?cGF0Y2hfTTUyODF3b3JrYXJvdW5k?="
Content-Disposition: attachment; filename="=?gb2312?B?cGF0Y2hfTTUyODF3b3JrYXJvdW5k?="
Content-Transfer-Encoding: base64

ZGlmZiAtdXByTiBsaW51eC0yLjYuOS12YW5pbGxhL2RyaXZlcnMvc2NzaS9saWJhdGEtY29yZS5j
IGxpbnV4LTIuNi45L2RyaXZlcnMvc2NzaS9saWJhdGEtY29yZS5jCi0tLSBsaW51eC0yLjYuOS12
YW5pbGxhL2RyaXZlcnMvc2NzaS9saWJhdGEtY29yZS5jCTIwMDQtMTAtMTkgMDU6NTM6MDYuMDAw
MDAwMDAwICswODAwCisrKyBsaW51eC0yLjYuOS9kcml2ZXJzL3Njc2kvbGliYXRhLWNvcmUuYwky
MDA0LTEyLTA4IDEzOjQxOjIwLjMwNjUzNzY4OCArMDgwMApAQCAtNDcsNiArNDcsOCBAQAogCiAj
aW5jbHVkZSAibGliYXRhLmgiCiAKK3U4IGlmdGltZW91dD0wOworCiBzdGF0aWMgdW5zaWduZWQg
aW50IGF0YV9idXN5X3NsZWVwIChzdHJ1Y3QgYXRhX3BvcnQgKmFwLAogCQkJCSAgICB1bnNpZ25l
ZCBsb25nIHRtb3V0X3BhdCwKIAkJCSAgICAJICAgIHVuc2lnbmVkIGxvbmcgdG1vdXQpOwpAQCAt
MjQyMSw2ICsyNDIzLDkgQEAgdm9pZCBhdGFfZW5nX3RpbWVvdXQoc3RydWN0IGF0YV9wb3J0ICph
cAogCXN0cnVjdCBhdGFfcXVldWVkX2NtZCAqcWM7CiAKIAlEUFJJTlRLKCJFTlRFUlxuIik7CisJ
CisJLy9hZGQgYnkgY2xlYXIgemhhbmcgMjAwNC8xMi83CisJaWZ0aW1lb3V0PTE7CiAKIAlxYyA9
IGF0YV9xY19mcm9tX3RhZyhhcCwgYXAtPmFjdGl2ZV90YWcpOwogCWlmICghcWMpIHsKZGlmZiAt
dXByTiBsaW51eC0yLjYuOS12YW5pbGxhL2RyaXZlcnMvc2NzaS9saWJhdGEtc2NzaS5jIGxpbnV4
LTIuNi45L2RyaXZlcnMvc2NzaS9saWJhdGEtc2NzaS5jCi0tLSBsaW51eC0yLjYuOS12YW5pbGxh
L2RyaXZlcnMvc2NzaS9saWJhdGEtc2NzaS5jCTIwMDQtMTAtMTkgMDU6NTM6NTEuMDAwMDAwMDAw
ICswODAwCisrKyBsaW51eC0yLjYuOS9kcml2ZXJzL3Njc2kvbGliYXRhLXNjc2kuYwkyMDA0LTEy
LTA4IDEzOjQyOjQxLjMwNTIyNDAxNiArMDgwMApAQCAtMjQsNiArMjQsNyBAQAogCiAjaW5jbHVk
ZSA8bGludXgva2VybmVsLmg+CiAjaW5jbHVkZSA8bGludXgvYmxrZGV2Lmg+CisjaW5jbHVkZSA8
bGludXgvcGNpLmg+CiAjaW5jbHVkZSA8bGludXgvc3BpbmxvY2suaD4KICNpbmNsdWRlIDxzY3Np
L3Njc2kuaD4KICNpbmNsdWRlICJzY3NpLmgiCkBAIC0zMyw2ICszNCwxMSBAQAogCiAjaW5jbHVk
ZSAibGliYXRhLmgiCiAKKy8vYWRkIGJ5IGNsZWFyIHpoYW5nIDIwMDQvMTIvNworI2RlZmluZSBw
cmludF9jbGVhcihfeF8pIHByaW50ayBfeF8gCisvLyNkZWZpbmUgcHJpbnRfY2xlYXIoX3hfKSBO
VUxMCitleHRlcm4gdTggaWZ0aW1lb3V0OworCiB0eXBlZGVmIHVuc2lnbmVkIGludCAoKmF0YV94
bGF0X2Z1bmNfdCkoc3RydWN0IGF0YV9xdWV1ZWRfY21kICpxYywgdTggKnNjc2ljbWQpOwogc3Rh
dGljIHZvaWQgYXRhX3Njc2lfc2ltdWxhdGUoc3RydWN0IGF0YV9wb3J0ICphcCwgc3RydWN0IGF0
YV9kZXZpY2UgKmRldiwKIAkJCSAgICAgIHN0cnVjdCBzY3NpX2NtbmQgKmNtZCwKQEAgLTYyMiwx
MSArNjI4LDE3NCBAQCBzdGF0aWMgdW5zaWduZWQgaW50IGF0YV9zY3NpX3J3X3hsYXQoc3RyCiBz
dGF0aWMgaW50IGF0YV9zY3NpX3FjX2NvbXBsZXRlKHN0cnVjdCBhdGFfcXVldWVkX2NtZCAqcWMs
IHU4IGRydl9zdGF0KQogewogCXN0cnVjdCBzY3NpX2NtbmQgKmNtZCA9IHFjLT5zY3NpY21kOwor
CQorCS8vIGFkZCBieSBjbGVhciB6aGFuZyAyMDA0LzEyLzcgZm9yIFVMaSBNNTI4MSB3b3JrYXJv
dWQJCisJaWYocWMtPmFwLT5ob3N0X3NldC0+cGRldi0+dmVuZG9yPT0weDEwYjkgJiYKKwkJcWMt
PmFwLT5ob3N0X3NldC0+cGRldi0+ZGV2aWNlPT0weDUyODEpCisJeworCQkKKwkJc3RydWN0IHBj
aV9kZXYgKnBkZXZfbTUyODE9cWMtPmFwLT5ob3N0X3NldC0+cGRldjsKKwkJdTggbTUyODFfcmV2
aXNpb247CisJCQorCQljbWQtPnJlc3VsdCA9IFNBTV9TVEFUX0dPT0Q7CisJCQkgICAgICAgICAg
ICAgIAorCQlwY2lfcmVhZF9jb25maWdfYnl0ZShwZGV2X201MjgxLCBQQ0lfUkVWSVNJT05fSUQs
ICZtNTI4MV9yZXZpc2lvbik7CisJCS8vcHJpbnRrKCJtNTI4MV9yZXZpc2lvbj0weCV4XG4iLG01
MjgxX3JldmlzaW9uKTsKKwkJLy92ZXJzaW9uIDB4YTAsMHhhMSwweGIxIG5lZWQgd29ya2Fyb3Vk
CQorCQlpZihtNTI4MV9yZXZpc2lvbj09MHhhMCB8fG01MjgxX3JldmlzaW9uPT0weGExIHx8bTUy
ODFfcmV2aXNpb249PTB4YjEgKQorCQl7CisJCQl1MTYgZXJyb3JfbTUyODE7CisJCQl1bnNpZ25l
ZCBsb25nCXNjcl9hZGRyX201MjgxID0gcWMtPmFwLT5pb2FkZHIuc2NyX2FkZHI7CisJCQkKKwkJ
CXBjaV9yZWFkX2NvbmZpZ193b3JkKHBkZXZfbTUyODEsc2NyX2FkZHJfbTUyODErNiwgJmVycm9y
X201MjgxKTsKKwkJCQorCQkJaWYgKCB1bmxpa2VseShkcnZfc3RhdCAmIChBVEFfRVJSIHwgQVRB
X0JVU1kgfCBBVEFfRFJRKSkgJiYgaWZ0aW1lb3V0PT0wLypleHByZXNzIG5vdCB0aW1lb3V0Ki8p
CisJCQkJYXRhX3RvX3NlbnNlX2Vycm9yKHFjLCBkcnZfc3RhdCk7CisJCQkvL3RpbWUgb3V0IG9y
IGRyaXZlIHN0YXR1cyBpcyBvawkJCQorCQkJZWxzZSBpZiAoKGVycm9yX201MjgxICYgMHgzZjgp
IT0wIHx8IGlmdGltZW91dD09MSkgLy90aGUgc3JjIGVycm9yZSBwcmVzZW50CisJCQl7CisJCQkJ
dTMyIHNjcjRfbTUyODE7CisJCQkJdTggIHJlc2V0X201MjgxLCBzdHVzLCBzY3IwX201MjgxOwor
CQkJCQorCQkJCXU4IGtrLCBqajsKKyAgICAgICAgICAgICAgCQkJdTggY29tcmVzZXQ9MSwgc29m
dHJlc2V0PTE7Ly9zdWNjZXNzPTAsIGZhaWw9MQorCQkKKwkJCQlwcmludGsoIlVMaSBzYXRhIGVy
cm9yOjB4JXhcbiIsZXJyb3JfbTUyODEpOworCQkJCS8vcmVzZXQKKwkJCQkvLyBkbWEgaGF2ZSBi
ZWVuIGNsb3NlZAorCQkJCS8vX19zYXZlX2ZsYWdzKGZsYWdzX201MjgxKTsKKwkJCQkvL19fY2xp
KCk7CisJCQkJLy9jb20gcmVzZXQKKwkJCQlmb3Ioa2s9MDtrazwyMDtraysrKQorCQkJCXsKKwkJ
CQkJcGNpX3JlYWRfY29uZmlnX2J5dGUocGRldl9tNTI4MSxzY3JfYWRkcl9tNTI4MSs4LCZyZXNl
dF9tNTI4MSk7CisJCQkJCXJlc2V0X201MjgxID0gcmVzZXRfbTUyODEgJiAweGZlOworCQkJCQlw
Y2lfd3JpdGVfY29uZmlnX2J5dGUocGRldl9tNTI4MSxzY3JfYWRkcl9tNTI4MSs4LHJlc2V0X201
MjgxKTsKKwkJCQkJcmVzZXRfbTUyODEgPSByZXNldF9tNTI4MSB8IDB4MDE7CisJCQkJCXBjaV93
cml0ZV9jb25maWdfYnl0ZShwZGV2X201MjgxLHNjcl9hZGRyX201MjgxKzgscmVzZXRfbTUyODEp
OwkJCisJCQkJCQorCQkJCQkvL2RlbGF5IHR3byBtcworCQkJCQltZGVsYXkoMik7CisJCQkJCQor
CQkJCQkvL3JlYWxsZXJ0IGFuZCBjbGVhciBlcnJvIGJpdAorCQkJCQlyZXNldF9tNTI4MSA9IHJl
c2V0X201MjgxICYgMHhmZTsKKwkJICAgICAgICAJCXBjaV93cml0ZV9jb25maWdfYnl0ZShwZGV2
X201MjgxLHNjcl9hZGRyX201MjgxKzgscmVzZXRfbTUyODEpOworCQkJCQltZGVsYXkoMik7CisJ
CQkJCQkJCQkJCisJCQkJCXBjaV9yZWFkX2NvbmZpZ19ieXRlKHBkZXZfbTUyODEsc2NyX2FkZHJf
bTUyODEsJnNjcjBfbTUyODEpOworCQkJCQlwY2lfcmVhZF9jb25maWdfZHdvcmQocGRldl9tNTI4
MSxzY3JfYWRkcl9tNTI4MSs0LCZzY3I0X201MjgxKTsKKwkJCQkJaWYoc2NyMF9tNTI4MSE9MHgx
MyB8fChzY3I0X201MjgxICYgMHg1MDAwMCkhPSAweDAwMDUwMDAwICkKKwkJCQkJeworCQkJCQkJ
cHJpbnRfY2xlYXIoKCJwaHkgcmVzZXQgZmFpbGVkXG4iKSk7CisJCQkJCQlwcmludF9jbGVhcigo
InNjcjA9MHgleFxuIiwgc2NyMF9tNTI4MSkpOworCQkJCQkJcHJpbnRfY2xlYXIoKCJzY3I0PTB4
JXhcbiIsIHNjcjRfbTUyODEpKTsKKwkJCQkJCWNvbnRpbnVlOworCQkJCQl9CisJCQkJCWVsc2UK
KwkJCQkJeworCQkJCQkJLy9wcmludF9jbGVhcigoImNvbSByZXNldCBzdWNjZXNzXG4iKSk7CisJ
CQkJCQkvL2NsZWFyIGVycm9yIGJpdHMKKwkJCQkJCXBjaV93cml0ZV9jb25maWdfZHdvcmQocGRl
dl9tNTI4MSxzY3JfYWRkcl9tNTI4MSs0LHNjcjRfbTUyODEpOworCisJCQkJCQljb21yZXNldD0w
Oy8vc3VjY2VzcworCQkJCQkJYnJlYWs7CisJCQkJCX0KKwkJCQkJCisJCQkJfQorCQkJCQorCQkJ
CWlmKGNvbXJlc2V0PT0wKQorCQkJCXsKKwkJCQkJLy9zdHVzPSBpbmIocWMtPmFwLT5pb2FkZHIu
c3RhdHVzX2FkZHIpOy8vIGdldCBkcml2ZSBzdGF0dXMgCisJCQkJCWpqPTA7CisJCQkJCWRvCisJ
CQkJCXsKKwkJCQkJCW1kZWxheSgyKTsKKwkJCQkJCXN0dXM9IGluYihxYy0+YXAtPmlvYWRkci5z
dGF0dXNfYWRkcik7Ly8gZ2V0IGRyaXZlIHN0YXR1cyAKKwkJCQkJCWpqKys7CisJCQkJCQlpZihq
aj49MTUwKQorCQkJCQkJeworCQkJCQkJCWJyZWFrOworCQkJCQkJfQorCQkJCQl9d2hpbGUgKHN0
dXMhPTB4NTApOworCQkJCQkKKwkJCQkJLy9wcmludF9jbGVhcigoImpqPTB4JXhcbiIsIGpqKSk7
CisJCQkJCQkJCQkJCisJCQkJCWlmKHN0dXMhPTB4NTAgLyomJiBpZnRpbWVvdXQ9PTEqLykKKwkJ
CQkJeworCQkJCQkJLy9wcmludF9jbGVhcigoInNvZnQgcmVzZXRcbiIpKTsKKwkJCQkJCWZvcihr
az0wO2trPDU7a2srKykKKwkJCQkJCXsKKwkJCQkJCQlvdXRiKDB4MDQscWMtPmFwLT5pb2FkZHIu
Y3RsX2FkZHIpOwkvLyBzZXQgU1JTVCAKKwkJCQkJCQltZGVsYXkoNSk7CQkJLy8gbW9yZSB0aGFu
IGVub3VnaCB0aW1lIAorCQkJCQkJCW91dGIoMCxxYy0+YXAtPmlvYWRkci5jdGxfYWRkcik7CS8v
IGNsZWFyIAorCQkJCQkJCWpqPTA7CisJCQkJCQkJZG8KKwkJCQkJCQl7CisJCQkJCQkJCW1kZWxh
eSgxKTsKKwkJCQkJCQkJc3R1cz0gaW5iKHFjLT5hcC0+aW9hZGRyLnN0YXR1c19hZGRyKTsvLyBn
ZXQgZHJpdmUgc3RhdHVzIAorCQkJCQkJCQlqaisrOworCQkJCQkJCQlpZihqaj49MTAwKQorCQkJ
CQkJCQl7CisJCQkJCQkJCQlicmVhazsKKwkJCQkJCQkJfQorCQkJCQkJCX13aGlsZSAoc3R1cyE9
MHg1MCk7CisKKwkJCQkJCQlpZihzdHVzPT0weDUwKQorCQkJCQkJCXsKKwkJCQkJCQkJc29mdHJl
c2V0PTA7Ly9zdWNlc3MKKwkJCQkJCQkJYnJlYWs7CisJCQkJCQkJfQorCQkJCQkJCQorCQkJCQkJ
fQkJCQkJCQorCQkJCQorCQkJCQl9CisJCQkJCWlmKHN0dXM9PTB4NTApCisJCQkJCXsKKwkJCQkJ
CXNvZnRyZXNldD0wOworCQkJCQl9CisJCQkJCXByaW50X2NsZWFyKCgiVUxpIGRyaXZlIHN0YXR1
cz0weCV4XG4iLHN0dXMpKTsKKwkJCQkJCisJCQkJfQorCQkJCWlmdGltZW91dD0wOwkJCQorCQkJ
CS8vX19yZXN0b3JlX2ZsYWdzKGZsYWdzX201MjgxKTsKKwkJCQkKKworCQkJCS8vc2V0IHRoZSBj
b21tYW5kCisJCQkJLy90cm5zbGF0ZSBlcnJvciBjYW4gYmUgZG9uZSBhY2NvcmluZyB0byBhdGFf
dG9fc2Vuc2VfZXJyb3IKKwkJCQkJCQorCQkJCWlmKGNvbXJlc2V0PT0xKQorCQkJCXsKKwkJCQkJ
YXRhX3RvX3NlbnNlX2Vycm9yKHFjLCAweDIwKTsKKwkJCQl9CisJCQkJZWxzZSAKKwkJCQl7CisJ
CQkJCS8vcHJpbnRfY2xlYXIoKCJ0byBzeXNcbiIpKTsKKwkJCQkJYXRhX3RvX3NlbnNlX2Vycm9y
KHFjLCAweDEpOwkKKwkJCQl9CisJCQl9CisJCQllbHNlCisJCQl7CisJCQkJY21kLT5yZXN1bHQg
PSBTQU1fU1RBVF9HT09EOworCQkJfQogCi0JaWYgKHVubGlrZWx5KGRydl9zdGF0ICYgKEFUQV9F
UlIgfCBBVEFfQlVTWSB8IEFUQV9EUlEpKSkKLQkJYXRhX3RvX3NlbnNlX2Vycm9yKHFjLCBkcnZf
c3RhdCk7CisJCX0KKwkJZWxzZQorCQl7CisJCQlpZiAodW5saWtlbHkoZHJ2X3N0YXQgJiAoQVRB
X0VSUiB8IEFUQV9CVVNZIHwgQVRBX0RSUSkpKQorCQkJCWF0YV90b19zZW5zZV9lcnJvcihxYywg
ZHJ2X3N0YXQpOworCQkJZWxzZQorCQkJCWNtZC0+cmVzdWx0ID0gU0FNX1NUQVRfR09PRDsKKwkJ
fQorCX0KKwkvL2VuZCBhZGQgYnkgY2xlYXIgemhhbmcgMjAwNC8xMi83CiAJZWxzZQotCQljbWQt
PnJlc3VsdCA9IFNBTV9TVEFUX0dPT0Q7CisJeworCisJCWlmICh1bmxpa2VseShkcnZfc3RhdCAm
IChBVEFfRVJSIHwgQVRBX0JVU1kgfCBBVEFfRFJRKSkpCisJCQlhdGFfdG9fc2Vuc2VfZXJyb3Io
cWMsIGRydl9zdGF0KTsKKwkJZWxzZQorCQkJY21kLT5yZXN1bHQgPSBTQU1fU1RBVF9HT09EOwor
CX0KIAogCXFjLT5zY3NpZG9uZShjbWQpOwogCkBAIC0xMjQ3LDIyICsxNDE2LDIwOSBAQCB2b2lk
IGF0YV9zY3NpX2JhZGNtZChzdHJ1Y3Qgc2NzaV9jbW5kICpjCiBzdGF0aWMgaW50IGF0YXBpX3Fj
X2NvbXBsZXRlKHN0cnVjdCBhdGFfcXVldWVkX2NtZCAqcWMsIHU4IGRydl9zdGF0KQogewogCXN0
cnVjdCBzY3NpX2NtbmQgKmNtZCA9IHFjLT5zY3NpY21kOworCQorCS8vIGFkZCBieSBjbGVhciB6
aGFuZyAyMDA0LzEyLzcgZm9yIFVMaSBNNTI4MSB3b3JrYXJvdWQJCisJaWYocWMtPmFwLT5ob3N0
X3NldC0+cGRldi0+dmVuZG9yPT0weDEwYjkgJiYKKwkJcWMtPmFwLT5ob3N0X3NldC0+cGRldi0+
ZGV2aWNlPT0weDUyODEpCisJeworCQkKKwkJc3RydWN0IHBjaV9kZXYgKnBkZXZfbTUyODE9cWMt
PmFwLT5ob3N0X3NldC0+cGRldjsKKwkJdTggbTUyODFfcmV2aXNpb247CisJCQorCQljbWQtPnJl
c3VsdCA9IFNBTV9TVEFUX0dPT0Q7CisJCQkgICAgICAgICAgICAgIAorCQlwY2lfcmVhZF9jb25m
aWdfYnl0ZShwZGV2X201MjgxLCBQQ0lfUkVWSVNJT05fSUQsICZtNTI4MV9yZXZpc2lvbik7CisJ
CS8vcHJpbnRrKCJtNTI4MV9yZXZpc2lvbj0weCV4XG4iLG01MjgxX3JldmlzaW9uKTsKKwkJLy92
ZXJzaW9uIDB4YTAsMHhhMSwweGIxIG5lZWQgd29ya2Fyb3VkCQorCQlpZihtNTI4MV9yZXZpc2lv
bj09MHhhMCB8fG01MjgxX3JldmlzaW9uPT0weGExIHx8bTUyODFfcmV2aXNpb249PTB4YjEgKQor
CQl7CisJCQl1MTYgZXJyb3JfbTUyODE7CisJCQl1bnNpZ25lZCBsb25nCXNjcl9hZGRyX201Mjgx
ID0gcWMtPmFwLT5pb2FkZHIuc2NyX2FkZHI7CisJCQkKKwkJCXBjaV9yZWFkX2NvbmZpZ193b3Jk
KHBkZXZfbTUyODEsc2NyX2FkZHJfbTUyODErNiwgJmVycm9yX201MjgxKTsKKwkJCQorCQkJaWYg
KCB1bmxpa2VseShkcnZfc3RhdCAmIChBVEFfRVJSIHwgQVRBX0JVU1kgfCBBVEFfRFJRKSkgJiYg
aWZ0aW1lb3V0PT0wLypleHByZXNzIG5vdCB0aW1lb3V0Ki8pCisJCQkJY21kLT5yZXN1bHQgPSBT
QU1fU1RBVF9DSEVDS19DT05ESVRJT047CisJCQkvL3RpbWUgb3V0IG9yIGRyaXZlIHN0YXR1cyBp
cyBvawkJCQorCQkJZWxzZSBpZiAoKGVycm9yX201MjgxICYgMHgzZjgpIT0wIHx8IGlmdGltZW91
dD09MSkgLy90aGUgc3JjIGVycm9yZSBwcmVzZW50CisJCQl7CisJCQkJdTMyIHNjcjRfbTUyODE7
CisJCQkJdTggIHJlc2V0X201MjgxLCBzdHVzLCBzY3IwX201MjgxOworCQkJCQorCQkJCXU4IGtr
LCBqajsKKyAgICAgICAgICAgICAgCQkJdTggY29tcmVzZXQ9MSwgc29mdHJlc2V0PTE7Ly9zdWNj
ZXNzPTAsIGZhaWw9MQorCQkKKwkJCQlwcmludGsoIlVMaSBzYXRhIGVycm9yOjB4JXhcbiIsZXJy
b3JfbTUyODEpOworCQkJCS8vcmVzZXQKKwkJCQkvLyBkbWEgaGF2ZSBiZWVuIGNsb3NlZAorCQkJ
CS8vX19zYXZlX2ZsYWdzKGZsYWdzX201MjgxKTsKKwkJCQkvL19fY2xpKCk7CisJCQkJLy9jb20g
cmVzZXQKKwkJCQlmb3Ioa2s9MDtrazwyMDtraysrKQorCQkJCXsKKwkJCQkJcGNpX3JlYWRfY29u
ZmlnX2J5dGUocGRldl9tNTI4MSxzY3JfYWRkcl9tNTI4MSs4LCZyZXNldF9tNTI4MSk7CisJCQkJ
CXJlc2V0X201MjgxID0gcmVzZXRfbTUyODEgJiAweGZlOworCQkJCQlwY2lfd3JpdGVfY29uZmln
X2J5dGUocGRldl9tNTI4MSxzY3JfYWRkcl9tNTI4MSs4LHJlc2V0X201MjgxKTsKKwkJCQkJcmVz
ZXRfbTUyODEgPSByZXNldF9tNTI4MSB8IDB4MDE7CisJCQkJCXBjaV93cml0ZV9jb25maWdfYnl0
ZShwZGV2X201MjgxLHNjcl9hZGRyX201MjgxKzgscmVzZXRfbTUyODEpOwkJCisJCQkJCQorCQkJ
CQkvL2RlbGF5IHR3byBtcworCQkJCQltZGVsYXkoMik7CisJCQkJCQorCQkJCQkvL3JlYWxsZXJ0
IGFuZCBjbGVhciBlcnJvIGJpdAorCQkJCQlyZXNldF9tNTI4MSA9IHJlc2V0X201MjgxICYgMHhm
ZTsKKwkJICAgICAgICAJCXBjaV93cml0ZV9jb25maWdfYnl0ZShwZGV2X201MjgxLHNjcl9hZGRy
X201MjgxKzgscmVzZXRfbTUyODEpOworCQkJCQltZGVsYXkoMik7CisJCQkJCQkJCQkJCisJCQkJ
CXBjaV9yZWFkX2NvbmZpZ19ieXRlKHBkZXZfbTUyODEsc2NyX2FkZHJfbTUyODEsJnNjcjBfbTUy
ODEpOworCQkJCQlwY2lfcmVhZF9jb25maWdfZHdvcmQocGRldl9tNTI4MSxzY3JfYWRkcl9tNTI4
MSs0LCZzY3I0X201MjgxKTsKKwkJCQkJaWYoc2NyMF9tNTI4MSE9MHgxMyB8fChzY3I0X201Mjgx
ICYgMHg1MDAwMCkhPSAweDAwMDUwMDAwICkKKwkJCQkJeworCQkJCQkJcHJpbnRfY2xlYXIoKCJw
aHkgcmVzZXQgZmFpbGVkXG4iKSk7CisJCQkJCQlwcmludF9jbGVhcigoInNjcjA9MHgleFxuIiwg
c2NyMF9tNTI4MSkpOworCQkJCQkJcHJpbnRfY2xlYXIoKCJzY3I0PTB4JXhcbiIsIHNjcjRfbTUy
ODEpKTsKKwkJCQkJCWNvbnRpbnVlOworCQkJCQl9CisJCQkJCWVsc2UKKwkJCQkJeworCQkJCQkJ
Ly9wcmludF9jbGVhcigoImNvbSByZXNldCBzdWNjZXNzXG4iKSk7CisJCQkJCQkvL2NsZWFyIGVy
cm9yIGJpdHMKKwkJCQkJCXBjaV93cml0ZV9jb25maWdfZHdvcmQocGRldl9tNTI4MSxzY3JfYWRk
cl9tNTI4MSs0LHNjcjRfbTUyODEpOworCisJCQkJCQljb21yZXNldD0wOy8vc3VjY2VzcworCQkJ
CQkJYnJlYWs7CisJCQkJCX0KKwkJCQkJCisJCQkJfQorCQkJCQorCQkJCWlmKGNvbXJlc2V0PT0w
KQorCQkJCXsKKwkJCQkJLy9zdHVzPSBpbmIocWMtPmFwLT5pb2FkZHIuc3RhdHVzX2FkZHIpOy8v
IGdldCBkcml2ZSBzdGF0dXMgCisJCQkJCWpqPTA7CisJCQkJCWRvCisJCQkJCXsKKwkJCQkJCW1k
ZWxheSgyKTsKKwkJCQkJCXN0dXM9IGluYihxYy0+YXAtPmlvYWRkci5zdGF0dXNfYWRkcik7Ly8g
Z2V0IGRyaXZlIHN0YXR1cyAKKwkJCQkJCWpqKys7CisJCQkJCQlpZihqaj49MTUwKQorCQkJCQkJ
eworCQkJCQkJCWJyZWFrOworCQkJCQkJfQorCQkJCQl9d2hpbGUgKHN0dXMhPTB4NTApOworCQkJ
CQkKKwkJCQkJLy9wcmludF9jbGVhcigoImpqPTB4JXhcbiIsIGpqKSk7CisJCQkJCQkJCQkJCisJ
CQkJCWlmKHN0dXMhPTB4NTAgLyomJiBpZnRpbWVvdXQ9PTEqLykKKwkJCQkJeworCQkJCQkJLy9w
cmludF9jbGVhcigoInNvZnQgcmVzZXRcbiIpKTsKKwkJCQkJCWZvcihraz0wO2trPDU7a2srKykK
KwkJCQkJCXsKKwkJCQkJCQlvdXRiKDB4MDQscWMtPmFwLT5pb2FkZHIuY3RsX2FkZHIpOwkvLyBz
ZXQgU1JTVCAKKwkJCQkJCQltZGVsYXkoNSk7CQkJLy8gbW9yZSB0aGFuIGVub3VnaCB0aW1lIAor
CQkJCQkJCW91dGIoMCxxYy0+YXAtPmlvYWRkci5jdGxfYWRkcik7CS8vIGNsZWFyIAorCQkJCQkJ
CWpqPTA7CisJCQkJCQkJZG8KKwkJCQkJCQl7CisJCQkJCQkJCW1kZWxheSgxKTsKKwkJCQkJCQkJ
c3R1cz0gaW5iKHFjLT5hcC0+aW9hZGRyLnN0YXR1c19hZGRyKTsvLyBnZXQgZHJpdmUgc3RhdHVz
IAorCQkJCQkJCQlqaisrOworCQkJCQkJCQlpZihqaj49MTAwKQorCQkJCQkJCQl7CisJCQkJCQkJ
CQlicmVhazsKKwkJCQkJCQkJfQorCQkJCQkJCX13aGlsZSAoc3R1cyE9MHg1MCk7CisKKwkJCQkJ
CQlpZihzdHVzPT0weDUwKQorCQkJCQkJCXsKKwkJCQkJCQkJc29mdHJlc2V0PTA7Ly9zdWNlc3MK
KwkJCQkJCQkJYnJlYWs7CisJCQkJCQkJfQorCQkJCQkJCQorCQkJCQkJfQkJCQkJCQorCQkJCQor
CQkJCQl9CisJCQkJCWlmKHN0dXM9PTB4NTApCisJCQkJCXsKKwkJCQkJCXNvZnRyZXNldD0wOwor
CQkJCQl9CisJCQkJCXByaW50X2NsZWFyKCgiVUxpIGRyaXZlIHN0YXR1cz0weCV4XG4iLHN0dXMp
KTsKKwkJCQkJCisJCQkJfQorCQkJCWlmdGltZW91dD0wOwkJCQorCQkJCS8vX19yZXN0b3JlX2Zs
YWdzKGZsYWdzX201MjgxKTsKKwkJCQkKKworCQkJCS8vc2V0IHRoZSBjb21tYW5kCisJCQkJLy90
cm5zbGF0ZSBlcnJvciBjYW4gYmUgZG9uZSBhY2NvcmluZyB0byBhdGFfdG9fc2Vuc2VfZXJyb3IK
KwkJCQljbWQtPnJlc3VsdCA9IFNBTV9TVEFUX0NIRUNLX0NPTkRJVElPTjsJCQorCQkJCS8qaWYo
Y29tcmVzZXQ9PTEpCisJCQkJeworCQkJCQlhdGFfdG9fc2Vuc2VfZXJyb3IocWMsIDB4MjApOwor
CQkJCX0KKwkJCQllbHNlIAorCQkJCXsKKwkJCQkJLy9wcmludF9jbGVhcigoInRvIHN5c1xuIikp
OworCQkJCQlhdGFfdG9fc2Vuc2VfZXJyb3IocWMsIDB4MSk7CQorCQkJCX0qLworCQkJfQorCQkJ
ZWxzZSAKKwkJCXsKKwkJCQl1OCAqc2NzaWNtZCA9IGNtZC0+Y21uZDsKKwkJCisJCQkJaWYgKHNj
c2ljbWRbMF0gPT0gSU5RVUlSWSkgeworCQkJCQl1OCAqYnVmID0gTlVMTDsKKwkJCQkJdW5zaWdu
ZWQgaW50IGJ1ZmxlbjsKKwkJCisJCQkJCWJ1ZmxlbiA9IGF0YV9zY3NpX3JidWZfZ2V0KGNtZCwg
JmJ1Zik7CisJCQkJCWJ1ZlsyXSA9IDB4NTsKKwkJCQkJYnVmWzNdID0gKGJ1ZlszXSAmIDB4ZjAp
IHwgMjsKKwkJCQkJYXRhX3Njc2lfcmJ1Zl9wdXQoY21kKTsKKwkJCQl9CisJCQkJY21kLT5yZXN1
bHQgPSBTQU1fU1RBVF9HT09EOworCQkJfQogCi0JaWYgKHVubGlrZWx5KGRydl9zdGF0ICYgKEFU
QV9FUlIgfCBBVEFfQlVTWSB8IEFUQV9EUlEpKSkKLQkJY21kLT5yZXN1bHQgPSBTQU1fU1RBVF9D
SEVDS19DT05ESVRJT047Ci0JZWxzZSB7Ci0JCXU4ICpzY3NpY21kID0gY21kLT5jbW5kOworCQl9
CisJCWVsc2UKKwkJeworCQkJaWYgKHVubGlrZWx5KGRydl9zdGF0ICYgKEFUQV9FUlIgfCBBVEFf
QlVTWSB8IEFUQV9EUlEpKSkKKwkJCQljbWQtPnJlc3VsdCA9IFNBTV9TVEFUX0NIRUNLX0NPTkRJ
VElPTjsKKwkJCWVsc2UgeworCQkJCXU4ICpzY3NpY21kID0gY21kLT5jbW5kOworCQkKKwkJCQlp
ZiAoc2NzaWNtZFswXSA9PSBJTlFVSVJZKSB7CisJCQkJCXU4ICpidWYgPSBOVUxMOworCQkJCQl1
bnNpZ25lZCBpbnQgYnVmbGVuOworCQkKKwkJCQkJYnVmbGVuID0gYXRhX3Njc2lfcmJ1Zl9nZXQo
Y21kLCAmYnVmKTsKKwkJCQkJYnVmWzJdID0gMHg1OworCQkJCQlidWZbM10gPSAoYnVmWzNdICYg
MHhmMCkgfCAyOworCQkJCQlhdGFfc2NzaV9yYnVmX3B1dChjbWQpOworCQkJCX0KKwkJCQljbWQt
PnJlc3VsdCA9IFNBTV9TVEFUX0dPT0Q7CisJCQl9CisJCX0KKwl9CisJLy9lbmQgYWRkIGJ5IGNs
ZWFyIHpoYW5nIDIwMDQvMTIvNworCQorCWVsc2UKKwl7CiAKLQkJaWYgKHNjc2ljbWRbMF0gPT0g
SU5RVUlSWSkgewotCQkJdTggKmJ1ZiA9IE5VTEw7Ci0JCQl1bnNpZ25lZCBpbnQgYnVmbGVuOwot
Ci0JCQlidWZsZW4gPSBhdGFfc2NzaV9yYnVmX2dldChjbWQsICZidWYpOwotCQkJYnVmWzJdID0g
MHg1OwotCQkJYnVmWzNdID0gKGJ1ZlszXSAmIDB4ZjApIHwgMjsKLQkJCWF0YV9zY3NpX3JidWZf
cHV0KGNtZCk7CisJCWlmICh1bmxpa2VseShkcnZfc3RhdCAmIChBVEFfRVJSIHwgQVRBX0JVU1kg
fCBBVEFfRFJRKSkpCisJCQljbWQtPnJlc3VsdCA9IFNBTV9TVEFUX0NIRUNLX0NPTkRJVElPTjsK
KwkJZWxzZSB7CisJCQl1OCAqc2NzaWNtZCA9IGNtZC0+Y21uZDsKKwkKKwkJCWlmIChzY3NpY21k
WzBdID09IElOUVVJUlkpIHsKKwkJCQl1OCAqYnVmID0gTlVMTDsKKwkJCQl1bnNpZ25lZCBpbnQg
YnVmbGVuOworCQorCQkJCWJ1ZmxlbiA9IGF0YV9zY3NpX3JidWZfZ2V0KGNtZCwgJmJ1Zik7CisJ
CQkJYnVmWzJdID0gMHg1OworCQkJCWJ1ZlszXSA9IChidWZbM10gJiAweGYwKSB8IDI7CisJCQkJ
YXRhX3Njc2lfcmJ1Zl9wdXQoY21kKTsKKwkJCX0KKwkJCWNtZC0+cmVzdWx0ID0gU0FNX1NUQVRf
R09PRDsKIAkJfQotCQljbWQtPnJlc3VsdCA9IFNBTV9TVEFUX0dPT0Q7CiAJfQogCiAJcWMtPnNj
c2lkb25lKGNtZCk7Cg==

--0__=C7BBE5F7DFB724BB8f9e8a93df938690918cC7BBE5F7DFB724BB--

