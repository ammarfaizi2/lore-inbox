Return-Path: <linux-kernel-owner+willy=40w.ods.org-S263118AbVEGN1P@vger.kernel.org>
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S263118AbVEGN1P (ORCPT <rfc822;willy@w.ods.org>);
	Sat, 7 May 2005 09:27:15 -0400
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S263111AbVEGN0A
	(ORCPT <rfc822;linux-kernel-outgoing>);
	Sat, 7 May 2005 09:26:00 -0400
Received: from rproxy.gmail.com ([64.233.170.205]:64270 "EHLO rproxy.gmail.com")
	by vger.kernel.org with ESMTP id S263112AbVEGNW2 (ORCPT
	<rfc822;linux-kernel@vger.kernel.org>);
	Sat, 7 May 2005 09:22:28 -0400
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:cc:mime-version:content-type;
        b=Hm31zVEekO3UXuro14GD8B9ZbnKxYCH5IPOwELS2AhTij+7HEdNAdmuiIyxjexnkM2Il+5rtqi47D/E0Xu7P5s1ay5b1N+1Ka3tRWTsm7twmXA7rB9X0zMlz7XbtB+NPtP3Feey0dhEdVcx9y6vWnQ8BQS/gIJg3gIVkx2FB8+g=
Message-ID: <2538186705050706224cdd7ed2@mail.gmail.com>
Date: Sat, 7 May 2005 09:22:26 -0400
From: Yani Ioannou <yani.ioannou@gmail.com>
Reply-To: Yani Ioannou <yani.ioannou@gmail.com>
To: Greg KH <greg@kroah.com>
Subject: [PATCH 2.6.12-rc4 3/3] dynamic sysfs callbacks
Cc: Dmitry Torokhov <dtor_core@ameritech.net>,
       Jean Delvare <khali@linux-fr.org>,
       LM Sensors <sensors@stimpy.netroedge.com>, linux-kernel@vger.kernel.org
Mime-Version: 1.0
Content-Type: multipart/mixed; 
	boundary="----=_Part_419_677152.1115472146513"
Sender: linux-kernel-owner@vger.kernel.org
X-Mailing-List: linux-kernel@vger.kernel.org

------=_Part_419_677152.1115472146513
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

The following are some misc manual fixes needed after the last
(autogenerated) patch is applied.

Signed-off-by: Yani Ioannou <yani.ioannou@gmail.com>

------=_Part_419_677152.1115472146513
Content-Type: text/x-patch; 
	name=patch-linux-2.6.12-rc4-sysfsdyncallback-manualupdate.diff; charset=us-ascii
Content-Transfer-Encoding: 7bit
Content-Disposition: attachment; filename="patch-linux-2.6.12-rc4-sysfsdyncallback-manualupdate.diff"

diff -uprN -X dontdiff linux-2.6.12-rc4-sysfsdyncallback-autoupdate/drivers/i2c/chips/w83627hf.c linux-2.6.12-rc4-sysfsdyncallback-full/drivers/i2c/chips/w83627hf.c
--- linux-2.6.12-rc4-sysfsdyncallback-autoupdate/drivers/i2c/chips/w83627hf.c	2005-05-07 04:38:23.000000000 -0400
+++ linux-2.6.12-rc4-sysfsdyncallback-full/drivers/i2c/chips/w83627hf.c	2005-05-07 05:03:34.000000000 -0400
@@ -734,7 +734,7 @@ store_beep_reg(struct device *dev, const
 #define sysfs_beep(REG, reg) \
 static ssize_t show_regs_beep_##reg (struct device *dev, char *buf, void *sdata) \
 { \
-	return show_beep_##reg(dev, buf); \
+	return show_beep_##reg(dev, buf, sdata); \
 } \
 static ssize_t \
 store_regs_beep_##reg (struct device *dev, const char *buf, size_t count, void *sdata) \
diff -uprN -X dontdiff linux-2.6.12-rc4-sysfsdyncallback-autoupdate/drivers/i2c/chips/w83781d.c linux-2.6.12-rc4-sysfsdyncallback-full/drivers/i2c/chips/w83781d.c
--- linux-2.6.12-rc4-sysfsdyncallback-autoupdate/drivers/i2c/chips/w83781d.c	2005-05-07 04:38:23.000000000 -0400
+++ linux-2.6.12-rc4-sysfsdyncallback-full/drivers/i2c/chips/w83781d.c	2005-05-07 05:03:34.000000000 -0400
@@ -585,7 +585,7 @@ store_beep_reg(struct device *dev, const
 #define sysfs_beep(REG, reg) \
 static ssize_t show_regs_beep_##reg (struct device *dev, char *buf, void *sdata) \
 { \
-	return show_beep_##reg(dev, buf); \
+	return show_beep_##reg(dev, buf, sdata); \
 } \
 static ssize_t store_regs_beep_##reg (struct device *dev, const char *buf, size_t count, void *sdata) \
 { \
diff -uprN -X dontdiff linux-2.6.12-rc4-sysfsdyncallback-autoupdate/drivers/usb/media/sn9c102_core.c linux-2.6.12-rc4-sysfsdyncallback-full/drivers/usb/media/sn9c102_core.c
--- linux-2.6.12-rc4-sysfsdyncallback-autoupdate/drivers/usb/media/sn9c102_core.c	2005-05-07 04:38:40.000000000 -0400
+++ linux-2.6.12-rc4-sysfsdyncallback-full/drivers/usb/media/sn9c102_core.c	2005-05-07 05:03:34.000000000 -0400
@@ -1130,14 +1130,14 @@ sn9c102_store_green(struct class_device*
 	case BRIDGE_SN9C102:
 		if (value > 0x0f)
 			return -EINVAL;
-		if ((res = sn9c102_store_reg(cd, "0x11", 4)) >= 0)
-			res = sn9c102_store_val(cd, buf, len);
+		if ((res = sn9c102_store_reg(cd, "0x11", 4, sdata)) >= 0)
+			res = sn9c102_store_val(cd, buf, len, sdata);
 		break;
 	case BRIDGE_SN9C103:
 		if (value > 0x7f)
 			return -EINVAL;
-		if ((res = sn9c102_store_reg(cd, "0x04", 4)) >= 0)
-			res = sn9c102_store_val(cd, buf, len);
+		if ((res = sn9c102_store_reg(cd, "0x04", 4, sdata)) >= 0)
+			res = sn9c102_store_val(cd, buf, len, sdata);
 		break;
 	}
 
@@ -1156,8 +1156,8 @@ sn9c102_store_blue(struct class_device* 
 	if (!count || value > 0x7f)
 		return -EINVAL;
 
-	if ((res = sn9c102_store_reg(cd, "0x06", 4)) >= 0)
-		res = sn9c102_store_val(cd, buf, len);
+	if ((res = sn9c102_store_reg(cd, "0x06", 4, sdata)) >= 0)
+		res = sn9c102_store_val(cd, buf, len, sdata);
 
 	return res;
 }
@@ -1174,8 +1174,8 @@ sn9c102_store_red(struct class_device* c
 	if (!count || value > 0x7f)
 		return -EINVAL;
 
-	if ((res = sn9c102_store_reg(cd, "0x05", 4)) >= 0)
-		res = sn9c102_store_val(cd, buf, len);
+	if ((res = sn9c102_store_reg(cd, "0x05", 4, sdata)) >= 0)
+		res = sn9c102_store_val(cd, buf, len, sdata);
 
 	return res;
 }
diff -uprN -X dontdiff linux-2.6.12-rc4-sysfsdyncallback-autoupdate/drivers/w1/w1_family.h linux-2.6.12-rc4-sysfsdyncallback-full/drivers/w1/w1_family.h
--- linux-2.6.12-rc4-sysfsdyncallback-autoupdate/drivers/w1/w1_family.h	2005-05-07 04:34:48.000000000 -0400
+++ linux-2.6.12-rc4-sysfsdyncallback-full/drivers/w1/w1_family.h	2005-05-07 05:03:34.000000000 -0400
@@ -34,10 +34,10 @@
 
 struct w1_family_ops
 {
-	ssize_t (* rname)(struct device *, char *);
+	ssize_t (* rname)(struct device *, char *, void *);
 	ssize_t (* rbin)(struct kobject *, char *, loff_t, size_t);
 	
-	ssize_t (* rval)(struct device *, char *);
+	ssize_t (* rval)(struct device *, char *, void *);
 	unsigned char rvalname[MAXNAMELEN];
 };
 





------=_Part_419_677152.1115472146513--
