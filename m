Return-Path: <linux-kernel-owner+willy=40w.ods.org@vger.kernel.org>
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id <S261351AbTCORIp>; Sat, 15 Mar 2003 12:08:45 -0500
Received: (majordomo@vger.kernel.org) by vger.kernel.org
	id <S261354AbTCORIp>; Sat, 15 Mar 2003 12:08:45 -0500
Received: from smtp2.eunet.yu ([194.247.192.51]:63640 "EHLO smtp2.eunet.yu")
	by vger.kernel.org with ESMTP id <S261351AbTCORIn>;
	Sat, 15 Mar 2003 12:08:43 -0500
From: Toplica =?utf-8?q?Tanaskovi=C4=87?= <toptan@EUnet.yu>
To: linux-kernel@vger.kernel.org
Subject: AGP 3.0 for 2.4.21-pre5
Date: Sat, 15 Mar 2003 18:17:49 +0100
User-Agent: KMail/1.5
Cc: alan@lxorguk.ukuu.org.uk, davej@codemonkey.org.uk, torvalds@transmeta.com
MIME-Version: 1.0
Message-Id: <200303151816.39915.toptan@EUnet.yu>
Content-Type: Multipart/Mixed;
  boundary="Boundary-00=_9A2c+ofsCm0/9g1"
Sender: linux-kernel-owner@vger.kernel.org
X-Mailing-List: linux-kernel@vger.kernel.org


--Boundary-00=_9A2c+ofsCm0/9g1
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

	Hi, everyone!

	This is my second try to backport AGP 3.0 to 2.4 tree. This backport adds 
generic AGP 3.0 routines and VIA chipset specific routines. 
	All code is based upon Dave's code for 2.5.64, and it now respects coding 
style used in 2.4 tree, so no more stupid includes, makefile changes, etc.
	There is support only for VIA KT400 chipset, at the moment. When I find intel 
mobo to test, I'll try to add support for intel too.
	Works fine with XFree 4.2.0 and 4.3.0.
-- 
Regards,
Toplica Tanaskovic



--Boundary-00=_9A2c+ofsCm0/9g1
Content-Type: application/x-bzip2;
  name="agp3-2.4.21-pre5.diff.bz2"
Content-Transfer-Encoding: base64
Content-Disposition: attachment; filename="agp3-2.4.21-pre5.diff.bz2"

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
GEGSNi+eOOeumuZtuQR/8XckU4UJCIO0xYA=

--Boundary-00=_9A2c+ofsCm0/9g1--

