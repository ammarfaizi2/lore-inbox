Return-Path: <linux-kernel-owner+willy=40w.ods.org-S964784AbVI0BBI@vger.kernel.org>
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S964784AbVI0BBI (ORCPT <rfc822;willy@w.ods.org>);
	Mon, 26 Sep 2005 21:01:08 -0400
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S964789AbVI0BBH
	(ORCPT <rfc822;linux-kernel-outgoing>);
	Mon, 26 Sep 2005 21:01:07 -0400
Received: from zproxy.gmail.com ([64.233.162.205]:16993 "EHLO zproxy.gmail.com")
	by vger.kernel.org with ESMTP id S964783AbVI0BBF (ORCPT
	<rfc822;linux-kernel@vger.kernel.org>);
	Mon, 26 Sep 2005 21:01:05 -0400
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:cc:mime-version:content-type;
        b=KwkC8pQko6p4FOBkfbcurwOX/+oTQYlt9uoveMySIS+qRDHeqLuaQWsiFHa7gFHbPCk/ayORShoHuTDsELguZg5xxKRkmL5vmZkofA7WoD78Nw5xNTjxlv9O4dQBGBD5+Dyra6hGfS8uVowoi8XHaB4Pp6TYrdW3IgKwZzvj8Ik=
Message-ID: <355e5e5e0509261801613c9bdb@mail.gmail.com>
Date: Mon, 26 Sep 2005 21:01:04 -0400
From: Lukasz Kosewski <lkosewsk@gmail.com>
Reply-To: Lukasz Kosewski <lkosewsk@gmail.com>
To: Jeff Garzik <jgarzik@pobox.com>
Subject: [PATCH 1/3] Add disk hotswap support to libata RESEND #5
Cc: linux-kernel@vger.kernel.org, linux-ide@vger.kernel.org,
       linux-scsi@vger.kernel.org
MIME-Version: 1.0
Content-Type: multipart/mixed; 
	boundary="----=_Part_24527_25282407.1127782864857"
Sender: linux-kernel-owner@vger.kernel.org
X-Mailing-List: linux-kernel@vger.kernel.org

------=_Part_24527_25282407.1127782864857
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Hey Jeff, all,

Patch 1/3 for libata hotswapping, properly masking out hotplug
interrupts on Promise SATAII150 line of controllers.

More comments available in patch and header, please review and apply
if you like it!

Luke Kosewski

------=_Part_24527_25282407.1127782864857
Content-Type: text/x-patch; name="01-promise_sataII150_support-2.6.14-rc2-git5.diff"
Content-Transfer-Encoding: base64
Content-Disposition: attachment; filename="01-promise_sataII150_support-2.6.14-rc2-git5.diff"

MjYuMDkuMDUgICAgTHVrZSBLb3Nld3NraSAgIDxsa29zZXdza0BuaXQuY2E+CgoJKiBBIHBhdGNo
IHRvIHRoZSBzYXRhX3Byb21pc2UgZHJpdmVyIGluIGxpYmF0YSBmb3IgaXQgdG8gY29ycmVjdGx5
IG1hc2sKCSAgb3V0IGhvdHBsdWcgaW50ZXJydXB0cyBvbiBTQVRBSUkxNTAgVHg0L1R4MiBQbHVz
IGNvbnRyb2xsZXJzLgoJKiBUaGlzIGlzIHJlc2VuZCAjNC4gIE5vdyBubyBsb25nZXIgbWVtb3J5
IGxlYWtpbmcgc3RydWN0CgkgIHBkY19ob3N0X3ByaXZzIGFsbCBvdmVyIHRoZSBwbGFjZSBvbiBj
b250cm9sbGVyIGhvdC11bnBsdWdzLgoKZGlmZiAtcnB1TiBsaW51eC0yLjYuMTQtcmMxL2RyaXZl
cnMvc2NzaS9zYXRhX3Byb21pc2UuYyBsaW51eC0yLjYuMTQtcmMxLW5ldy9kcml2ZXJzL3Njc2kv
c2F0YV9wcm9taXNlLmMKLS0tIGxpbnV4LTIuNi4xNC1yYzEvZHJpdmVycy9zY3NpL3NhdGFfcHJv
bWlzZS5jCTIwMDUtMDktMTIgMjM6MTI6MDkuMDAwMDAwMDAwIC0wNDAwCisrKyBsaW51eC0yLjYu
MTQtcmMxLW5ldy9kcml2ZXJzL3Njc2kvc2F0YV9wcm9taXNlLmMJMjAwNS0wOS0xNCAxNDoxMTo0
OS4wMDAwMDAwMDAgLTA0MDAKQEAgLTU3LDYgKzU3LDcgQEAgZW51bSB7CiAJUERDX0dMT0JBTF9D
VEwJCT0gMHg0OCwgLyogR2xvYmFsIGNvbnRyb2wvc3RhdHVzIChwZXIgcG9ydCkgKi8KIAlQRENf
Q1RMU1RBVAkJPSAweDYwLAkvKiBJREUgY29udHJvbCBhbmQgc3RhdHVzIChwZXIgcG9ydCkgKi8K
IAlQRENfU0FUQV9QTFVHX0NTUgk9IDB4NkMsIC8qIFNBVEEgUGx1ZyBjb250cm9sL3N0YXR1cyBy
ZWcgKi8KKwlQREMyX1NBVEFfUExVR19DU1IJPSAwWDYwLCAvKiBTQVRBSUkgUGx1ZyBjb250cm9s
L3N0YXR1cyByZWcgKi8KIAlQRENfU0xFV19DVEwJCT0gMHg0NzAsIC8qIHNsZXcgcmF0ZSBjb250
cm9sIHJlZyAqLwogCiAJUERDX0VSUl9NQVNLCQk9ICgxPDwxOSkgfCAoMTw8MjApIHwgKDE8PDIx
KSB8ICgxPDwyMikgfApAQCAtNjUsOCArNjYsMTAgQEAgZW51bSB7CiAJYm9hcmRfMjAzN3gJCT0g
MCwJLyogRmFzdFRyYWsgUzE1MCBUWDJwbHVzICovCiAJYm9hcmRfMjAzMTkJCT0gMSwJLyogRmFz
dFRyYWsgUzE1MCBUWDQgKi8KIAlib2FyZF8yMDYxOQkJPSAyLAkvKiBGYXN0VHJhayBUWDQwMDAg
Ki8KKwlib2FyZF8yMDU3eAkJPSAzLAkvKiBTQVRBSUkxNTAgVHgycGx1cyAqLworCWJvYXJkXzQw
NTE4CQk9IDQsCS8qIFNBVEFJSTE1MCBUeDQgKi8KIAotCVBEQ19IQVNfUEFUQQkJPSAoMSA8PCAx
KSwgLyogUERDMjAzNzUgaGFzIFBBVEEgKi8KKwlQRENfSEFTX1BBVEEJCT0gKDEgPDwgMSksIC8q
IFBEQzIwMzc1LzIwNTc1IGhhcyBQQVRBICovCiAKIAlQRENfUkVTRVQJCT0gKDEgPDwgMTEpLCAv
KiBIRE1BIHJlc2V0ICovCiB9OwpAQCAtNzcsNiArODAsMTAgQEAgc3RydWN0IHBkY19wb3J0X3By
aXYgewogCWRtYV9hZGRyX3QJCXBrdF9kbWE7CiB9OwogCitzdHJ1Y3QgcGRjX2hvc3RfcHJpdiB7
CisJaW50CQkJaG90cGx1Z19vZmZzZXQ7Cit9OworCiBzdGF0aWMgdTMyIHBkY19zYXRhX3Njcl9y
ZWFkIChzdHJ1Y3QgYXRhX3BvcnQgKmFwLCB1bnNpZ25lZCBpbnQgc2NfcmVnKTsKIHN0YXRpYyB2
b2lkIHBkY19zYXRhX3Njcl93cml0ZSAoc3RydWN0IGF0YV9wb3J0ICphcCwgdW5zaWduZWQgaW50
IHNjX3JlZywgdTMyIHZhbCk7CiBzdGF0aWMgaW50IHBkY19hdGFfaW5pdF9vbmUgKHN0cnVjdCBw
Y2lfZGV2ICpwZGV2LCBjb25zdCBzdHJ1Y3QgcGNpX2RldmljZV9pZCAqZW50KTsKQEAgLTk4LDYg
KzEwNSw3IEBACiBzdGF0aWMgdm9pZCBwZGNfZXhlY19jb21tYW5kX21taW8oc3RydWN0IGF0YV9w
b3J0ICphcCwgc3RydWN0IGF0YV90YXNrZmlsZSAqdGYpOwogc3RhdGljIHZvaWQgcGRjX2lycV9j
bGVhcihzdHJ1Y3QgYXRhX3BvcnQgKmFwKTsKIHN0YXRpYyBpbnQgcGRjX3FjX2lzc3VlX3Byb3Qo
c3RydWN0IGF0YV9xdWV1ZWRfY21kICpxYyk7CitzdGF0aWMgdm9pZCBwZGNfaG9zdF9zdG9wKHN0
cnVjdCBhdGFfaG9zdF9zZXQgKmhvc3Rfc2V0KTsKIAogCiBzdGF0aWMgU2NzaV9Ib3N0X1RlbXBs
YXRlIHBkY19hdGFfc2h0ID0gewpAQCAtMTQxLDcgKzE0OCw3IEBAIHN0YXRpYyBzdHJ1Y3QgYXRh
X3BvcnRfb3BlcmF0aW9ucyBwZGNfc2EKCS5zY3Jfd3JpdGUJCT0gcGRjX3NhdGFfc2NyX3dyaXRl
LAoJLnBvcnRfc3RhcnQJCT0gcGRjX3BvcnRfc3RhcnQsCgkucG9ydF9zdG9wCQk9IHBkY19wb3J0
X3N0b3AsCi0JLmhvc3Rfc3RvcAkJPSBhdGFfcGNpX2hvc3Rfc3RvcCwKKwkuaG9zdF9zdG9wCQk9
IHBkY19ob3N0X3N0b3AsCiB9OwogCiBzdGF0aWMgc3RydWN0IGF0YV9wb3J0X29wZXJhdGlvbnMg
cGRjX3BhdGFfb3BzID0gewpAQCAtMTYyLDcgKzE2OSw3IEBAIHN0YXRpYyBzdHJ1Y3QgYXRhX3Bv
cnRfb3BlcmF0aW9ucyBwZGNfcGEKIAoJLnBvcnRfc3RhcnQJCT0gcGRjX3BvcnRfc3RhcnQsCgku
cG9ydF9zdG9wCQk9IHBkY19wb3J0X3N0b3AsCi0JLmhvc3Rfc3RvcAkJPSBhdGFfcGNpX2hvc3Rf
c3RvcCwKKwkuaG9zdF9zdG9wCQk9IHBkY19ob3N0X3N0b3AsCiB9OwogCiBzdGF0aWMgc3RydWN0
IGF0YV9wb3J0X2luZm8gcGRjX3BvcnRfaW5mb1tdID0gewpAQCAtMTkwLDYgKzE5OCwyOCBAQCBz
dGF0aWMgc3RydWN0IGF0YV9wb3J0X2luZm8gcGRjX3BvcnRfaW5mCiAJCS51ZG1hX21hc2sJPSAw
eDdmLCAvKiB1ZG1hMC02IDsgRklYTUUgKi8KIAkJLnBvcnRfb3BzCT0gJnBkY19wYXRhX29wcywK
IAl9LAorCisJLyogYm9hcmRfMjA1N3ggKi8KKwl7CisJCS5zaHQJCT0gJnBkY19hdGFfc2h0LAor
CQkuaG9zdF9mbGFncwk9IEFUQV9GTEFHX1NBVEEgfCBBVEFfRkxBR19OT19MRUdBQ1kgfAorCQkJ
CSAgQVRBX0ZMQUdfU1JTVCB8IEFUQV9GTEFHX01NSU8sCisJCS5waW9fbWFzawk9IDB4MWYsIC8q
IHBpbzAtNCAqLworCQkubXdkbWFfbWFzawk9IDB4MDcsIC8qIG13ZG1hMC0yICovCisJCS51ZG1h
X21hc2sJPSAweDdmLCAvKiB1ZG1hMC02IDsgRklYTUUgKi8KKwkJLnBvcnRfb3BzCT0gJnBkY19z
YXRhX29wcywKKwl9LAorCisJLyogYm9hcmRfNDA1MTggKi8KKwl7CisJCS5zaHQJCT0gJnBkY19h
dGFfc2h0LAorCQkuaG9zdF9mbGFncwk9IEFUQV9GTEFHX1NBVEEgfCBBVEFfRkxBR19OT19MRUdB
Q1kgfAorCQkJCSAgQVRBX0ZMQUdfU1JTVCB8IEFUQV9GTEFHX01NSU8sCisJCS5waW9fbWFzawk9
IDB4MWYsIC8qIHBpbzAtNCAqLworCQkubXdkbWFfbWFzawk9IDB4MDcsIC8qIG13ZG1hMC0yICov
CisJCS51ZG1hX21hc2sJPSAweDdmLCAvKiB1ZG1hMC02IDsgRklYTUUgKi8KKwkJLnBvcnRfb3Bz
CT0gJnBkY19zYXRhX29wcywKKwl9LAogfTsKIAogc3RhdGljIHN0cnVjdCBwY2lfZGV2aWNlX2lk
IHBkY19hdGFfcGNpX3RibFtdID0gewpAQCAtMjA0LDkgKzIzNCw5IEBAIHN0YXRpYyBzdHJ1Y3Qg
cGNpX2RldmljZV9pZCBwZGNfYXRhX3BjaV8KIAl7IFBDSV9WRU5ET1JfSURfUFJPTUlTRSwgMHgz
Mzc2LCBQQ0lfQU5ZX0lELCBQQ0lfQU5ZX0lELCAwLCAwLAogCSAgYm9hcmRfMjAzN3ggfSwKIAl7
IFBDSV9WRU5ET1JfSURfUFJPTUlTRSwgMHgzNTc0LCBQQ0lfQU5ZX0lELCBQQ0lfQU5ZX0lELCAw
LCAwLAotCSAgYm9hcmRfMjAzN3ggfSwKKwkgIGJvYXJkXzIwNTd4IH0sCiAJeyBQQ0lfVkVORE9S
X0lEX1BST01JU0UsIDB4M2Q3NSwgUENJX0FOWV9JRCwgUENJX0FOWV9JRCwgMCwgMCwKLQkgIGJv
YXJkXzIwMzd4IH0sCisJICBib2FyZF8yMDU3eCB9LAogCiAJeyBQQ0lfVkVORE9SX0lEX1BST01J
U0UsIDB4MzMxOCwgUENJX0FOWV9JRCwgUENJX0FOWV9JRCwgMCwgMCwKIAkgIGJvYXJkXzIwMzE5
IH0sCkBAIC0yMTcsNyArMjQ3LDcgQEAgc3RhdGljIHN0cnVjdCBwY2lfZGV2aWNlX2lkIHBkY19h
dGFfcGNpXwogCXsgUENJX1ZFTkRPUl9JRF9QUk9NSVNFLCAweDNkMTcsIFBDSV9BTllfSUQsIFBD
SV9BTllfSUQsIDAsIDAsCiAJICBib2FyZF8yMDMxOSB9LAogCXsgUENJX1ZFTkRPUl9JRF9QUk9N
SVNFLCAweDNkMTgsIFBDSV9BTllfSUQsIFBDSV9BTllfSUQsIDAsIDAsCi0JICBib2FyZF8yMDMx
OSB9LAorCSAgYm9hcmRfNDA1MTggfSwKIAogCXsgUENJX1ZFTkRPUl9JRF9QUk9NSVNFLCAweDY2
MjksIFBDSV9BTllfSUQsIFBDSV9BTllfSUQsIDAsIDAsCiAJICBib2FyZF8yMDYxOSB9LApAQCAt
MzExLDYgKzMzMSwxNiBAQCBzdGF0aWMgdm9pZCBwZGNfcG9ydF9zdG9wKHN0cnVjdCBhdGFfcG9y
CiB9CiAKIAorc3RhdGljIHZvaWQgcGRjX2hvc3Rfc3RvcChzdHJ1Y3QgYXRhX2hvc3Rfc2V0ICpo
b3N0X3NldCkKK3sKKwlzdHJ1Y3QgcGRjX2hvc3RfcHJpdiAqaHAgPSBob3N0X3NldC0+cHJpdmF0
ZV9kYXRhOworCisJYXRhX3BjaV9ob3N0X3N0b3AoaG9zdF9zZXQpOworCisJa2ZyZWUoaHApOyAg
LyogQ2xlYW4gdXAgb3VyIG1lc3MgKi8KK30KKworCiBzdGF0aWMgdm9pZCBwZGNfcmVzZXRfcG9y
dChzdHJ1Y3QgYXRhX3BvcnQgKmFwKQogewoJdm9pZCBfX2lvbWVtICptbWlvID0gKHZvaWQgX19p
b21lbSAqKSBhcC0+aW9hZGRyLmNtZF9hZGRyICsgUERDX0NUTFNUQVQ7CkBAIC00NzgsMTQgKzUx
OCwxNSBAQCBzdGF0aWMgaXJxcmV0dXJuX3QgcGRjX2ludGVycnVwdCAoaW50IGlyCiAJCVZQUklO
VEsoIlFVSUNLIEVYSVQgMlxuIik7CiAJCXJldHVybiBJUlFfTk9ORTsKIAl9CisKKwlzcGluX2xv
Y2soJmhvc3Rfc2V0LT5sb2NrKTsKKwogCW1hc2sgJj0gMHhmZmZmOwkJLyogb25seSAxNiB0YWdz
IHBvc3NpYmxlICovCiAJaWYgKCFtYXNrKSB7CiAJCVZQUklOVEsoIlFVSUNLIEVYSVQgM1xuIik7
Ci0JCXJldHVybiBJUlFfTk9ORTsKKwkJZ290byBkb25lX2lycTsKIAl9CiAKLQlzcGluX2xvY2so
Jmhvc3Rfc2V0LT5sb2NrKTsKLQogCXdyaXRlbChtYXNrLCBtbWlvX2Jhc2UgKyBQRENfSU5UX1NF
UU1BU0spOwogCiAJZm9yIChpID0gMDsgaSA8IGhvc3Rfc2V0LT5uX3BvcnRzOyBpKyspIHsKQEAg
LTUwMiwxMCArNTQzLDEwIEBAIHN0YXRpYyBpcnFyZXR1cm5fdCBwZGNfaW50ZXJydXB0IChpbnQg
aXIKIAkJfQogCX0KIAotICAgICAgICBzcGluX3VubG9jaygmaG9zdF9zZXQtPmxvY2spOwotCiAJ
VlBSSU5USygiRVhJVFxuIik7CiAKK2RvbmVfaXJxOgorCXNwaW5fdW5sb2NrKCZob3N0X3NldC0+
bG9jayk7CiAJcmV0dXJuIElSUV9SRVRWQUwoaGFuZGxlZCk7CiB9CiAKQEAgLTU4Myw2ICs2MjQs
OCBAQCBzdGF0aWMgdm9pZCBwZGNfYXRhX3NldHVwX3BvcnQoc3RydWN0IGF0CiBzdGF0aWMgdm9p
ZCBwZGNfaG9zdF9pbml0KHVuc2lnbmVkIGludCBjaGlwX2lkLCBzdHJ1Y3QgYXRhX3Byb2JlX2Vu
dCAqcGUpCiB7CiAJdm9pZCBfX2lvbWVtICptbWlvID0gcGUtPm1taW9fYmFzZTsKKwlzdHJ1Y3Qg
cGRjX2hvc3RfcHJpdiAqaHAgPSBwZS0+cHJpdmF0ZV9kYXRhOworCWludCBob3RwbHVnX29mZnNl
dCA9IGhwLT5ob3RwbHVnX29mZnNldDsKIAl1MzIgdG1wOwogCiAJLyoKQEAgLTU5NywxMiArNjQw
LDEyIEBAIHN0YXRpYyB2b2lkIHBkY19ob3N0X2luaXQodW5zaWduZWQgaW50IGMKIAl3cml0ZWwo
dG1wLCBtbWlvICsgUERDX0ZMQVNIX0NUTCk7CiAKIAkvKiBjbGVhciBwbHVnL3VucGx1ZyBmbGFn
cyBmb3IgYWxsIHBvcnRzICovCi0JdG1wID0gcmVhZGwobW1pbyArIFBEQ19TQVRBX1BMVUdfQ1NS
KTsKLQl3cml0ZWwodG1wIHwgMHhmZiwgbW1pbyArIFBEQ19TQVRBX1BMVUdfQ1NSKTsKKwl0bXAg
PSByZWFkbChtbWlvICsgaG90cGx1Z19vZmZzZXQpOworCXdyaXRlbCh0bXAgfCAweGZmLCBtbWlv
ICsgaG90cGx1Z19vZmZzZXQpOwogCiAJLyogbWFzayBwbHVnL3VucGx1ZyBpbnRzICovCi0JdG1w
ID0gcmVhZGwobW1pbyArIFBEQ19TQVRBX1BMVUdfQ1NSKTsKLQl3cml0ZWwodG1wIHwgMHhmZjAw
MDAsIG1taW8gKyBQRENfU0FUQV9QTFVHX0NTUik7CisJdG1wID0gcmVhZGwobW1pbyArIGhvdHBs
dWdfb2Zmc2V0KTsKKwl3cml0ZWwodG1wIHwgMHhmZjAwMDAsIG1taW8gKyBob3RwbHVnX29mZnNl
dCk7CiAKIAkvKiByZWR1Y2UgVEJHIGNsb2NrIHRvIDEzMyBNaHouICovCiAJdG1wID0gcmVhZGwo
bW1pbyArIFBEQ19UQkdfTU9ERSk7CkBAIC02MjQsNiArNjY3LDcgQEAgc3RhdGljIGludCBwZGNf
YXRhX2luaXRfb25lIChzdHJ1Y3QgcGNpXwogewogCXN0YXRpYyBpbnQgcHJpbnRlZF92ZXJzaW9u
OwogCXN0cnVjdCBhdGFfcHJvYmVfZW50ICpwcm9iZV9lbnQgPSBOVUxMOworCXN0cnVjdCBwZGNf
aG9zdF9wcml2ICpocDsKIAl1bnNpZ25lZCBsb25nIGJhc2U7CiAJdm9pZCBfX2lvbWVtICptbWlv
X2Jhc2U7CiAJdW5zaWduZWQgaW50IGJvYXJkX2lkeCA9ICh1bnNpZ25lZCBpbnQpIGVudC0+ZHJp
dmVyX2RhdGE7CkBAIC02NzEsNiArNzE1LDE3IEBAIHN0YXRpYyBpbnQgcGRjX2F0YV9pbml0X29u
ZSAoc3RydWN0IHBjaV8KIAl9CiAJYmFzZSA9ICh1bnNpZ25lZCBsb25nKSBtbWlvX2Jhc2U7CiAK
KwlocCA9IGttYWxsb2Moc2l6ZW9mKCpocCksIEdGUF9LRVJORUwpOworCWlmIChocCA9PSBOVUxM
KSB7CisJCXJjID0gLUVOT01FTTsKKwkJZ290byBlcnJfb3V0X2ZyZWVfZW50OworCX0KKwltZW1z
ZXQoaHAsIDAsIHNpemVvZigqaHApKTsKKworCS8qIFNldCBkZWZhdWx0IGhvdHBsdWcgb2Zmc2V0
ICovCisJaHAtPmhvdHBsdWdfb2Zmc2V0ID0gUERDX1NBVEFfUExVR19DU1I7CisJcHJvYmVfZW50
LT5wcml2YXRlX2RhdGEgPSBocDsKKwogCXByb2JlX2VudC0+c2h0CQk9IHBkY19wb3J0X2luZm9b
Ym9hcmRfaWR4XS5zaHQ7CiAJcHJvYmVfZW50LT5ob3N0X2ZsYWdzCT0gcGRjX3BvcnRfaW5mb1ti
b2FyZF9pZHhdLmhvc3RfZmxhZ3M7CiAJcHJvYmVfZW50LT5waW9fbWFzawk9IHBkY19wb3J0X2lu
Zm9bYm9hcmRfaWR4XS5waW9fbWFzazsKQEAgLTY5MCw2ICs3NDUsOSBAQCBzdGF0aWMgaW50IHBk
Y19hdGFfaW5pdF9vbmUgKHN0cnVjdCBwY2lfCiAKIAkvKiBub3RpY2UgNC1wb3J0IGJvYXJkcyAq
LwogCXN3aXRjaCAoYm9hcmRfaWR4KSB7CisJY2FzZSBib2FyZF80MDUxODoKKwkJLyogT3ZlcnJp
ZGUgaG90cGx1ZyBvZmZzZXQgZm9yIFNBVEFJSTE1MCAqLworCQlocC0+aG90cGx1Z19vZmZzZXQg
PSBQREMyX1NBVEFfUExVR19DU1I7CiAJY2FzZSBib2FyZF8yMDMxOToKICAgICAgICAJCXByb2Jl
X2VudC0+bl9wb3J0cyA9IDQ7CiAKQEAgLTY5OSw2ICs3NTcsOSBAQCBzdGF0aWMgaW50IHBkY19h
dGFfaW5pdF9vbmUgKHN0cnVjdCBwY2lfCiAJCXByb2JlX2VudC0+cG9ydFsyXS5zY3JfYWRkciA9
IGJhc2UgKyAweDYwMDsKIAkJcHJvYmVfZW50LT5wb3J0WzNdLnNjcl9hZGRyID0gYmFzZSArIDB4
NzAwOwogCQlicmVhazsKKwljYXNlIGJvYXJkXzIwNTd4OgorCQkvKiBPdmVycmlkZSBob3RwbHVn
IG9mZnNldCBmb3IgU0FUQUlJMTUwICovCisJCWhwLT5ob3RwbHVnX29mZnNldCA9IFBEQzJfU0FU
QV9QTFVHX0NTUjsKIAljYXNlIGJvYXJkXzIwMzd4OgogICAgICAgIAkJcHJvYmVfZW50LT5uX3Bv
cnRzID0gMjsKIAkJYnJlYWs7CkBAIC03MjQsNyArNzg1LDcgQEAgc3RhdGljIGludCBwZGNfYXRh
X2luaXRfb25lIChzdHJ1Y3QgcGNpXwoJLyogaW5pdGlhbGl6ZSBhZGFwdGVyICovCglwZGNfaG9z
dF9pbml0KGJvYXJkX2lkeCwgcHJvYmVfZW50KTsKIAotCS8qIEZJWE1FOiBjaGVjayBhdGFfZGV2
aWNlX2FkZCByZXR1cm4gdmFsdWUgKi8KKwkvKiBGSVhNRTogY2hlY2sgYXRhX2RldmljZV9hZGQg
cmV0dXJuIHZhbHVlLiAgSWYgMCwga2ZyZWUoaHApICovCglhdGFfZGV2aWNlX2FkZChwcm9iZV9l
bnQpOwoJa2ZyZWUocHJvYmVfZW50KTsKIAo=
------=_Part_24527_25282407.1127782864857--
