Return-Path: <linux-kernel-owner+willy=40w.ods.org-S932191AbVKNWOg@vger.kernel.org>
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S932191AbVKNWOg (ORCPT <rfc822;willy@w.ods.org>);
	Mon, 14 Nov 2005 17:14:36 -0500
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S932188AbVKNWOg
	(ORCPT <rfc822;linux-kernel-outgoing>);
	Mon, 14 Nov 2005 17:14:36 -0500
Received: from lmcgw.cs.sunysb.edu ([130.245.128.4]:39560 "EHLO
	smtp.lmc.cs.sunysb.edu") by vger.kernel.org with ESMTP
	id S932191AbVKNWOe (ORCPT <rfc822;linux-kernel@vger.kernel.org>);
	Mon, 14 Nov 2005 17:14:34 -0500
Date: Mon, 14 Nov 2005 17:14:39 -0500
From: Giridhar Pemmasani <giri@lmc.cs.sunysb.edu>
To: Alan Cox <alan@lxorguk.ukuu.org.uk>
Cc: linux-kernel@vger.kernel.org
Subject: Re: [2.6 patch] i386: always use 4k stacks
In-Reply-To: <1132007638.16148.35.camel@localhost.localdomain>
References: <20051114133802.38755.qmail@web50205.mail.yahoo.com>
	<1131979779.5751.17.camel@localhost.localdomain>
	<dlal2q$kdo$1@sea.gmane.org>
	<1132007638.16148.35.camel@localhost.localdomain>
User-Agent: Wanderlust/2.14.0 (Africa) SEMI/1.14.6 (Maruoka) FLIM/1.14.7
 (=?ISO-8859-4?Q?Sanj=F2?=) APEL/10.6 MULE XEmacs/21.4 (patch 17) (Jumbo
 Shrimp) (i386-debian-linux)
MIME-Version: 1.0 (generated by SEMI 1.14.6 - "Maruoka")
Content-Type: text/plain; charset=US-ASCII
Message-Id: <20051114221430.EEC4116F4D9@smtp.lmc.cs.sunysb.edu>
Sender: linux-kernel-owner@vger.kernel.org
X-Mailing-List: linux-kernel@vger.kernel.org

On Mon, 14 Nov 2005 22:33:57 +0000, Alan Cox <alan@lxorguk.ukuu.org.uk> said:

  Alan> Switch stack before calling the Windows bits. If we take an IRQ then
  Alan> the kernel will itself switch to its own IRQ stack for the IRQ
  Alan> handling. I don't think there is much more required.

Shouldn't I have to prevent scheduler from changing the tasks when executing
Windows code? Otherwise, kernel gets wrong current thread information,
which is based on stack pointer. This is the stumbling block for implementing
private stacks.

Thanks,
Giri
