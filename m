Return-Path: <linux-kernel-owner+willy=40w.ods.org@vger.kernel.org>
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S265836AbTF3KvY (ORCPT <rfc822;willy@w.ods.org>);
	Mon, 30 Jun 2003 06:51:24 -0400
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S265832AbTF3KvY
	(ORCPT <rfc822;linux-kernel-outgoing>);
	Mon, 30 Jun 2003 06:51:24 -0400
Received: from angband.namesys.com ([212.16.7.85]:16615 "EHLO
	angband.namesys.com") by vger.kernel.org with ESMTP id S265838AbTF3Kul
	(ORCPT <rfc822;linux-kernel@vger.kernel.org>);
	Mon, 30 Jun 2003 06:50:41 -0400
Date: Mon, 30 Jun 2003 15:05:00 +0400
From: Oleg Drokin <green@namesys.com>
To: Ivan Kokshaysky <ink@jurassic.park.msu.ru>
Cc: "T. Weyergraf" <kirk@colinet.de>, linux-kernel@vger.kernel.org
Subject: Re: 2.5.73 on alpha/smp build failure
Message-ID: <20030630110500.GA29672@namesys.com>
References: <kirk-1030628112813.A0111034@hydra.colinet.de> <20030628133818.GA6073@namesys.com> <20030629155616.B694@pls.park.msu.ru> <20030630054259.GC17466@namesys.com> <20030630145243.A22506@jurassic.park.msu.ru>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <20030630145243.A22506@jurassic.park.msu.ru>
User-Agent: Mutt/1.4i
Sender: linux-kernel-owner@vger.kernel.org
X-Mailing-List: linux-kernel@vger.kernel.org

Hello!

On Mon, Jun 30, 2003 at 02:52:43PM +0400, Ivan Kokshaysky wrote:

> > See attached assembly generated by cross compiler vs native compiler.
> Code generated by gcc-2.95 is obviously bogus. Which is not surprising -
> 2.95 is known to be broken for 32-bit host -> 64-bit target
> cross-compilation. Try something more recent. ;-)

Sigh. So I suddenly succeed in building cross gcc-3.3 that works correctly with
my simple test (for some reason it needed to disable dynamic libgcc build
before I was able to get at least something working). And now guess what?
I get "bad kernel unaligned access ..." message at the point where sda's partition
table would get normally printed. The first address printed is somewhere near end of
__make_request, the second address is prior to the kernel start, and two last numbers are
"22 31".
If I disable SCSI completely, it even boots and works which is of course a great
progress over what I had with gcc-2.95 (it boots off IDE anyway). ;)

I will try to get newer binutils on the box itself to see if it will make any
difference for the kernel built natively.

Bye,
    Oleg
