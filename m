Return-Path: <linux-kernel-owner@vger.kernel.org>
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id <S312610AbSDBBTg>; Mon, 1 Apr 2002 20:19:36 -0500
Received: (majordomo@vger.kernel.org) by vger.kernel.org
	id <S312735AbSDBBTS>; Mon, 1 Apr 2002 20:19:18 -0500
Received: from dyn-212-129-51-155.ppp.libertysurf.fr ([212.129.51.155]:33931
	"EHLO localhost.localdomain") by vger.kernel.org with ESMTP
	id <S312610AbSDBBTH>; Mon, 1 Apr 2002 20:19:07 -0500
Date: Tue, 2 Apr 2002 03:14:59 +0200 (CEST)
From: Rui Sousa <rui.p.m.sousa@clix.pt>
X-X-Sender: rsousa@localhost.localdomain
To: Rui Sousa <rui.p.m.sousa@clix.pt>
cc: Adam Huffman <bloch@verdurin.com>,
        emu10k1-devel <emu10k1-devel@lists.sourceforge.net>,
        <linux-kernel@vger.kernel.org>
Subject: Re: Oops in emu10k1 driver
In-Reply-To: <Pine.LNX.4.44.0204020206050.1503-100000@localhost.localdomain>
Message-ID: <Pine.LNX.4.44.0204020310550.1503-200000@localhost.localdomain>
MIME-Version: 1.0
Content-Type: MULTIPART/MIXED; BOUNDARY="8323328-1507591576-1017710099=:1503"
Sender: linux-kernel-owner@vger.kernel.org
X-Mailing-List: linux-kernel@vger.kernel.org

  This message is in MIME format.  The first part should be readable text,
  while the remaining parts are likely unreadable without MIME-aware tools.
  Send mail to mime@docserver.cac.washington.edu for more info.

--8323328-1507591576-1017710099=:1503
Content-Type: TEXT/PLAIN; charset=US-ASCII

On Tue, 2 Apr 2002, Rui Sousa wrote:

Can you please try the attached patch (against 2.4.19-pre5)?
I has some other fixes/cleanups, but these need to go
into 2.4 anyway.

Rui

> On Mon, 1 Apr 2002, Adam Huffman wrote:
> 
> Hi,
> 
> First of all, which kernel are you using?
> I believe I already fixed this bug in CVS but I haven't
> received any confirmation. Can you give it a try?
> You can get the CVS repository at:
> 
> http://sourceforge.net/cvs/?group_id=44773
> 
> Then edit the config file and point it to your kernel source,
> make, make install. That should be it.
> 
> Otherwise (when I get your kernel version) I can send you a
> patch to try out.
> 
> Rui Sousa
> 
> > On Mon, 01 Apr 2002, Alan Cox wrote:
> > 
> > > > VMware died when I put an audio CD into my DVD drive.  I wouldn't have
> > > > mentioned it here but for the fact that there was an Oops and when
> > > > decoded it pointed to the emu10k1 driver:
> > > 
> > > Yes but we don't know what vmware has been doing. Please try the same thing
> > > a few times without vmware running
> > > 
> > > > kernel BUG at audio.c:1474!
> > > > invalid operand: 0000
> > > 
> > > 
> > > This one does look like a real bug in the emu10k driver, rather than a
> > > vmware caused funny
> > 
> > Haven't been able to reproduce it with the VMware modules removed.
> > -
> > To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
> > the body of a message to majordomo@vger.kernel.org
> > More majordomo info at  http://vger.kernel.org/majordomo-info.html
> > Please read the FAQ at  http://www.tux.org/lkml/
> > 
> 
> -
> To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
> the body of a message to majordomo@vger.kernel.org
> More majordomo info at  http://vger.kernel.org/majordomo-info.html
> Please read the FAQ at  http://www.tux.org/lkml/
> 

--8323328-1507591576-1017710099=:1503
Content-Type: TEXT/PLAIN; charset=US-ASCII; name="emu10k1-2.4.19-pre5.patch"
Content-Transfer-Encoding: BASE64
Content-ID: <Pine.LNX.4.44.0204020314590.1503@localhost.localdomain>
Content-Description: emu10k1 patch
Content-Disposition: attachment; filename="emu10k1-2.4.19-pre5.patch"

ZGlmZiAtdXIgbGludXgtMi40LjE5LXByZTUub3JpZy9Eb2N1bWVudGF0aW9u
L0NvbmZpZ3VyZS5oZWxwIGxpbnV4LTIuNC4xOS1wcmU1L0RvY3VtZW50YXRp
b24vQ29uZmlndXJlLmhlbHANCi0tLSBsaW51eC0yLjQuMTktcHJlNS5vcmln
L0RvY3VtZW50YXRpb24vQ29uZmlndXJlLmhlbHAJVHVlIEFwciAgMiAwMjo0
NjowMSAyMDAyDQorKysgbGludXgtMi40LjE5LXByZTUvRG9jdW1lbnRhdGlv
bi9Db25maWd1cmUuaGVscAlUdWUgQXByICAyIDAzOjAzOjQzIDIwMDINCkBA
IC0xODk4Niw3ICsxODk4Niw3IEBADQogICBwcm9jZXNzaW5nIGVmZmVjdHMg
d2hpY2ggaW5jbHVkZSBmb3IgZXhhbXBsZTogc2lnbmFsIHJvdXRpbmcsDQog
ICBiYXNzL3RyZWJsZSBjb250cm9sLCBBQzMgcGFzc3Rocm91Z2gsIC4uLg0K
ICAgVXNlcnNwYWNlIHRvb2xzIHRvIGNyZWF0ZSBuZXcgcGF0Y2hlcyBhbmQg
bG9hZC91bmxvYWQgdGhlbSBjYW4gYmUNCi0gIGZvdW5kIGF0IDxodHRwOi8v
b3BlbnNvdXJjZS5jcmVhdGl2ZS5jb20vZGlzdC5odG1sPi4NCisgIGZvdW5k
IGF0IDxodHRwOi8vc291cmNlZm9yZ2UubmV0L3Byb2plY3RzL2VtdTEwazE+
Lg0KIA0KIENyZWF0aXZlIFNCTGl2ZSEgKEVNVTEwSzEpIE1JREkNCiBDT05G
SUdfTUlESV9FTVUxMEsxDQpkaWZmIC11ciBsaW51eC0yLjQuMTktcHJlNS5v
cmlnL2RyaXZlcnMvc291bmQvZW11MTBrMS9hdWRpby5jIGxpbnV4LTIuNC4x
OS1wcmU1L2RyaXZlcnMvc291bmQvZW11MTBrMS9hdWRpby5jDQotLS0gbGlu
dXgtMi40LjE5LXByZTUub3JpZy9kcml2ZXJzL3NvdW5kL2VtdTEwazEvYXVk
aW8uYwlTYXQgTWFyICA5IDEyOjI2OjA2IDIwMDINCisrKyBsaW51eC0yLjQu
MTktcHJlNS9kcml2ZXJzL3NvdW5kL2VtdTEwazEvYXVkaW8uYwlUdWUgQXBy
ICAyIDAyOjU4OjA1IDIwMDINCkBAIC0xMzY1LDYgKzEzNjUsMTMgQEANCiAN
CiAJYnVmZmVyLT5mcmFnbWVudF9zaXplID0gMSA8PCBidWZmZXItPm9zc2Zy
YWdzaGlmdDsNCiANCisJd2hpbGUgKGJ1ZmZlci0+ZnJhZ21lbnRfc2l6ZSAq
IFdBVkVPVVRfTUlORlJBR1MgPiBXQVZFT1VUX01BWEJVRlNJWkUpDQorCQli
dWZmZXItPmZyYWdtZW50X3NpemUgPj49IDE7DQorDQorCS8qIG5vdyB3ZSBh
cmUgc3VyZSB0aGF0Og0KKwkgKDJeV0FWRU9VVF9NSU5GUkFHU0hJRlQpIDw9
IChmcmFnbWVudF9zaXplID0gMl5uKSA8PSAoV0FWRU9VVF9NQVhCVUZTSVpF
IC8gV0FWRU9VVF9NSU5GUkFHUykNCisJKi8NCisNCiAJaWYgKCFidWZmZXIt
Pm51bWZyYWdzKSB7DQogCQl1MzIgbnVtZnJhZ3M7DQogDQpAQCAtMTM3OSwx
OSArMTM4NiwxNCBAQA0KIAkJfQ0KIAl9DQogDQotCWlmIChidWZmZXItPm51
bWZyYWdzIDwgTUlORlJBR1MpDQotCQlidWZmZXItPm51bWZyYWdzID0gTUlO
RlJBR1M7DQorCWlmIChidWZmZXItPm51bWZyYWdzIDwgV0FWRU9VVF9NSU5G
UkFHUykNCisJCWJ1ZmZlci0+bnVtZnJhZ3MgPSBXQVZFT1VUX01JTkZSQUdT
Ow0KIA0KLQlpZiAoYnVmZmVyLT5udW1mcmFncyAqIGJ1ZmZlci0+ZnJhZ21l
bnRfc2l6ZSA+IFdBVkVPVVRfTUFYQlVGU0laRSkgew0KKwlpZiAoYnVmZmVy
LT5udW1mcmFncyAqIGJ1ZmZlci0+ZnJhZ21lbnRfc2l6ZSA+IFdBVkVPVVRf
TUFYQlVGU0laRSkNCiAJCWJ1ZmZlci0+bnVtZnJhZ3MgPSBXQVZFT1VUX01B
WEJVRlNJWkUgLyBidWZmZXItPmZyYWdtZW50X3NpemU7DQogDQotCQlpZiAo
YnVmZmVyLT5udW1mcmFncyA8IE1JTkZSQUdTKSB7DQotCQkJYnVmZmVyLT5u
dW1mcmFncyA9IE1JTkZSQUdTOw0KLQkJCWJ1ZmZlci0+ZnJhZ21lbnRfc2l6
ZSA9IFdBVkVPVVRfTUFYQlVGU0laRSAvIE1JTkZSQUdTOw0KLQkJfQ0KLQ0K
LQl9IGVsc2UgaWYgKGJ1ZmZlci0+bnVtZnJhZ3MgKiBidWZmZXItPmZyYWdt
ZW50X3NpemUgPCBXQVZFT1VUX01JTkJVRlNJWkUpDQotCQlidWZmZXItPm51
bWZyYWdzID0gV0FWRU9VVF9NSU5CVUZTSVpFIC8gYnVmZmVyLT5mcmFnbWVu
dF9zaXplOw0KKwlpZiAoYnVmZmVyLT5udW1mcmFncyA8IFdBVkVPVVRfTUlO
RlJBR1MpDQorCQlCVUcoKTsNCiANCiAJYnVmZmVyLT5zaXplID0gYnVmZmVy
LT5mcmFnbWVudF9zaXplICogYnVmZmVyLT5udW1mcmFnczsNCiAJYnVmZmVy
LT5wYWdlcyA9IGJ1ZmZlci0+c2l6ZSAvIFBBR0VfU0laRSArICgoYnVmZmVy
LT5zaXplICUgUEFHRV9TSVpFKSA/IDEgOiAwKTsNCkBAIC0xNDI1LDI0ICsx
NDI3LDI5IEBADQogDQogCWJ1ZmZlci0+ZnJhZ21lbnRfc2l6ZSA9IDEgPDwg
YnVmZmVyLT5vc3NmcmFnc2hpZnQ7DQogDQorCXdoaWxlIChidWZmZXItPmZy
YWdtZW50X3NpemUgKiBXQVZFSU5fTUlORlJBR1MgPiBXQVZFSU5fTUFYQlVG
U0laRSkNCisJCWJ1ZmZlci0+ZnJhZ21lbnRfc2l6ZSA+Pj0gMTsNCisNCisJ
Lyogbm93IHdlIGFyZSBzdXJlIHRoYXQ6DQorCSAgICgyXldBVkVJTl9NSU5G
UkFHU0hJRlQpIDw9IChmcmFnbWVudF9zaXplID0gMl5uKSA8PSAoV0FWRUlO
X01BWEJVRlNJWkUgLyBXQVZFSU5fTUlORlJBR1MpDQorICAgICAgICAqLw0K
Kw0KKw0KIAlpZiAoIWJ1ZmZlci0+bnVtZnJhZ3MpDQogCQlidWZmZXItPm51
bWZyYWdzID0gKHdpaW5zdC0+Zm9ybWF0LmJ5dGVzcGVyc2VjICogV0FWRUlO
X0RFRkFVTFRCVUZMRU4pIC8gKGJ1ZmZlci0+ZnJhZ21lbnRfc2l6ZSAqIDEw
MDApIC0gMTsNCiANCi0JaWYgKGJ1ZmZlci0+bnVtZnJhZ3MgPCBNSU5GUkFH
UykNCi0JCWJ1ZmZlci0+bnVtZnJhZ3MgPSBNSU5GUkFHUzsNCisJaWYgKGJ1
ZmZlci0+bnVtZnJhZ3MgPCBXQVZFSU5fTUlORlJBR1MpDQorCQlidWZmZXIt
Pm51bWZyYWdzID0gV0FWRUlOX01JTkZSQUdTOw0KIA0KLQlpZiAoYnVmZmVy
LT5udW1mcmFncyAqIGJ1ZmZlci0+ZnJhZ21lbnRfc2l6ZSA+IFdBVkVJTl9N
QVhCVUZTSVpFKSB7DQorCWlmIChidWZmZXItPm51bWZyYWdzICogYnVmZmVy
LT5mcmFnbWVudF9zaXplID4gV0FWRUlOX01BWEJVRlNJWkUpDQogCQlidWZm
ZXItPm51bWZyYWdzID0gV0FWRUlOX01BWEJVRlNJWkUgLyBidWZmZXItPmZy
YWdtZW50X3NpemU7DQogDQotCQlpZiAoYnVmZmVyLT5udW1mcmFncyA8IE1J
TkZSQUdTKSB7DQotCQkJYnVmZmVyLT5udW1mcmFncyA9IE1JTkZSQUdTOw0K
LQkJCWJ1ZmZlci0+ZnJhZ21lbnRfc2l6ZSA9IFdBVkVJTl9NQVhCVUZTSVpF
IC8gTUlORlJBR1M7DQotCQl9DQotCX0gZWxzZSBpZiAoYnVmZmVyLT5udW1m
cmFncyAqIGJ1ZmZlci0+ZnJhZ21lbnRfc2l6ZSA8IFdBVkVJTl9NSU5CVUZT
SVpFKQ0KLQkJYnVmZmVyLT5udW1mcmFncyA9IFdBVkVJTl9NSU5CVUZTSVpF
IC8gYnVmZmVyLT5mcmFnbWVudF9zaXplOw0KKwlpZiAoYnVmZmVyLT5udW1m
cmFncyA8IFdBVkVJTl9NSU5GUkFHUykNCisJCUJVRygpOw0KIA0KIAlidWZz
aXplID0gYnVmZmVyLT5mcmFnbWVudF9zaXplICogYnVmZmVyLT5udW1mcmFn
czsNCiANCisJLyogdGhlIGJ1ZmZlciBzaXplIGZvciByZWNvcmRpbmcgaXMg
cmVzdHJpY3RlZCB0byBjZXJ0YWluIHZhbHVlcywgYWRqdXN0IGl0IG5vdyAq
Lw0KIAlpZiAoYnVmc2l6ZSA+PSAweDEwMDAwKSB7DQogCQlidWZmZXItPnNp
emUgPSAweDEwMDAwOw0KIAkJYnVmZmVyLT5zaXplcmVndmFsID0gMHgxZjsN
CkBAIC0xNDY4LDEwICsxNDc1LDEyIEBADQogCQl9DQogCX0NCiANCisJLyog
YWRqdXN0IHRoZSBmcmFnbWVudCBzaXplIHNvIHRoYXQgYnVmZmVyIHNpemUg
aXMgYW4gaW50ZWdlciBtdWx0aXBsZSAqLw0KKwl3aGlsZSAoYnVmZmVyLT5z
aXplICUgYnVmZmVyLT5mcmFnbWVudF9zaXplKQ0KKwkJYnVmZmVyLT5mcmFn
bWVudF9zaXplID4+PSAxOw0KKw0KIAlidWZmZXItPm51bWZyYWdzID0gYnVm
ZmVyLT5zaXplIC8gYnVmZmVyLT5mcmFnbWVudF9zaXplOw0KIAlidWZmZXIt
PnBhZ2VzID0gIGJ1ZmZlci0+c2l6ZSAvIFBBR0VfU0laRSArICgoYnVmZmVy
LT5zaXplICUgUEFHRV9TSVpFKSA/IDEgOiAwKTsNCi0JaWYgKGJ1ZmZlci0+
c2l6ZSAlIGJ1ZmZlci0+ZnJhZ21lbnRfc2l6ZSkNCi0JCUJVRygpOw0KIA0K
IAlEUEQoMiwgIiBjYWxjdWxhdGVkIHJlY29yZGluZyBmcmFnbWVudF9zaXpl
IC0+ICVkXG4iLCBidWZmZXItPmZyYWdtZW50X3NpemUpOw0KIAlEUEQoMiwg
IiBjYWxjdWxhdGVkIHJlY29yZGluZyBudW1mcmFncyAtPiAlZFxuIiwgYnVm
ZmVyLT5udW1mcmFncyk7DQpkaWZmIC11ciBsaW51eC0yLjQuMTktcHJlNS5v
cmlnL2RyaXZlcnMvc291bmQvZW11MTBrMS9hdWRpby5oIGxpbnV4LTIuNC4x
OS1wcmU1L2RyaXZlcnMvc291bmQvZW11MTBrMS9hdWRpby5oDQotLS0gbGlu
dXgtMi40LjE5LXByZTUub3JpZy9kcml2ZXJzL3NvdW5kL2VtdTEwazEvYXVk
aW8uaAlTYXQgTWFyICA5IDEyOjI2OjA2IDIwMDINCisrKyBsaW51eC0yLjQu
MTktcHJlNS9kcml2ZXJzL3NvdW5kL2VtdTEwazEvYXVkaW8uaAlUdWUgQXBy
ICAyIDAyOjU4OjA1IDIwMDINCkBAIC0zMyw4ICszMyw2IEBADQogI2lmbmRl
ZiBfQVVESU9fSA0KICNkZWZpbmUgX0FVRElPX0gNCiANCi0jZGVmaW5lIE1J
TkZSQUdTCTMJLyogX2Rvbid0XyBnbyBiZWxsb3cgMyAqLw0KLQ0KIHN0cnVj
dCBlbXUxMGsxX3dhdmVkZXZpY2UNCiB7DQogICAgICAgICBzdHJ1Y3QgZW11
MTBrMV9jYXJkICpjYXJkOw0KZGlmZiAtdXIgbGludXgtMi40LjE5LXByZTUu
b3JpZy9kcml2ZXJzL3NvdW5kL2VtdTEwazEvY2FyZHdpLmggbGludXgtMi40
LjE5LXByZTUvZHJpdmVycy9zb3VuZC9lbXUxMGsxL2NhcmR3aS5oDQotLS0g
bGludXgtMi40LjE5LXByZTUub3JpZy9kcml2ZXJzL3NvdW5kL2VtdTEwazEv
Y2FyZHdpLmgJU2F0IE1hciAgOSAxMjozOTo0MSAyMDAyDQorKysgbGludXgt
Mi40LjE5LXByZTUvZHJpdmVycy9zb3VuZC9lbXUxMGsxL2NhcmR3aS5oCVR1
ZSBBcHIgIDIgMDI6NTg6MDUgMjAwMg0KQEAgLTY5LDEzICs2OSwxNCBAQA0K
IAl1MTYgZnh3YzsNCiB9Ow0KIA0KLSNkZWZpbmUgV0FWRUlOX01BWEJVRlNJ
WkUgICAgICAgICA2NTUzNg0KLSNkZWZpbmUgV0FWRUlOX01JTkJVRlNJWkUJ
ICAzNjgNCisjZGVmaW5lIFdBVkVJTl9NQVhCVUZTSVpFCTY1NTM2DQorI2Rl
ZmluZSBXQVZFSU5fTUlOQlVGU0laRQkzNjgNCiANCi0jZGVmaW5lIFdBVkVJ
Tl9ERUZBVUxURlJBR0xFTiAgICAgMTAwIA0KLSNkZWZpbmUgV0FWRUlOX0RF
RkFVTFRCVUZMRU4gICAgICAxMDAwDQorI2RlZmluZSBXQVZFSU5fREVGQVVM
VEZSQUdMRU4JMTAwIA0KKyNkZWZpbmUgV0FWRUlOX0RFRkFVTFRCVUZMRU4J
MTAwMA0KIA0KLSNkZWZpbmUgV0FWRUlOX01JTkZSQUdTSElGVCAgIAkgIDgg
DQorI2RlZmluZSBXQVZFSU5fTUlORlJBR1NISUZUCTggDQorI2RlZmluZSBX
QVZFSU5fTUlORlJBR1MJCTINCiANCiBpbnQgZW11MTBrMV93YXZlaW5fb3Bl
bihzdHJ1Y3QgZW11MTBrMV93YXZlZGV2aWNlICopOw0KIHZvaWQgZW11MTBr
MV93YXZlaW5fY2xvc2Uoc3RydWN0IGVtdTEwazFfd2F2ZWRldmljZSAqKTsN
CmRpZmYgLXVyIGxpbnV4LTIuNC4xOS1wcmU1Lm9yaWcvZHJpdmVycy9zb3Vu
ZC9lbXUxMGsxL2NhcmR3by5oIGxpbnV4LTIuNC4xOS1wcmU1L2RyaXZlcnMv
c291bmQvZW11MTBrMS9jYXJkd28uaA0KLS0tIGxpbnV4LTIuNC4xOS1wcmU1
Lm9yaWcvZHJpdmVycy9zb3VuZC9lbXUxMGsxL2NhcmR3by5oCVNhdCBNYXIg
IDkgMTI6Mzk6NDEgMjAwMg0KKysrIGxpbnV4LTIuNC4xOS1wcmU1L2RyaXZl
cnMvc291bmQvZW11MTBrMS9jYXJkd28uaAlUdWUgQXByICAyIDAyOjU4OjA1
IDIwMDINCkBAIC0zOSwxMyArMzksMTMgQEANCiANCiAvKiBzZXR0aW5nIHRo
aXMgdG8gb3RoZXIgdGhhbiBhIHBvd2VyIG9mIHR3byBtYXkgYnJlYWsgc29t
ZSBhcHBsaWNhdGlvbnMgKi8NCiAjZGVmaW5lIFdBVkVPVVRfTUFYQlVGU0la
RQlNQVhCVUZTSVpFDQotI2RlZmluZSBXQVZFT1VUX01JTkJVRlNJWkUJNjQN
CiANCiAjZGVmaW5lIFdBVkVPVVRfREVGQVVMVEZSQUdMRU4JMjAgLyogVGlt
ZSB0byBwbGF5IGEgZnJhZ21lbnQgaW4gbXMgKGxhdGVuY3kpICovDQogI2Rl
ZmluZSBXQVZFT1VUX0RFRkFVTFRCVUZMRU4JNTAwIC8qIFRpbWUgdG8gcGxh
eSB0aGUgZW50aXJlIGJ1ZmZlciBpbiBtcyAqLw0KIA0KLSNkZWZpbmUgV0FW
RU9VVF9NSU5GUkFHU0hJRlQJNg0KLSNkZWZpbmUgV0FWRU9VVF9NQVhWT0lD
RVMgNg0KKyNkZWZpbmUgV0FWRU9VVF9NSU5GUkFHU0hJRlQJNiAvKiBNaW5p
bXVtIGZyYWdtZW50IHNpemUgaW4gYnl0ZXMgaXMgMl42ICovDQorI2RlZmlu
ZSBXQVZFT1VUX01JTkZSQUdTCTMgLyogX2Rvbid0XyBnbyBiZWxsb3cgMywg
aXQgd291bGQgYnJlYWsgc2lsZW5jZSBmaWxsaW5nICovDQorI2RlZmluZSBX
QVZFT1VUX01BWFZPSUNFUwk2DQogDQogc3RydWN0IHdhdmVvdXRfYnVmZmVy
IHsNCiAJdTE2IG9zc2ZyYWdzaGlmdDsNCmRpZmYgLXVyIGxpbnV4LTIuNC4x
OS1wcmU1Lm9yaWcvZHJpdmVycy9zb3VuZC9lbXUxMGsxL2VmeG1nci5jIGxp
bnV4LTIuNC4xOS1wcmU1L2RyaXZlcnMvc291bmQvZW11MTBrMS9lZnhtZ3Iu
Yw0KLS0tIGxpbnV4LTIuNC4xOS1wcmU1Lm9yaWcvZHJpdmVycy9zb3VuZC9l
bXUxMGsxL2VmeG1nci5jCVNhdCBNYXIgIDkgMTI6MjY6MDYgMjAwMg0KKysr
IGxpbnV4LTIuNC4xOS1wcmU1L2RyaXZlcnMvc291bmQvZW11MTBrMS9lZnht
Z3IuYwlUdWUgQXByICAyIDAyOjU4OjA1IDIwMDINCkBAIC0xMDMsNyArMTAz
LDcgQEANCiANCiAJY2FyZC0+YWM5Ny5taXhlcl9zdGF0ZVtvc3NfbWl4ZXJd
ID0gKHJpZ2h0IDw8IDgpIHwgbGVmdDsNCiANCi0JaWYgKCFjYXJkLT5pc2Fw
cykNCisJaWYgKCFjYXJkLT5pc19hcHMpDQogCQljYXJkLT5hYzk3LndyaXRl
X21peGVyKCZjYXJkLT5hYzk3LCBvc3NfbWl4ZXIsIGxlZnQsIHJpZ2h0KTsN
CiAJDQogCWVtdTEwazFfc2V0X3ZvbHVtZV9ncHIoY2FyZCwgY2FyZC0+bWdy
LmN0cmxfZ3ByW29zc19taXhlcl1bMF0sIGxlZnQsDQpkaWZmIC11ciBsaW51
eC0yLjQuMTktcHJlNS5vcmlnL2RyaXZlcnMvc291bmQvZW11MTBrMS9od2Fj
Y2Vzcy5oIGxpbnV4LTIuNC4xOS1wcmU1L2RyaXZlcnMvc291bmQvZW11MTBr
MS9od2FjY2Vzcy5oDQotLS0gbGludXgtMi40LjE5LXByZTUub3JpZy9kcml2
ZXJzL3NvdW5kL2VtdTEwazEvaHdhY2Nlc3MuaAlTYXQgTWFyICA5IDEyOjM5
OjQxIDIwMDINCisrKyBsaW51eC0yLjQuMTktcHJlNS9kcml2ZXJzL3NvdW5k
L2VtdTEwazEvaHdhY2Nlc3MuaAlUdWUgQXByICAyIDAyOjU4OjA1IDIwMDIN
CkBAIC0xODIsNyArMTgyLDcgQEANCiANCiAJdTggY2hpcHJldjsgICAgICAg
ICAgICAgICAgICAgIC8qIENoaXAgcmV2aXNpb24gICAgICAgICAgICAgICAg
Ki8NCiANCi0JaW50IGlzYXBzOw0KKwl1OCBpc19hcHM7DQogDQogCXN0cnVj
dCBwYXRjaF9tYW5hZ2VyIG1ncjsNCiAJc3RydWN0IHB0X2RhdGEgcHQ7DQpk
aWZmIC11ciBsaW51eC0yLjQuMTktcHJlNS5vcmlnL2RyaXZlcnMvc291bmQv
ZW11MTBrMS9tYWluLmMgbGludXgtMi40LjE5LXByZTUvZHJpdmVycy9zb3Vu
ZC9lbXUxMGsxL21haW4uYw0KLS0tIGxpbnV4LTIuNC4xOS1wcmU1Lm9yaWcv
ZHJpdmVycy9zb3VuZC9lbXUxMGsxL21haW4uYwlTYXQgTWFyICA5IDEyOjI2
OjA2IDIwMDINCisrKyBsaW51eC0yLjQuMTktcHJlNS9kcml2ZXJzL3NvdW5k
L2VtdTEwazEvbWFpbi5jCVR1ZSBBcHIgIDIgMDI6NTg6MDUgMjAwMg0KQEAg
LTE5Niw3ICsxOTYsNyBAQA0KIA0KIAkvKiBBc3NpZ24gZGVmYXVsdCByZWNv
cmRpbmcgcGFyYW1ldGVycyAqLw0KIAkvKiBGSVhNRSAqLw0KLQlpZihjYXJk
LT5pc2FwcykNCisJaWYgKGNhcmQtPmlzX2FwcykNCiAJCWNhcmQtPndhdmVp
bi5yZWNzcmMgPSBXQVZFUkVDT1JEX0ZYOw0KIAllbHNlDQogCQljYXJkLT53
YXZlaW4ucmVjc3JjID0gV0FWRVJFQ09SRF9BQzk3Ow0KQEAgLTIyOSw3ICsy
MjksNyBAQA0KIA0KIAljYXJkLT5hYzk3LnByaXZhdGVfZGF0YSA9IGNhcmQ7
DQogDQotCWlmICghY2FyZC0+aXNhcHMpIHsNCisJaWYgKCFjYXJkLT5pc19h
cHMpIHsNCiAJCWNhcmQtPmFjOTcuaWQgPSAwOw0KIAkJY2FyZC0+YWM5Ny5j
b2RlY19yZWFkID0gZW11MTBrMV9hYzk3X3JlYWQ7DQogICAgICAgICAJY2Fy
ZC0+YWM5Ny5jb2RlY193cml0ZSA9IGVtdTEwazFfYWM5N193cml0ZTsNCkBA
IC0yODcsNyArMjg3LDcgQEANCiB7DQogCWNoYXIgc1szMl07DQogDQotCWlm
ICghY2FyZC0+aXNhcHMpIHsNCisJaWYgKCFjYXJkLT5pc19hcHMpIHsNCiAJ
CXNwcmludGYocywgImRyaXZlci9lbXUxMGsxLyVzL2FjOTciLCBjYXJkLT5w
Y2lfZGV2LT5zbG90X25hbWUpOw0KIAkJcmVtb3ZlX3Byb2NfZW50cnkocywg
TlVMTCk7DQogDQpAQCAtODY3LDE5ICs4NjcsMTkgQEANCiAJfQ0KIA0KIAlm
b3IgKHBhZ2Vjb3VudCA9IDA7IHBhZ2Vjb3VudCA8IE1BWFBBR0VTOyBwYWdl
Y291bnQrKykNCi0JCSgodTMyICopIGNhcmQtPnZpcnR1YWxwYWdldGFibGUu
YWRkcilbcGFnZWNvdW50XSA9IGNwdV90b19sZTMyKChjYXJkLT5zaWxlbnRw
YWdlLmRtYV9oYW5kbGUgKiAyKSB8IHBhZ2Vjb3VudCk7DQorCQkoKHUzMiAq
KSBjYXJkLT52aXJ0dWFscGFnZXRhYmxlLmFkZHIpW3BhZ2Vjb3VudF0gPSBj
cHVfdG9fbGUzMigoKHUzMiljYXJkLT5zaWxlbnRwYWdlLmRtYV9oYW5kbGUg
KiAyKSB8IHBhZ2Vjb3VudCk7DQogDQogCS8qIEluaXQgcGFnZSB0YWJsZSAm
IHRhbmsgbWVtb3J5IGJhc2UgcmVnaXN0ZXIgKi8NCiAJc2JsaXZlX3dyaXRl
cHRyX3RhZyhjYXJkLCAwLA0KLQkJCSAgICBQVEIsIGNhcmQtPnZpcnR1YWxw
YWdldGFibGUuZG1hX2hhbmRsZSwNCisJCQkgICAgUFRCLCAodTMyKWNhcmQt
PnZpcnR1YWxwYWdldGFibGUuZG1hX2hhbmRsZSwNCiAJCQkgICAgVENCLCAw
LA0KIAkJCSAgICBUQ0JTLCAwLA0KIAkJCSAgICBUQUdMSVNUX0VORCk7DQog
DQogCWZvciAobkNoID0gMDsgbkNoIDwgTlVNX0c7IG5DaCsrKSB7DQogCQlz
YmxpdmVfd3JpdGVwdHJfdGFnKGNhcmQsIG5DaCwNCi0JCQkJICAgIE1BUEEs
IE1BUF9QVElfTUFTSyB8IChjYXJkLT5zaWxlbnRwYWdlLmRtYV9oYW5kbGUg
KiAyKSwNCi0JCQkJICAgIE1BUEIsIE1BUF9QVElfTUFTSyB8IChjYXJkLT5z
aWxlbnRwYWdlLmRtYV9oYW5kbGUgKiAyKSwNCisJCQkJICAgIE1BUEEsIE1B
UF9QVElfTUFTSyB8KCAodTMyKWNhcmQtPnNpbGVudHBhZ2UuZG1hX2hhbmRs
ZSAqIDIpLA0KKwkJCQkgICAgTUFQQiwgTUFQX1BUSV9NQVNLIHwoICh1MzIp
Y2FyZC0+c2lsZW50cGFnZS5kbWFfaGFuZGxlICogMiksDQogCQkJCSAgICBU
QUdMSVNUX0VORCk7DQogCX0NCiANCkBAIC0xMDU5LDcgKzEwNTksNyBAQA0K
IAkJY2FyZC0+aW9iYXNlICsgY2FyZC0+bGVuZ3RoIC0gMSwgY2FyZC0+aXJx
KTsNCiANCiAJcGNpX3JlYWRfY29uZmlnX2R3b3JkKHBjaV9kZXYsIFBDSV9T
VUJTWVNURU1fVkVORE9SX0lELCAmc3Vic3lzdmlkKTsNCi0JY2FyZC0+aXNh
cHMgPSAoc3Vic3lzdmlkID09IEVNVV9BUFNfU1VCSUQpOw0KKwljYXJkLT5p
c19hcHMgPSAoc3Vic3lzdmlkID09IEVNVV9BUFNfU1VCSUQpOw0KIA0KIAlz
cGluX2xvY2tfaW5pdCgmY2FyZC0+bG9jayk7DQogCWluaXRfTVVURVgoJmNh
cmQtPm9wZW5fc2VtKTsNCkBAIC0xMDkwLDcgKzEwOTAsNyBAQA0KIAkJZ290
byBlcnJfZW11MTBrMV9pbml0Ow0KIAl9DQogDQotCWlmIChjYXJkLT5pc2Fw
cykNCisJaWYgKGNhcmQtPmlzX2FwcykNCiAJCWVtdTEwazFfZWNhcmRfaW5p
dChjYXJkKTsNCiANCiAJbGlzdF9hZGQoJmNhcmQtPmxpc3QsICZlbXUxMGsx
X2RldnMpOw0KQEAgLTExMzUsNyArMTEzNSw3IEBADQogCXBjaV9zZXRfZHJ2
ZGF0YShwY2lfZGV2LCBOVUxMKTsNCiB9DQogDQotTU9EVUxFX0FVVEhPUigi
QmVydHJhbmQgTGVlLCBDYWkgWWluZy4gKEVtYWlsIHRvOiBlbXUxMGsxLWRl
dmVsQG9wZW5zb3VyY2UuY3JlYXRpdmUuY29tKSIpOw0KK01PRFVMRV9BVVRI
T1IoIkJlcnRyYW5kIExlZSwgQ2FpIFlpbmcuIChFbWFpbCB0bzogZW11MTBr
MS1kZXZlbEBsaXN0cy5zb3VyY2Vmb3JnZS5uZXQpIik7DQogTU9EVUxFX0RF
U0NSSVBUSU9OKCJDcmVhdGl2ZSBFTVUxMEsxIFBDSSBBdWRpbyBEcml2ZXIg
diIgRFJJVkVSX1ZFUlNJT04gIlxuQ29weXJpZ2h0IChDKSAxOTk5IENyZWF0
aXZlIFRlY2hub2xvZ3kgTHRkLiIpOw0KIE1PRFVMRV9MSUNFTlNFKCJHUEwi
KTsNCiANCmRpZmYgLXVyIGxpbnV4LTIuNC4xOS1wcmU1Lm9yaWcvZHJpdmVy
cy9zb3VuZC9lbXUxMGsxL21peGVyLmMgbGludXgtMi40LjE5LXByZTUvZHJp
dmVycy9zb3VuZC9lbXUxMGsxL21peGVyLmMNCi0tLSBsaW51eC0yLjQuMTkt
cHJlNS5vcmlnL2RyaXZlcnMvc291bmQvZW11MTBrMS9taXhlci5jCVNhdCBN
YXIgIDkgMTI6MjY6MDYgMjAwMg0KKysrIGxpbnV4LTIuNC4xOS1wcmU1L2Ry
aXZlcnMvc291bmQvZW11MTBrMS9taXhlci5jCVR1ZSBBcHIgIDIgMDI6NTg6
MDUgMjAwMg0KQEAgLTI1MSw3ICsyNTEsNyBAQA0KIAkJY2FzZSBDTURfU0VU
UkVDU1JDOg0KIAkJCXN3aXRjaCAoY3RsLT52YWxbMF0pIHsNCiAJCQljYXNl
IFdBVkVSRUNPUkRfQUM5NzoNCi0JCQkJaWYgKGNhcmQtPmlzYXBzKSB7DQor
CQkJCWlmIChjYXJkLT5pc19hcHMpIHsNCiAJCQkJCXJldCA9IC1FSU5WQUw7
DQogCQkJCQlicmVhazsNCiAJCQkJfQ0KQEAgLTQ1NSw3ICs0NTUsNyBAQA0K
IA0KIAkJCWNhcmQtPm1nci5jdHJsX2dwcltpZF1bY2hdID0gYWRkcjsNCiAN
Ci0JCQlpZiAoY2FyZC0+aXNhcHMpDQorCQkJaWYgKGNhcmQtPmlzX2FwcykN
CiAJCQkJYnJlYWs7DQogDQogCQkJaWYgKGFkZHIgPj0gMCkgew0KQEAgLTU1
OCw3ICs1NTgsNyBAQA0KIA0KIAkJCQljYXJkLT50YW5rbWVtLnNpemUgPSBz
aXplOw0KIA0KLQkJCQlzYmxpdmVfd3JpdGVwdHJfdGFnKGNhcmQsIDAsIFRD
QiwgY2FyZC0+dGFua21lbS5kbWFfaGFuZGxlLCBUQ0JTLCBzaXplX3JlZywg
VEFHTElTVF9FTkQpOw0KKwkJCQlzYmxpdmVfd3JpdGVwdHJfdGFnKGNhcmQs
IDAsIFRDQiwodTMyKSBjYXJkLT50YW5rbWVtLmRtYV9oYW5kbGUsIFRDQlMs
IHNpemVfcmVnLCBUQUdMSVNUX0VORCk7DQogDQogCQkJCWVtdTEwazFfd3Jp
dGVmbjAoY2FyZCwgSENGR19MT0NLVEFOS0NBQ0hFLCAwKTsNCiAJCQl9DQpA
QCAtNjIxLDcgKzYyMSw3IEBADQogCXVuc2lnbmVkIGludCBvc3NfbWl4ZXIg
PSBfSU9DX05SKGNtZCk7DQogCQ0KIAlyZXQgPSAtRUlOVkFMOw0KLQlpZiAo
IWNhcmQtPmlzYXBzKSB7DQorCWlmICghY2FyZC0+aXNfYXBzKSB7DQogCQlp
ZiAoY21kID09IFNPVU5EX01JWEVSX0lORk8pIHsNCiAJCQltaXhlcl9pbmZv
IGluZm87DQogDQpkaWZmIC11ciBsaW51eC0yLjQuMTktcHJlNS5vcmlnL2Ry
aXZlcnMvc291bmQvZW11MTBrMS9yZWNtZ3IuYyBsaW51eC0yLjQuMTktcHJl
NS9kcml2ZXJzL3NvdW5kL2VtdTEwazEvcmVjbWdyLmMNCi0tLSBsaW51eC0y
LjQuMTktcHJlNS5vcmlnL2RyaXZlcnMvc291bmQvZW11MTBrMS9yZWNtZ3Iu
YwlTYXQgTWFyICA5IDEyOjI2OjA2IDIwMDINCisrKyBsaW51eC0yLjQuMTkt
cHJlNS9kcml2ZXJzL3NvdW5kL2VtdTEwazEvcmVjbWdyLmMJVHVlIEFwciAg
MiAwMjo1ODowNSAyMDAyDQpAQCAtMTMyLDcgKzEzMiw3IEBADQogDQogCURQ
RCgyLCAiYnVzIGFkZHg6ICUjbHhcbiIsICh1bnNpZ25lZCBsb25nKSBidWZm
ZXItPmRtYV9oYW5kbGUpOw0KIA0KLQlzYmxpdmVfd3JpdGVwdHIoY2FyZCwg
YnVmZmVyLT5hZGRycmVnLCAwLCBidWZmZXItPmRtYV9oYW5kbGUpOw0KKwlz
YmxpdmVfd3JpdGVwdHIoY2FyZCwgYnVmZmVyLT5hZGRycmVnLCAwLCAodTMy
KWJ1ZmZlci0+ZG1hX2hhbmRsZSk7DQogDQogCXJldHVybjsNCiB9DQpkaWZm
IC11ciBsaW51eC0yLjQuMTktcHJlNS5vcmlnL2RyaXZlcnMvc291bmQvZW11
MTBrMS92b2ljZW1nci5jIGxpbnV4LTIuNC4xOS1wcmU1L2RyaXZlcnMvc291
bmQvZW11MTBrMS92b2ljZW1nci5jDQotLS0gbGludXgtMi40LjE5LXByZTUu
b3JpZy9kcml2ZXJzL3NvdW5kL2VtdTEwazEvdm9pY2VtZ3IuYwlTYXQgTWFy
ICA5IDEyOjI2OjA2IDIwMDINCisrKyBsaW51eC0yLjQuMTktcHJlNS9kcml2
ZXJzL3NvdW5kL2VtdTEwazEvdm9pY2VtZ3IuYwlUdWUgQXByICAyIDAyOjU4
OjA1IDIwMDINCkBAIC02Niw3ICs2Niw3IEBADQogCQlEUEQoMiwgIlZpcnR1
YWwgQWRkeDogJXBcbiIsIG1lbS0+YWRkcltwYWdlY291bnRdKTsNCiANCiAJ
CWZvciAoaSA9IDA7IGkgPCBQQUdFX1NJWkUgLyBFTVVQQUdFU0laRTsgaSsr
KSB7DQotCQkJYnVzYWRkeCA9IG1lbS0+ZG1hX2hhbmRsZVtwYWdlY291bnRd
ICsgaSAqIEVNVVBBR0VTSVpFOw0KKwkJCWJ1c2FkZHggPSAodTMyKShtZW0t
PmRtYV9oYW5kbGVbcGFnZWNvdW50XSkgKyBpICogRU1VUEFHRVNJWkU7DQog
DQogCQkJRFBEKDMsICJCdXMgQWRkeDogJSNseFxuIiwgYnVzYWRkeCk7DQog
DQpAQCAtMTAyLDcgKzEwMiw3IEBADQogCQlmb3IgKGkgPSAwOyBpIDwgUEFH
RV9TSVpFIC8gRU1VUEFHRVNJWkU7IGkrKykgew0KIAkJCXBhZ2VpbmRleCA9
IG1lbS0+ZW11cGFnZWluZGV4ICsgcGFnZWNvdW50ICogUEFHRV9TSVpFIC8g
RU1VUEFHRVNJWkUgKyBpOw0KIAkJCSgodTMyICopIGNhcmQtPnZpcnR1YWxw
YWdldGFibGUuYWRkcilbcGFnZWluZGV4XSA9DQotCQkJCWNwdV90b19sZTMy
KChjYXJkLT5zaWxlbnRwYWdlLmRtYV9oYW5kbGUgKiAyKSB8IHBhZ2VpbmRl
eCk7DQorCQkJCWNwdV90b19sZTMyKCgodTMyKWNhcmQtPnNpbGVudHBhZ2Uu
ZG1hX2hhbmRsZSAqIDIpIHwgcGFnZWluZGV4KTsNCiAJCX0NCiAJfQ0KIA0K
QEAgLTIzMSw4ICsyMzEsOCBAQA0KIAkJCQkgICAgWjEsIDAsDQogCQkJCSAg
ICBaMiwgMCwNCiAJCQkJICAgIC8qIEludmFsaWRhdGUgbWFwcyAqLw0KLQkJ
CQkgICAgTUFQQSwgTUFQX1BUSV9NQVNLIHwgKGNhcmQtPnNpbGVudHBhZ2Uu
ZG1hX2hhbmRsZSAqIDIpLA0KLQkJCQkgICAgTUFQQiwgTUFQX1BUSV9NQVNL
IHwgKGNhcmQtPnNpbGVudHBhZ2UuZG1hX2hhbmRsZSAqIDIpLA0KKwkJCQkg
ICAgTUFQQSwgTUFQX1BUSV9NQVNLIHwgKCh1MzIpY2FyZC0+c2lsZW50cGFn
ZS5kbWFfaGFuZGxlICogMiksDQorCQkJCSAgICBNQVBCLCBNQVBfUFRJX01B
U0sgfCAoKHUzMiljYXJkLT5zaWxlbnRwYWdlLmRtYV9oYW5kbGUgKiAyKSwN
CiAJCQkJLyogbW9kdWxhdGlvbiBlbnZlbG9wZSAqLw0KIAkJCQkgICAgQ1ZD
RiwgMHgwMDAwZmZmZiwNCiAJCQkJICAgIFZURlQsIDB4MDAwMGZmZmYsDQo=
--8323328-1507591576-1017710099=:1503--
