Return-Path: <linux-kernel-owner+willy=40w.ods.org-S261771AbVFURRz@vger.kernel.org>
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S261771AbVFURRz (ORCPT <rfc822;willy@w.ods.org>);
	Tue, 21 Jun 2005 13:17:55 -0400
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S262223AbVFURRy
	(ORCPT <rfc822;linux-kernel-outgoing>);
	Tue, 21 Jun 2005 13:17:54 -0400
Received: from cantor2.suse.de ([195.135.220.15]:44698 "EHLO mx2.suse.de")
	by vger.kernel.org with ESMTP id S261771AbVFURQt (ORCPT
	<rfc822;linux-kernel@vger.kernel.org>);
	Tue, 21 Jun 2005 13:16:49 -0400
Date: Tue, 21 Jun 2005 19:16:48 +0200
Message-ID: <s5hekavocjj.wl%tiwai@suse.de>
From: Takashi Iwai <tiwai@suse.de>
To: Brice Goglin <Brice.Goglin@ens-lyon.org>
Cc: Andrew Morton <akpm@osdl.org>, Linux Kernel <linux-kernel@vger.kernel.org>
Subject: Re: 2.6.12-mm1
In-Reply-To: <42B84820.9010105@ens-lyon.org>
References: <20050619233029.45dd66b8.akpm@osdl.org>
	<42B6777F.2050008@ens-lyon.org>
	<42B80AB5.7090506@ens-lyon.org>
	<s5hll53oet1.wl%tiwai@suse.de>
	<42B84820.9010105@ens-lyon.org>
User-Agent: Wanderlust/2.12.0 (Your Wildest Dreams) SEMI/1.14.6 (Maruoka)
 FLIM/1.14.7 (=?ISO-8859-4?Q?Sanj=F2?=) APEL/10.6 MULE XEmacs/21.5 (beta18)
 (chestnut) (+CVS-20041021) (i386-suse-linux)
MIME-Version: 1.0 (generated by SEMI 1.14.6 - "Maruoka")
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 8bit
Sender: linux-kernel-owner@vger.kernel.org
X-Mailing-List: linux-kernel@vger.kernel.org

At Tue, 21 Jun 2005 19:02:24 +0200,
Brice Goglin wrote:
> 
> Le 21.06.2005 18:27, Takashi Iwai a écrit :
> > Well, this disables the h/w volume controls completely, so it's not a
> > generic solution.
> 
> Well, I though this wouldn't break anything since HW_INT_ENABLE is not
> set there is 2.6.12. Is this a new feature ?

Yes.  It enables hardware volume contorl - volume up/down and
mute/unmute via keys on your laptop.

> How is this supposed to work ? Does HW_INT_ENABLE in this outw require
> some other parts of the git-alsa.patch ?

Yes, the whole tasklet and m3_hv_quirk stuff.

> > Does the patch below have any improvement?
> 
> No, same error.
> 
> Your second patch gives same error too, but it also made my beeper
> generate a very sharp sound during the whole boot.

Could you give the output of lspci -nv?  If it's listed in
m3_hw_quirk_list, the h/w volume control is enabled in the code
indeed.  Try to comment out the entry (together with my second
patch).

> Actually, I can't test after boot since -mm1 crashes a little bit
> later on my laptop. That's why I didn't notice any eventual h/w
> volume control breakage with my patch :)
> If necessary, I can try with git-alsa.patch applied on top of 2.6.12.

This might include some changes applied to mm, but at least, you can
apply only the patch to maestro3.c.


Takashi
