Return-Path: <linux-kernel-owner+willy=40w.ods.org-S261853AbVC3MZI@vger.kernel.org>
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S261853AbVC3MZI (ORCPT <rfc822;willy@w.ods.org>);
	Wed, 30 Mar 2005 07:25:08 -0500
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S261852AbVC3MZI
	(ORCPT <rfc822;linux-kernel-outgoing>);
	Wed, 30 Mar 2005 07:25:08 -0500
Received: from mx2.suse.de ([195.135.220.15]:53125 "EHLO mx2.suse.de")
	by vger.kernel.org with ESMTP id S261853AbVC3MYd (ORCPT
	<rfc822;linux-kernel@vger.kernel.org>);
	Wed, 30 Mar 2005 07:24:33 -0500
Date: Wed, 30 Mar 2005 14:24:32 +0200
Message-ID: <s5hekdxgw3j.wl@alsa2.suse.de>
From: Takashi Iwai <tiwai@suse.de>
To: Jean Delvare <khali@linux-fr.org>
Cc: Lee Revell <rlrevell@joe-job.com>,
       James Courtier-Dutton <James@superbug.co.uk>,
       Andrew Morton <akpm@osdl.org>, linux-kernel@vger.kernel.org,
       alsa-devel@alsa-project.org, Jaroslav Kysela <perex@suse.cz>
Subject: Re: [Alsa-devel] Re: 2.6.12-rc1-mm3, sound card lost id
In-Reply-To: <20050329231345.281e7323.khali@linux-fr.org>
References: <20050325002154.335c6b0b.akpm@osdl.org>
	<20050326111945.5eb58343.khali@linux-fr.org>
	<s5hr7hyiqra.wl@alsa2.suse.de>
	<20050329195721.385717aa.khali@linux-fr.org>
	<1112127424.5141.7.camel@mindpipe>
	<20050329224630.069cda56.khali@linux-fr.org>
	<1112129571.5141.18.camel@mindpipe>
	<20050329231345.281e7323.khali@linux-fr.org>
User-Agent: Wanderlust/2.10.1 (Watching The Wheels) SEMI/1.14.5 (Awara-Onsen) FLIM/1.14.5 (Demachiyanagi) APEL/10.6 MULE XEmacs/21.4 (patch 15) (Security Through Obscurity) (i386-suse-linux)
MIME-Version: 1.0 (generated by SEMI 1.14.5 - "Awara-Onsen")
Content-Type: text/plain; charset=US-ASCII
Sender: linux-kernel-owner@vger.kernel.org
X-Mailing-List: linux-kernel@vger.kernel.org

At Tue, 29 Mar 2005 23:13:45 +0200,
Jean Delvare wrote:
> 
> Hi Lee,
> 
> > Here is the patch (against ALSA CVS) in its preferred format.  You
> > will probably have to apply it by hand.  If the mixer settings can't
> > be restored you'll have to do it manually or edit asound.state by
> > hand.
> > 
> > Lee
> > 
> > Index: alsa/alsa-kernel/pci/emu10k1/emu10k1_main.c
> > ===================================================================
> > RCS file: /cvsroot/alsa/alsa-kernel/pci/emu10k1/emu10k1_main.c,v
> > retrieving revision 1.49
> > diff -u -r1.49 emu10k1_main.c
> > --- alsa/alsa-kernel/pci/emu10k1/emu10k1_main.c	27 Mar 2005 14:00:54 -0000	1.49
> > +++ alsa/alsa-kernel/pci/emu10k1/emu10k1_main.c	29 Mar 2005 20:51:44 -0000
> > @@ -693,6 +693,10 @@
> >  	 .driver = "EMU10K1", .name = "SBLive! Platinum [CT4760P]", 
> >  	 .emu10k1_chip = 1,
> >  	 .ac97_chip = 1} ,
> > +	{.vendor = 0x1102, .device = 0x0002, .subsystem = 0x80271102,
> > +	 .driver = "EMU10K1", .name = "SBLive! Value [CT4832]", 
> > +	 .emu10k1_chip = 1,
> > +	 .ac97_chip = 1} ,
> >  	{.vendor = 0x1102, .device = 0x0002,
> >  	 .driver = "EMU10K1", .name = "SB Live [Unknown]", 
> >  	 .emu10k1_chip = 1,
> 
> Unsurprisingly, my card is now named CT4832. I had to edit
> /etc/asound.state manually to get my mixer settings back (with some
> warnings, but I get some sound).
> 
> Not sure I quite see the idea of renaming from "Live", which the user
> will understand, to (I suppose) the exact chip name on the card, while
> the user has certainly no idea what it is. But heh I'm not an ALSA
> developer, there must be a good reason.

Changing the name to more descriptive one is a good thing, IMO.
But, of course, it's a regression if the system gets (somehow) broken
after the update.

We can add a hack to set id explicitly to be compatible with older
version...


Takashi
