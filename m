Return-Path: <linux-kernel-owner+willy=40w.ods.org-S261531AbULFOWW@vger.kernel.org>
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S261531AbULFOWW (ORCPT <rfc822;willy@w.ods.org>);
	Mon, 6 Dec 2004 09:22:22 -0500
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S261532AbULFOWW
	(ORCPT <rfc822;linux-kernel-outgoing>);
	Mon, 6 Dec 2004 09:22:22 -0500
Received: from cantor.suse.de ([195.135.220.2]:50836 "EHLO Cantor.suse.de")
	by vger.kernel.org with ESMTP id S261531AbULFOWK (ORCPT
	<rfc822;linux-kernel@vger.kernel.org>);
	Mon, 6 Dec 2004 09:22:10 -0500
Date: Mon, 06 Dec 2004 15:22:03 +0100
Message-ID: <s5hsm6j1p84.wl@alsa2.suse.de>
From: Takashi Iwai <tiwai@suse.de>
To: Andrew Morton <akpm@osdl.org>
Cc: Martin Josefsson <gandalf@wlug.westbo.se>, torvalds@osdl.org,
       linux-kernel@vger.kernel.org, Joshua Kwan <joshk@triplehelix.org>,
       alsa-devel@lists.sourceforge.net
Subject: Re: [PATCH] Fix ALSA resume
In-Reply-To: <20041204172855.350100d0.akpm@osdl.org>
References: <1102195391.1560.65.camel@tux.rsn.bth.se>
	<20041204172855.350100d0.akpm@osdl.org>
User-Agent: Wanderlust/2.10.1 (Watching The Wheels) SEMI/1.14.5 (Awara-Onsen) FLIM/1.14.5 (Demachiyanagi) APEL/10.6 MULE XEmacs/21.4 (patch 15) (Security Through Obscurity) (i386-suse-linux)
MIME-Version: 1.0 (generated by SEMI 1.14.5 - "Awara-Onsen")
Content-Type: text/plain; charset=US-ASCII
Sender: linux-kernel-owner@vger.kernel.org
X-Mailing-List: linux-kernel@vger.kernel.org

At Sat, 4 Dec 2004 17:28:55 -0800,
Andrew Morton wrote:
> 
> But Joshua crosses his heart and swears that the pci_disable_device() is
> also needed for a successful swsusp resume.

Yes.  This would make suspend safer.

The linux-sound bk tree already includes the fix above and the patches
to add pci_disable_device() in appropriate places. 
Andrew, could you update bk-alsa patch set?


> Should snd_card_pci_suspend() be doing the pci_disable_device() as well, or
> it that a responsibility of the driver which called snd_card_pci_suspend()?

So far, we suppose that the lowlevel suspend() callback should call
pci_disable_device() although we can move it to the common place,
snd_card_pci_suspend().


Takashi
