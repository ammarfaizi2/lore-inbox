Return-Path: <linux-kernel-owner+willy=40w.ods.org-S261250AbVCHDmO@vger.kernel.org>
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S261250AbVCHDmO (ORCPT <rfc822;willy@w.ods.org>);
	Mon, 7 Mar 2005 22:42:14 -0500
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S261830AbVCHDjF
	(ORCPT <rfc822;linux-kernel-outgoing>);
	Mon, 7 Mar 2005 22:39:05 -0500
Received: from news.suse.de ([195.135.220.2]:25302 "EHLO Cantor.suse.de")
	by vger.kernel.org with ESMTP id S261250AbVCGUVt (ORCPT
	<rfc822;linux-kernel@vger.kernel.org>);
	Mon, 7 Mar 2005 15:21:49 -0500
Date: Mon, 07 Mar 2005 21:21:47 +0100
Message-ID: <s5hekerurz8.wl@alsa2.suse.de>
From: Takashi Iwai <tiwai@suse.de>
To: Pierre Ossman <drzeus-list@drzeus.cx>
Cc: Andrew Morton <akpm@osdl.org>, Mark Canter <marcus@vfxcomputing.com>,
       rlrevell@joe-job.com, nish.aravamudan@gmail.com,
       linux-kernel@vger.kernel.org, alsa-devel@lists.sourceforge.net
Subject: Re: [Alsa-devel] Re: intel 8x0 went silent in 2.6.11
In-Reply-To: <422CB68A.1050900@drzeus.cx>
References: <4227085C.7060104@drzeus.cx>
	<29495f1d05030309455a990c5b@mail.gmail.com>
	<Pine.LNX.4.62.0503031342270.19015@krusty.vfxcomputing.com>
	<1109875926.2908.26.camel@mindpipe>
	<Pine.LNX.4.62.0503031356150.19015@krusty.vfxcomputing.com>
	<1109876978.2908.31.camel@mindpipe>
	<Pine.LNX.4.62.0503031527550.30702@krusty.vfxcomputing.com>
	<20050303154929.1abd0a62.akpm@osdl.org>
	<4227ADE7.3080100@drzeus.cx>
	<4228D013.8010307@drzeus.cx>
	<s5hmztfwon1.wl@alsa2.suse.de>
	<422CB68A.1050900@drzeus.cx>
User-Agent: Wanderlust/2.10.1 (Watching The Wheels) SEMI/1.14.5 (Awara-Onsen) FLIM/1.14.5 (Demachiyanagi) APEL/10.6 MULE XEmacs/21.4 (patch 15) (Security Through Obscurity) (i386-suse-linux)
MIME-Version: 1.0 (generated by SEMI 1.14.5 - "Awara-Onsen")
Content-Type: text/plain; charset=US-ASCII
Sender: linux-kernel-owner@vger.kernel.org
X-Mailing-List: linux-kernel@vger.kernel.org

At Mon, 07 Mar 2005 21:16:10 +0100,
Pierre Ossman wrote:
> 
> Takashi Iwai wrote:
> 
> >At Fri, 04 Mar 2005 22:16:03 +0100,
> >Pierre Ossman wrote:
> >  
> >
> >>It seems I spoke too soon. The defaults picked by the driver are 
> >>actually fine. It seems to be alsactl store/restore that did something 
> >>strange when coming from an older kernel.
> >>    
> >>
> >
> >My guess is that kmix is the cuplrit.
> >kmix tends to turn on all mixer switches uncoditionally, and
> >saves/restores the mixer config by itself.
> >  
> >
> I use Gnome, not KDE so kmix is not an issue.

OK.  (Then it might be a gnome mixer :)

> >Look at /etc/asound.state whether it contains the value of "Headphone
> >Jack Sense" control true or false.
> >  
> >
> It saves the setting once I've been in 2.6.11. From an earlier kernel
> there is no such entry.

Of course, the earlier version didn't have this.

And did you take a look at the latest content?  What stands on it?
Maybe you once saved a value wrongly corrected by any reason?
 
> >BTW, the default value of this control switch was fixed for ThinkPads
> >on ALSA tree since long time ago, but unfortunately the patch wasn't
> >accepted for 2.6.11...
> >  
> >
> My machine is a hp/compaq, not a thinkpad, so I don't know if it would
> have any effect here.

The fix is not only for ThinkPads but for all machines with AD1981
codec and not known to work with "headphone jack" stuff.


Takashi
