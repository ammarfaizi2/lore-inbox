Return-Path: <linux-kernel-owner+willy=40w.ods.org-S932477AbWBTLP0@vger.kernel.org>
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S932477AbWBTLP0 (ORCPT <rfc822;willy@w.ods.org>);
	Mon, 20 Feb 2006 06:15:26 -0500
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S932490AbWBTLP0
	(ORCPT <rfc822;linux-kernel-outgoing>);
	Mon, 20 Feb 2006 06:15:26 -0500
Received: from mail.suse.de ([195.135.220.2]:37853 "EHLO mx1.suse.de")
	by vger.kernel.org with ESMTP id S932477AbWBTLP0 (ORCPT
	<rfc822;linux-kernel@vger.kernel.org>);
	Mon, 20 Feb 2006 06:15:26 -0500
Date: Mon, 20 Feb 2006 12:15:18 +0100
Message-ID: <s5hzmkm1dtl.wl%tiwai@suse.de>
From: Takashi Iwai <tiwai@suse.de>
To: Pavel Machek <pavel@suse.cz>
Cc: Lee Revell <rlrevell@joe-job.com>, Nishanth Aravamudan <nacc@us.ibm.com>,
       Nick Warne <nick@linicks.net>, Jesper Juhl <jesper.juhl@gmail.com>,
       ghrt@dial.kappa.ro, perex@suse.cz,
       kernel list <linux-kernel@vger.kernel.org>
Subject: Re: No sound from SB live!
In-Reply-To: <20060219222533.GB15608@elf.ucw.cz>
References: <20060218231419.GA3219@elf.ucw.cz>
	<9a8748490602190304w43c32ae6m5b610f2ec9ad46f2@mail.gmail.com>
	<7c3341450602190318o1c60e9b5w@mail.gmail.com>
	<20060219205157.GA5976@us.ibm.com>
	<1140384638.2733.389.camel@mindpipe>
	<20060219214934.GO15311@elf.ucw.cz>
	<1140386075.2733.399.camel@mindpipe>
	<20060219222533.GB15608@elf.ucw.cz>
User-Agent: Wanderlust/2.12.0 (Your Wildest Dreams) SEMI/1.14.6 (Maruoka)
 FLIM/1.14.7 (=?ISO-8859-4?Q?Sanj=F2?=) APEL/10.6 MULE XEmacs/21.5 (beta21)
 (corn) (+CVS-20050720) (i386-suse-linux)
MIME-Version: 1.0 (generated by SEMI 1.14.6 - "Maruoka")
Content-Type: text/plain; charset=US-ASCII
Sender: linux-kernel-owner@vger.kernel.org
X-Mailing-List: linux-kernel@vger.kernel.org

At Sun, 19 Feb 2006 23:25:33 +0100,
Pavel Machek wrote:
> 
> On Ne 19-02-06 16:54:34, Lee Revell wrote:
> > On Sun, 2006-02-19 at 22:49 +0100, Pavel Machek wrote:
> > > Hi!
> > > 
> > > > > I run Ubuntu Breezy, which has:
> > > > > 
> > > > > alsa-utils = 1.0.9a-4ubuntu5 
> > > > 
> > > > The alsa-utils version should not matter, it's alsa-lib that must be
> > > > kept in sync with the ALSA version in the kernel.
> > > 
> > > I tried to play with mpg123 using OSS emulation, so that it does not
> > > have anything to do with ALSA. No luck. Trying aplay:
> > > 
> > > root@hobit:/dev/snd#  aplay
> > > /usr/share/xemacs21/xemacs-packages/etc/sounds/hammer.wav
> > > aplay: main:533: audio open error: No such file or directory
> > > 
> > > while stracing:
> > > 
> > > open("/dev/snd/pcmC0D0p", O_RDWR)       = -1 ENOENT (No such file or
> > > directory)
> > > close(3)                                = 0
> > > write(2, "aplay: main:533: ", 17aplay: main:533: )       = 17
> > > write(2, "audio open error: No such file o"..., 43audio open error: No
> > > such file or directory) = 43
> > > write(2, "\n", 1
> > > 
> > > ... but pcmC0D0p is not described in devices.txt...?
> > 
> > Hmm, that's a udev problem or something.  If you have a static dev the
> > snddevices script that comes with ALSA will create the device files.
> 
> I'm using static /dev... snddevices script indeed fixed that, but it
> still does not work. (Is earphone in green connector enough?)

Likely -EUDEV?

> Ouch and that device should be still listed in devices.txt, no?

The minor numbers can be assigned dyanmically if
CONFIG_SND_DYNAMIC_MINORS is set, so it may be even confusing to list
up there as if static only.


> root@hobit:/dev/snd#  aplay
> /usr/share/xemacs21/xemacs-packages/etc/sounds/hammer.wav
> Playing WAVE
> '/usr/share/xemacs21/xemacs-packages/etc/sounds/hammer.wav' : Unsigned
> 8 bit, Rate 8000 Hz, Mono
> root@hobit:/dev/snd#
> 
> Actually, in a quiet room I think I can hear *something*. Too faint to
> recognize :-(.

If you hear something, it's definitely a mixer configuration problem,
maybe screwed up by some reason.  In such a case, it's easier to
re-initialize from the scratch:

Unload the module first, then remove /etc/asound.state (or whatever
the distro uses) to prevent the automatic "alsactl restore".
Reload the module, then unmute/adjust the volume "PCM" and "Master".
The other volumes should have been initialized to be audible.


Takashi
