Return-Path: <linux-kernel-owner+willy=40w.ods.org@vger.kernel.org>
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S264323AbTLVGTy (ORCPT <rfc822;willy@w.ods.org>);
	Mon, 22 Dec 2003 01:19:54 -0500
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S264321AbTLVGTx
	(ORCPT <rfc822;linux-kernel-outgoing>);
	Mon, 22 Dec 2003 01:19:53 -0500
Received: from zero.voxel.net ([209.123.232.253]:51169 "EHLO zero.voxel.net")
	by vger.kernel.org with ESMTP id S264323AbTLVGTi (ORCPT
	<rfc822;linux-kernel@vger.kernel.org>);
	Mon, 22 Dec 2003 01:19:38 -0500
Subject: [PATCH 3/10] CardServices() removal from pcmcia net drivers
From: Andres Salomon <dilinger@voxel.net>
To: linux-kernel@vger.kernel.org
Cc: dahinds@users.sourceforge.net, akpm@osdl.org
Content-Type: multipart/signed; micalg=pgp-sha1; protocol="application/pgp-signature"; boundary="=-1mmvtHtixsFha6RGoTSY"
Message-Id: <1072072948.27831.21.camel@spiral.internal>
Mime-Version: 1.0
X-Mailer: Ximian Evolution 1.4.5 
Date: Mon, 22 Dec 2003 01:12:24 -0500
Sender: linux-kernel-owner@vger.kernel.org
X-Mailing-List: linux-kernel@vger.kernel.org


--=-1mmvtHtixsFha6RGoTSY
Content-Type: multipart/mixed; boundary="=-VH9sKOcZI5jmB4l1XkO4"


--=-VH9sKOcZI5jmB4l1XkO4
Content-Type: text/plain
Content-Transfer-Encoding: quoted-printable

Part 3 of 10

--=-VH9sKOcZI5jmB4l1XkO4
Content-Disposition: attachment; filename=003-cs_remove.patch
Content-Transfer-Encoding: base64
Content-Type: text/x-patch; name=003-cs_remove.patch; charset=us-ascii

UmV2aXNpb246IGxpbnV4LS1tYWlubGluZS0tMi42LS1wYXRjaC0xMg0KQXJjaGl2ZTogZGlsaW5n
ZXJAdm94ZWwubmV0LS0yMDAzLXNwaXJhbA0KQ3JlYXRvcjogQW5kcmVzIFNhbG9tb24gPGRpbGlu
Z2VyQHZveGVsLm5ldD4NCkRhdGU6IFN1biBEZWMgMjEgMTc6MzA6NTggRVNUIDIwMDMNClN0YW5k
YXJkLWRhdGU6IDIwMDMtMTItMjEgMjI6MzA6NTggR01UDQpNb2RpZmllZC1maWxlczogZHJpdmVy
cy9uZXQvcGNtY2lhL25tY2xhbl9jcy5jDQpOZXctcGF0Y2hlczogZGlsaW5nZXJAdm94ZWwubmV0
LS0yMDAzLXNwaXJhbC9saW51eC0tbWFpbmxpbmUtLTIuNi0tcGF0Y2gtMTINClN1bW1hcnk6IENh
cmRTZXJ2aWNlcygpIHJlbW92YWwsIHB0LiAzLg0KS2V5d29yZHM6IA0KDQpSZW1vdmUgY2FsbHMg
dG8gQ2FyZFNlcnZpY2VzKCksIHBhcnQgMzsgbm1jbGFuX2NzLmMuDQoNCiogYWRkZWQgZmlsZXMN
Cg0KICAgIHthcmNofS9saW51eC9saW51eC0tbWFpbmxpbmUvbGludXgtLW1haW5saW5lLS0yLjYv
ZGlsaW5nZXJAdm94ZWwubmV0LS0yMDAzLXNwaXJhbC9wYXRjaC1sb2cvcGF0Y2gtMTINCg0KKiBt
b2RpZmllZCBmaWxlcw0KDQotLS0gb3JpZy9kcml2ZXJzL25ldC9wY21jaWEvbm1jbGFuX2NzLmMN
CisrKyBtb2QvZHJpdmVycy9uZXQvcGNtY2lhL25tY2xhbl9jcy5jDQpAQCAtNTIwLDcgKzUyMCw3
IEBADQogICAgIGNsaWVudF9yZWcuZXZlbnRfaGFuZGxlciA9ICZubWNsYW5fZXZlbnQ7DQogICAg
IGNsaWVudF9yZWcuVmVyc2lvbiA9IDB4MDIxMDsNCiAgICAgY2xpZW50X3JlZy5ldmVudF9jYWxs
YmFja19hcmdzLmNsaWVudF9kYXRhID0gbGluazsNCi0gICAgcmV0ID0gQ2FyZFNlcnZpY2VzKFJl
Z2lzdGVyQ2xpZW50LCAmbGluay0+aGFuZGxlLCAmY2xpZW50X3JlZyk7DQorICAgIHJldCA9IHBj
bWNpYV9yZWdpc3Rlcl9jbGllbnQoJmxpbmstPmhhbmRsZSwgJmNsaWVudF9yZWcpOw0KICAgICBp
ZiAocmV0ICE9IDApIHsNCiAJY3NfZXJyb3IobGluay0+aGFuZGxlLCBSZWdpc3RlckNsaWVudCwg
cmV0KTsNCiAJbm1jbGFuX2RldGFjaChsaW5rKTsNCkBAIC01NTgsNyArNTU4LDcgQEANCiAgICAg
fQ0KIA0KICAgICBpZiAobGluay0+aGFuZGxlKQ0KLQlDYXJkU2VydmljZXMoRGVyZWdpc3RlckNs
aWVudCwgbGluay0+aGFuZGxlKTsNCisJcGNtY2lhX2RlcmVnaXN0ZXJfY2xpZW50KGxpbmstPmhh
bmRsZSk7DQogDQogICAgIC8qIFVubGluayBkZXZpY2Ugc3RydWN0dXJlLCBmcmVlIGJpdHMgKi8N
CiAgICAgKmxpbmtwID0gbGluay0+bmV4dDsNCkBAIC03MDYsOCArNzA2LDggQEANCiAJZXRoZXJu
ZXQgZGV2aWNlIGF2YWlsYWJsZSB0byB0aGUgc3lzdGVtLg0KIC0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0g
Ki8NCiANCi0jZGVmaW5lIENTX0NIRUNLKGZuLCBhcmdzLi4uKSBcDQotd2hpbGUgKChsYXN0X3Jl
dD1DYXJkU2VydmljZXMobGFzdF9mbj0oZm4pLCBhcmdzKSkhPTApIGdvdG8gY3NfZmFpbGVkDQor
I2RlZmluZSBDU19DSEVDSyhmbiwgcmV0KSBcDQorICBkbyB7IGxhc3RfZm4gPSAoZm4pOyBpZiAo
KGxhc3RfcmV0ID0gKHJldCkpICE9IDApIGdvdG8gY3NfZmFpbGVkOyB9IHdoaWxlICgwKQ0KIA0K
IHN0YXRpYyB2b2lkIG5tY2xhbl9jb25maWcoZGV2X2xpbmtfdCAqbGluaykNCiB7DQpAQCAtNzI3
LDE3ICs3MjcsMTcgQEANCiAgIHR1cGxlLlR1cGxlRGF0YU1heCA9IDY0Ow0KICAgdHVwbGUuVHVw
bGVPZmZzZXQgPSAwOw0KICAgdHVwbGUuRGVzaXJlZFR1cGxlID0gQ0lTVFBMX0NPTkZJRzsNCi0g
IENTX0NIRUNLKEdldEZpcnN0VHVwbGUsIGhhbmRsZSwgJnR1cGxlKTsNCi0gIENTX0NIRUNLKEdl
dFR1cGxlRGF0YSwgaGFuZGxlLCAmdHVwbGUpOw0KLSAgQ1NfQ0hFQ0soUGFyc2VUdXBsZSwgaGFu
ZGxlLCAmdHVwbGUsICZwYXJzZSk7DQorICBDU19DSEVDSyhHZXRGaXJzdFR1cGxlLCBwY21jaWFf
Z2V0X2ZpcnN0X3R1cGxlKGhhbmRsZSwgJnR1cGxlKSk7DQorICBDU19DSEVDSyhHZXRUdXBsZURh
dGEsIHBjbWNpYV9nZXRfdHVwbGVfZGF0YShoYW5kbGUsICZ0dXBsZSkpOw0KKyAgQ1NfQ0hFQ0so
UGFyc2VUdXBsZSwgcGNtY2lhX3BhcnNlX3R1cGxlKGhhbmRsZSwgJnR1cGxlLCAmcGFyc2UpKTsN
CiAgIGxpbmstPmNvbmYuQ29uZmlnQmFzZSA9IHBhcnNlLmNvbmZpZy5iYXNlOw0KIA0KICAgLyog
Q29uZmlndXJlIGNhcmQgKi8NCiAgIGxpbmstPnN0YXRlIHw9IERFVl9DT05GSUc7DQogDQotICBD
U19DSEVDSyhSZXF1ZXN0SU8sIGhhbmRsZSwgJmxpbmstPmlvKTsNCi0gIENTX0NIRUNLKFJlcXVl
c3RJUlEsIGhhbmRsZSwgJmxpbmstPmlycSk7DQotICBDU19DSEVDSyhSZXF1ZXN0Q29uZmlndXJh
dGlvbiwgaGFuZGxlLCAmbGluay0+Y29uZik7DQorICBDU19DSEVDSyhSZXF1ZXN0SU8sIHBjbWNp
YV9yZXF1ZXN0X2lvKGhhbmRsZSwgJmxpbmstPmlvKSk7DQorICBDU19DSEVDSyhSZXF1ZXN0SVJR
LCBwY21jaWFfcmVxdWVzdF9pcnEoaGFuZGxlLCAmbGluay0+aXJxKSk7DQorICBDU19DSEVDSyhS
ZXF1ZXN0Q29uZmlndXJhdGlvbiwgcGNtY2lhX3JlcXVlc3RfY29uZmlndXJhdGlvbihoYW5kbGUs
ICZsaW5rLT5jb25mKSk7DQogICBkZXYtPmlycSA9IGxpbmstPmlycS5Bc3NpZ25lZElSUTsNCiAg
IGRldi0+YmFzZV9hZGRyID0gbGluay0+aW8uQmFzZVBvcnQxOw0KICAgaSA9IHJlZ2lzdGVyX25l
dGRldihkZXYpOw0KQEAgLTc1Myw4ICs3NTMsOCBAQA0KICAgdHVwbGUuVHVwbGVEYXRhID0gYnVm
Ow0KICAgdHVwbGUuVHVwbGVEYXRhTWF4ID0gNjQ7DQogICB0dXBsZS5UdXBsZU9mZnNldCA9IDA7
DQotICBDU19DSEVDSyhHZXRGaXJzdFR1cGxlLCBoYW5kbGUsICZ0dXBsZSk7DQotICBDU19DSEVD
SyhHZXRUdXBsZURhdGEsIGhhbmRsZSwgJnR1cGxlKTsNCisgIENTX0NIRUNLKEdldEZpcnN0VHVw
bGUsIHBjbWNpYV9nZXRfZmlyc3RfdHVwbGUoaGFuZGxlLCAmdHVwbGUpKTsNCisgIENTX0NIRUNL
KEdldFR1cGxlRGF0YSwgcGNtY2lhX2dldF90dXBsZV9kYXRhKGhhbmRsZSwgJnR1cGxlKSk7DQog
ICBtZW1jcHkoZGV2LT5kZXZfYWRkciwgdHVwbGUuVHVwbGVEYXRhLCBFVEhFUl9BRERSX0xFTik7
DQogDQogICAvKiBWZXJpZnkgY29uZmlndXJhdGlvbiBieSByZWFkaW5nIHRoZSBNQUNFIElELiAq
Lw0KQEAgLTgxOSw5ICs4MTksOSBAQA0KICAgICByZXR1cm47DQogICB9DQogDQotICBDYXJkU2Vy
dmljZXMoUmVsZWFzZUNvbmZpZ3VyYXRpb24sIGxpbmstPmhhbmRsZSk7DQotICBDYXJkU2Vydmlj
ZXMoUmVsZWFzZUlPLCBsaW5rLT5oYW5kbGUsICZsaW5rLT5pbyk7DQotICBDYXJkU2VydmljZXMo
UmVsZWFzZUlSUSwgbGluay0+aGFuZGxlLCAmbGluay0+aXJxKTsNCisgIHBjbWNpYV9yZWxlYXNl
X2NvbmZpZ3VyYXRpb24obGluay0+aGFuZGxlKTsNCisgIHBjbWNpYV9yZWxlYXNlX2lvKGxpbmst
PmhhbmRsZSwgJmxpbmstPmlvKTsNCisgIHBjbWNpYV9yZWxlYXNlX2lycShsaW5rLT5oYW5kbGUs
ICZsaW5rLT5pcnEpOw0KIA0KICAgbGluay0+c3RhdGUgJj0gfkRFVl9DT05GSUc7DQogDQpAQCAt
ODYzLDcgKzg2Myw3IEBADQogICAgICAgaWYgKGxpbmstPnN0YXRlICYgREVWX0NPTkZJRykgew0K
IAlpZiAobGluay0+b3BlbikNCiAJICBuZXRpZl9kZXZpY2VfZGV0YWNoKGRldik7DQotCUNhcmRT
ZXJ2aWNlcyhSZWxlYXNlQ29uZmlndXJhdGlvbiwgbGluay0+aGFuZGxlKTsNCisJcGNtY2lhX3Jl
bGVhc2VfY29uZmlndXJhdGlvbihsaW5rLT5oYW5kbGUpOw0KICAgICAgIH0NCiAgICAgICBicmVh
azsNCiAgICAgY2FzZSBDU19FVkVOVF9QTV9SRVNVTUU6DQpAQCAtODcxLDcgKzg3MSw3IEBADQog
ICAgICAgLyogRmFsbCB0aHJvdWdoLi4uICovDQogICAgIGNhc2UgQ1NfRVZFTlRfQ0FSRF9SRVNF
VDoNCiAgICAgICBpZiAobGluay0+c3RhdGUgJiBERVZfQ09ORklHKSB7DQotCUNhcmRTZXJ2aWNl
cyhSZXF1ZXN0Q29uZmlndXJhdGlvbiwgbGluay0+aGFuZGxlLCAmbGluay0+Y29uZik7DQorCXBj
bWNpYV9yZXF1ZXN0X2NvbmZpZ3VyYXRpb24obGluay0+aGFuZGxlLCAmbGluay0+Y29uZik7DQog
CWlmIChsaW5rLT5vcGVuKSB7DQogCSAgbm1jbGFuX3Jlc2V0KGRldik7DQogCSAgbmV0aWZfZGV2
aWNlX2F0dGFjaChkZXYpOw0KQEAgLTkwMyw3ICs5MDMsNyBAQA0KICAgcmVnLkFjdGlvbiA9IENT
X1JFQUQ7DQogICByZWcuT2Zmc2V0ID0gQ0lTUkVHX0NPUjsNCiAgIHJlZy5WYWx1ZSA9IDA7DQot
ICBDYXJkU2VydmljZXMoQWNjZXNzQ29uZmlndXJhdGlvblJlZ2lzdGVyLCBsaW5rLT5oYW5kbGUs
ICZyZWcpOw0KKyAgcGNtY2lhX2FjY2Vzc19jb25maWd1cmF0aW9uX3JlZ2lzdGVyKGxpbmstPmhh
bmRsZSwgJnJlZyk7DQogICBPcmlnQ29yVmFsdWUgPSByZWcuVmFsdWU7DQogDQogICAvKiBSZXNl
dCBYaWxpbnggKi8NCkBAIC05MTIsMTIgKzkxMiwxMiBAQA0KICAgREVCVUcoMSwgIm5tY2xhbl9y
ZXNldDogT3JpZ0NvclZhbHVlPTB4JWxYLCByZXNldHRpbmcuLi5cbiIsDQogCU9yaWdDb3JWYWx1
ZSk7DQogICByZWcuVmFsdWUgPSBDT1JfU09GVF9SRVNFVDsNCi0gIENhcmRTZXJ2aWNlcyhBY2Nl
c3NDb25maWd1cmF0aW9uUmVnaXN0ZXIsIGxpbmstPmhhbmRsZSwgJnJlZyk7DQorICBwY21jaWFf
YWNjZXNzX2NvbmZpZ3VyYXRpb25fcmVnaXN0ZXIobGluay0+aGFuZGxlLCAmcmVnKTsNCiAgIC8q
IE5lZWQgdG8gd2FpdCBmb3IgMjAgbXMgZm9yIFBDTUNJQSB0byBmaW5pc2ggcmVzZXQuICovDQog
DQogICAvKiBSZXN0b3JlIG9yaWdpbmFsIENPUiBjb25maWd1cmF0aW9uIGluZGV4ICovDQogICBy
ZWcuVmFsdWUgPSBDT1JfTEVWRUxfUkVRIHwgKE9yaWdDb3JWYWx1ZSAmIENPUl9DT05GSUdfTUFT
Syk7DQotICBDYXJkU2VydmljZXMoQWNjZXNzQ29uZmlndXJhdGlvblJlZ2lzdGVyLCBsaW5rLT5o
YW5kbGUsICZyZWcpOw0KKyAgcGNtY2lhX2FjY2Vzc19jb25maWd1cmF0aW9uX3JlZ2lzdGVyKGxp
bmstPmhhbmRsZSwgJnJlZyk7DQogICAvKiBYaWxpbnggaXMgbm93IGNvbXBsZXRlbHkgcmVzZXQg
YWxvbmcgd2l0aCB0aGUgTUFDRSBjaGlwLiAqLw0KICAgbHAtPnR4X2ZyZWVfZnJhbWVzPUFNMjE1
MF9NQVhfVFhfRlJBTUVTOw0KIA0KQEAgLTEwNDYsNyArMTA0Niw3IEBADQogICBwcmludGsoS0VS
Tl9OT1RJQ0UgIiVzOiB0cmFuc21pdCB0aW1lZCBvdXQgLS0gIiwgZGV2LT5uYW1lKTsNCiAjaWYg
UkVTRVRfT05fVElNRU9VVA0KICAgcHJpbnRrKCJyZXNldHRpbmcgY2FyZFxuIik7DQotICBDYXJk
U2VydmljZXMoUmVzZXRDYXJkLCBsaW5rLT5oYW5kbGUpOw0KKyAgcGNtY2lhX3Jlc2V0X2NhcmQo
bGluay0+aGFuZGxlLCBOVUxMKTsNCiAjZWxzZSAvKiAjaWYgUkVTRVRfT05fVElNRU9VVCAqLw0K
ICAgcHJpbnRrKCJOT1QgcmVzZXR0aW5nIGNhcmRcbiIpOw0KICNlbmRpZiAvKiAjaWYgUkVTRVRf
T05fVElNRU9VVCAqLw0KDQoNCg0K

--=-VH9sKOcZI5jmB4l1XkO4--

--=-1mmvtHtixsFha6RGoTSY
Content-Type: application/pgp-signature; name=signature.asc
Content-Description: This is a digitally signed message part

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.2.3 (GNU/Linux)

iD8DBQA/5oj078o9R9NraMQRAtAQAJ9U6ewnKObVk49olBpF/OXZgCU/fwCgnW9u
5kusf3thvVdaN0nbi/oqQN8=
=Or3N
-----END PGP SIGNATURE-----

--=-1mmvtHtixsFha6RGoTSY--

