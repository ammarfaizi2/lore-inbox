Return-Path: <linux-kernel-owner@vger.kernel.org>
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id <S131003AbQLCTAv>; Sun, 3 Dec 2000 14:00:51 -0500
Received: (majordomo@vger.kernel.org) by vger.kernel.org
	id <S131085AbQLCTAl>; Sun, 3 Dec 2000 14:00:41 -0500
Received: from mercury.ukc.ac.uk ([129.12.21.10]:37296 "EHLO mercury.ukc.ac.uk")
	by vger.kernel.org with ESMTP id <S131003AbQLCTAW>;
	Sun, 3 Dec 2000 14:00:22 -0500
To: linux-kernel@vger.kernel.org
Subject: Re: corruption on my ext2fs with 2.4.0-test10
In-Reply-To: <20001203142433.A3806@linux.kappa.ro> <20001203144605.A3936@linux.kappa.ro>
Mime-Version: 1.0 (generated by tm-edit 1.5)
Content-Type: text/plain; charset=US-ASCII
From: Adam Sampson <ats1@ukc.ac.uk>
Date: 03 Dec 2000 18:29:49 +0000
In-Reply-To: Mircea Damian's message of "Sun, 3 Dec 2000 14:46:06 +0200"
Message-ID: <87d7f9z7c2.fsf@cartman.azz.net>
X-Mailer: Gnus v5.6.45/XEmacs 21.1 - "Carlsbad Caverns"
Sender: linux-kernel-owner@vger.kernel.org
X-Mailing-List: linux-kernel@vger.kernel.org

Mircea Damian writes:
> ... file-utils like ls, rm say:
> root@invasion:/usr/src/perl-5.6.0/t# ls -sail
> /bin/ls: big: Value too large for defined data type
> total 8
> 1097360    4 drwx------   2 504      1001         4096 Dec  3 13:43 ./
> 1354979    4 drwxr-xr-x   3 504      1001         4096 Dec  3 13:43 ../

The file's got holes in it (regions of zeros), so it doesn't occupy as
much space on disk as it claims to. The reason your normal tools can't
deal with it is that your C library has been built without LFS
support, so stat will fail on files larger than 2 gig.

You can remove it by just calling unlink.

int main(int argc, char **argv) {
	unlink("mybigfile");
}

-- 

Adam Sampson
azz@gnu.org

-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
Please read the FAQ at http://www.tux.org/lkml/
