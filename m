Return-Path: <linux-kernel-owner@vger.kernel.org>
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id <S274653AbRJQExE>; Wed, 17 Oct 2001 00:53:04 -0400
Received: (majordomo@vger.kernel.org) by vger.kernel.org
	id <S274669AbRJQEwy>; Wed, 17 Oct 2001 00:52:54 -0400
Received: from ikura.fe.dis.titech.ac.jp ([131.112.171.65]:4542 "HELO
	ikura.fe.dis.titech.ac.jp") by vger.kernel.org with SMTP
	id <S274653AbRJQEwi>; Wed, 17 Oct 2001 00:52:38 -0400
Date: Wed, 17 Oct 2001 13:53:07 +0900
Message-ID: <w53669e50lo.wl@megaela.fe.dis.titech.ac.jp>
From: GOTO Masanori <gotom@debian.or.jp>
To: henrikki.almusa@helsinki.fi
Cc: linux-kernel@vger.kernel.org, gotom@debian.or.jp
Subject: Re: SCSI compile error
In-Reply-To: In your message of "Tue, 16 Oct 2001 12:58:30 +0300 (EEST)"
	<1003226310.3bcc04c6b2a12@www3.helsinki.fi>
In-Reply-To: <1003226310.3bcc04c6b2a12@www3.helsinki.fi>
User-Agent: Wanderlust/2.2.15 (More Than Words) EMIKO/1.13.9 (Euglena tripteris) FLIM/1.13.2 (Kasanui) APEL/10.2 MULE XEmacs/21.1 (patch 10) (Capitol Reef) (i386-debian-linux)
MIME-Version: 1.0 (generated by EMIKO 1.13.9 - "Euglena tripteris")
Content-Type: text/plain; charset=US-ASCII
Sender: linux-kernel-owner@vger.kernel.org
X-Mailing-List: linux-kernel@vger.kernel.org

At Tue, 16 Oct 2001 12:58:30 +0300 (EEST),
Henrikki Almusa <henrikki.almusa@helsinki.fi> wrote:
> 
> I was compiling kernel 2.4.12 and encountered a following problem. I couldn't 
> found anything from list archives about this. I tried to fix this by using the 
> same source file from 2.4.10, but that gives same error except the line number 
> is one smaller in all lines.
> 
> Output from compiling:
> gcc -D__KERNEL__ -I/usr/src/linux-2.4.12/include -Wall -Wstrict-prototypes 
> -Wno-trigraphs -O2 -fomit-frame-pointer -fno-strict-aliasing -fno-common -pipe 
> -mpreferred-stack-boundary=2 -march=i686 -DMODULE -DMODVERSIONS -include 
> /usr/src/linux-2.4.12/include/linux/modversions.h   -c -o cpqfcTSinit.o 
> cpqfcTSinit.c
> cpqfcTSinit.c: In function `cpqfcTS_ioctl':
> cpqfcTSinit.c:663: `SCSI_IOCTL_FC_TARGET_ADDRESS' undeclared (first use in this
> function)
> cpqfcTSinit.c:663: (Each undeclared identifier is reported only once
> cpqfcTSinit.c:663: for each function it appears in.)
> cpqfcTSinit.c:681: `SCSI_IOCTL_FC_TDR' undeclared (first use in this function)
> make[2]: *** [cpqfcTSinit.o] Error 1
> make[2]: Leaving directory `/usr/src/linux-2.4.12/drivers/scsi'
> make[1]: *** [_modsubdir_scsi] Error 2
> make[1]: Leaving directory `/usr/src/linux-2.4.12/drivers'
> make: *** [_mod_drivers] Error 2
> [root@my_comp linux-2.4.12]#
> 
> Ps. i'm not on the kernel-list so put my email in cc atleast.

Try this patch.

--- include/scsi/scsi.h      Wed Oct 17 13:48:50 2001
+++ include/scsi/scsi.h.new  Wed Oct 17 13:48:51 2001
@@ -214,6 +214,12 @@
 /* Used to get the PCI location of a device */
 #define SCSI_IOCTL_GET_PCI 0x5387
 
+/* Used to get Fibre Channel WWN and port_id from device */
+#define SCSI_IOCTL_FC_TARGET_ADDRESS 0x5387
+
+/* Used to invoke Target Defice Reset for Fibre Channel */
+#define SCSI_IOCTL_FC_TDR 0x5388
+
 /*
  * Overrides for Emacs so that we follow Linus's tabbing style.
  * Emacs will notice this stuff at the end of the file and
automatically


-- gotom
