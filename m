Return-Path: <linux-kernel-owner+willy=40w.ods.org@vger.kernel.org>
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S263078AbUC2Tol (ORCPT <rfc822;willy@w.ods.org>);
	Mon, 29 Mar 2004 14:44:41 -0500
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S263104AbUC2Tol
	(ORCPT <rfc822;linux-kernel-outgoing>);
	Mon, 29 Mar 2004 14:44:41 -0500
Received: from p3EE060E7.dip0.t-ipconnect.de ([62.224.96.231]:27776 "EHLO
	susi.maya.org") by vger.kernel.org with ESMTP id S263078AbUC2ToO
	(ORCPT <rfc822;linux-kernel@vger.kernel.org>);
	Mon, 29 Mar 2004 14:44:14 -0500
Message-ID: <40687C41.7060301@p3EE060E7.dip0.t-ipconnect.de>
Date: Mon, 29 Mar 2004 21:42:57 +0200
From: Andreas Hartmann <andihartmann@freenet.de>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.6) Gecko/20040212
X-Accept-Language: de, en-us, en
MIME-Version: 1.0
To: Chris Mason <mason@suse.com>
CC: Andrew Morton <akpm@osdl.org>, linux-kernel@vger.kernel.org
Subject: Re: Very poor performance with 2.6.4
References: <40672F39.5040702@p3EE062D5.dip0.t-ipconnect.de>	 <20040328200710.66a4ae1a.akpm@osdl.org>	 <4067BF2C.8050801@p3EE060D4.dip0.t-ipconnect.de> <1080570227.20685.93.camel@watt.suse.com>
In-Reply-To: <1080570227.20685.93.camel@watt.suse.com>
X-Enigmail-Version: 0.82.5.0
X-Enigmail-Supports: pgp-inline, pgp-mime
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
Sender: linux-kernel-owner@vger.kernel.org
X-Mailing-List: linux-kernel@vger.kernel.org

Chris Mason wrote:
> On Mon, 2004-03-29 at 01:16, Andreas Hartmann wrote:
>> Andrew Morton wrote:
>> > Andreas Hartmann <andihartmann@freenet.de> wrote:
>> >>
>> >> I tested kernel 2.6.4. While compiling kdelibs and kdebase, I felt, that
>> >>  kernel 2.6 seems to be slower than 2.4.25.
>> >> 
>> >>  So I did some tests to compare the performance directly. Therefore I
>> >>  rebooted for everey test in init 2 (no X).
>> >> 
>> >>  I locally compiled 2.6.5rc2 3 times under 2.6.4 and under 2.4.25 on a
>> >>  reiserfs LVM partition, which resides onto a IDE HD (using DMA) and got
>> >>  the following result:
>> >> 
>> >>  In the middle, compiling under kernel 2.6.4 tooks 9.3% more real time than
>> >>  under 2.4.25.
>> >>  The user-processortime is about the same, but the system-processortime is
>> >>  under 2.6.4 32.9% higher than under 2.4.25.
>> > 
>> > Try mounting your reiserfs filesystems with the `-o nolargeio=1' option.
>> 
>> This didn't help.
>> 
>> > 
>> > If that doesn't help, please run a comparative kernel profile.  See
>> > Documentation/basic_profiling.txt.
>> 
>> I'll do this next.
> 
> You might also want to try 2.6.5-rc2 which has a set of reiserfs fixes
> from 2.4.x.  I'm hoping those will clean things up for you.

Ooops, I forgot the profiling values for 2.6.5-rc2. Here they are (I took 
the values for the slowest run):


  99300 default_idle                             2068.7500
      2 exit_thread                                0.0312
      1 flush_thread                               0.0078
      3 prepare_to_copy                            0.0234
      2 copy_thread                                0.0033
      2 sys_fork                                   0.0312
      1 sys_vfork                                  0.0156
      1 sys_execve                                 0.0078
      3 restore_sigcontext                         0.0094
      1 sys_sigreturn                              0.0045
      3 setup_sigcontext                           0.0099
      5 setup_frame                                0.0101
      1 handle_signal                              0.0033
      1 do_signal                                  0.0035
    252 system_call                                5.7273
     12 syscall_exit                               1.0909
     31 error_code                                 0.5536
    184 device_not_available                       4.3810
     16 handle_IRQ_event                           0.1429
      3 release_x86_irqs                           0.0234
      1 init_new_context                           0.0037
      5 destroy_context                            0.0260
    127 old_mmap                                   0.3307
    218 kernel_fpu_begin                           3.4062
      1 convert_fxsr_to_user                       0.0028
      1 convert_fxsr_from_user                     0.0042
      3 save_i387                                  0.0110
      1 restore_i387_fxsave                        0.0069
      1 restore_i387                               0.0063
      2 sched_clock                                0.0139
     45 delay_pmtmr                                1.4062
      2 pte_alloc_one                              0.0250
      1 pgd_alloc                                  0.0312
      2 pgd_free                                   0.0625
   2170 do_page_fault                              1.6194
      3 sched_fork                                 0.0187
      3 wake_up_forked_process                     0.0078
     19 schedule_tail                              0.0913
     84 schedule                                   0.0590
      5 preempt_schedule                           0.0625
     74 __wake_up                                  0.7708
      1 wait_for_completion                        0.0045
      1 io_schedule                                0.0312
    525 __might_sleep                              2.5240
      1 free_task                                  0.0208
      2 __put_task_struct                          0.0078
      2 add_wait_queue                             0.0208
      5 remove_wait_queue                          0.0446
      4 prepare_to_wait                            0.0312
     24 dup_task_struct                            0.1154
      2 mm_init                                    0.0089
     11 mm_alloc                                   0.1719
      2 __mmdrop                                   0.0250
      6 mmput                                      0.0417
      4 mm_release                                 0.0208
     67 copy_mm                                    0.0574
      9 count_open_files                           0.1875
     13 copy_files                                 0.0153
      5 unshare_files                              0.0521
     55 copy_process                               0.0196
      3 do_fork                                    0.0082
     35 release_task                               0.0706
      3 put_files_struct                           0.0156
     45 exit_notify                                0.0232
     11 do_exit                                    0.0101
      4 do_group_exit                              0.0227
      3 sys_exit_group                             0.0938
      7 eligible_child                             0.0292
      4 wait_task_zombie                           0.0078
      6 sys_wait4                                  0.0099
      2 sys_waitpid                                0.0465
      1 .text.lock.exit                            0.0044
     20 current_kernel_time                        0.3125
      2 get_jiffies_64                             0.0312
   4190 do_softirq                                26.1875
      7 tasklet_action                             0.0625
     27 __mod_timer                                0.0734
      4 mod_timer                                  0.0357
      5 del_timer                                  0.0347
    178 run_timer_softirq                          0.4120
      1 sys_getpid                                 0.0625
      1 schedule_timeout                           0.0052
      5 flush_signal_handlers                      0.0625
      1 send_group_sig_info                        0.0104
     10 get_signal_to_deliver                      0.0118
     35 sigprocmask                                0.1823
     12 sys_rt_sigprocmask                         0.0300
     14 do_sigaction                               0.0273
      5 sys_rt_sigaction                           0.0149
    127 groups_search                              1.1339
     61 in_group_p                                 0.4766
      4 sys_newuname                               0.0227
      3 sys_getrlimit                              0.0208
      6 alloc_pidmap                               0.0121
      2 call_rcu                                   0.0417
      3 rcu_start_batch                            0.0469
      7 rcu_check_quiescent_state                  0.0486
      1 rcu_process_callbacks                      0.0039
      6 exit_itimers                               0.0469
      4 acct_process                               0.0286
      1 __remove_from_page_cache                   0.0089
      1 remove_from_page_cache                     0.0125
      1 add_to_page_cache                          0.0042
      2 add_to_page_cache_lru                      0.0250
     12 page_waitqueue                             0.2500
     33 unlock_page                                0.3438
      1 end_page_writeback                         0.0078
    452 find_get_page                              4.7083
      1 find_lock_page                             0.0048
      2 find_or_create_page                        0.0114
      1 find_get_pages                             0.0089
    102 do_generic_mapping_read                    0.1045
     46 file_read_actor                            0.1797
     46 __generic_file_aio_read                    0.0846
     17 generic_file_read                          0.0966
    180 filemap_nopage                             0.2123
     29 generic_file_mmap                          0.4531
     18 read_cache_page                            0.0331
     11 generic_file_aio_write_nolock              0.0040
      4 generic_file_write_nolock                  0.0250
      2 generic_file_write                         0.0139
      1 generic_write_checks                       0.0015
     20 mempool_alloc                              0.0543
      1 mempool_alloc_slab                         0.0312
    189 bad_range                                  1.6875
    152 prep_new_page                              1.5833
    577 free_hot_cold_page                         2.2539
      2 free_hot_page                              0.1250
   1676 buffered_rmqueue                           3.7411
    318 __alloc_pages                              0.3750
      1 free_pages                                 0.0156
    111 nr_free_pages                              1.3875
      1 get_page_state                             0.0312
      2 get_zone_counts                            0.0156
      1 get_dirty_limits                           0.0048
      4 balance_dirty_pages_ratelimited            0.0250
      1 do_writepages                              0.0156
      4 __set_page_dirty_nobuffers                 0.0179
      3 test_clear_page_dirty                      0.0312
     52 file_ra_state_init                         1.0833
     33 do_page_cache_readahead                    0.0897
     51 page_cache_readahead                       0.0996
      2 cache_grow                                 0.0031
    161 kmem_cache_alloc                           1.4375
      2 kmem_ptr_validate                          0.0250
     26 __kmalloc                                  0.1625
     94 kmem_cache_free                            1.1750
     17 kfree                                      0.1518
     12 reap_timer_fnc                             0.0242
      6 activate_page                              0.0375
    216 mark_page_accessed                         4.5000
    169 lru_cache_add_active                       1.7604
     13 lru_add_drain                              0.1354
    145 __page_cache_release                       1.0069
     91 release_pages                              0.2473
      5 __pagevec_lru_add                          0.0195
    227 __pagevec_lru_add_active                   0.8346
      1 shrink_list                                0.0008
      1 refill_inactive_zone                       0.0008
      3 blk_queue_bounce                           0.0312
     79 clear_page_tables                          0.4489
    286 pte_alloc_map                              1.4896
    238 copy_page_range                            0.2755
    744 zap_pte_range                              1.9375
      8 zap_pmd_range                              0.0714
     26 unmap_page_range                           0.2321
     46 unmap_vmas                                 0.0846
     48 do_wp_page                                 0.0577
    706 do_anonymous_page                          1.3789
    695 do_no_page                                 0.8865
    560 handle_mm_fault                            1.5217
     42 remove_shared_vm_struct                    0.2917
     12 sys_brk                                    0.0417
     78 find_vma_prepare                           0.6964
      6 __vma_link_rb                              0.0938
     21 __vma_link                                 0.1313
     23 vma_link                                   0.1437
      3 __insert_vm_struct                         0.0208
     12 can_vma_merge_before                       0.1500
     29 can_vma_merge_after                        0.3625
    113 vma_merge                                  0.1471
    418 do_mmap_pgoff                              0.2354
     81 get_unmapped_area                          0.2531
    500 find_vma                                   5.2083
     36 find_vma_prev                              0.3750
      2 expand_stack                               0.0104
     14 free_pgtables                              0.0875
     11 unmap_vma                                  0.0859
      6 unmap_vma_list                             0.1250
     18 unmap_region                               0.0804
     27 detach_vmas_to_be_unmapped                 0.2411
     16 split_vma                                  0.0357
     25 do_munmap                                  0.0625
     11 sys_munmap                                 0.0859
     11 do_brk                                     0.0202
     14 exit_mmap                                  0.0350
      3 insert_vm_struct                           0.0234
      1 get_one_pte_map_nested                     0.0069
    561 page_add_rmap                              3.1875
    426 page_remove_rmap                           1.4013
      1 try_to_unmap_one                           0.0024
    246 __pte_chain_free                           2.1964
    113 pte_chain_alloc                            0.5885
     69 free_page_and_swap_cache                   0.6161
      4 can_share_swap_page                        0.0357
      2 si_swapinfo                                0.0179
      2 sys_access                                 0.0060
      1 sys_chmod                                  0.0039
     35 filp_open                                  0.3125
    105 dentry_open                                0.1989
     76 get_unused_fd                              0.1827
      4 put_unused_fd                              0.0625
     30 fd_install                                 0.4688
     34 sys_open                                   0.2361
     31 filp_close                                 0.2153
     31 sys_close                                  0.1938
      5 default_llseek                             0.0208
      4 sys_llseek                                 0.0156
     60 vfs_read                                   0.1875
     16 vfs_write                                  0.0500
     14 sys_read                                   0.1250
      6 sys_write                                  0.0536
     54 get_empty_filp                             0.2109
     14 fput                                       0.4375
     56 __fput                                     0.1842
     29 fget                                       0.4531
     38 fget_light                                 0.2639
     43 file_move                                  0.4479
     28 file_kill                                  0.4375
     67 __constant_c_and_count_memset              0.4653
      1 __set_page_buffers                         0.0156
      1 __clear_page_buffers                       0.0156
    146 __find_get_block_slow                      0.4148
      1 mark_buffer_async_write                    0.0312
      1 inode_has_buffers                          0.0312
     65 __set_page_dirty_buffers                   0.2138
      3 create_buffers                             0.0170
      2 grow_dev_page                              0.0057
      2 __getblk_slow                              0.0069
      2 mark_buffer_dirty                          0.0250
     71 __brelse                                   1.1094
      2 __bforget                                  0.0208
     84 bh_lru_install                             0.3750
    457 __find_get_block                           1.7852
     46 __getblk                                   0.4107
     37 __bread                                    0.4625
      1 set_bh_page                                0.0156
      1 block_invalidatepage                       0.0042
      1 create_empty_buffers                       0.0063
      7 __block_write_full_page                    0.0067
     30 __block_prepare_write                      0.0268
      4 __block_commit_write                       0.0278
      1 block_read_full_page                       0.0013
      2 block_prepare_write                        0.0250
     11 submit_bh                                  0.0229
      2 check_ttfb_buffer                          0.0208
      2 free_buffer_head                           0.0179
      3 init_buffer_head                           0.0625
     19 bio_alloc                                  0.0457
      2 sync_supers                                0.0083
     17 nr_blockdev_pages                          0.1771
      2 chrdev_open                                0.0038
      1 cdev_get                                   0.0052
     30 generic_fillattr                           0.1875
     35 vfs_getattr                                0.1823
      6 vfs_stat                                   0.0625
     11 vfs_fstat                                  0.1375
     53 cp_new_stat64                              0.1656
      3 sys_stat64                                 0.0469
     26 sys_fstat64                                0.4062
      8 count                                      0.1250
    105 copy_strings                               0.1727
      3 put_dirty_page                             0.0089
     10 setup_arg_pages                            0.0223
      6 open_exec                                  0.0250
      1 kernel_read                                0.0104
      6 exec_mmap                                  0.0187
     13 flush_old_exec                             0.0060
      3 prepare_binprm                             0.0144
      3 compute_creds                              0.0104
     12 search_binary_handler                      0.0170
      4 do_execve                                  0.0064
      5 set_binfmt                                 0.0312
      7 pipe_wait                                  0.0365
     13 pipe_readv                                 0.0169
      7 pipe_writev                                0.0075
      2 pipe_write                                 0.0312
      2 pipe_release                               0.0089
      1 pipe_read_fasync                           0.0069
     27 getname                                    0.1298
     23 vfs_permission                             0.0799
     20 permission                                 0.1562
      3 deny_write_access                          0.0375
      1 path_release                               0.0156
      2 cached_lookup                              0.0139
      4 real_lookup                                0.0147
     39 follow_mount                               0.2708
     43 do_lookup                                  0.2443
    534 link_path_walk                             0.2181
     72 path_lookup                                0.2250
      1 __lookup_hash                              0.0045
      1 lookup_hash                                0.0208
      6 __user_walk                                0.0625
      1 lock_rename                                0.0028
      3 unlock_rename                              0.0375
      2 vfs_create                                 0.0074
    104 may_open                                   0.2407
     49 open_namei                                 0.0437
      1 vfs_unlink                                 0.0023
      1 sys_unlink                                 0.0030
      1 vfs_rename                                 0.0012
     26 page_getlink                               0.1250
     23 page_follow_link                           0.0479
      3 locate_fd                                  0.0104
      1 sys_dup2                                   0.0033
      2 do_fcntl                                   0.0046
      1 sys_fcntl64                                0.0052
      2 kill_fasync                                0.0156
      6 sys_ioctl                                  0.0083
      1 vfs_readdir                                0.0048
      1 filldir64                                  0.0031
      1 poll_freewait                              0.0125
      1 sys_select                                 0.0008
     31 locks_remove_posix                         0.1140
     34 locks_remove_flock                         0.1771
      3 steal_locks                                0.0144
      3 d_callback                                 0.0469
      2 d_free                                     0.0312
     63 dput                                       0.1193
      1 prune_dcache                               0.0022
      3 d_alloc                                    0.0059
      3 d_instantiate                              0.0234
      1 d_lookup                                   0.0125
    652 __d_lookup                                 1.9405
      3 d_delete                                   0.0117
      3 d_rehash                                   0.0268
      2 d_move                                     0.0033
      1 sys_getcwd                                 0.0017
     14 alloc_inode                                0.0350
      1 destroy_inode                              0.0104
      2 inode_init_once                            0.0069
      1 prune_icache                               0.0020
      1 new_inode                                  0.0078
      1 iget_locked                                0.0052
      4 __insert_inode_hash                        0.0417
      2 generic_delete_inode                       0.0069
      2 generic_forget_inode                       0.0057
      3 iput                                       0.0234
     36 inode_times_differ                         0.4500
     87 update_atime                               0.3884
      5 inode_update_time                          0.0223
      1 wake_up_inode                              0.0208
     38 dnotify_flush                              0.1979
     31 dnotify_parent                             0.1615
     10 lookup_mnt                                 0.0781
      3 copy_namespace                             0.0039
     56 __mark_inode_dirty                         0.2500
      2 write_inode                                0.0250
     10 __sync_single_inode                        0.0184
     11 sync_sb_inodes                             0.0181
      2 writeback_inodes                           0.0125
      2 writeback_acquire                          0.0625
      1 writeback_in_progress                      0.0625
      2 writeback_release                          0.0435
     32 do_mpage_readpage                          0.0274
     14 mpage_writepages                           0.0190
      7 exit_aio                                   0.0486
      1 eventpoll_init_file                        0.0312
      1 set_brk                                    0.0104
      7 create_elf_tables                          0.0075
      1 elf_map                                    0.0045
      3 load_elf_interp                            0.0052
     36 load_elf_binary                            0.0114
      2 de_put                                     0.0089
      1 proc_read_inode                            0.0156
      2 proc_alloc_inode                           0.0156
      1 proc_destroy_inode                         0.0312
      2 proc_get_inode                             0.0066
      2 proc_root_lookup                           0.0156
      3 proc_pid_unhash                            0.0234
      2 proc_file_read                             0.0030
     17 proc_lookup                                0.0590
      1 proc_calc_metrics                          0.0104
     40 get_vmalloc_info                           0.2273
      2 meminfo_read_proc                          0.0040
      2 write_profile                              0.0312
     12 scan_bitmap_block                          0.0103
      6 scan_bitmap                                0.0107
      2 _reiserfs_free_block                       0.0060
      1 reiserfs_discard_all_prealloc              0.0156
      1 use_preallocated_list_if_available         0.0089
     17 reiserfs_allocate_blocknrs                 0.0086
      5 balance_leaf_when_delete                   0.0045
     26 balance_leaf                               0.0021
      1 store_thrown                               0.0104
      2 free_thrown                                0.0179
      1 replace_key                                0.0045
      5 do_balance                                 0.0184
      2 do_balance_mark_leaf_dirty                 0.0139
      5 bin_search_in_dir_item                     0.0284
      5 search_by_entry_key                        0.0101
      3 get_third_component                        0.0312
      1 reiserfs_match                             0.0089
     11 linear_search_in_dir_item                  0.0153
      3 reiserfs_find_entry                        0.0085
      3 reiserfs_lookup                            0.0078
      5 reiserfs_add_entry                         0.0041
      1 new_inode_init                             0.0089
      2 reiserfs_create                            0.0045
      1 de_still_valid                             0.0045
      1 set_ino_in_dir_entry                       0.0156
      3 reiserfs_rename                            0.0011
      2 reiserfs_delete_inode                      0.0066
     37 _make_cpu_key                              0.1779
     92 make_cpu_key                               0.8214
      2 file_capable                               0.0312
      1 _get_block_create_0                        0.0005
     10 reiserfs_get_block                         0.0019
     77 inode2sd                                   0.4010
      2 inode2sd_v1                                0.0139
     52 update_stat_data                           0.1912
     62 reiserfs_update_sd                         0.1384
     14 reiserfs_new_inode                         0.0097
      3 grab_tail_page                             0.0075
      1 reiserfs_truncate_file                     0.0017
      2 lock_buffer_for_writepage                  0.0125
     40 reiserfs_write_full_page                   0.0500
      1 reiserfs_writepage                         0.0156
      3 reiserfs_prepare_write                     0.0170
      5 reiserfs_commit_write                      0.0101
     34 i_attrs_to_sd_attrs                        0.3036
      3 make_le_item_head                          0.0136
     51 reiserfs_file_release                      0.0431
      5 reiserfs_allocate_blocks_for_region        0.0009
      1 reiserfs_copy_from_user_to_file_region     0.0039
      2 reiserfs_check_for_tail_and_convert        0.0036
     10 reiserfs_prepare_file_region_for_write     0.0040
      5 reiserfs_file_write                        0.0025
      2 reiserfs_readdir                           0.0015
     23 create_virtual_node                        0.0180
      6 check_left                                 0.0187
      2 check_right                                0.0063
      9 get_num_ver                                0.0104
      5 set_parameters                             0.0347
      2 is_leaf_removable                          0.0066
      3 are_leaves_removable                       0.0082
      3 get_empty_nodes                            0.0059
      5 get_rfree                                  0.0446
      1 get_far_parent                             0.0014
      2 get_parents                                0.0048
     18 ip_check_balance                           0.0062
      1 dc_check_balance_internal                  0.0007
      3 dc_check_balance_leaf                      0.0055
      3 check_balance                              0.0170
      7 get_direct_parent                          0.0257
      5 get_neighbors                              0.0142
      4 get_virtual_node_size                      0.0500
      3 get_mem_for_virtual_node                   0.0125
     11 wait_tb_buffers_until_unlocked             0.0135
     13 fix_nodes                                  0.0129
     10 unfix_nodes                                0.0260
      1 is_reiserfs_jr                             0.0125
      1 reiserfs_write_super                       0.0069
      3 add_save_link                              0.0055
      3 reiserfs_alloc_inode                       0.0625
     44 reiserfs_dirty_inode                       0.2292
      3 reiserfs_get_unused_objectid               0.0104
      3 reiserfs_release_objectid                  0.0055
      2 leaf_copy_boundary_item                    0.0011
      4 leaf_copy_items_entirely                   0.0052
      1 leaf_copy_items                            0.0025
      4 leaf_delete_items                          0.0089
     15 leaf_insert_into_buf                       0.0177
     10 leaf_paste_in_buffer                       0.0108
      1 leaf_cut_entries                           0.0024
      8 leaf_cut_from_buffer                       0.0065
     14 leaf_delete_items_entirely                 0.0243
     13 leaf_paste_entries                         0.0173
     10 internal_insert_childs                     0.0160
      2 balance_internal                           0.0008
     20 decrement_counters_in_path                 0.2500
      5 pathrelse_and_restore                      0.0625
     26 pathrelse                                  0.4062
    267 is_leaf                                    0.5754
     30 is_internal                                0.1875
    158 is_tree_node                               1.4107
    795 search_by_key                              0.2062
     10 search_for_position_by_key                 0.0102
      2 comp_items                                 0.0208
     14 prepare_for_delete_or_cut                  0.0072
      1 calc_deleted_bytes_number                  0.0021
      4 init_tb_struct                             0.0417
      1 reiserfs_delete_object                     0.0089
      1 maybe_indirect_to_direct                   0.0015
      4 reiserfs_cut_from_item                     0.0032
     10 reiserfs_do_truncate                       0.0075
      2 reiserfs_insert_item                       0.0063
      1 B_IS_IN_TREE                               0.0312
     18 copy_item_head                             0.3750
      3 decrement_bcount                           0.0469
      3 r5_hash                                    0.0375
      1 reiserfs_unmap_buffer                      0.0052
      1 unmap_buffers                              0.0078
      1 indirect2direct                            0.0014
     22 init_journal_hash                          0.6875
      1 get_bitmap_node                            0.0063
      1 set_bit_in_list_bitmap                     0.0089
      5 get_cnode                                  0.0347
      1 push_journal_writer                        0.0625
     15 reiserfs_in_journal                        0.0312
      9 flush_commit_list                          0.0078
      3 find_newer_jl_for_cn                       0.0625
      1 remove_all_from_journal_list               0.0057
      1 _update_journal_header_block               0.0037
      1 flush_older_journal_lists                  0.0063
      1 submit_logged_buffer                       0.0104
     41 kupdate_one_transaction                    0.0777
     28 remove_journal_hash                        0.1458
      2 journal_transaction_should_end             0.0179
      8 reiserfs_wait_on_write_block               0.0556
    171 do_journal_begin_r                         0.2545
      8 journal_begin                              0.1667
     56 journal_mark_dirty                         0.0778
     15 journal_end                                0.3125
     36 can_dirty                                  0.2045
      2 flush_old_commits                          0.0043
     90 check_journal_end                          0.1372
      3 journal_mark_freed                         0.0054
      7 reiserfs_restore_prepared_buffer           0.2188
     44 reiserfs_prepare_for_journal               0.3929
     90 do_journal_end                             0.0277
      2 sd_bytes_number                            0.1250
      2 sd_is_left_mergeable                       0.1250
      4 sd_create_vi                               0.2500
      7 sd_part_size                               0.2188
      5 direct_is_left_mergeable                   0.0347
      3 direct_create_vi                           0.1875
      1 indirect_is_left_mergeable                 0.0089
      2 indirect_create_vi                         0.1250
      1 indirect_part_size                         0.0625
      1 direntry_is_left_mergeable                 0.0625
     13 direntry_create_vi                         0.0325
      3 direntry_check_left                        0.0208
      3 direntry_part_size                         0.0469
      4 copy_semundo                               0.0192
      3 exit_sem                                   0.0089
      1 sysvipc_sem_read_proc                      0.0027
      4 dummy_capable                              0.0833
    117 dummy_vm_enough_memory                     0.6648
      3 dummy_bprm_alloc_security                  0.1875
      2 dummy_bprm_secureexec                      0.0312
      6 dummy_inode_alloc_security                 0.3750
      1 dummy_inode_create                         0.0625
      1 dummy_inode_mkdir                          0.0625
      4 dummy_inode_follow_link                    0.2500
     30 dummy_inode_permission                     1.8750
      2 dummy_inode_getattr                        0.1250
      3 dummy_file_permission                      0.1875
     21 dummy_file_alloc_security                  1.3125
      1 dummy_file_free_security                   0.0625
     38 dummy_file_mmap                            2.3750
      1 dummy_file_fcntl                           0.0625
      1 dummy_task_create                          0.0625
      1 dummy_task_free_security                   0.0625
      2 dummy_d_instantiate                        0.1250
      3 radix_tree_insert                          0.0156
    474 radix_tree_lookup                          5.9250
      2 radix_tree_gang_lookup                     0.0139
      2 radix_tree_delete                          0.0083
      6 __rb_rotate_left                           0.0938
      6 __rb_rotate_right                          0.0938
     41 rb_insert_color                            0.1708
      5 __rb_erase_color                           0.0116
     30 rb_erase                                   0.1172
      2 skip_atoi                                  0.0312
     21 number                                     0.0285
     12 vsnprintf                                  0.0101
      1 sprintf                                    0.0208
    109 atomic_dec_and_lock                        1.3625
      4 __const_udelay                             0.1111
      5 __get_user_4                               0.2174
      7 bad_get_user                               0.7778
     56 memcpy                                     0.5833
    368 _mmx_memcpy                                1.0000
   8390 fast_clear_page                           87.3958
    852 fast_copy_page                             3.3281
     82 mmx_clear_page                             2.5625
      6 mmx_copy_page                              0.1250
     79 strncpy_from_user                          0.7054
     51 clear_user                                 0.5312
    184 strnlen_user                               1.9167
      2 __copy_user_intel                          0.0114
   2436 __copy_to_user_ll                         21.7500
    279 __copy_from_user_ll                        1.7437
      1 init_dev                                   0.0007
      7 release_dev                                0.0045
      1 tty_open                                   0.0012
      1 tty_release                                0.0104
      2 tty_ioctl                                  0.0015
      2 n_tty_ioctl                                0.0017
      1 vt_ioctl                                   0.0001
      1 vc_allocate                                0.0022
      2 con_close                                  0.0208
      1 elv_set_request                            0.0156
      1 blk_recount_segments                       0.0018
     30 blk_rq_map_sg                              0.0893
     10 generic_unplug_device                      0.0893
      2 blk_run_queues                             0.0114
      9 get_request                                0.0134
      1 blk_congestion_wait                        0.0063
    112 __make_request                             0.0778
      7 generic_make_request                       0.0141
      2 submit_bio                                 0.0179
      2 put_io_context                             0.0208
      4 get_io_context                             0.0312
      2 as_work_handler                            0.0179
      9 as_set_request                             0.0625
      1 default_end_request                        0.0625
    145 ide_end_request                            0.4315
      8 start_request                              0.0125
     97 ide_do_request                             0.1102
     40 ide_intr                                   0.1000
    150 ide_inb                                    9.3750
    297 ide_outb                                  18.5625
     28 ide_outl                                   1.7500
      3 SELECT_DRIVE                               0.0375
      2 ide_wait_stat                              0.0066
     36 ide_execute_command                        0.1875
      3 ide_dma_intr                               0.0156
      2 ide_build_sglist                           0.0114
      3 ide_build_dmatable                         0.0075
      1 ide_destroy_dmatable                       0.0208
      6 ide_start_dma                              0.0341
      5 __ide_dma_write                            0.0223
      1 __ide_dma_begin                            0.0125
      2 __ide_dma_end                              0.0125
      5 __ide_do_rw_disk                           0.0027
     19 i8042_interrupt                            0.0540
      6 i8042_timer_func                           0.1250
      1 datagram_poll                              0.0039
      1 rt_check_expire                            0.0037
      1 tcp_poll                                   0.0028
142289 total                                      0.0819


Regards,
Andreas Hartmann
