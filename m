Return-Path: <linux-kernel-owner@vger.kernel.org>
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id <S279865AbRKNA2P>; Tue, 13 Nov 2001 19:28:15 -0500
Received: (majordomo@vger.kernel.org) by vger.kernel.org
	id <S279829AbRKNA2F>; Tue, 13 Nov 2001 19:28:05 -0500
Received: from ikura.fe.dis.titech.ac.jp ([131.112.171.65]:24798 "HELO
	ikura.fe.dis.titech.ac.jp") by vger.kernel.org with SMTP
	id <S279875AbRKNA1r>; Tue, 13 Nov 2001 19:27:47 -0500
Date: Wed, 14 Nov 2001 09:27:39 +0900
Message-ID: <w53vggeb3ic.wl@megaela.fe.dis.titech.ac.jp>
From: GOTO Masanori <gotom@debian.or.jp>
To: jakob@unthought.net, linux-kernel@vger.kernel.org
Subject: Re: High UNIX socket latency
In-Reply-To: In your message of "Tue, 13 Nov 2001 12:51:26 +0100"
	<20011113125126.E30421@unthought.net>
In-Reply-To: <20011113125126.E30421@unthought.net>
User-Agent: EMIKO/1.13.9 (Euglena tripteris) FLIM/1.13.2 (Kasanui) APEL/10.2 MULE XEmacs/21.1 (patch 10) (Capitol Reef) (i386-debian-linux)
MIME-Version: 1.0 (generated by EMIKO 1.13.9 - "Euglena tripteris")
Content-Type: text/plain; charset=US-ASCII
Sender: linux-kernel-owner@vger.kernel.org
X-Mailing-List: linux-kernel@vger.kernel.org

At Tue, 13 Nov 2001 12:51:26 +0100,
Jakob Ostergaard <jakob@unthought.net> wrote:
> In another application where I use a UNIX STREAM socket, I get
> a typical latency of one send() of around 1 ms.
> 
> I cannot set TCP_NODELAY on a UNIX socket, and I can't really
> see why I get the high latency.   Is there some undocumented
> option like TCP_NODELAY for UNIX STREAM connections, or are there
> other tricks I can play to get the latency down ?
>
> One process does a send(), the other one does a select() and a
> recv() - and the time from the send() to the recv() is around 1 ms
> which I think seems far too high.

I think more details are needed... kernel version, packet size, 
select timeout, your program/environment, the result of
average responce time and each responce time, throughput, etc.

-- gotom
