Return-Path: <linux-kernel-owner+willy=40w.ods.org-S269558AbUI3W2x@vger.kernel.org>
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S269558AbUI3W2x (ORCPT <rfc822;willy@w.ods.org>);
	Thu, 30 Sep 2004 18:28:53 -0400
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S269535AbUI3W2x
	(ORCPT <rfc822;linux-kernel-outgoing>);
	Thu, 30 Sep 2004 18:28:53 -0400
Received: from mail0.scram.de ([195.226.127.110]:21258 "EHLO mail0.scram.de")
	by vger.kernel.org with ESMTP id S269558AbUI3WZx (ORCPT
	<rfc822;linux-kernel@vger.kernel.org>);
	Thu, 30 Sep 2004 18:25:53 -0400
Date: Fri, 1 Oct 2004 00:25:29 +0200 (CEST)
From: Jochen Friedrich <jochen@scram.de>
X-X-Sender: jochen@localhost
To: Roman Zippel <zippel@linux-m68k.org>,
       Linux Kernel <linux-kernel@vger.kernel.org>
Cc: Kars de Jong <jongk@linux-m68k.org>,
       Linux/m68k kernel mailing list 
	<linux-m68k@lists.linux-m68k.org>
Subject: Re: [PATCH 2.6] DIO driver model
In-Reply-To: <415A0EE7.6020203@linux-m68k.org>
Message-ID: <Pine.LNX.4.58.0410010019370.3179@localhost>
References: <Pine.LNX.4.58.0409262059280.1809@localhost>
 <1096296495.2466.14.camel@kars.perseus.home> <Pine.LNX.4.58.0409272003120.3179@localhost>
 <415A0EE7.6020203@linux-m68k.org>
MIME-Version: 1.0
Content-Type: MULTIPART/MIXED; BOUNDARY="8323328-1744882227-1096583129=:3179"
X-Spam-Report: * 2.2 DOMAIN_BODY BODY: Domain registration spam body
	* -4.9 BAYES_00 BODY: Bayesian spam probability is 0 to 1%
	* [score: 0.0000]
	* 0.1 RCVD_IN_NJABL_DIALUP RBL: NJABL: dialup sender did non-local SMTP
	* [80.128.217.252 listed in dnsbl.njabl.org]
	* 0.1 RCVD_IN_DYNABLOCK RBL: Sent directly from dynamic IP address
	* [80.128.217.252 listed in dnsbl.sorbs.net]
	* 0.1 RCVD_IN_NJABL RBL: Received via a relay in dnsbl.njabl.org
	* [80.128.217.252 listed in dnsbl.njabl.org]
	* 0.1 RCVD_IN_SORBS RBL: SORBS: sender is listed in SORBS
	* [80.128.217.252 listed in dnsbl.sorbs.net]
Sender: linux-kernel-owner@vger.kernel.org
X-Mailing-List: linux-kernel@vger.kernel.org

  This message is in MIME format.  The first part should be readable text,
  while the remaining parts are likely unreadable without MIME-aware tools.
  Send mail to mime@docserver.cac.washington.edu for more info.

--8323328-1744882227-1096583129=:3179
Content-Type: TEXT/PLAIN; charset=US-ASCII

Hi Roman,

here is the updated patch for the driver model of the hp300 DIO bus.

Thanks for your comments!
Jochen

 drivers/dio/Makefile        |    2
 drivers/dio/dio-driver.c    |  163 +++++++++++++++++++++++++++
 drivers/dio/dio-sysfs.c     |   77 +++++++++++++
 drivers/dio/dio.c           |  209 +++++++++++------------------------
 drivers/net/Space.c         |    3
 drivers/net/hplance.c       |  126 +++++++++------------
 drivers/serial/8250_hp300.c |  259 +++++++++++++++++++++-----------------------
 drivers/video/hpfb.c        |  122 +++++++++++---------
 include/linux/dio.h         |  155 +++++++++++++++++++++++---
 9 files changed, 697 insertions(+), 419 deletions(-)

On Wed, 29 Sep 2004, Roman Zippel wrote:

> Hi,
>
> Jochen Friedrich wrote:
>
> >>There seem to be some whitespace problems. Also, please set your indent
> >>size to 8 (following the Linux kernel coding style described in
> >>Documentation/CodingStyle).
> >
> > OK, done. I have it attached this time. Hopefully the whitespace problems
> > are gone now.
>
> One more code style nitpick: Please change the if blocks to:
>
> 	if (...) {
> 		...
> 	} else {
> 		...
> 	}
>
> Otherwise it looks ok, although it might be better to post it once to
> the kernel mailing list, as there there are the people who know better
> the driver model.
--8323328-1744882227-1096583129=:3179
Content-Type: TEXT/PLAIN; charset=US-ASCII; name=patch
Content-Transfer-Encoding: BASE64
Content-ID: <Pine.LNX.4.58.0410010025290.3179@localhost>
Content-Description: 
Content-Disposition: attachment; filename=patch

U2lnbmVkLW9mZi1ieTogSm9jaGVuIEZyaWVkcmljaCA8am9jaGVuQHNjcmFt
LmRlPg0KDQpkaWZmIC11cHJOIC1YIGRvbnRkaWZmIGxpbnV4LTIuNi5vcmln
L2RyaXZlcnMvZGlvL01ha2VmaWxlIGxpbnV4LTIuNi9kcml2ZXJzL2Rpby9N
YWtlZmlsZQ0KLS0tIGxpbnV4LTIuNi5vcmlnL2RyaXZlcnMvZGlvL01ha2Vm
aWxlCTIwMDQtMDktMjYgMjE6MTE6MjIuMDAwMDAwMDAwICswMjAwDQorKysg
bGludXgtMi42L2RyaXZlcnMvZGlvL01ha2VmaWxlCTIwMDQtMDktMjIgMTg6
MTg6MDQuMDAwMDAwMDAwICswMjAwDQpAQCAtMiw0ICsyLDQgQEANCiAjIE1h
a2VmaWxlIGZvciB0aGUgbGludXgga2VybmVsLg0KICMNCiANCi1vYmoteSA6
PSBkaW8ubw0KK29iai15IDo9IGRpby5vIGRpby1kcml2ZXIubyBkaW8tc3lz
ZnMubw0KZGlmZiAtdXByTiAtWCBkb250ZGlmZiBsaW51eC0yLjYub3JpZy9k
cml2ZXJzL2Rpby9kaW8tZHJpdmVyLmMgbGludXgtMi42L2RyaXZlcnMvZGlv
L2Rpby1kcml2ZXIuYw0KLS0tIGxpbnV4LTIuNi5vcmlnL2RyaXZlcnMvZGlv
L2Rpby1kcml2ZXIuYwkxOTcwLTAxLTAxIDAxOjAwOjAwLjAwMDAwMDAwMCAr
MDEwMA0KKysrIGxpbnV4LTIuNi9kcml2ZXJzL2Rpby9kaW8tZHJpdmVyLmMJ
MjAwNC0wOS0yOSAwODo0Mjo1MS4wMDAwMDAwMDAgKzAyMDANCkBAIC0wLDAg
KzEsMTYzIEBADQorLyoNCisgKiAgRElPIERyaXZlciBTZXJ2aWNlcw0KKyAq
DQorICogIENvcHlyaWdodCAoQykgMjAwNCBKb2NoZW4gRnJpZWRyaWNoDQor
ICoNCisgKiAgTG9vc2VseSBiYXNlZCBvbiBkcml2ZXJzL3BjaS9wY2ktZHJp
dmVyLmMgYW5kIGRyaXZlcnMvem9ycm8vem9ycm8tZHJpdmVyLmMNCisgKg0K
KyAqICBUaGlzIGZpbGUgaXMgc3ViamVjdCB0byB0aGUgdGVybXMgYW5kIGNv
bmRpdGlvbnMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYw0KKyAqICBMaWNl
bnNlLiAgU2VlIHRoZSBmaWxlIENPUFlJTkcgaW4gdGhlIG1haW4gZGlyZWN0
b3J5IG9mIHRoaXMgYXJjaGl2ZQ0KKyAqICBmb3IgbW9yZSBkZXRhaWxzLg0K
KyAqLw0KKw0KKyNpbmNsdWRlIDxsaW51eC9pbml0Lmg+DQorI2luY2x1ZGUg
PGxpbnV4L21vZHVsZS5oPg0KKyNpbmNsdWRlIDxsaW51eC9kaW8uaD4NCisN
CisNCisJLyoqDQorCSAqICBkaW9fbWF0Y2hfZGV2aWNlIC0gVGVsbCBpZiBh
IERJTyBkZXZpY2Ugc3RydWN0dXJlIGhhcyBhIG1hdGNoaW5nDQorCSAqICAg
ICAgICAgICAgICAgICAgICAgRElPIGRldmljZSBpZCBzdHJ1Y3R1cmUNCisJ
ICogIEBpZHM6IGFycmF5IG9mIERJTyBkZXZpY2UgaWQgc3RydWN0dXJlcyB0
byBzZWFyY2ggaW4NCisJICogIEBkZXY6IHRoZSBESU8gZGV2aWNlIHN0cnVj
dHVyZSB0byBtYXRjaCBhZ2FpbnN0DQorCSAqDQorCSAqICBVc2VkIGJ5IGEg
ZHJpdmVyIHRvIGNoZWNrIHdoZXRoZXIgYSBESU8gZGV2aWNlIHByZXNlbnQg
aW4gdGhlDQorCSAqICBzeXN0ZW0gaXMgaW4gaXRzIGxpc3Qgb2Ygc3VwcG9y
dGVkIGRldmljZXMuIFJldHVybnMgdGhlIG1hdGNoaW5nDQorCSAqICBkaW9f
ZGV2aWNlX2lkIHN0cnVjdHVyZSBvciAlTlVMTCBpZiB0aGVyZSBpcyBubyBt
YXRjaC4NCisJICovDQorDQorY29uc3Qgc3RydWN0IGRpb19kZXZpY2VfaWQg
Kg0KK2Rpb19tYXRjaF9kZXZpY2UoY29uc3Qgc3RydWN0IGRpb19kZXZpY2Vf
aWQgKmlkcywNCisJCSAgIGNvbnN0IHN0cnVjdCBkaW9fZGV2ICpkKQ0KK3sN
CisJd2hpbGUgKGlkcy0+aWQpIHsNCisJCWlmIChpZHMtPmlkID09IERJT19X
SUxEQ0FSRCkNCisJCQlyZXR1cm4gaWRzOw0KKwkJaWYgKERJT19ORUVEU1NF
Q0lEKGlkcy0+aWQgJiAweGZmKSkgew0KKwkJCWlmIChpZHMtPmlkID09IGQt
PmlkKQ0KKwkJCQlyZXR1cm4gaWRzOw0KKwkJfSBlbHNlIHsNCisJCQlpZiAo
KGlkcy0+aWQgJiAweGZmKSA9PSAoZC0+aWQgJiAweGZmKSkNCisJCQkJcmV0
dXJuIGlkczsNCisJCX0NCisJCWlkcysrOw0KKwl9DQorCXJldHVybiBOVUxM
Ow0KK30NCisNCitzdGF0aWMgaW50IGRpb19kZXZpY2VfcHJvYmUoc3RydWN0
IGRldmljZSAqZGV2KQ0KK3sNCisJaW50IGVycm9yID0gMDsNCisJc3RydWN0
IGRpb19kcml2ZXIgKmRydiA9IHRvX2Rpb19kcml2ZXIoZGV2LT5kcml2ZXIp
Ow0KKwlzdHJ1Y3QgZGlvX2RldiAqZCA9IHRvX2Rpb19kZXYoZGV2KTsNCisN
CisJaWYgKCFkLT5kcml2ZXIgJiYgZHJ2LT5wcm9iZSkgew0KKwkJY29uc3Qg
c3RydWN0IGRpb19kZXZpY2VfaWQgKmlkOw0KKw0KKwkJaWQgPSBkaW9fbWF0
Y2hfZGV2aWNlKGRydi0+aWRfdGFibGUsIGQpOw0KKwkJaWYgKGlkKQ0KKwkJ
CWVycm9yID0gZHJ2LT5wcm9iZShkLCBpZCk7DQorCQlpZiAoZXJyb3IgPj0g
MCkgew0KKwkJCWQtPmRyaXZlciA9IGRydjsNCisJCQllcnJvciA9IDA7DQor
CQl9DQorCX0NCisJcmV0dXJuIGVycm9yOw0KK30NCisNCisNCisJLyoqDQor
CSAqICBkaW9fcmVnaXN0ZXJfZHJpdmVyIC0gcmVnaXN0ZXIgYSBuZXcgRElP
IGRyaXZlcg0KKwkgKiAgQGRydjogdGhlIGRyaXZlciBzdHJ1Y3R1cmUgdG8g
cmVnaXN0ZXINCisJICoNCisJICogIEFkZHMgdGhlIGRyaXZlciBzdHJ1Y3R1
cmUgdG8gdGhlIGxpc3Qgb2YgcmVnaXN0ZXJlZCBkcml2ZXJzDQorCSAqICBS
ZXR1cm5zIHRoZSBudW1iZXIgb2YgRElPIGRldmljZXMgd2hpY2ggd2VyZSBj
bGFpbWVkIGJ5IHRoZSBkcml2ZXINCisJICogIGR1cmluZyByZWdpc3RyYXRp
b24uICBUaGUgZHJpdmVyIHJlbWFpbnMgcmVnaXN0ZXJlZCBldmVuIGlmIHRo
ZQ0KKwkgKiAgcmV0dXJuIHZhbHVlIGlzIHplcm8uDQorCSAqLw0KKw0KK2lu
dCBkaW9fcmVnaXN0ZXJfZHJpdmVyKHN0cnVjdCBkaW9fZHJpdmVyICpkcnYp
DQorew0KKwlpbnQgY291bnQgPSAwOw0KKw0KKwkvKiBpbml0aWFsaXplIGNv
bW1vbiBkcml2ZXIgZmllbGRzICovDQorCWRydi0+ZHJpdmVyLm5hbWUgPSBk
cnYtPm5hbWU7DQorCWRydi0+ZHJpdmVyLmJ1cyA9ICZkaW9fYnVzX3R5cGU7
DQorCWRydi0+ZHJpdmVyLnByb2JlID0gZGlvX2RldmljZV9wcm9iZTsNCisN
CisJLyogcmVnaXN0ZXIgd2l0aCBjb3JlICovDQorCWNvdW50ID0gZHJpdmVy
X3JlZ2lzdGVyKCZkcnYtPmRyaXZlcik7DQorCXJldHVybiBjb3VudCA/IGNv
dW50IDogMTsNCit9DQorDQorDQorCS8qKg0KKwkgKiAgZGlvX3VucmVnaXN0
ZXJfZHJpdmVyIC0gdW5yZWdpc3RlciBhIERJTyBkcml2ZXINCisJICogIEBk
cnY6IHRoZSBkcml2ZXIgc3RydWN0dXJlIHRvIHVucmVnaXN0ZXINCisJICoN
CisJICogIERlbGV0ZXMgdGhlIGRyaXZlciBzdHJ1Y3R1cmUgZnJvbSB0aGUg
bGlzdCBvZiByZWdpc3RlcmVkIERJTyBkcml2ZXJzLA0KKwkgKiAgZ2l2ZXMg
aXQgYSBjaGFuY2UgdG8gY2xlYW4gdXAgYnkgY2FsbGluZyBpdHMgcmVtb3Zl
KCkgZnVuY3Rpb24gZm9yDQorCSAqICBlYWNoIGRldmljZSBpdCB3YXMgcmVz
cG9uc2libGUgZm9yLCBhbmQgbWFya3MgdGhvc2UgZGV2aWNlcyBhcw0KKwkg
KiAgZHJpdmVybGVzcy4NCisJICovDQorDQordm9pZCBkaW9fdW5yZWdpc3Rl
cl9kcml2ZXIoc3RydWN0IGRpb19kcml2ZXIgKmRydikNCit7DQorCWRyaXZl
cl91bnJlZ2lzdGVyKCZkcnYtPmRyaXZlcik7DQorfQ0KKw0KKw0KKwkvKioN
CisJICogIGRpb19idXNfbWF0Y2ggLSBUZWxsIGlmIGEgRElPIGRldmljZSBz
dHJ1Y3R1cmUgaGFzIGEgbWF0Y2hpbmcgRElPDQorCSAqICAgICAgICAgICAg
ICAgICAgZGV2aWNlIGlkIHN0cnVjdHVyZQ0KKwkgKiAgQGlkczogYXJyYXkg
b2YgRElPIGRldmljZSBpZCBzdHJ1Y3R1cmVzIHRvIHNlYXJjaCBpbg0KKwkg
KiAgQGRldjogdGhlIERJTyBkZXZpY2Ugc3RydWN0dXJlIHRvIG1hdGNoIGFn
YWluc3QNCisJICoNCisJICogIFVzZWQgYnkgYSBkcml2ZXIgdG8gY2hlY2sg
d2hldGhlciBhIERJTyBkZXZpY2UgcHJlc2VudCBpbiB0aGUNCisJICogIHN5
c3RlbSBpcyBpbiBpdHMgbGlzdCBvZiBzdXBwb3J0ZWQgZGV2aWNlcy4gUmV0
dXJucyB0aGUgbWF0Y2hpbmcNCisJICogIGRpb19kZXZpY2VfaWQgc3RydWN0
dXJlIG9yICVOVUxMIGlmIHRoZXJlIGlzIG5vIG1hdGNoLg0KKwkgKi8NCisN
CitzdGF0aWMgaW50IGRpb19idXNfbWF0Y2goc3RydWN0IGRldmljZSAqZGV2
LCBzdHJ1Y3QgZGV2aWNlX2RyaXZlciAqZHJ2KQ0KK3sNCisJc3RydWN0IGRp
b19kZXYgKmQgPSB0b19kaW9fZGV2KGRldik7DQorCXN0cnVjdCBkaW9fZHJp
dmVyICpkaW9fZHJ2ID0gdG9fZGlvX2RyaXZlcihkcnYpOw0KKwljb25zdCBz
dHJ1Y3QgZGlvX2RldmljZV9pZCAqaWRzID0gZGlvX2Rydi0+aWRfdGFibGU7
DQorDQorCWlmICghaWRzKQ0KKwkJcmV0dXJuIDA7DQorDQorCXdoaWxlIChp
ZHMtPmlkKSB7DQorCQlpZiAoaWRzLT5pZCA9PSBESU9fV0lMRENBUkQpDQor
CQkJcmV0dXJuIDE7DQorCQlpZiAoRElPX05FRURTU0VDSUQoaWRzLT5pZCAm
IDB4ZmYpKSB7DQorCQkJaWYgKGlkcy0+aWQgPT0gZC0+aWQpDQorCQkJCXJl
dHVybiAxOw0KKwkJfSBlbHNlIHsNCisJCQlpZiAoKGlkcy0+aWQgJiAweGZm
KSA9PSAoZC0+aWQgJiAweGZmKSkNCisJCQkJcmV0dXJuIDE7DQorCQl9DQor
CQlpZHMrKzsNCisJfQ0KKwlyZXR1cm4gMDsNCit9DQorDQorDQorc3RydWN0
IGJ1c190eXBlIGRpb19idXNfdHlwZSA9IHsNCisJLm5hbWUJPSAiZGlvIiwN
CisJLm1hdGNoCT0gZGlvX2J1c19tYXRjaA0KK307DQorDQorDQorc3RhdGlj
IGludCBfX2luaXQgZGlvX2RyaXZlcl9pbml0KHZvaWQpDQorew0KKwlyZXR1
cm4gYnVzX3JlZ2lzdGVyKCZkaW9fYnVzX3R5cGUpOw0KK30NCisNCitwb3N0
Y29yZV9pbml0Y2FsbChkaW9fZHJpdmVyX2luaXQpOw0KKw0KK0VYUE9SVF9T
WU1CT0woZGlvX21hdGNoX2RldmljZSk7DQorRVhQT1JUX1NZTUJPTChkaW9f
cmVnaXN0ZXJfZHJpdmVyKTsNCitFWFBPUlRfU1lNQk9MKGRpb191bnJlZ2lz
dGVyX2RyaXZlcik7DQorRVhQT1JUX1NZTUJPTChkaW9fZGV2X2RyaXZlcik7
DQorRVhQT1JUX1NZTUJPTChkaW9fYnVzX3R5cGUpOw0KZGlmZiAtdXByTiAt
WCBkb250ZGlmZiBsaW51eC0yLjYub3JpZy9kcml2ZXJzL2Rpby9kaW8tc3lz
ZnMuYyBsaW51eC0yLjYvZHJpdmVycy9kaW8vZGlvLXN5c2ZzLmMNCi0tLSBs
aW51eC0yLjYub3JpZy9kcml2ZXJzL2Rpby9kaW8tc3lzZnMuYwkxOTcwLTAx
LTAxIDAxOjAwOjAwLjAwMDAwMDAwMCArMDEwMA0KKysrIGxpbnV4LTIuNi9k
cml2ZXJzL2Rpby9kaW8tc3lzZnMuYwkyMDA0LTA5LTI3IDE5OjUwOjU2LjAw
MDAwMDAwMCArMDIwMA0KQEAgLTAsMCArMSw3NyBAQA0KKy8qDQorICogIEZp
bGUgQXR0cmlidXRlcyBmb3IgRElPIERldmljZXMNCisgKg0KKyAqICBDb3B5
cmlnaHQgKEMpIDIwMDQgSm9jaGVuIEZyaWVkcmljaA0KKyAqDQorICogIExv
b3NlbHkgYmFzZWQgb24gZHJpdmVycy9wY2kvcGNpLXN5c2ZzLmMgYW5kIGRy
aXZlcnMvem9ycm8vem9ycm8tc3lzZnMuYw0KKyAqDQorICogIFRoaXMgZmls
ZSBpcyBzdWJqZWN0IHRvIHRoZSB0ZXJtcyBhbmQgY29uZGl0aW9ucyBvZiB0
aGUgR05VIEdlbmVyYWwgUHVibGljDQorICogIExpY2Vuc2UuICBTZWUgdGhl
IGZpbGUgQ09QWUlORyBpbiB0aGUgbWFpbiBkaXJlY3Rvcnkgb2YgdGhpcyBh
cmNoaXZlDQorICogIGZvciBtb3JlIGRldGFpbHMuDQorICovDQorDQorDQor
I2luY2x1ZGUgPGxpbnV4L2tlcm5lbC5oPg0KKyNpbmNsdWRlIDxsaW51eC9k
aW8uaD4NCisjaW5jbHVkZSA8bGludXgvc3RhdC5oPg0KKw0KKy8qIHNob3cg
Y29uZmlndXJhdGlvbiBmaWVsZHMgKi8NCisNCitzdGF0aWMgc3NpemVfdCBk
aW9fc2hvd19pZChzdHJ1Y3QgZGV2aWNlICpkZXYsIGNoYXIgKmJ1ZikNCit7
DQorCXN0cnVjdCBkaW9fZGV2ICpkOw0KKw0KKwlkID0gdG9fZGlvX2Rldihk
ZXYpOw0KKwlyZXR1cm4gc3ByaW50ZihidWYsICIweCUwMnhcbiIsIChkLT5p
ZCAmIDB4ZmYpKTsNCit9DQorc3RhdGljIERFVklDRV9BVFRSKGlkLCBTX0lS
VUdPLCBkaW9fc2hvd19pZCwgTlVMTCk7DQorDQorc3RhdGljIHNzaXplX3Qg
ZGlvX3Nob3dfaXBsKHN0cnVjdCBkZXZpY2UgKmRldiwgY2hhciAqYnVmKQ0K
K3sNCisJc3RydWN0IGRpb19kZXYgKmQ7DQorDQorCWQgPSB0b19kaW9fZGV2
KGRldik7DQorCXJldHVybiBzcHJpbnRmKGJ1ZiwgIjB4JTAyeFxuIiwgZC0+
aXBsKTsNCit9DQorc3RhdGljIERFVklDRV9BVFRSKGlwbCwgU19JUlVHTywg
ZGlvX3Nob3dfaXBsLCBOVUxMKTsNCisNCitzdGF0aWMgc3NpemVfdCBkaW9f
c2hvd19zZWNpZChzdHJ1Y3QgZGV2aWNlICpkZXYsIGNoYXIgKmJ1ZikNCit7
DQorCXN0cnVjdCBkaW9fZGV2ICpkOw0KKw0KKwlkID0gdG9fZGlvX2Rldihk
ZXYpOw0KKwlyZXR1cm4gc3ByaW50ZihidWYsICIweCUwMnhcbiIsICgoZC0+
aWQgPj4gOCkmIDB4ZmYpKTsNCit9DQorc3RhdGljIERFVklDRV9BVFRSKHNl
Y2lkLCBTX0lSVUdPLCBkaW9fc2hvd19zZWNpZCwgTlVMTCk7DQorDQorc3Rh
dGljIHNzaXplX3QgZGlvX3Nob3dfbmFtZShzdHJ1Y3QgZGV2aWNlICpkZXYs
IGNoYXIgKmJ1ZikNCit7DQorCXN0cnVjdCBkaW9fZGV2ICpkOw0KKw0KKwlk
ID0gdG9fZGlvX2RldihkZXYpOw0KKwlyZXR1cm4gc3ByaW50ZihidWYsICIl
c1xuIiwgZC0+bmFtZSk7DQorfQ0KK3N0YXRpYyBERVZJQ0VfQVRUUihuYW1l
LCBTX0lSVUdPLCBkaW9fc2hvd19uYW1lLCBOVUxMKTsNCisNCitzdGF0aWMg
c3NpemVfdCBkaW9fc2hvd19yZXNvdXJjZShzdHJ1Y3QgZGV2aWNlICpkZXYs
IGNoYXIgKmJ1ZikNCit7DQorCXN0cnVjdCBkaW9fZGV2ICpkID0gdG9fZGlv
X2RldihkZXYpOw0KKw0KKwlyZXR1cm4gc3ByaW50ZihidWYsICIweCUwOGx4
IDB4JTA4bHggMHglMDhseFxuIiwNCisJCSAgICAgICBkaW9fcmVzb3VyY2Vf
c3RhcnQoZCksIGRpb19yZXNvdXJjZV9lbmQoZCksDQorCQkgICAgICAgZGlv
X3Jlc291cmNlX2ZsYWdzKGQpKTsNCit9DQorc3RhdGljIERFVklDRV9BVFRS
KHJlc291cmNlLCBTX0lSVUdPLCBkaW9fc2hvd19yZXNvdXJjZSwgTlVMTCk7
DQorDQordm9pZCBkaW9fY3JlYXRlX3N5c2ZzX2Rldl9maWxlcyhzdHJ1Y3Qg
ZGlvX2RldiAqZCkNCit7DQorCXN0cnVjdCBkZXZpY2UgKmRldiA9ICZkLT5k
ZXY7DQorDQorCS8qIGN1cnJlbnQgY29uZmlndXJhdGlvbidzIGF0dHJpYnV0
ZXMgKi8NCisJZGV2aWNlX2NyZWF0ZV9maWxlKGRldiwgJmRldl9hdHRyX2lk
KTsNCisJZGV2aWNlX2NyZWF0ZV9maWxlKGRldiwgJmRldl9hdHRyX2lwbCk7
DQorCWRldmljZV9jcmVhdGVfZmlsZShkZXYsICZkZXZfYXR0cl9zZWNpZCk7
DQorCWRldmljZV9jcmVhdGVfZmlsZShkZXYsICZkZXZfYXR0cl9uYW1lKTsN
CisJZGV2aWNlX2NyZWF0ZV9maWxlKGRldiwgJmRldl9hdHRyX3Jlc291cmNl
KTsNCit9DQorDQpkaWZmIC11cHJOIC1YIGRvbnRkaWZmIGxpbnV4LTIuNi5v
cmlnL2RyaXZlcnMvZGlvL2Rpby5jIGxpbnV4LTIuNi9kcml2ZXJzL2Rpby9k
aW8uYw0KLS0tIGxpbnV4LTIuNi5vcmlnL2RyaXZlcnMvZGlvL2Rpby5jCTIw
MDQtMDktMjYgMjE6MTE6MjIuMDAwMDAwMDAwICswMjAwDQorKysgbGludXgt
Mi42L2RyaXZlcnMvZGlvL2Rpby5jCTIwMDQtMDktMjkgMDg6NDQ6MDYuMDAw
MDAwMDAwICswMjAwDQpAQCAtMSw1ICsxLDYgQEANCiAvKiBDb2RlIHRvIHN1
cHBvcnQgZGV2aWNlcyBvbiB0aGUgRElPIGFuZCBESU8tSUkgYnVzDQogICog
Q29weXJpZ2h0IChDKSAwNS8xOTk4IFBldGVyIE1heWRlbGwgPHBtYXlkZWxs
QGNoaWFyay5ncmVlbmVuZC5vcmcudWs+DQorICogQ29weXJpZ2h0IChDKSAx
OTk0IEpvY2hlbiBGcmllZHJpY2ggPGpvY2hlbkBzY3JhbS5kZT4NCiAgKiAN
CiAgKiBUaGlzIGNvZGUgaGFzIGJhc2ljYWxseSB0aGVzZSByb3V0aW5lcyBh
dCB0aGUgbW9tZW50Og0KICAqIGludCBkaW9fZmluZCh1X2ludCBkZXZpY2Vp
ZCkNCkBAIC0yMywxNSArMjQsMjYgQEANCiAgKiBUaGlzIGZpbGUgaXMgYmFz
ZWQgb24gdGhlIHdheSB0aGUgQW1pZ2EgcG9ydCBoYW5kbGVzIFpvcnJvIElJ
IGNhcmRzLCANCiAgKiBhbHRob3VnaCB3ZSBhcmVuJ3Qgc28gY29tcGxpY2F0
ZWQuLi4NCiAgKi8NCi0jaW5jbHVkZSA8bGludXgvY29uZmlnLmg+DQotI2lu
Y2x1ZGUgPGxpbnV4L2tlcm5lbC5oPg0KKyNpbmNsdWRlIDxsaW51eC9tb2R1
bGUuaD4NCisjaW5jbHVkZSA8bGludXgvc3RyaW5nLmg+DQogI2luY2x1ZGUg
PGxpbnV4L3R5cGVzLmg+DQorI2luY2x1ZGUgPGxpbnV4L2tlcm5lbC5oPg0K
KyNpbmNsdWRlIDxsaW51eC9pbml0Lmg+DQogI2luY2x1ZGUgPGxpbnV4L2Rp
by5oPg0KICNpbmNsdWRlIDxsaW51eC9zbGFiLmg+ICAgICAgICAgICAgICAg
ICAgICAgICAgIC8qIGttYWxsb2MoKSAqLw0KLSNpbmNsdWRlIDxsaW51eC9p
bml0Lmg+DQogI2luY2x1ZGUgPGFzbS91YWNjZXNzLmg+DQogI2luY2x1ZGUg
PGFzbS9pby5oPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogcmVh
ZGIoKSAqLw0KIA0KK3N0cnVjdCBkaW9fYnVzIGRpb19idXMgPSB7DQorCS5y
ZXNvdXJjZXMgPSB7DQorCQkvKiBESU8gcmFuZ2UgKi8NCisJCXsgLm5hbWUg
PSAiRElPIG1lbSIsIC5zdGFydCA9IDB4MDA2MDAwMDAsIC5lbmQgPSAweDAw
N2ZmZmZmIH0sDQorCQkvKiBESU8tSUkgcmFuZ2UgKi8NCisJCXsgLm5hbWUg
PSAiRElPLUlJIG1lbSIsIC5zdGFydCA9IDB4MDEwMDAwMDAsIC5lbmQgPSAw
eDFmZmZmZmZmIH0NCisJfSwNCisJLm5hbWUgPSAiRElPIGJ1cyINCit9Ow0K
Kw0KIC8qIG5vdCBhIHJlYWwgY29uZmlnIG9wdGlvbiB5ZXQhICovDQogI2Rl
ZmluZSBDT05GSUdfRElPX0NPTlNUQU5UUw0KIA0KQEAgLTk5LDMwICsxMTEs
MTYgQEAgc3RhdGljIGNoYXIgZGlvX25vX25hbWVbXSA9IHsgMCB9Ow0KIA0K
ICNlbmRpZiAvKiBDT05GSUdfRElPX0NPTlNUQU5UUyAqLw0KIA0KLS8qIFdl
IHJlcHJlc2VudCBhbGwgdGhlIERJTyBib2FyZHMgaW4gdGhlIHN5c3RlbSB3
aXRoIGEgbGlua2VkIGxpc3Qgb2YgdGhlc2Ugc3RydWN0cy4gKi8NCi1zdHJ1
Y3QgZGlvYm9hcmQNCitpbnQgX19pbml0IGRpb19maW5kKGludCBkZXZpY2Vp
ZCkNCiB7DQotICAgICAgICBzdHJ1Y3QgZGlvYm9hcmQgKm5leHQ7ICAgICAg
ICAgICAgICAgICAgICAvKiBsaW5rIHRvIG5leHQgc3RydWN0IGluIGxpc3Qg
Ki8NCi0gICAgICAgIGludCBpcGw7ICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIC8qIElQTCBvZiB0aGlzIGJvYXJkICovDQotICAgICAgICBp
bnQgY29uZmlndXJlZDsgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBo
YXMgdGhpcyBib2FyZCBiZWVuIGNvbmZpZ3VyZWQ/ICovDQotICAgICAgICBp
bnQgc2NvZGU7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBz
ZWxlY3QgY29kZSBvZiB0aGlzIGJvYXJkICovDQotICAgICAgICBpbnQgaWQ7
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBlbmNvZGVk
IElEICovDQotICAgICAgICBjb25zdCBjaGFyICpuYW1lOw0KLX07DQotDQot
c3RhdGljIHN0cnVjdCBkaW9ib2FyZCAqYmxpc3QgPSBOVUxMOw0KLQ0KLXN0
YXRpYyBpbnQgX19pbml0IGRpb19maW5kX3Nsb3coaW50IGRldmljZWlkKQ0K
LXsNCi0JLyogQ2FsbGVkIHRvIGZpbmQgYSBESU8gZGV2aWNlIGJlZm9yZSB0
aGUgZnVsbCBidXMgc2NhbiBoYXMgcnVuLiAgQmFzaWNhbGx5DQotCSAqIG9u
bHkgdXNlZCBieSB0aGUgY29uc29sZSBkcml2ZXIuDQorCS8qIENhbGxlZCB0
byBmaW5kIGEgRElPIGRldmljZSBiZWZvcmUgdGhlIGZ1bGwgYnVzIHNjYW4g
aGFzIHJ1bi4NCisJICogT25seSB1c2VkIGJ5IHRoZSBjb25zb2xlIGRyaXZl
ci4NCiAJICovDQogCWludCBzY29kZSwgaWQ7DQogCXVfY2hhciBwcmlkLCBz
ZWNpZCwgaTsNCiAJbW1fc2VnbWVudF90IGZzOw0KIA0KLQlmb3IgKHNjb2Rl
ID0gMDsgc2NvZGUgPCBESU9fU0NNQVg7IHNjb2RlKyspDQotCXsNCisJZm9y
IChzY29kZSA9IDA7IHNjb2RlIDwgRElPX1NDTUFYOyBzY29kZSsrKSB7DQog
CQl2b2lkICp2YTsNCiAJCXVuc2lnbmVkIGxvbmcgcGE7DQogDQpAQCAtMTQy
LDggKzE0MCw3IEBAIHN0YXRpYyBpbnQgX19pbml0IGRpb19maW5kX3Nsb3co
aW50IGRldmkNCiAJCWZzID0gZ2V0X2ZzKCk7DQogCQlzZXRfZnMoS0VSTkVM
X0RTKTsNCiANCi0gICAgICAgICAgICAgICAgaWYgKGdldF91c2VyKGksICh1
bnNpZ25lZCBjaGFyICopdmEgKyBESU9fSURPRkYpKQ0KLQkJew0KKyAgICAg
ICAgICAgICAgICBpZiAoZ2V0X3VzZXIoaSwgKHVuc2lnbmVkIGNoYXIgKil2
YSArIERJT19JRE9GRikpIHsNCiAJCQlzZXRfZnMoZnMpOw0KIAkJCWlmIChz
Y29kZSA+PSBESU9JSV9TQ0JBU0UpDQogCQkJCWlvdW5tYXAodmEpOw0KQEAg
LTE1MywxNiArMTUwLDEzIEBAIHN0YXRpYyBpbnQgX19pbml0IGRpb19maW5k
X3Nsb3coaW50IGRldmkNCiAJCXNldF9mcyhmcyk7DQogCQlwcmlkID0gRElP
X0lEKHZhKTsNCiANCi0gICAgICAgICAgICAgICAgaWYgKERJT19ORUVEU1NF
Q0lEKHByaWQpKQ0KLSAgICAgICAgICAgICAgICB7DQorICAgICAgICAgICAg
ICAgIGlmIChESU9fTkVFRFNTRUNJRChwcmlkKSkgew0KICAgICAgICAgICAg
ICAgICAgICAgICAgIHNlY2lkID0gRElPX1NFQ0lEKHZhKTsNCiAgICAgICAg
ICAgICAgICAgICAgICAgICBpZCA9IERJT19FTkNPREVfSUQocHJpZCwgc2Vj
aWQpOw0KLSAgICAgICAgICAgICAgICB9DQotICAgICAgICAgICAgICAgIGVs
c2UNCisgICAgICAgICAgICAgICAgfSBlbHNlDQogCQkJaWQgPSBwcmlkOw0K
IA0KLQkJaWYgKGlkID09IGRldmljZWlkKQ0KLQkJew0KKwkJaWYgKGlkID09
IGRldmljZWlkKSB7DQogCQkJaWYgKHNjb2RlID49IERJT0lJX1NDQkFTRSkN
CiAJCQkJaW91bm1hcCh2YSk7DQogCQkJcmV0dXJuIHNjb2RlOw0KQEAgLTE3
MiwzNSArMTY2LDMyIEBAIHN0YXRpYyBpbnQgX19pbml0IGRpb19maW5kX3Ns
b3coaW50IGRldmkNCiAJcmV0dXJuIC0xOw0KIH0NCiANCi1pbnQgZGlvX2Zp
bmQoaW50IGRldmljZWlkKQ0KLXsNCi0JaWYgKGJsaXN0KQ0KLQl7DQotCQkv
KiBmYXN0IHdheSAqLw0KLQkJc3RydWN0IGRpb2JvYXJkICpiOw0KLQkJZm9y
IChiID0gYmxpc3Q7IGI7IGIgPSBiLT5uZXh0KQ0KLQkJCWlmIChiLT5pZCA9
PSBkZXZpY2VpZCAmJiBiLT5jb25maWd1cmVkID09IDApDQotCQkJCXJldHVy
biBiLT5zY29kZTsNCi0JCXJldHVybiAtMTsNCi0JfQ0KLQllbHNlDQotCXsN
Ci0JCXJldHVybiBkaW9fZmluZF9zbG93KGRldmljZWlkKTsNCi0JfQ0KLX0N
Ci0NCiAvKiBUaGlzIGlzIHRoZSBmdW5jdGlvbiB0aGF0IHNjYW5zIHRoZSBE
SU8gc3BhY2UgYW5kIHdvcmtzIG91dCB3aGF0DQogICogaGFyZHdhcmUgaXMg
YWN0dWFsbHkgcHJlc2VudC4NCiAgKi8NCiBzdGF0aWMgaW50IF9faW5pdCBk
aW9faW5pdCh2b2lkKQ0KIHsNCiAJaW50IHNjb2RlOw0KLQlzdHJ1Y3QgZGlv
Ym9hcmQgKmIsICpicHJldiA9IE5VTEw7DQogCW1tX3NlZ21lbnRfdCBmczsN
Ci0JY2hhciBpOw0KLSAgIA0KKwlpbnQgaTsNCisJc3RydWN0IGRpb19kZXYg
KmRldjsNCisNCisJaWYgKCFNQUNIX0lTX0hQMzAwKQ0KKwkJcmV0dXJuIDA7
DQorDQogICAgICAgICBwcmludGsoS0VSTl9JTkZPICJTY2FubmluZyBmb3Ig
RElPIGRldmljZXMuLi5cbiIpOw0KLSAgICAgICAgDQorDQorCS8qIEluaXRp
YWxpemUgdGhlIERJTyBidXMgKi8gDQorCUlOSVRfTElTVF9IRUFEKCZkaW9f
YnVzLmRldmljZXMpOw0KKwlzdHJjcHkoZGlvX2J1cy5kZXYuYnVzX2lkLCAi
ZGlvIik7DQorCWRldmljZV9yZWdpc3RlcigmZGlvX2J1cy5kZXYpOw0KKw0K
KwkvKiBSZXF1ZXN0IGFsbCByZXNvdXJjZXMgKi8NCisJZGlvX2J1cy5udW1f
cmVzb3VyY2VzID0gKGhwMzAwX21vZGVsID09IEhQXzMyMCA/IDEgOiAyKTsN
CisJZm9yIChpID0gMDsgaSA8IGRpb19idXMubnVtX3Jlc291cmNlczsgaSsr
KQ0KKwkJcmVxdWVzdF9yZXNvdXJjZSgmaW9tZW1fcmVzb3VyY2UsICZkaW9f
YnVzLnJlc291cmNlc1tpXSk7DQorDQorCS8qIFJlZ2lzdGVyIGFsbCBkZXZp
Y2VzICovDQogICAgICAgICBmb3IgKHNjb2RlID0gMDsgc2NvZGUgPCBESU9f
U0NNQVg7ICsrc2NvZGUpDQogICAgICAgICB7DQogICAgICAgICAgICAgICAg
IHVfY2hhciBwcmlkLCBzZWNpZCA9IDA7ICAgICAgICAvKiBwcmltYXJ5LCBz
ZWNvbmRhcnkgSUQgYnl0ZXMgKi8NCkBAIC0yMjMsOCArMjE0LDcgQEAgc3Rh
dGljIGludCBfX2luaXQgZGlvX2luaXQodm9pZCkNCiAJCWZzID0gZ2V0X2Zz
KCk7DQogCQlzZXRfZnMoS0VSTkVMX0RTKTsNCiANCi0gICAgICAgICAgICAg
ICAgaWYgKGdldF91c2VyKGksICh1bnNpZ25lZCBjaGFyICopdmEgKyBESU9f
SURPRkYpKQ0KLQkJew0KKyAgICAgICAgICAgICAgICBpZiAoZ2V0X3VzZXIo
aSwgKHVuc2lnbmVkIGNoYXIgKil2YSArIERJT19JRE9GRikpIHsNCiAJCQlz
ZXRfZnMoZnMpOw0KIAkJCWlmIChzY29kZSA+PSBESU9JSV9TQ0JBU0UpDQog
CQkJCWlvdW5tYXAodmEpOw0KQEAgLTIzNCw0MCArMjI0LDQwIEBAIHN0YXRp
YyBpbnQgX19pbml0IGRpb19pbml0KHZvaWQpDQogCQlzZXRfZnMoZnMpOw0K
IA0KICAgICAgICAgICAgICAgICAvKiBGb3VuZCBhIGJvYXJkLCBhbGxvY2F0
ZSBpdCBhbiBlbnRyeSBpbiB0aGUgbGlzdCAqLw0KLSAgICAgICAgICAgICAg
ICBiID0ga21hbGxvYyhzaXplb2Yoc3RydWN0IGRpb2JvYXJkKSwgR0ZQX0tF
Uk5FTCk7DQorCQlkZXYgPSBrbWFsbG9jKHNpemVvZihzdHJ1Y3QgZGlvX2Rl
diksIEdGUF9LRVJORUwpOw0KKwkJaWYgKCFkZXYpDQorCQkJcmV0dXJuIDA7
DQorDQorCQltZW1zZXQoZGV2LCAwLCBzaXplb2Yoc3RydWN0IGRpb19kZXYp
KTsNCisJCWRldi0+YnVzID0gJmRpb19idXM7DQorCQlkZXYtPmRldi5wYXJl
bnQgPSAmZGlvX2J1cy5kZXY7DQorCQlkZXYtPmRldi5idXMgPSAmZGlvX2J1
c190eXBlOw0KKwkJZGV2LT5zY29kZSA9IHNjb2RlOw0KKwkJZGV2LT5yZXNv
dXJjZS5zdGFydCA9IHBhOw0KKwkJZGV2LT5yZXNvdXJjZS5lbmQgPSBwYSAr
IERJT19TSVpFKHNjb2RlLCB2YSk7DQorCQlzcHJpbnRmKGRldi0+ZGV2LmJ1
c19pZCwiJTAyeCIsIHNjb2RlKTsNCiANCiAgICAgICAgICAgICAgICAgLyog
cmVhZCB0aGUgSUQgYnl0ZShzKSBhbmQgZW5jb2RlIGlmIG5lY2Vzc2FyeS4g
Ki8NCiAJCXByaWQgPSBESU9fSUQodmEpOw0KIA0KLSAgICAgICAgICAgICAg
ICBpZiAoRElPX05FRURTU0VDSUQocHJpZCkpDQotICAgICAgICAgICAgICAg
IHsNCisgICAgICAgICAgICAgICAgaWYgKERJT19ORUVEU1NFQ0lEKHByaWQp
KSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgc2VjaWQgPSBESU9fU0VD
SUQodmEpOw0KLSAgICAgICAgICAgICAgICAgICAgICAgIGItPmlkID0gRElP
X0VOQ09ERV9JRChwcmlkLCBzZWNpZCk7DQotICAgICAgICAgICAgICAgIH0N
Ci0gICAgICAgICAgICAgICAgZWxzZQ0KLSAgICAgICAgICAgICAgICAgICAg
ICAgIGItPmlkID0gcHJpZDsNCi0NCi0gICAgICAgICAgICAgICAgYi0+Y29u
ZmlndXJlZCA9IDA7DQotICAgICAgICAgICAgICAgIGItPnNjb2RlID0gc2Nv
ZGU7DQotICAgICAgICAgICAgICAgIGItPmlwbCA9IERJT19JUEwodmEpOw0K
LSAgICAgICAgICAgICAgICBiLT5uYW1lID0gZGlvX2dldG5hbWUoYi0+aWQp
Ow0KLSAgICAgICAgICAgICAgICBwcmludGsoS0VSTl9JTkZPICJzZWxlY3Qg
Y29kZSAlM2Q6IGlwbCAlZDogSUQgJTAyWCIsIGItPnNjb2RlLCBiLT5pcGws
IHByaWQpOw0KKyAgICAgICAgICAgICAgICAgICAgICAgIGRldi0+aWQgPSBE
SU9fRU5DT0RFX0lEKHByaWQsIHNlY2lkKTsNCisgICAgICAgICAgICAgICAg
fSBlbHNlDQorICAgICAgICAgICAgICAgICAgICAgICAgZGV2LT5pZCA9IHBy
aWQ7DQorDQorICAgICAgICAgICAgICAgIGRldi0+aXBsID0gRElPX0lQTCh2
YSk7DQorICAgICAgICAgICAgICAgIHN0cmNweShkZXYtPm5hbWUsZGlvX2dl
dG5hbWUoZGV2LT5pZCkpOw0KKyAgICAgICAgICAgICAgICBwcmludGsoS0VS
Tl9JTkZPICJzZWxlY3QgY29kZSAlM2Q6IGlwbCAlZDogSUQgJTAyWCIsIGRl
di0+c2NvZGUsIGRldi0+aXBsLCBwcmlkKTsNCiAgICAgICAgICAgICAgICAg
aWYgKERJT19ORUVEU1NFQ0lEKHByaWQpKQ0KICAgICAgICAgICAgICAgICAg
ICAgICAgIHByaW50aygiOiUwMlgiLCBzZWNpZCk7DQotICAgICAgICAgICAg
ICAgIHByaW50aygiOiAlc1xuIiwgYi0+bmFtZSk7DQorICAgICAgICAgICAg
ICAgIHByaW50aygiOiAlc1xuIiwgZGV2LT5uYW1lKTsNCiANCiAJCWlmIChz
Y29kZSA+PSBESU9JSV9TQ0JBU0UpDQogCQkJaW91bm1hcCh2YSk7DQotDQot
ICAgICAgICAgICAgICAgIGItPm5leHQgPSBOVUxMOw0KLQ0KLSAgICAgICAg
ICAgICAgICBpZiAoYnByZXYpDQotICAgICAgICAgICAgICAgICAgICAgICAg
YnByZXYtPm5leHQgPSBiOw0KLSAgICAgICAgICAgICAgICBlbHNlDQotICAg
ICAgICAgICAgICAgICAgICAgICAgYmxpc3QgPSBiOw0KLSAgICAgICAgICAg
ICAgICBicHJldiA9IGI7DQorCQlkZXZpY2VfcmVnaXN0ZXIoJmRldi0+ZGV2
KTsNCisJCWRpb19jcmVhdGVfc3lzZnNfZGV2X2ZpbGVzKGRldik7DQogICAg
ICAgICB9DQotDQogCXJldHVybiAwOw0KIH0NCiANCkBAIC0yNzgsNzcgKzI2
OCwxMiBAQCBzdWJzeXNfaW5pdGNhbGwoZGlvX2luaXQpOw0KICAqLw0KIHVu
c2lnbmVkIGxvbmcgZGlvX3Njb2RldG9waHlzYWRkcihpbnQgc2NvZGUpDQog
ew0KLSAgICAgICAgaWYgKHNjb2RlID49IERJT0lJX1NDQkFTRSkNCi0gICAg
ICAgIHsNCisgICAgICAgIGlmIChzY29kZSA+PSBESU9JSV9TQ0JBU0UpIHsN
CiAgICAgICAgICAgICAgICAgcmV0dXJuIChESU9JSV9CQVNFICsgKHNjb2Rl
IC0gMTMyKSAqIERJT0lJX0RFVlNJWkUpOw0KLSAgICAgICAgfQ0KLSAgICAg
ICAgZWxzZSBpZiAoc2NvZGUgPiBESU9fU0NNQVggfHwgc2NvZGUgPCAwKQ0K
KyAgICAgICAgfSBlbHNlIGlmIChzY29kZSA+IERJT19TQ01BWCB8fCBzY29k
ZSA8IDApDQogICAgICAgICAgICAgICAgIHJldHVybiAwOw0KICAgICAgICAg
ZWxzZSBpZiAoRElPX1NDSU5IT0xFKHNjb2RlKSkNCiAgICAgICAgICAgICAg
ICAgcmV0dXJuIDA7DQogDQogICAgICAgICByZXR1cm4gKERJT19CQVNFICsg
c2NvZGUgKiBESU9fREVWU0laRSk7DQogfQ0KLQ0KLWludCBkaW9fc2NvZGV0
b2lwbChpbnQgc2NvZGUpDQotew0KLSAgICAgICAgc3RydWN0IGRpb2JvYXJk
ICpiOw0KLSAgICAgICAgZm9yIChiID0gYmxpc3Q7IGI7IGIgPSBiLT5uZXh0
KQ0KLSAgICAgICAgICAgICAgICBpZiAoYi0+c2NvZGUgPT0gc2NvZGUpIA0K
LSAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KLQ0KLSAgICAgICAg
aWYgKCFiKQ0KLSAgICAgICAgew0KLSAgICAgICAgICAgICAgICBwcmludGso
S0VSTl9FUlIgImRpb19zY29kZXRvaXBsOiBiYWQgc2VsZWN0IGNvZGUgJWRc
biIsIHNjb2RlKTsNCi0gICAgICAgICAgICAgICAgcmV0dXJuIDA7DQotICAg
ICAgICB9DQotICAgICAgICBlbHNlDQotICAgICAgICAgICAgICAgIHJldHVy
biBiLT5pcGw7DQotfQ0KLQ0KLWNvbnN0IGNoYXIgKmRpb19zY29kZXRvbmFt
ZShpbnQgc2NvZGUpDQotew0KLSAgICAgICAgc3RydWN0IGRpb2JvYXJkICpi
Ow0KLSAgICAgICAgZm9yIChiID0gYmxpc3Q7IGI7IGIgPSBiLT5uZXh0KQ0K
LSAgICAgICAgICAgICAgICBpZiAoYi0+c2NvZGUgPT0gc2NvZGUpIA0KLSAg
ICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KLQ0KLSAgICAgICAgaWYg
KCFiKQ0KLSAgICAgICAgew0KLSAgICAgICAgICAgICAgICBwcmludGsoS0VS
Tl9FUlIgImRpb19zY29kZXRvbmFtZTogYmFkIHNlbGVjdCBjb2RlICVkXG4i
LCBzY29kZSk7DQotICAgICAgICAgICAgICAgIHJldHVybiBOVUxMOw0KLSAg
ICAgICAgfQ0KLSAgICAgICAgZWxzZQ0KLSAgICAgICAgICAgICAgICByZXR1
cm4gYi0+bmFtZTsNCi19DQotDQotdm9pZCBkaW9fY29uZmlnX2JvYXJkKGlu
dCBzY29kZSkNCi17DQotICAgICAgICBzdHJ1Y3QgZGlvYm9hcmQgKmI7DQot
ICAgICAgICBmb3IgKGIgPSBibGlzdDsgYjsgYiA9IGItPm5leHQpDQotICAg
ICAgICAgICAgICAgIGlmIChiLT5zY29kZSA9PSBzY29kZSkNCi0gICAgICAg
ICAgICAgICAgICAgICAgICBicmVhazsNCi0NCi0gICAgICAgIGlmICghYikg
DQotICAgICAgICAgICAgICAgIHByaW50ayhLRVJOX0VSUiAiZGlvX2NvbmZp
Z19ib2FyZDogYmFkIHNlbGVjdCBjb2RlICVkXG4iLCBzY29kZSk7DQotICAg
ICAgICBlbHNlIGlmIChiLT5jb25maWd1cmVkKQ0KLSAgICAgICAgICAgICAg
ICBwcmludGsoS0VSTl9XQVJOSU5HICJkaW9fY29uZmlnX2JvYXJkOiBib2Fy
ZCBhdCBzZWxlY3QgY29kZSAlZCBhbHJlYWR5IGNvbmZpZ3VyZWRcbiIsIHNj
b2RlKTsNCi0gICAgICAgIGVsc2UNCi0gICAgICAgICAgICAgICAgYi0+Y29u
ZmlndXJlZCA9IDE7DQotfQ0KLQ0KLXZvaWQgZGlvX3VuY29uZmlnX2JvYXJk
KGludCBzY29kZSkNCi17DQotICAgICAgICBzdHJ1Y3QgZGlvYm9hcmQgKmI7
DQotICAgICAgICBmb3IgKGIgPSBibGlzdDsgYjsgYiA9IGItPm5leHQpDQot
ICAgICAgICAgICAgICAgIGlmIChiLT5zY29kZSA9PSBzY29kZSkgDQotICAg
ICAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQotDQotICAgICAgICBpZiAo
IWIpIA0KLSAgICAgICAgICAgICAgICBwcmludGsoS0VSTl9FUlIgImRpb191
bmNvbmZpZ19ib2FyZDogYmFkIHNlbGVjdCBjb2RlICVkXG4iLCBzY29kZSk7
DQotICAgICAgICBlbHNlIGlmICghYi0+Y29uZmlndXJlZCkNCi0gICAgICAg
ICAgICAgICAgcHJpbnRrKEtFUk5fV0FSTklORyAiZGlvX3VuY29uZmlnX2Jv
YXJkOiBib2FyZCBhdCBzZWxlY3QgY29kZSAlZCBub3QgY29uZmlndXJlZFxu
IiwgDQotCQkgICAgICAgc2NvZGUpOw0KLSAgICAgICAgZWxzZSANCi0gICAg
ICAgICAgICAgICAgYi0+Y29uZmlndXJlZCA9IDA7DQotfQ0KZGlmZiAtdXBy
TiAtWCBkb250ZGlmZiBsaW51eC0yLjYub3JpZy9kcml2ZXJzL25ldC9TcGFj
ZS5jIGxpbnV4LTIuNi9kcml2ZXJzL25ldC9TcGFjZS5jDQotLS0gbGludXgt
Mi42Lm9yaWcvZHJpdmVycy9uZXQvU3BhY2UuYwkyMDA0LTA5LTI2IDIxOjEx
OjI0LjAwMDAwMDAwMCArMDIwMA0KKysrIGxpbnV4LTIuNi9kcml2ZXJzL25l
dC9TcGFjZS5jCTIwMDQtMDktMjQgMjM6MDE6MjYuMDAwMDAwMDAwICswMjAw
DQpAQCAtMjg0LDkgKzI4NCw2IEBAIHN0YXRpYyBzdHJ1Y3QgZGV2cHJvYmUy
IG02OGtfcHJvYmVzW10gX18NCiAjaWZkZWYgQ09ORklHX0FUQVJJX1BBTVNO
RVQJLyogQXRhcmkgUEFNc05ldCBFdGhlcm5ldCBib2FyZCAqLw0KIAl7cGFt
c25ldF9wcm9iZSwgMH0sDQogI2VuZGlmDQotI2lmZGVmIENPTkZJR19IUExB
TkNFCQkvKiBIUDMwMCBpbnRlcm5hbCBFdGhlcm5ldCAqLw0KLQl7aHBsYW5j
ZV9wcm9iZSwgMH0sDQotI2VuZGlmDQogI2lmZGVmIENPTkZJR19NVk1FMTQ3
X05FVAkvKiBNVk1FMTQ3IGludGVybmFsIEV0aGVybmV0ICovDQogCXttdm1l
MTQ3bGFuY2VfcHJvYmUsIDB9LA0KICNlbmRpZg0KZGlmZiAtdXByTiAtWCBk
b250ZGlmZiBsaW51eC0yLjYub3JpZy9kcml2ZXJzL25ldC9ocGxhbmNlLmMg
bGludXgtMi42L2RyaXZlcnMvbmV0L2hwbGFuY2UuYw0KLS0tIGxpbnV4LTIu
Ni5vcmlnL2RyaXZlcnMvbmV0L2hwbGFuY2UuYwkyMDA0LTA5LTI2IDIxOjEx
OjI0LjAwMDAwMDAwMCArMDIwMA0KKysrIGxpbnV4LTIuNi9kcml2ZXJzL25l
dC9ocGxhbmNlLmMJMjAwNC0wOS0yOSAwODozOTozOS4wMDAwMDAwMDAgKzAy
MDANCkBAIC00MCw4ICs0MCw3IEBADQogDQogLyogT3VyIHByaXZhdGUgZGF0
YSBzdHJ1Y3R1cmUgKi8NCiBzdHJ1Y3QgaHBsYW5jZV9wcml2YXRlIHsNCi0g
IHN0cnVjdCBsYW5jZV9wcml2YXRlIGxhbmNlOw0KLSAgdW5zaWduZWQgaW50
IHNjb2RlOw0KKwlzdHJ1Y3QgbGFuY2VfcHJpdmF0ZSBsYW5jZTsNCiB9Ow0K
IA0KIC8qIGZ1bmN0aW9uIHByb3RvdHlwZXMuLi4gVGhpcyBpcyBlYXN5IGJl
Y2F1c2UgYWxsIHRoZSBncm90IGlzIGluIHRoZQ0KQEAgLTQ5LDc2ICs0OCw3
MSBAQCBzdHJ1Y3QgaHBsYW5jZV9wcml2YXRlIHsNCiAgKiBwbHVzIGJvYXJk
LXNwZWNpZmljIGluaXQsIG9wZW4gYW5kIGNsb3NlIGFjdGlvbnMuIA0KICAq
IE9oLCBhbmQgd2UgbmVlZCB0byB0ZWxsIHRoZSBnZW5lcmljIGNvZGUgaG93
IHRvIHJlYWQgYW5kIHdyaXRlIExBTkNFIHJlZ2lzdGVycy4uLg0KICAqLw0K
LXN0YXRpYyB2b2lkIGhwbGFuY2VfaW5pdChzdHJ1Y3QgbmV0X2RldmljZSAq
ZGV2LCBpbnQgc2NvZGUpOw0KLXN0YXRpYyBpbnQgaHBsYW5jZV9vcGVuKHN0
cnVjdCBuZXRfZGV2aWNlICpkZXYpOw0KLXN0YXRpYyBpbnQgaHBsYW5jZV9j
bG9zZShzdHJ1Y3QgbmV0X2RldmljZSAqZGV2KTsNCitzdGF0aWMgaW50IF9f
ZGV2aW5pdCBocGxhbmNlX2luaXRfb25lKHN0cnVjdCBkaW9fZGV2ICpkLA0K
KwkJCQljb25zdCBzdHJ1Y3QgZGlvX2RldmljZV9pZCAqZW50KTsNCitzdGF0
aWMgdm9pZCBfX2RldmluaXQgaHBsYW5jZV9pbml0KHN0cnVjdCBuZXRfZGV2
aWNlICpkZXYsIA0KKwkJCQlzdHJ1Y3QgZGlvX2RldiAqZCk7DQorc3RhdGlj
IHZvaWQgX19kZXZleGl0IGhwbGFuY2VfcmVtb3ZlX29uZShzdHJ1Y3QgZGlv
X2RldiAqZCk7DQogc3RhdGljIHZvaWQgaHBsYW5jZV93cml0ZXJhcCh2b2lk
ICpwcml2LCB1bnNpZ25lZCBzaG9ydCB2YWx1ZSk7DQogc3RhdGljIHZvaWQg
aHBsYW5jZV93cml0ZXJkcCh2b2lkICpwcml2LCB1bnNpZ25lZCBzaG9ydCB2
YWx1ZSk7DQogc3RhdGljIHVuc2lnbmVkIHNob3J0IGhwbGFuY2VfcmVhZHJk
cCh2b2lkICpwcml2KTsNCitzdGF0aWMgaW50IGhwbGFuY2Vfb3BlbihzdHJ1
Y3QgbmV0X2RldmljZSAqZGV2KTsNCitzdGF0aWMgaW50IGhwbGFuY2VfY2xv
c2Uoc3RydWN0IG5ldF9kZXZpY2UgKmRldik7DQogDQotI2lmZGVmIE1PRFVM
RQ0KLXN0YXRpYyBzdHJ1Y3QgaHBsYW5jZV9wcml2YXRlICpyb290X2hwbGFu
Y2VfZGV2Ow0KLSNlbmRpZg0KK3N0YXRpYyBzdHJ1Y3QgZGlvX2RldmljZV9p
ZCBocGxhbmNlX2Rpb190YmxbXSA9IHsNCisJeyBESU9fSURfTEFOIH0sDQor
CXsgMCB9DQorfTsNCiANCi1zdGF0aWMgdm9pZCBjbGVhbnVwX2NhcmQoc3Ry
dWN0IG5ldF9kZXZpY2UgKmRldikNCi17DQotICAgICAgICBzdHJ1Y3QgaHBs
YW5jZV9wcml2YXRlICpscCA9IG5ldGRldl9wcml2KGRldik7DQotCWRpb191
bmNvbmZpZ19ib2FyZChscC0+c2NvZGUpOw0KLX0NCitzdGF0aWMgc3RydWN0
IGRpb19kcml2ZXIgaHBsYW5jZV9kcml2ZXIgPSB7DQorCS5uYW1lICAgICAg
PSAiaHBsYW5jZSIsDQorCS5pZF90YWJsZSAgPSBocGxhbmNlX2Rpb190Ymws
DQorCS5wcm9iZSAgICAgPSBocGxhbmNlX2luaXRfb25lLA0KKwkucmVtb3Zl
ICAgID0gX19kZXZleGl0X3AoaHBsYW5jZV9yZW1vdmVfb25lKSwNCit9Ow0K
IA0KIC8qIEZpbmQgYWxsIHRoZSBIUCBMYW5jZSBib2FyZHMgYW5kIGluaXRp
YWxpc2UgdGhlbS4uLiAqLw0KLXN0cnVjdCBuZXRfZGV2aWNlICogX19pbml0
IGhwbGFuY2VfcHJvYmUoaW50IHVuaXQpDQorc3RhdGljIGludCBfX2Rldmlu
aXQgaHBsYW5jZV9pbml0X29uZShzdHJ1Y3QgZGlvX2RldiAqZCwNCisJCQkJ
Y29uc3Qgc3RydWN0IGRpb19kZXZpY2VfaWQgKmVudCkNCiB7DQogCXN0cnVj
dCBuZXRfZGV2aWNlICpkZXY7DQotDQotICAgICAgICBpZiAoIU1BQ0hfSVNf
SFAzMDApDQotICAgICAgICAgICAgICAgIHJldHVybiBFUlJfUFRSKC1FTk9E
RVYpOw0KKwlpbnQgZXJyOw0KIA0KIAlkZXYgPSBhbGxvY19ldGhlcmRldihz
aXplb2Yoc3RydWN0IGhwbGFuY2VfcHJpdmF0ZSkpOw0KIAlpZiAoIWRldikN
Ci0JCXJldHVybiBFUlJfUFRSKC1FTk9NRU0pOw0KKwkJcmV0dXJuIC1FTk9N
RU07DQogDQotCWlmICh1bml0ID49IDApIHsNCi0JCXNwcmludGYoZGV2LT5u
YW1lLCAiZXRoJWQiLCB1bml0KTsNCi0JCW5ldGRldl9ib290X3NldHVwX2No
ZWNrKGRldik7DQotCX0NCisJaWYgKCFyZXF1ZXN0X21lbV9yZWdpb24oZC0+
cmVzb3VyY2Uuc3RhcnQsIGQtPnJlc291cmNlLmVuZC1kLT5yZXNvdXJjZS5z
dGFydCwgZC0+bmFtZSkpDQorCQlyZXR1cm4gLUVCVVNZOw0KIA0KIAlTRVRf
TU9EVUxFX09XTkVSKGRldik7DQogICAgICAgICANCi0gICAgICAgIC8qIElz
bid0IERJTyBuaWNlPyAqLw0KLSAgICAgICAgZm9yKDs7KQ0KLSAgICAgICAg
ew0KLSAgICAgICAgICAgICAgICBpbnQgc2NvZGUgPSBkaW9fZmluZChESU9f
SURfTEFOKTsNCi0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIA0K
LSAgICAgICAgICAgICAgICBpZiAoc2NvZGUgPCAwKQ0KLSAgICAgICAgICAg
ICAgICAgICAgICAgIGJyZWFrOw0KLSAgICAgICAgICAgICAgICANCi0JCWRp
b19jb25maWdfYm9hcmQoc2NvZGUpOw0KLSAgICAgICAgICAgICAgICBocGxh
bmNlX2luaXQoZGV2LCBzY29kZSk7DQotCQlpZiAoIXJlZ2lzdGVyX25ldGRl
dihkZXYpKSB7DQotI2lmZGVmIE1PRFVMRQ0KLQkJCXN0cnVjdCBocGxhbmNl
X3ByaXZhdGUgKmxwID0gbmV0ZGV2X3ByaXYoZGV2KTsNCi0JCQlscC0+bmV4
dF9tb2R1bGUgPSByb290X2hwbGFuY2VfZGV2Ow0KLQkJCXJvb3RfaHBsYW5j
ZV9kZXYgPSBscDsNCi0jZW5kaWYNCi0JCQlyZXR1cm4gZGV2Ow0KLQkJfQ0K
LQkJY2xlYW51cF9jYXJkKGRldik7DQotICAgICAgICB9DQorCWhwbGFuY2Vf
aW5pdChkZXYsIGQpOw0KKwllcnIgPSByZWdpc3Rlcl9uZXRkZXYoZGV2KTsN
CisJaWYgKGVycikgew0KKwkJZnJlZV9uZXRkZXYoZGV2KTsNCisJCXJldHVy
biBlcnI7DQorCX0NCisJZGlvX3NldF9kcnZkYXRhKGQsIGRldik7DQorCXJl
dHVybiAwOw0KK30NCisNCitzdGF0aWMgdm9pZCBfX2RldmV4aXQgaHBsYW5j
ZV9yZW1vdmVfb25lKHN0cnVjdCBkaW9fZGV2ICpkKQ0KK3sNCisJc3RydWN0
IG5ldF9kZXZpY2UgKmRldiA9IGRpb19nZXRfZHJ2ZGF0YShkKTsNCisNCisJ
dW5yZWdpc3Rlcl9uZXRkZXYoZGV2KTsNCiAJZnJlZV9uZXRkZXYoZGV2KTsN
Ci0JcmV0dXJuIEVSUl9QVFIoLUVOT0RFVik7DQogfQ0KIA0KLS8qIEluaXRp
YWxpc2UgYSBzaW5nbGUgbGFuY2UgYm9hcmQgYXQgdGhlIGdpdmVuIHNlbGVj
dCBjb2RlICovDQotc3RhdGljIHZvaWQgX19pbml0IGhwbGFuY2VfaW5pdChz
dHJ1Y3QgbmV0X2RldmljZSAqZGV2LCBpbnQgc2NvZGUpDQorLyogSW5pdGlh
bGlzZSBhIHNpbmdsZSBsYW5jZSBib2FyZCBhdCB0aGUgZ2l2ZW4gRElPIGRl
dmljZSAqLw0KK3N0YXRpYyB2b2lkIF9faW5pdCBocGxhbmNlX2luaXQoc3Ry
dWN0IG5ldF9kZXZpY2UgKmRldiwgc3RydWN0IGRpb19kZXYgKmQpDQogew0K
LSAgICAgICAgY29uc3QgY2hhciAqbmFtZSA9IGRpb19zY29kZXRvbmFtZShz
Y29kZSk7DQotCXVuc2lnbmVkIGxvbmcgcGEgPSBkaW9fc2NvZGV0b3BoeXNh
ZGRyKHNjb2RlKTsNCi0gICAgICAgIHVuc2lnbmVkIGxvbmcgdmEgPSAocGEg
KyBESU9fVklSQUREUkJBU0UpOw0KKyAgICAgICAgdW5zaWduZWQgbG9uZyB2
YSA9IChkLT5yZXNvdXJjZS5zdGFydCArIERJT19WSVJBRERSQkFTRSk7DQog
ICAgICAgICBzdHJ1Y3QgaHBsYW5jZV9wcml2YXRlICpscDsNCiAgICAgICAg
IGludCBpOw0KICAgICAgICAgDQotICAgICAgICBwcmludGsoS0VSTl9JTkZP
ICIlczogJXM7IHNlbGVjdCBjb2RlICVkLCBhZGRyIiwgZGV2LT5uYW1lLCBu
YW1lLCBzY29kZSk7DQorICAgICAgICBwcmludGsoS0VSTl9JTkZPICIlczog
JXM7IHNlbGVjdCBjb2RlICVkLCBhZGRyIiwgZGV2LT5uYW1lLCBkLT5uYW1l
LCBkLT5zY29kZSk7DQogDQogICAgICAgICAvKiByZXNldCB0aGUgYm9hcmQg
Ki8NCiAgICAgICAgIG91dF84KHZhK0RJT19JRE9GRiwgMHhmZik7DQpAQCAt
MTM2LDggKzEzMCw3IEBAIHN0YXRpYyB2b2lkIF9faW5pdCBocGxhbmNlX2lu
aXQoc3RydWN0IG4NCiAgICAgICAgIGRldi0+c2V0X211bHRpY2FzdF9saXN0
ID0gJmxhbmNlX3NldF9tdWx0aWNhc3Q7DQogICAgICAgICBkZXYtPmRtYSA9
IDA7DQogICAgICAgICANCi0gICAgICAgIGZvciAoaT0wOyBpPDY7IGkrKykN
Ci0gICAgICAgIHsNCisgICAgICAgIGZvciAoaT0wOyBpPDY7IGkrKykgew0K
ICAgICAgICAgICAgICAgICAvKiBUaGUgTlZSQU0gaG9sZHMgb3VyIGV0aGVy
bmV0IGFkZHJlc3MsIG9uZSBuaWJibGUgcGVyIGJ5dGUsDQogICAgICAgICAg
ICAgICAgICAqIGF0IGJ5dGVzIE5WUkFNT0ZGKzEsMyw1LDcsOS4uLg0KICAg
ICAgICAgICAgICAgICAgKi8NCkBAIC0xNDcsMTIgKzE0MCwxMiBAQCBzdGF0
aWMgdm9pZCBfX2luaXQgaHBsYW5jZV9pbml0KHN0cnVjdCBuDQogICAgICAg
ICB9DQogICAgICAgICANCiAgICAgICAgIGxwID0gbmV0ZGV2X3ByaXYoZGV2
KTsNCi0gICAgICAgIGxwLT5sYW5jZS5uYW1lID0gKGNoYXIqKW5hbWU7ICAg
ICAgICAgICAgICAgICAgIC8qIGRpc2NhcmRzIGNvbnN0LCBzaHV0IHVwIGdj
YyAqLw0KKyAgICAgICAgbHAtPmxhbmNlLm5hbWUgPSAoY2hhciopZC0+bmFt
ZTsgICAgICAgICAgICAgICAgLyogZGlzY2FyZHMgY29uc3QsIHNodXQgdXAg
Z2NjICovDQogICAgICAgICBscC0+bGFuY2UuYmFzZSA9IHZhOw0KICAgICAg
ICAgbHAtPmxhbmNlLmluaXRfYmxvY2sgPSAoc3RydWN0IGxhbmNlX2luaXRf
YmxvY2sgKikodmEgKyBIUExBTkNFX01FTU9GRik7IC8qIENQVSBhZGRyICov
DQogICAgICAgICBscC0+bGFuY2UubGFuY2VfaW5pdF9ibG9jayA9IDA7ICAg
ICAgICAgICAgICAgICAvKiBMQU5DRSBhZGRyIG9mIHNhbWUgUkFNICovDQog
ICAgICAgICBscC0+bGFuY2UuYnVzbWFzdGVyX3JlZ3ZhbCA9IExFX0MzX0JT
V1A7ICAgICAgICAvKiB3ZSdyZSBiaWdlbmRpYW4gKi8NCi0gICAgICAgIGxw
LT5sYW5jZS5pcnEgPSBkaW9fc2NvZGV0b2lwbChzY29kZSk7DQorICAgICAg
ICBscC0+bGFuY2UuaXJxID0gZC0+aXBsOw0KICAgICAgICAgbHAtPmxhbmNl
LndyaXRlcmFwID0gaHBsYW5jZV93cml0ZXJhcDsNCiAgICAgICAgIGxwLT5s
YW5jZS53cml0ZXJkcCA9IGhwbGFuY2Vfd3JpdGVyZHA7DQogICAgICAgICBs
cC0+bGFuY2UucmVhZHJkcCA9IGhwbGFuY2VfcmVhZHJkcDsNCkBAIC0xNjAs
NyArMTUzLDYgQEAgc3RhdGljIHZvaWQgX19pbml0IGhwbGFuY2VfaW5pdChz
dHJ1Y3Qgbg0KICAgICAgICAgbHAtPmxhbmNlLmxhbmNlX2xvZ190eF9idWZz
ID0gTEFOQ0VfTE9HX1RYX0JVRkZFUlM7DQogICAgICAgICBscC0+bGFuY2Uu
cnhfcmluZ19tb2RfbWFzayA9IFJYX1JJTkdfTU9EX01BU0s7DQogICAgICAg
ICBscC0+bGFuY2UudHhfcmluZ19tb2RfbWFzayA9IFRYX1JJTkdfTU9EX01B
U0s7DQotICAgICAgICBscC0+c2NvZGUgPSBzY29kZTsNCiAJcHJpbnRrKCIs
IGlycSAlZFxuIiwgbHAtPmxhbmNlLmlycSk7DQogfQ0KIA0KQEAgLTIxNiwy
NyArMjA4LDE3IEBAIHN0YXRpYyBpbnQgaHBsYW5jZV9jbG9zZShzdHJ1Y3Qg
bmV0X2RldmkNCiAgICAgICAgIHJldHVybiAwOw0KIH0NCiANCi0jaWZkZWYg
TU9EVUxFDQotTU9EVUxFX0xJQ0VOU0UoIkdQTCIpOw0KLWludCBpbml0X21v
ZHVsZSh2b2lkKQ0KK2ludCBfX2luaXQgaHBsYW5jZV9pbml0X21vZHVsZSh2
b2lkKQ0KIHsNCi0JaW50IGZvdW5kID0gMDsNCi0Jd2hpbGUgKCFJU19FUlIo
aHBsYW5jZV9wcm9iZSgtMSkpKQ0KLQkJZm91bmQrKzsNCi0JcmV0dXJuIGZv
dW5kID8gMCA6IC1FTk9ERVY7DQorCXJldHVybiBkaW9fbW9kdWxlX2luaXQo
JmhwbGFuY2VfZHJpdmVyKTsNCiB9DQogDQotdm9pZCBjbGVhbnVwX21vZHVs
ZSh2b2lkKQ0KK3ZvaWQgX19leGl0IGhwbGFuY2VfY2xlYW51cF9tb2R1bGUo
dm9pZCkNCiB7DQotICAgICAgICAvKiBXYWxrIHRoZSBjaGFpbiBvZiBkZXZp
Y2VzLCB1bnJlZ2lzdGVyaW5nIHRoZW0gKi8NCi0gICAgICAgIHN0cnVjdCBo
cGxhbmNlX3ByaXZhdGUgKmxwOw0KLSAgICAgICAgd2hpbGUgKHJvb3RfaHBs
YW5jZV9kZXYpIHsNCi0gICAgICAgICAgICAgICAgbHAgPSByb290X2hwbGFu
Y2VfZGV2LT5uZXh0X21vZHVsZTsNCi0gICAgICAgICAgICAgICAgdW5yZWdp
c3Rlcl9uZXRkZXYocm9vdF9sYW5jZV9kZXYtPmRldik7DQotICAgICAgICAg
ICAgICAgIGNsZWFudXBfY2FyZChyb290X2xhbmNlX2Rldi0+ZGV2KTsNCi0g
ICAgICAgICAgICAgICAgZnJlZV9uZXRkZXYocm9vdF9sYW5jZV9kZXYtPmRl
dik7DQotICAgICAgICAgICAgICAgIHJvb3RfbGFuY2VfZGV2ID0gbHA7DQot
ICAgICAgICB9DQorICAgICAgICBkaW9fdW5yZWdpc3Rlcl9kcml2ZXIoJmhw
bGFuY2VfZHJpdmVyKTsNCiB9DQogDQotI2VuZGlmIC8qIE1PRFVMRSAqLw0K
K21vZHVsZV9pbml0KGhwbGFuY2VfaW5pdF9tb2R1bGUpOw0KK21vZHVsZV9l
eGl0KGhwbGFuY2VfY2xlYW51cF9tb2R1bGUpOw0KKw0KK01PRFVMRV9MSUNF
TlNFKCJHUEwiKTsNCmRpZmYgLXVwck4gLVggZG9udGRpZmYgbGludXgtMi42
Lm9yaWcvZHJpdmVycy9zZXJpYWwvODI1MF9ocDMwMC5jIGxpbnV4LTIuNi9k
cml2ZXJzL3NlcmlhbC84MjUwX2hwMzAwLmMNCi0tLSBsaW51eC0yLjYub3Jp
Zy9kcml2ZXJzL3NlcmlhbC84MjUwX2hwMzAwLmMJMjAwNC0wOS0yNiAyMTox
MToyNi4wMDAwMDAwMDAgKzAyMDANCisrKyBsaW51eC0yLjYvZHJpdmVycy9z
ZXJpYWwvODI1MF9ocDMwMC5jCTIwMDQtMDktMjkgMDg6NDA6MjcuMDAwMDAw
MDAwICswMjAwDQpAQCAtMjIsMTcgKzIyLDQwIEBADQogI3dhcm5pbmcgQ09O
RklHXzgyNTAgZGVmaW5lZCBidXQgbmVpdGhlciBDT05GSUdfSFBEQ0Egbm9y
IENPTkZJR19IUEFQQ0kgZGVmaW5lZCwgYXJlIHlvdSBzdXJlPw0KICNlbmRp
Zg0KIA0KKyNpZmRlZiBDT05GSUdfSFBBUENJDQogc3RydWN0IGhwMzAwX3Bv
cnQNCiB7DQogCXN0cnVjdCBocDMwMF9wb3J0ICpuZXh0OwkvKiBuZXh0IHBv
cnQgKi8NCi0JdW5zaWduZWQgbG9uZyBkaW9fYmFzZTsJCS8qIHN0YXJ0IG9m
IERJTyByZWdpc3RlcnMgKi8NCi0JaW50IHNjb2RlOyAgICAgICAgICAgICAg
ICAgICAgICAvKiBzZWxlY3QgY29kZSBvZiB0aGlzIGJvYXJkICovDQogCWlu
dCBsaW5lOwkJCS8qIGxpbmUgKHR0eSkgbnVtYmVyICovDQogfTsNCiANCi1l
eHRlcm4gaW50IGhwMzAwX3VhcnRfc2NvZGU7DQotDQogc3RhdGljIHN0cnVj
dCBocDMwMF9wb3J0ICpocDMwMF9wb3J0czsNCisjZW5kaWYNCisNCisjaWZk
ZWYgQ09ORklHX0hQRENBDQorDQorc3RhdGljIGludCBfX2RldmluaXQgaHBk
Y2FfaW5pdF9vbmUoc3RydWN0IGRpb19kZXYgKmQsDQorICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICBjb25zdCBzdHJ1Y3QgZGlvX2RldmljZV9p
ZCAqZW50KTsNCitzdGF0aWMgdm9pZCBfX2RldmV4aXQgaHBkY2FfcmVtb3Zl
X29uZShzdHJ1Y3QgZGlvX2RldiAqZCk7DQorDQorc3RhdGljIHN0cnVjdCBk
aW9fZGV2aWNlX2lkIGhwZGNhX2Rpb190YmxbXSA9IHsNCisJeyBESU9fSURf
RENBMCB9LA0KKwl7IERJT19JRF9EQ0EwUkVNIH0sDQorCXsgRElPX0lEX0RD
QTEgfSwNCisJeyBESU9fSURfRENBMVJFTSB9LA0KKwl7IDAgfQ0KK307DQor
DQorc3RhdGljIHN0cnVjdCBkaW9fZHJpdmVyIGhwZGNhX2RyaXZlciA9IHsN
CisJLm5hbWUgICAgICA9ICJocGRjYSIsDQorCS5pZF90YWJsZSAgPSBocGRj
YV9kaW9fdGJsLA0KKwkucHJvYmUgICAgID0gaHBkY2FfaW5pdF9vbmUsDQor
CS5yZW1vdmUgICAgPSBfX2RldmV4aXRfcChocGRjYV9yZW1vdmVfb25lKSwN
Cit9Ow0KKw0KKyNlbmRpZg0KKw0KK2V4dGVybiBpbnQgaHAzMDBfdWFydF9z
Y29kZTsNCiANCiAvKiBPZmZzZXQgdG8gVUFSVCByZWdpc3RlcnMgZnJvbSBi
YXNlIG9mIERDQSAqLw0KICNkZWZpbmUgVUFSVF9PRkZTRVQJMTcNCkBAIC03
Myw3ICs5NiwxMCBAQCBpbnQgX19pbml0IGhwMzAwX3NldHVwX3NlcmlhbF9j
b25zb2xlKHZvDQogDQogCW1lbXNldCgmcG9ydCwgMCwgc2l6ZW9mKHBvcnQp
KTsNCiANCi0JaWYgKGhwMzAwX3VhcnRfc2NvZGUgPCAwIHx8IGhwMzAwX3Vh
cnRfc2NvZGUgPiAyNTYpDQorCWlmIChocDMwMF91YXJ0X3Njb2RlIDwgMCB8
fCBocDMwMF91YXJ0X3Njb2RlID4gRElPX1NDTUFYKQ0KKwkJcmV0dXJuIDA7
DQorDQorCWlmIChESU9fU0NJTkhPTEUoaHAzMDBfdWFydF9zY29kZSkpDQog
CQlyZXR1cm4gMDsNCiANCiAJc2NvZGUgPSBocDMwMF91YXJ0X3Njb2RlOw0K
QEAgLTg0LDggKzExMCw3IEBAIGludCBfX2luaXQgaHAzMDBfc2V0dXBfc2Vy
aWFsX2NvbnNvbGUodm8NCiAJcG9ydC50eXBlID0gUE9SVF9VTktOT1dOOw0K
IA0KIAkvKiBDaGVjayBmb3IgQVBDSSBjb25zb2xlICovDQotCWlmIChzY29k
ZSA9PSAyNTYpDQotCXsNCisJaWYgKHNjb2RlID09IDI1Nikgew0KICNpZmRl
ZiBDT05GSUdfSFBBUENJDQogCQlwcmludGsoS0VSTl9JTkZPICJTZXJpYWwg
Y29uc29sZSBpcyBIUCBBUENJIDFcbiIpOw0KIA0KQEAgLTk5LDggKzEyNCw3
IEBAIGludCBfX2luaXQgaHAzMDBfc2V0dXBfc2VyaWFsX2NvbnNvbGUodm8N
CiAJCXJldHVybiAwOw0KICNlbmRpZg0KIAl9DQotCWVsc2UNCi0Jew0KKwll
bHNlIHsNCiAjaWZkZWYgQ09ORklHX0hQRENBDQogCQl1bnNpZ25lZCBsb25n
IHBhID0gZGlvX3Njb2RldG9waHlzYWRkcihzY29kZSk7DQogCQlpZiAoIXBh
KSB7DQpAQCAtMTM1LDQ3ICsxNTksODkgQEAgaW50IF9faW5pdCBocDMwMF9z
ZXR1cF9zZXJpYWxfY29uc29sZSh2bw0KIH0NCiAjZW5kaWYgLyogQ09ORklH
X1NFUklBTF84MjUwX0NPTlNPTEUgKi8NCiANCisjaWZkZWYgQ09ORklHX0hQ
RENBDQorc3RhdGljIGludCBfX2RldmluaXQgaHBkY2FfaW5pdF9vbmUoc3Ry
dWN0IGRpb19kZXYgKmQsDQorICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICBjb25zdCBzdHJ1Y3QgZGlvX2RldmljZV9pZCAqZW50KQ0KK3sNCisJ
c3RydWN0IHNlcmlhbF9zdHJ1Y3Qgc2VyaWFsX3JlcTsNCisJaW50IGxpbmU7
DQorDQorI2lmZGVmIENPTkZJR19TRVJJQUxfODI1MF9DT05TT0xFDQorCWlm
IChocDMwMF91YXJ0X3Njb2RlID09IGQtPnNjb2RlKSB7DQorCQkvKiBBbHJl
YWR5IGdvdCBpdC4gKi8NCisJCXJldHVybiAwOw0KKwl9DQorI2VuZGlmDQor
CW1lbXNldCgmc2VyaWFsX3JlcSwgMCwgc2l6ZW9mKHN0cnVjdCBzZXJpYWxf
c3RydWN0KSk7DQorDQorCS8qIE1lbW9yeSBtYXBwZWQgSS9PICovDQorCXNl
cmlhbF9yZXEuaW9fdHlwZSA9IFNFUklBTF9JT19NRU07DQorCXNlcmlhbF9y
ZXEuZmxhZ3MgPSBVUEZfU0tJUF9URVNUIHwgVVBGX1NIQVJFX0lSUSB8IFVQ
Rl9CT09UX0FVVE9DT05GOw0KKwlzZXJpYWxfcmVxLmlycSA9IGQtPmlwbDsN
CisJc2VyaWFsX3JlcS5iYXVkX2Jhc2UgPSBIUERDQV9CQVVEX0JBU0U7DQor
CXNlcmlhbF9yZXEuaW9tYXBfYmFzZSA9IChkLT5yZXNvdXJjZS5zdGFydCAr
IFVBUlRfT0ZGU0VUKTsNCisJc2VyaWFsX3JlcS5pb21lbV9iYXNlID0gKGNo
YXIgKikoc2VyaWFsX3JlcS5pb21hcF9iYXNlICsgRElPX1ZJUkFERFJCQVNF
KTsNCisJc2VyaWFsX3JlcS5pb21lbV9yZWdfc2hpZnQgPSAxOw0KKwlsaW5l
ID0gcmVnaXN0ZXJfc2VyaWFsKCZzZXJpYWxfcmVxKTsNCisNCisJaWYgKGxp
bmUgPCAwKSB7DQorCQlwcmludGsoS0VSTl9OT1RJQ0UgIjgyNTBfaHAzMDA6
IHJlZ2lzdGVyX3NlcmlhbCgpIERDQSBzY29kZSAlZCINCisJCSAgICAgICAi
IGlycSAlZCBmYWlsZWRcbiIsIGQtPnNjb2RlLCBzZXJpYWxfcmVxLmlycSk7
DQorCQlyZXR1cm4gLUVOT01FTTsNCisJfQ0KKw0KKwkvKiBFbmFibGUgYm9h
cmQtaW50ZXJydXB0cyAqLw0KKwlvdXRfOChkLT5yZXNvdXJjZS5zdGFydCAr
IERJT19WSVJBRERSQkFTRSArIERDQV9JQywgRENBX0lDX0lFKTsNCisJZGlv
X3NldF9kcnZkYXRhKGQsICh2b2lkICopbGluZSk7DQorDQorCS8qIFJlc2V0
IHRoZSBEQ0EgKi8NCisJb3V0XzgoZC0+cmVzb3VyY2Uuc3RhcnQgKyBESU9f
VklSQUREUkJBU0UgKyBEQ0FfSUQsIDB4ZmYpOw0KKwl1ZGVsYXkoMTAwKTsN
CisNCisJcmV0dXJuIDA7DQorfQ0KKyNlbmRpZg0KKw0KIHN0YXRpYyBpbnQg
X19pbml0IGhwMzAwXzgyNTBfaW5pdCh2b2lkKQ0KIHsNCiAJc3RhdGljIGlu
dCBjYWxsZWQgPSAwOw0KLSNpZmRlZiBDT05GSUdfSFBEQ0ENCi0JaW50IHNj
b2RlOw0KLSNlbmRpZg0KLQlpbnQgbGluZSwgbnVtX3BvcnRzOw0KKwlpbnQg
bnVtX3BvcnRzOw0KKyNpZmRlZiBDT05GSUdfSFBBUENJDQorCWludCBsaW5l
Ow0KIAl1bnNpZ25lZCBsb25nIGJhc2U7DQogCXN0cnVjdCBzZXJpYWxfc3Ry
dWN0IHNlcmlhbF9yZXE7DQogCXN0cnVjdCBocDMwMF9wb3J0ICpwb3J0Ow0K
LQ0KKwlpbnQgaTsNCisjZW5kaWYNCiAJaWYgKGNhbGxlZCkNCiAJCXJldHVy
biAtRU5PREVWOw0KIAljYWxsZWQgPSAxOw0KLQludW1fcG9ydHMgPSAwOw0K
IA0KLQlpZiAoIU1BQ0hfSVNfSFAzMDApIHsNCisJaWYgKCFNQUNIX0lTX0hQ
MzAwKQ0KIAkJcmV0dXJuIC1FTk9ERVY7DQotCX0NCiANCi0jaWZkZWYgQ09O
RklHX0hQRENBDQotCXdoaWxlICgxKSB7DQotICAgICAgICAgICAgICAgIC8q
IFdlIGRldGVjdCBib2FyZHMgYnkgbG9va2luZyBmb3IgRElPIGJvYXJkcyB3
aGljaCBtYXRjaCBhDQotICAgICAgICAgICAgICAgICAqIGdpdmVuIHN1YnNl
dCBvZiBJRHMuIGRpb19maW5kKCkgcmV0dXJucyB0aGUgYm9hcmQncyBzY2Fu
Y29kZS4NCi0gICAgICAgICAgICAgICAgICogVGhlIHNjYW5jb2RlIHRvIHBo
eXNhZGRyIG1hcHBpbmcgaXMgYSBwcm9wZXJ0eSBvZiB0aGUgaGFyZHdhcmUs
DQotICAgICAgICAgICAgICAgICAqIGFzIGlzIHRoZSBzY2FuY29kZSB0byBJ
UEwgKGludGVycnVwdCBwcmlvcml0eSkgbWFwcGluZy4NCi0gICAgICAgICAg
ICAgICAgICovDQotICAgICAgICAgICAgICAgIHNjb2RlID0gZGlvX2ZpbmQo
RElPX0lEX0RDQTApOw0KLSAgICAgICAgICAgICAgICBpZiAoc2NvZGUgPCAw
KQ0KLQkJCXNjb2RlID0gZGlvX2ZpbmQoRElPX0lEX0RDQTBSRU0pOw0KLSAg
ICAgICAgICAgICAgICBpZiAoc2NvZGUgPCAwKQ0KLQkJCXNjb2RlID0gZGlv
X2ZpbmQoRElPX0lEX0RDQTEpOw0KLSAgICAgICAgICAgICAgICBpZiAoc2Nv
ZGUgPCAwKQ0KLQkJCXNjb2RlID0gZGlvX2ZpbmQoRElPX0lEX0RDQTFSRU0p
Ow0KLSAgICAgICAgICAgICAgICBpZiAoc2NvZGUgPCAwKQ0KLQkJCWJyZWFr
OwkJLyogbm8sIG5vbmUgYXQgYWxsICovDQorCW51bV9wb3J0cyA9IDA7DQog
DQorI2lmZGVmIENPTkZJR19IUERDQQ0KKwlpZiAoZGlvX21vZHVsZV9pbml0
KCZocGRjYV9kcml2ZXIpID09IDApDQorCQludW1fcG9ydHMrKzsNCisjZW5k
aWYNCisjaWZkZWYgQ09ORklHX0hQQVBDSQ0KKwlpZiAoaHAzMDBfbW9kZWwg
PCBIUF80MDApIHsNCisJCWlmICghbnVtX3BvcnRzKQ0KKwkJCXJldHVybiAt
RU5PREVWOw0KKwkJcmV0dXJuIDA7DQorCX0NCisJLyogVGhlc2UgbW9kZWxz
IGhhdmUgdGhlIEZyb2RvIGNoaXAuDQorCSAqIFBvcnQgMCBpcyByZXNlcnZl
ZCBmb3IgdGhlIEFwb2xsbyBEb21haW4ga2V5Ym9hcmQuDQorCSAqIFBvcnQg
MSBpcyBlaXRoZXIgdGhlIGNvbnNvbGUgb3IgdGhlIERDQS4NCisJICovDQor
CWZvciAoaSA9IDE7IGkgPCA0OyBpKyspIHsNCisJCS8qIFBvcnQgMSBpcyB0
aGUgY29uc29sZSBvbiBhIDQyNWUsIG9uIG90aGVyIG1hY2hpbmVzIGl0J3Mg
bWFwcGVkIHRvDQorCQkgKiBEQ0EuDQorCQkgKi8NCiAjaWZkZWYgQ09ORklH
X1NFUklBTF84MjUwX0NPTlNPTEUNCi0JCWlmIChocDMwMF91YXJ0X3Njb2Rl
ID09IHNjb2RlKSB7DQotCQkJLyogQWxyZWFkeSBnb3QgaXQgKi8NCi0JCQlk
aW9fY29uZmlnX2JvYXJkKHNjb2RlKTsNCisJCWlmIChpID09IDEpIHsNCiAJ
CQljb250aW51ZTsNCiAJCX0NCiAjZW5kaWYNCkBAIC0xODYsMTA5ICsyNTIs
MzMgQEAgc3RhdGljIGludCBfX2luaXQgaHAzMDBfODI1MF9pbml0KHZvaWQp
DQogCQkJcmV0dXJuIC1FTk9NRU07DQogDQogCQltZW1zZXQoJnNlcmlhbF9y
ZXEsIDAsIHNpemVvZihzdHJ1Y3Qgc2VyaWFsX3N0cnVjdCkpOw0KLQkJDQot
CQliYXNlID0gZGlvX3Njb2RldG9waHlzYWRkcihzY29kZSk7DQogDQotICAg
ICAgICAgICAgICAgIC8qIElmIHdlIHdhbnQgdG8gdGVsbCB0aGUgRElPIGNv
ZGUgdGhhdCB0aGlzIGJvYXJkIGlzIGNvbmZpZ3VyZWQsDQotICAgICAgICAg
ICAgICAgICAqIHdlIHNob3VsZCBkbyB0aGF0IGhlcmUuDQotICAgICAgICAg
ICAgICAgICAqLw0KLSAgICAgICAgICAgICAgICBkaW9fY29uZmlnX2JvYXJk
KHNjb2RlKTsNCisJCWJhc2UgPSAoRlJPRE9fQkFTRSArIEZST0RPX0FQQ0lf
T0ZGU0VUKGkpKTsNCiANCiAJCS8qIE1lbW9yeSBtYXBwZWQgSS9PICovDQog
CQlzZXJpYWxfcmVxLmlvX3R5cGUgPSBTRVJJQUxfSU9fTUVNOw0KIAkJc2Vy
aWFsX3JlcS5mbGFncyA9IFVQRl9TS0lQX1RFU1QgfCBVUEZfU0hBUkVfSVJR
IHwgVVBGX0JPT1RfQVVUT0NPTkY7DQotCQlzZXJpYWxfcmVxLmlycSA9IGRp
b19zY29kZXRvaXBsKHNjb2RlKTsNCi0JCXNlcmlhbF9yZXEuYmF1ZF9iYXNl
ID0gSFBEQ0FfQkFVRF9CQVNFOw0KLQkJc2VyaWFsX3JlcS5pb21hcF9iYXNl
ID0gKGJhc2UgKyBVQVJUX09GRlNFVCk7DQorCQkvKiBYWFggLSBubyBpbnRl
cnJ1cHQgc3VwcG9ydCB5ZXQgKi8NCisJCXNlcmlhbF9yZXEuaXJxID0gMDsN
CisJCXNlcmlhbF9yZXEuYmF1ZF9iYXNlID0gSFBBUENJX0JBVURfQkFTRTsN
CisJCXNlcmlhbF9yZXEuaW9tYXBfYmFzZSA9IGJhc2U7DQogCQlzZXJpYWxf
cmVxLmlvbWVtX2Jhc2UgPSAoY2hhciAqKShzZXJpYWxfcmVxLmlvbWFwX2Jh
c2UgKyBESU9fVklSQUREUkJBU0UpOw0KLQkJc2VyaWFsX3JlcS5pb21lbV9y
ZWdfc2hpZnQgPSAxOw0KLQ0KLSNpZmRlZiBDT05GSUdfU0VSSUFMXzgyNTBf
Q09OU09MRQ0KLQkJaWYgKGhwMzAwX3VhcnRfc2NvZGUgIT0gc2NvZGUpIHsN
Ci0jZW5kaWYNCi0gICAgICAgICAgICAgICAgLyogUmVzZXQgdGhlIERDQSAq
Lw0KLSAgICAgICAgICAgICAgICBvdXRfOChiYXNlICsgRElPX1ZJUkFERFJC
QVNFICsgRENBX0lELCAweGZmKTsNCi0gICAgICAgICAgICAgICAgdWRlbGF5
KDEwMCk7DQotI2lmZGVmIENPTkZJR19TRVJJQUxfODI1MF9DT05TT0xFDQot
CQl9DQotI2VuZGlmDQorCQlzZXJpYWxfcmVxLmlvbWVtX3JlZ19zaGlmdCA9
IDI7DQogDQogCQlsaW5lID0gcmVnaXN0ZXJfc2VyaWFsKCZzZXJpYWxfcmVx
KTsNCiANCiAJCWlmIChsaW5lIDwgMCkgew0KLQkJCXByaW50ayhLRVJOX05P
VElDRSAiODI1MF9ocDMwMDogcmVnaXN0ZXJfc2VyaWFsKCkgRENBIHNjb2Rl
ICVkIg0KLQkJCSAgICAgICAiIGlycSAlZCBmYWlsZWRcbiIsIHNjb2RlLCBz
ZXJpYWxfcmVxLmlycSk7DQorCQkJcHJpbnRrKEtFUk5fTk9USUNFICI4MjUw
X2hwMzAwOiByZWdpc3Rlcl9zZXJpYWwoKSBBUENJICVkIg0KKwkJCSAgICAg
ICAiIGlycSAlZCBmYWlsZWRcbiIsIGksIHNlcmlhbF9yZXEuaXJxKTsNCiAJ
CQlrZnJlZShwb3J0KTsNCiAJCQljb250aW51ZTsNCiAJCX0NCiANCi0JCS8q
IEVuYWJsZSBib2FyZC1pbnRlcnJ1cHRzICovDQotCQlvdXRfOChiYXNlICsg
RElPX1ZJUkFERFJCQVNFICsgRENBX0lDLCBEQ0FfSUNfSUUpOw0KLQ0KLQkJ
cG9ydC0+ZGlvX2Jhc2UgPSBiYXNlICsgRElPX1ZJUkFERFJCQVNFOw0KLQkJ
cG9ydC0+c2NvZGUgPSBzY29kZTsNCiAJCXBvcnQtPmxpbmUgPSBsaW5lOw0K
IAkJcG9ydC0+bmV4dCA9IGhwMzAwX3BvcnRzOw0KIAkJaHAzMDBfcG9ydHMg
PSBwb3J0Ow0KIA0KIAkJbnVtX3BvcnRzKys7DQotICAgICAgICB9DQotI2Vu
ZGlmDQotDQotI2lmZGVmIENPTkZJR19IUEFQQ0kNCi0JaWYgKGhwMzAwX21v
ZGVsID49IEhQXzQwMCkNCi0Jew0KLQkJaW50IGk7DQotDQotCQkvKiBUaGVz
ZSBtb2RlbHMgaGF2ZSB0aGUgRnJvZG8gY2hpcC4NCi0JCSAqIFBvcnQgMCBp
cyByZXNlcnZlZCBmb3IgdGhlIEFwb2xsbyBEb21haW4ga2V5Ym9hcmQuDQot
CQkgKiBQb3J0IDEgaXMgZWl0aGVyIHRoZSBjb25zb2xlIG9yIHRoZSBEQ0Eu
DQotCQkgKi8NCi0JCWZvciAoaSA9IDE7IGkgPCA0OyBpKyspIHsNCi0JCQkv
KiBQb3J0IDEgaXMgdGhlIGNvbnNvbGUgb24gYSA0MjVlLCBvbiBvdGhlciBt
YWNoaW5lcyBpdCdzIG1hcHBlZCB0bw0KLQkJCSAqIERDQS4NCi0JCQkgKi8N
Ci0jaWZkZWYgQ09ORklHX1NFUklBTF84MjUwX0NPTlNPTEUNCi0JCQlpZiAo
aSA9PSAxKSB7DQotCQkJCWNvbnRpbnVlOw0KLQkJCX0NCi0jZW5kaWYNCi0N
Ci0JCQkvKiBDcmVhdGUgbmV3IHNlcmlhbCBkZXZpY2UgKi8NCi0JCQlwb3J0
ID0ga21hbGxvYyhzaXplb2Yoc3RydWN0IGhwMzAwX3BvcnQpLCBHRlBfS0VS
TkVMKTsNCi0JCQlpZiAoIXBvcnQpDQotCQkJCXJldHVybiAtRU5PTUVNOw0K
LQ0KLQkJCW1lbXNldCgmc2VyaWFsX3JlcSwgMCwgc2l6ZW9mKHN0cnVjdCBz
ZXJpYWxfc3RydWN0KSk7DQotDQotCQkJYmFzZSA9IChGUk9ET19CQVNFICsg
RlJPRE9fQVBDSV9PRkZTRVQoaSkpOw0KLQ0KLQkJCS8qIE1lbW9yeSBtYXBw
ZWQgSS9PICovDQotCQkJc2VyaWFsX3JlcS5pb190eXBlID0gU0VSSUFMX0lP
X01FTTsNCi0JCQlzZXJpYWxfcmVxLmZsYWdzID0gVVBGX1NLSVBfVEVTVCB8
IFVQRl9TSEFSRV9JUlEgfCBVUEZfQk9PVF9BVVRPQ09ORjsNCi0JCQkvKiBY
WFggLSBubyBpbnRlcnJ1cHQgc3VwcG9ydCB5ZXQgKi8NCi0JCQlzZXJpYWxf
cmVxLmlycSA9IDA7DQotCQkJc2VyaWFsX3JlcS5iYXVkX2Jhc2UgPSBIUEFQ
Q0lfQkFVRF9CQVNFOw0KLQkJCXNlcmlhbF9yZXEuaW9tYXBfYmFzZSA9IGJh
c2U7DQotCQkJc2VyaWFsX3JlcS5pb21lbV9iYXNlID0gKGNoYXIgKikoc2Vy
aWFsX3JlcS5pb21hcF9iYXNlICsgRElPX1ZJUkFERFJCQVNFKTsNCi0JCQlz
ZXJpYWxfcmVxLmlvbWVtX3JlZ19zaGlmdCA9IDI7DQotDQotCQkJbGluZSA9
IHJlZ2lzdGVyX3NlcmlhbCgmc2VyaWFsX3JlcSk7DQotDQotCQkJaWYgKGxp
bmUgPCAwKSB7DQotCQkJCXByaW50ayhLRVJOX05PVElDRSAiODI1MF9ocDMw
MDogcmVnaXN0ZXJfc2VyaWFsKCkgQVBDSSAlZCINCi0JCQkJICAgICAgICIg
aXJxICVkIGZhaWxlZFxuIiwgaSwgc2VyaWFsX3JlcS5pcnEpOw0KLQkJCQlr
ZnJlZShwb3J0KTsNCi0JCQkJY29udGludWU7DQotCQkJfQ0KLQ0KLQkJCXBv
cnQtPmRpb19iYXNlID0gMDsNCi0JCQlwb3J0LT5saW5lID0gbGluZTsNCi0J
CQlwb3J0LT5uZXh0ID0gaHAzMDBfcG9ydHM7DQotCQkJaHAzMDBfcG9ydHMg
PSBwb3J0Ow0KLQ0KLQkJCW51bV9wb3J0cysrOw0KLQkJfQ0KIAl9DQogI2Vu
ZGlmDQogDQpAQCAtMjk5LDI4ICsyODksMzcgQEAgc3RhdGljIGludCBfX2lu
aXQgaHAzMDBfODI1MF9pbml0KHZvaWQpDQogCXJldHVybiAwOw0KIH0NCiAN
CisjaWZkZWYgQ09ORklHX0hQRENBDQorc3RhdGljIHZvaWQgX19kZXZleGl0
IGhwZGNhX3JlbW92ZV9vbmUoc3RydWN0IGRpb19kZXYgKmQpDQorew0KKwlp
bnQgbGluZTsNCisNCisJbGluZSA9IChpbnQpIGRpb19nZXRfZHJ2ZGF0YShk
KTsNCisJaWYgKGQtPnJlc291cmNlLnN0YXJ0KSB7DQorCQkvKiBEaXNhYmxl
IGJvYXJkLWludGVycnVwdHMgKi8NCisJCW91dF84KGQtPnJlc291cmNlLnN0
YXJ0ICsgRElPX1ZJUkFERFJCQVNFICsgRENBX0lDLCAwKTsNCisJfQ0KKwl1
bnJlZ2lzdGVyX3NlcmlhbChsaW5lKTsNCit9DQorI2VuZGlmDQorDQogc3Rh
dGljIHZvaWQgX19leGl0IGhwMzAwXzgyNTBfZXhpdCh2b2lkKQ0KIHsNCisj
aWZkZWYgQ09ORklHX0hQQVBDSQ0KIAlzdHJ1Y3QgaHAzMDBfcG9ydCAqcG9y
dCwgKnRvX2ZyZWU7DQogDQogCWZvciAocG9ydCA9IGhwMzAwX3BvcnRzOyBw
b3J0OyApIHsNCiAJCXVucmVnaXN0ZXJfc2VyaWFsKHBvcnQtPmxpbmUpOw0K
LQ0KLSNpZmRlZiBDT05GSUdfSFBEQ0ENCi0JCWlmIChwb3J0LT5kaW9fYmFz
ZSkgew0KLQkJCS8qIERpc2FibGUgYm9hcmQtaW50ZXJydXB0cyAqLw0KLQkJ
CW91dF84KHBvcnQtPmRpb19iYXNlICsgRENBX0lDLCAwKTsNCi0NCi0JCQlk
aW9fdW5jb25maWdfYm9hcmQocG9ydC0+c2NvZGUpOw0KLQkJfQ0KLSNlbmRp
Zg0KLQ0KIAkJdG9fZnJlZSA9IHBvcnQ7DQogCQlwb3J0ID0gcG9ydC0+bmV4
dDsNCiAJCWtmcmVlKHRvX2ZyZWUpOw0KIAl9DQogDQogCWhwMzAwX3BvcnRz
ID0gTlVMTDsNCisjZW5kaWYNCisjaWZkZWYgQ09ORklHX0hQRENBDQorCWRp
b191bnJlZ2lzdGVyX2RyaXZlcigmaHBkY2FfZHJpdmVyKTsNCisjZW5kaWYN
CiB9DQogDQogbW9kdWxlX2luaXQoaHAzMDBfODI1MF9pbml0KTsNCmRpZmYg
LXVwck4gLVggZG9udGRpZmYgbGludXgtMi42Lm9yaWcvZHJpdmVycy92aWRl
by9ocGZiLmMgbGludXgtMi42L2RyaXZlcnMvdmlkZW8vaHBmYi5jDQotLS0g
bGludXgtMi42Lm9yaWcvZHJpdmVycy92aWRlby9ocGZiLmMJMjAwNC0wOS0y
NiAyMToxMToyNy4wMDAwMDAwMDAgKzAyMDANCisrKyBsaW51eC0yLjYvZHJp
dmVycy92aWRlby9ocGZiLmMJMjAwNC0wOS0yOSAwODo0MTo1NC4wMDAwMDAw
MDAgKzAyMDANCkBAIC0xMjcsMTQgKzEyNywxMiBAQCBzdGF0aWMgaW50IGhw
ZmJfYmxhbmsoaW50IGJsYW5rLCBzdHJ1Y3QgDQogDQogc3RhdGljIHZvaWQg
dG9wY2F0X2JsaXQoaW50IHgwLCBpbnQgeTAsIGludCB4MSwgaW50IHkxLCBp
bnQgdywgaW50IGgsIGludCBycikNCiB7DQotCWlmIChyciA+PSAwKQ0KLQl7
DQorCWlmIChyciA+PSAwKSB7DQogCQl3aGlsZSAoaW5fOChmYl9yZWdzICsg
QlVTWSkgJiBmYl9iaXRtYXNrKQ0KIAkJCTsNCiAJfQ0KIAlvdXRfOChmYl9y
ZWdzICsgVENfRkJFTiwgZmJfYml0bWFzayk7DQotCWlmIChyciA+PSAwKQ0K
LQl7DQorCWlmIChyciA+PSAwKSB7DQogCQlvdXRfOChmYl9yZWdzICsgVENf
V0VOLCBmYl9iaXRtYXNrKTsNCiAJCW91dF84KGZiX3JlZ3MgKyBXTVJSLCBy
cik7DQogCX0NCkBAIC0yMjEsMTMgKzIxOSwxMSBAQCBzdGF0aWMgaW50IF9f
aW5pdCBocGZiX2luaXRfb25lKHVuc2lnbmVkDQogDQogCWZiX2luZm8uZml4
LnNtZW1fc3RhcnQgPSAoaW5fOChmYl9yZWdzICsgZmJvZmYpIDw8IDE2KTsN
CiANCi0JaWYgKHBoeXNfYmFzZSA+PSBESU9JSV9CQVNFKQ0KLQl7DQorCWlm
IChwaHlzX2Jhc2UgPj0gRElPSUlfQkFTRSkgew0KIAkJZmJfaW5mby5maXgu
c21lbV9zdGFydCArPSBwaHlzX2Jhc2U7DQogCX0NCiANCi0JaWYgKERJT19T
RUNJRChmYl9yZWdzKSAhPSBESU9fSUQyX1RPUENBVCkNCi0Jew0KKwlpZiAo
RElPX1NFQ0lEKGZiX3JlZ3MpICE9IERJT19JRDJfVE9QQ0FUKSB7DQogCQkv
KiBUaGlzIGlzIHRoZSBtYWdpYyBpbmNhbnRhdGlvbiB0aGUgSFAgWCBzZXJ2
ZXIgdXNlcyB0byBtYWtlIENhdHNleWUgYm9hcmRzIHdvcmsuICovDQogCQl3
aGlsZSAoaW5fYmUxNihmYl9yZWdzKzB4NDgwMCkgJiAxKQ0KIAkJCTsNCkBA
IC0yOTksOCArMjk1LDcgQEAgc3RhdGljIGludCBfX2luaXQgaHBmYl9pbml0
X29uZSh1bnNpZ25lZA0KIA0KIAlmYl9hbGxvY19jbWFwKCZmYl9pbmZvLmNt
YXAsIDEgPDwgaHBmYl9kZWZpbmVkLmJpdHNfcGVyX3BpeGVsLCAwKTsNCiAN
Ci0JaWYgKHJlZ2lzdGVyX2ZyYW1lYnVmZmVyKCZmYl9pbmZvKSA8IDApDQot
CXsNCisJaWYgKHJlZ2lzdGVyX2ZyYW1lYnVmZmVyKCZmYl9pbmZvKSA8IDAp
IHsNCiAJCWZiX2RlYWxsb2NfY21hcCgmZmJfaW5mby5jbWFwKTsNCiAJCXJl
dHVybiAxOw0KIAl9DQpAQCAtMzIyLDYgKzMxNyw1MSBAQCBzdGF0aWMgaW50
IF9faW5pdCBocGZiX2luaXRfb25lKHVuc2lnbmVkDQogLyogDQogICogSW5p
dGlhbGlzZSB0aGUgZnJhbWVidWZmZXINCiAgKi8NCitzdGF0aWMgaW50IF9f
ZGV2aW5pdCBocGZiX2Rpb19wcm9iZShzdHJ1Y3QgZGlvX2RldiAqIGQsIGNv
bnN0IHN0cnVjdCBkaW9fZGV2aWNlX2lkICogZW50KQ0KK3sNCisJdW5zaWdu
ZWQgbG9uZyBwYWRkciwgdmFkZHI7DQorDQorCXBhZGRyID0gZC0+cmVzb3Vy
Y2Uuc3RhcnQ7DQorCWlmICghcmVxdWVzdF9tZW1fcmVnaW9uKGQtPnJlc291
cmNlLnN0YXJ0LCBkLT5yZXNvdXJjZS5lbmQgLSBkLT5yZXNvdXJjZS5zdGFy
dCwgZC0+bmFtZSkpDQorICAgICAgICAgICAgICAgIHJldHVybiAtRUJVU1k7
DQorDQorCWlmIChkLT5zY29kZSA+PSBESU9JSV9TQ0JBU0UpIHsNCisJCXZh
ZGRyID0gKHVuc2lnbmVkIGxvbmcpaW9yZW1hcChwYWRkciwgZC0+cmVzb3Vy
Y2UuZW5kIC0gZC0+cmVzb3VyY2Uuc3RhcnQpOw0KKwl9IGVsc2Ugew0KKwkJ
dmFkZHIgPSBwYWRkciArIERJT19WSVJBRERSQkFTRTsNCisJfQ0KKwlwcmlu
dGsoS0VSTl9JTkZPICJUb3BjYXQgZm91bmQgYXQgRElPIHNlbGVjdCBjb2Rl
ICVkICINCisJICAgICAgICIoc2Vjb25kYXJ5IGlkICUwMngpXG4iLCBkLT5z
Y29kZSwgKGQtPmlkID4+IDgpICYgMHhmZik7DQorCWlmIChocGZiX2luaXRf
b25lKHBhZGRyLCB2YWRkcikpIHsNCisJCWlmIChkLT5zY29kZSA+PSBESU9J
SV9TQ0JBU0UpDQorCQkJaW91bm1hcCgodm9pZCAqKXZhZGRyKTsNCisJCXJl
dHVybiAtRU5PTUVNOw0KKwl9DQorCXJldHVybiAwOw0KK30NCisNCitzdGF0
aWMgdm9pZCBfX2RldmV4aXQgaHBmYl9yZW1vdmVfb25lKHN0cnVjdCBkaW9f
ZGV2ICpkKQ0KK3sNCisJdW5yZWdpc3Rlcl9mcmFtZWJ1ZmZlcigmZmJfaW5m
byk7DQorCWlmIChkLT5zY29kZSA+PSBESU9JSV9TQ0JBU0UpDQorCQlpb3Vu
bWFwKCh2b2lkICopZmJfcmVncyk7DQorICAgICAgICByZWxlYXNlX21lbV9y
ZWdpb24oZC0+cmVzb3VyY2Uuc3RhcnQsIGQtPnJlc291cmNlLmVuZCAtIGQt
PnJlc291cmNlLnN0YXJ0KTsNCit9DQorDQorc3RhdGljIHN0cnVjdCBkaW9f
ZGV2aWNlX2lkIGhwZmJfZGlvX3RibFtdID0gew0KKyAgICB7IERJT19FTkNP
REVfSUQoRElPX0lEX0ZCVUZGRVIsIERJT19JRDJfTFJDQVRTRVlFKSB9LA0K
KyAgICB7IERJT19FTkNPREVfSUQoRElPX0lEX0ZCVUZGRVIsIERJT19JRDJf
SFJDQ0FUU0VZRSkgfSwNCisgICAgeyBESU9fRU5DT0RFX0lEKERJT19JRF9G
QlVGRkVSLCBESU9fSUQyX0hSTUNBVFNFWUUpIH0sDQorICAgIHsgRElPX0VO
Q09ERV9JRChESU9fSURfRkJVRkZFUiwgRElPX0lEMl9UT1BDQVQpIH0sDQor
ICAgIHsgMCB9DQorfTsNCisNCitzdGF0aWMgc3RydWN0IGRpb19kcml2ZXIg
aHBmYl9kcml2ZXIgPSB7DQorICAgIC5uYW1lICAgICAgPSAiaHBmYiIsDQor
ICAgIC5pZF90YWJsZSAgPSBocGZiX2Rpb190YmwsDQorICAgIC5wcm9iZSAg
ICAgPSBocGZiX2Rpb19wcm9iZSwNCisgICAgLnJlbW92ZSAgICA9IF9fZGV2
ZXhpdF9wKGhwZmJfcmVtb3ZlX29uZSksDQorfTsNCiANCiBpbnQgX19pbml0
IGhwZmJfaW5pdCh2b2lkKQ0KIHsNCkBAIC0zNDQsNjIgKzM4NCwzMiBAQCBp
bnQgX19pbml0IGhwZmJfaW5pdCh2b2lkKQ0KIAlpZiAoIU1BQ0hfSVNfSFAz
MDApDQogCQlyZXR1cm4gLUVOWElPOw0KIA0KKwlkaW9fbW9kdWxlX2luaXQo
JmhwZmJfZHJpdmVyKTsNCisNCiAJZnMgPSBnZXRfZnMoKTsNCiAJc2V0X2Zz
KEtFUk5FTF9EUyk7DQogCWVyciA9IGdldF91c2VyKGksICh1bnNpZ25lZCBj
aGFyICopSU5URkJWQUREUiArIERJT19JRE9GRik7DQogCXNldF9mcyhmcyk7
DQogDQotCWlmICghZXJyICYmIChpID09IERJT19JRF9GQlVGRkVSKSAmJiB0
b3BjYXRfc2lkX29rKHNpZCA9IERJT19TRUNJRChJTlRGQlZBRERSKSkpDQot
CXsNCisJaWYgKCFlcnIgJiYgKGkgPT0gRElPX0lEX0ZCVUZGRVIpICYmIHRv
cGNhdF9zaWRfb2soc2lkID0gRElPX1NFQ0lEKElOVEZCVkFERFIpKSkgew0K
KwkJaWYgKCFyZXF1ZXN0X21lbV9yZWdpb24oSU5URkJQQUREUiwgRElPX0RF
VlNJWkUsICJJbnRlcm5hbCBUb3BjYXQiKSkNCisJCQlyZXR1cm4gLUVCVVNZ
Ow0KIAkJcHJpbnRrKEtFUk5fSU5GTyAiSW50ZXJuYWwgVG9wY2F0IGZvdW5k
IChzZWNvbmRhcnkgaWQgJTAyeClcbiIsIHNpZCk7DQotCQlpZiAoaHBmYl9p
bml0X29uZShJTlRGQlBBRERSLCBJTlRGQlZBRERSKSkNCi0JCXsNCisJCWlm
IChocGZiX2luaXRfb25lKElOVEZCUEFERFIsIElOVEZCVkFERFIpKSB7DQog
CQkJcmV0dXJuIC1FTk9NRU07DQogCQl9DQogCX0NCi0JZWxzZQ0KLQl7DQot
CQlpbnQgc2MsIHNpemU7DQotCQl1bnNpZ25lZCBsb25nIHBhZGRyLCB2YWRk
cjsNCi0NCi0JCWlmICgoc2MgPSBkaW9fZmluZChESU9fRU5DT0RFX0lEKERJ
T19JRF9GQlVGRkVSLCBESU9fSUQyX0xSQ0FUU0VZRSkpKSA8IDAgJiYNCi0J
CSAgICAoc2MgPSBkaW9fZmluZChESU9fRU5DT0RFX0lEKERJT19JRF9GQlVG
RkVSLCBESU9fSUQyX0hSQ0NBVFNFWUUpKSkgPCAwICYmDQotCQkgICAgKHNj
ID0gZGlvX2ZpbmQoRElPX0VOQ09ERV9JRChESU9fSURfRkJVRkZFUiwgRElP
X0lEMl9IUk1DQVRTRVlFKSkpIDwgMCAmJg0KLQkJICAgIChzYyA9IGRpb19m
aW5kKERJT19FTkNPREVfSUQoRElPX0lEX0ZCVUZGRVIsIERJT19JRDJfVE9Q
Q0FUKSkpIDwgMCkNCi0JCXsNCi0JCQlyZXR1cm4gLUVOWElPOw0KLQkJfQ0K
LQ0KLQkJZGlvX2NvbmZpZ19ib2FyZChzYyk7DQotCQlwYWRkciA9IGRpb19z
Y29kZXRvcGh5c2FkZHIoc2MpOw0KLQ0KLQkJaWYgKHNjID49IERJT0lJX1ND
QkFTRSkNCi0JCXsNCi0JCQkvKiBUbyBmaW5kIG91dCB0aGUgcmVhbCBzaXpl
IG9mIHRoZSBkZXZpY2Ugd2UgZmlyc3QgbmVlZCB0byBtYXAgaXQuICovDQot
CQkJdmFkZHIgPSAodW5zaWduZWQgbG9uZylpb3JlbWFwKHBhZGRyLCBQQUdF
X1NJWkUpOw0KLQkJCXNpemUgPSBESU9fU0laRShzYywgdmFkZHIpOw0KLQkJ
CWlvdW5tYXAoKHZvaWQgKil2YWRkcik7DQotCQkJdmFkZHIgPSAodW5zaWdu
ZWQgbG9uZylpb3JlbWFwKHBhZGRyLCBzaXplKTsNCi0JCX0NCi0JCWVsc2UN
Ci0JCXsNCi0JCQl2YWRkciA9IHBhZGRyICsgRElPX1ZJUkFERFJCQVNFOw0K
LQkJCXNpemUgPSBESU9fU0laRShzYywgdmFkZHIpOw0KLQkJfQ0KLQkJc2lk
ID0gRElPX1NFQ0lEKHZhZGRyKTsNCi0NCi0JCXByaW50ayhLRVJOX0lORk8g
IlRvcGNhdCBmb3VuZCBhdCBESU8gc2VsZWN0IGNvZGUgJWQgIg0KLQkJICAg
ICAgICIoc2Vjb25kYXJ5IGlkICUwMngpXG4iLCBzYywgc2lkKTsNCi0JCWlm
IChocGZiX2luaXRfb25lKHBhZGRyLCB2YWRkcikpDQotCQl7DQotCQkJaWYg
KHNjID49IERJT0lJX1NDQkFTRSkNCi0JCQkJaW91bm1hcCgodm9pZCAqKXZh
ZGRyKTsNCi0JCQlkaW9fdW5jb25maWdfYm9hcmQoc2MpOw0KLQkJCXJldHVy
biAtRU5PTUVNOw0KLQkJfQ0KLQl9DQotDQogCXJldHVybiAwOw0KIH0NCiAN
Cit2b2lkIF9fZXhpdCBocGZiX2NsZWFudXBfbW9kdWxlKHZvaWQpDQorew0K
KwlkaW9fdW5yZWdpc3Rlcl9kcml2ZXIoJmhwZmJfZHJpdmVyKTsNCit9DQor
DQorI2lmZGVmIE1PRFVMRQ0KK21vZHVsZV9pbml0KGhwZmJfaW5pdCk7DQor
I2VuZGlmDQorbW9kdWxlX2V4aXQoaHBmYl9jbGVhbnVwX21vZHVsZSk7DQor
DQogTU9EVUxFX0xJQ0VOU0UoIkdQTCIpOw0KZGlmZiAtdXByTiAtWCBkb250
ZGlmZiBsaW51eC0yLjYub3JpZy9pbmNsdWRlL2xpbnV4L2Rpby5oIGxpbnV4
LTIuNi9pbmNsdWRlL2xpbnV4L2Rpby5oDQotLS0gbGludXgtMi42Lm9yaWcv
aW5jbHVkZS9saW51eC9kaW8uaAkyMDA0LTA5LTI2IDIxOjExOjM1LjAwMDAw
MDAwMCArMDIwMA0KKysrIGxpbnV4LTIuNi9pbmNsdWRlL2xpbnV4L2Rpby5o
CTIwMDQtMDktMjcgMTk6NDg6NTIuMDAwMDAwMDAwICswMjAwDQpAQCAtMywx
MSArMywxMiBAQA0KICAqIFRoZSBnZW5lcmFsIHN0cnVjdHVyZSBvZiB0aGlz
IGlzIHZhZ3VlbHkgYmFzZWQgb24gaG93DQogICogdGhlIEFtaWdhIHBvcnQg
aGFuZGxlcyBab3JybyBib2FyZHMuDQogICogQ29weXJpZ2h0IChDKSBQZXRl
ciBNYXlkZWxsIDA1LzE5OTggPHBtYXlkZWxsQGNoaWFyay5ncmVlbmVuZC5v
cmcudWs+DQorICogQ29udmVydGVkIHRvIGRyaXZlciBtb2RlbCBKb2NoZW4g
RnJpZWRyaWNoIDxqb2NoZW5Ac2NyYW0uZGU+DQogICoNCiAgKiBUaGUgYm9h
cmQgSURzIGFyZSBmcm9tIHRoZSBOZXRCU0Qga2VybmVsLCB3aGljaCBmb3Ig
b25jZSBwcm92aWRlZA0KICAqIGhlbHBmdWwgY29tbWVudHMuLi4NCiAgKg0K
LSAqIFRoaXMgZ29lcyB3aXRoIGFyY2gvbTY4ay9ocDMwMC9kaW8uYw0KKyAq
IFRoaXMgZ29lcyB3aXRoIGRyaXZlcnMvZGlvL2Rpby5jDQogICovDQogDQog
I2lmbmRlZiBfTElOVVhfRElPX0gNCkBAIC0yNywxOCArMjgsODAgQEANCiAg
KiBzbyBjdXJyZW50bHkgd2UganVzdCBkb24ndCBoYW5kbGUgRElPLUlJIGJv
YXJkcy4gIEl0IHdvdWxkbid0IGJlIGhhcmQgdG8gDQogICogZG8gd2l0aCBp
b3JlbWFwKCkgdGhvdWdoLg0KICAqLw0KKw0KKyNpbmNsdWRlIDxsaW51eC9k
ZXZpY2UuaD4NCisNCiAjaWZkZWYgX19LRVJORUxfXw0KIA0KICNpbmNsdWRl
IDxhc20vaHAzMDBody5oPg0KIA0KK3R5cGVkZWYgX191MTYgZGlvX2lkOw0K
Kw0KKyAgICAvKg0KKyAgICAgKiAgRElPIGRldmljZXMNCisgICAgICovDQor
DQorc3RydWN0IGRpb19kZXYgew0KKwlzdHJ1Y3QgZGlvX2J1cyAqYnVzOw0K
KwlkaW9faWQgaWQ7DQorCWludCBzY29kZTsNCisJc3RydWN0IGRpb19kcml2
ZXIgKmRyaXZlcjsJLyogd2hpY2ggZHJpdmVyIGhhcyBhbGxvY2F0ZWQgdGhp
cyBkZXZpY2UgKi8NCisJc3RydWN0IGRldmljZSBkZXY7CQkvKiBHZW5lcmlj
IGRldmljZSBpbnRlcmZhY2UgKi8NCisJdTggaXBsOw0KKwljaGFyIG5hbWVb
NjRdOw0KKwlzdHJ1Y3QgcmVzb3VyY2UgcmVzb3VyY2U7DQorfTsNCisNCisj
ZGVmaW5lIHRvX2Rpb19kZXYobikgY29udGFpbmVyX29mKG4sIHN0cnVjdCBk
aW9fZGV2LCBkZXYpDQorDQorICAgIC8qDQorICAgICAqICBESU8gYnVzDQor
ICAgICAqLw0KKw0KK3N0cnVjdCBkaW9fYnVzIHsNCisJc3RydWN0IGxpc3Rf
aGVhZCBkZXZpY2VzOyAgICAgICAgICAgLyogbGlzdCBvZiBkZXZpY2VzIG9u
IHRoaXMgYnVzICovDQorCXVuc2lnbmVkIGludCBudW1fcmVzb3VyY2VzOyAg
ICAgICAgIC8qIG51bWJlciBvZiByZXNvdXJjZXMgKi8NCisJc3RydWN0IHJl
c291cmNlIHJlc291cmNlc1syXTsgICAgICAgLyogYWRkcmVzcyBzcGFjZSBy
b3V0ZWQgdG8gdGhpcyBidXMgKi8NCisJc3RydWN0IGRldmljZSBkZXY7DQor
CWNoYXIgbmFtZVsxMF07DQorfTsNCisNCitleHRlcm4gc3RydWN0IGRpb19i
dXMgZGlvX2J1czsgICAgICAvKiBTaW5nbGUgRElPIGJ1cyAqLw0KK2V4dGVy
biBzdHJ1Y3QgYnVzX3R5cGUgZGlvX2J1c190eXBlOw0KKw0KKyAgICAvKg0K
KyAgICAgKiAgRElPIGRldmljZSBJRHMNCisgICAgICovDQorDQorc3RydWN0
IGRpb19kZXZpY2VfaWQgew0KKwlkaW9faWQgaWQ7ICAgICAgICAgICAgICAg
ICAgICAvKiBEZXZpY2UgSUQgb3IgRElPX1dJTERDQVJEICovDQorCXVuc2ln
bmVkIGxvbmcgZHJpdmVyX2RhdGE7ICAgIC8qIERhdGEgcHJpdmF0ZSB0byB0
aGUgZHJpdmVyICovDQorfTsNCisNCisgICAgLyoNCisgICAgICogIERJTyBk
ZXZpY2UgZHJpdmVycw0KKyAgICAgKi8NCisNCitzdHJ1Y3QgZGlvX2RyaXZl
ciB7DQorCXN0cnVjdCBsaXN0X2hlYWQgbm9kZTsNCisJY2hhciAqbmFtZTsN
CisJY29uc3Qgc3RydWN0IGRpb19kZXZpY2VfaWQgKmlkX3RhYmxlOyAgICAg
LyogTlVMTCBpZiB3YW50cyBhbGwgZGV2aWNlcyAqLw0KKwlpbnQgKCpwcm9i
ZSkoc3RydWN0IGRpb19kZXYgKnosIGNvbnN0IHN0cnVjdCBkaW9fZGV2aWNl
X2lkICppZCk7DQorLyogTmV3IGRldmljZSBpbnNlcnRlZCAqLw0KKwl2b2lk
ICgqcmVtb3ZlKShzdHJ1Y3QgZGlvX2RldiAqeik7ICAgICAgICAvKiBEZXZp
Y2UgcmVtb3ZlZCAoTlVMTCBpZiBub3QgYSBob3QtcGx1ZyBjYXBhYmxlIGRy
aXZlcikgKi8NCisJc3RydWN0IGRldmljZV9kcml2ZXIgZHJpdmVyOw0KK307
DQorDQorI2RlZmluZSB0b19kaW9fZHJpdmVyKGRydikgICAgY29udGFpbmVy
X29mKGRydiwgc3RydWN0IGRpb19kcml2ZXIsIGRyaXZlcikNCisNCiAvKiBE
SU8vRElPLUlJIGJvYXJkcyBhbGwgaGF2ZSB0aGUgZm9sbG93aW5nIDhiaXQg
cmVnaXN0ZXJzLg0KICAqIFRoZXNlIGFyZSBvZmZzZXRzIGZyb20gdGhlIGJh
c2Ugb2YgdGhlIGRldmljZS4NCiAgKi8NCi0jZGVmaW5lIERJT19JRE9GRiAg
ICAgMHgwMSAgICAgICAgICAgICAgICAgICAgICAgIC8qIHByaW1hcnkgZGV2
aWNlIElEICovDQotI2RlZmluZSBESU9fSVBMT0ZGICAgIDB4MDMgICAgICAg
ICAgICAgICAgICAgICAgICAvKiBpbnRlcnJ1cHQgcHJpb3JpdHkgbGV2ZWwg
Ki8NCi0jZGVmaW5lIERJT19TRUNJRE9GRiAgMHgxNSAgICAgICAgICAgICAg
ICAgICAgICAgIC8qIHNlY29uZGFyeSBkZXZpY2UgSUQgKi8NCi0jZGVmaW5l
IERJT0lJX1NJWkVPRkYgMHgxMDEgICAgICAgICAgICAgICAgICAgICAgIC8q
IGRldmljZSBzaXplLCBESU8tSUkgb25seSAqLw0KLSNkZWZpbmUgRElPX1ZJ
UkFERFJCQVNFIDB4ZjAwMDAwMDBVTCAgICAgICAgICAgICAgLyogdmlyIGFk
ZHIgd2hlcmUgSU9zcGFjZSBpcyBtYXBwZWQgKi8NCisjZGVmaW5lIERJT19J
RE9GRiAgICAgMHgwMSAgICAgICAgICAgICAvKiBwcmltYXJ5IGRldmljZSBJ
RCAqLw0KKyNkZWZpbmUgRElPX0lQTE9GRiAgICAweDAzICAgICAgICAgICAg
IC8qIGludGVycnVwdCBwcmlvcml0eSBsZXZlbCAqLw0KKyNkZWZpbmUgRElP
X1NFQ0lET0ZGICAweDE1ICAgICAgICAgICAgIC8qIHNlY29uZGFyeSBkZXZp
Y2UgSUQgKi8NCisjZGVmaW5lIERJT0lJX1NJWkVPRkYgMHgxMDEgICAgICAg
ICAgICAvKiBkZXZpY2Ugc2l6ZSwgRElPLUlJIG9ubHkgKi8NCisjZGVmaW5l
IERJT19WSVJBRERSQkFTRSAweGYwMDAwMDAwVUwgICAvKiB2aXIgYWRkciB3
aGVyZSBJT3NwYWNlIGlzIG1hcHBlZCAqLw0KIA0KICNkZWZpbmUgRElPX0JB
U0UgICAgICAgICAgICAgICAgMHg2MDAwMDAgICAgICAgIC8qIHN0YXJ0IG9m
IERJTyBzcGFjZSAqLw0KICNkZWZpbmUgRElPX0VORCAgICAgICAgICAgICAg
ICAgMHgxMDAwMDAwICAgICAgIC8qIGVuZCBvZiBESU8gc3BhY2UgKi8NCkBA
IC03OSw2ICsxNDIsNyBAQA0KICNkZWZpbmUgRElPX0VOQ09ERV9JRChwcixz
ZWMpICgoKChpbnQpc2VjICYgMHhmZikgPDwgOCkgfCAoKGludClwciAmIDB4
ZmYpKQ0KIC8qIG1hY3JvIHRvIGRldGVybWluZSB3aGV0aGVyIGEgZ2l2ZW4g
cHJpbWFyeSBJRCByZXF1aXJlcyBhIHNlY29uZGFyeSBJRCBieXRlICovDQog
I2RlZmluZSBESU9fTkVFRFNTRUNJRChpZCkgKChpZCkgPT0gRElPX0lEX0ZC
VUZGRVIpDQorI2RlZmluZSBESU9fV0lMRENBUkQgMHhmZg0KIA0KIC8qIE5v
dyBhIHdob2xlIHNsZXcgb2YgbWFjcm9zIGdpdmluZyBkZXZpY2UgSURzIGFu
ZCBkZXNjcmlwdGl2ZSBzdHJpbmdzOiAqLw0KICNkZWZpbmUgRElPX0lEX0RD
QTAgICAgIDB4MDIgLyogOTg2NDRBIHNlcmlhbCAqLw0KQEAgLTk5LDE0ICsx
NjMsMTQgQEANCiAjZGVmaW5lIERJT19ERVNDX0ZIUElCICI5ODYyNUEvOTg2
MjVCIGZhc3QgSFBJQiINCiAjZGVmaW5lIERJT19JRF9OSFBJQiAgICAweDAx
IC8qIDk4NjI0QSBIUC1JQiAobm9ybWFsIGllIHNsb3cpICovDQogI2RlZmlu
ZSBESU9fREVTQ19OSFBJQiAiOTg2MjRBIEhQSUIiDQotI2RlZmluZSBESU9f
SURfU0NTSTAgICAgMHgwNyAvKiA5ODYyNUEgU0NTSSAqLw0KLSNkZWZpbmUg
RElPX0RFU0NfU0NTSTAgIjk4NjI1QSBTQ1NJMCINCisjZGVmaW5lIERJT19J
RF9TQ1NJMCAgICAweDA3IC8qIDk4MjY1QSBTQ1NJICovDQorI2RlZmluZSBE
SU9fREVTQ19TQ1NJMCAiOTgyNjVBIFNDU0kwIg0KICNkZWZpbmUgRElPX0lE
X1NDU0kxICAgIDB4MjcgLyogZGl0dG8gKi8NCi0jZGVmaW5lIERJT19ERVND
X1NDU0kxICI5ODYyNUEgU0NTSTEiDQorI2RlZmluZSBESU9fREVTQ19TQ1NJ
MSAiOTgyNjVBIFNDU0kxIg0KICNkZWZpbmUgRElPX0lEX1NDU0kyICAgIDB4
NDcgLyogZGl0dG8gKi8NCi0jZGVmaW5lIERJT19ERVNDX1NDU0kyICI5ODYy
NUEgU0NTSTIiDQorI2RlZmluZSBESU9fREVTQ19TQ1NJMiAiOTgyNjVBIFND
U0kyIg0KICNkZWZpbmUgRElPX0lEX1NDU0kzICAgIDB4NjcgLyogZGl0dG8g
Ki8NCi0jZGVmaW5lIERJT19ERVNDX1NDU0kzICI5ODYyNUEgU0NTSTMiDQor
I2RlZmluZSBESU9fREVTQ19TQ1NJMyAiOTgyNjVBIFNDU0kzIg0KICNkZWZp
bmUgRElPX0lEX0ZCVUZGRVIgIDB4MzkgLyogZnJhbWVidWZmZXI6IGZsYXZv
dXIgaXMgZGlzdGluZ3Vpc2hlZCBieSBzZWNvbmRhcnkgSUQgKi8NCiAjZGVm
aW5lIERJT19ERVNDX0ZCVUZGRVIgImJpdG1hcHBlZCBkaXNwbGF5Ig0KIC8q
IHRoZSBOZXRCU0Qga2VybmVsIHNvdXJjZSBpcyBhIGJpdCB1bnN1cmUgYXMg
dG8gd2hhdCB0aGVzZSBuZXh0IElEcyBhY3R1YWxseSBkbyA6LT4gKi8NCkBA
IC0xNzcsMTEgKzI0MSw3MiBAQA0KIA0KIGV4dGVybiBpbnQgZGlvX2ZpbmQo
aW50IGRldmljZWlkKTsNCiBleHRlcm4gdW5zaWduZWQgbG9uZyBkaW9fc2Nv
ZGV0b3BoeXNhZGRyKGludCBzY29kZSk7DQotZXh0ZXJuIGludCBkaW9fc2Nv
ZGV0b2lwbChpbnQgc2NvZGUpOw0KLWV4dGVybiBjb25zdCBjaGFyICpkaW9f
c2NvZGV0b25hbWUoaW50IHNjb2RlKTsNCi1leHRlcm4gdm9pZCBkaW9fY29u
ZmlnX2JvYXJkKGludCBzY29kZSk7DQotZXh0ZXJuIHZvaWQgZGlvX3VuY29u
ZmlnX2JvYXJkKGludCBzY29kZSk7DQorZXh0ZXJuIHZvaWQgZGlvX2NyZWF0
ZV9zeXNmc19kZXZfZmlsZXMoc3RydWN0IGRpb19kZXYgKik7DQorDQorLyog
TmV3LXN0eWxlIHByb2JpbmcgKi8NCitleHRlcm4gaW50IGRpb19yZWdpc3Rl
cl9kcml2ZXIoc3RydWN0IGRpb19kcml2ZXIgKik7DQorZXh0ZXJuIHZvaWQg
ZGlvX3VucmVnaXN0ZXJfZHJpdmVyKHN0cnVjdCBkaW9fZHJpdmVyICopOw0K
K2V4dGVybiBjb25zdCBzdHJ1Y3QgZGlvX2RldmljZV9pZCAqZGlvX21hdGNo
X2RldmljZShjb25zdCBzdHJ1Y3QgZGlvX2RldmljZV9pZCAqaWRzLCBjb25z
dCBzdHJ1Y3QgZGlvX2RldiAqeik7DQorc3RhdGljIGlubGluZSBzdHJ1Y3Qg
ZGlvX2RyaXZlciAqZGlvX2Rldl9kcml2ZXIoY29uc3Qgc3RydWN0IGRpb19k
ZXYgKmQpDQorew0KKyAgICByZXR1cm4gZC0+ZHJpdmVyOw0KK30NCisNCisj
ZGVmaW5lIGRpb19yZXNvdXJjZV9zdGFydChkKSAoKGQpLT5yZXNvdXJjZS5z
dGFydCkNCisjZGVmaW5lIGRpb19yZXNvdXJjZV9lbmQoZCkgICAoKGQpLT5y
ZXNvdXJjZS5lbmQpDQorI2RlZmluZSBkaW9fcmVzb3VyY2VfbGVuKGQpICAg
KChkKS0+cmVzb3VyY2UuZW5kLSh6KS0+cmVzb3VyY2Uuc3RhcnQrMSkNCisj
ZGVmaW5lIGRpb19yZXNvdXJjZV9mbGFncyhkKSAoKGQpLT5yZXNvdXJjZS5m
bGFncykNCisNCisjZGVmaW5lIGRpb19yZXF1ZXN0X2RldmljZShkLCBuYW1l
KSBcDQorICAgIHJlcXVlc3RfbWVtX3JlZ2lvbihkaW9fcmVzb3VyY2Vfc3Rh
cnQoZCksIGRpb19yZXNvdXJjZV9sZW4oZCksIG5hbWUpDQorI2RlZmluZSBk
aW9fcmVsZWFzZV9kZXZpY2UoZCkgXA0KKyAgICByZWxlYXNlX21lbV9yZWdp
b24oZGlvX3Jlc291cmNlX3N0YXJ0KGQpLCBkaW9fcmVzb3VyY2VfbGVuKGQp
KQ0KKw0KKy8qIFNpbWlsYXIgdG8gdGhlIGhlbHBlcnMgYWJvdmUsIHRoZXNl
IG1hbmlwdWxhdGUgcGVyLWRpb19kZXYNCisgKiBkcml2ZXItc3BlY2lmaWMg
ZGF0YS4gIFRoZXkgYXJlIHJlYWxseSBqdXN0IGEgd3JhcHBlciBhcm91bmQN
CisgKiB0aGUgZ2VuZXJpYyBkZXZpY2Ugc3RydWN0dXJlIGZ1bmN0aW9ucyBv
ZiB0aGVzZSBjYWxscy4NCisgKi8NCitzdGF0aWMgaW5saW5lIHZvaWQgKmRp
b19nZXRfZHJ2ZGF0YSAoc3RydWN0IGRpb19kZXYgKmQpDQorew0KKwlyZXR1
cm4gZGV2X2dldF9kcnZkYXRhKCZkLT5kZXYpOw0KK30NCisNCitzdGF0aWMg
aW5saW5lIHZvaWQgZGlvX3NldF9kcnZkYXRhIChzdHJ1Y3QgZGlvX2RldiAq
ZCwgdm9pZCAqZGF0YSkNCit7DQorCWRldl9zZXRfZHJ2ZGF0YSgmZC0+ZGV2
LCBkYXRhKTsNCit9DQorDQorLyoNCisgKiBBIGhlbHBlciBmdW5jdGlvbiB3
aGljaCBoZWxwcyBlbnN1cmUgY29ycmVjdCBkaW9fZHJpdmVyDQorICogc2V0
dXAgYW5kIGNsZWFudXAgZm9yIGNvbW1vbmx5LWVuY291bnRlcmVkIGhvdHBs
dWcvbW9kdWxhciBjYXNlcw0KKyAqDQorICogVGhpcyBNVVNUIHN0YXkgaW4g
YSBoZWFkZXIsIGFzIGl0IGNoZWNrcyBmb3IgLURNT0RVTEUNCisgKi8NCitz
dGF0aWMgaW5saW5lIGludCBkaW9fbW9kdWxlX2luaXQoc3RydWN0IGRpb19k
cml2ZXIgKmRydikNCit7DQorCWludCByYyA9IGRpb19yZWdpc3Rlcl9kcml2
ZXIoZHJ2KTsNCisNCisJaWYgKHJjID4gMCkNCisJCXJldHVybiAwOw0KKw0K
KwkvKiBpZmYgQ09ORklHX0hPVFBMVUcgYW5kIGJ1aWx0IGludG8ga2VybmVs
LCB3ZSBzaG91bGQNCisJICogbGVhdmUgdGhlIGRyaXZlciBhcm91bmQgZm9y
IGZ1dHVyZSBob3RwbHVnIGV2ZW50cy4NCisJICogRm9yIHRoZSBtb2R1bGUg
Y2FzZSwgYSBob3RwbHVnIGRhZW1vbiBvZiBzb21lIHNvcnQNCisJICogc2hv
dWxkIGxvYWQgYSBtb2R1bGUgaW4gcmVzcG9uc2UgdG8gYW4gaW5zZXJ0IGV2
ZW50LiAqLw0KKyNpZiBkZWZpbmVkKENPTkZJR19IT1RQTFVHKSAmJiAhZGVm
aW5lZChNT0RVTEUpDQorCWlmIChyYyA9PSAwKQ0KKwkJcmV0dXJuIDA7DQor
I2Vsc2UNCisJaWYgKHJjID09IDApDQorCQlyYyA9IC1FTk9ERVY7DQorI2Vu
ZGlmDQorDQorCS8qIGlmIHdlIGdldCBoZXJlLCB3ZSBuZWVkIHRvIGNsZWFu
IHVwIERJTyBkcml2ZXIgaW5zdGFuY2UNCisJICogYW5kIHJldHVybiBzb21l
IHNvcnQgb2YgZXJyb3IgKi8NCisJZGlvX3VucmVnaXN0ZXJfZHJpdmVyKGRy
dik7DQogDQorCXJldHVybiByYzsNCit9DQogDQogI2VuZGlmIC8qIF9fS0VS
TkVMX18gKi8NCiAjZW5kaWYgLyogbmRlZiBfTElOVVhfRElPX0ggKi8NCg==

--8323328-1744882227-1096583129=:3179--
