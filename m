Return-Path: <linux-kernel-owner+willy=40w.ods.org@vger.kernel.org>
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S261322AbUCaDJY (ORCPT <rfc822;willy@w.ods.org>);
	Tue, 30 Mar 2004 22:09:24 -0500
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S261358AbUCaDJY
	(ORCPT <rfc822;linux-kernel-outgoing>);
	Tue, 30 Mar 2004 22:09:24 -0500
Received: from ppp-217-133-42-200.cust-adsl.tiscali.it ([217.133.42.200]:48770
	"EHLO dualathlon.random") by vger.kernel.org with ESMTP
	id S261322AbUCaDJV (ORCPT <rfc822;linux-kernel@vger.kernel.org>);
	Tue, 30 Mar 2004 22:09:21 -0500
Date: Wed, 31 Mar 2004 05:09:21 +0200
From: Andrea Arcangeli <andrea@suse.de>
To: linux-kernel@vger.kernel.org
Subject: 2.6.5-rc3-aa1
Message-ID: <20040331030921.GA2143@dualathlon.random>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
User-Agent: Mutt/1.4.1i
X-GPG-Key: 1024D/68B9CB43 13D9 8355 295F 4823 7C49  C012 DFA1 686E 68B9 CB43
X-PGP-Key: 1024R/CB4660B9 CC A0 71 81 F4 A0 63 AC  C0 4B 81 1D 8C 15 C8 E5
Sender: linux-kernel-owner@vger.kernel.org
X-Mailing-List: linux-kernel@vger.kernel.org

The xfs warning during truncate will be fixed with a later update
(Nathan is currently working on it).

next thing to do is to fixup the merging in mprotect.

In the meantime this is already mergeable in -mm if Andrew is
interested.

I'm not touching mremap at this time (i'll reistantiate the merging in
mprotect first, then Hugh testcase will work as well as in mainline). I
wait comments on the truncate/mremap race fixes (they clearly partly
collides with prio-tree but part of them seems shareable). That race
isn't trivial to fix but at the same time it doesn't worry me much right
now. I could add the semaphore, but mremap is an extreme fast path for
some workload like apache, so I'm not going to risk a
scalability-slowdown in there with an obviously safe patch of taking the
i_shared_sem semaphore, because even if that race triggers the kernel
shouldn't crash anymore.

URL:
	http://www.us.kernel.org/pub/linux/kernel/people/andrea/kernels/v2.6/2.6.5-rc3-aa1.gz
	http://www.us.kernel.org/pub/linux/kernel/people/andrea/kernels/v2.6/2.6.5-rc3-aa1/

Changelog diff between 2.6.5-rc2-aa6 and 2.6.5-rc3-aa1:

Files 2.6.5-rc2-aa6/anon-vma.gz and 2.6.5-rc3-aa1/anon-vma.gz differ

	Track anonymous pages generated by cows on dma regions
	(bug spotted by Hugh Dickins).

Files 2.6.5-rc2-aa6/extraversion and 2.6.5-rc3-aa1/extraversion differ

	Rediffed.

Only in 2.6.5-rc3-aa1: initramfs-search-for-init

	Initramfs handy patch from -mm.

Files 2.6.5-rc2-aa6/prio-tree.gz and 2.6.5-rc3-aa1/prio-tree.gz differ

	Fix xfs to check nonlinear mappings too.

	Fix x86-64 compilation.

Only in 2.6.5-rc3-aa1: tag-writeback-pages-fix.patch.gz

	Avoid crashes in rw_swap_page_sync due -mm writeback changes,
	final (more highlevel) fix from Andrew.


