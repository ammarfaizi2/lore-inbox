Return-Path: <linux-kernel-owner+willy=40w.ods.org@vger.kernel.org>
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S261717AbUDCMFc (ORCPT <rfc822;willy@w.ods.org>);
	Sat, 3 Apr 2004 07:05:32 -0500
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S261724AbUDCMFc
	(ORCPT <rfc822;linux-kernel-outgoing>);
	Sat, 3 Apr 2004 07:05:32 -0500
Received: from ns.suse.de ([195.135.220.2]:21663 "EHLO Cantor.suse.de")
	by vger.kernel.org with ESMTP id S261717AbUDCMFZ (ORCPT
	<rfc822;linux-kernel@vger.kernel.org>);
	Sat, 3 Apr 2004 07:05:25 -0500
Date: Sat, 03 Apr 2004 14:05:23 +0200
Message-ID: <s5h8yhdxo58.wl@alsa2.suse.de>
From: Takashi Iwai <tiwai@suse.de>
To: Pavel Machek <pavel@suse.cz>
Cc: Rajsekar <rajsekar@peacock.iitm.ernet.in>, linux-kernel@vger.kernel.org
Subject: Re: alsamixer muting when restoring from suspend.
In-Reply-To: <20040402205723.GJ195@elf.ucw.cz>
References: <y49y8phn2op.fsf@sahana.cs.iitm.ernet.in>
	<s5hk710vy8x.wl@alsa2.suse.de>
	<20040402205723.GJ195@elf.ucw.cz>
User-Agent: Wanderlust/2.10.1 (Watching The Wheels) SEMI/1.14.5 (Awara-Onsen) FLIM/1.14.5 (Demachiyanagi) APEL/10.6 MULE XEmacs/21.4 (patch 13) (Rational FORTRAN) (i386-suse-linux)
MIME-Version: 1.0 (generated by SEMI 1.14.5 - "Awara-Onsen")
Content-Type: text/plain; charset=US-ASCII
Sender: linux-kernel-owner@vger.kernel.org
X-Mailing-List: linux-kernel@vger.kernel.org

At Fri, 2 Apr 2004 22:57:23 +0200,
Pavel Machek wrote:
> 
> Hi!
> 
> > > This I think is not a problem but rather a subtle bug.
> > > 
> > > Alsamixer by default mutes all channels when loaded.
> > > So when I `swsusp' my comp while I listen to music and restore the music
> > > plays from where it left alright, but the channels are muted.
> > > Is there a way to unmute them implicitly when restoring.
> > 
> > which driver?
> > not all drivers have suspend/resume callbacks.
> 
> Could it be solved at higher layer, perhaps? Setting volume is common
> to all drivers, and some kind of generic_alsa_suspend every alsa
> driver would call might help...

the problem is also that you need to reinitialize the chip after
resume.  the restoration of mixer config could be done by calling
"alsactl store" at the suspend and "alsactl restore" at the resume in
the user space.  can apmd work for such a purpose even for software
suspend?


Takashi
