Return-Path: <linux-kernel-owner+willy=40w.ods.org@vger.kernel.org>
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S263072AbTJUMJm (ORCPT <rfc822;willy@w.ods.org>);
	Tue, 21 Oct 2003 08:09:42 -0400
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S263084AbTJUMJm
	(ORCPT <rfc822;linux-kernel-outgoing>);
	Tue, 21 Oct 2003 08:09:42 -0400
Received: from mail.gmx.net ([213.165.64.20]:45221 "HELO mail.gmx.net")
	by vger.kernel.org with SMTP id S263072AbTJUMJh (ORCPT
	<rfc822;linux-kernel@vger.kernel.org>);
	Tue, 21 Oct 2003 08:09:37 -0400
Date: Tue, 21 Oct 2003 14:09:36 +0200 (MEST)
From: "Svetoslav Slavtchev" <svetljo@gmx.de>
To: "lkml " <linux-kernel@vger.kernel.org>
MIME-Version: 1.0
Content-Type: multipart/mixed; boundary="========GMXBoundary78471066738176"
Subject: [PATCH][2.6-mm] alow user to select old radeonfb driver, and fix compile
X-Priority: 3 (Normal)
X-Authenticated: #20183004
Message-ID: <7847.1066738176@www3.gmx.net>
X-Mailer: WWW-Mail 1.6 (Global Message Exchange)
X-Flags: 0001
Sender: linux-kernel-owner@vger.kernel.org
X-Mailing-List: linux-kernel@vger.kernel.org

This is a MIME encapsulated multipart message -
please use a MIME-compliant e-mail program to open it.

Dies ist eine mehrteilige Nachricht im MIME-Format -
bitte verwenden Sie zum Lesen ein MIME-konformes Mailprogramm.

--========GMXBoundary78471066738176
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: 8bit

also add the config help from benh tree
and allow building both drivers as modules

the proper way would be 
to mv drivers/video/radeonfb.c to  drivers/video/radeonfb_old.c
but to keep the patch clearer (and smaller) i just added
drivers/video/radeonfb_old.c conaining single line
#include "radeonfb.c"

svetljo

-- 
NEU FÜR ALLE - GMX MediaCenter - für Fotos, Musik, Dateien...
Fotoalbum, File Sharing, MMS, Multimedia-Gruß, GMX FotoService

Jetzt kostenlos anmelden unter http://www.gmx.net

+++ GMX - die erste Adresse für Mail, Message, More! +++
--========GMXBoundary78471066738176
Content-Type: application/octet-stream; name="build_old_radeonfb.patch"
Content-Transfer-Encoding: base64
Content-Disposition: attachment; filename="build_old_radeonfb.patch"

LS0tIGxpbnV4LTIuNi4wLXRlc3Q4L2RyaXZlcnMvdmlkZW8vS2NvbmZpZwkyMDAzLTEwLTIxIDEz
OjUxOjE5LjU4ODAxOTM4MSArMDIwMAorKysgbGludXgtMi42LjAtdGVzdDgvZHJpdmVycy92aWRl
by9LY29uZmlnCTIwMDMtMTAtMjEgMDE6NDk6MzEuMDAwMDAwMDAwICswMjAwCkBAIC02MjEsMTYg
KzYyMSw0MCBAQAogCSAgVGhlcmUgaXMgbm8gbmVlZCBmb3IgZW5hYmxpbmcgJ01hdHJveCBtdWx0
aWhlYWQgc3VwcG9ydCcgaWYgeW91IGhhdmUKIAkgIG9ubHkgb25lIE1hdHJveCBjYXJkIGluIHRo
ZSBib3guCiAKK2NvbmZpZyBGQl9SQURFT05fT0xECisJdHJpc3RhdGUgIkFUSSBSYWRlb24gZGlz
cGxheSBzdXBwb3J0IChPbGQgZHJpdmVyKSIKKwlkZXBlbmRzIG9uIEZCICYmIFBDSQorCWhlbHAK
KwkgIENob29zZSB0aGlzIG9wdGlvbiBpZiB5b3Ugd2FudCB0byB1c2UgYW4gQVRJIFJhZGVvbiBn
cmFwaGljcyBjYXJkIGFzCisJICBhIGZyYW1lYnVmZmVyIGRldmljZS4gIFRoZXJlIGFyZSBib3Ro
IFBDSSBhbmQgQUdQIHZlcnNpb25zLiAgWW91CisJICBkb24ndCBuZWVkIHRvIGNob29zZSB0aGlz
IHRvIHJ1biB0aGUgUmFkZW9uIGluIHBsYWluIFZHQSBtb2RlLgorCSAgVGhlcmUgaXMgYSBwcm9k
dWN0IHBhZ2UgYXQKKwkgIDxodHRwOi8vd3d3LmF0aS5jb20vbmEvcGFnZXMvcHJvZHVjdHMvcGMv
cmFkZW9uMzIvaW5kZXguaHRtbD4uCisKIGNvbmZpZyBGQl9SQURFT04KLQl0cmlzdGF0ZSAiQVRJ
IFJhZGVvbiBkaXNwbGF5IHN1cHBvcnQiCisJdHJpc3RhdGUgIkFUSSBSYWRlb24gZGlzcGxheSBz
dXBwb3J0IChOZXcgZHJpdmVyKSIKIAlkZXBlbmRzIG9uIEZCICYmIFBDSQogCWhlbHAKIAkgIENo
b29zZSB0aGlzIG9wdGlvbiBpZiB5b3Ugd2FudCB0byB1c2UgYW4gQVRJIFJhZGVvbiBncmFwaGlj
cyBjYXJkIGFzCiAJICBhIGZyYW1lYnVmZmVyIGRldmljZS4gIFRoZXJlIGFyZSBib3RoIFBDSSBh
bmQgQUdQIHZlcnNpb25zLiAgWW91CiAJICBkb24ndCBuZWVkIHRvIGNob29zZSB0aGlzIHRvIHJ1
biB0aGUgUmFkZW9uIGluIHBsYWluIFZHQSBtb2RlLgorCisJICBJZiB5b3Ugc2F5IFkgaGVyZSBh
bmQgd2FudCBEREMvSTJDIHN1cHBvcnQgeW91IG11c3QgZmlyc3Qgc2F5IFkgdG8KKwkgICJJMkMg
c3VwcG9ydCIgYW5kICJJMkMgYml0LWJhbmdpbmcgc3VwcG9ydCIgaW4gdGhlIGNoYXJhY3RlciBk
ZXZpY2VzCisJICBzZWN0aW9uLgorCisJICBJZiB5b3Ugc2F5IE0gaGVyZSB0aGVuICJJMkMgc3Vw
cG9ydCIgYW5kICJJMkMgYml0LWJhbmdpbmcgc3VwcG9ydCIgCisJICBjYW4gYmUgYnVpbGQgZWl0
aGVyIGFzIG1vZHVsZXMgb3IgYnVpbHQtaW4uCisKIAkgIFRoZXJlIGlzIGEgcHJvZHVjdCBwYWdl
IGF0CiAJICA8aHR0cDovL3d3dy5hdGkuY29tL25hL3BhZ2VzL3Byb2R1Y3RzL3BjL3JhZGVvbjMy
L2luZGV4Lmh0bWw+LgogCitjb25maWcgRkJfUkFERU9OX0kyQworCWJvb2wgIkREQy9JMkMgZm9y
IEFUSSBSYWRlb24gc3VwcG9ydCIKKwlkZXBlbmRzIG9uIEZCX1JBREVPTiAmJiAoSTJDX0FMR09C
SVQ9RkJfUkFERU9OIHx8IEkyQ19BTEdPQklUPXkpCisJaGVscAorCSAgU2F5IFkgaGVyZSBpZiB5
b3Ugd2FudCBEREMvSTJDIHN1cHBvcnQgZm9yIHlvdXIgUmFkZW9uIGJvYXJkLiAKKwogY29uZmln
IEZCX0FUWTEyOAogCXRyaXN0YXRlICJBVEkgUmFnZTEyOCBkaXNwbGF5IHN1cHBvcnQiCiAJZGVw
ZW5kcyBvbiBGQiAmJiBQQ0kKLS0tIGxpbnV4LTIuNi4wLXRlc3Q4L2RyaXZlcnMvdmlkZW8vTWFr
ZWZpbGUJMjAwMy0xMC0yMSAxMzo1MToxOS41OTYwMTc1NjEgKzAyMDAKKysrIGxpbnV4LTIuNi4w
LXRlc3Q4L2RyaXZlcnMvdmlkZW8vTWFrZWZpbGUJMjAwMy0xMC0yMSAxMToxNzoyMi4wMDAwMDAw
MDAgKzAyMDAKQEAgLTIxLDYgKzIxLDcgQEAKIG9iai0kKENPTkZJR19GQl9RNDApICAgICAgICAg
ICAgICArPSBxNDBmYi5vIGNmYmZpbGxyZWN0Lm8gY2ZiY29weWFyZWEubyBjZmJpbWdibHQubwog
b2JqLSQoQ09ORklHX0ZCX0FUQVJJKSAgICAgICAgICAgICs9IGF0YWZiLm8KIG9iai0kKENPTkZJ
R19GQl82ODMyOCkgICAgICAgICAgICArPSA2ODMyOGZiLm8KK29iai0kKENPTkZJR19GQl9SQURF
T05fT0xEKQkgICs9IHJhZGVvbmZiX29sZC5vIGNmYmZpbGxyZWN0Lm8gY2ZiY29weWFyZWEubyBj
ZmJpbWdibHQubwogb2JqLSQoQ09ORklHX0ZCX05FT01BR0lDKSAgICAgICAgICs9IG5lb2ZiLm8g
Y2ZiZmlsbHJlY3QubyBjZmJjb3B5YXJlYS5vIGNmYmltZ2JsdC5vIHZnYXN0YXRlLm8KIG9iai0k
KENPTkZJR19GQl9JR0EpICAgICAgICAgICAgICArPSBpZ2FmYi5vIGNmYmZpbGxyZWN0Lm8gY2Zi
Y29weWFyZWEubyBjZmJpbWdibHQubwogb2JqLSQoQ09ORklHX0ZCX0NPTlRST0wpICAgICAgICAg
ICs9IGNvbnRyb2xmYi5vIG1hY21vZGVzLm8gY2ZiZmlsbHJlY3QubyBjZmJjb3B5YXJlYS5vIGNm
YmltZ2JsdC5vCi0tLSBsaW51eC0yLjYuMC10ZXN0OC9kcml2ZXJzL3ZpZGVvL3JhZGVvbmZiLmMJ
MjAwMy0xMC0yMSAxMzo1MToxOS42MTUwMTMyMzkgKzAyMDAKKysrIGxpbnV4LTIuNi4wLXRlc3Q4
L2RyaXZlcnMvdmlkZW8vcmFkZW9uZmIuYwkyMDAzLTEwLTIxIDAxOjQ5OjMxLjAwMDAwMDAwMCAr
MDIwMApAQCAtOTIyLDcgKzkyMiw3IEBACiAJCXJldHVybjsKIAl9CiAKLQl0bXAgPSBJTlJFRyhS
QURFT05fQklPU180X1NDUkFUQ0gpOworCXRtcCA9IElOUkVHKEJJT1NfNF9TQ1JBVENIKTsKIAlw
cmludGsoS0VSTl9ERUJVRyAicmFkZW9uX2dldF9tb25pbmZvOiBiaW9zIDQgc2NyYXRjaCA9ICV4
XG4iLCB0bXApOwogCQogCWlmIChyaW5mby0+aGFzQ1JUQzIpIHsKQEAgLTIwNjYsNyArMjA2Niw3
IEBACiAJCQkvKiBERlAgKi8KIAkJCW5ld21vZGUuZnBfZ2VuX2NudGwgfD0gKEZQX0ZQT04gfCBG
UF9UTURTX0VOKTsKIAkJCW5ld21vZGUudG1kc190cmFuc21pdHRlcl9jbnRsID0gKFRNRFNfUkFO
X1BBVF9SU1QgfAotCQkJCQkJCSBJQ0hDU0VMIHwgVE1EU19QTExfRU4pICYKKwkJCQkJCQkgVE1E
U19JQ0hDU0VMIHwgVE1EU19QTExfRU4pICYKIAkJCQkJCQkgfihUTURTX1BMTFJTVCk7CiAJCQlu
ZXdtb2RlLmNydGNfZXh0X2NudGwgJj0gfkNSVENfQ1JUX09OOwogCQl9CkBAIC0zMDMxLDcgKzMw
MzEsNyBAQAogCXBjaV9zZXRfZHJ2ZGF0YShwZGV2LCByaW5mbyk7CiAJcmluZm8tPm5leHQgPSBi
b2FyZF9saXN0OwogCWJvYXJkX2xpc3QgPSByaW5mbzsKLQlyaW5mby0+aW5mby5kZXYgPSAmcGRl
di0+ZGV2OworCXJpbmZvLT5pbmZvLmNsYXNzX2Rldi5kZXYgPSAmcGRldi0+ZGV2OwogCiAJaWYg
KHJlZ2lzdGVyX2ZyYW1lYnVmZmVyICgoc3RydWN0IGZiX2luZm8gKikgcmluZm8pIDwgMCkgewog
CQlwcmludGsgKCJyYWRlb25mYjogY291bGQgbm90IHJlZ2lzdGVyIGZyYW1lYnVmZmVyXG4iKTsK
LS0tIC9kZXYvbnVsbAkxOTcwLTAxLTAxIDAxOjAwOjAwLjAwMDAwMDAwMCArMDEwMAorKysgbGlu
dXgtMi42LjAtdGVzdDgvZHJpdmVycy92aWRlby9yYWRlb25mYl9vbGQuYwkyMDAzLTEwLTIxIDEx
OjE2OjQyLjAwMDAwMDAwMCArMDIwMApAQCAtMCwwICsxIEBACisjaW5jbHVkZSAicmFkZW9uZmIu
YyIK

--========GMXBoundary78471066738176--

