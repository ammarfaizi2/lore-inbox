Return-Path: <linux-kernel-owner+willy=40w.ods.org-S261347AbUKSLM5@vger.kernel.org>
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S261347AbUKSLM5 (ORCPT <rfc822;willy@w.ods.org>);
	Fri, 19 Nov 2004 06:12:57 -0500
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S261348AbUKSLM5
	(ORCPT <rfc822;linux-kernel-outgoing>);
	Fri, 19 Nov 2004 06:12:57 -0500
Received: from mail-ex.suse.de ([195.135.220.2]:3737 "EHLO Cantor.suse.de")
	by vger.kernel.org with ESMTP id S261347AbUKSLMw (ORCPT
	<rfc822;linux-kernel@vger.kernel.org>);
	Fri, 19 Nov 2004 06:12:52 -0500
Date: Fri, 19 Nov 2004 12:10:15 +0100
Message-ID: <s5hpt2aayco.wl@alsa2.suse.de>
From: Takashi Iwai <tiwai@suse.de>
To: "Alexander E. Patrakov" <patrakov@ums.usu.ru>
Cc: linux-kernel@vger.kernel.org, Rusty Russell <rusty@rustcorp.com.au>,
       Gerd Knorr <kraxel@bytesex.org>
Subject: Re: modprobe + request_module() deadlock
In-Reply-To: <cnjr8v$dcu$1@sea.gmane.org>
References: <20041117222949.GA9006@linuxtv.org>
	<1100749702.5865.39.camel@localhost.localdomain>
	<20041118135522.GA16910@linuxtv.org>
	<s5h4qjnc6zs.wl@alsa2.suse.de>
	<cnjr8v$dcu$1@sea.gmane.org>
User-Agent: Wanderlust/2.10.1 (Watching The Wheels) SEMI/1.14.5 (Awara-Onsen) FLIM/1.14.5 (Demachiyanagi) APEL/10.6 MULE XEmacs/21.4 (patch 15) (Security Through Obscurity) (i386-suse-linux)
MIME-Version: 1.0 (generated by SEMI 1.14.5 - "Awara-Onsen")
Content-Type: text/plain; charset=US-ASCII
Sender: linux-kernel-owner@vger.kernel.org
X-Mailing-List: linux-kernel@vger.kernel.org

At Fri, 19 Nov 2004 09:04:16 +0500,
Alexander E. Patrakov wrote:
> 
> Takashi Iwai wrote:
> 
> > Can we add a module dependency manually somehow?
> 
> Yes, recommend the user to add something like this to /etc/modprobe.conf:
> 
> install a modprobe -i a ; modprobe b ; true
> 
> But IMHO Rusty should provide a way to specify those "recommended" install
> lines in the modules themselves (so that they finally go
> to /lib/modules/`uname -r`/modules.alias or a similar autogenerated file),
> like that's already done wih aliases and char-majors.

Well, how about to add a new marker in the driver code such as

	MODULE_DEPENDS_ON("somemodule");

so that depmod can pick it up?


Takashi
