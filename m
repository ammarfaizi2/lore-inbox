Return-Path: <linux-kernel-owner+willy=40w.ods.org-S261234AbUIAIMn@vger.kernel.org>
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S261234AbUIAIMn (ORCPT <rfc822;willy@w.ods.org>);
	Wed, 1 Sep 2004 04:12:43 -0400
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S261724AbUIAIMn
	(ORCPT <rfc822;linux-kernel-outgoing>);
	Wed, 1 Sep 2004 04:12:43 -0400
Received: from cantor.suse.de ([195.135.220.2]:60117 "EHLO Cantor.suse.de")
	by vger.kernel.org with ESMTP id S261234AbUIAIMl (ORCPT
	<rfc822;linux-kernel@vger.kernel.org>);
	Wed, 1 Sep 2004 04:12:41 -0400
Date: Wed, 01 Sep 2004 10:12:39 +0200
Message-ID: <s5hd616z9u0.wl@alsa2.suse.de>
From: Takashi Iwai <tiwai@suse.de>
To: "David S. Miller" <davem@davemloft.net>
Cc: linux-kernel@vger.kernel.org, perex@suse.de
Subject: Re: ALSA update broke Sparc
In-Reply-To: <20040831135651.0da4dc5d.davem@davemloft.net>
References: <20040827183646.1da2befc.davem@davemloft.net>
	<s5h4qmkkjl5.wl@alsa2.suse.de>
	<s5heklnyvmg.wl@alsa2.suse.de>
	<20040831135651.0da4dc5d.davem@davemloft.net>
User-Agent: Wanderlust/2.10.1 (Watching The Wheels) SEMI/1.14.5 (Awara-Onsen) FLIM/1.14.5 (Demachiyanagi) APEL/10.6 MULE XEmacs/21.4 (patch 15) (Security Through Obscurity) (i386-suse-linux)
MIME-Version: 1.0 (generated by SEMI 1.14.5 - "Awara-Onsen")
Content-Type: text/plain; charset=US-ASCII
Sender: linux-kernel-owner@vger.kernel.org
X-Mailing-List: linux-kernel@vger.kernel.org

At Tue, 31 Aug 2004 13:56:51 -0700,
David S. Miller wrote:
> 
> On Tue, 31 Aug 2004 21:07:19 +0200
> Takashi Iwai <tiwai@suse.de> wrote:
> 
> > I fixed/updated the ALSA pcm layer.
> > 
> > David, could you try the attached patch?  With this, the problematic
> > part will be disabled on sparc (it won't work on every architecture,
> > anyway).
> 
> Generates lots of warnings like this:
> 
>   CC [M]  drivers/i2c/chips/smsc47m1.o
> In file included from sound/pci/au88x0/au88x0.h:26,
>                  from sound/pci/au88x0/au8820.c:2:
> include/sound/pcm.h:960:1: warning: "SNDRV_PCM_INFO_MMAP" redefined
> In file included from include/sound/pcm.h:26,
>                  from sound/pci/au88x0/au88x0.h:26,
>                  from sound/pci/au88x0/au8820.c:2:
> include/sound/asound.h:264:1: warning: this is the location of the previous definition

Sorry, a silly typo.

Takashi


--- linux/include/sound/pcm.h-dist	2004-09-01 10:10:16.038394555 +0200
+++ linux/include/sound/pcm.h	2004-09-01 10:10:21.377184781 +0200
@@ -957,7 +957,7 @@ static inline void snd_pcm_mmap_data_clo
 #define SNDRV_PCM_INFO_MMAP_IOMEM	SNDRV_PCM_INFO_MMAP
 int snd_pcm_lib_mmap_iomem(snd_pcm_substream_t *substream, struct vm_area_struct *area);
 #else
-#define SNDRV_PCM_INFO_MMAP	0
+#define SNDRV_PCM_INFO_MMAP_IOMEM	0
 #define snd_pcm_lib_mmap_iomem	NULL
 #endif
 
