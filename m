Return-Path: <linux-kernel-owner+willy=40w.ods.org-S261340AbVDINN1@vger.kernel.org>
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S261340AbVDINN1 (ORCPT <rfc822;willy@w.ods.org>);
	Sat, 9 Apr 2005 09:13:27 -0400
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S261343AbVDINNZ
	(ORCPT <rfc822;linux-kernel-outgoing>);
	Sat, 9 Apr 2005 09:13:25 -0400
Received: from pin.if.uz.zgora.pl ([212.109.128.251]:22214 "EHLO
	pin.if.uz.zgora.pl") by vger.kernel.org with ESMTP id S261340AbVDINMo
	(ORCPT <rfc822;linux-kernel@vger.kernel.org>);
	Sat, 9 Apr 2005 09:12:44 -0400
Message-ID: <4257D524.3080002@pin.if.uz.zgora.pl>
Date: Sat, 09 Apr 2005 15:14:12 +0200
From: Jacek Luczak <difrost@pin.if.uz.zgora.pl>
User-Agent: Mozilla Thunderbird 1.0.2 (X11/20050322)
X-Accept-Language: pl, en-us, en
MIME-Version: 1.0
To: Bjorn Helgaas <bjorn.helgaas@hp.com>
Cc: linux-kernel@vger.kernel.org, Michael Thonke <tk-shockwave@web.de>
Subject: [PATCH] Against sk98lin driver from syskonnect [was: Re: PCI-Express
 not working/unuseable on Intel 925XE since 2.6.12-rc1[mm1-4]]
References: <424D44F0.6090707@web.de> <424D5E2E.8040207@pin.if.uz.zgora.pl>	    <424D71DE.5060703@web.de> <424D91B5.50404@pin.if.uz.zgora.pl>	    <424D9A9C.2070705@web.de>  <424D9FCE.6020200@pin.if.uz.zgora.pl>    <1112993039.12025.65.camel@eeyore>    <4257247B.8030604@pin.if.uz.zgora.pl> <1539.24.9.197.67.1113017666.squirrel@mail.cce.hp.com>
In-Reply-To: <1539.24.9.197.67.1113017666.squirrel@mail.cce.hp.com>
Content-Type: multipart/mixed;
 boundary="------------090901020407000506070103"
Sender: linux-kernel-owner@vger.kernel.org
X-Mailing-List: linux-kernel@vger.kernel.org

This is a multi-part message in MIME format.
--------------090901020407000506070103
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

Bjorn Helgaas napisaÅ‚(a):
>>Version from syskonnect site require only changing usage of
>>pci_dev->slot_name to pci_name(pci_dev) in skge.c and skethtool.c. After
>>that everything should work fine. So I think there is no need to post my
>>path here but if you really whant I may do this. Whole path agains
>>2.6.12-rc2 take about 1.2 MB (diffstat attached below).
> 
> 
> I agree, no need to post a whole 1.2MB patch (goodness, what's
> in this driver, anyway, that it would need a 1.2MB *patch*? :-))

I'm wondering too :)

> But you seem to be saying that the driver from syskonnect (and possibly
> the one in 2.6.12-rc1-bk3 as well) does not work as-is, and that you have
> a small patch that makes it work.

The one that is in 2.6.12-rc1-bk2 and latest 2.6.13-rc2 doesn't work
with Marvell Yukon 88E8053 GigE.

Attached patch convert pci_dev->slot_name usage to pci_name() in skge.c
and skethtool.c. First you must apply patch generated by install script
and after that apply this patch:-)

Regards
	Jacek

---

 drivers/net/sk98lin/skethtool.c |    2 +-
 drivers/net/sk98lin/skge.c      |    2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

---


--------------090901020407000506070103
Content-Type: text/plain;
 name="sk98lin_syskonnect.patch"
Content-Transfer-Encoding: base64
Content-Disposition: inline;
 filename="sk98lin_syskonnect.patch"

LS0tIGxpbnV4LTIuNi4xMi1yYzIvZHJpdmVycy9uZXQvc2s5OGxpbi9za2dlLmMJMjAwNS0w
NC0wOSAxNDo0OTozOS4wMDAwMDAwMDAgKzAyMDAKKysrIGxpbnV4L2RyaXZlcnMvbmV0L3Nr
OThsaW4vc2tnZS5jCTIwMDUtMDQtMDkgMDI6MDQ6NDkuMDAwMDAwMDAwICswMjAwCkBAIC00
MDI2LDcgKzQwMjYsNyBAQAogCQkqLwogCQkqICgoU0tfVTMyICopcE1lbUJ1ZikgPSAwOwog
CQkqICgoU0tfVTMyICopcE1lbUJ1ZiArIDEpID0gcGRldi0+YnVzLT5udW1iZXI7Ci0JCSog
KChTS19VMzIgKilwTWVtQnVmICsgMikgPSBQYXJzZURldmljZU5ickZyb21TbG90TmFtZShw
ZGV2LT5zbG90X25hbWUpOworCQkqICgoU0tfVTMyICopcE1lbUJ1ZiArIDIpID0gUGFyc2VE
ZXZpY2VOYnJGcm9tU2xvdE5hbWUocGNpX25hbWUocGRldikpOwogCQlpZihjb3B5X3RvX3Vz
ZXIoSW9jdGwucERhdGEsIHBNZW1CdWYsIExlbmd0aCkgKSB7CiAJCQlFcnIgPSAtRUZBVUxU
OwogCQkJZ290byBmYXVsdF9kaWFnOwotLS0gbGludXgtMi42LjEyLXJjMi9kcml2ZXJzL25l
dC9zazk4bGluL3NrZXRodG9vbC5jCTIwMDUtMDQtMDkgMTQ6NDk6MzkuMDAwMDAwMDAwICsw
MjAwCisrKyBsaW51eC9kcml2ZXJzL25ldC9zazk4bGluL3NrZXRodG9vbC5jCTIwMDUtMDQt
MDkgMDI6MDQ6NDkuMDAwMDAwMDAwICswMjAwCkBAIC0xMTM2LDcgKzExMzYsNyBAQAogCXN0
cm5jcHkoZWRydmluZm8tPmRyaXZlciwgRFJJVkVSX0ZJTEVfTkFNRSAsIDMyKTsKIAlzdHJu
Y3B5KGVkcnZpbmZvLT52ZXJzaW9uLCB2ZXJzaW9uU3RyaW5nICwgMzIpOwogCXN0cm5jcHko
ZWRydmluZm8tPmZ3X3ZlcnNpb24sICJOL0EiLCAzMik7Ci0Jc3RybmNweShlZHJ2aW5mby0+
YnVzX2luZm8sIHBBQy0+UGNpRGV2LT5zbG90X25hbWUsIDMyKTsKKwlzdHJuY3B5KGVkcnZp
bmZvLT5idXNfaW5mbywgcGNpX25hbWUocEFDLT5QY2lEZXYpLCAzMik7CiAjaWZkZWYgIEVU
SFRPT0xfR1NUQVRTCiAJZWRydmluZm8tPm5fc3RhdHMgPSBTSzk4TElOX1NUQVRTX0xFTjsK
ICNlbmRpZgo=
--------------090901020407000506070103--
