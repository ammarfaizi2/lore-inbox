Return-Path: <linux-kernel-owner+willy=40w.ods.org-S967282AbWLEXPW@vger.kernel.org>
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S967282AbWLEXPW (ORCPT <rfc822;willy@w.ods.org>);
	Tue, 5 Dec 2006 18:15:22 -0500
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S967391AbWLEXPW
	(ORCPT <rfc822;linux-kernel-outgoing>);
	Tue, 5 Dec 2006 18:15:22 -0500
Received: from einhorn.in-berlin.de ([192.109.42.8]:59948 "EHLO
	einhorn.in-berlin.de" rhost-flags-OK-OK-OK-OK) by vger.kernel.org
	with ESMTP id S967282AbWLEXPU (ORCPT
	<rfc822;linux-kernel@vger.kernel.org>);
	Tue, 5 Dec 2006 18:15:20 -0500
X-Envelope-From: stefanr@s5r6.in-berlin.de
Message-ID: <4575FD74.6080701@s5r6.in-berlin.de>
Date: Wed, 06 Dec 2006 00:15:00 +0100
From: Stefan Richter <stefanr@s5r6.in-berlin.de>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.8.0.8) Gecko/20061202 SeaMonkey/1.0.6
MIME-Version: 1.0
To: Benjamin Herrenschmidt <benh@kernel.crashing.org>
CC: =?ISO-8859-1?Q?Kristian_H=F8gsberg?= <krh@redhat.com>,
       David Miller <davem@davemloft.net>, linux-kernel@vger.kernel.org,
       linux1394-devel@lists.sourceforge.net
Subject: Re: [PATCH 0/3] New firewire stack
References: <20061205052229.7213.38194.stgit@dinky.boston.redhat.com>	 <1165297363.29784.54.camel@localhost.localdomain>	 <20061204.230502.35014139.davem@davemloft.net>	 <4575A170.2030805@redhat.com>  <4575BF51.1070109@s5r6.in-berlin.de> <1165354909.5469.11.camel@localhost.localdomain>
In-Reply-To: <1165354909.5469.11.camel@localhost.localdomain>
X-Enigmail-Version: 0.94.0.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Sender: linux-kernel-owner@vger.kernel.org
X-Mailing-List: linux-kernel@vger.kernel.org

Benjamin Herrenschmidt wrote:
(bitfields as accessors to on-the-wire data)
...
> relies on the fact that it -seems- that by luck, gcc only has two
> representations around and they match little/big endian archs (though
> have we verified that is always correct, especially between 32 and 64
> bits archs ?)

As you perhaps noticed, this is already used on very basic packets (the
selfIDs which are the first ones generated by PHYs after each bus
reset). Therefore I suppose that it works also on 64bit architectures
even though they are certainly less extensively tested than 32bit ones.
But since there are no guarantees for it to work as intended,...

> It's still wrong to do.

...I added it to my list of things to fix. Thanks,
-- 
Stefan Richter
-=====-=-==- ==-- --==-
http://arcgraph.de/sr/
