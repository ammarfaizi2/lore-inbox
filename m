Return-Path: <linux-kernel-owner+willy=40w.ods.org-S932143AbWIEM1I@vger.kernel.org>
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S932143AbWIEM1I (ORCPT <rfc822;willy@w.ods.org>);
	Tue, 5 Sep 2006 08:27:08 -0400
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S932164AbWIEM1I
	(ORCPT <rfc822;linux-kernel-outgoing>);
	Tue, 5 Sep 2006 08:27:08 -0400
Received: from ns2.suse.de ([195.135.220.15]:29335 "EHLO mx2.suse.de")
	by vger.kernel.org with ESMTP id S932143AbWIEM1G (ORCPT
	<rfc822;linux-kernel@vger.kernel.org>);
	Tue, 5 Sep 2006 08:27:06 -0400
Date: Tue, 05 Sep 2006 14:26:46 +0200
Message-ID: <s5hveo2ijnd.wl%tiwai@suse.de>
From: Takashi Iwai <tiwai@suse.de>
To: Adrian Bunk <bunk@stusta.de>
Cc: Andrew Morton <akpm@osdl.org>, alsa-devel@alsa-project.org,
       linux-kernel@vger.kernel.org, Alan Cox <alan@lxorguk.ukuu.org.uk>
Subject: Re: [Alsa-devel] [RFC: 2.6 patch] build sound/sound_firmware.c only for	OSS
In-Reply-To: <20060904114135.GO4416@stusta.de>
References: <20060904114135.GO4416@stusta.de>
User-Agent: Wanderlust/2.12.0 (Your Wildest Dreams) SEMI/1.14.6 (Maruoka)
 FLIM/1.14.7 (=?ISO-8859-4?Q?Sanj=F2?=) APEL/10.6 MULE XEmacs/21.5 (beta25)
 (eggplant) (+CVS-20060326) (i386-suse-linux)
MIME-Version: 1.0 (generated by SEMI 1.14.6 - "Maruoka")
Content-Type: text/plain; charset=US-ASCII
Sender: linux-kernel-owner@vger.kernel.org
X-Mailing-List: linux-kernel@vger.kernel.org

At Mon, 4 Sep 2006 13:41:35 +0200,
Adrian Bunk wrote:
> 
> All sound/sound_firmware.c contains is mod_firmware_load() that is a 
> legacy API only used by some OSS drivers.
> 
> This patch builds it into an own sound_firmware module that is only 
> built depending on CONFIG_SOUND_PRIME making the kernel slightly smaller 
> for ALSA users.
> 
> Signed-off-by: Adrian Bunk <bunk@stusta.de>

Thanks, it's good for us.

Acked-by: Takashi Iwai <tiwai@suse.de>


Takashi

> 
> ---
> 
> This patch was already sent on:
> - 22 Aug 2006
> 
>  sound/Makefile         |    3 ++-
>  sound/sound_core.c     |    4 ----
>  sound/sound_firmware.c |    3 +++
>  3 files changed, 5 insertions(+), 5 deletions(-)
> 
> --- linux-2.6.18-rc4-mm2/sound/Makefile.old	2006-08-22 00:07:41.000000000 +0200
> +++ linux-2.6.18-rc4-mm2/sound/Makefile	2006-08-22 00:10:41.000000000 +0200
> @@ -2,6 +2,7 @@
>  #
>  
>  obj-$(CONFIG_SOUND) += soundcore.o
> +obj-$(CONFIG_SOUND_PRIME) += sound_firmware.o
>  obj-$(CONFIG_SOUND_PRIME) += oss/
>  obj-$(CONFIG_DMASOUND) += oss/
>  obj-$(CONFIG_SND) += core/ i2c/ drivers/ isa/ pci/ ppc/ arm/ synth/ usb/ sparc/ parisc/ pcmcia/ mips/
> @@ -11,4 +12,4 @@
>    obj-y += last.o
>  endif
>  
> -soundcore-objs  := sound_core.o sound_firmware.o
> +soundcore-objs  := sound_core.o
> --- linux-2.6.18-rc4-mm2/sound/sound_core.c.old	2006-08-22 00:09:13.000000000 +0200
> +++ linux-2.6.18-rc4-mm2/sound/sound_core.c	2006-08-22 00:12:10.000000000 +0200
> @@ -517,10 +517,6 @@
>  	return -ENODEV;
>  }
>  
> -extern int mod_firmware_load(const char *, char **);
> -EXPORT_SYMBOL(mod_firmware_load);
> -
> -
>  MODULE_DESCRIPTION("Core sound module");
>  MODULE_AUTHOR("Alan Cox");
>  MODULE_LICENSE("GPL");
> --- linux-2.6.18-rc4-mm2/sound/sound_firmware.c.old	2006-08-22 00:10:53.000000000 +0200
> +++ linux-2.6.18-rc4-mm2/sound/sound_firmware.c	2006-08-22 00:26:03.000000000 +0200
> @@ -4,6 +4,7 @@
>  #include <linux/mm.h>
>  #include <linux/slab.h>
>  #include <asm/uaccess.h>
> +#include "oss/sound_firmware.h"
>  
>  static int do_mod_firmware_load(const char *fn, char **fp)
>  {
> @@ -73,4 +74,6 @@
>  	set_fs(fs);
>  	return r;
>  }
> +EXPORT_SYMBOL(mod_firmware_load);
>  
> +MODULE_LICENSE("GPL");
> 
> 
> -------------------------------------------------------------------------
> Using Tomcat but need to do more? Need to support web services, security?
> Get stuff done quickly with pre-integrated technology to make your job easier
> Download IBM WebSphere Application Server v.1.0.1 based on Apache Geronimo
> http://sel.as-us.falkag.net/sel?cmd=lnk&kid=120709&bid=263057&dat=121642
> _______________________________________________
> Alsa-devel mailing list
> Alsa-devel@lists.sourceforge.net
> https://lists.sourceforge.net/lists/listinfo/alsa-devel
> 
