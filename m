Return-Path: <linux-kernel-owner@vger.kernel.org>
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id <S129638AbRBETmB>; Mon, 5 Feb 2001 14:42:01 -0500
Received: (majordomo@vger.kernel.org) by vger.kernel.org
	id <S131223AbRBETlw>; Mon, 5 Feb 2001 14:41:52 -0500
Received: from mailout00.sul.t-online.com ([194.25.134.16]:7186 "EHLO
	mailout00.sul.t-online.com") by vger.kernel.org with ESMTP
	id <S129638AbRBETlg>; Mon, 5 Feb 2001 14:41:36 -0500
Date: Mon, 5 Feb 2001 20:42:41 +0100
From: Oliver Feiler <kiza@lionking.org>
To: Jens Axboe <axboe@suse.de>
Cc: linux-kernel@vger.kernel.org
Subject: Re: Very high system load writing data to SCSI DVD-RAM
Message-ID: <20010205204241.B198@lionking.org>
In-Reply-To: <20010205193216.A198@lionking.org> <20010205194659.U5285@suse.de>
Mime-Version: 1.0
Content-Type: multipart/mixed; boundary="8t9RHnE3ZwKMSgU+"
Content-Disposition: inline
User-Agent: Mutt/1.2.5i
In-Reply-To: <20010205194659.U5285@suse.de>; from axboe@suse.de on Mon, Feb 05, 2001 at 07:46:59PM +0100
X-Operating-System: Linux 2.2.18 i686
Sender: linux-kernel-owner@vger.kernel.org
X-Mailing-List: linux-kernel@vger.kernel.org


--8t9RHnE3ZwKMSgU+
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline

Jens Axboe wrote:
> 
> This is an old problem, and not related to the dvd-ram itself. If you
> dirty lots of data and the target device is slow, kswapd/bdflush
> will go crazy trying to free up memory. It should behave better on
> 2.4.1, where we impose a global limit on locked buffers. Try and run
> a vmstat 1 while doing the copy, and send that along.

	Ok, here is it. Started vmstat right before I copied 150 MB to a disc
and let it run until moving the data was finished. The system froze once
during that for about 20 sec and the system load went to about 8.

	Hmm, the system has 192 MB RAM if that may be of importance for the 
output of vmstat.

Bye
Oliver

-- 
Oliver Feiler                                               kiza@gmx.net
http://www.lionking.org/~kiza/pgpkey              PGP key ID: 0x561D4FD2
http://www.lionking.org/~kiza/

--8t9RHnE3ZwKMSgU+
Content-Type: text/plain; charset=us-ascii
Content-Disposition: attachment; filename=vm

   procs                      memory    swap          io     system         cpu
 r  b  w   swpd   free   buff  cache  si  so    bi    bo   in    cs  us  sy  id
 0  0  0  19060  30232 115008  12912   0   5    46    36  237  1109   4   3  93
 0  0  0  19060  30232 115008  12912   0   0     0     0  160   464   1   1  98
 0  0  0  19060  30224 115016  12912   0   0     2     0  104   175   1   0  99
 1  0  0  19060  21340 119268  17480  60   0  1038     0  629  1000   0  12  88
 2  0  0  19060   2372 128756  26960   0   0  1255     0  738  1221   0  17  83
 2  0  0  19060   2428 122984  32728   0   0  1295     1  884  1438   4  32  64
 0  2  0  19060   2932 114528  40696   0   0  1131    27  726  1136   1  26  73
 1  0  0  19060   3112 110004  44896   0   0  1184     0  709  1136   1  13  86
 0  1  0  19060   2124 103764  52188   0   0  1447  1000  951  1373   2  16  82
 0  1  1  19060   2256 101168  54664   0   0   660   922  575   717   0   5  95
 3  1  1  19060   3064  99776  55248   0   0   149   144  319   277   1   5  94
 0  1  2  19060   3064  99776  55248   0   0     0   161  245   249   0   1  99
 0  1  2  19060   3064  99776  55248   0   0     0   144  244   206   0   1  99
 0  1  2  19060   3052  99776  55248   0   0     0   160  249   208   1   2  97
 1  1  2  19060   3052  99776  55248   0   0     0   176  265   195   0   1  99
 0  1  2  19060   3052  99776  55248   0   0     0    11  267   224   0   1  99
 0  1  2  19060   3052  99776  55248   0   0     0    11  269   259   0   4  96
 0  1  2  19060   3052  99776  55248   0   0     0    11  269   295   0   3  97
 1  1  2  19060   3052  99776  55248   0   0     0    11  267   188   0   1  99
 1  1  2  19060   3052  99776  55248   0   0     0    11  267   199   0   1  99
 0  1  2  19060   3052  99776  55248   0   0     0    10  252   192   0   1  99
   procs                      memory    swap          io     system         cpu
 r  b  w   swpd   free   buff  cache  si  so    bi    bo   in    cs  us  sy  id
 0  1  2  19060   3052  99776  55248   0   0     0    10  248   274   0   1  99
 1  1  2  19060   3052  99776  55248   0   0     0    10  247   279   1   3  96
 0  1  2  19060   3052  99776  55248   0   0     0     9  246   267   0   3  97
 0  1  2  19060   3052  99776  55248   0   0     0    45  406   397   0   1  99
 0  1  2  19060   3052  99776  55248   0   0     0   160  879   852   0   2  98
 1  1  2  19060   3052  99776  55248   0   0     0   160  822   650   0   1  99
 0  1  1  19060   2184  97624  58508   0   0   921  1753 1380  1287   0  13  87
 0  1  2  19060   2784  92344  63256   0   0  1281   146  906  1397   0   8  92
 0  1  2  19060   2784  92344  63256   0   0     0     9  245   290   5   1  94
 0  1  2  19060   2784  92344  63256   0   0     0    10  245   260   0   1  99
 1  1  2  19060   2784  92344  63256   0   0     0     9  244   190   0   1  99
 1  1  2  19060   2784  92344  63256   0   0     0    10  245   206   0   1  99
 0  1  2  19060   2784  92344  63256   0   0     0     9  247   208   0   1  99
 0  1  2  19060   2784  92344  63256   0   0     0    11  267   247   0   1  99
 1  2  2  19060   2724  92348  63260   0   0     2    12  269   234   1   1  98
 0  2  2  19060   2724  92348  63260   0   0     0    11  285   290   0   1  99
 0  2  2  19060   2724  92348  63260   0   0     0    26  339   534   1   2  97
 1  1  2  19060   2724  92348  63260   0   0     0   522  400   396   0   2  98
 1  2  2  19060   2724  92348  63260   0   0     0    66  490   478   0   1  99
 0  2  2  19060   2724  92348  63260   0   0     0    10  261   306   0   1  99
 0  2  2  19060   2724  92348  63260   0   0     0     9  331   527   0   1  99
   procs                      memory    swap          io     system         cpu
 r  b  w   swpd   free   buff  cache  si  so    bi    bo   in    cs  us  sy  id
 0  2  2  19060   2724  92348  63260   0   0     0    51  468   644   0   1  99
 1  2  2  19060   2724  92348  63260   0   0     0   160  822   805   0   1  99
 0  2  2  19060   2724  92348  63260   0   0     0   160  822   841   0   1  99
 0  2  2  19060   2724  92348  63260   0   0     0   160  767   747   0   1  99
 0  2  2  19060   2720  92352  63260   0   0     0   160  824   856   0   1  99
 4  2  2  19060  36476  58924  63880 192   0  7076 14798 33013 39330   0   1  99
 1  3  0  19060  30216  61764  66960   0   0   869     1  939  1001   0   9  91
 2  1  0  19060  21084  66372  71816  64   0  1218  1559  759  1367   2   6  92
 2  1  0  19060  10476  71592  77200   0   0  1349   208  901  1388   0   7  93
 0  3  0  19060   2284  75488  81564  64   0  1172   140  906  1365   0   1  99
 0  2  0  19056   2632  75364  81376   0   0  1203     1  896  1177   1   7  92
 0  2  0  19056   2632  75364  81376   0   0     0     0  245   241   1   0  99
 0  2  0  19056   2632  75364  81376   0   0     0     0  244   159   0   1  99
 0  2  0  19056   2632  75364  81376   0   0     0     0  245   175   1   0  99
 0  2  0  19016   2452  74888  81788 232   0   282     0  415   886   5   4  91
 1  2  1  19016   3440  74468  81224   0   0    10   900  255   262   2   2  96
 1  2  1  19016   3440  74468  81224   0   0     0   144  325   519   1   2  97
 0  2  1  19016   3440  74468  81224   0   0     0   161  344   670   1   1  98
 1  2  1  19016   3792  74468  81224   0   0     0   161  306   441   2   1  97
 2  2  1  19016   3792  74468  81224   0   0     0   160  261   198   0   0 100
 0  2  1  19016   3792  74468  81224   0   0     0   160  267   211   1   0  99
   procs                      memory    swap          io     system         cpu
 r  b  w   swpd   free   buff  cache  si  so    bi    bo   in    cs  us  sy  id
 0  2  1  19016   3792  74468  81224   0   0     0   128  215   264   0   1  99
 0  2  1  19016   3792  74468  81224   0   0     0     0  102   155   0   1  99
 1  2  1  19016   2624  75040  81860   0   0  1547   272 1042  1573   1   7  92
 0  2  1  19016   2768  74952  81836   0   0  1618   160 1068  1601   0   7  93
 1  1  1  19016   2520  75128  81916   0   0  1438   176 1006  1580   2  19  79
 1  1  1  19016   2272  75424  81876   0   0  1600   176 1070  1557   0  12  88
 0  2  2  19016   3188  75116  81272   0   0   318    71  418   443   0   5  95
 0  2  2  19016   3188  75116  81272   0   0     0    10  255   204   0   2  98
 0  2  2  19016   3188  75116  81272   0   0     0    11  257   209   0   0 100
 1  2  2  19016   3188  75116  81272   0   0     0    10  260   212   2   0  98
 0  2  2  19016   3188  75116  81272   0   0     0    10  251   273   0   0 100
 0  2  2  19016   3188  75116  81272   0   0     0    11  260   193   0   1  99
 0  2  2  19016   3188  75116  81272   0   0     0    10  260   214   0   2  98
 0  2  2  19016   3184  75116  81272   0   0     0    10  253   220   0   0 100
 0  2  2  19016   3184  75116  81272   0   0     0   116  261   247   0   3  97
 1  2  2  19016   3184  75116  81272   0   0     0   152  254   212   0   1  99
 1  2  2  19016   1112  76212  82248   0   0   559  1349  840   734   0   9  91
 0  4  2  19016  27148  63316  69200   0   0    42   161  307   200   0   1  99
 5  2  1  19016  41524  56180  61984   0   0   143  1572 2521   733   0   1  99
 2  1  1  19016  29168  62364  68152   0   0  1543   192 1065  1805   1   6  93
 0  3  2  19016  28684  62608  68396   0   0    61    11  303   371   1   0  99
   procs                      memory    swap          io     system         cpu
 r  b  w   swpd   free   buff  cache  si  so    bi    bo   in    cs  us  sy  id
 0  3  2  19016  28684  62608  68396   0   0     0    10  261   219   0   1  99
 0  3  2  19016  28684  62608  68396   0   0     0     8  213   214   0   1  99
 0  3  2  19016  28684  62608  68396   0   0     0    11  267   212   0   1  99
 0  3  2  19016  28684  62608  68396   0   0     0     5  177   173   1   0  99
 0  3  2  19016  28684  62608  68396   0   0     0    12  217   189   0   1  99
 0  3  2  19016  28684  62608  68396   0   0     0     7  214   193   1   0  99
 0  3  2  19016  28684  62608  68396   0   0     0    10  245   182   1   0  99
 0  3  2  19016  28684  62608  68396   0   0     0     9  244   217   1   0  99
 0  3  2  19016  28684  62608  68396   0   0     0    10  245   251   1   0  99
 1  3  2  19016  28680  62612  68396   0   0     0    19  281   226   1   0  99
 0  3  2  19016  28680  62612  68396   0   0     0   160  821   791   0   0 100
 0  3  2  19016  28680  62612  68396   0   0     0   160  823   796   1   1  98
 0  3  2  19016  28680  62612  68396   0   0     0   160  821   805   0   0 100
 0  3  2  19016  28680  62612  68396   0   0     0   159  819   799   2   0  98
 0  3  2  19016  28680  62612  68396   0   0     0   152  786   749   1   0  99
 1  2  1  19016  22044  65932  71708   0   0   831  1089 1299  1648   0  14  86
 1  2  1  19016  10456  71732  77500   0   0  1512   736 1144  1760   1   5  94
 0  2  1  19016  79316  74000   6416   0   0   457   144  500   827   0   2  98
 0  2  1  19016  79316  74000   6416   0   0     0   160  254   249   0   1  99
 0  2  1  19016  79316  74000   6416   0   0     0   176  265   189   1   0  99
 0  2  1  19016  79316  74000   6416   0   0     0   176  267   186   0   1  99
   procs                      memory    swap          io     system         cpu
 r  b  w   swpd   free   buff  cache  si  so    bi    bo   in    cs  us  sy  id
 0  2  1  19016  79316  74000   6416   0   0     0   176  268   198   1   2  97
 0  2  1  19016  79316  74000   6416   0   0     0   176  332   487   1   0  99
 0  2  1  19016  79316  74000   6416   0   0     0   144  279   412   0   1  99
 0  2  1  19016  79316  74000   6416   0   0     0   129  294   463   1   0  99
 0  2  1  19016  79316  74000   6416   0   0     0   144  236   197   0   0 100
 0  2  1  19016  79316  74000   6416   0   0     0   130  238   191   0   0 100
 0  2  1  19016  79316  74000   6416   0   0     0   142  243   246   1   0  99
 1  1  0  19016  79544  73880   6424   0   0     3    85  249   421   4   2  94
 1  2  0  19012  79328  73880   6564  64   0    38     0  285   203   0   0 100
 1  2  0  19012  79328  73880   6564   0   0     0     0  267   165   1   1  98
 1  2  0  19012  79328  73880   6564   0   0     0     0  260   165   0   0 100
 0  2  0  19012  79328  73880   6564   0   0     0     0  322   385   0   1  99
 0  2  1  19012  79328  73880   6564   0   0    13   908  287   242   0   3  97
 0  2  1  19012  79328  73880   6564   0   0     0   129  236   178   0   0 100
 0  2  1  19012  79328  73880   6564   0   0     0   144  236   187   0   0 100
 0  2  1  19012  79328  73880   6564   0   0     0   128  252   242   1   0  99
 1  1  1  19012  79340  73880   6620   0   0    14   224  291   366   0   1  99
 0  1  1  19012  79340  73880   6620   0   0     0   144  243   252   0   0 100
 0  1  1  19012  79340  73880   6620   0   0     0    73  178   192   0   0 100
 0  1  1  19012  79340  73880   6620   0   0     0   187  268   188   0   0 100
 0  1  1  19012  79340  73880   6620   0   0     0   176  263   197   0   0 100
   procs                      memory    swap          io     system         cpu
 r  b  w   swpd   free   buff  cache  si  so    bi    bo   in    cs  us  sy  id
 1  1  1  19012  79340  73880   6620   0   0     0   176  265   213   1   0  99
 0  1  1  19012  79340  73880   6620   0   0     0   160  317   410   1   0  99
 0  1  1  19012  79308  73880   6652   0   0     8   160  253   243   0   2  98
 0  1  1  19012  79308  73880   6652   0   0     0   144  243   193   0   0 100
 0  1  1  19012  79308  73880   6652   0   0     0   160  244   182   0   0 100
 0  1  1  19012  79308  73880   6652   0   0     0   144  243   239   0   2  98
 0  1  1  19012  79308  73880   6652   0   0     0   160  244   236   0   0 100
 1  1  1  19012  79308  73880   6652   0   0     0   144  306   439   0   0 100
 0  1  1  19012  79308  73880   6652   0   0     0   160  286   374   2   0  98
 1  1  1  19012  79308  73880   6652   0   0     0   144  243   175   0   0 100
 0  1  1  19012  79308  73880   6652   0   0     0   176  266   184   0   1  99
 2  1  1  19012  79308  73880   6652   0   0     0   176  268   222   0   0 100
 4  1  1  19012  79308  73880   6652   0   0     0   160  266   182   0   1  99
 0  1  1  19012  79308  73880   6652   0   0     0   176  267   193   0   1  99
 0  1  1  19012  79308  73880   6652   0   0     0   192  268   193   1   1  98
 0  1  0  19012  79308  73880   6652   0   0     0    78  295   304   0   4  96
 0  1  0  19012  79308  73880   6652   0   0     0     2  259   238   0   0 100
 1  1  0  19012  79308  73880   6652   0   0     0     0  244   196   0   1  99
 0  1  0  19012  79308  73880   6652   0   0     0     0  243   176   0   2  98
 1  1  0  19012  79308  73880   6652   0   0     0     0  244   193   0   1  99
 0  1  1  19012  79308  73880   6652   0   0     4     0  246   183   0   1  99
   procs                      memory    swap          io     system         cpu
 r  b  w   swpd   free   buff  cache  si  so    bi    bo   in    cs  us  sy  id
 0  1  1  19012  79308  73880   6652   0   0     0     0  244   191   0   1  99
 1  1  1  19012  79308  73880   6652   0   0     0     0  243   181   0   2  98
 1  1  1  19012  79308  73880   6652   0   0     0     0  244   190   0   3  97
 0  1  1  19012  79308  73880   6652   0   0     0     0  243   195   0   0 100
 1  1  0  19012  79308  73880   6652   0   0     0     0  211   243   1   3  96
 1  0  0  19012  79368  73880   6652   0   0     0     0  106   239   1   0  99
 0  0  0  19012  79368  73880   6652   0   0     0     0  102   180   1   0  99
 0  0  0  19012  79368  73880   6652   0   0     0     0  101   153   0   0 100
 1  0  0  19012  79368  73880   6652   0   0     0     0  101   167   0   0 100
 2  0  0  19012  79368  73880   6652   0   0     0    21  194   454   1   2  97

--8t9RHnE3ZwKMSgU+--
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
Please read the FAQ at http://www.tux.org/lkml/
