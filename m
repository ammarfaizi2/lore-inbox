Return-Path: <linux-kernel-owner+willy=40w.ods.org-S268745AbUHUAUt@vger.kernel.org>
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S268745AbUHUAUt (ORCPT <rfc822;willy@w.ods.org>);
	Fri, 20 Aug 2004 20:20:49 -0400
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S268740AbUHUAUr
	(ORCPT <rfc822;linux-kernel-outgoing>);
	Fri, 20 Aug 2004 20:20:47 -0400
Received: from scl-ims.phoenix.com ([216.148.212.222]:30077 "EHLO
	scl-ims.phoenix.com") by vger.kernel.org with ESMTP id S268748AbUHUAUP
	(ORCPT <rfc822;linux-kernel@vger.kernel.org>);
	Fri, 20 Aug 2004 20:20:15 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.0.6249.0
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="----_=_NextPart_001_01C48714.A0DEC7AA"
Subject: RE: [PATCH][linux-usb-devel] Early USB handoff
Date: Fri, 20 Aug 2004 17:20:14 -0700
Message-ID: <5F106036E3D97448B673ED7AA8B2B6B30162D956@scl-exch2k.phoenix.com>
X-MS-Has-Attach: yes
X-MS-TNEF-Correlator: 
Thread-Topic: [PATCH][linux-usb-devel] Early USB handoff
Thread-Index: AcSFtBcASFHQiZ1uRAaa2oIz4b0RPQBXUmBw
From: "Aleksey Gorelov" <Aleksey_Gorelov@Phoenix.com>
To: "Pete Zaitcev" <zaitcev@redhat.com>
Cc: <linux-kernel@vger.kernel.org>, <linux-usb-devel@lists.sourceforge.net>,
       <alan@lxorguk.ukuu.org.uk>
X-OriginalArrivalTime: 21 Aug 2004 00:20:14.0445 (UTC) FILETIME=[A10F59D0:01C48714]
Sender: linux-kernel-owner@vger.kernel.org
X-Mailing-List: linux-kernel@vger.kernel.org

This is a multi-part message in MIME format.

------_=_NextPart_001_01C48714.A0DEC7AA
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

=20
>This looks good, however I'd like you to make spacing more kernel-like,
>for example here:
>
>> +			writel( 0x3f, op_reg_base + EHCI_USBSTS);
>> +			udelay( delta);
>
>Also, the double star has to go:
>
> /**
>  * foo
>  */
Attached for 2.6. Not easy to switch from one project to another :-)
Let's see how it goes and patch for 2.4 will follow.

>BTW, why is that you awarded EHCI its own function, but not=20
>UHCI or OHCI?
It all comes to the coding style again. Too much of "if"s for a single
function. It became "static inline" - I guess doesn't really matter for
__init function which is called only once.

Aleks.


------_=_NextPart_001_01C48714.A0DEC7AA
Content-Type: text/plain;
	name="usb_patch_2_6.txt"
Content-Transfer-Encoding: base64
Content-Description: usb_patch_2_6.txt
Content-Disposition: attachment;
	filename="usb_patch_2_6.txt"

ZGlmZiAtcnVOIGxpbnV4LTIuNi44LjEvRG9jdW1lbnRhdGlvbi9rZXJuZWwtcGFyYW1ldGVycy50
eHQgbGludXgtMi42LjguMS1maXgvRG9jdW1lbnRhdGlvbi9rZXJuZWwtcGFyYW1ldGVycy50eHQK
LS0tIGxpbnV4LTIuNi44LjEvRG9jdW1lbnRhdGlvbi9rZXJuZWwtcGFyYW1ldGVycy50eHQJMjAw
NC0wOC0xNCAwMzo1NjoyNC4wMDAwMDAwMDAgLTA3MDAKKysrIGxpbnV4LTIuNi44LjEtZml4L0Rv
Y3VtZW50YXRpb24va2VybmVsLXBhcmFtZXRlcnMudHh0CTIwMDQtMDgtMjAgMTU6NDE6MzkuMDAw
MDAwMDAwIC0wNzAwCkBAIC03NTcsNiArNzU3LDggQEAKIAogCW5vdXNiCQlbVVNCXSBEaXNhYmxl
IHRoZSBVU0Igc3Vic3lzdGVtCiAKKwluby11c2ItaGFuZG9mZglbSFddIERpc2FibGUgZWFybHkg
VVNCIEJJT1MgLT4gT1MgaGFuZG9mZgorCiAJbm93YgkJW0FSTV0KICAKIAlvcGwzPQkJW0hXLE9T
U10KQEAgLTEyNDAsNiArMTI0Miw4IEBACiAKIAl1YXJ0Njg1MD0JW0hXLE9TU10KIAkJCUZvcm1h
dDogPGlvPiw8aXJxPgorCisJdXNiLWhhbmRvZmYJW0hXXSBFbmFibGUgZWFybHkgVVNCIEJJT1Mg
LT4gT1MgaGFuZG9mZgogIAogCXZpZGVvPQkJW0ZCXSBGcmFtZSBidWZmZXIgY29uZmlndXJhdGlv
bgogCQkJU2VlIERvY3VtZW50YXRpb24vZmIvbW9kZWRiLnR4dC4KZGlmZiAtcnVOIGxpbnV4LTIu
Ni44LjEvZHJpdmVycy9wY2kvcXVpcmtzLmMgbGludXgtMi42LjguMS1maXgvZHJpdmVycy9wY2kv
cXVpcmtzLmMKLS0tIGxpbnV4LTIuNi44LjEvZHJpdmVycy9wY2kvcXVpcmtzLmMJMjAwNC0wOC0x
NCAwMzo1NDo0Ny4wMDAwMDAwMDAgLTA3MDAKKysrIGxpbnV4LTIuNi44LjEtZml4L2RyaXZlcnMv
cGNpL3F1aXJrcy5jCTIwMDQtMDgtMjAgMTU6NTA6MjQuMDAwMDAwMDAwIC0wNzAwCkBAIC05MDcs
NiArOTA3LDIyOCBAQAogCXBjaWVocF9tc2lfcXVpcmsgPSAxOwogfQogCisKKyNkZWZpbmUgVUhD
SV9VU0JMRUdTVVAJCTB4YzAJCS8qIGxlZ2FjeSBzdXBwb3J0ICovCisjZGVmaW5lIFVIQ0lfVVNC
Q01ECQkwCQkvKiBjb21tYW5kIHJlZ2lzdGVyICovCisjZGVmaW5lIFVIQ0lfVVNCU1RTCQkyCQkv
KiBzdGF0dXMgcmVnaXN0ZXIgKi8KKyNkZWZpbmUgVUhDSV9VU0JJTlRSCQk0CQkvKiBpbnRlcnJ1
cHQgcmVnaXN0ZXIgKi8KKyNkZWZpbmUgVUhDSV9VU0JMRUdTVVBfREVGQVVMVAkweDIwMDAJCS8q
IG9ubHkgUElSUSBlbmFibGUgc2V0ICovCisjZGVmaW5lIFVIQ0lfVVNCQ01EX1JVTgkJKDEgPDwg
MCkJLyogUlVOL1NUT1AgYml0ICovCisjZGVmaW5lIFVIQ0lfVVNCQ01EX0dSRVNFVAkoMSA8PCAy
KQkvKiBHbG9iYWwgcmVzZXQgKi8KKyNkZWZpbmUgVUhDSV9VU0JDTURfQ09ORklHVVJFCSgxIDw8
IDYpCS8qIGNvbmZpZyBzZW1hcGhvcmUgKi8KKyNkZWZpbmUgVUhDSV9VU0JTVFNfSEFMVEVECSgx
IDw8IDUpCS8qIEhDSGFsdGVkIGJpdCAqLworCisjZGVmaW5lIE9IQ0lfQ09OVFJPTAkJMHgwNAor
I2RlZmluZSBPSENJX0NNRFNUQVRVUwkJMHgwOAorI2RlZmluZSBPSENJX0lOVFJTVEFUVVMJCTB4
MGMKKyNkZWZpbmUgT0hDSV9JTlRSRU5BQkxFCQkweDEwCisjZGVmaW5lIE9IQ0lfSU5UUkRJU0FC
TEUJMHgxNAorI2RlZmluZSBPSENJX09DUgkJKDEgPDwgMykJLyogb3duZXJzaGlwIGNoYW5nZSBy
ZXF1ZXN0ICovCisjZGVmaW5lIE9IQ0lfQ1RSTF9JUgkJKDEgPDwgOCkJLyogaW50ZXJydXB0IHJv
dXRpbmcgKi8KKyNkZWZpbmUgT0hDSV9JTlRSX09DCQkoMSA8PCAzMCkJLyogb3duZXJzaGlwIGNo
YW5nZSAqLworCisjZGVmaW5lIEVIQ0lfSENDX1BBUkFNUwkJMHgwOAkJLyogZXh0ZW5kZWQgY2Fw
YWJpbGl0aWVzICovCisjZGVmaW5lIEVIQ0lfVVNCQ01ECQkwCQkvKiBjb21tYW5kIHJlZ2lzdGVy
ICovCisjZGVmaW5lIEVIQ0lfVVNCQ01EX1JVTgkJKDEgPDwgMCkJLyogUlVOL1NUT1AgYml0ICov
CisjZGVmaW5lIEVIQ0lfVVNCU1RTCQk0CQkvKiBzdGF0dXMgcmVnaXN0ZXIgKi8KKyNkZWZpbmUg
RUhDSV9VU0JTVFNfSEFMVEVECSgxIDw8IDEyKQkvKiBIQ0hhbHRlZCBiaXQgKi8KKyNkZWZpbmUg
RUhDSV9VU0JJTlRSCQk4CQkvKiBpbnRlcnJ1cHQgcmVnaXN0ZXIgKi8KKyNkZWZpbmUgRUhDSV9V
U0JMRUdTVVAJCTAJCS8qIGxlZ2FjeSBzdXBwb3J0IHJlZ2lzdGVyICovCisjZGVmaW5lIEVIQ0lf
VVNCTEVHU1VQX0JJT1MJKDEgPDwgMTYpCS8qIEJJT1Mgc2VtYXBob3JlICovCisjZGVmaW5lIEVI
Q0lfVVNCTEVHU1VQX09TCSgxIDw8IDI0KQkvKiBPUyBzZW1hcGhvcmUgKi8KKyNkZWZpbmUgRUhD
SV9VU0JMRUdDVExTVFMJNAkJLyogbGVnYWN5IGNvbnRyb2wvc3RhdHVzICovCisjZGVmaW5lIEVI
Q0lfVVNCTEVHQ1RMU1RTX1NPT0UJKDEgPDwgMTMpCS8qIFNNSSBvbiBvd25lcnNoaXAgY2hhbmdl
ICovCisKK2ludCB1c2JfZWFybHlfaGFuZG9mZiBfX2luaXRkYXRhID0gMDsKK3N0YXRpYyBpbnQg
X19pbml0IHVzYl9oYW5kb2ZmX2Vhcmx5KGNoYXIgKnN0cikKK3sKKwl1c2JfZWFybHlfaGFuZG9m
ZiA9IDE7CisJcmV0dXJuIDA7Cit9CitzdGF0aWMgaW50IF9faW5pdCB1c2Jfbm9faGFuZG9mZihj
aGFyICpzdHIpCit7CisJdXNiX2Vhcmx5X2hhbmRvZmYgPSAwOworCXJldHVybiAwOworfQorX19z
ZXR1cCgidXNiLWhhbmRvZmYiLCB1c2JfaGFuZG9mZl9lYXJseSk7CitfX3NldHVwKCJuby11c2It
aGFuZG9mZiIsIHVzYl9ub19oYW5kb2ZmKTsKKworc3RhdGljIGlubGluZSB2b2lkIHF1aXJrX3Vz
Yl9kaXNhYmxlX2VoY2koc3RydWN0IHBjaV9kZXYgKnBkZXYpCit7CisJaW50IHdhaXRfdGltZSwg
ZGVsdGE7CisJY2hhciAqYmFzZSwgKm9wX3JlZ19iYXNlOworCXUzMiBoY2NfcGFyYW1zLCB2YWws
IHRlbXA7CisJdTggY2FwX2xlbmd0aDsKKworCWJhc2UgPSBpb3JlbWFwX25vY2FjaGUocGNpX3Jl
c291cmNlX3N0YXJ0KHBkZXYsIDApLAorCQkJCXBjaV9yZXNvdXJjZV9sZW4ocGRldiwgMCkpOwor
CWlmIChiYXNlID09IE5VTEwpIHJldHVybjsKKworCWNhcF9sZW5ndGggPSByZWFkYihiYXNlKTsK
KwlvcF9yZWdfYmFzZSA9IGJhc2UgKyBjYXBfbGVuZ3RoOworCWhjY19wYXJhbXMgPSByZWFkbChi
YXNlICsgRUhDSV9IQ0NfUEFSQU1TKTsKKwloY2NfcGFyYW1zID0gKGhjY19wYXJhbXMgPj4gOCkg
JiAweGZmOworCWlmIChoY2NfcGFyYW1zKSB7CisJCXBjaV9yZWFkX2NvbmZpZ19kd29yZChwZGV2
LCAKKwkJCQkJaGNjX3BhcmFtcyArIEVIQ0lfVVNCTEVHU1VQLAorCQkJCQkmdmFsKTsKKwkJaWYg
KCgodmFsICYgMHhmZikgPT0gMSkgJiYgKHZhbCAmIEVIQ0lfVVNCTEVHU1VQX0JJT1MpKSB7CisJ
CQkvKgorCQkJICogT2ssIEJJT1MgaXMgaW4gc21tIG1vZGUsIHRyeSB0byBoYW5kIG9mZi4uLgor
CQkJICovCisJCQlwY2lfcmVhZF9jb25maWdfZHdvcmQocGRldiwKKwkJCQkJCWhjY19wYXJhbXMg
KyBFSENJX1VTQkxFR0NUTFNUUywKKwkJCQkJCSZ0ZW1wKTsKKwkJCXBjaV93cml0ZV9jb25maWdf
ZHdvcmQocGRldiwKKwkJCQkJCWhjY19wYXJhbXMgKyBFSENJX1VTQkxFR0NUTFNUUywKKwkJCQkJ
CXRlbXAgfCBFSENJX1VTQkxFR0NUTFNUU19TT09FKTsKKwkJCXZhbCB8PSBFSENJX1VTQkxFR1NV
UF9PUzsKKwkJCXBjaV93cml0ZV9jb25maWdfZHdvcmQocGRldiwgCisJCQkJCQloY2NfcGFyYW1z
ICsgRUhDSV9VU0JMRUdTVVAsIAorCQkJCQkJdmFsKTsKKworCQkJd2FpdF90aW1lID0gNTAwOwor
CQkJZG8geworCQkJCXNldF9jdXJyZW50X3N0YXRlKFRBU0tfVU5JTlRFUlJVUFRJQkxFKTsKKwkJ
CQlzY2hlZHVsZV90aW1lb3V0KChIWioxMCs5OTkpLzEwMDApOworCQkJCXdhaXRfdGltZSAtPSAx
MDsKKwkJCQlwY2lfcmVhZF9jb25maWdfZHdvcmQocGRldiwKKwkJCQkJCWhjY19wYXJhbXMgKyBF
SENJX1VTQkxFR1NVUCwKKwkJCQkJCSZ2YWwpOworCQkJfSB3aGlsZSAod2FpdF90aW1lICYmICh2
YWwgJiBFSENJX1VTQkxFR1NVUF9CSU9TKSk7CisJCQlpZiAoIXdhaXRfdGltZSkgeworCQkJCS8q
CisJCQkJICogd2VsbCwgcG9zc2libHkgYnVnZ3kgQklPUy4uLgorCQkJCSAqLworCQkJCXByaW50
ayhLRVJOX1dBUk5JTkcgIkVIQ0kgZWFybHkgQklPUyBoYW5kb2ZmICIKKwkJCQkJCSJmYWlsZWQg
KEJJT1MgYnVnID8pXG4iKTsKKwkJCQlwY2lfd3JpdGVfY29uZmlnX2R3b3JkKHBkZXYsCisJCQkJ
CQloY2NfcGFyYW1zICsgRUhDSV9VU0JMRUdTVVAsCisJCQkJCQlFSENJX1VTQkxFR1NVUF9PUyk7
CisJCQkJcGNpX3dyaXRlX2NvbmZpZ19kd29yZChwZGV2LAorCQkJCQkJaGNjX3BhcmFtcyArIEVI
Q0lfVVNCTEVHQ1RMU1RTLAorCQkJCQkJMCk7CisJCQl9CisJCX0KKwl9CisKKwkvKgorCSAqIGhh
bHQgRUhDSSAmIGRpc2FibGUgaXRzIGludGVycnVwdHMgaW4gYW55IGNhc2UKKwkgKi8KKwl2YWwg
PSByZWFkbChvcF9yZWdfYmFzZSArIEVIQ0lfVVNCU1RTKTsKKwlpZiAoKHZhbCAmIEVIQ0lfVVNC
U1RTX0hBTFRFRCkgPT0gMCkgeworCQl2YWwgPSByZWFkbChvcF9yZWdfYmFzZSArIEVIQ0lfVVNC
Q01EKTsKKwkJdmFsICY9IH5FSENJX1VTQkNNRF9SVU47CisJCXdyaXRlbCh2YWwsIG9wX3JlZ19i
YXNlICsgRUhDSV9VU0JDTUQpOworCisJCXdhaXRfdGltZSA9IDIwMDA7CisJCWRlbHRhID0gMTAw
OworCQlkbyB7CisJCQl3cml0ZWwoMHgzZiwgb3BfcmVnX2Jhc2UgKyBFSENJX1VTQlNUUyk7CisJ
CQl1ZGVsYXkoZGVsdGEpOworCQkJd2FpdF90aW1lIC09IGRlbHRhOworCQkJdmFsID0gcmVhZGwo
b3BfcmVnX2Jhc2UgKyBFSENJX1VTQlNUUyk7CisJCQlpZiAoKHZhbCA9PSB+KHUzMikwKSB8fCAo
dmFsICYgRUhDSV9VU0JTVFNfSEFMVEVEKSkgeworCQkJCWJyZWFrOworCQkJfQorCQl9IHdoaWxl
ICh3YWl0X3RpbWUgPiAwKTsKKwl9CisJd3JpdGVsKDAsIG9wX3JlZ19iYXNlICsgRUhDSV9VU0JJ
TlRSKTsKKwl3cml0ZWwoMHgzZiwgb3BfcmVnX2Jhc2UgKyBFSENJX1VTQlNUUyk7CisKKwlpb3Vu
bWFwKGJhc2UpOworCisJcmV0dXJuOworfQorCitzdGF0aWMgdm9pZCBfX2luaXQgcXVpcmtfdXNi
X2Vhcmx5X2hhbmRvZmYoc3RydWN0IHBjaV9kZXYgKnBkZXYpCit7CisJaW50IHdhaXRfdGltZSwg
ZGVsdGE7CisKKwlpZiAoIXVzYl9lYXJseV9oYW5kb2ZmKQorCQlyZXR1cm47CisKKwlpZiAocGRl
di0+Y2xhc3MgPT0gKChQQ0lfQ0xBU1NfU0VSSUFMX1VTQiA8PCA4KSB8IDB4MDApKSB7IC8qIFVI
Q0kgKi8KKwkJaW50IGk7CisJCXVuc2lnbmVkIGxvbmcgYmFzZSA9IDA7CisJCXUxNiB2YWwsIHN0
czsKKworCQlmb3IgKGkgPSAwOyBpIDwgUENJX1JPTV9SRVNPVVJDRTsgaSsrKQorCQkJaWYgKChw
Y2lfcmVzb3VyY2VfZmxhZ3MocGRldiwgaSkgJiBJT1JFU09VUkNFX0lPKSkgeworCQkJCWJhc2Ug
PSBwY2lfcmVzb3VyY2Vfc3RhcnQocGRldiwgaSk7CisJCQkJYnJlYWs7CisJCQl9CisKKwkJaWYg
KCFiYXNlKQorCQkJcmV0dXJuOworCisJCS8qCisJCSAqIHN0b3AgY29udHJvbGxlcgorCQkgKi8K
KwkJc3RzID0gaW53KGJhc2UgKyBVSENJX1VTQlNUUyk7CisJCXZhbCA9IGludyhiYXNlICsgVUhD
SV9VU0JDTUQpOworCQl2YWwgJj0gfih1MTYpKFVIQ0lfVVNCQ01EX1JVTiB8IFVIQ0lfVVNCQ01E
X0NPTkZJR1VSRSk7CisJCW91dHcodmFsLCBiYXNlICsgVUhDSV9VU0JDTUQpOworCisJCS8qCisJ
CSAqIHdhaXQgd2hpbGUgaXQgc3RvcHMgaWYgaXQgd2FzIHJ1bm5pbmcKKwkJICovCisJCWlmICgo
c3RzICYgVUhDSV9VU0JTVFNfSEFMVEVEKSA9PSAwKQorCQl7CisJCQl3YWl0X3RpbWUgPSAxMDAw
OworCQkJZGVsdGEgPSAxMDA7CisKKwkJCWRvIHsKKwkJCQlvdXR3KDB4MWYsIGJhc2UgKyBVSENJ
X1VTQlNUUyk7CisJCQkJdWRlbGF5KGRlbHRhKTsKKwkJCQl3YWl0X3RpbWUgLT0gZGVsdGE7CisJ
CQkJdmFsID0gaW53KGJhc2UgKyBVSENJX1VTQlNUUyk7CisJCQkJaWYgKHZhbCAmIFVIQ0lfVVNC
U1RTX0hBTFRFRCkKKwkJCQkJYnJlYWs7CisJCQl9IHdoaWxlICh3YWl0X3RpbWUgPiAwKTsKKwkJ
fQorCisJCS8qCisJCSAqIGRpc2FibGUgaW50ZXJydXB0cyAmIGxlZ2FjeSBzdXBwb3J0CisJCSAq
LworCQlvdXR3KDAsIGJhc2UgKyBVSENJX1VTQklOVFIpOworCQlvdXR3KDB4MWYsIGJhc2UgKyBV
SENJX1VTQlNUUyk7CisJCXBjaV9yZWFkX2NvbmZpZ193b3JkKHBkZXYsIFVIQ0lfVVNCTEVHU1VQ
LCAmdmFsKTsKKwkJaWYgKHZhbCAmIDB4YmYpIAorCQkJcGNpX3dyaXRlX2NvbmZpZ193b3JkKHBk
ZXYsIFVIQ0lfVVNCTEVHU1VQLCAKKwkJCQkJCVVIQ0lfVVNCTEVHU1VQX0RFRkFVTFQpOworCQkK
Kwl9IGVsc2UgaWYgKHBkZXYtPmNsYXNzID09ICgoUENJX0NMQVNTX1NFUklBTF9VU0IgPDwgOCkg
fCAweDEwKSkgeyAvKiBPSENJICovCisJCWNoYXIgKmJhc2UgPSBpb3JlbWFwX25vY2FjaGUocGNp
X3Jlc291cmNlX3N0YXJ0KHBkZXYsIDApLAorCQkJCQkJcGNpX3Jlc291cmNlX2xlbihwZGV2LCAw
KSk7CisJCWlmIChiYXNlID09IE5VTEwpIHJldHVybjsKKworCQlpZiAocmVhZGwoYmFzZSArIE9I
Q0lfQ09OVFJPTCkgJiBPSENJX0NUUkxfSVIpIHsKKwkJCXdhaXRfdGltZSA9IDUwMDsgLyogMC41
IHNlY29uZHMgKi8KKwkJCXdyaXRlbChPSENJX0lOVFJfT0MsIGJhc2UgKyBPSENJX0lOVFJFTkFC
TEUpOworCQkJd3JpdGVsKE9IQ0lfT0NSLCBiYXNlICsgT0hDSV9DTURTVEFUVVMpOworCQkJd2hp
bGUgKCh3YWl0X3RpbWUgPiAwKSAmJiAKKwkJCQlyZWFkbChiYXNlICsgT0hDSV9DT05UUk9MKSAm
IE9IQ0lfQ1RSTF9JUikgeworCQkJCXdhaXRfdGltZSAtPSAxMDsKKwkJCQlzZXRfY3VycmVudF9z
dGF0ZShUQVNLX1VOSU5URVJSVVBUSUJMRSk7CisJCQkJc2NoZWR1bGVfdGltZW91dCgoSFoqMTAg
KyA5OTkpIC8gMTAwMCk7CisJCQl9CisJCX0KKworCQkvKgorCQkgKiBkaXNhYmxlIGludGVycnVw
dHMKKwkJICovCisJCXdyaXRlbCh+KHUzMikwLCBiYXNlICsgT0hDSV9JTlRSRElTQUJMRSk7CisJ
CXdyaXRlbCh+KHUzMikwLCBiYXNlICsgT0hDSV9JTlRSU1RBVFVTKTsKKworCQlpb3VubWFwKGJh
c2UpOworCX0gZWxzZSBpZiAocGRldi0+Y2xhc3MgPT0gKChQQ0lfQ0xBU1NfU0VSSUFMX1VTQiA8
PCA4KSB8IDB4MjApKSB7IC8qIEVIQ0kgKi8KKwkJcXVpcmtfdXNiX2Rpc2FibGVfZWhjaShwZGV2
KTsKKwl9CisKKwlyZXR1cm47Cit9CisKIC8qCiAgKiAgVGhlIG1haW4gdGFibGUgb2YgcXVpcmtz
LgogICoKQEAgLTEwMzksNiArMTI2MSw3IEBACiAjZW5kaWYgLyogQ09ORklHX1NDU0lfU0FUQSAq
LwogCiAJeyBQQ0lfRklYVVBfRklOQUwsICAgICAgUENJX1ZFTkRPUl9JRF9JTlRFTCwgICAgUENJ
X0RFVklDRV9JRF9JTlRFTF9TTUNILAlxdWlya19wY2llaHBfbXNpIH0sCisJeyBQQ0lfRklYVVBf
RklOQUwsCVBDSV9BTllfSUQsCQlQQ0lfQU5ZX0lELAkJcXVpcmtfdXNiX2Vhcmx5X2hhbmRvZmYg
fSwKIAogCXsgMCB9CiB9OwpCaW5hcnkgZmlsZXMgbGludXgtMi42LjguMS9kcml2ZXJzL3BjaS8u
cXVpcmtzLmMuc3dwIGFuZCBsaW51eC0yLjYuOC4xLWZpeC9kcml2ZXJzL3BjaS8ucXVpcmtzLmMu
c3dwIGRpZmZlcgpkaWZmIC1ydU4gbGludXgtMi42LjguMS9pbmNsdWRlL2FzbS1pMzg2L21hY2gt
c3VtbWl0L21hY2hfbXBwYXJzZS5oIGxpbnV4LTIuNi44LjEtZml4L2luY2x1ZGUvYXNtLWkzODYv
bWFjaC1zdW1taXQvbWFjaF9tcHBhcnNlLmgKLS0tIGxpbnV4LTIuNi44LjEvaW5jbHVkZS9hc20t
aTM4Ni9tYWNoLXN1bW1pdC9tYWNoX21wcGFyc2UuaAkyMDA0LTA4LTE0IDAzOjU1OjIwLjAwMDAw
MDAwMCAtMDcwMAorKysgbGludXgtMi42LjguMS1maXgvaW5jbHVkZS9hc20taTM4Ni9tYWNoLXN1
bW1pdC9tYWNoX21wcGFyc2UuaAkyMDA0LTA4LTIwIDE1OjQxOjM5LjAwMDAwMDAwMCAtMDcwMApA
QCAtMjIsNiArMjIsNyBAQAogewogfQogCitleHRlcm4gaW50IHVzYl9lYXJseV9oYW5kb2ZmOwog
c3RhdGljIGlubGluZSBpbnQgbXBzX29lbV9jaGVjayhzdHJ1Y3QgbXBfY29uZmlnX3RhYmxlICpt
cGMsIGNoYXIgKm9lbSwgCiAJCWNoYXIgKnByb2R1Y3RpZCkKIHsKQEAgLTMxLDYgKzMyLDcgQEAK
IAkJCSB8fCAhc3RybmNtcChwcm9kdWN0aWQsICJSVVRITEVTUyBTTVAiLCAxMikpKXsKIAkJdXNl
X2N5Y2xvbmUgPSAxOyAvKmVuYWJsZSBjeWNsb25lLXRpbWVyKi8KIAkJc2V0dXBfc3VtbWl0KCk7
CisJCXVzYl9lYXJseV9oYW5kb2ZmID0gMTsKIAkJcmV0dXJuIDE7CiAJfQogCXJldHVybiAwOwpA
QCAtNDQsNiArNDYsNyBAQAogCSAgICAgfHwgIXN0cm5jbXAob2VtX3RhYmxlX2lkLCAiRVhBIiwg
MykpKXsKIAkJdXNlX2N5Y2xvbmUgPSAxOyAvKmVuYWJsZSBjeWNsb25lLXRpbWVyKi8KIAkJc2V0
dXBfc3VtbWl0KCk7CisJCXVzYl9lYXJseV9oYW5kb2ZmID0gMTsKIAkJcmV0dXJuIDE7CiAJfQog
CXJldHVybiAwOwo=

------_=_NextPart_001_01C48714.A0DEC7AA--
