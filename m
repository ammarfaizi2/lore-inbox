Return-Path: <linux-kernel-owner@vger.kernel.org>
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id <S266245AbRGETIP>; Thu, 5 Jul 2001 15:08:15 -0400
Received: (majordomo@vger.kernel.org) by vger.kernel.org
	id <S266242AbRGETIG>; Thu, 5 Jul 2001 15:08:06 -0400
Received: from wh58-709.st.Uni-Magdeburg.DE ([141.44.198.79]:35333 "HELO
	wh58-709.st.uni-magdeburg.de") by vger.kernel.org with SMTP
	id <S266245AbRGETH6>; Thu, 5 Jul 2001 15:07:58 -0400
Date: Thu, 5 Jul 2001 21:08:15 +0200 (CEST)
From: Erik Meusel <erik@wh58-709.st.uni-magdeburg.de>
To: <linux-kernel@vger.kernel.org>
cc: <torvalds@kernel.org>, <ac9410@bellsouth.net>
Subject: arch/i386/kernel/semaphore.c
In-Reply-To: <Pine.LNX.4.33.0107032110550.21966-300000@wh58-709.st.uni-magdeburg.de>
Message-ID: <Pine.LNX.4.33.0107052105070.11437-200000@wh58-709.st.uni-magdeburg.de>
MIME-Version: 1.0
Content-Type: MULTIPART/MIXED; BOUNDARY="747458502-731034891-994360095=:11437"
Sender: linux-kernel-owner@vger.kernel.org
X-Mailing-List: linux-kernel@vger.kernel.org

  This message is in MIME format.  The first part should be readable text,
  while the remaining parts are likely unreadable without MIME-aware tools.
  Send mail to mime@docserver.cac.washington.edu for more info.

--747458502-731034891-994360095=:11437
Content-Type: TEXT/PLAIN; charset=US-ASCII

Hi,

I patched semaphore.c to compile cleanly and without any warning when
using GCC 3.0.

Regards,
Erik

--747458502-731034891-994360095=:11437
Content-Type: TEXT/x-csrc; name="semaphore.c"
Content-Transfer-Encoding: BASE64
Content-ID: <Pine.LNX.4.33.0107052108150.11437@wh58-709.st.uni-magdeburg.de>
Content-Description: 
Content-Disposition: attachment; filename="semaphore.c"

LyoNCiAqIGkzODYgc2VtYXBob3JlIGltcGxlbWVudGF0aW9uLg0KICoNCiAq
IChDKSBDb3B5cmlnaHQgMTk5OSBMaW51cyBUb3J2YWxkcw0KICoNCiAqIFBv
cnRpb25zIENvcHlyaWdodCAxOTk5IFJlZCBIYXQsIEluYy4NCiAqDQogKglU
aGlzIHByb2dyYW0gaXMgZnJlZSBzb2Z0d2FyZTsgeW91IGNhbiByZWRpc3Ry
aWJ1dGUgaXQgYW5kL29yDQogKgltb2RpZnkgaXQgdW5kZXIgdGhlIHRlcm1z
IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZQ0KICoJYXMgcHVi
bGlzaGVkIGJ5IHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb247IGVpdGhl
ciB2ZXJzaW9uDQogKgkyIG9mIHRoZSBMaWNlbnNlLCBvciAoYXQgeW91ciBv
cHRpb24pIGFueSBsYXRlciB2ZXJzaW9uLg0KICoNCiAqIHJ3IHNlbWFwaG9y
ZXMgaW1wbGVtZW50ZWQgTm92ZW1iZXIgMTk5OSBieSBCZW5qYW1pbiBMYUhh
aXNlIDxiY3JsQHJlZGhhdC5jb20+DQogKi8NCiNpbmNsdWRlIDxsaW51eC9j
b25maWcuaD4NCiNpbmNsdWRlIDxsaW51eC9zY2hlZC5oPg0KI2luY2x1ZGUg
PGFzbS9zZW1hcGhvcmUuaD4NCg0KLyoNCiAqIFNlbWFwaG9yZXMgYXJlIGlt
cGxlbWVudGVkIHVzaW5nIGEgdHdvLXdheSBjb3VudGVyOg0KICogVGhlICJj
b3VudCIgdmFyaWFibGUgaXMgZGVjcmVtZW50ZWQgZm9yIGVhY2ggcHJvY2Vz
cw0KICogdGhhdCB0cmllcyB0byBhY3F1aXJlIHRoZSBzZW1hcGhvcmUsIHdo
aWxlIHRoZSAic2xlZXBpbmciDQogKiB2YXJpYWJsZSBpcyBhIGNvdW50IG9m
IHN1Y2ggYWNxdWlyZXMuDQogKg0KICogTm90YWJseSwgdGhlIGlubGluZSAi
dXAoKSIgYW5kICJkb3duKCkiIGZ1bmN0aW9ucyBjYW4NCiAqIGVmZmljaWVu
dGx5IHRlc3QgaWYgdGhleSBuZWVkIHRvIGRvIGFueSBleHRyYSB3b3JrICh1
cA0KICogbmVlZHMgdG8gZG8gc29tZXRoaW5nIG9ubHkgaWYgY291bnQgd2Fz
IG5lZ2F0aXZlIGJlZm9yZQ0KICogdGhlIGluY3JlbWVudCBvcGVyYXRpb24u
DQogKg0KICogInNsZWVwaW5nIiBhbmQgdGhlIGNvbnRlbnRpb24gcm91dGlu
ZSBvcmRlcmluZyBpcw0KICogcHJvdGVjdGVkIGJ5IHRoZSBzZW1hcGhvcmUg
c3BpbmxvY2suDQogKg0KICogTm90ZSB0aGF0IHRoZXNlIGZ1bmN0aW9ucyBh
cmUgb25seSBjYWxsZWQgd2hlbiB0aGVyZSBpcw0KICogY29udGVudGlvbiBv
biB0aGUgbG9jaywgYW5kIGFzIHN1Y2ggYWxsIHRoaXMgaXMgdGhlDQogKiAi
bm9uLWNyaXRpY2FsIiBwYXJ0IG9mIHRoZSB3aG9sZSBzZW1hcGhvcmUgYnVz
aW5lc3MuIFRoZQ0KICogY3JpdGljYWwgcGFydCBpcyB0aGUgaW5saW5lIHN0
dWZmIGluIDxhc20vc2VtYXBob3JlLmg+DQogKiB3aGVyZSB3ZSB3YW50IHRv
IGF2b2lkIGFueSBleHRyYSBqdW1wcyBhbmQgY2FsbHMuDQogKi8NCg0KLyoN
CiAqIExvZ2ljOg0KICogIC0gb25seSBvbiBhIGJvdW5kYXJ5IGNvbmRpdGlv
biBkbyB3ZSBuZWVkIHRvIGNhcmUuIFdoZW4gd2UgZ28NCiAqICAgIGZyb20g
YSBuZWdhdGl2ZSBjb3VudCB0byBhIG5vbi1uZWdhdGl2ZSwgd2Ugd2FrZSBw
ZW9wbGUgdXAuDQogKiAgLSB3aGVuIHdlIGdvIGZyb20gYSBub24tbmVnYXRp
dmUgY291bnQgdG8gYSBuZWdhdGl2ZSBkbyB3ZQ0KICogICAgKGEpIHN5bmNo
cm9uaXplIHdpdGggdGhlICJzbGVlcGVyIiBjb3VudCBhbmQgKGIpIG1ha2Ug
c3VyZQ0KICogICAgdGhhdCB3ZSdyZSBvbiB0aGUgd2FrZXVwIGxpc3QgYmVm
b3JlIHdlIHN5bmNocm9uaXplIHNvIHRoYXQNCiAqICAgIHdlIGNhbm5vdCBs
b3NlIHdha2V1cCBldmVudHMuDQogKi8NCg0Kdm9pZCBfX3VwKHN0cnVjdCBz
ZW1hcGhvcmUgKnNlbSkNCnsNCgl3YWtlX3VwKCZzZW0tPndhaXQpOw0KfQ0K
DQpzdGF0aWMgc3BpbmxvY2tfdCBzZW1hcGhvcmVfbG9jayA9IFNQSU5fTE9D
S19VTkxPQ0tFRDsNCg0Kdm9pZCBfX2Rvd24oc3RydWN0IHNlbWFwaG9yZSAq
IHNlbSkNCnsNCglzdHJ1Y3QgdGFza19zdHJ1Y3QgKnRzayA9IGN1cnJlbnQ7
DQoJREVDTEFSRV9XQUlUUVVFVUUod2FpdCwgdHNrKTsNCgl0c2stPnN0YXRl
ID0gVEFTS19VTklOVEVSUlVQVElCTEU7DQoJYWRkX3dhaXRfcXVldWVfZXhj
bHVzaXZlKCZzZW0tPndhaXQsICZ3YWl0KTsNCg0KCXNwaW5fbG9ja19pcnEo
JnNlbWFwaG9yZV9sb2NrKTsNCglzZW0tPnNsZWVwZXJzKys7DQoJZm9yICg7
Oykgew0KCQlpbnQgc2xlZXBlcnMgPSBzZW0tPnNsZWVwZXJzOw0KDQoJCS8q
DQoJCSAqIEFkZCAiZXZlcnlib2R5IGVsc2UiIGludG8gaXQuIFRoZXkgYXJl
bid0DQoJCSAqIHBsYXlpbmcsIGJlY2F1c2Ugd2Ugb3duIHRoZSBzcGlubG9j
ay4NCgkJICovDQoJCWlmICghYXRvbWljX2FkZF9uZWdhdGl2ZShzbGVlcGVy
cyAtIDEsICZzZW0tPmNvdW50KSkgew0KCQkJc2VtLT5zbGVlcGVycyA9IDA7
DQoJCQlicmVhazsNCgkJfQ0KCQlzZW0tPnNsZWVwZXJzID0gMTsJLyogdXMg
LSBzZWUgLTEgYWJvdmUgKi8NCgkJc3Bpbl91bmxvY2tfaXJxKCZzZW1hcGhv
cmVfbG9jayk7DQoNCgkJc2NoZWR1bGUoKTsNCgkJdHNrLT5zdGF0ZSA9IFRB
U0tfVU5JTlRFUlJVUFRJQkxFOw0KCQlzcGluX2xvY2tfaXJxKCZzZW1hcGhv
cmVfbG9jayk7DQoJfQ0KCXNwaW5fdW5sb2NrX2lycSgmc2VtYXBob3JlX2xv
Y2spOw0KCXJlbW92ZV93YWl0X3F1ZXVlKCZzZW0tPndhaXQsICZ3YWl0KTsN
Cgl0c2stPnN0YXRlID0gVEFTS19SVU5OSU5HOw0KCXdha2VfdXAoJnNlbS0+
d2FpdCk7DQp9DQoNCmludCBfX2Rvd25faW50ZXJydXB0aWJsZShzdHJ1Y3Qg
c2VtYXBob3JlICogc2VtKQ0Kew0KCWludCByZXR2YWwgPSAwOw0KCXN0cnVj
dCB0YXNrX3N0cnVjdCAqdHNrID0gY3VycmVudDsNCglERUNMQVJFX1dBSVRR
VUVVRSh3YWl0LCB0c2spOw0KCXRzay0+c3RhdGUgPSBUQVNLX0lOVEVSUlVQ
VElCTEU7DQoJYWRkX3dhaXRfcXVldWVfZXhjbHVzaXZlKCZzZW0tPndhaXQs
ICZ3YWl0KTsNCg0KCXNwaW5fbG9ja19pcnEoJnNlbWFwaG9yZV9sb2NrKTsN
CglzZW0tPnNsZWVwZXJzICsrOw0KCWZvciAoOzspIHsNCgkJaW50IHNsZWVw
ZXJzID0gc2VtLT5zbGVlcGVyczsNCg0KCQkvKg0KCQkgKiBXaXRoIHNpZ25h
bHMgcGVuZGluZywgdGhpcyB0dXJucyBpbnRvDQoJCSAqIHRoZSB0cnlsb2Nr
IGZhaWx1cmUgY2FzZSAtIHdlIHdvbid0IGJlDQoJCSAqIHNsZWVwaW5nLCBh
bmQgd2UqIGNhbid0IGdldCB0aGUgbG9jayBhcw0KCQkgKiBpdCBoYXMgY29u
dGVudGlvbi4gSnVzdCBjb3JyZWN0IHRoZSBjb3VudA0KCQkgKiBhbmQgZXhp
dC4NCgkJICovDQoJCWlmIChzaWduYWxfcGVuZGluZyhjdXJyZW50KSkgew0K
CQkJcmV0dmFsID0gLUVJTlRSOw0KCQkJc2VtLT5zbGVlcGVycyA9IDA7DQoJ
CQlhdG9taWNfYWRkKHNsZWVwZXJzLCAmc2VtLT5jb3VudCk7DQoJCQlicmVh
azsNCgkJfQ0KDQoJCS8qDQoJCSAqIEFkZCAiZXZlcnlib2R5IGVsc2UiIGlu
dG8gaXQuIFRoZXkgYXJlbid0DQoJCSAqIHBsYXlpbmcsIGJlY2F1c2Ugd2Ug
b3duIHRoZSBzcGlubG9jay4gVGhlDQoJCSAqICItMSIgaXMgYmVjYXVzZSB3
ZSdyZSBzdGlsbCBob3BpbmcgdG8gZ2V0DQoJCSAqIHRoZSBsb2NrLg0KCQkg
Ki8NCgkJaWYgKCFhdG9taWNfYWRkX25lZ2F0aXZlKHNsZWVwZXJzIC0gMSwg
JnNlbS0+Y291bnQpKSB7DQoJCQlzZW0tPnNsZWVwZXJzID0gMDsNCgkJCWJy
ZWFrOw0KCQl9DQoJCXNlbS0+c2xlZXBlcnMgPSAxOwkvKiB1cyAtIHNlZSAt
MSBhYm92ZSAqLw0KCQlzcGluX3VubG9ja19pcnEoJnNlbWFwaG9yZV9sb2Nr
KTsNCg0KCQlzY2hlZHVsZSgpOw0KCQl0c2stPnN0YXRlID0gVEFTS19JTlRF
UlJVUFRJQkxFOw0KCQlzcGluX2xvY2tfaXJxKCZzZW1hcGhvcmVfbG9jayk7
DQoJfQ0KCXNwaW5fdW5sb2NrX2lycSgmc2VtYXBob3JlX2xvY2spOw0KCXRz
ay0+c3RhdGUgPSBUQVNLX1JVTk5JTkc7DQoJcmVtb3ZlX3dhaXRfcXVldWUo
JnNlbS0+d2FpdCwgJndhaXQpOw0KCXdha2VfdXAoJnNlbS0+d2FpdCk7DQoJ
cmV0dXJuIHJldHZhbDsNCn0NCg0KLyoNCiAqIFRyeWxvY2sgZmFpbGVkIC0g
bWFrZSBzdXJlIHdlIGNvcnJlY3QgZm9yDQogKiBoYXZpbmcgZGVjcmVtZW50
ZWQgdGhlIGNvdW50Lg0KICoNCiAqIFdlIGNvdWxkIGhhdmUgZG9uZSB0aGUg
dHJ5bG9jayB3aXRoIGENCiAqIHNpbmdsZSAiY21weGNoZyIgd2l0aG91dCBm
YWlsdXJlIGNhc2VzLA0KICogYnV0IHRoZW4gaXQgd291bGRuJ3Qgd29yayBv
biBhIDM4Ni4NCiAqLw0KaW50IF9fZG93bl90cnlsb2NrKHN0cnVjdCBzZW1h
cGhvcmUgKiBzZW0pDQp7DQoJaW50IHNsZWVwZXJzOw0KCXVuc2lnbmVkIGxv
bmcgZmxhZ3M7DQoNCglzcGluX2xvY2tfaXJxc2F2ZSgmc2VtYXBob3JlX2xv
Y2ssIGZsYWdzKTsNCglzbGVlcGVycyA9IHNlbS0+c2xlZXBlcnMgKyAxOw0K
CXNlbS0+c2xlZXBlcnMgPSAwOw0KDQoJLyoNCgkgKiBBZGQgImV2ZXJ5Ym9k
eSBlbHNlIiBhbmQgdXMgaW50byBpdC4gVGhleSBhcmVuJ3QNCgkgKiBwbGF5
aW5nLCBiZWNhdXNlIHdlIG93biB0aGUgc3BpbmxvY2suDQoJICovDQoJaWYg
KCFhdG9taWNfYWRkX25lZ2F0aXZlKHNsZWVwZXJzLCAmc2VtLT5jb3VudCkp
DQoJCXdha2VfdXAoJnNlbS0+d2FpdCk7DQoNCglzcGluX3VubG9ja19pcnFy
ZXN0b3JlKCZzZW1hcGhvcmVfbG9jaywgZmxhZ3MpOw0KCXJldHVybiAxOw0K
fQ0KDQoNCi8qDQogKiBUaGUgc2VtYXBob3JlIG9wZXJhdGlvbnMgaGF2ZSBh
IHNwZWNpYWwgY2FsbGluZyBzZXF1ZW5jZSB0aGF0DQogKiBhbGxvdyB1cyB0
byBkbyBhIHNpbXBsZXIgaW4tbGluZSB2ZXJzaW9uIG9mIHRoZW0uIFRoZXNl
IHJvdXRpbmVzDQogKiBuZWVkIHRvIGNvbnZlcnQgdGhhdCBzZXF1ZW5jZSBi
YWNrIGludG8gdGhlIEMgc2VxdWVuY2Ugd2hlbg0KICogdGhlcmUgaXMgY29u
dGVudGlvbiBvbiB0aGUgc2VtYXBob3JlLg0KICoNCiAqICVlY3ggY29udGFp
bnMgdGhlIHNlbWFwaG9yZSBwb2ludGVyIG9uIGVudHJ5LiBTYXZlIHRoZSBD
LWNsb2JiZXJlZA0KICogcmVnaXN0ZXJzICglZWF4LCAlZWR4IGFuZCAlZWN4
KSBleGNlcHQgJWVheCB3aGVuIHVzZWQgYXMgYSByZXR1cm4NCiAqIHZhbHVl
Li4NCiAqLw0KYXNtKA0KIi50ZXh0XG4iDQoiLmFsaWduIDRcbiINCiIuZ2xv
YmwgX19kb3duX2ZhaWxlZFxuIg0KIl9fZG93bl9mYWlsZWQ6XG5cdCINCgki
cHVzaGwgJWVheFxuXHQiDQoJInB1c2hsICVlZHhcblx0Ig0KCSJwdXNobCAl
ZWN4XG5cdCINCgkiY2FsbCBfX2Rvd25cblx0Ig0KCSJwb3BsICVlY3hcblx0
Ig0KCSJwb3BsICVlZHhcblx0Ig0KCSJwb3BsICVlYXhcblx0Ig0KCSJyZXQi
DQopOw0KDQphc20oDQoiLnRleHRcbiINCiIuYWxpZ24gNFxuIg0KIi5nbG9i
bCBfX2Rvd25fZmFpbGVkX2ludGVycnVwdGlibGVcbiINCiJfX2Rvd25fZmFp
bGVkX2ludGVycnVwdGlibGU6XG5cdCINCgkicHVzaGwgJWVkeFxuXHQiDQoJ
InB1c2hsICVlY3hcblx0Ig0KCSJjYWxsIF9fZG93bl9pbnRlcnJ1cHRpYmxl
XG5cdCINCgkicG9wbCAlZWN4XG5cdCINCgkicG9wbCAlZWR4XG5cdCINCgki
cmV0Ig0KKTsNCg0KYXNtKA0KIi50ZXh0XG4iDQoiLmFsaWduIDRcbiINCiIu
Z2xvYmwgX19kb3duX2ZhaWxlZF90cnlsb2NrXG4iDQoiX19kb3duX2ZhaWxl
ZF90cnlsb2NrOlxuXHQiDQoJInB1c2hsICVlZHhcblx0Ig0KCSJwdXNobCAl
ZWN4XG5cdCINCgkiY2FsbCBfX2Rvd25fdHJ5bG9ja1xuXHQiDQoJInBvcGwg
JWVjeFxuXHQiDQoJInBvcGwgJWVkeFxuXHQiDQoJInJldCINCik7DQoNCmFz
bSgNCiIudGV4dFxuIg0KIi5hbGlnbiA0XG4iDQoiLmdsb2JsIF9fdXBfd2Fr
ZXVwXG4iDQoiX191cF93YWtldXA6XG5cdCINCgkicHVzaGwgJWVheFxuXHQi
DQoJInB1c2hsICVlZHhcblx0Ig0KCSJwdXNobCAlZWN4XG5cdCINCgkiY2Fs
bCBfX3VwXG5cdCINCgkicG9wbCAlZWN4XG5cdCINCgkicG9wbCAlZWR4XG5c
dCINCgkicG9wbCAlZWF4XG5cdCINCgkicmV0Ig0KKTsNCg0KLyoNCiAqIHJ3
IHNwaW5sb2NrIGZhbGxiYWNrcw0KICovDQojaWYgZGVmaW5lZChDT05GSUdf
U01QKQ0KYXNtKA0KIiBcDQouYWxpZ24JNCBcDQouZ2xvYmwJX193cml0ZV9s
b2NrX2ZhaWxlZCBcDQpfX3dyaXRlX2xvY2tfZmFpbGVkOiBcDQoJIiBMT0NL
ICJhZGRsCSQiIFJXX0xPQ0tfQklBU19TVFIgIiwoJWVheCkgXA0KMToJY21w
bAkkIiBSV19MT0NLX0JJQVNfU1RSICIsKCVlYXgpIFwNCglqbmUJMWIgXA0K
XA0KCSIgTE9DSyAic3VibAkkIiBSV19MT0NLX0JJQVNfU1RSICIsKCVlYXgp
IFwNCglqbnoJX193cml0ZV9sb2NrX2ZhaWxlZCBcDQoJcmV0IFwNClwNClwN
Ci5hbGlnbgk0IFwNCi5nbG9ibAlfX3JlYWRfbG9ja19mYWlsZWQgXA0KX19y
ZWFkX2xvY2tfZmFpbGVkOiBcDQoJbG9jayA7IGluY2wJKCVlYXgpIFwNCjE6
CWNtcGwJJDEsKCVlYXgpIFwNCglqcwkxYiBcDQpcDQoJbG9jayA7IGRlY2wJ
KCVlYXgpIFwNCglqcwlfX3JlYWRfbG9ja19mYWlsZWQgXA0KCXJldCBcDQoi
DQopOw0KI2VuZGlmDQo=
--747458502-731034891-994360095=:11437--
