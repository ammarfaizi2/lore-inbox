Return-Path: <linux-kernel-owner+willy=40w.ods.org-S266216AbUFPIUg@vger.kernel.org>
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S266216AbUFPIUg (ORCPT <rfc822;willy@w.ods.org>);
	Wed, 16 Jun 2004 04:20:36 -0400
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S266217AbUFPIUf
	(ORCPT <rfc822;linux-kernel-outgoing>);
	Wed, 16 Jun 2004 04:20:35 -0400
Received: from mx1.redhat.com ([66.187.233.31]:54218 "EHLO mx1.redhat.com")
	by vger.kernel.org with ESMTP id S266216AbUFPIUe (ORCPT
	<rfc822;linux-kernel@vger.kernel.org>);
	Wed, 16 Jun 2004 04:20:34 -0400
From: David Howells <dhowells@redhat.com>
In-Reply-To: <40CFB2A1.8070104@yahoo.com.au> 
References: <40CFB2A1.8070104@yahoo.com.au>  <20040615164848.GA8276@hobbes.itsari.int> 
To: Nick Piggin <nickpiggin@yahoo.com.au>
Cc: Nuno Monteiro <nuno@itsari.org>, linux-kernel@vger.kernel.org,
       marcelo.tosatti@cyclades.com
Subject: Re: [2.4] build error with latest BK 
User-Agent: EMH/1.14.1 SEMI/1.14.5 (Awara-Onsen) FLIM/1.14.5 (Demachiyanagi) APEL/10.6 Emacs/21.3 (i386-redhat-linux-gnu) MULE/5.0 (SAKAKI)
MIME-Version: 1.0 (generated by SEMI 1.14.5 - "Awara-Onsen")
Content-Type: text/plain; charset=US-ASCII
Date: Wed, 16 Jun 2004 09:20:22 +0100
Message-ID: <3473.1087374022@redhat.com>
Sender: linux-kernel-owner@vger.kernel.org
X-Mailing-List: linux-kernel@vger.kernel.org


> -		put_task_struct(tsk);
> +		task_unlock(tsk);

Ummm... that doesn't look right.

> -	get_task_struct(tsk);

This is necessary to stop someone deallocating the task structure, can the
task structure be deallocated whilst locked?

David
