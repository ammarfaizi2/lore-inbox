Return-Path: <linux-kernel-owner@vger.kernel.org>
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id <S132809AbRDIRxB>; Mon, 9 Apr 2001 13:53:01 -0400
Received: (majordomo@vger.kernel.org) by vger.kernel.org
	id <S132810AbRDIRwv>; Mon, 9 Apr 2001 13:52:51 -0400
Received: from echo.sound.net ([205.242.192.21]:60886 "HELO echo.sound.net")
	by vger.kernel.org with SMTP id <S132809AbRDIRwd>;
	Mon, 9 Apr 2001 13:52:33 -0400
Date: Mon, 9 Apr 2001 12:52:06 -0500 (CDT)
From: Hal Duston <hald@sound.net>
To: linux-kernel@vger.kernel.org
cc: alan@lxorguk.ukuu.org.uk
Subject: [PATCH] PS/2 ESDI
Message-ID: <Pine.GSO.4.10.10104091244070.24146-200000@sound.net>
MIME-Version: 1.0
Content-Type: MULTIPART/MIXED; BOUNDARY="-559023410-851401618-986838726=:24146"
Sender: linux-kernel-owner@vger.kernel.org
X-Mailing-List: linux-kernel@vger.kernel.org

  This message is in MIME format.  The first part should be readable text,
  while the remaining parts are likely unreadable without MIME-aware tools.
  Send mail to mime@docserver.cac.washington.edu for more info.

---559023410-851401618-986838726=:24146
Content-Type: TEXT/PLAIN; charset=US-ASCII

All,	

Here is a patch I have put together (with much assistance from Jens Axboe)
that permits ps2esdi machines to boot again.  It is against 2.4.3.  In
case my mailer mangles it, it is also available at the following URL.

http://www.sound.net/~hald/projects/ps2esdi/ps2esdi-2.4.3.patch0

Thanks, and not on the list,
Hal Duston
hald@sound.net

---559023410-851401618-986838726=:24146
Content-Type: TEXT/PLAIN; charset=US-ASCII; name="ps2esdi-2.4.3.patch0"
Content-Transfer-Encoding: BASE64
Content-ID: <Pine.GSO.4.10.10104091252060.24146@sound.net>
Content-Description: 
Content-Disposition: attachment; filename="ps2esdi-2.4.3.patch0"

QnJpbmcgcHMyZXNkaSBkcml2ZXIgdXAgdG8gZGF0ZSB3aXRoIGN1cnJlbnQg
YmxvY2sgZGV2aWNlIGFyY2hpdGVjdHVyZS4NCk1ha2UgaXQgYm9vdC4NCg0K
Q2hhbmdlIG5yX3NlY3RvcnMgdG8gY3VycmVudF9ucl9zZWN0b3JzLg0KUmVt
b3ZlIHJlY3Vyc2lvbi4NClJlbW92ZSBzbGVlcF9vbi4NCkFkZCBzcGlubG9j
ayB0byBJU1IgYW5kIGNhbGwgZW5kX3JlcXVlc3QgZnJvbSB0aGVyZS4NCg0K
LS0tIGxpbnV4LTIuNC4zL2RyaXZlcnMvYmxvY2svcHMyZXNkaS5jCUZyaSBP
Y3QgMjcgMDE6MzU6NDcgMjAwMA0KKysrIGxpbnV4LTIuNC4zLWhkZDAvZHJp
dmVycy9ibG9jay9wczJlc2RpLmMJU2F0IEFwciAgNyAyMjo0NzowMyAyMDAx
DQpAQCAtODksOCArODksNiBAQA0KIHN0YXRpYyB2b2lkIHBzMmVzZGlfaW5p
dGlhbF9yZXNldF9pbnRfaGFuZGxlcih1X2ludCk7DQogc3RhdGljIHZvaWQg
cHMyZXNkaV9nZW9tZXRyeV9pbnRfaGFuZGxlcih1X2ludCk7DQogDQotc3Rh
dGljIHZvaWQgcHMyZXNkaV9jb250aW51ZV9yZXF1ZXN0KHZvaWQpOw0KLQ0K
IHN0YXRpYyBpbnQgcHMyZXNkaV9vcGVuKHN0cnVjdCBpbm9kZSAqaW5vZGUs
IHN0cnVjdCBmaWxlICpmaWxlKTsNCiANCiBzdGF0aWMgaW50IHBzMmVzZGlf
cmVsZWFzZShzdHJ1Y3QgaW5vZGUgKmlub2RlLCBzdHJ1Y3QgZmlsZSAqZmls
ZSk7DQpAQCAtNDY5LDI5ICs0NjcsMjYgQEANCiAJICAgICAgIERFVklDRV9O
QU1FLA0KIAkgICAgICAgQ1VSUkVOVF9ERVYsIE1JTk9SKENVUlJFTlQtPnJx
X2RldiksDQogCSAgICAgICBDVVJSRU5ULT5jbWQsIENVUlJFTlQtPnNlY3Rv
ciwNCi0JICAgICAgIENVUlJFTlQtPm5yX3NlY3RvcnMsIENVUlJFTlQtPmJ1
ZmZlcik7DQorCSAgICAgICBDVVJSRU5ULT5jdXJyZW50X25yX3NlY3RvcnMs
IENVUlJFTlQtPmJ1ZmZlcik7DQogI2VuZGlmDQogDQogCS8qIHN0YW5kYXJk
IG1hY3JvIHRoYXQgZW5zdXJlcyB0aGF0IHJlcXVlc3RzIGFyZSByZWFsbHkg
b24gdGhlDQogCSAgIGxpc3QgKyBzYW5pdHkgY2hlY2tzLiAgICAgICAgICAg
ICAgICAgICAgICovDQogCUlOSVRfUkVRVUVTVDsNCiANCi0JaWYgKHZpcnRf
dG9fYnVzKENVUlJFTlQtPmJ1ZmZlciArIENVUlJFTlQtPm5yX3NlY3RvcnMg
KiA1MTIpID4gMTYgKiBNQikgew0KKwlpZiAodmlydF90b19idXMoQ1VSUkVO
VC0+YnVmZmVyICsgQ1VSUkVOVC0+Y3VycmVudF9ucl9zZWN0b3JzICogNTEy
KSA+IDE2ICogTUIpIHsNCiAJCXByaW50aygiJXM6IERNQSBhYm92ZSAxNk1C
IG5vdCBzdXBwb3J0ZWRcbiIsIERFVklDRV9OQU1FKTsNCiAJCWVuZF9yZXF1
ZXN0KEZBSUwpOw0KLQkJaWYgKCFRVUVVRV9FTVBUWSkNCi0JCQlkb19wczJl
c2RpX3JlcXVlc3QocSk7DQotCQlyZXR1cm47DQogCX0JCQkvKiBjaGVjayBm
b3IgYWJvdmUgMTZNYiBkbWFzICovDQotCWlmICgoQ1VSUkVOVF9ERVYgPCBw
czJlc2RpX2RyaXZlcykgJiYNCi0JICAgIChDVVJSRU5ULT5zZWN0b3IgKyBD
VVJSRU5ULT5ucl9zZWN0b3JzIDw9DQorCWVsc2UgaWYgKChDVVJSRU5UX0RF
ViA8IHBzMmVzZGlfZHJpdmVzKSAmJg0KKwkgICAgKENVUlJFTlQtPnNlY3Rv
ciArIENVUlJFTlQtPmN1cnJlbnRfbnJfc2VjdG9ycyA8PQ0KIAkgICAgIHBz
MmVzZGlbTUlOT1IoQ1VSUkVOVC0+cnFfZGV2KV0ubnJfc2VjdHMpKSB7DQog
I2lmIDANCiAJCXByaW50aygiJXM6Z290IHJlcXVlc3QuIGRldmljZSA6ICVk
IG1pbm9yIDogJWQgY29tbWFuZCA6ICVkICBzZWN0b3IgOiAlbGQgY291bnQg
OiAlbGRcbiIsDQogCQkgICAgICAgREVWSUNFX05BTUUsDQotCQkgICAgICAg
Q1VSUkVOVF9ERVYsIE1JTk9SKENVUlJFTlQtPmRldiksDQorCQkgICAgICAg
Q1VSUkVOVF9ERVYsIE1JTk9SKENVUlJFTlQtPnJxX2RldiksDQogCQkgICAg
ICAgQ1VSUkVOVC0+Y21kLCBDVVJSRU5ULT5zZWN0b3IsDQotCQkgICAgICAg
Q1VSUkVOVC0+bnJfc2VjdG9ycyk7DQorCQkgICAgICAgQ1VSUkVOVC0+Y3Vy
cmVudF9ucl9zZWN0b3JzKTsNCiAjZW5kaWYNCiANCiANCkBAIC01MDAsMjEg
KzQ5NSwxNyBAQA0KICNpZiAwDQogCQlwcmludGsoIiVzOiBibG9ja251bWJl
ciA6ICVkXG4iLCBERVZJQ0VfTkFNRSwgYmxvY2spOw0KICNlbmRpZg0KLQkJ
Y291bnQgPSBDVVJSRU5ULT5ucl9zZWN0b3JzOw0KKwkJY291bnQgPSBDVVJS
RU5ULT5jdXJyZW50X25yX3NlY3RvcnM7DQogCQlzd2l0Y2ggKENVUlJFTlQt
PmNtZCkgew0KIAkJY2FzZSBSRUFEOg0KIAkJCXBzMmVzZGlfcmVhZHdyaXRl
KFJFQUQsIENVUlJFTlRfREVWLCBibG9jaywgY291bnQpOw0KLQkJCXJldHVy
bjsNCiAJCQlicmVhazsNCiAJCWNhc2UgV1JJVEU6DQogCQkJcHMyZXNkaV9y
ZWFkd3JpdGUoV1JJVEUsIENVUlJFTlRfREVWLCBibG9jaywgY291bnQpOw0K
LQkJCXJldHVybjsNCiAJCQlicmVhazsNCiAJCWRlZmF1bHQ6DQogCQkJcHJp
bnRrKCIlczogVW5rbm93biBjb21tYW5kXG4iLCBERVZJQ0VfTkFNRSk7DQog
CQkJZW5kX3JlcXVlc3QoRkFJTCk7DQotCQkJaWYgKCFRVUVVRV9FTVBUWSkN
Ci0JCQkJZG9fcHMyZXNkaV9yZXF1ZXN0KHEpOw0KIAkJCWJyZWFrOw0KIAkJ
fQkJLyogaGFuZGxlIGRpZmZlcmVudCBjb21tYW5kcyAqLw0KIAl9DQpAQCAt
NTIzLDggKzUxNCw2IEBADQogCQlwcmludGsoIkdycnIuIGVycm9yLiBwczJl
c2RpX2RyaXZlczogJWQsICVsdSAlbHVcbiIsIHBzMmVzZGlfZHJpdmVzLA0K
IAkJICAgICAgIENVUlJFTlQtPnNlY3RvciwgcHMyZXNkaVtNSU5PUihDVVJS
RU5ULT5ycV9kZXYpXS5ucl9zZWN0cyk7DQogCQllbmRfcmVxdWVzdChGQUlM
KTsNCi0JCWlmICghUVVFVUVfRU1QVFkpDQotCQkJZG9fcHMyZXNkaV9yZXF1
ZXN0KHEpOw0KIAl9DQogDQogfQkJCQkvKiBtYWluIHN0cmF0ZWd5IHJvdXRp
bmUgKi8NCkBAIC01NzAsOCArNTU5LDYgQEANCiAJdV9zaG9ydCBjbWRfYmxr
W1RZUEVfMV9DTURfQkxLX0xFTkdUSF07DQogDQogCS8qIGRvIHNvbWUgcmVs
ZXZhbnQgYXJpdGhtYXRpYyAqLw0KLQlDVVJSRU5ULT5jdXJyZW50X25yX3Nl
Y3RvcnMgPQ0KLQkgICAgKGNvdW50IDwgKDIgKiBNQVhfMTZCSVQgLyBTRUNU
X1NJWkUpKSA/IGNvdW50IDogKDIgKiBNQVhfMTZCSVQgLyBTRUNUX1NJWkUp
Ow0KIAl0cmFjayA9IGJsb2NrIC8gcHMyZXNkaV9pbmZvW2RyaXZlXS5zZWN0
Ow0KIAloZWFkID0gdHJhY2sgJSBwczJlc2RpX2luZm9bZHJpdmVdLmhlYWQ7
DQogCWN5bGluZGVyID0gdHJhY2sgLyBwczJlc2RpX2luZm9bZHJpdmVdLmhl
YWQ7DQpAQCAtNTkwLDEzICs1NzcsOCBAQA0KIAkvKiBzZW5kIHRoZSBjb21t
YW5kIGJsb2NrIHRvIHRoZSBjb250cm9sbGVyICovDQogCWlmIChwczJlc2Rp
X291dF9jbWRfYmxrKGNtZF9ibGspKSB7DQogCQlwcmludGsoIiVzOiBDb250
cm9sbGVyIGZhaWxlZFxuIiwgREVWSUNFX05BTUUpOw0KLQkJaWYgKCgrK0NV
UlJFTlQtPmVycm9ycykgPCBNQVhfUkVUUklFUykNCi0JCQlyZXR1cm4gZG9f
cHMyZXNkaV9yZXF1ZXN0KE5VTEwpOw0KLQkJZWxzZSB7DQorCQlpZiAoKCsr
Q1VSUkVOVC0+ZXJyb3JzKSA+PSBNQVhfUkVUUklFUykNCiAJCQllbmRfcmVx
dWVzdChGQUlMKTsNCi0JCQlpZiAoIVFVRVVFX0VNUFRZKQ0KLQkJCQlkb19w
czJlc2RpX3JlcXVlc3QoTlVMTCk7DQotCQl9DQogCX0NCiAJLyogY2hlY2sg
Zm9yIGZhaWx1cmUgdG8gcHV0IG91dCB0aGUgY29tbWFuZCBibG9jayAqLyAN
CiAJZWxzZSB7DQpAQCAtNjgwLDcgKzY2Miw3IEBADQogCWJ1ZmZlcj0oY2hh
ciAqKXZpcnRfdG9fYnVzKGJ1ZmZlcik7DQogDQogI2lmIDANCi0JcHJpbnRr
KCJwczJlc2RpOiBiX3dhaXQ6ICVwXG4iLCBDVVJSRU5ULT5iaC0+Yl93YWl0
KTsNCisJcHJpbnRrKCJwczJlc2RpOiBiX3dhaXQ6ICVwXG4iLCAmQ1VSUkVO
VC0+YmgtPmJfd2FpdCk7DQogI2VuZGlmDQogCWNsaSgpOw0KIA0KQEAgLTg3
MSw3ICs4NTMsOSBAQA0KIA0KIHN0YXRpYyB2b2lkIHBzMmVzZGlfbm9ybWFs
X2ludGVycnVwdF9oYW5kbGVyKHVfaW50IGludF9yZXRfY29kZSkNCiB7DQor
CXVuc2lnbmVkIGxvbmcgZmxhZ3M7DQogCXVfaW50IHN0YXR1czsNCisJdV9p
bnQgZW5kaW5nOw0KIAlpbnQgaTsNCiANCiAJc3dpdGNoIChpbnRfcmV0X2Nv
ZGUgJiAweDBmKSB7DQpAQCAtODc5LDEyICs4NjMsMTQgQEANCiAJCXBzMmVz
ZGlfcHJlcF9kbWEoQ1VSUkVOVC0+YnVmZmVyLCBDVVJSRU5ULT5jdXJyZW50
X25yX3NlY3RvcnMsDQogCQkgICAgKENVUlJFTlQtPmNtZCA9PSBSRUFEKSA/
IERNQV9SRUFEXzE2IDogRE1BX1dSSVRFXzE2KTsNCiAJCW91dGIoQ1RSTF9F
TkFCTEVfRE1BIHwgQ1RSTF9FTkFCTEVfSU5UUiwgRVNESV9DT05UUk9MKTsN
CisJCWVuZGluZyA9IC0xOw0KIAkJYnJlYWs7DQogDQogCWNhc2UgSU5UX0FU
VE5fRVJST1I6DQogCQlwcmludGsoIiVzOiBBdHRlbnRpb24gZXJyb3IuIGlu
dGVycnVwdCBzdGF0dXMgOiAlMDJYXG4iLCBERVZJQ0VfTkFNRSwNCiAJCSAg
ICAgICBpbnRfcmV0X2NvZGUpOw0KIAkJb3V0YihDVFJMX0VOQUJMRV9JTlRS
LCBFU0RJX0NPTlRST0wpOw0KKwkJZW5kaW5nID0gRkFJTDsNCiAJCWJyZWFr
Ow0KIA0KIAljYXNlIElOVF9DTURfQ09NUExFVEU6DQpAQCAtODkzLDEzICs4
NzksOSBAQA0KIAkJCXByaW50aygiJXM6IHRpbWVvdXQgcmVhZGluZyBzdGF0
dXMgd29yZFxuIiwgREVWSUNFX05BTUUpOw0KIAkJCW91dGIoKGludF9yZXRf
Y29kZSAmIDB4ZTApIHwgQVRUX0VPSSwgRVNESV9BVFROKTsNCiAJCQlvdXRi
KENUUkxfRU5BQkxFX0lOVFIsIEVTRElfQ09OVFJPTCk7DQotCQkJaWYgKCgr
K0NVUlJFTlQtPmVycm9ycykgPCBNQVhfUkVUUklFUykNCi0JCQkJZG9fcHMy
ZXNkaV9yZXF1ZXN0KE5VTEwpOw0KLQkJCWVsc2Ugew0KLQkJCQllbmRfcmVx
dWVzdChGQUlMKTsNCi0JCQkJaWYgKCFRVUVVRV9FTVBUWSkNCi0JCQkJCWRv
X3BzMmVzZGlfcmVxdWVzdChOVUxMKTsNCi0JCQl9DQorCQkJaWYgKCgrK0NV
UlJFTlQtPmVycm9ycykgPj0gTUFYX1JFVFJJRVMpDQorCQkJCWVuZGluZyA9
IEZBSUw7DQorCQkJZW5kaW5nID0gLTE7DQogCQkJYnJlYWs7DQogCQl9DQog
CQlzdGF0dXMgPSBpbncoRVNESV9TVFRfSU5UKTsNCkBAIC05MTAsMTUgKzg5
MiwxNiBAQA0KIAkJCW91dGIoKGludF9yZXRfY29kZSAmIDB4ZTApIHwgQVRU
X0VPSSwgRVNESV9BVFROKTsNCiAJCQlvdXRiKENUUkxfRU5BQkxFX0lOVFIs
IEVTRElfQ09OVFJPTCk7DQogI2lmIDANCi0JCQlwcmludGsoInBzMmVzZGk6
IGNtZF9jb21wbGV0ZSBiX3dhaXQ6ICVwXG4iLCBDVVJSRU5ULT5iaC0+Yl93
YWl0KTsNCisJCQlwcmludGsoInBzMmVzZGk6IGNtZF9jb21wbGV0ZSBiX3dh
aXQ6ICVwXG4iLCAmQ1VSUkVOVC0+YmgtPmJfd2FpdCk7DQogI2VuZGlmDQot
CQkJcHMyZXNkaV9jb250aW51ZV9yZXF1ZXN0KCk7DQorCQkJZW5kaW5nID0g
U1VDQ0VTOw0KIAkJCWJyZWFrOw0KIAkJZGVmYXVsdDoNCiAJCQlwcmludGso
IiVzOiBpbnRlcnJ1cHQgZm9yIHVua25vd24gY29tbWFuZCAlMDJYXG4iLA0K
IAkJCSAgICAgICBERVZJQ0VfTkFNRSwgc3RhdHVzICYgMHgxZik7DQogCQkJ
b3V0YigoaW50X3JldF9jb2RlICYgMHhlMCkgfCBBVFRfRU9JLCBFU0RJX0FU
VE4pOw0KIAkJCW91dGIoQ1RSTF9FTkFCTEVfSU5UUiwgRVNESV9DT05UUk9M
KTsNCisJCQllbmRpbmcgPSAtMTsNCiAJCQlicmVhazsNCiAJCX0NCiAJCWJy
ZWFrOw0KQEAgLTkyOSw3ICs5MTIsNyBAQA0KIAkJZHVtcF9jbWRfY29tcGxl
dGVfc3RhdHVzKGludF9yZXRfY29kZSk7DQogCQlvdXRiKChpbnRfcmV0X2Nv
ZGUgJiAweGUwKSB8IEFUVF9FT0ksIEVTRElfQVRUTik7DQogCQlvdXRiKENU
UkxfRU5BQkxFX0lOVFIsIEVTRElfQ09OVFJPTCk7DQotCQlwczJlc2RpX2Nv
bnRpbnVlX3JlcXVlc3QoKTsNCisJCWVuZGluZyA9IFNVQ0NFUzsNCiAJCWJy
ZWFrOw0KIAljYXNlIElOVF9DTURfV0FSTklORzoNCiAJY2FzZSBJTlRfQ01E
X0FCT1JUOg0KQEAgLTkzOSwyMiArOTIyLDE2IEBADQogCQlkdW1wX2NtZF9j
b21wbGV0ZV9zdGF0dXMoaW50X3JldF9jb2RlKTsNCiAJCW91dGIoKGludF9y
ZXRfY29kZSAmIDB4ZTApIHwgQVRUX0VPSSwgRVNESV9BVFROKTsNCiAJCW91
dGIoQ1RSTF9FTkFCTEVfSU5UUiwgRVNESV9DT05UUk9MKTsNCi0JCWlmICgo
KytDVVJSRU5ULT5lcnJvcnMpIDwgTUFYX1JFVFJJRVMpDQotCQkJZG9fcHMy
ZXNkaV9yZXF1ZXN0KE5VTEwpOw0KLQkJZWxzZSB7DQotCQkJZW5kX3JlcXVl
c3QoRkFJTCk7DQotCQkJaWYgKCFRVUVVRV9FTVBUWSkNCi0JCQkJZG9fcHMy
ZXNkaV9yZXF1ZXN0KE5VTEwpOw0KLQkJfQ0KKwkJaWYgKCgrK0NVUlJFTlQt
PmVycm9ycykgPj0gTUFYX1JFVFJJRVMpDQorCQkJZW5kaW5nID0gRkFJTDsN
CisJCWVuZGluZyA9IC0xOw0KIAkJYnJlYWs7DQogDQogCWNhc2UgSU5UX0NN
RF9CTEtfRVJSOg0KIAkJZHVtcF9jbWRfY29tcGxldGVfc3RhdHVzKGludF9y
ZXRfY29kZSk7DQogCQlvdXRiKChpbnRfcmV0X2NvZGUgJiAweGUwKSB8IEFU
VF9FT0ksIEVTRElfQVRUTik7DQogCQlvdXRiKENUUkxfRU5BQkxFX0lOVFIs
IEVTRElfQ09OVFJPTCk7DQotCQllbmRfcmVxdWVzdChGQUlMKTsNCi0JCWlm
ICghUVVFVUVfRU1QVFkpDQotCQkJZG9fcHMyZXNkaV9yZXF1ZXN0KE5VTEwp
Ow0KKwkJZW5kaW5nID0gRkFJTDsNCiAJCWJyZWFrOw0KIA0KIAljYXNlIElO
VF9DTURfRk9STUFUOg0KQEAgLTk2MiwxMiArOTM5LDE0IEBADQogCQkgICAg
ICAgLERFVklDRV9OQU1FKTsNCiAJCW91dGIoKGludF9yZXRfY29kZSAmIDB4
ZTApIHwgQVRUX0VPSSwgRVNESV9BVFROKTsNCiAJCW91dGIoQ1RSTF9FTkFC
TEVfSU5UUiwgRVNESV9DT05UUk9MKTsNCisJCWVuZGluZyA9IC0xOw0KIAkJ
YnJlYWs7DQogDQogCWNhc2UgSU5UX1JFU0VUOg0KIAkJLyogQkEgcHJpbnRr
KCIlczogcmVzZXQgY29tcGxldGVkLlxuIiwgREVWSUNFX05BTUUpICovIDsN
CiAJCW91dGIoKGludF9yZXRfY29kZSAmIDB4ZTApIHwgQVRUX0VPSSwgRVNE
SV9BVFROKTsNCiAJCW91dGIoQ1RSTF9FTkFCTEVfSU5UUiwgRVNESV9DT05U
Uk9MKTsNCisJCWVuZGluZyA9IC0xOw0KIAkJYnJlYWs7DQogDQogCWRlZmF1
bHQ6DQpAQCAtOTc1LDI0ICs5NTQsMTYgQEANCiAJCSAgICAgICBERVZJQ0Vf
TkFNRSwgaW50X3JldF9jb2RlICYgMHhmKTsNCiAJCW91dGIoKGludF9yZXRf
Y29kZSAmIDB4ZTApIHwgQVRUX0VPSSwgRVNESV9BVFROKTsNCiAJCW91dGIo
Q1RSTF9FTkFCTEVfSU5UUiwgRVNESV9DT05UUk9MKTsNCisJCWVuZGluZyA9
IC0xOw0KIAkJYnJlYWs7DQogCX0NCi0NCi19CQkJCS8qIGhhbmRsZSBpbnRl
cnJ1cHRzICovDQotDQotDQotc3RhdGljIHZvaWQgcHMyZXNkaV9jb250aW51
ZV9yZXF1ZXN0KHZvaWQpDQotew0KLQlpZiAoQ1VSUkVOVC0+bnJfc2VjdG9y
cyAtPSBDVVJSRU5ULT5jdXJyZW50X25yX3NlY3RvcnMpIHsNCi0JCUNVUlJF
TlQtPmJ1ZmZlciArPSBDVVJSRU5ULT5jdXJyZW50X25yX3NlY3RvcnMgKiBT
RUNUX1NJWkU7DQotCQlDVVJSRU5ULT5zZWN0b3IgKz0gQ1VSUkVOVC0+Y3Vy
cmVudF9ucl9zZWN0b3JzOw0KLQkJZG9fcHMyZXNkaV9yZXF1ZXN0KE5VTEwp
Ow0KLQl9IGVsc2Ugew0KLQkJZW5kX3JlcXVlc3QoU1VDQ0VTKTsNCi0JCWlm
ICghUVVFVUVfRU1QVFkpDQotCQkJZG9fcHMyZXNkaV9yZXF1ZXN0KE5VTEwp
Ow0KKwlpZihlbmRpbmcgIT0gLTEpIHsNCisJCXNwaW5fbG9ja19pcnFzYXZl
KGlvX3JlcXVlc3RfbG9jaywgZmxhZ3MpOw0KKwkJZW5kX3JlcXVlc3QoZW5k
aW5nKTsNCisJCWRvX3BzMmVzZGlfcmVxdWVzdChCTEtfREVGQVVMVF9RVUVV
RShNQUpPUl9OUikpOw0KKwkJc3Bpbl91bmxvY2tfaXJxcmVzdG9yZShpb19y
ZXF1ZXN0X2xvY2ssIGZsYWdzKTsNCiAJfQ0KLX0NCit9CQkJCS8qIGhhbmRs
ZSBpbnRlcnJ1cHRzICovDQogDQogDQogDQo=
---559023410-851401618-986838726=:24146--
