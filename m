Return-Path: <linux-kernel-owner+willy=40w.ods.org@vger.kernel.org>
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S263228AbUA0Bn6 (ORCPT <rfc822;willy@w.ods.org>);
	Mon, 26 Jan 2004 20:43:58 -0500
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S262765AbUA0Bn6
	(ORCPT <rfc822;linux-kernel-outgoing>);
	Mon, 26 Jan 2004 20:43:58 -0500
Received: from omega.webmasters.gr.jp ([218.44.239.78]:46760 "EHLO
	webmasters.gr.jp") by vger.kernel.org with ESMTP id S263228AbUA0Bnv
	(ORCPT <rfc822;linux-kernel@vger.kernel.org>);
	Mon, 26 Jan 2004 20:43:51 -0500
Date: Tue, 27 Jan 2004 10:43:44 +0900
Message-ID: <81hdyi9ne7.wl@omega.webmasters.gr.jp>
From: GOTO Masanori <gotom@debian.or.jp>
To: Andries.Brouwer@cwi.nl
Cc: akpm@osdl.org, torvalds@osdl.org, linux-kernel@vger.kernel.org
Subject: Re: [uPATCH] refuse plain ufs mount
In-Reply-To: <UTC200401250017.i0P0Hlc09374.aeb@smtp.cwi.nl>
References: <UTC200401250017.i0P0Hlc09374.aeb@smtp.cwi.nl>
User-Agent: Wanderlust/2.9.9 (Unchained Melody) SEMI/1.14.3 (Ushinoya)
 FLIM/1.14.3 (=?ISO-8859-4?Q?Unebigory=F2mae?=) APEL/10.3 Emacs/21.2
 (i386-debian-linux-gnu) MULE/5.0 (SAKAKI)
MIME-Version: 1.0 (generated by SEMI 1.14.3 - "Ushinoya")
Content-Type: text/plain; charset=US-ASCII
Sender: linux-kernel-owner@vger.kernel.org
X-Mailing-List: linux-kernel@vger.kernel.org

At Sun, 25 Jan 2004 01:17:47 +0100 (MET),
Andries.Brouwer@cwi.nl wrote:
> Installed some machine with a reiserfs rootfs.
> The boot messages contain a lot of garbage spouted by Intermezzo
> and ufs_read_super caused by the fact that the kernel tried lots
> of other filesystems before hitting on reiserfs.
> 
> On the one hand this is solved by "rootfstype=reiserfs".
> 
> But on the other hand, the kernel should not complain about the
> guessing it does itself. There is a parameter "silent" for this
> purpose, but in this case I think it cleaner just to remove the
> complaint and tighten the requirement.

I wonder this modification is really ok because user can't find why he
can't mount his ufs if he does not specify ufstype=.  Putting only
one line is not acceptable for you?

Regards,
-- gotom


--- fs/ufs/super.c	2003-10-20 12:50:24.000000000 +0900
+++ fs/ufs/super.c.new	2004-01-27 10:18:22.000000000 +0900
@@ -517,11 +517,8 @@
 		goto failed;
 	}
 	if (!(sbi->s_mount_opt & UFS_MOUNT_UFSTYPE)) {
-		printk("You didn't specify the type of your ufs filesystem\n\n"
-		"mount -t ufs -o ufstype="
-		"sun|sunx86|44bsd|old|hp|nextstep|netxstep-cd|openstep ...\n\n"
-		">>>WARNING<<< Wrong ufstype may corrupt your filesystem, "
-		"default is ufstype=old\n");
+		printk("to mount ufs, specify -o ufstype="
+		"sun|sunx86|44bsd|old(default)|hp|nextstep|netxstep-cd|openstep\n");
 		ufs_set_opt (sbi->s_mount_opt, UFSTYPE_OLD);
 	}
 
