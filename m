Return-Path: <linux-kernel-owner+willy=40w.ods.org@vger.kernel.org>
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S265144AbTFCQ5I (ORCPT <rfc822;willy@w.ods.org>);
	Tue, 3 Jun 2003 12:57:08 -0400
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S265109AbTFCQ5I
	(ORCPT <rfc822;linux-kernel-outgoing>);
	Tue, 3 Jun 2003 12:57:08 -0400
Received: from ns.suse.de ([213.95.15.193]:17421 "EHLO Cantor.suse.de")
	by vger.kernel.org with ESMTP id S265115AbTFCQzU (ORCPT
	<rfc822;linux-kernel@vger.kernel.org>);
	Tue, 3 Jun 2003 12:55:20 -0400
Date: Tue, 03 Jun 2003 19:08:44 +0200
Message-ID: <s5hvfvnm6lf.wl@alsa2.suse.de>
From: Takashi Iwai <tiwai@suse.de>
To: "Martin J. Bligh" <mbligh@aracnet.com>
Cc: linux-kernel <linux-kernel@vger.kernel.org>
Subject: Re: [Bug 770] New: usbaudio does not compile
In-Reply-To: <113000000.1054658998@flay>
References: <113000000.1054658998@flay>
User-Agent: Wanderlust/2.6.1 (Upside Down) SEMI/1.14.4 (Hosorogi)
 FLIM/1.14.4 (=?ISO-8859-4?Q?Kashiharajing=FE-mae?=) APEL/10.2 MULE
 XEmacs/21.4 (patch 12) (Portable Code) (i386-suse-linux)
MIME-Version: 1.0 (generated by SEMI 1.14.4 - "Hosorogi")
Content-Type: multipart/mixed;
 boundary="Multipart_Tue_Jun__3_19:08:44_2003-1"
Sender: linux-kernel-owner@vger.kernel.org
X-Mailing-List: linux-kernel@vger.kernel.org

--Multipart_Tue_Jun__3_19:08:44_2003-1
Content-Type: text/plain; charset=US-ASCII

Hi,

At Tue, 03 Jun 2003 09:49:58 -0700,
Martin J. Bligh <mbligh@aracnet.com> wrote:
> 
> http://bugme.osdl.org/show_bug.cgi?id=770
> 
>            Summary: usbaudio does not compile
>     Kernel Version: 2.5.70-bk8
>             Status: NEW
>           Severity: normal
>              Owner: bugme-janitors@lists.osdl.org
>          Submitter: a.akhavan@ndr.de
> 
> 
> Distribution: SuSE 8.2
> Hardware Environment: Acer Travelmate 800 LCi
> Software Environment: gcc 3.3
> Problem Description: usbaudio does not compile on 2.5.70-bk8
> (I've skipped a few snapshots, so it might have been introduced at > 2.5.70-bk5)
> It used to compile before. 
> 
> Error-log:
(snip)

this bug appears only when CONFIG_SND_DEBUG_DETECT is set, so i didn't
notice that.
please apply the patch below, or simply turn off
CONFIG_SND_DEBUG_DETECT (it's anyway redundant).

-- 
Takashi Iwai <tiwai@suse.de>		SuSE Linux AG - www.suse.de
ALSA Developer				ALSA Project - www.alsa-project.org

--Multipart_Tue_Jun__3_19:08:44_2003-1
Content-Type: application/octet-stream
Content-Disposition: attachment; filename="usb-fix.dif"
Content-Transfer-Encoding: 7bit

--- linux/sound/usb/usbaudio.c	2 Jun 2003 10:04:45 -0000	1.56
+++ linux/sound/usb/usbaudio.c	3 Jun 2003 10:05:59 -0000
@@ -1939,7 +1939,7 @@
 	switch (format) {
 	case 0: /* some devices don't define this correctly... */
 		snd_printdd(KERN_INFO "%d:%u:%d : format type 0 is detected, processed as PCM\n",
-			    dev->devnum, iface_no, altno);
+			    dev->devnum, fp->iface, fp->altsetting);
 		/* fall-through */
 	case USB_AUDIO_FORMAT_PCM:
 		if (sample_width > sample_bytes * 8) {

--Multipart_Tue_Jun__3_19:08:44_2003-1--
