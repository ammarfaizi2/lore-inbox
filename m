Return-Path: <linux-kernel-owner+willy=40w.ods.org-S269667AbUJMKk6@vger.kernel.org>
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S269667AbUJMKk6 (ORCPT <rfc822;willy@w.ods.org>);
	Wed, 13 Oct 2004 06:40:58 -0400
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S269671AbUJMKk6
	(ORCPT <rfc822;linux-kernel-outgoing>);
	Wed, 13 Oct 2004 06:40:58 -0400
Received: from mx1.redhat.com ([66.187.233.31]:9122 "EHLO mx1.redhat.com")
	by vger.kernel.org with ESMTP id S269667AbUJMKk4 (ORCPT
	<rfc822;linux-kernel@vger.kernel.org>);
	Wed, 13 Oct 2004 06:40:56 -0400
From: David Howells <dhowells@redhat.com>
In-Reply-To: <1097508639.20033.12.camel@lade.trondhjem.org> 
References: <1097508639.20033.12.camel@lade.trondhjem.org>  <4161B664.70109@RedHat.com> <41661950.5070508@tequila.co.jp> <41667865.2000804@RedHat.com> <20041011142329.GJ4072@admingilde.org> 
To: Trond Myklebust <trond.myklebust@fys.uio.no>
Cc: Linux filesystem caching discussion list 
	<linux-cachefs@redhat.com>,
       Martin Waitz <tali@admingilde.org>,
       linux-kernel <linux-kernel@vger.kernel.org>, nfs@lists.sourceforge.net,
       Steve Dickson <SteveD@redhat.com>,
       Clemens Schwaighofer <cs@tequila.co.jp>
Subject: Re: [Linux-cachefs] Re: [PATCH] NFS using CacheFS 
User-Agent: EMH/1.14.1 SEMI/1.14.5 (Awara-Onsen) FLIM/1.14.5 (Demachiyanagi) APEL/10.6 Emacs/21.3 (i386-redhat-linux-gnu) MULE/5.0 (SAKAKI)
MIME-Version: 1.0 (generated by SEMI 1.14.5 - "Awara-Onsen")
Content-Type: text/plain; charset=US-ASCII
Date: Wed, 13 Oct 2004 11:40:22 +0100
Message-ID: <30245.1097664022@redhat.com>
Sender: linux-kernel-owner@vger.kernel.org
X-Mailing-List: linux-kernel@vger.kernel.org


Trond Myklebust <trond.myklebust@fys.uio.no> wrote:
> That said, David & co.: why did you choose not to use something similar
> to the Solaris syntax for cachefs?

Well...

  (1) when I wrote cachefs I didn't know that Solaris had such a thing

  (2) I don't know what Solaris syntax is - I've seen one example, and that
      didn't make a lot of sense

  (3) my way doesn't involve any changes to userspace programs such as mount

> The "layered filesystem" syntax has the advantage that it would avoid
> entirely the need to change the NFS mount syntax,

And the disadvantage that we'd have to change the VFS to support it, I
think. I don't know how this "layered filesystem" thing operates or is used,
so I'm guessing.

> and would make it easier to port cachefs to cifs etc.

I doubt it. The netfs still has to interact with fscache internally to decide
how match netfs files to cache files, which is what most of the interface is
about; and to push/pull pages to/from the cache (this bit could possibly be
made transparent, but I'm not sure how you'd do it on Linux with the present
VM & VFS interfaces).

David
