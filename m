Return-Path: <linux-kernel-owner+willy=40w.ods.org-S1751355AbWHaIWl@vger.kernel.org>
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S1751355AbWHaIWl (ORCPT <rfc822;willy@w.ods.org>);
	Thu, 31 Aug 2006 04:22:41 -0400
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S1751388AbWHaIWl
	(ORCPT <rfc822;linux-kernel-outgoing>);
	Thu, 31 Aug 2006 04:22:41 -0400
Received: from cantor2.suse.de ([195.135.220.15]:16000 "EHLO mx2.suse.de")
	by vger.kernel.org with ESMTP id S1751355AbWHaIWk (ORCPT
	<rfc822;linux-kernel@vger.kernel.org>);
	Thu, 31 Aug 2006 04:22:40 -0400
Date: Thu, 31 Aug 2006 10:22:33 +0200
Message-ID: <s5hy7t52u2e.wl%tiwai@suse.de>
From: Takashi Iwai <tiwai@suse.de>
To: Andrew Benton <b3nt@ukonline.co.uk>
Cc: Andrew Morton <akpm@osdl.org>, Linus Torvalds <torvalds@osdl.org>,
       Linux Kernel Mailing List <linux-kernel@vger.kernel.org>
Subject: Re: Linux v2.6.18-rc5
In-Reply-To: <s5hbqq242uq.wl%tiwai@suse.de>
References: <Pine.LNX.4.64.0608272122250.27779@g5.osdl.org>
	<20060827231421.f0fc9db1.akpm@osdl.org>
	<44F5B4BE.5050600@ukonline.co.uk>
	<s5hbqq242uq.wl%tiwai@suse.de>
User-Agent: Wanderlust/2.12.0 (Your Wildest Dreams) SEMI/1.14.6 (Maruoka)
 FLIM/1.14.7 (=?ISO-8859-4?Q?Sanj=F2?=) APEL/10.6 MULE XEmacs/21.5 (beta25)
 (eggplant) (+CVS-20060326) (i386-suse-linux)
MIME-Version: 1.0 (generated by SEMI 1.14.6 - "Maruoka")
Content-Type: text/plain; charset=US-ASCII
Sender: linux-kernel-owner@vger.kernel.org
X-Mailing-List: linux-kernel@vger.kernel.org

At Wed, 30 Aug 2006 18:15:09 +0200,
I wrote:
> 
> At Wed, 30 Aug 2006 16:54:38 +0100,
> Andrew Benton wrote:
> > 
> > Andrew Morton wrote:
> > > On Sun, 27 Aug 2006 21:30:50 -0700 (PDT)
> > > Linus Torvalds <torvalds@osdl.org> wrote:
> > > 
> > >> Linux 2.6.18-rc5 is out there now
> > > 
> > > (Reporters Bcc'ed: please provide updates)
> > > 
> > > Serious-looking regressions include:
> > > 
> > > 
> > > From: Andrew Benton <b3nt@ukonline.co.uk>
> > > Subject: ALSA problems with 2.6.18-rc3
> > 
> > The problem remains in 2.6.18-rc5.
> > The workaround people have suggested (using alsactl -F restore) works if 
> > I have a working /etc/asound.state created with a 2.6.17 kernel. If I 
> > was starting from scratch with 2.6.18-rc5 I would have no way to set the 
> > sound level for the digital output. But maybe the bug is in alsamixer 
> > and alsactl?
> 
> No, it doesn't sound like a bug of alsamixer or alsactl if "alsactl
> -F" works.
> 
> What did you exactly do and what doesn't work right now?
> A detailed explanation for reproducing the bug is needed.

AnOther bugreport suggest that the similar name mismatch appears in
ac97.  IMO, it's no real breakage, but surely safer to avoid such
a thing.

Could you try the patch below (same found in bugzilla #7080)?


Thanks,

Takashi

====

[PATCH] ALSA: ac97 - Correct some Mic mixer elements

Revert the mixer element names of some Mic controls to the state of
2.6.17.  This should fix the name mismatch in alsactl.

Signed-off-by: Takashi Iwai <tiwai@suse.de>

---
diff --git a/sound/pci/ac97/ac97_codec.c b/sound/pci/ac97/ac97_codec.c
index 0abf280..51e83d7 100644
--- a/sound/pci/ac97/ac97_codec.c
+++ b/sound/pci/ac97/ac97_codec.c
@@ -573,7 +573,7 @@ AC97_SINGLE("PC Speaker Playback Volume"
 };
 
 static const struct snd_kcontrol_new snd_ac97_controls_mic_boost =
-	AC97_SINGLE("Mic Boost (+20dB) Switch", AC97_MIC, 6, 1, 0);
+	AC97_SINGLE("Mic Boost (+20dB)", AC97_MIC, 6, 1, 0);
 
 
 static const char* std_rec_sel[] = {"Mic", "CD", "Video", "Aux", "Line", "Mix", "Mix Mono", "Phone"};
@@ -615,7 +615,7 @@ AC97_SINGLE("Simulated Stereo Enhancemen
 AC97_SINGLE("3D Control - Switch", AC97_GENERAL_PURPOSE, 13, 1, 0),
 AC97_SINGLE("Loudness (bass boost)", AC97_GENERAL_PURPOSE, 12, 1, 0),
 AC97_ENUM("Mono Output Select", std_enum[2]),
-AC97_ENUM("Mic Select Capture Switch", std_enum[3]),
+AC97_ENUM("Mic Select", std_enum[3]),
 AC97_SINGLE("ADC/DAC Loopback", AC97_GENERAL_PURPOSE, 7, 1, 0)
 };
 
