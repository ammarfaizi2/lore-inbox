Return-Path: <linux-kernel-owner+willy=40w.ods.org-S932155AbWHKCB4@vger.kernel.org>
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S932155AbWHKCB4 (ORCPT <rfc822;willy@w.ods.org>);
	Thu, 10 Aug 2006 22:01:56 -0400
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S932179AbWHKCB4
	(ORCPT <rfc822;linux-kernel-outgoing>);
	Thu, 10 Aug 2006 22:01:56 -0400
Received: from imx11.toshiba.co.jp ([61.202.160.20]:10671 "EHLO
	imx11.toshiba.co.jp") by vger.kernel.org with ESMTP id S932155AbWHKCBz
	(ORCPT <rfc822;linux-kernel@vger.kernel.org>);
	Thu, 10 Aug 2006 22:01:55 -0400
Date: Fri, 11 Aug 2006 11:01:23 +0900
Message-ID: <yyipsf8hvyk.wl@forest.swc.toshiba.co.jp>
From: Tsutomu OWA <tsutomu.owa@toshiba.co.jp>
To: linux-kernel@vger.kernel.org
Cc: mingo@elte.hu, tglx@linutronix.de, linuxppc-dev@ozlabs.org,
       tsutomu.owa@toshiba.co.jp
Subject: [RFC PATCH 0/4]  powerpc 2.6.16-rt17: to port rt patch to powerpc
User-Agent: Wanderlust/2.8.1 (Something) Emacs/20.7 Mule/4.0 (HANANOEN)
Organization: Software Engineering Center, TOSHIBA.
MIME-Version: 1.0 (generated by SEMI 1.14.4 - "Hosorogi")
Content-Type: text/plain; charset=US-ASCII
Sender: linux-kernel-owner@vger.kernel.org
X-Mailing-List: linux-kernel@vger.kernel.org


Hi, I'm trying to port realtime-preempt patch to powerpc.  The primary
purpose to post an experimental work is for review and to see if I'm on
the right track.  The same material is placed on CE Linux Forum's wiki
page;
http://tree.celinuxforum.org/CelfPubWiki/RTPatchForPowerPC

This series of patches adds support to make rt patch work on powerpc64
targets. Currently two platforms (powermac and cell) are tested.

These patches apply to 2.6.16 kernel with realtime preempt patch
(patch-2.6.16-rt17) by Ingo Molnar at
http://people.redhat.com/mingo/realtime-preempt/.

Compile tested for both powermac and cell w/ and w/o PREEMPT_RT.

Boot tested for powermac w/ and w/o PREEMPT_RT on a Dual Power Mac
G5. (boots on initrd and CONFIG_BLK_DEV_IDE_PMAC is disabled (or with a
work around included in the patch) for PREEMPT_RT, see *1).

Boot tested for cell w/ and w/o PREEMPT_RT on the systemsim simulator
provided by IBM. Note that "iommu=off" command line option is applied.

[RFC PATCH 1/4] powerpc 2.6.16-rt17: to build on powerpc w/ RT
[RFC PATCH 2/4] powerpc 2.6.16-rt17: to boot on powerpc w/ RT
[RFC PATCH 3/4] powerpc 2.6.16-rt17: to support CONFIG_MCOUNT
[RFC PATCH 4/4] powerpc 2.6.16-rt29: to fix network driver (workaround)

These patches are provided under GNU GPL.

Comments and suggestions are welcome.

Thanks in advance.

*1: There seem to be some flaw(s) which make(s) some devices unavailable
 (namely a cdrom drive and a SATA drive so far) when PREEMPT_HARDIRQS is
 enabled. "hda: lost interrupt" and/or "ata1: command 0x50 host_stat
 0x4" show up. Other devices such as network, keyboard etc. seem to work
 fine. I've looked into this for a couple of weeks in vain. 

-- owa
Software Engineering Center, TOSHIBA.
