Return-Path: <linux-kernel-owner@vger.kernel.org>
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id <S263038AbREaQQF>; Thu, 31 May 2001 12:16:05 -0400
Received: (majordomo@vger.kernel.org) by vger.kernel.org
	id <S262804AbREaQPz>; Thu, 31 May 2001 12:15:55 -0400
Received: from mail.iwr.uni-heidelberg.de ([129.206.104.30]:31379 "EHLO
	mail.iwr.uni-heidelberg.de") by vger.kernel.org with ESMTP
	id <S262707AbREaQPr>; Thu, 31 May 2001 12:15:47 -0400
Date: Thu, 31 May 2001 18:15:39 +0200 (CEST)
From: Bogdan Costescu <bogdan.costescu@iwr.uni-heidelberg.de>
To: Feng Xian <fxian@fxian.jukie.net>
cc: <linux-kernel@vger.kernel.org>, Feng Xian <fxian@chrysalis-its.com>
Subject: Re: APIC problem or 3com 3c590 driver problem in smp kernel 2.4.x
In-Reply-To: <Pine.LNX.4.33.0105302155180.31379-100000@tiger>
Message-ID: <Pine.LNX.4.33.0105311810490.12907-100000@kenzo.iwr.uni-heidelberg.de>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
Sender: linux-kernel-owner@vger.kernel.org
X-Mailing-List: linux-kernel@vger.kernel.org

On Wed, 30 May 2001, Feng Xian wrote:

> when I run the kernel smp-2.4.x, my PCI
> device can not receive any interrupt while the /proc/interrupts shows that
> 3c905 receives over million of interrupts and number grows very fast.

That's a bit strange as one of the first things done in 3c59x ISR is:

if ((status & IntLatch) == 0)
         goto handler_exit;  /* No interrupt: shared IRQs can cause this */

with which the driver detects if the interrupt was generated by the card.
Are you sure the driver for the other PCI device knows to play nice with
shared interrupts ?

Sincerely,

Bogdan Costescu

IWR - Interdisziplinaeres Zentrum fuer Wissenschaftliches Rechnen
Universitaet Heidelberg, INF 368, D-69120 Heidelberg, GERMANY
Telephone: +49 6221 54 8869, Telefax: +49 6221 54 8868
E-mail: Bogdan.Costescu@IWR.Uni-Heidelberg.De

