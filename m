Return-Path: <linux-kernel-owner+willy=40w.ods.org-S1750750AbVLTSMj@vger.kernel.org>
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S1750750AbVLTSMj (ORCPT <rfc822;willy@w.ods.org>);
	Tue, 20 Dec 2005 13:12:39 -0500
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S1750826AbVLTSMj
	(ORCPT <rfc822;linux-kernel-outgoing>);
	Tue, 20 Dec 2005 13:12:39 -0500
Received: from bayc1-pasmtp02.bayc1.hotmail.com ([65.54.191.162]:59460 "EHLO
	BAYC1-PASMTP02.bayc1.hotmail.com") by vger.kernel.org with ESMTP
	id S1750750AbVLTSMi (ORCPT <rfc822;linux-kernel@vger.kernel.org>);
	Tue, 20 Dec 2005 13:12:38 -0500
Message-ID: <BAYC1-PASMTP02920FB33079863904E976AE3E0@CEZ.ICE>
X-Originating-IP: [69.156.6.171]
X-Originating-Email: [seanlkml@sympatico.ca]
Message-ID: <55454.10.10.10.28.1135102356.squirrel@linux1>
In-Reply-To: <Pine.LNX.4.62.0512200951080.11093@qynat.qvtvafvgr.pbz>
References: <200512201428.jBKESAJ5004673@laptop11.inf.utfsm.cl>
    <Pine.LNX.4.62.0512200951080.11093@qynat.qvtvafvgr.pbz>
Date: Tue, 20 Dec 2005 13:12:36 -0500 (EST)
Subject: Re: [2.6 patch] i386: always use 4k stacks
From: "Sean" <seanlkml@sympatico.ca>
To: "David Lang" <dlang@digitalinsight.com>
Cc: "Horst von Brand" <vonbrand@inf.utfsm.cl>,
       "Parag Warudkar" <kernel-stuff@comcast.net>,
       "Dumitru Ciobarcianu" <dumitru.ciobarcianu@ines.ro>,
       "Helge Hafting" <helge.hafting@aitel.hist.no>,
       "Andi Kleen" <ak@suse.de>, "Adrian Bunk" <bunk@stusta.de>,
       "Kyle Moffett" <mrmacman_g4@mac.com>, akpm@osdl.org,
       linux-kernel@vger.kernel.org, arjan@infradead.org
User-Agent: SquirrelMail/1.4.4-2
MIME-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7BIT
X-Priority: 3 (Normal)
Importance: Normal
X-OriginalArrivalTime: 20 Dec 2005 18:12:37.0968 (UTC) FILETIME=[F58C4D00:01C60590]
Sender: linux-kernel-owner@vger.kernel.org
X-Mailing-List: linux-kernel@vger.kernel.org

On Tue, December 20, 2005 12:56 pm, David Lang said:
>
> at least one of the 'popular distributions' that switched to 4k stacks
> years ago worked around the problems that it generated by simply lableing
> the portions that didn't work with 4k stacks as 'unsupported by this
> distro' (XFS has been explicitly stated to be in this catagory in these
> discussions)

Times change, the XFS issues have been resolved.

> how many other corner cases are there that these distros just choose not
> to support, but need to be supported and tested for the vanilla kernel?

This is called FUD.  If you have examples of a problem go ahead and post
them.   *EVERY* change made to the kernel has the potential to cause a
problem.   But this one has been carefully scrutinized and it seems that
only people with general notions of FUD remain to object.   Nobody seems
to have any real objections any more.  YAY!

> also for those who are arguing that it's only dropping from 6k to 4k, you
> are forgetting that the patches to move the interrupts to a seperate stack
> have already gone into the kernel, so today it is really 8k+4k and the
> talk is to move it to 4k+4k.

So what?   The point is that if you compare the world from what it was a
few years back with just 8K, now there is just as much stack space,
although it happens to be split in half.

> I think it's a good idea to change the default (especially in -mm) to 4k
> stacks and to schedule a change of the default in mainline for a few
> versions out, but there needs to be a safety net other then telling people
> to downgrade to a prior kernel if they run into problems when the switch
> is made

Of course.   If there are problems discovered in -mm with 4K stack (highly
unlikely since its been in production use on several vendor kernals for a
few years) they will be dealt with.   But once a reasonable period of time
has passed with no issues, its time to move it into mainline.

Sean

