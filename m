Return-Path: <linux-kernel-owner+willy=40w.ods.org@vger.kernel.org>
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S271030AbTHCH7q (ORCPT <rfc822;willy@w.ods.org>);
	Sun, 3 Aug 2003 03:59:46 -0400
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S271080AbTHCH7q
	(ORCPT <rfc822;linux-kernel-outgoing>);
	Sun, 3 Aug 2003 03:59:46 -0400
Received: from fmr05.intel.com ([134.134.136.6]:13254 "EHLO
	hermes.jf.intel.com") by vger.kernel.org with ESMTP id S271030AbTHCH7l
	(ORCPT <rfc822;linux-kernel@vger.kernel.org>);
	Sun, 3 Aug 2003 03:59:41 -0400
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="----_=_NextPart_001_01C35995.2FF3F182"
X-MimeOLE: Produced By Microsoft Exchange V6.0.6375.0
Subject: [PATCH] additional kernel event notifications
Date: Sun, 3 Aug 2003 00:59:38 -0700
Message-ID: <7F740D512C7C1046AB53446D37200173060A3E@scsmsx402.sc.intel.com>
X-MS-Has-Attach: yes
X-MS-TNEF-Correlator: 
Thread-Topic: [PATCH] additional kernel event notifications
Thread-Index: AcNZlS/czj1eEsVcEdemPwDASRHPFg==
From: "Villacis, Juan" <juan.villacis@intel.com>
To: <linux-kernel@vger.kernel.org>
X-OriginalArrivalTime: 03 Aug 2003 07:59:39.0231 (UTC) FILETIME=[3053E6F0:01C35995]
Sender: linux-kernel-owner@vger.kernel.org
X-Mailing-List: linux-kernel@vger.kernel.org

This is a multi-part message in MIME format.

------_=_NextPart_001_01C35995.2FF3F182
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Hi,

We request that the following patch for additional kernel event =
notifications be included in the upcoming 2.6.0 kernel.

The current profiling hooks provide notifications at the end of a task's =
lifetime (i.e., task exit, mmap exit, and exec unmap).  We would like to =
have additional notifications on the start of a task (i.e., fork, =
execve, kernel image loads, and user image loads).

We believe that profiling tools such as Oprofile, Perfmon, and VTune =
would benefit from the additional hooks by improving the accuracy and =
completeness of the performance data, especially when working in =
environments that can dynamically create and destroy executable code =
(such as Java). Furthermore, these hooks could be used to measure =
different types of performance data (e.g., "forks per second") which are =
currently not available any other way.

Our patch follows the conventions used by the current profiling hooks, =
and is relatively small.

We would appreciate comments/feedback on our proposal.

Regards,

Juan Villacis
Intel Corporation
Santa Clara, CA 95052


------_=_NextPart_001_01C35995.2FF3F182
Content-Type: application/octet-stream;
	name="notification-2.6.0-test2.patch"
Content-Transfer-Encoding: base64
Content-Description: notification-2.6.0-test2.patch
Content-Disposition: attachment;
	filename="notification-2.6.0-test2.patch"

ZGlmZiAtdXJOIGxpbnV4LTIuNi4wLXRlc3QyL2FyY2gvaTM4Ni9vcHJvZmlsZS9LY29uZmlnIGxp
bnV4LTIuNi4wLXRlc3QyLWludGVsLXZ0dW5lL2FyY2gvaTM4Ni9vcHJvZmlsZS9LY29uZmlnCi0t
LSBsaW51eC0yLjYuMC10ZXN0Mi9hcmNoL2kzODYvb3Byb2ZpbGUvS2NvbmZpZwlTdW4gSnVsIDI3
IDEwOjAyOjQ5IDIwMDMKKysrIGxpbnV4LTIuNi4wLXRlc3QyLWludGVsLXZ0dW5lL2FyY2gvaTM4
Ni9vcHJvZmlsZS9LY29uZmlnCVNhdCBBdWcgIDIgMjA6Mzg6MzcgMjAwMwpAQCAtMSwxNiArMSwx
NiBAQAogCiBtZW51ICJQcm9maWxpbmcgc3VwcG9ydCIKLQlkZXBlbmRzIG9uIEVYUEVSSU1FTlRB
TAogCiBjb25maWcgUFJPRklMSU5HCi0JYm9vbCAiUHJvZmlsaW5nIHN1cHBvcnQgKEVYUEVSSU1F
TlRBTCkiCisJYm9vbCAiUHJvZmlsaW5nIHN1cHBvcnQiCisJZGVmYXVsdCB5CiAJaGVscAogCSAg
U2F5IFkgaGVyZSB0byBlbmFibGUgdGhlIGV4dGVuZGVkIHByb2ZpbGluZyBzdXBwb3J0IG1lY2hh
bmlzbXMgdXNlZAotCSAgYnkgcHJvZmlsZXJzIHN1Y2ggYXMgT1Byb2ZpbGUuCisJICBieSBwcm9m
aWxlcnMgc3VjaCBhcyBPUHJvZmlsZSBhbmQgVlR1bmUuCiAJICAKIAogY29uZmlnIE9QUk9GSUxF
Ci0JdHJpc3RhdGUgIk9Qcm9maWxlIHN5c3RlbSBwcm9maWxpbmcgKEVYUEVSSU1FTlRBTCkiCisJ
dHJpc3RhdGUgIk9Qcm9maWxlIHN5c3RlbSBwcm9maWxpbmciCiAJZGVwZW5kcyBvbiBQUk9GSUxJ
TkcKIAloZWxwCiAJICBPUHJvZmlsZSBpcyBhIHByb2ZpbGluZyBzeXN0ZW0gY2FwYWJsZSBvZiBw
cm9maWxpbmcgdGhlCmRpZmYgLXVyTiBsaW51eC0yLjYuMC10ZXN0Mi9NYWtlZmlsZSBsaW51eC0y
LjYuMC10ZXN0Mi1pbnRlbC12dHVuZS9NYWtlZmlsZQotLS0gbGludXgtMi42LjAtdGVzdDIvTWFr
ZWZpbGUJU3VuIEp1bCAyNyAxMDowNDo0OSAyMDAzCisrKyBsaW51eC0yLjYuMC10ZXN0Mi1pbnRl
bC12dHVuZS9NYWtlZmlsZQlTYXQgQXVnICAyIDIwOjMxOjE1IDIwMDMKQEAgLTEsNyArMSw3IEBA
CiBWRVJTSU9OID0gMgogUEFUQ0hMRVZFTCA9IDYKIFNVQkxFVkVMID0gMAotRVhUUkFWRVJTSU9O
ID0gLXRlc3QyCitFWFRSQVZFUlNJT04gPSAtdGVzdDItaW50ZWwtdnR1bmUKIAogIyAqRE9DVU1F
TlRBVElPTioKICMgVG8gc2VlIGEgbGlzdCBvZiB0eXBpY2FsIHRhcmdldHMgZXhlY3V0ZSAibWFr
ZSBoZWxwIgpkaWZmIC11ck4gbGludXgtMi42LjAtdGVzdDIvTUFJTlRBSU5FUlMgbGludXgtMi42
LjAtdGVzdDItaW50ZWwtdnR1bmUvTUFJTlRBSU5FUlMKLS0tIGxpbnV4LTIuNi4wLXRlc3QyL01B
SU5UQUlORVJTCVN1biBKdWwgMjcgMTA6MDM6NTEgMjAwMworKysgbGludXgtMi42LjAtdGVzdDIt
aW50ZWwtdnR1bmUvTUFJTlRBSU5FUlMJU3VuIEF1ZyAgMyAwMjowNzozNyAyMDAzCkBAIC0yMTUx
LDYgKzIxNTEsMTMgQEAKIE06CWtyYXhlbEBieXRlc2V4Lm9yZwogUzoJTWFpbnRhaW5lZAogCitW
VFVORQorUDoJSnVhbiBWaWxsYWNpcworTToJanVhbi5kZWwudmlsbGFjaXNAaW50ZWwuY29tCitX
OglodHRwOi8vd3d3LmludGVsLmNvbS9zb2Z0d2FyZS9wcm9kdWN0cy9vcGVuc291cmNlL3Zkay8K
K1c6CWh0dHA6Ly93d3cuaW50ZWwuY29tL3NvZnR3YXJlL3Byb2R1Y3RzL3Z0dW5lLworUzoJTWFp
bnRhaW5lZAorCiBXQU4gUk9VVEVSICYgU0FOR09NQSBXQU5QSVBFIERSSVZFUlMgJiBBUEkgKFgu
MjUsIEZSQU1FIFJFTEFZLCBQUFAsIENJU0NPIEhETEMpCiBQOglOZW5hZCBDb3JiaWMKIE06CW5j
b3JiaWNAc2FuZ29tYS5jb20KZGlmZiAtdXJOIGxpbnV4LTIuNi4wLXRlc3QyL2luY2x1ZGUvbGlu
dXgvcHJvZmlsZS5oIGxpbnV4LTIuNi4wLXRlc3QyLWludGVsLXZ0dW5lL2luY2x1ZGUvbGludXgv
cHJvZmlsZS5oCi0tLSBsaW51eC0yLjYuMC10ZXN0Mi9pbmNsdWRlL2xpbnV4L3Byb2ZpbGUuaAlT
dW4gSnVsIDI3IDEwOjAxOjUxIDIwMDMKKysrIGxpbnV4LTIuNi4wLXRlc3QyLWludGVsLXZ0dW5l
L2luY2x1ZGUvbGludXgvcHJvZmlsZS5oCVNhdCBBdWcgIDIgMjA6MDI6NDUgMjAwMwpAQCAtNiw2
ICs2LDcgQEAKICNpbmNsdWRlIDxsaW51eC9rZXJuZWwuaD4KICNpbmNsdWRlIDxsaW51eC9jb25m
aWcuaD4KICNpbmNsdWRlIDxsaW51eC9pbml0Lmg+CisjaW5jbHVkZSA8bGludXgvbW9kdWxlLmg+
CiAjaW5jbHVkZSA8YXNtL2Vycm5vLmg+CiAKIC8qIHBhcnNlIGNvbW1hbmQgbGluZSAqLwpAQCAt
MjMsNyArMjQsMTEgQEAKIGVudW0gcHJvZmlsZV90eXBlIHsKIAlFWElUX1RBU0ssCiAJRVhJVF9N
TUFQLAotCUVYRUNfVU5NQVAKKwlFWEVDX1VOTUFQLAorICAgICAgICBET19GT1JLLAorICAgICAg
ICBET19FWEVDVkUsCisgICAgICAgIExPQURfS0VSTkVMX0lNQUdFLAorICAgICAgICBMT0FEX1VT
RVJfSU1BR0UKIH07CiAKICNpZmRlZiBDT05GSUdfUFJPRklMSU5HCkBAIC00MSw2ICs0NiwyMCBA
QAogLyogZXhpdCBvZiBhbGwgdm1hcyBmb3IgYSB0YXNrICovCiB2b2lkIHByb2ZpbGVfZXhpdF9t
bWFwKHN0cnVjdCBtbV9zdHJ1Y3QgKiBtbSk7CiAKKy8qIGhhbmRsZXIgZm9yIERPX0ZPUksgZXZl
bnQgKi8KK3ZvaWQgcHJvZmlsZV9kb19mb3JrKHN0cnVjdCB0YXNrX3N0cnVjdCAqIHRhc2spOwor
CisvKiBoYW5kbGVyIGZvciBET19FWEVDVkUgZXZlbnQgKi8KK3ZvaWQgcHJvZmlsZV9kb19leGVj
dmUoc3RydWN0IHRhc2tfc3RydWN0ICogdGFzayk7CisKKy8qIGhhbmRsZXIgZm9yIExPQURfS0VS
TkVMX0lNQUdFIGV2ZW50ICovCit2b2lkIHByb2ZpbGVfbG9hZF9rZXJuZWxfaW1hZ2Uoc3RydWN0
IG1vZHVsZSAqIG1vZCwgdW5zaWduZWQgaW50IHNlY2hkcl9pbmRleCwKKyAgICAgICAgdW5zaWdu
ZWQgbG9uZyBhZGRyLCB1bnNpZ25lZCBsb25nIHNpemUpOworCisvKiBoYW5kbGVyIGZvciBMT0FE
X1VTRVJfSU1BR0UgKi8KK3ZvaWQgcHJvZmlsZV9sb2FkX3VzZXJfaW1hZ2Uoc3RydWN0IHRhc2tf
c3RydWN0ICogdGFzaywKKyAgICAgICAgc3RydWN0IHZtX2FyZWFfc3RydWN0ICogdm1hKTsKKwog
aW50IHByb2ZpbGVfZXZlbnRfcmVnaXN0ZXIoZW51bSBwcm9maWxlX3R5cGUsIHN0cnVjdCBub3Rp
Zmllcl9ibG9jayAqIG4pOwogCiBpbnQgcHJvZmlsZV9ldmVudF91bnJlZ2lzdGVyKGVudW0gcHJv
ZmlsZV90eXBlLCBzdHJ1Y3Qgbm90aWZpZXJfYmxvY2sgKiBuKTsKQEAgLTY2LDYgKzg1LDEwIEBA
CiAjZGVmaW5lIHByb2ZpbGVfZXhpdF90YXNrKGEpIGRvIHsgfSB3aGlsZSAoMCkKICNkZWZpbmUg
cHJvZmlsZV9leGVjX3VubWFwKGEpIGRvIHsgfSB3aGlsZSAoMCkKICNkZWZpbmUgcHJvZmlsZV9l
eGl0X21tYXAoYSkgZG8geyB9IHdoaWxlICgwKQorI2RlZmluZSBwcm9maWxlX2RvX2ZvcmsoYSkg
ZG8geyB9IHdoaWxlICgwKQorI2RlZmluZSBwcm9maWxlX2RvX2V4ZWN2ZShhKSBkbyB7IH0gd2hp
bGUgKDApCisjZGVmaW5lIHByb2ZpbGVfbG9hZF9rZXJuZWxfaW1hZ2UoYSkgZG8geyB9IHdoaWxl
ICgwKQorI2RlZmluZSBwcm9maWxlX2xvYWRfdXNlcl9pbWFnZShhKSBkbyB7IH0gd2hpbGUgKDAp
CiAKIHN0YXRpYyBpbmxpbmUgaW50IHJlZ2lzdGVyX3Byb2ZpbGVfbm90aWZpZXIoc3RydWN0IG5v
dGlmaWVyX2Jsb2NrICogbmIpCiB7CmRpZmYgLXVyTiBsaW51eC0yLjYuMC10ZXN0Mi9rZXJuZWwv
cHJvZmlsZS5jIGxpbnV4LTIuNi4wLXRlc3QyLWludGVsLXZ0dW5lL2tlcm5lbC9wcm9maWxlLmMK
LS0tIGxpbnV4LTIuNi4wLXRlc3QyL2tlcm5lbC9wcm9maWxlLmMJU3VuIEp1bCAyNyAxMDowOTo0
MSAyMDAzCisrKyBsaW51eC0yLjYuMC10ZXN0Mi1pbnRlbC12dHVuZS9rZXJuZWwvcHJvZmlsZS5j
CVNhdCBBdWcgIDIgMjA6Mjg6MTEgMjAwMwpAQCAtNTAsNiArNTAsMTAgQEAKIHN0YXRpYyBzdHJ1
Y3Qgbm90aWZpZXJfYmxvY2sgKiBleGl0X3Rhc2tfbm90aWZpZXI7CiBzdGF0aWMgc3RydWN0IG5v
dGlmaWVyX2Jsb2NrICogZXhpdF9tbWFwX25vdGlmaWVyOwogc3RhdGljIHN0cnVjdCBub3RpZmll
cl9ibG9jayAqIGV4ZWNfdW5tYXBfbm90aWZpZXI7CitzdGF0aWMgc3RydWN0IG5vdGlmaWVyX2Js
b2NrICogZG9fZm9ya19ub3RpZmllcjsKK3N0YXRpYyBzdHJ1Y3Qgbm90aWZpZXJfYmxvY2sgKiBk
b19leGVjdmVfbm90aWZpZXI7CitzdGF0aWMgc3RydWN0IG5vdGlmaWVyX2Jsb2NrICogbG9hZF9r
ZXJuZWxfaW1hZ2Vfbm90aWZpZXI7CitzdGF0aWMgc3RydWN0IG5vdGlmaWVyX2Jsb2NrICogbG9h
ZF91c2VyX2ltYWdlX25vdGlmaWVyOwogIAogdm9pZCBwcm9maWxlX2V4aXRfdGFzayhzdHJ1Y3Qg
dGFza19zdHJ1Y3QgKiB0YXNrKQogewpAQCAtNzIsNiArNzYsMzcgQEAKIAl1cF9yZWFkKCZwcm9m
aWxlX3J3c2VtKTsKIH0KIAordm9pZCBwcm9maWxlX2RvX2Zvcmsoc3RydWN0IHRhc2tfc3RydWN0
ICogdGFzaykKK3sKKyAgICAgICAgZG93bl9yZWFkKCZwcm9maWxlX3J3c2VtKTsKKyAgICAgICAg
bm90aWZpZXJfY2FsbF9jaGFpbigmZG9fZm9ya19ub3RpZmllciwgMCwgdGFzayk7CisgICAgICAg
IHVwX3JlYWQoJnByb2ZpbGVfcndzZW0pOworfQorCit2b2lkIHByb2ZpbGVfZG9fZXhlY3ZlKHN0
cnVjdCB0YXNrX3N0cnVjdCAqIHRhc2spCit7CisgICAgICAgIGRvd25fcmVhZCgmcHJvZmlsZV9y
d3NlbSk7CisgICAgICAgIG5vdGlmaWVyX2NhbGxfY2hhaW4oJmRvX2V4ZWN2ZV9ub3RpZmllciwg
MCwgdGFzayk7CisgICAgICAgIHVwX3JlYWQoJnByb2ZpbGVfcndzZW0pOworfQorCit2b2lkIHBy
b2ZpbGVfbG9hZF9rZXJuZWxfaW1hZ2Uoc3RydWN0IG1vZHVsZSAqIG1vZCwgdW5zaWduZWQgaW50
IHNlY2hkcl9pbmRleCwKKyAgICAgICAgdW5zaWduZWQgbG9uZyBhZGRyLCB1bnNpZ25lZCBsb25n
IHNpemUpCit7CisgICAgICAgIGRvd25fcmVhZCgmcHJvZmlsZV9yd3NlbSk7CisgICAgICAgIG5v
dGlmaWVyX2NhbGxfY2hhaW4oJmxvYWRfa2VybmVsX2ltYWdlX25vdGlmaWVyLCBzZWNoZHJfaW5k
ZXgsIG1vZCk7CisgICAgICAgIHVwX3JlYWQoJnByb2ZpbGVfcndzZW0pOworfQorCit2b2lkIHBy
b2ZpbGVfbG9hZF91c2VyX2ltYWdlKHN0cnVjdCB0YXNrX3N0cnVjdCAqIHRhc2ssCisgICAgICAg
IHN0cnVjdCB2bV9hcmVhX3N0cnVjdCAqIHZtYSkKK3sKKyAgICAgICAgZG93bl9yZWFkKCZwcm9m
aWxlX3J3c2VtKTsKKyAgICAgICAgbm90aWZpZXJfY2FsbF9jaGFpbigmbG9hZF91c2VyX2ltYWdl
X25vdGlmaWVyLCh1bnNpZ25lZCBsb25nKSB0YXNrLAorICAgICAgICAgICAgICAgIHZtYSk7Cisg
ICAgICAgIHVwX3JlYWQoJnByb2ZpbGVfcndzZW0pOworfQorCiBpbnQgcHJvZmlsZV9ldmVudF9y
ZWdpc3RlcihlbnVtIHByb2ZpbGVfdHlwZSB0eXBlLCBzdHJ1Y3Qgbm90aWZpZXJfYmxvY2sgKiBu
KQogewogCWludCBlcnIgPSAtRUlOVkFMOwpAQCAtODgsNiArMTIzLDE4IEBACiAJCWNhc2UgRVhF
Q19VTk1BUDoKIAkJCWVyciA9IG5vdGlmaWVyX2NoYWluX3JlZ2lzdGVyKCZleGVjX3VubWFwX25v
dGlmaWVyLCBuKTsKIAkJCWJyZWFrOworCQljYXNlIERPX0ZPUks6CisJCQllcnIgPSBub3RpZmll
cl9jaGFpbl9yZWdpc3RlcigmZG9fZm9ya19ub3RpZmllciwgbik7CisJCQlicmVhazsKKwkJY2Fz
ZSBET19FWEVDVkU6CisJCQllcnIgPSBub3RpZmllcl9jaGFpbl9yZWdpc3RlcigmZG9fZXhlY3Zl
X25vdGlmaWVyLCBuKTsKKwkJCWJyZWFrOworCQljYXNlIExPQURfS0VSTkVMX0lNQUdFOgorCQkJ
ZXJyID0gbm90aWZpZXJfY2hhaW5fcmVnaXN0ZXIoJmxvYWRfa2VybmVsX2ltYWdlX25vdGlmaWVy
LCBuKTsKKwkJCWJyZWFrOworCQljYXNlIExPQURfVVNFUl9JTUFHRToKKwkJCWVyciA9IG5vdGlm
aWVyX2NoYWluX3JlZ2lzdGVyKCZsb2FkX3VzZXJfaW1hZ2Vfbm90aWZpZXIsIG4pOworCQkJYnJl
YWs7CiAJfQogIAogCXVwX3dyaXRlKCZwcm9maWxlX3J3c2VtKTsKQEAgLTExMiw2ICsxNTksMTgg
QEAKIAkJY2FzZSBFWEVDX1VOTUFQOgogCQkJZXJyID0gbm90aWZpZXJfY2hhaW5fdW5yZWdpc3Rl
cigmZXhlY191bm1hcF9ub3RpZmllciwgbik7CiAJCQlicmVhazsKKwkJY2FzZSBET19GT1JLOgor
CQkJZXJyID0gbm90aWZpZXJfY2hhaW5fdW5yZWdpc3RlcigmZG9fZm9ya19ub3RpZmllciwgbik7
CisJCQlicmVhazsKKwkJY2FzZSBET19FWEVDVkU6CisJCQllcnIgPSBub3RpZmllcl9jaGFpbl91
bnJlZ2lzdGVyKCZkb19leGVjdmVfbm90aWZpZXIsIG4pOworCQkJYnJlYWs7CisJCWNhc2UgTE9B
RF9LRVJORUxfSU1BR0U6CisJCQllcnIgPSBub3RpZmllcl9jaGFpbl91bnJlZ2lzdGVyKCZsb2Fk
X2tlcm5lbF9pbWFnZV9ub3RpZmllciwgbik7CisJCQlicmVhazsKKwkJY2FzZSBMT0FEX1VTRVJf
SU1BR0U6CisJCQllcnIgPSBub3RpZmllcl9jaGFpbl91bnJlZ2lzdGVyKCZsb2FkX3VzZXJfaW1h
Z2Vfbm90aWZpZXIsIG4pOworCQkJYnJlYWs7CiAJfQogCiAJdXBfd3JpdGUoJnByb2ZpbGVfcndz
ZW0pOwpkaWZmIC11ck4gbGludXgtMi42LjAtdGVzdDIva2VybmVsL2ZvcmsuYyBsaW51eC0yLjYu
MC10ZXN0Mi1pbnRlbC12dHVuZS9rZXJuZWwvZm9yay5jCi0tLSBsaW51eC0yLjYuMC10ZXN0Mi9r
ZXJuZWwvZm9yay5jCVN1biBKdWwgMjcgMDk6NTc6MzkgMjAwMworKysgbGludXgtMi42LjAtdGVz
dDItaW50ZWwtdnR1bmUva2VybmVsL2ZvcmsuYwlTYXQgQXVnICAyIDIwOjE4OjU2IDIwMDMKQEAg
LTMwLDYgKzMwLDcgQEAKICNpbmNsdWRlIDxsaW51eC9mdXRleC5oPgogI2luY2x1ZGUgPGxpbnV4
L3B0cmFjZS5oPgogI2luY2x1ZGUgPGxpbnV4L21vdW50Lmg+CisjaW5jbHVkZSA8bGludXgvcHJv
ZmlsZS5oPgogCiAjaW5jbHVkZSA8YXNtL3BndGFibGUuaD4KICNpbmNsdWRlIDxhc20vcGdhbGxv
Yy5oPgpAQCAtMTA4NCw2ICsxMDg1LDggQEAKIAkJCXNldF90c2tfdGhyZWFkX2ZsYWcocCwgVElG
X1NJR1BFTkRJTkcpOwogCQl9CiAKKwkJcHJvZmlsZV9kb19mb3JrKHApOworCiAJCXAtPnN0YXRl
ID0gVEFTS19TVE9QUEVEOwogCQlpZiAoIShjbG9uZV9mbGFncyAmIENMT05FX1NUT1BQRUQpKQog
CQkJd2FrZV91cF9mb3JrZWRfcHJvY2VzcyhwKTsJLyogZG8gdGhpcyBsYXN0ICovCmRpZmYgLXVy
TiBsaW51eC0yLjYuMC10ZXN0Mi9rZXJuZWwvbW9kdWxlLmMgbGludXgtMi42LjAtdGVzdDItaW50
ZWwtdnR1bmUva2VybmVsL21vZHVsZS5jCi0tLSBsaW51eC0yLjYuMC10ZXN0Mi9rZXJuZWwvbW9k
dWxlLmMJU3VuIEp1bCAyNyAxMDowNjoxMSAyMDAzCisrKyBsaW51eC0yLjYuMC10ZXN0Mi1pbnRl
bC12dHVuZS9rZXJuZWwvbW9kdWxlLmMJU2F0IEF1ZyAgMiAyMDoyMjo1MCAyMDAzCkBAIC0yNyw2
ICsyNyw3IEBACiAjaW5jbHVkZSA8bGludXgvZmNudGwuaD4KICNpbmNsdWRlIDxsaW51eC9yY3Vw
ZGF0ZS5oPgogI2luY2x1ZGUgPGxpbnV4L2NwdS5oPgorI2luY2x1ZGUgPGxpbnV4L3Byb2ZpbGUu
aD4KICNpbmNsdWRlIDxsaW51eC9tb2R1bGVwYXJhbS5oPgogI2luY2x1ZGUgPGxpbnV4L2Vycm5v
Lmg+CiAjaW5jbHVkZSA8bGludXgvZXJyLmg+CkBAIC0xNjUzLDYgKzE2NTQsMjEgQEAKIAlpZiAo
ZXJyIDwgMCkKIAkJZ290byBjbGVhbnVwOwogCisJLyogdHJhY2sgYWRkcmVzcyBvZiBlYWNoIGxv
YWRlZCBzZWN0aW9uIGluIGtlcm5lbCBtb2R1bGU7CisJICogb25seSBwcm9maWxlIHRob3NlIHdo
aWNoIGxpZSB3aXRoaW4gdGhlIG1vZHVsZSdzIGFkZHJlc3MKKwkgKiByYW5nZTsgd2UgZG8gaXQg
aGVyZSBzaW5jZSBieSB0aGlzIHRpbWUgYWxsIHRoZSBzZWN0aW9ucworCSAqIGhhdmUgYmVlbiBw
cm9wZXJseSBsYXllZCBvdXQgCisJICovCisJZm9yIChpID0gMDsgaSA8IGhkci0+ZV9zaG51bTsg
aSsrKSB7CisJICBpZiAoIChzZWNoZHJzW2ldLnNoX2FkZHIgPj0gKHVuc2lnbmVkIGxvbmcpIG1v
ZC0+bW9kdWxlX2NvcmUpICYmCisJCShzZWNoZHJzW2ldLnNoX2FkZHIgPCAodW5zaWduZWQgbG9u
ZykgKG1vZC0+bW9kdWxlX2NvcmUgKworCQkJCQkJICAgICAgIG1vZC0+Y29yZV9zaXplKSkpIHsK
KwkgICAgcHJvZmlsZV9sb2FkX2tlcm5lbF9pbWFnZShtb2QsIGksCisgICAgICAgICAgICAgICAg
ICAgICh1bnNpZ25lZCBsb25nKShzZWNoZHJzW2ldLnNoX2FkZHIpLAorICAgICAgICAgICAgICAg
ICAgICAodW5zaWduZWQgbG9uZykoc2VjaGRyc1tpXS5zaF9zaXplKSk7CisJICB9CisJfQorCiAJ
LyogR2V0IHJpZCBvZiB0ZW1wb3JhcnkgY29weSAqLwogCXZmcmVlKGhkcik7CiAKZGlmZiAtdXJO
IGxpbnV4LTIuNi4wLXRlc3QyL2ZzL2V4ZWMuYyBsaW51eC0yLjYuMC10ZXN0Mi1pbnRlbC12dHVu
ZS9mcy9leGVjLmMKLS0tIGxpbnV4LTIuNi4wLXRlc3QyL2ZzL2V4ZWMuYwlTdW4gSnVsIDI3IDEw
OjAwOjM2IDIwMDMKKysrIGxpbnV4LTIuNi4wLXRlc3QyLWludGVsLXZ0dW5lL2ZzL2V4ZWMuYwlT
YXQgQXVnICAyIDIwOjAxOjMwIDIwMDMKQEAgLTQ1LDYgKzQ1LDcgQEAKICNpbmNsdWRlIDxsaW51
eC9tb3VudC5oPgogI2luY2x1ZGUgPGxpbnV4L3NlY3VyaXR5Lmg+CiAjaW5jbHVkZSA8bGludXgv
cm1hcC1sb2NraW5nLmg+CisjaW5jbHVkZSA8bGludXgvcHJvZmlsZS5oPgogCiAjaW5jbHVkZSA8
YXNtL3VhY2Nlc3MuaD4KICNpbmNsdWRlIDxhc20vcGdhbGxvYy5oPgpAQCAtMTA5OSw2ICsxMTAw
LDggQEAKIAlpZiAocmV0dmFsID49IDApIHsKIAkJZnJlZV9hcmdfcGFnZXMoJmJwcm0pOwogCisg
ICAgICAgICAgICAgICAgcHJvZmlsZV9kb19leGVjdmUoY3VycmVudCk7CisKIAkJLyogZXhlY3Zl
IHN1Y2Nlc3MgKi8KIAkJc2VjdXJpdHlfYnBybV9mcmVlKCZicHJtKTsKIAkJcmV0dXJuIHJldHZh
bDsKZGlmZiAtdXJOIGxpbnV4LTIuNi4wLXRlc3QyL21tL21tYXAuYyBsaW51eC0yLjYuMC10ZXN0
Mi1pbnRlbC12dHVuZS9tbS9tbWFwLmMKLS0tIGxpbnV4LTIuNi4wLXRlc3QyL21tL21tYXAuYwlT
dW4gSnVsIDI3IDEwOjA0OjAxIDIwMDMKKysrIGxpbnV4LTIuNi4wLXRlc3QyLWludGVsLXZ0dW5l
L21tL21tYXAuYwlTYXQgQXVnICAyIDIwOjMzOjE1IDIwMDMKQEAgLTY3NCw2ICs2NzQsMTEgQEAK
IAkJfQogCQlrbWVtX2NhY2hlX2ZyZWUodm1fYXJlYV9jYWNoZXAsIHZtYSk7CiAJfQorCisgICAg
ICAgIGlmICh2bWEtPnZtX2ZsYWdzICYgVk1fRVhFQykgeworICAgICAgICAgICAgcHJvZmlsZV9s
b2FkX3VzZXJfaW1hZ2UoY3VycmVudCwgdm1hKTsKKyAgICAgICAgfQorCiBvdXQ6CQogCW1tLT50
b3RhbF92bSArPSBsZW4gPj4gUEFHRV9TSElGVDsKIAlpZiAodm1fZmxhZ3MgJiBWTV9MT0NLRUQp
IHsK

------_=_NextPart_001_01C35995.2FF3F182--
