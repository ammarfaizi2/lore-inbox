Return-Path: <linux-kernel-owner+willy=40w.ods.org-S267164AbUHTRBl@vger.kernel.org>
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S267164AbUHTRBl (ORCPT <rfc822;willy@w.ods.org>);
	Fri, 20 Aug 2004 13:01:41 -0400
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S267368AbUHTRBl
	(ORCPT <rfc822;linux-kernel-outgoing>);
	Fri, 20 Aug 2004 13:01:41 -0400
Received: from cantor.suse.de ([195.135.220.2]:52183 "EHLO Cantor.suse.de")
	by vger.kernel.org with ESMTP id S267164AbUHTRBi (ORCPT
	<rfc822;linux-kernel@vger.kernel.org>);
	Fri, 20 Aug 2004 13:01:38 -0400
Date: Fri, 20 Aug 2004 19:01:37 +0200
From: Olaf Dabrunz <od@suse.de>
To: Linux Kernel <linux-kernel@vger.kernel.org>
Subject: Re: [PATCH 2/2] hotplug resource limitation
Message-ID: <20040820170137.GA14601@suse.de>
Mail-Followup-To: Linux Kernel <linux-kernel@vger.kernel.org>
References: <41177703.5070202@suse.de> <20040810001016.GC7131@kroah.com> <411882DA.5090400@suse.de> <20040810211641.GB4124@kroah.com> <41208835.2080702@suse.de>
Mime-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Disposition: inline
Content-Transfer-Encoding: 8bit
In-Reply-To: <41208835.2080702@suse.de>
User-Agent: Mutt/1.5.6i
Sender: linux-kernel-owner@vger.kernel.org
X-Mailing-List: linux-kernel@vger.kernel.org

On 16-Aug-04, Hannes Reinecke wrote:
> Greg KH wrote:
> >On Tue, Aug 10, 2004 at 10:10:02AM +0200, Hannes Reinecke wrote:
> >
> >>Greg KH wrote:
> >>
> >>>On Mon, Aug 09, 2004 at 03:07:15PM +0200, Hannes Reinecke wrote:
> >I'd be very supprised if you could actually measure the hit of adding 2
> >more lines of bash to those hotplug scripts.  They aren't exactly the
> >fastest thing in the world in the first place, nor do they need to be.

On several architectures (most notably s390, but also IPF and PPC) the
load generated by hotplug during boot can in actual practice become
quite high. The bus scans can generate events of the order of 100 to
1000.

These machines are more I/O-focused and handle many devices in parallel.
So having a quick and lean hotplug becomes very desirable.

Since these machines also tend to be used in HA situations, problem
recovery time and therefore reboot time becomes an essential factor to
decrease periods of unavailability.

> But we want to keep the initial 'hotplug' script as small/fast as 
> possible, as this script is called by _every_ event.
> Any subsequent script (e.g. agents) do not really matter, as they are 
> called much more infrequently (here on my local desktop machine I have a 
> ration of 10:1).

-- 
Olaf Dabrunz (od/odabrunz), SUSE Linux AG, NÃ¼rnberg

