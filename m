Return-Path: <linux-kernel-owner@vger.kernel.org>
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id <S270726AbRHKFfH>; Sat, 11 Aug 2001 01:35:07 -0400
Received: (majordomo@vger.kernel.org) by vger.kernel.org
	id <S270727AbRHKFet>; Sat, 11 Aug 2001 01:34:49 -0400
Received: from 195-23-113-131.nr.ip.pt ([195.23.113.131]:41098 "EHLO
	localhost.localdomain") by vger.kernel.org with ESMTP
	id <S270726AbRHKFef>; Sat, 11 Aug 2001 01:34:35 -0400
Date: Sat, 11 Aug 2001 06:33:09 +0100 (WEST)
From: Rui Sousa <rui.p.m.sousa@clix.pt>
X-X-Sender: <rsousa@localhost.localdomain>
To: Linus Torvalds <torvalds@transmeta.com>
cc: <linux-kernel@vger.kernel.org>, <emu10k1-devel@opensource.creative.com>,
        Robert Love <rml@tech9.net>
Subject: [PATCH] emu10k1 againt kernel 2.4.8
Message-ID: <Pine.LNX.4.33.0108110626300.1487-200000@localhost.localdomain>
MIME-Version: 1.0
Content-Type: MULTIPART/MIXED; BOUNDARY="8323328-477316061-997507989=:1487"
Sender: linux-kernel-owner@vger.kernel.org
X-Mailing-List: linux-kernel@vger.kernel.org

  This message is in MIME format.  The first part should be readable text,
  while the remaining parts are likely unreadable without MIME-aware tools.
  Send mail to mime@docserver.cac.washington.edu for more info.

--8323328-477316061-997507989=:1487
Content-Type: TEXT/PLAIN; charset=US-ASCII


Patch against kernel 2.4.8:
1. Fixes makefiles changes (can now be compiled as a module).
2. Reverts addition of joystick.c
3. Enables emu10k1 sequencer support.
4. Adds documentation for the driver new features.

Please apply,

Rui Sousa

--8323328-477316061-997507989=:1487
Content-Type: TEXT/PLAIN; charset=US-ASCII; name="patch-emu10k1-2.4.8"
Content-Transfer-Encoding: BASE64
Content-ID: <Pine.LNX.4.33.0108110633090.1487@localhost.localdomain>
Content-Description: emu10k1-2.4.8.patch
Content-Disposition: attachment; filename="patch-emu10k1-2.4.8"

ZGlmZiAtdU5yIGxpbnV4LTIuNC44L0RvY3VtZW50YXRpb24vQ29uZmlndXJl
LmhlbHAgbGludXgtMi40LjguZW11MTBrMS5uZXcvRG9jdW1lbnRhdGlvbi9D
b25maWd1cmUuaGVscA0KLS0tIGxpbnV4LTIuNC44L0RvY3VtZW50YXRpb24v
Q29uZmlndXJlLmhlbHAJU2F0IEF1ZyAxMSAwNTozNjowNiAyMDAxDQorKysg
bGludXgtMi40LjguZW11MTBrMS5uZXcvRG9jdW1lbnRhdGlvbi9Db25maWd1
cmUuaGVscAlTYXQgQXVnIDExIDA2OjIyOjEyIDIwMDENCkBAIC0xNTU4NSw4
ICsxNTU4NSwzMCBAQA0KIA0KIENyZWF0aXZlIEVNVTEwSzEgYmFzZWQgUENJ
IHNvdW5kIGNhcmRzDQogQ09ORklHX1NPVU5EX0VNVTEwSzENCi0gIFNheSBZ
IG9yIE0gaWYgeW91IGhhdmUgYSBQQ0kgc291bmQgY2FyZCB1c2luZyB0aGUg
RU1VMTBLMQ0KLSAgY2hpcHNldCwgc3VjaCBhcyB0aGUgQ3JlYXRpdmUgU0JM
aXZlISwgIFNCIFBDSTUxMiBvciBFbXUtQVBTLg0KKyAgU2F5IFkgb3IgTSBp
ZiB5b3UgaGF2ZSBhIFBDSSBzb3VuZCBjYXJkIHVzaW5nIHRoZSBFTVUxMEsx
IGNoaXBzZXQsDQorICBzdWNoIGFzIHRoZSBDcmVhdGl2ZSBTQkxpdmUhLCBT
QiBQQ0k1MTIgb3IgRW11LUFQUy4NCisNCisgIEZvciBtb3JlIGluZm9ybWF0
aW9uIGFib3V0IHRoZSBkZWdyZWUgb2Ygc3VwcG9ydCBmb3IgdGhlIGRpZmZl
cmVudA0KKyAgY2FyZCBtb2RlbHMgcGxlYXNlIGNoZWNrOg0KKw0KKyAgICAg
ICBodHRwOi8vb3BlbnNvdXJjZS5jcmVhdGl2ZS5jb20NCisNCisgIEl0IGlz
IG5vdyBwb3NzaWJsZSB0byBsb2FkIGRzcCBtaWNyb2NvZGUgcGF0Y2hlcyBp
bnRvIHRoZSBFTVUxMEsxDQorICBjaGlwLiAgVGhlc2UgcGF0Y2hlcyBhcmUg
dXNlZCB0byBpbXBsZW1lbnQgcmVhbCB0aW1lIHNvdW5kIHByb2Nlc3NpbmcN
CisgIGVmZmVjdHMgd2hpY2ggaW5jbHVkZSBmb3IgZXhhbXBsZTogc2lnbmFs
IHJvdXRpbmcsIGJhc3MvdHJlYmxlIGNvbnRyb2wsDQorICBBQzMgcGFzc3Ro
cm91Z2gsIC4uLg0KKyAgVXNlcnNwYWNlIHRvb2xzIHRvIGNyZWF0ZSBuZXcg
cGF0Y2hlcyBhbmQgbG9hZC91bmxvYWQgdGhlbSBjYW4gYmUgZm91bmQNCisg
IGF0IHRoZSBhYm92ZSBsaW5rLiBZb3UgbmVlZCB0byBnZXQgdGhlIHNvdXJj
ZSBzbmFwc2hvdCBhbmQgdGhlbiB0eXBlOg0KKw0KKwklIG1ha2UgdG9vbHMN
CisJJSBtYWtlIGluc3RhbGwtdG9vbHMNCisNCisgIGluIHRoZSB0b3AgZGly
ZWN0b3J5Lg0KKw0KK0NyZWF0aXZlIEVNVTEwSzEgTUlESQ0KK0NPTkZJR19N
SURJX0VNVTEwSzENCisgIFNheSBZIGlmIHlvdSB3YW50IHRvIGJlIGFibGUg
dG8gdXNlIHRoZSBPU1MgL2Rldi9zZXF1ZW5jZXIgaW50ZXJmYWNlLg0KKyAg
VGhpcyBjb2RlIGlzIHN0aWxsIGV4cGVyaW1lbnRhbC4NCiANCiBDcnlzdGFs
IFNvdW5kRnVzaW9uIChDUzQyODAvNDYxeCkNCiBDT05GSUdfU09VTkRfRlVT
SU9ODQpkaWZmIC11TnIgbGludXgtMi40LjgvTUFJTlRBSU5FUlMgbGludXgt
Mi40LjguZW11MTBrMS5uZXcvTUFJTlRBSU5FUlMNCi0tLSBsaW51eC0yLjQu
OC9NQUlOVEFJTkVSUwlTYXQgQXVnIDExIDA1OjM2OjA2IDIwMDENCisrKyBs
aW51eC0yLjQuOC5lbXUxMGsxLm5ldy9NQUlOVEFJTkVSUwlTYXQgQXVnIDEx
IDA1OjQxOjEyIDIwMDENCkBAIC00NzEsNyArNDcxLDcgQEANCiANCiBFTVUx
MEsxIFNPVU5EIERSSVZFUg0KIFA6CVJ1aSBTb3VzYQkNCi1NOglyc291c2FA
Z3JhZC5waHlzaWNzLnN1bnlzYi5lZHUJDQorTToJcnVpLnAubS5zb3VzYUBj
bGl4LnB0CQ0KIEw6CWVtdTEwazEtZGV2ZWxAb3BlbnNvdXJjZS5jcmVhdGl2
ZS5jb20NCiBXOglodHRwOi8vb3BlbnNvdXJjZS5jcmVhdGl2ZS5jb20vDQog
UzoJTWFpbnRhaW5lZA0KZGlmZiAtdU5yIGxpbnV4LTIuNC44L2RyaXZlcnMv
c291bmQvQ29uZmlnLmluIGxpbnV4LTIuNC44LmVtdTEwazEubmV3L2RyaXZl
cnMvc291bmQvQ29uZmlnLmluDQotLS0gbGludXgtMi40LjgvZHJpdmVycy9z
b3VuZC9Db25maWcuaW4JU3VuIEp1bCAyOSAxMDozNDozOCAyMDAxDQorKysg
bGludXgtMi40LjguZW11MTBrMS5uZXcvZHJpdmVycy9zb3VuZC9Db25maWcu
aW4JU2F0IEF1ZyAxMSAwNTo1Nzo1MCAyMDAxDQpAQCAtMzAsNiArMzAsNyBA
QA0KICAgICBmaQ0KIGZpDQogZGVwX3RyaXN0YXRlICcgIENyZWF0aXZlIFNC
TGl2ZSEgKEVNVTEwSzEpJyBDT05GSUdfU09VTkRfRU1VMTBLMSAkQ09ORklH
X1NPVU5EICRDT05GSUdfUENJDQorZGVwX21ib29sICAgICcgIENyZWF0aXZl
IFNCTGl2ZSEgTUlESScgQ09ORklHX01JRElfRU1VMTBLMSAkQ09ORklHX1NP
VU5EX0VNVTEwSzEgJENPTkZJR19FWFBFUklNRU5UQUwNCiBkZXBfdHJpc3Rh
dGUgJyAgQ3J5c3RhbCBTb3VuZEZ1c2lvbiAoQ1M0MjgwLzQ2MXgpJyBDT05G
SUdfU09VTkRfRlVTSU9OICRDT05GSUdfU09VTkQNCiBkZXBfdHJpc3RhdGUg
JyAgQ3J5c3RhbCBTb3VuZCBDUzQyODEnIENPTkZJR19TT1VORF9DUzQyODEg
JENPTkZJR19TT1VORA0KIGRlcF90cmlzdGF0ZSAnICBFbnNvbmlxIEF1ZGlv
UENJIChFUzEzNzApJyBDT05GSUdfU09VTkRfRVMxMzcwICRDT05GSUdfU09V
TkQgJENPTkZJR19QQ0kNCmRpZmYgLXVOciBsaW51eC0yLjQuOC9kcml2ZXJz
L3NvdW5kL01ha2VmaWxlIGxpbnV4LTIuNC44LmVtdTEwazEubmV3L2RyaXZl
cnMvc291bmQvTWFrZWZpbGUNCi0tLSBsaW51eC0yLjQuOC9kcml2ZXJzL3Nv
dW5kL01ha2VmaWxlCVNhdCBBdWcgMTEgMDU6MzY6MzIgMjAwMQ0KKysrIGxp
bnV4LTIuNC44LmVtdTEwazEubmV3L2RyaXZlcnMvc291bmQvTWFrZWZpbGUJ
U2F0IEF1ZyAxMSAwNTo0Mjo1NCAyMDAxDQpAQCAtNjgsMTIgKzY4LDE2IEBA
DQogb2JqLSQoQ09ORklHX1NPVU5EX01BRVNUUk8pCSs9IG1hZXN0cm8ubw0K
IG9iai0kKENPTkZJR19TT1VORF9NQUVTVFJPMykJKz0gbWFlc3RybzMubyBh
Yzk3X2NvZGVjLm8NCiBvYmotJChDT05GSUdfU09VTkRfVFJJREVOVCkJKz0g
dHJpZGVudC5vIGFjOTdfY29kZWMubw0KK29iai0kKENPTkZJR19TT1VORF9F
TVUxMEsxKQkrPSBhYzk3X2NvZGVjLm8NCitpZmVxICgkKENPTkZJR19NSURJ
X0VNVTEwSzEpLHkpDQorICBvYmotJChDT05GSUdfU09VTkRfRU1VMTBLMSkJ
Kz0gc291bmQubw0KK2VuZGlmDQogDQogc3ViZGlyLSQoQ09ORklHX1NPVU5E
X0VNVTEwSzEpICs9IGVtdTEwazENCiBzdWJkaXItJChDT05GSUdfU09VTkRf
Q1M0MjgxKSArPSBjczQyODENCiANCiBpZmVxICgkKENPTkZJR19TT1VORF9F
TVUxMEsxKSx5KQ0KLSAgb2JqLXkgKz0gYWM5N19jb2RlYy5vIGVtdTEwazEv
ZW11MTBrMS5vDQorICBvYmoteSArPSBlbXUxMGsxL2VtdTEwazEubw0KIGVu
ZGlmDQogDQogaWZlcSAoJChDT05GSUdfU09VTkRfQ1M0MjgxKSx5KQ0KZGlm
ZiAtdU5yIGxpbnV4LTIuNC44L2RyaXZlcnMvc291bmQvZW11MTBrMS9NYWtl
ZmlsZSBsaW51eC0yLjQuOC5lbXUxMGsxLm5ldy9kcml2ZXJzL3NvdW5kL2Vt
dTEwazEvTWFrZWZpbGUNCi0tLSBsaW51eC0yLjQuOC9kcml2ZXJzL3NvdW5k
L2VtdTEwazEvTWFrZWZpbGUJU2F0IEF1ZyAxMSAwNTozNjozMiAyMDAxDQor
KysgbGludXgtMi40LjguZW11MTBrMS5uZXcvZHJpdmVycy9zb3VuZC9lbXUx
MGsxL01ha2VmaWxlCVNhdCBBdWcgMTEgMDU6NDc6NDMgMjAwMQ0KQEAgLTUs
MTMgKzUsMTYgQEANCiBPX1RBUkdFVCA6PSBlbXUxMGsxLm8NCiANCiBvYmot
eSA6PSAgICAgYXVkaW8ubyBjYXJkbWkubyBjYXJkbW8ubyBjYXJkd2kubyBj
YXJkd28ubyBlY2FyZC5vIFwNCi0gICAgICAgICAgICAgZWZ4bWdyLm8gZW11
YWR4bWcubyBod2FjY2Vzcy5vIGlycW1nci5vIGpveXN0aWNrLm8gXA0KLSAg
ICAgICAgICAgICBtYWluLm8gbWlkaS5vIG1peGVyLm8gcGFzc3Rocm91Z2gu
byByZWNtZ3IubyB0aW1lci5vIFwNCi0gICAgICAgICAgICAgdm9pY2VtZ3Iu
bw0KKyAgICAgICAgICAgICBlZnhtZ3IubyBlbXVhZHhtZy5vIGh3YWNjZXNz
Lm8gaXJxbWdyLm8gbWFpbi5vIG1pZGkubyBcDQorICAgICAgICAgICAgIG1p
eGVyLm8gcGFzc3Rocm91Z2gubyByZWNtZ3IubyB0aW1lci5vIHZvaWNlbWdy
Lm8NCiBvYmotbSA6PSAkKE9fVEFSR0VUKQ0KIA0KIGlmZGVmIERFQlVHDQog
ICAgIEVYVFJBX0NGTEFHUyArPSAtREVNVTEwSzFfREVCVUcNCitlbmRpZg0K
Kw0KK2lmZGVmIENPTkZJR19NSURJX0VNVTEwSzENCisgICAgRVhUUkFfQ0ZM
QUdTICs9IC1ERU1VMTBLMV9TRVFVRU5DRVINCiBlbmRpZg0KIA0KIGluY2x1
ZGUgJChUT1BESVIpL1J1bGVzLm1ha2UNCmRpZmYgLXVOciBsaW51eC0yLjQu
OC9kcml2ZXJzL3NvdW5kL2VtdTEwazEvam95c3RpY2suYyBsaW51eC0yLjQu
OC5lbXUxMGsxLm5ldy9kcml2ZXJzL3NvdW5kL2VtdTEwazEvam95c3RpY2su
Yw0KLS0tIGxpbnV4LTIuNC44L2RyaXZlcnMvc291bmQvZW11MTBrMS9qb3lz
dGljay5jCVNhdCBBdWcgMTEgMDU6MzY6MzMgMjAwMQ0KKysrIGxpbnV4LTIu
NC44LmVtdTEwazEubmV3L2RyaXZlcnMvc291bmQvZW11MTBrMS9qb3lzdGlj
ay5jCVRodSBKYW4gIDEgMDE6MDA6MDAgMTk3MA0KQEAgLTEsMjA0ICswLDAg
QEANCi0vKg0KLSAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQotICogICAg
IGpveXN0aWNrLmMgLSBDcmVhdGl2ZSBFTVUxMEsxIEpveXN0aWNrIHBvcnQg
ZHJpdmVyDQotICogICAgIENvcHlyaWdodCAyMDAwIFJ1aSBTb3VzYS4NCi0g
Kg0KLSAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQotICoNCi0gKiAgICAg
RGF0ZSAgICAgICAgICAgICAgICAgQXV0aG9yICAgICAgICAgIFN1bW1hcnkg
b2YgY2hhbmdlcw0KLSAqICAgICAtLS0tICAgICAgICAgICAgICAgICAtLS0t
LS0gICAgICAgICAgLS0tLS0tLS0tLS0tLS0tLS0tDQotICogICAgIEFwcmls
ICAxLCAyMDAwICAgICAgIFJ1aSBTb3VzYSAgICAgICBpbml0aWFsIHZlcnNp
b24gDQotICogICAgIEFwcmlsIDI4LCAyMDAwICAgICAgIFJ1aSBTb3VzYSAg
ICAgICBmaXhlZCBhIGtlcm5lbCBvb3BzLA0KLSAqCQkJCQkgICAgbWFrZSB1
c2Ugb2Yga2NvbXBhdDI0IGZvcg0KLSAqCQkJCQkgICAgMi4yIGtlcm5lbHMg
Y29tcGF0aWJpbGl0eS4NCi0gKiAgICAgTWF5ICAgIDEsIDIwMDAgICAgICAg
UnVpIFNvdXNhICAgICAgIGltcHJvdmVkIGtlcm5lbCBjb21wYXRpYmlsaXR5
DQotICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICBsYXllci4NCi0gKg0KLSAqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQot
ICoNCi0gKiAgICAgVGhpcyBwcm9ncmFtIGlzIGZyZWUgc29mdHdhcmU7IHlv
dSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vcg0KLSAqICAgICBtb2RpZnkg
aXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMg
TGljZW5zZSBhcw0KLSAqICAgICBwdWJsaXNoZWQgYnkgdGhlIEZyZWUgU29m
dHdhcmUgRm91bmRhdGlvbjsgZWl0aGVyIHZlcnNpb24gMiBvZg0KLSAqICAg
ICB0aGUgTGljZW5zZSwgb3IgKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIg
dmVyc2lvbi4NCi0gKg0KLSAqICAgICBUaGlzIHByb2dyYW0gaXMgZGlzdHJp
YnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCwNCi0g
KiAgICAgYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4g
dGhlIGltcGxpZWQgd2FycmFudHkgb2YNCi0gKiAgICAgTUVSQ0hBTlRBQklM
SVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiAgU2Vl
IHRoZQ0KLSAqICAgICBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3Ig
bW9yZSBkZXRhaWxzLg0KLSAqDQotICogICAgIFlvdSBzaG91bGQgaGF2ZSBy
ZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYw0KLSAq
ICAgICBMaWNlbnNlIGFsb25nIHdpdGggdGhpcyBwcm9ncmFtOyBpZiBub3Qs
IHdyaXRlIHRvIHRoZSBGcmVlDQotICogICAgIFNvZnR3YXJlIEZvdW5kYXRp
b24sIEluYy4sIDY3NSBNYXNzIEF2ZSwgQ2FtYnJpZGdlLCBNQSAwMjEzOSwN
Ci0gKiAgICAgVVNBLg0KLSAqDQotICoqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KiovDQotDQotI2luY2x1ZGUgPGxpbnV4L21vZHVsZS5oPg0KLSNpbmNsdWRl
IDxsaW51eC9pbml0Lmg+DQotI2luY2x1ZGUgPGxpbnV4L3ZlcnNpb24uaD4N
Ci0jaW5jbHVkZSA8bGludXgvcGNpLmg+DQotI2luY2x1ZGUgPGxpbnV4L3Ns
YWIuaD4NCi0jaW5jbHVkZSA8bGludXgvaW9wb3J0Lmg+DQotI2luY2x1ZGUg
PGxpbnV4L2xpc3QuaD4NCi0NCi0jZGVmaW5lIERSSVZFUl9WRVJTSU9OICIw
LjMuMSINCi0NCi0jaWZuZGVmIFBDSV9WRU5ET1JfSURfQ1JFQVRJVkUNCi0j
ZGVmaW5lIFBDSV9WRU5ET1JfSURfQ1JFQVRJVkUgMHgxMTAyDQotI2VuZGlm
DQotDQotI2lmbmRlZiBQQ0lfREVWSUNFX0lEX0NSRUFUSVZFX0VNVTEwSzFf
Sk9ZU1RJQ0sNCi0jZGVmaW5lIFBDSV9ERVZJQ0VfSURfQ1JFQVRJVkVfRU1V
MTBLMV9KT1lTVElDSyAweDcwMDINCi0jZW5kaWYNCi0NCi0vKiBQQ0kgZnVu
Y3Rpb24gMSByZWdpc3RlcnMsIGFkZHJlc3MgPSA8dmFsPiArIFBDSUJBU0Ux
ICovDQotDQotI2RlZmluZSBKT1lTVElDSzEgICAgICAgICAgICAgICAweDAw
ICAgICAgICAgICAgLyogQW5hbG9nIGpveXN0aWNrIHBvcnQgcmVnaXN0ZXIg
ICAgICAgICAgICAgICAgKi8NCi0jZGVmaW5lIEpPWVNUSUNLMiAgICAgICAg
ICAgICAgIDB4MDEgICAgICAgICAgICAvKiBBbmFsb2cgam95c3RpY2sgcG9y
dCByZWdpc3RlciAgICAgICAgICAgICAgICAqLw0KLSNkZWZpbmUgSk9ZU1RJ
Q0szICAgICAgICAgICAgICAgMHgwMiAgICAgICAgICAgIC8qIEFuYWxvZyBq
b3lzdGljayBwb3J0IHJlZ2lzdGVyICAgICAgICAgICAgICAgICovDQotI2Rl
ZmluZSBKT1lTVElDSzQgICAgICAgICAgICAgICAweDAzICAgICAgICAgICAg
LyogQW5hbG9nIGpveXN0aWNrIHBvcnQgcmVnaXN0ZXIgICAgICAgICAgICAg
ICAgKi8NCi0jZGVmaW5lIEpPWVNUSUNLNSAgICAgICAgICAgICAgIDB4MDQg
ICAgICAgICAgICAvKiBBbmFsb2cgam95c3RpY2sgcG9ydCByZWdpc3RlciAg
ICAgICAgICAgICAgICAqLw0KLSNkZWZpbmUgSk9ZU1RJQ0s2ICAgICAgICAg
ICAgICAgMHgwNSAgICAgICAgICAgIC8qIEFuYWxvZyBqb3lzdGljayBwb3J0
IHJlZ2lzdGVyICAgICAgICAgICAgICAgICovDQotI2RlZmluZSBKT1lTVElD
SzcgICAgICAgICAgICAgICAweDA2ICAgICAgICAgICAgLyogQW5hbG9nIGpv
eXN0aWNrIHBvcnQgcmVnaXN0ZXIgICAgICAgICAgICAgICAgKi8NCi0jZGVm
aW5lIEpPWVNUSUNLOCAgICAgICAgICAgICAgIDB4MDcgICAgICAgICAgICAv
KiBBbmFsb2cgam95c3RpY2sgcG9ydCByZWdpc3RlciAgICAgICAgICAgICAg
ICAqLw0KLQ0KLS8qIFdoZW4gd3JpdGluZywgYW55IHdyaXRlIGNhdXNlcyBK
T1lTVElDS19DT01QQVJBVE9SIG91dHB1dCBlbmFibGUgdG8gYmUgcHVsc2Vk
IG9uIHdyaXRlLiAgICAgICovDQotLyogV2hlbiByZWFkaW5nLCB1c2UgdGhl
c2UgYml0ZmllbGRzOiAqLw0KLSNkZWZpbmUgSk9ZU1RJQ0tfQlVUVE9OUyAg
ICAgICAgMHgwZiAgICAgICAgICAgIC8qIEpveXN0aWNrIGJ1dHRvbiBkYXRh
ICAgICAgICAgICAgICAgICAgICAgICAgICovDQotI2RlZmluZSBKT1lTVElD
S19DT01QQVJBVE9SICAgICAweGYwICAgICAgICAgICAgLyogSm95c3RpY2sg
Y29tcGFyYXRvciBkYXRhICAgICAgICAgICAgICAgICAgICAgKi8NCi0NCi0j
ZGVmaW5lIE5SX0RFViA1DQotDQotc3RhdGljIGludCBpb1tOUl9ERVZdID0g
eyAwLCB9Ow0KLQ0KLWVudW0gew0KLQlFTVUxMEsxX0pPWVNUSUNLID0gMA0K
LX07DQotDQotc3RhdGljIGNoYXIgKmNhcmRfbmFtZXNbXSA9IHsNCi0JIkVN
VTEwSzEgSm95c3RpY2sgUG9ydCINCi19Ow0KLQ0KLXN0YXRpYyBzdHJ1Y3Qg
cGNpX2RldmljZV9pZCBlbXUxMGsxX2pveV9wY2lfdGJsW10gX19kZXZpbml0
ZGF0YSA9IHsNCi0Je1BDSV9WRU5ET1JfSURfQ1JFQVRJVkUsIFBDSV9ERVZJ
Q0VfSURfQ1JFQVRJVkVfRU1VMTBLMV9KT1lTVElDSywNCi0JIFBDSV9BTllf
SUQsIFBDSV9BTllfSUQsIDAsIDAsIEVNVTEwSzFfSk9ZU1RJQ0t9LA0KLQl7
MCx9DQotfTsNCi0NCi1NT0RVTEVfREVWSUNFX1RBQkxFKHBjaSwgZW11MTBr
MV9qb3lfcGNpX3RibCk7DQotDQotc3RydWN0IGVtdTEwazFfam95X2NhcmQg
ew0KLQlzdHJ1Y3QgbGlzdF9oZWFkIGxpc3Q7DQotDQotCXN0cnVjdCBwY2lf
ZGV2ICpwY2lfZGV2Ow0KLQl1bnNpZ25lZCBsb25nIGlvYmFzZTsNCi0JdW5z
aWduZWQgbG9uZyBsZW5ndGg7DQotCXU4IGFkZHJfY2hhbmdlZDsNCi19Ow0K
LQ0KLXN0YXRpYyBMSVNUX0hFQUQoZW11MTBrMV9qb3lfZGV2cyk7DQotc3Rh
dGljIHVuc2lnbmVkIGludCBkZXZpbmRleCA9IDA7DQotDQotLyogRHJpdmVy
IGluaXRpYWxpemF0aW9uIHJvdXRpbmUgKi8NCi1zdGF0aWMgaW50IF9fZGV2
aW5pdCBlbXUxMGsxX2pveV9wcm9iZShzdHJ1Y3QgcGNpX2RldiAqcGNpX2Rl
diwgY29uc3Qgc3RydWN0IHBjaV9kZXZpY2VfaWQgKnBjaV9pZCkNCi17DQot
CXN0cnVjdCBlbXUxMGsxX2pveV9jYXJkICpjYXJkOw0KLQl1MTYgbW9kZWw7
DQotCXU4IGNoaXByZXY7DQotDQotCWlmICgoY2FyZCA9IGttYWxsb2Moc2l6
ZW9mKHN0cnVjdCBlbXUxMGsxX2pveV9jYXJkKSwgR0ZQX0tFUk5FTCkpID09
IE5VTEwpIHsNCi0JCXByaW50ayhLRVJOX0VSUiAiZW11MTBrMS1qb3k6IG91
dCBvZiBtZW1vcnlcbiIpOw0KLQkJcmV0dXJuIC1FTk9NRU07DQotCX0NCi0J
bWVtc2V0KGNhcmQsIDAsIHNpemVvZihzdHJ1Y3QgZW11MTBrMV9qb3lfY2Fy
ZCkpOw0KLQ0KLQlpZiAocGNpX2VuYWJsZV9kZXZpY2UocGNpX2RldikpIHsN
Ci0JCXByaW50ayhLRVJOX0VSUiAiZW11MTBrMS1qb3k6IGNvdWxkbid0IGVu
YWJsZSBkZXZpY2VcbiIpOw0KLQkJa2ZyZWUoY2FyZCk7DQotCQlyZXR1cm4g
LUVOT0RFVjsNCi0JfQ0KLQ0KLQljYXJkLT5pb2Jhc2UgPSBwY2lfcmVzb3Vy
Y2Vfc3RhcnQocGNpX2RldiwgMCk7IA0KLQljYXJkLT5sZW5ndGggPSBwY2lf
cmVzb3VyY2VfbGVuKHBjaV9kZXYsIDApOw0KLQ0KLQlpZiAocmVxdWVzdF9y
ZWdpb24oY2FyZC0+aW9iYXNlLCBjYXJkLT5sZW5ndGgsIGNhcmRfbmFtZXNb
cGNpX2lkLT5kcml2ZXJfZGF0YV0pDQotCSAgICA9PSBOVUxMKSB7DQotCQlw
cmludGsoS0VSTl9FUlIgImVtdTEwazEtam95OiBJTyBzcGFjZSBpbiB1c2Vc
biIpOw0KLQkJa2ZyZWUoY2FyZCk7DQotCQlyZXR1cm4gLUVOT0RFVjsNCi0J
fQ0KLQ0KLQlwY2lfc2V0X2RydmRhdGEocGNpX2RldiwgY2FyZCk7DQotDQot
CWNhcmQtPnBjaV9kZXYgPSBwY2lfZGV2Ow0KLQljYXJkLT5hZGRyX2NoYW5n
ZWQgPSAwOw0KLQ0KLQlwY2lfcmVhZF9jb25maWdfYnl0ZShwY2lfZGV2LCBQ
Q0lfUkVWSVNJT05fSUQsICZjaGlwcmV2KTsNCi0JcGNpX3JlYWRfY29uZmln
X3dvcmQocGNpX2RldiwgUENJX1NVQlNZU1RFTV9JRCwgJm1vZGVsKTsNCi0N
Ci0JcHJpbnRrKEtFUk5fSU5GTyAiZW11MTBrMS1qb3k6ICVzIHJldiAlZCBt
b2RlbCAweCV4IGZvdW5kLCBJTyBhdCAweCUwNGx4LTB4JTA0bHhcbiIsDQot
CQljYXJkX25hbWVzW3BjaV9pZC0+ZHJpdmVyX2RhdGFdLCBjaGlwcmV2LCBt
b2RlbCwgY2FyZC0+aW9iYXNlLA0KLQkJY2FyZC0+aW9iYXNlICsgY2FyZC0+
bGVuZ3RoIC0gMSk7DQotDQotCWlmIChpb1tkZXZpbmRleF0pIHsNCi0JCWlm
ICgoaW9bZGV2aW5kZXhdICYgfjB4MTgpICE9IDB4MjAwKSB7DQotCQkJcHJp
bnRrKEtFUk5fRVJSICJlbXUxMGsxLWpveTogaW52YWxpZCBpbyB2YWx1ZVxu
Iik7DQotCQkJcmVsZWFzZV9yZWdpb24oY2FyZC0+aW9iYXNlLCBjYXJkLT5s
ZW5ndGgpOw0KLQkJCWtmcmVlKGNhcmQpOw0KLQkJCXJldHVybiAtRU5PREVW
Ow0KLQkJfQ0KLQ0KLQkJY2FyZC0+YWRkcl9jaGFuZ2VkID0gMTsNCi0JCXBj
aV93cml0ZV9jb25maWdfZHdvcmQocGNpX2RldiwgUENJX0JBU0VfQUREUkVT
U18wLCBpb1tkZXZpbmRleF0pOw0KLQkJcHJpbnRrKEtFUk5fSU5GTyAiZW11
MTBrMS1qb3k6IElPIHBvcnRzIG1pcnJvcmVkIGF0IDB4JTAzeFxuIiwgaW9b
ZGV2aW5kZXhdKTsNCi0JfQ0KLQ0KLQlsaXN0X2FkZCgmY2FyZC0+bGlzdCwg
JmVtdTEwazFfam95X2RldnMpOw0KLQlkZXZpbmRleCsrOw0KLQ0KLQlyZXR1
cm4gMDsNCi19DQotDQotc3RhdGljIHZvaWQgX19kZXZleGl0IGVtdTEwazFf
am95X3JlbW92ZShzdHJ1Y3QgcGNpX2RldiAqcGNpX2RldikNCi17DQotCXN0
cnVjdCBlbXUxMGsxX2pveV9jYXJkICpjYXJkID0gcGNpX2dldF9kcnZkYXRh
KHBjaV9kZXYpOw0KLQ0KLQlpZihjYXJkLT5hZGRyX2NoYW5nZWQpDQotCQlw
Y2lfd3JpdGVfY29uZmlnX2R3b3JkKHBjaV9kZXYsIFBDSV9CQVNFX0FERFJF
U1NfMCwgY2FyZC0+aW9iYXNlKTsNCi0NCi0JcmVsZWFzZV9yZWdpb24oY2Fy
ZC0+aW9iYXNlLCBjYXJkLT5sZW5ndGgpOw0KLQ0KLQlsaXN0X2RlbCgmY2Fy
ZC0+bGlzdCk7DQotCWtmcmVlKGNhcmQpOw0KLQlwY2lfc2V0X2RydmRhdGEo
cGNpX2RldiwgTlVMTCk7DQotfQ0KLQ0KLU1PRFVMRV9QQVJNKGlvLCAiMS0i
IF9fTU9EVUxFX1NUUklORyhOUl9ERVYpICJpIik7DQotTU9EVUxFX1BBUk1f
REVTQyhpbywgInNldHMgam95c3RpY2sgcG9ydCBhZGRyZXNzIik7DQotTU9E
VUxFX0FVVEhPUigiUnVpIFNvdXNhIChFbWFpbCB0bzogZW11MTBrMS1kZXZl
bEBvcGVuc291cmNlLmNyZWF0aXZlLmNvbSkiKTsNCi1NT0RVTEVfREVTQ1JJ
UFRJT04oIkNyZWF0aXZlIEVNVTEwSzEgUENJIEpveXN0aWNrIFBvcnQgdiIg
RFJJVkVSX1ZFUlNJT04NCi0JCSAgICJcbkNvcHlyaWdodCAoQykgMjAwMCBS
dWkgU291c2EiKTsNCi0NCi1zdGF0aWMgc3RydWN0IHBjaV9kcml2ZXIgZW11
MTBrMV9qb3lfcGNpX2RyaXZlciA9IHsNCi0JbmFtZToiZW11MTBrMSBqb3lz
dGljayIsDQotCWlkX3RhYmxlOmVtdTEwazFfam95X3BjaV90YmwsDQotCXBy
b2JlOmVtdTEwazFfam95X3Byb2JlLA0KLQlyZW1vdmU6ZW11MTBrMV9qb3lf
cmVtb3ZlLA0KLX07DQotDQotc3RhdGljIGludCBfX2luaXQgZW11MTBrMV9q
b3lfaW5pdF9tb2R1bGUodm9pZCkNCi17DQotCXByaW50ayhLRVJOX0lORk8g
IkNyZWF0aXZlIEVNVTEwSzEgUENJIEpveXN0aWNrIFBvcnQsIHZlcnNpb24g
IiBEUklWRVJfVkVSU0lPTiAiLCAiIF9fVElNRV9fDQotCSAgICAgICAiICIg
X19EQVRFX18gIlxuIik7DQotDQotCXJldHVybiBwY2lfbW9kdWxlX2luaXQo
JmVtdTEwazFfam95X3BjaV9kcml2ZXIpOw0KLX0NCi0NCi1zdGF0aWMgdm9p
ZCBfX2V4aXQgZW11MTBrMV9qb3lfY2xlYW51cF9tb2R1bGUodm9pZCkNCi17
DQotCXBjaV91bnJlZ2lzdGVyX2RyaXZlcigmZW11MTBrMV9qb3lfcGNpX2Ry
aXZlcik7DQotCXJldHVybjsNCi19DQotDQotbW9kdWxlX2luaXQoZW11MTBr
MV9qb3lfaW5pdF9tb2R1bGUpOw0KLW1vZHVsZV9leGl0KGVtdTEwazFfam95
X2NsZWFudXBfbW9kdWxlKTsNCmRpZmYgLXVOciBsaW51eC0yLjQuOC9kcml2
ZXJzL3NvdW5kL2VtdTEwazEvbWFpbi5jIGxpbnV4LTIuNC44LmVtdTEwazEu
bmV3L2RyaXZlcnMvc291bmQvZW11MTBrMS9tYWluLmMNCi0tLSBsaW51eC0y
LjQuOC9kcml2ZXJzL3NvdW5kL2VtdTEwazEvbWFpbi5jCVNhdCBBdWcgMTEg
MDU6MzY6MzMgMjAwMQ0KKysrIGxpbnV4LTIuNC44LmVtdTEwazEubmV3L2Ry
aXZlcnMvc291bmQvZW11MTBrMS9tYWluLmMJU2F0IEF1ZyAxMSAwNTo0Nzo0
MyAyMDAxDQpAQCAtOTIsOCArOTIsOCBAQA0KICNkZWZpbmUgTUlESV9TWU5U
SF9OQU1FICJFTVUxMEsxIE1JREkiDQogI2RlZmluZSBNSURJX1NZTlRIX0NB
UFMgU1lOVEhfQ0FQX0lOUFVUDQogIA0KLSNpbmNsdWRlICJzb3VuZF9jb25m
aWcuaCINCi0jaW5jbHVkZSAibWlkaV9zeW50aC5oIg0KKyNpbmNsdWRlICIu
Li9zb3VuZF9jb25maWcuaCINCisjaW5jbHVkZSAiLi4vbWlkaV9zeW50aC5o
Ig0KIA0KIC8qIHRoaXMgc2hvdWxkIGJlIGluIGRldl90YWJsZS5oICovDQog
I2RlZmluZSBTTkRDQVJEX0VNVTEwSzEgNDYNCkBAIC0xMDM5LDYgKzEwMzks
NyBAQA0KIA0KIHN0YXRpYyBzdHJ1Y3QgbWlkaV9vcGVyYXRpb25zIGVtdTEw
azFfbWlkaV9vcGVyYXRpb25zID0NCiB7DQorICAgIFRISVNfTU9EVUxFLA0K
ICAgICB7IkVNVTEwSzEgTUlESSIsIDAsIDAsIFNORENBUkRfRU1VMTBLMX0s
DQogCSZzdGRfbWlkaV9zeW50aCwNCiAJezB9LA0KZGlmZiAtdU5yIGxpbnV4
LTIuNC44L2RyaXZlcnMvc291bmQvZW11MTBrMS9taWRpLmMgbGludXgtMi40
LjguZW11MTBrMS5uZXcvZHJpdmVycy9zb3VuZC9lbXUxMGsxL21pZGkuYw0K
LS0tIGxpbnV4LTIuNC44L2RyaXZlcnMvc291bmQvZW11MTBrMS9taWRpLmMJ
U2F0IEF1ZyAxMSAwNTozNjozNCAyMDAxDQorKysgbGludXgtMi40LjguZW11
MTBrMS5uZXcvZHJpdmVycy9zb3VuZC9lbXUxMGsxL21pZGkuYwlTYXQgQXVn
IDExIDA1OjQ3OjQzIDIwMDENCkBAIC00Myw3ICs0Myw3IEBADQogI2luY2x1
ZGUgIm1pZGkuaCINCiANCiAjaWZkZWYgRU1VMTBLMV9TRVFVRU5DRVINCi0j
aW5jbHVkZSAic291bmRfY29uZmlnLmgiDQorI2luY2x1ZGUgIi4uL3NvdW5k
X2NvbmZpZy5oIg0KICNlbmRpZg0KIA0KIHN0YXRpYyBzcGlubG9ja190IG1p
ZGlfc3BpbmxvY2sgX19hdHRyaWJ1dGUoKHVudXNlZCkpID0gU1BJTl9MT0NL
X1VOTE9DS0VEOw0KZGlmZiAtdU5yIGxpbnV4LTIuNC44L2RyaXZlcnMvc291
bmQvZW11MTBrMS9wYXNzdGhyb3VnaC5oIGxpbnV4LTIuNC44LmVtdTEwazEu
bmV3L2RyaXZlcnMvc291bmQvZW11MTBrMS9wYXNzdGhyb3VnaC5oDQotLS0g
bGludXgtMi40LjgvZHJpdmVycy9zb3VuZC9lbXUxMGsxL3Bhc3N0aHJvdWdo
LmgJU2F0IEF1ZyAxMSAwNTozNjozNCAyMDAxDQorKysgbGludXgtMi40Ljgu
ZW11MTBrMS5uZXcvZHJpdmVycy9zb3VuZC9lbXUxMGsxL3Bhc3N0aHJvdWdo
LmgJU2F0IEF1ZyAxMSAwNTo0Nzo0MyAyMDAxDQpAQCAtMzIsNiArMzIsNyBA
QA0KICNpZm5kZWYgX1BBU1NUSFJPVUdIX0gNCiAjZGVmaW5lIF9QQVNTVEhS
T1VHSF9IDQogDQorI2luY2x1ZGUgImh3YWNjZXNzLmgiDQogI2luY2x1ZGUg
ImF1ZGlvLmgiDQogDQogLyogbnVtYmVyIG9mIDE2LWJpdCBzdGVyZW8gc2Ft
cGxlcyBpbiBYVFJBTSBidWZmZXIgKi8NCg==
--8323328-477316061-997507989=:1487--
