Return-Path: <linux-kernel-owner+willy=40w.ods.org-S1758931AbWK2XCm@vger.kernel.org>
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S1758931AbWK2XCm (ORCPT <rfc822;willy@w.ods.org>);
	Wed, 29 Nov 2006 18:02:42 -0500
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S1758930AbWK2XCm
	(ORCPT <rfc822;linux-kernel-outgoing>);
	Wed, 29 Nov 2006 18:02:42 -0500
Received: from mx2.suse.de ([195.135.220.15]:58821 "EHLO mx2.suse.de")
	by vger.kernel.org with ESMTP id S1758928AbWK2XCl (ORCPT
	<rfc822;linux-kernel@vger.kernel.org>);
	Wed, 29 Nov 2006 18:02:41 -0500
Date: Wed, 29 Nov 2006 15:02:19 -0800
From: Greg KH <gregkh@suse.de>
To: David Brownell <david-b@pacbell.net>
Cc: Kay Sievers <kay.sievers@vrfy.org>, "Marco d'Itri" <md@Linux.IT>,
       linux-kernel@vger.kernel.org
Subject: Re: [patch 2.6.19-rc6] fix hotplug for legacy platform drivers
Message-ID: <20061129230219.GA11539@suse.de>
References: <20061122135948.GA7888@bongo.bofh.it> <1164623293.3702.4.camel@pim.off.vrfy.org> <20061127190315.GA28107@suse.de> <200611291450.59165.david-b@pacbell.net>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <200611291450.59165.david-b@pacbell.net>
User-Agent: Mutt/1.5.13 (2006-08-11)
Sender: linux-kernel-owner@vger.kernel.org
X-Mailing-List: linux-kernel@vger.kernel.org

On Wed, Nov 29, 2006 at 02:50:58PM -0800, David Brownell wrote:
> On Monday 27 November 2006 11:03 am, Greg KH wrote:
> 
> > David, any chance you can fix this up, as people are seeing this bug
> > today.
> 
> Here's my fix.  Unlike the fix Kay suggested, it causes at worst only
> a minor loss of functionality, so that tradeoff seems fair for a late
> merge.  I audited all the drivers using the relevant APIs, and I can't
> see many (if any!) folk hitting problems from this.

But this still can cause the problem that your 'modalias' file in sysfs
contains exactly the same name as the module itself, right?

That's not good, it should be an alias, not the "real name".

I'd even settle for 'driver:MODULE_NAME' and have that automatically
generated by the driver core logic somehow (note, Kay came up with that
idea in the past, it's not new...)

So, I don't like this patch, can't we come up with a way for the alias
to be just that, an alias?

That will ensure that userspace tools do not get confused, _and_ it be
possible to properly use the 'blacklist' option to modprobe (which only
works on aliases right now, as it should.)

thanks,

greg k-h
