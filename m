Return-Path: <linux-kernel-owner+willy=40w.ods.org@vger.kernel.org>
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id <S267028AbSK2MP7>; Fri, 29 Nov 2002 07:15:59 -0500
Received: (majordomo@vger.kernel.org) by vger.kernel.org
	id <S267029AbSK2MP7>; Fri, 29 Nov 2002 07:15:59 -0500
Received: from mail.hamburg.pop.de ([193.98.9.7]:56988 "EHLO mail.provi.de")
	by vger.kernel.org with ESMTP id <S267028AbSK2MP6>;
	Fri, 29 Nov 2002 07:15:58 -0500
Subject: Kernel 2.4.20: Strange behaviour of system services
From: Michael Reincke <reincke.m@stn-atlas.de>
To: linux-kernel@vger.kernel.org
Content-Type: text/plain
Organization: STN ATLAS Elektronik GmbH
Message-Id: <1038572598.1851.5.camel@pcew80.atlas.de>
Mime-Version: 1.0
X-Mailer: Ximian Evolution 1.2.0 
Date: 29 Nov 2002 13:23:18 +0100
Content-Transfer-Encoding: 7bit
Sender: linux-kernel-owner@vger.kernel.org
X-Mailing-List: linux-kernel@vger.kernel.org

Hello,

after an upgrade of the linux kernel from 2.4.19 to 2.4.20. Some
services are not working:
   - syslog-ng died during boot
   - gdm       no login possible,  on text console a login is possible

No need to say with kernel 2.4.19. all is working fine.

I'm using a Debain unstable:
the following software is affected

  gdm            2.2.5.5-2      GNOME Display Manager
  libc6          2.3.1-5        GNU C Library: Shared libraries and
Timezone
  syslog-ng      1.5.23-1       Next generation logging daemon
  libauthen-pam- 0.13-3         This module provides a Perl interface to
the
  libpam-doc     0.76-8         Documentation of PAM
  libpam-modules 0.76-8         Pluggable Authentication Modules for PAM
  libpam-passwdq 0.7-5          replacement for the pam_cracklib module
  libpam-runtime 0.76-8         Runtime support for the PAM library
  libpam-smb     1.1.6-1.1      Pluggable Authentication Module allowing
Sam
  libpam-smbpass 2.999+3.0.alph pluggable authentication module for SMB
pass
  libpam0g       0.76-8         Pluggable Authentication Modules library

The backtrace of the syslog-ng crash is

gdb /sbin/syslog-ng core
GNU gdb 5.2.90_2002-11-20-cvs-debian
Copyright 2002 Free Software Foundation, Inc.
GDB is free software, covered by the GNU General Public License, and you
are
welcome to change it and/or distribute copies of it under certain
conditions.
Type "show copying" to see the conditions.
There is absolutely no warranty for GDB.  Type "show warranty" for
details.
This GDB was configured as "i386-linux"...(no debugging symbols
found)...
Core was generated by `/sbin/syslog-ng'.
Program terminated with signal 11, Segmentation fault.
Reading symbols from /lib/libnsl.so.1...(no debugging symbols
found)...done.
Loaded symbols for /lib/libnsl.so.1
Reading symbols from /lib/libc.so.6...(no debugging symbols
found)...done.
Loaded symbols for /lib/libc.so.6
Reading symbols from /lib/ld-linux.so.2...(no debugging symbols
found)...done.
Loaded symbols for /lib/ld-linux.so.2
#0  0x4009afcc in mallopt () from /lib/libc.so.6
(gdb) backtrace
#0  0x4009afcc in mallopt () from /lib/libc.so.6
#1  0x4009aa20 in mallopt () from /lib/libc.so.6
#2  0x40099ce5 in malloc () from /lib/libc.so.6
#3  0x4010415e in gethostbyaddr () from /lib/libc.so.6
#4  0x08051702 in chroot ()
#5  0x0805183f in chroot ()
#6  0x0804a9a0 in chroot ()
#7  0x0804aab4 in chroot ()
#8  0x0804fdf0 in chroot ()
#9  0x0804a690 in chroot ()
#10 0x0804a823 in chroot ()
#11 0x0805282e in chroot ()
#12 0x08052588 in chroot ()
#13 0x08049f0a in chroot ()
#14 0x0804a5a7 in chroot ()
#15 0x40045a5f in __libc_start_main () from /lib/libc.so.6


-- 
Michael Reincke




