Return-Path: <linux-kernel-owner+willy=40w.ods.org-S262029AbVCHL7W@vger.kernel.org>
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S262029AbVCHL7W (ORCPT <rfc822;willy@w.ods.org>);
	Tue, 8 Mar 2005 06:59:22 -0500
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S262028AbVCHL4j
	(ORCPT <rfc822;linux-kernel-outgoing>);
	Tue, 8 Mar 2005 06:56:39 -0500
Received: from ns.suse.de ([195.135.220.2]:23496 "EHLO Cantor.suse.de")
	by vger.kernel.org with ESMTP id S262078AbVCHLxY (ORCPT
	<rfc822;linux-kernel@vger.kernel.org>);
	Tue, 8 Mar 2005 06:53:24 -0500
Date: Tue, 08 Mar 2005 12:53:23 +0100
Message-ID: <s5h1xaquzf0.wl@alsa2.suse.de>
From: Takashi Iwai <tiwai@suse.de>
To: Pierre Ossman <drzeus-list@drzeus.cx>
Cc: Andrew Morton <akpm@osdl.org>, Mark Canter <marcus@vfxcomputing.com>,
       rlrevell@joe-job.com, nish.aravamudan@gmail.com,
       linux-kernel@vger.kernel.org, alsa-devel@lists.sourceforge.net
Subject: Re: [Alsa-devel] Re: intel 8x0 went silent in 2.6.11
In-Reply-To: <422CFB6E.1020002@drzeus.cx>
References: <4227085C.7060104@drzeus.cx>
	<29495f1d05030309455a990c5b@mail.gmail.com>
	<Pine.LNX.4.62.0503031342270.19015@krusty.vfxcomputing.com>
	<1109875926.2908.26.camel@mindpipe>
	<Pine.LNX.4.62.0503031356150.19015@krusty.vfxcomputing.com>
	<1109876978.2908.31.camel@mindpipe>
	<Pine.LNX.4.62.0503031527550.30702@krusty.vfxcomputing.com>
	<20050303154929.1abd0a62.akpm@osdl.org>
	<4227ADE7.3080100@drzeus.cx>
	<4228D013.8010307@drzeus.cx>
	<s5hmztfwon1.wl@alsa2.suse.de>
	<422CB68A.1050900@drzeus.cx>
	<s5hekerurz8.wl@alsa2.suse.de>
	<422CFB6E.1020002@drzeus.cx>
User-Agent: Wanderlust/2.10.1 (Watching The Wheels) SEMI/1.14.5 (Awara-Onsen) FLIM/1.14.5 (Demachiyanagi) APEL/10.6 MULE XEmacs/21.4 (patch 15) (Security Through Obscurity) (i386-suse-linux)
MIME-Version: 1.0 (generated by SEMI 1.14.5 - "Awara-Onsen")
Content-Type: text/plain; charset=US-ASCII
Sender: linux-kernel-owner@vger.kernel.org
X-Mailing-List: linux-kernel@vger.kernel.org

At Tue, 08 Mar 2005 02:10:06 +0100,
Pierre Ossman wrote:
> 
> Takashi Iwai wrote:
> 
> >>>Look at /etc/asound.state whether it contains the value of "Headphone
> >>>Jack Sense" control true or false.
> >>> 
> >>>
> >>>      
> >>>
> >>It saves the setting once I've been in 2.6.11. From an earlier kernel
> >>there is no such entry.
> >>    
> >>
> >
> >Of course, the earlier version didn't have this.
> >
> >And did you take a look at the latest content?  What stands on it?
> >Maybe you once saved a value wrongly corrected by any reason?
> >
> >  
> >
> I'm not sure what you mean. In the 2.6.10 version the last entry is 
> 'Stereo Mic'. In 2.6.11 there's 'Headphone Jack Sense' and 'Line Jack 
> Sense' following that.
>  From what I can tell every entry seems valid.

My question is its 'value'.  The entry in /etc/asound.state should
have a boolean value.

Let me repeat the explanation of the situation:

The existence of 'Headphone Jack Sense' and 'Line-in Jack Sense'
controls themselves are not the problem.  If they are set off, the
behavior of the driver must be identical with the older version.
No regression. The patch I mentionted turns off them as default unless
the device is known to work.  But the controls still exist, and you
can change them afterward manually.

So, the solution is once to turn off these controls via a mixer and
save the state via alsactl (usually the system does at shutdown), so
that the correct states are restored at the next reboot.  That's why I
asked you - to check the saved status of these controls.

If the correct values are saved there and still the problem exists,
someone else must have changed the mixer status.  For example, KDE
(kmix) seems to set up the mixer status by itself, and does not always
correctly.  That was my suspect.  I don't know GNOME does something
like that, too.


Takashi
