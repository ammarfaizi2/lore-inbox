Return-Path: <linux-kernel-owner+willy=40w.ods.org-S261841AbVHDFi2@vger.kernel.org>
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S261841AbVHDFi2 (ORCPT <rfc822;willy@w.ods.org>);
	Thu, 4 Aug 2005 01:38:28 -0400
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S261836AbVHDFfq
	(ORCPT <rfc822;linux-kernel-outgoing>);
	Thu, 4 Aug 2005 01:35:46 -0400
Received: from NK210-202-245-3.vdsl.static.apol.com.tw ([210.202.245.3]:19386
	"EHLO uli.com.tw") by vger.kernel.org with ESMTP id S261828AbVHDFej
	(ORCPT <rfc822;linux-kernel@vger.kernel.org>);
	Thu, 4 Aug 2005 01:34:39 -0400
Subject: Re: Re: [patch] net/tulip: LAN driver for ULI M5261/M5263
To: Alexey Dobriyan <adobriyan@gmail.com>
Cc: Jeff Garzik <jgarzik@pobox.com>, Alan Cox <alan@redhat.com>,
       Clear.Zhang@uli.com.tw, netdev@vger.kernel.org,
       linux-kernel@vger.kernel.org, Emily.Jiang@uli.com.tw
X-Mailer: Lotus Notes R5.0 (Intl) 30 March 1999
Message-ID: <OFAAF80313.ED845947-ON48257050.0031194D@uli.com.tw>
From: Peer.Chen@uli.com.tw
Date: Thu, 4 Aug 2005 13:34:05 +0800
MIME-Version: 1.0
X-MIMETrack: Serialize by Router on ulicnm01/ULI(Release 5.0.11  |July 24, 2002) at 2005-08-04
 13:34:06,
	Itemize by SMTP Server on ulim01/ULI(Release 5.0.11  |July 24, 2002) at
 2005/08/04 01:34:07 PM,
	Serialize by Router on ulim01/ULI(Release 5.0.11  |July 24, 2002) at 2005/08/04
 01:34:09 PM
Content-type: multipart/mixed; 
	Boundary="0__=C7BBFAC3DFA29FDD8f9e8a93df938690918cC7BBFAC3DFA29FDD"
Content-Disposition: inline
Sender: linux-kernel-owner@vger.kernel.org
X-Mailing-List: linux-kernel@vger.kernel.org

--0__=C7BBFAC3DFA29FDD8f9e8a93df938690918cC7BBFAC3DFA29FDD
Content-type: text/plain; charset=us-ascii


Resend the mail,Alexey,do you think anywhere else we need modify about the
source?
=============================================
Jeff:
I have removed the uli526x support from tulip core driver,check the patch
file for detail,thanks.
(See attached file: patchtulip)

Alexey:
Here the new patch,please check it, thanks.
(See attached file: patchuli526x)
I modify the source according to your suggestion except:
=====================================================
uli526x_init_one()
{
             struct net_device *dev;

             dev = alloc_etherdev(sizeof(*db));
             if (dev == NULL)
                         return -ENOMEM;

             [dev is dereferenced a couple of times]

             pci_set_drvdata(pdev, dev);
                         ...
}

> +                      pci_free_consistent(db->pdev, sizeof(struct
tx_desc) *
> +                                                          DESC_ALL_CNT +
0x20, db->desc_pool_ptr,
> +
db->desc_pool_dma_ptr);
> +                      pci_free_consistent(db->pdev, TX_BUF_ALLOC *
TX_DESC_CNT + 4,
> +
db->buf_pool_ptr, db->buf_pool_dma_ptr);
> +                      unregister_netdev(dev);
> +                      pci_release_regions(pdev);
> +                      free_netdev(dev);             /* free board
information */
> +                      pci_set_drvdata(pdev, NULL);
> +          }
=======================================================
I can not really get your meaning, could you give the explanation in
detail?

Best Regards
Peer

--0__=C7BBFAC3DFA29FDD8f9e8a93df938690918cC7BBFAC3DFA29FDD
Content-type: application/octet-stream; 
	name="patchtulip"
Content-Disposition: attachment; filename="patchtulip"
Content-Transfer-Encoding: base64

ZGlmZiAtdXJOIGxpbnV4LXZhbmlsbGEvZHJpdmVycy9uZXQvdHVsaXAvbWVkaWEuYyBsaW51eC0y
LjYuMTIvZHJpdmVycy9uZXQvdHVsaXAvbWVkaWEuYwotLS0gbGludXgtdmFuaWxsYS9kcml2ZXJz
L25ldC90dWxpcC9tZWRpYS5jCTIwMDUtMDYtMTggMDM6NDg6MjkuMDAwMDAwMDAwICswODAwCisr
KyBsaW51eC0yLjYuMTIvZHJpdmVycy9uZXQvdHVsaXAvbWVkaWEuYwkyMDA1LTA4LTAxIDE2OjI1
OjE5LjAwMDAwMDAwMCArMDgwMApAQCAtODEsMjUgKzgxLDYgQEAKIAkJcmV0dXJuIHJldHZhbCAm
IDB4ZmZmZjsKIAl9CiAKLQlpZih0cC0+Y2hpcF9pZCA9PSBVTEk1MjZYICYmIHRwLT5yZXZpc2lv
biA+PSAweDQwKSB7Ci0JCWludCB2YWx1ZTsKLQkJaW50IGkgPSAxMDAwOwotCQkKLQkJdmFsdWUg
PSBpb3JlYWQzMihpb2FkZHIgKyBDU1I5KTsKLQkJaW93cml0ZTMyKHZhbHVlICYgMHhGRkVGRkZG
RiwgaW9hZGRyICsgQ1NSOSk7Ci0JCQotCQl2YWx1ZSA9IChwaHlfaWQgPDwgMjEpIHwgKGxvY2F0
aW9uIDw8IDE2KSB8IDB4MDgwMDAwMDA7Ci0JCWlvd3JpdGUzMih2YWx1ZSwgaW9hZGRyICsgQ1NS
MTApOwotCQkKLQkJd2hpbGUoLS1pID4gMCkgewotCQkJbWRpb19kZWxheSgpOwotCQkJaWYoaW9y
ZWFkMzIoaW9hZGRyICsgQ1NSMTApICYgMHgxMDAwMDAwMCkKLQkJCQlicmVhazsKLQkJfQotCQly
ZXR2YWwgPSBpb3JlYWQzMihpb2FkZHIgKyBDU1IxMCk7Ci0JCXNwaW5fdW5sb2NrX2lycXJlc3Rv
cmUoJnRwLT5taWlfbG9jaywgZmxhZ3MpOwotCQlyZXR1cm4gcmV0dmFsICYgMHhGRkZGOwotCX0K
IAkvKiBFc3RhYmxpc2ggc3luYyBieSBzZW5kaW5nIGF0IGxlYXN0IDMyIGxvZ2ljIG9uZXMuICov
CiAJZm9yIChpID0gMzI7IGkgPj0gMDsgaS0tKSB7CiAJCWlvd3JpdGUzMihNRElPX0VOQiB8IE1E
SU9fREFUQV9XUklURTEsIG1kaW9fYWRkcik7CkBAIC0xNTksMjMgKzE0MCw2IEBACiAJCXNwaW5f
dW5sb2NrX2lycXJlc3RvcmUoJnRwLT5taWlfbG9jaywgZmxhZ3MpOwogCQlyZXR1cm47CiAJfQot
CWlmICh0cC0+Y2hpcF9pZCA9PSBVTEk1MjZYICYmIHRwLT5yZXZpc2lvbiA+PSAweDQwKSB7Ci0J
CWludCB2YWx1ZTsKLQkJaW50IGkgPSAxMDAwOwotCQkKLQkJdmFsdWUgPSBpb3JlYWQzMihpb2Fk
ZHIgKyBDU1I5KTsKLQkJaW93cml0ZTMyKHZhbHVlICYgMHhGRkVGRkZGRiwgaW9hZGRyICsgQ1NS
OSk7Ci0JCQotCQl2YWx1ZSA9IChwaHlfaWQgPDwgMjEpIHwgKGxvY2F0aW9uIDw8IDE2KSB8IDB4
MDQwMDAwMDAgfCAodmFsICYgMHhGRkZGKTsKLQkJaW93cml0ZTMyKHZhbHVlLCBpb2FkZHIgKyBD
U1IxMCk7Ci0JCQotCQl3aGlsZSgtLWkgPiAwKSB7Ci0JCQlpZiAoaW9yZWFkMzIoaW9hZGRyICsg
Q1NSMTApICYgMHgxMDAwMDAwMCkKLQkJCQlicmVhazsKLQkJfQotCQlzcGluX3VubG9ja19pcnFy
ZXN0b3JlKCZ0cC0+bWlpX2xvY2ssIGZsYWdzKTsKLQkJcmV0dXJuOwotCX0KIAkJCiAJLyogRXN0
YWJsaXNoIHN5bmMgYnkgc2VuZGluZyAzMiBsb2dpYyBvbmVzLiAqLwogCWZvciAoaSA9IDMyOyBp
ID49IDA7IGktLSkgewpkaWZmIC11ck4gbGludXgtdmFuaWxsYS9kcml2ZXJzL25ldC90dWxpcC90
aW1lci5jIGxpbnV4LTIuNi4xMi9kcml2ZXJzL25ldC90dWxpcC90aW1lci5jCi0tLSBsaW51eC12
YW5pbGxhL2RyaXZlcnMvbmV0L3R1bGlwL3RpbWVyLmMJMjAwNS0wNi0xOCAwMzo0ODoyOS4wMDAw
MDAwMDAgKzA4MDAKKysrIGxpbnV4LTIuNi4xMi9kcml2ZXJzL25ldC90dWxpcC90aW1lci5jCTIw
MDUtMDgtMDEgMTY6MjU6MjAuMDAwMDAwMDAwICswODAwCkBAIC0zOSw3ICszOSw2IEBACiAJY2Fz
ZSBNWDk4NzEzOgogCWNhc2UgQ09NUEVYOTg4MToKIAljYXNlIERNOTEwWDoKLQljYXNlIFVMSTUy
Nlg6CiAJZGVmYXVsdDogewogCQlzdHJ1Y3QgbWVkaWFsZWFmICptbGVhZjsKIAkJdW5zaWduZWQg
Y2hhciAqcDsKZGlmZiAtdXJOIGxpbnV4LXZhbmlsbGEvZHJpdmVycy9uZXQvdHVsaXAvdHVsaXBf
Y29yZS5jIGxpbnV4LTIuNi4xMi9kcml2ZXJzL25ldC90dWxpcC90dWxpcF9jb3JlLmMKLS0tIGxp
bnV4LXZhbmlsbGEvZHJpdmVycy9uZXQvdHVsaXAvdHVsaXBfY29yZS5jCTIwMDUtMDYtMTggMDM6
NDg6MjkuMDAwMDAwMDAwICswODAwCisrKyBsaW51eC0yLjYuMTIvZHJpdmVycy9uZXQvdHVsaXAv
dHVsaXBfY29yZS5jCTIwMDUtMDgtMDEgMTY6MjU6MjAuMDAwMDAwMDAwICswODAwCkBAIC0xOTks
OSArMTk5LDYgQEAKICAgeyAiQ29uZXhhbnQgTEFOZmluaXR5IiwgMjU2LCAweDAwMDFlYmVmLAog
CUhBU19NSUkgfCBIQVNfQUNQSSwgdHVsaXBfdGltZXIgfSwKIAotICAgLyogVUxpNTI2WCAqLwot
ICAgeyAiVUxpIE01MjYxL001MjYzIiwgMTI4LCAweDAwMDFlYmVmLAotICAgICAgICBIQVNfTUlJ
IHwgSEFTX01FRElBX1RBQkxFIHwgQ1NSMTJfSU5fU1JPTSB8IEhBU19BQ1BJLCB0dWxpcF90aW1l
ciB9LAogfTsKIAogCkBAIC0yMzksOCArMjM2LDYgQEAKIAl7IDB4MTczNywgMHhBQjA5LCBQQ0lf
QU5ZX0lELCBQQ0lfQU5ZX0lELCAwLCAwLCBDT01FVCB9LAogCXsgMHgxNzM3LCAweEFCMDgsIFBD
SV9BTllfSUQsIFBDSV9BTllfSUQsIDAsIDAsIENPTUVUIH0sCiAJeyAweDE3QjMsIDB4QUIwOCwg
UENJX0FOWV9JRCwgUENJX0FOWV9JRCwgMCwgMCwgQ09NRVQgfSwKLSAJeyAweDEwYjksIDB4NTI2
MSwgUENJX0FOWV9JRCwgUENJX0FOWV9JRCwgMCwgMCwgVUxJNTI2WCB9LAkvKiBBTGkgMTU2MyBp
bnRlZ3JhdGVkIGV0aGVybmV0ICovCi0gCXsgMHgxMGI5LCAweDUyNjMsIFBDSV9BTllfSUQsIFBD
SV9BTllfSUQsIDAsIDAsIFVMSTUyNlggfSwJLyogQUxpIDE1NjMgaW50ZWdyYXRlZCBldGhlcm5l
dCAqLwogCXsgMHgxMGI3LCAweDkzMDAsIFBDSV9BTllfSUQsIFBDSV9BTllfSUQsIDAsIDAsIENP
TUVUIH0sIC8qIDNDb20gM0NTT0hPMTAwQi1UWCAqLwogCXsgfSAvKiB0ZXJtaW5hdGUgbGlzdCAq
LwogfTsKQEAgLTUyMSw3ICs1MTYsNyBAQAogCQkJCSAgIGRldi0+bmFtZSk7CiAJfSBlbHNlIGlm
ICh0cC0+Y2hpcF9pZCA9PSBEQzIxMTQwIHx8IHRwLT5jaGlwX2lkID09IERDMjExNDIKIAkJCSAg
IHx8IHRwLT5jaGlwX2lkID09IE1YOTg3MTMgfHwgdHAtPmNoaXBfaWQgPT0gQ09NUEVYOTg4MQot
CQkJICAgfHwgdHAtPmNoaXBfaWQgPT0gRE05MTBYIHx8IHRwLT5jaGlwX2lkID09IFVMSTUyNlgp
IHsKKwkJCSAgIHx8IHRwLT5jaGlwX2lkID09IERNOTEwWCkgewogCQlwcmludGsoS0VSTl9XQVJO
SU5HICIlczogMjExNDAgdHJhbnNtaXQgdGltZWQgb3V0LCBzdGF0dXMgJTguOHgsICIKIAkJCSAg
ICJTSUEgJTguOHggJTguOHggJTguOHggJTguOHgsIHJlc2V0dGluZy4uLlxuIiwKIAkJCSAgIGRl
di0+bmFtZSwgaW9yZWFkMzIoaW9hZGRyICsgQ1NSNSksIGlvcmVhZDMyKGlvYWRkciArIENTUjEy
KSwKQEAgLTExMDIsMTggKzEwOTcsMTYgQEAKIAkJCWVudHJ5ID0gdHAtPmN1cl90eCsrICUgVFhf
UklOR19TSVpFOwogCiAJCQlpZiAoZW50cnkgIT0gMCkgewotCQkJCS8qIEF2b2lkIGEgY2hpcCBl
cnJhdGEgYnkgcHJlZml4aW5nIGEgZHVtbXkgZW50cnkuIERvbid0IGRvCi0JCQkJICAgdGhpcyBv
biB0aGUgVUxJNTI2WCBhcyBpdCB0cmlnZ2VycyBhIGRpZmZlcmVudCBwcm9ibGVtICovCi0JCQkJ
aWYgKCEodHAtPmNoaXBfaWQgPT0gVUxJNTI2WCAmJiAodHAtPnJldmlzaW9uID09IDB4NDAgfHwg
dHAtPnJldmlzaW9uID09IDB4NTApKSkgewotCQkJCQl0cC0+dHhfYnVmZmVyc1tlbnRyeV0uc2ti
ID0gTlVMTDsKLQkJCQkJdHAtPnR4X2J1ZmZlcnNbZW50cnldLm1hcHBpbmcgPSAwOwotCQkJCQl0
cC0+dHhfcmluZ1tlbnRyeV0ubGVuZ3RoID0KLQkJCQkJCShlbnRyeSA9PSBUWF9SSU5HX1NJWkUt
MSkgPyBjcHVfdG9fbGUzMihERVNDX1JJTkdfV1JBUCkgOiAwOwotCQkJCQl0cC0+dHhfcmluZ1tl
bnRyeV0uYnVmZmVyMSA9IDA7Ci0JCQkJCS8qIE11c3Qgc2V0IERlc2NPd25lZCBsYXRlciB0byBh
dm9pZCByYWNlIHdpdGggY2hpcCAqLwotCQkJCQlkdW1teSA9IGVudHJ5OwotCQkJCQllbnRyeSA9
IHRwLT5jdXJfdHgrKyAlIFRYX1JJTkdfU0laRTsKLQkJCQl9CisJCQkJLyogQXZvaWQgYSBjaGlw
IGVycmF0YSBieSBwcmVmaXhpbmcgYSBkdW1teSBlbnRyeS4gKi8KKwkJCQl0cC0+dHhfYnVmZmVy
c1tlbnRyeV0uc2tiID0gTlVMTDsKKwkJCQl0cC0+dHhfYnVmZmVyc1tlbnRyeV0ubWFwcGluZyA9
IDA7CisJCQkJdHAtPnR4X3JpbmdbZW50cnldLmxlbmd0aCA9CisJCQkJCShlbnRyeSA9PSBUWF9S
SU5HX1NJWkUtMSkgPyBjcHVfdG9fbGUzMihERVNDX1JJTkdfV1JBUCkgOiAwOworCQkJCXRwLT50
eF9yaW5nW2VudHJ5XS5idWZmZXIxID0gMDsKKwkJCQkvKiBNdXN0IHNldCBEZXNjT3duZWQgbGF0
ZXIgdG8gYXZvaWQgcmFjZSB3aXRoIGNoaXAgKi8KKwkJCQlkdW1teSA9IGVudHJ5OworCQkJCWVu
dHJ5ID0gdHAtPmN1cl90eCsrICUgVFhfUklOR19TSVpFOworCiAJCQl9CiAKIAkJCXRwLT50eF9i
dWZmZXJzW2VudHJ5XS5za2IgPSBOVUxMOwpAQCAtMTIzNCwxMCArMTIyNyw2IEBACiB7CiAJaWYg
KHBkZXYtPnZlbmRvciA9PSAweDEyODIgJiYgcGRldi0+ZGV2aWNlID09IDB4OTEwMikKIAkJcmV0
dXJuIDE7Ci0JaWYgKHBkZXYtPnZlbmRvciA9PSAweDEwYjkgJiYgcGRldi0+ZGV2aWNlID09IDB4
NTI2MSkKLQkJcmV0dXJuIDE7Ci0JaWYgKHBkZXYtPnZlbmRvciA9PSAweDEwYjkgJiYgcGRldi0+
ZGV2aWNlID09IDB4NTI2MykKLQkJcmV0dXJuIDE7CiAJcmV0dXJuIDA7CiB9CiAKQEAgLTE2Nzks
NyArMTY2OCw2IEBACiAJc3dpdGNoIChjaGlwX2lkeCkgewogCWNhc2UgREMyMTE0MDoKIAljYXNl
IERNOTEwWDoKLQljYXNlIFVMSTUyNlg6CiAJZGVmYXVsdDoKIAkJaWYgKHRwLT5tdGFibGUpCiAJ
CQlpb3dyaXRlMzIodHAtPm10YWJsZS0+Y3NyMTJkaXIgfCAweDEwMCwgaW9hZGRyICsgQ1NSMTIp
OwpkaWZmIC11ck4gbGludXgtdmFuaWxsYS9kcml2ZXJzL25ldC90dWxpcC90dWxpcC5oIGxpbnV4
LTIuNi4xMi9kcml2ZXJzL25ldC90dWxpcC90dWxpcC5oCi0tLSBsaW51eC12YW5pbGxhL2RyaXZl
cnMvbmV0L3R1bGlwL3R1bGlwLmgJMjAwNS0wNi0xOCAwMzo0ODoyOS4wMDAwMDAwMDAgKzA4MDAK
KysrIGxpbnV4LTIuNi4xMi9kcml2ZXJzL25ldC90dWxpcC90dWxpcC5oCTIwMDUtMDgtMDEgMTY6
MjU6MjEuMDAwMDAwMDAwICswODAwCkBAIC04OCw3ICs4OCw2IEBACiAJSTIxMTQ1LAogCURNOTEw
WCwKIAlDT05FWEFOVCwKLQlVTEk1MjZYCiB9OwogCiAKQEAgLTQ4MiwxMSArNDgxLDggQEAKIAog
c3RhdGljIGlubGluZSB2b2lkIHR1bGlwX3Jlc3RhcnRfcnh0eChzdHJ1Y3QgdHVsaXBfcHJpdmF0
ZSAqdHApCiB7Ci0JaWYoISh0cC0+Y2hpcF9pZCA9PSBVTEk1MjZYICYmIAotCQkodHAtPnJldmlz
aW9uID09IDB4NDAgfHwgdHAtPnJldmlzaW9uID09IDB4NTApKSkgewotCQl0dWxpcF9zdG9wX3J4
dHgodHApOwotCQl1ZGVsYXkoNSk7Ci0JfQorCXR1bGlwX3N0b3Bfcnh0eCh0cCk7CisJdWRlbGF5
KDUpOwogCXR1bGlwX3N0YXJ0X3J4dHgodHApOwogfQogCg==

--0__=C7BBFAC3DFA29FDD8f9e8a93df938690918cC7BBFAC3DFA29FDD
Content-type: application/octet-stream; 
	name="patchuli526x"
Content-Disposition: attachment; filename="patchuli526x"
Content-Transfer-Encoding: base64

ZGlmZiAtdXJOIGxpbnV4LXZhbmlsbGEvZHJpdmVycy9uZXQvdHVsaXAvdWxpNTI2eC5jIGxpbnV4
LTIuNi4xMi9kcml2ZXJzL25ldC90dWxpcC91bGk1MjZ4LmMKLS0tIGxpbnV4LXZhbmlsbGEvZHJp
dmVycy9uZXQvdHVsaXAvdWxpNTI2eC5jCTE5NzAtMDEtMDEgMDg6MDA6MDAuMDAwMDAwMDAwICsw
ODAwCisrKyBsaW51eC0yLjYuMTIvZHJpdmVycy9uZXQvdHVsaXAvdWxpNTI2eC5jCTIwMDUtMDgt
MDEgMTY6NDE6MTQuMDAwMDAwMDAwICswODAwCkBAIC0wLDAgKzEsMTc3MyBAQAorLyoKKyAgICBU
aGlzIHByb2dyYW0gaXMgZnJlZSBzb2Z0d2FyZTsgeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5k
L29yCisgICAgbW9kaWZ5IGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVi
bGljIExpY2Vuc2UKKyAgICBhcyBwdWJsaXNoZWQgYnkgdGhlIEZyZWUgU29mdHdhcmUgRm91bmRh
dGlvbjsgZWl0aGVyIHZlcnNpb24gMgorICAgIG9mIHRoZSBMaWNlbnNlLCBvciAoYXQgeW91ciBv
cHRpb24pIGFueSBsYXRlciB2ZXJzaW9uLgorCisgICAgVGhpcyBwcm9ncmFtIGlzIGRpc3RyaWJ1
dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsCisgICAgYnV0IFdJVEhPVVQg
QU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2YKKyAgICBN
RVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUg
dGhlCisgICAgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy4KKwor
ICAgIAorKi8KKworI2RlZmluZSBEUlZfTkFNRQkidWxpNTI2eCIKKyNkZWZpbmUgRFJWX1ZFUlNJ
T04JIjAuOS4zIgorI2RlZmluZSBEUlZfUkVMREFURQkiMjAwNS03LTI5IgorCisjaW5jbHVkZSA8
bGludXgvbW9kdWxlLmg+CisKKyNpbmNsdWRlIDxsaW51eC9rZXJuZWwuaD4KKyNpbmNsdWRlIDxs
aW51eC9zdHJpbmcuaD4KKyNpbmNsdWRlIDxsaW51eC90aW1lci5oPgorI2luY2x1ZGUgPGxpbnV4
L3B0cmFjZS5oPgorI2luY2x1ZGUgPGxpbnV4L2Vycm5vLmg+CisjaW5jbHVkZSA8bGludXgvaW9w
b3J0Lmg+CisjaW5jbHVkZSA8bGludXgvc2xhYi5oPgorI2luY2x1ZGUgPGxpbnV4L2ludGVycnVw
dC5oPgorI2luY2x1ZGUgPGxpbnV4L3BjaS5oPgorI2luY2x1ZGUgPGxpbnV4L2luaXQuaD4KKyNp
bmNsdWRlIDxsaW51eC9uZXRkZXZpY2UuaD4KKyNpbmNsdWRlIDxsaW51eC9ldGhlcmRldmljZS5o
PgorI2luY2x1ZGUgPGxpbnV4L2V0aHRvb2wuaD4KKyNpbmNsdWRlIDxsaW51eC9za2J1ZmYuaD4K
KyNpbmNsdWRlIDxsaW51eC9kZWxheS5oPgorI2luY2x1ZGUgPGxpbnV4L3NwaW5sb2NrLmg+CisK
KyNpbmNsdWRlIDxhc20vcHJvY2Vzc29yLmg+CisjaW5jbHVkZSA8YXNtL2JpdG9wcy5oPgorI2lu
Y2x1ZGUgPGFzbS9pby5oPgorI2luY2x1ZGUgPGFzbS9kbWEuaD4KKyNpbmNsdWRlIDxhc20vdWFj
Y2Vzcy5oPgorCisKKy8qIEJvYXJkL1N5c3RlbS9EZWJ1ZyBpbmZvcm1hdGlvbi9kZWZpbml0aW9u
IC0tLS0tLS0tLS0tLS0tLS0gKi8KKyNkZWZpbmUgUENJX1VMSTUyNjFfSUQgIDB4NTI2MTEwQjkJ
LyogVUxpIE01MjYxIElEKi8KKyNkZWZpbmUgUENJX1VMSTUyNjNfSUQgIDB4NTI2MzEwQjkJLyog
VUxpIE01MjYzIElEKi8KKworI2RlZmluZSBVTEk1MjZYX0lPX1NJWkUgMHgxMDAKKyNkZWZpbmUg
VFhfREVTQ19DTlQgICAgIDB4MjAgICAgICAgICAgICAvKiBBbGxvY2F0ZWQgVHggZGVzY3JpcHRv
cnMgKi8KKyNkZWZpbmUgUlhfREVTQ19DTlQgICAgIDB4MzAgICAgICAgICAgICAvKiBBbGxvY2F0
ZWQgUnggZGVzY3JpcHRvcnMgKi8KKyNkZWZpbmUgVFhfRlJFRV9ERVNDX0NOVCAoVFhfREVTQ19D
TlQgLSAyKQkvKiBNYXggVFggcGFja2V0IGNvdW50ICovCisjZGVmaW5lIFRYX1dBS0VfREVTQ19D
TlQgKFRYX0RFU0NfQ05UIC0gMykJLyogVFggd2FrZXVwIGNvdW50ICovCisjZGVmaW5lIERFU0Nf
QUxMX0NOVCAgICAoVFhfREVTQ19DTlQgKyBSWF9ERVNDX0NOVCkKKyNkZWZpbmUgVFhfQlVGX0FM
TE9DICAgIDB4NjAwCisjZGVmaW5lIFJYX0FMTE9DX1NJWkUgICAweDYyMAorI2RlZmluZSBVTEk1
MjZYX1JFU0VUICAgIDEKKyNkZWZpbmUgQ1IwX0RFRkFVTFQgICAgIDAKKyNkZWZpbmUgQ1I2X0RF
RkFVTFQgICAgIDB4MDAwODAwMDAgICAgICAvKiBIRCAqLworI2RlZmluZSBDUjZfREVGQVVMVF9B
ICAgICAweDIyMjQwMDAwCisjZGVmaW5lIENSN19ERUZBVUxUICAgICAweDE4MGMxCisjZGVmaW5l
IENSMTVfREVGQVVMVCAgICAweDA2ICAgICAgICAgICAgLyogVHhKYWJiZXIgUnhXYXRjaGRvZyAq
LworI2RlZmluZSBUREVTMF9FUlJfTUFTSyAgMHg0MzAyICAgICAgICAgIC8qIFRYSlQsIExDLCBF
QywgRlVFICovCisjZGVmaW5lIE1BWF9QQUNLRVRfU0laRSAxNTE0CisjZGVmaW5lIFVMSTUyNjFf
TUFYX01VTFRJQ0FTVCAxNAorI2RlZmluZSBSWF9DT1BZX1NJWkUJMTAwCisjZGVmaW5lIE1BWF9D
SEVDS19QQUNLRVQgMHg4MDAwCisKKyNkZWZpbmUgVUxJNTI2WF8xME1IRiAgICAgIDAKKyNkZWZp
bmUgVUxJNTI2WF8xMDBNSEYgICAgIDEKKyNkZWZpbmUgVUxJNTI2WF8xME1GRCAgICAgIDQKKyNk
ZWZpbmUgVUxJNTI2WF8xMDBNRkQgICAgIDUKKyNkZWZpbmUgVUxJNTI2WF9BVVRPICAgICAgIDgK
KworI2RlZmluZSBVTEk1MjZYX1RYVEhfNzIJMHg0MDAwMDAJLyogVFggVEggNzIgYnl0ZSAqLwor
I2RlZmluZSBVTEk1MjZYX1RYVEhfOTYJMHg0MDQwMDAJLyogVFggVEggOTYgYnl0ZSAqLworI2Rl
ZmluZSBVTEk1MjZYX1RYVEhfMTI4CTB4MDAwMAkJLyogVFggVEggMTI4IGJ5dGUgKi8KKyNkZWZp
bmUgVUxJNTI2WF9UWFRIXzI1NgkweDQwMDAJCS8qIFRYIFRIIDI1NiBieXRlICovCisjZGVmaW5l
IFVMSTUyNlhfVFhUSF81MTIJMHg4MDAwCQkvKiBUWCBUSCA1MTIgYnl0ZSAqLworI2RlZmluZSBV
TEk1MjZYX1RYVEhfMUsJMHhDMDAwCQkvKiBUWCBUSCAxSyAgYnl0ZSAqLworCisjZGVmaW5lIFVM
STUyNlhfVElNRVJfV1VUICAoamlmZmllcyArIEhaICogMSkvKiB0aW1lciB3YWtldXAgdGltZSA6
IDEgc2Vjb25kICovCisjZGVmaW5lIFVMSTUyNlhfVFhfVElNRU9VVCAoKDE2KkhaKS8yKQkvKiB0
eCBwYWNrZXQgdGltZS1vdXQgdGltZSA4IHMiICovCisjZGVmaW5lIFVMSTUyNlhfVFhfS0lDSyAJ
KDQqSFovMikJLyogdHggcGFja2V0IEtpY2stb3V0IHRpbWUgMiBzIiAqLworCisjZGVmaW5lIFVM
STUyNlhfREJVRyhkYnVnX25vdywgbXNnLCB2YWx1ZSkgaWYgKHVsaTUyNnhfZGVidWcgfHwgKGRi
dWdfbm93KSkgcHJpbnRrKEtFUk5fRVJSIERSVl9OQU1FICI6ICVzICVseFxuIiwgKG1zZyksIChs
b25nKSAodmFsdWUpKQorCisjZGVmaW5lIFNIT1dfTUVESUFfVFlQRShtb2RlKSBwcmludGsoS0VS
Tl9FUlIgRFJWX05BTUUgIjogQ2hhbmdlIFNwZWVkIHRvICVzTWh6ICVzIGR1cGxleFxuIixtb2Rl
ICYgMSA/IjEwMCI6IjEwIiwgbW9kZSAmIDQgPyAiZnVsbCI6ImhhbGYiKTsKKworCisvKiBDUjkg
ZGVmaW5pdGlvbjogU1JPTS9NSUkgKi8KKyNkZWZpbmUgQ1I5X1NST01fUkVBRCAgIDB4NDgwMAor
I2RlZmluZSBDUjlfU1JDUyAgICAgICAgMHgxCisjZGVmaW5lIENSOV9TUkNMSyAgICAgICAweDIK
KyNkZWZpbmUgQ1I5X0NSRE9VVCAgICAgIDB4OAorI2RlZmluZSBTUk9NX0RBVEFfMCAgICAgMHgw
CisjZGVmaW5lIFNST01fREFUQV8xICAgICAweDQKKyNkZWZpbmUgUEhZX0RBVEFfMSAgICAgIDB4
MjAwMDAKKyNkZWZpbmUgUEhZX0RBVEFfMCAgICAgIDB4MDAwMDAKKyNkZWZpbmUgTURDTEtIICAg
ICAgICAgIDB4MTAwMDAKKworI2RlZmluZSBQSFlfUE9XRVJfRE9XTgkweDgwMAorCisjZGVmaW5l
IFNST01fVjQxX0NPREUgICAweDE0CisKKyNkZWZpbmUgU1JPTV9DTEtfV1JJVEUoZGF0YSwgaW9h
ZGRyKQkJCQkJXAorCQlvdXRsKGRhdGF8Q1I5X1NST01fUkVBRHxDUjlfU1JDUyxpb2FkZHIpOwkJ
XAorCQl1ZGVsYXkoNSk7CQkJCQkJXAorCQlvdXRsKGRhdGF8Q1I5X1NST01fUkVBRHxDUjlfU1JD
U3xDUjlfU1JDTEssaW9hZGRyKTsJXAorCQl1ZGVsYXkoNSk7CQkJCQkJXAorCQlvdXRsKGRhdGF8
Q1I5X1NST01fUkVBRHxDUjlfU1JDUyxpb2FkZHIpOwkJXAorCQl1ZGVsYXkoNSk7CisKKy8qIFN0
cnVjdHVyZS9lbnVtIGRlY2xhcmF0aW9uIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0g
Ki8KK3N0cnVjdCB0eF9kZXNjIHsKKyAgICAgICAgX19sZTMyIHRkZXMwLCB0ZGVzMSwgdGRlczIs
IHRkZXMzOyAvKiBEYXRhIGZvciB0aGUgY2FyZCAqLworICAgICAgICBjaGFyICp0eF9idWZfcHRy
OyAgICAgICAgICAgICAgIC8qIERhdGEgZm9yIHVzICovCisgICAgICAgIHN0cnVjdCB0eF9kZXNj
ICpuZXh0X3R4X2Rlc2M7Cit9IF9fYXR0cmlidXRlX18oKCBhbGlnbmVkKDMyKSApKTsKKworc3Ry
dWN0IHJ4X2Rlc2MgeworCV9fbGUzMiByZGVzMCwgcmRlczEsIHJkZXMyLCByZGVzMzsgLyogRGF0
YSBmb3IgdGhlIGNhcmQgKi8KKwlzdHJ1Y3Qgc2tfYnVmZiAqcnhfc2tiX3B0cjsJLyogRGF0YSBm
b3IgdXMgKi8KKwlzdHJ1Y3QgcnhfZGVzYyAqbmV4dF9yeF9kZXNjOworfSBfX2F0dHJpYnV0ZV9f
KCggYWxpZ25lZCgzMikgKSk7CisKK3N0cnVjdCB1bGk1MjZ4X2JvYXJkX2luZm8geworCXUzMiBj
aGlwX2lkOwkJCS8qIENoaXAgdmVuZG9yL0RldmljZSBJRCAqLworCXN0cnVjdCBuZXRfZGV2aWNl
ICpuZXh0X2RldjsJLyogbmV4dCBkZXZpY2UgKi8KKwlzdHJ1Y3QgcGNpX2RldiAqcGRldjsJCS8q
IFBDSSBkZXZpY2UgKi8KKwlzcGlubG9ja190IGxvY2s7CisKKwlsb25nIGlvYWRkcjsJCQkvKiBJ
L08gYmFzZSBhZGRyZXNzICovCisJdTMyIGNyMF9kYXRhOworCXUzMiBjcjVfZGF0YTsKKwl1MzIg
Y3I2X2RhdGE7CisJdTMyIGNyN19kYXRhOworCXUzMiBjcjE1X2RhdGE7CisKKwkvKiBwb2ludGVy
IGZvciBtZW1vcnkgcGh5c2ljYWwgYWRkcmVzcyAqLworCWRtYV9hZGRyX3QgYnVmX3Bvb2xfZG1h
X3B0cjsJLyogVHggYnVmZmVyIHBvb2wgbWVtb3J5ICovCisJZG1hX2FkZHJfdCBidWZfcG9vbF9k
bWFfc3RhcnQ7CS8qIFR4IGJ1ZmZlciBwb29sIGFsaWduIGR3b3JkICovCisJZG1hX2FkZHJfdCBk
ZXNjX3Bvb2xfZG1hX3B0cjsJLyogZGVzY3JpcHRvciBwb29sIG1lbW9yeSAqLworCWRtYV9hZGRy
X3QgZmlyc3RfdHhfZGVzY19kbWE7CisJZG1hX2FkZHJfdCBmaXJzdF9yeF9kZXNjX2RtYTsKKwor
CS8qIGRlc2NyaXB0b3IgcG9pbnRlciAqLworCXVuc2lnbmVkIGNoYXIgKmJ1Zl9wb29sX3B0cjsJ
LyogVHggYnVmZmVyIHBvb2wgbWVtb3J5ICovCisJdW5zaWduZWQgY2hhciAqYnVmX3Bvb2xfc3Rh
cnQ7CS8qIFR4IGJ1ZmZlciBwb29sIGFsaWduIGR3b3JkICovCisJdW5zaWduZWQgY2hhciAqZGVz
Y19wb29sX3B0cjsJLyogZGVzY3JpcHRvciBwb29sIG1lbW9yeSAqLworCXN0cnVjdCB0eF9kZXNj
ICpmaXJzdF90eF9kZXNjOworCXN0cnVjdCB0eF9kZXNjICp0eF9pbnNlcnRfcHRyOworCXN0cnVj
dCB0eF9kZXNjICp0eF9yZW1vdmVfcHRyOworCXN0cnVjdCByeF9kZXNjICpmaXJzdF9yeF9kZXNj
OworCXN0cnVjdCByeF9kZXNjICpyeF9pbnNlcnRfcHRyOworCXN0cnVjdCByeF9kZXNjICpyeF9y
ZWFkeV9wdHI7CS8qIHBhY2tldCBjb21lIHBvaW50ZXIgKi8KKwl1bnNpZ25lZCBsb25nIHR4X3Bh
Y2tldF9jbnQ7CS8qIHRyYW5zbWl0dGVkIHBhY2tldCBjb3VudCAqLworCXVuc2lnbmVkIGxvbmcg
cnhfYXZhaWxfY250OwkvKiBhdmFpbGFibGUgcnggZGVzY3JpcHRvciBjb3VudCAqLworCXVuc2ln
bmVkIGxvbmcgaW50ZXJ2YWxfcnhfY250OwkvKiByeCBwYWNrZXQgY291bnQgYSBjYWxsYmFjayB0
aW1lICovCisKKwl1MTYgZGJ1Z19jbnQ7CisJdTE2IE5JQ19jYXBhYmlsaXR5OwkJLyogTklDIG1l
ZGlhIGNhcGFiaWxpdHkgKi8KKwl1MTYgUEhZX3JlZzQ7CQkJLyogU2F2ZWQgUGh5eGNlciByZWdp
c3RlciA0IHZhbHVlICovCisKKwl1OCBtZWRpYV9tb2RlOwkJCS8qIHVzZXIgc3BlY2lmeSBtZWRp
YSBtb2RlICovCisJdTggb3BfbW9kZTsJCQkvKiByZWFsIHdvcmsgbWVkaWEgbW9kZSAqLworCXU4
IHBoeV9hZGRyOworCXU4IGxpbmtfZmFpbGVkOwkJCS8qIEV2ZXIgbGluayBmYWlsZWQgKi8KKwl1
OCB3YWl0X3Jlc2V0OwkJCS8qIEhhcmR3YXJlIGZhaWxlZCwgbmVlZCB0byByZXNldCAqLworCXN0
cnVjdCB0aW1lcl9saXN0IHRpbWVyOworCisJLyogU3lzdGVtIGRlZmluZWQgc3RhdGlzdGljIGNv
dW50ZXIgKi8KKwlzdHJ1Y3QgbmV0X2RldmljZV9zdGF0cyBzdGF0czsKKworCS8qIERyaXZlciBk
ZWZpbmVkIHN0YXRpc3RpYyBjb3VudGVyICovCisJdW5zaWduZWQgbG9uZyB0eF9maWZvX3VuZGVy
cnVuOworCXVuc2lnbmVkIGxvbmcgdHhfbG9zc19jYXJyaWVyOworCXVuc2lnbmVkIGxvbmcgdHhf
bm9fY2FycmllcjsKKwl1bnNpZ25lZCBsb25nIHR4X2xhdGVfY29sbGlzaW9uOworCXVuc2lnbmVk
IGxvbmcgdHhfZXhjZXNzaXZlX2NvbGxpc2lvbjsKKwl1bnNpZ25lZCBsb25nIHR4X2phYmJlcl90
aW1lb3V0OworCXVuc2lnbmVkIGxvbmcgcmVzZXRfY291bnQ7CisJdW5zaWduZWQgbG9uZyByZXNl
dF9jcjg7CisJdW5zaWduZWQgbG9uZyByZXNldF9mYXRhbDsKKwl1bnNpZ25lZCBsb25nIHJlc2V0
X1RYdGltZW91dDsKKworCS8qIE5JQyBTUk9NIGRhdGEgKi8KKwl1bnNpZ25lZCBjaGFyIHNyb21b
MTI4XTsKKwl1OCBpbml0OwkKK307CisKK2VudW0gdWxpNTI2eF9vZmZzZXRzIHsKKwlEQ1IwID0g
MHgwMCwgRENSMSA9IDB4MDgsIERDUjIgPSAweDEwLCBEQ1IzID0gMHgxOCwgRENSNCA9IDB4MjAs
CisJRENSNSA9IDB4MjgsIERDUjYgPSAweDMwLCBEQ1I3ID0gMHgzOCwgRENSOCA9IDB4NDAsIERD
UjkgPSAweDQ4LAorCURDUjEwID0gMHg1MCwgRENSMTEgPSAweDU4LCBEQ1IxMiA9IDB4NjAsIERD
UjEzID0gMHg2OCwgRENSMTQgPSAweDcwLAorCURDUjE1ID0gMHg3OAorfTsKKworZW51bSB1bGk1
MjZ4X0NSNl9iaXRzIHsKKwlDUjZfUlhTQyA9IDB4MiwgQ1I2X1BCRiA9IDB4OCwgQ1I2X1BNID0g
MHg0MCwgQ1I2X1BBTSA9IDB4ODAsCisJQ1I2X0ZETSA9IDB4MjAwLCBDUjZfVFhTQyA9IDB4MjAw
MCwgQ1I2X1NUSSA9IDB4MTAwMDAwLAorCUNSNl9TRlQgPSAweDIwMDAwMCwgQ1I2X1JYQSA9IDB4
NDAwMDAwMDAsIENSNl9OT19QVVJHRSA9IDB4MjAwMDAwMDAKK307CisKKy8qIEdsb2JhbCB2YXJp
YWJsZSBkZWNsYXJhdGlvbiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqLworc3RhdGlj
IGludCBfX2RldmluaXRkYXRhIHByaW50ZWRfdmVyc2lvbjsKK3N0YXRpYyBjaGFyIHZlcnNpb25b
XSBfX2RldmluaXRkYXRhID0KKwlLRVJOX0lORk8gRFJWX05BTUUgIjogVUxpIE01MjYxL001MjYz
IG5ldCBkcml2ZXIsIHZlcnNpb24gIgorCURSVl9WRVJTSU9OICIgKCIgRFJWX1JFTERBVEUgIilc
biI7CisKK3N0YXRpYyBpbnQgdWxpNTI2eF9kZWJ1ZzsKK3N0YXRpYyB1bnNpZ25lZCBjaGFyIHVs
aTUyNnhfbWVkaWFfbW9kZSA9IFVMSTUyNlhfQVVUTzsKK3N0YXRpYyB1MzIgdWxpNTI2eF9jcjZf
dXNlcl9zZXQ7CisKKy8qIEZvciBtb2R1bGUgaW5wdXQgcGFyYW1ldGVyICovCitzdGF0aWMgaW50
IGRlYnVnOworc3RhdGljIHUzMiBjcjZzZXQ7CitzdGF0aWMgdTMyIG01MjZ4X2lkOworc3RhdGlj
IHVuc2lnbmVkIGNoYXIgbW9kZSA9IDg7CisKKy8qIGZ1bmN0aW9uIGRlY2xhcmF0aW9uIC0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi8KK3N0YXRpYyBpbnQgdWxpNTI2eF9v
cGVuKHN0cnVjdCBuZXRfZGV2aWNlICopOworc3RhdGljIGludCB1bGk1MjZ4X3N0YXJ0X3htaXQo
c3RydWN0IHNrX2J1ZmYgKiwgc3RydWN0IG5ldF9kZXZpY2UgKik7CitzdGF0aWMgaW50IHVsaTUy
Nnhfc3RvcChzdHJ1Y3QgbmV0X2RldmljZSAqKTsKK3N0YXRpYyBzdHJ1Y3QgbmV0X2RldmljZV9z
dGF0cyAqIHVsaTUyNnhfZ2V0X3N0YXRzKHN0cnVjdCBuZXRfZGV2aWNlICopOworc3RhdGljIHZv
aWQgdWxpNTI2eF9zZXRfZmlsdGVyX21vZGUoc3RydWN0IG5ldF9kZXZpY2UgKik7CitzdGF0aWMg
c3RydWN0IGV0aHRvb2xfb3BzIG5ldGRldl9ldGh0b29sX29wczsKK3N0YXRpYyB1MTYgcmVhZF9z
cm9tX3dvcmQobG9uZywgaW50KTsKK3N0YXRpYyBpcnFyZXR1cm5fdCB1bGk1MjZ4X2ludGVycnVw
dChpbnQsIHZvaWQgKiwgc3RydWN0IHB0X3JlZ3MgKik7CitzdGF0aWMgdm9pZCB1bGk1MjZ4X2Rl
c2NyaXB0b3JfaW5pdChzdHJ1Y3QgdWxpNTI2eF9ib2FyZF9pbmZvICosIHVuc2lnbmVkIGxvbmcp
Oworc3RhdGljIHZvaWQgYWxsb2NhdGVfcnhfYnVmZmVyKHN0cnVjdCB1bGk1MjZ4X2JvYXJkX2lu
Zm8gKik7CitzdGF0aWMgdm9pZCB1cGRhdGVfY3I2KHUzMiwgdW5zaWduZWQgbG9uZyk7CitzdGF0
aWMgdm9pZCBzZW5kX2ZpbHRlcl9mcmFtZShzdHJ1Y3QgbmV0X2RldmljZSAqLCBpbnQpOworc3Rh
dGljIHUxNiBwaHlfcmVhZCh1bnNpZ25lZCBsb25nLCB1OCwgdTgsIHUzMik7CitzdGF0aWMgdTE2
IHBoeV9yZWFkYnlfY3IxMCh1bnNpZ25lZCBsb25nLCB1OCwgdTgpOworc3RhdGljIHZvaWQgcGh5
X3dyaXRlKHVuc2lnbmVkIGxvbmcsIHU4LCB1OCwgdTE2LCB1MzIpOworc3RhdGljIHZvaWQgcGh5
X3dyaXRlYnlfY3IxMCh1bnNpZ25lZCBsb25nLCB1OCwgdTgsIHUxNik7CitzdGF0aWMgdm9pZCBw
aHlfd3JpdGVfMWJpdCh1bnNpZ25lZCBsb25nLCB1MzIsIHUzMik7CitzdGF0aWMgdTE2IHBoeV9y
ZWFkXzFiaXQodW5zaWduZWQgbG9uZywgdTMyKTsKK3N0YXRpYyB1OCB1bGk1MjZ4X3NlbnNlX3Nw
ZWVkKHN0cnVjdCB1bGk1MjZ4X2JvYXJkX2luZm8gKik7CitzdGF0aWMgdm9pZCB1bGk1MjZ4X3By
b2Nlc3NfbW9kZShzdHJ1Y3QgdWxpNTI2eF9ib2FyZF9pbmZvICopOworc3RhdGljIHZvaWQgdWxp
NTI2eF90aW1lcih1bnNpZ25lZCBsb25nKTsKK3N0YXRpYyB2b2lkIHVsaTUyNnhfcnhfcGFja2V0
KHN0cnVjdCBuZXRfZGV2aWNlICosIHN0cnVjdCB1bGk1MjZ4X2JvYXJkX2luZm8gKik7CitzdGF0
aWMgdm9pZCB1bGk1MjZ4X2ZyZWVfdHhfcGt0KHN0cnVjdCBuZXRfZGV2aWNlICosIHN0cnVjdCB1
bGk1MjZ4X2JvYXJkX2luZm8gKik7CitzdGF0aWMgdm9pZCB1bGk1MjZ4X3JldXNlX3NrYihzdHJ1
Y3QgdWxpNTI2eF9ib2FyZF9pbmZvICosIHN0cnVjdCBza19idWZmICopOworc3RhdGljIHZvaWQg
dWxpNTI2eF9keW5hbWljX3Jlc2V0KHN0cnVjdCBuZXRfZGV2aWNlICopOworc3RhdGljIHZvaWQg
dWxpNTI2eF9mcmVlX3J4YnVmZmVyKHN0cnVjdCB1bGk1MjZ4X2JvYXJkX2luZm8gKik7CitzdGF0
aWMgdm9pZCB1bGk1MjZ4X2luaXQoc3RydWN0IG5ldF9kZXZpY2UgKik7CitzdGF0aWMgdm9pZCB1
bGk1MjZ4X3NldF9waHl4Y2VyKHN0cnVjdCB1bGk1MjZ4X2JvYXJkX2luZm8gKik7CisKKy8qIFVM
STUyNlggbmV0d29yayBib2FyZCByb3V0aW5lIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0g
Ki8KKworLyoKKyAqCVNlYXJjaCBVTEk1MjZYIGJvYXJkLCBhbGxvY2F0ZSBzcGFjZSBhbmQgcmVn
aXN0ZXIgaXQKKyAqLworCitzdGF0aWMgaW50IF9fZGV2aW5pdCB1bGk1MjZ4X2luaXRfb25lIChz
dHJ1Y3QgcGNpX2RldiAqcGRldiwKKwkJCQkgICAgY29uc3Qgc3RydWN0IHBjaV9kZXZpY2VfaWQg
KmVudCkKK3sKKwlzdHJ1Y3QgdWxpNTI2eF9ib2FyZF9pbmZvICpkYjsJLyogYm9hcmQgaW5mb3Jt
YXRpb24gc3RydWN0dXJlICovCisJc3RydWN0IG5ldF9kZXZpY2UgKmRldjsKKwlpbnQgaSwgZXJy
OworCXUzMiBjb25maWd2YWw7CisKKwlVTEk1MjZYX0RCVUcoMCwgInVsaTUyNnhfaW5pdF9vbmUo
KSIsIDApOworCisJaWYgKCFwcmludGVkX3ZlcnNpb24rKykKKwkJcHJpbnRrKHZlcnNpb24pOwor
CisJLyogSW5pdCBuZXR3b3JrIGRldmljZSAqLworCWRldiA9IGFsbG9jX2V0aGVyZGV2KHNpemVv
ZigqZGIpKTsKKwlpZiAoZGV2ID09IE5VTEwpCisJCXJldHVybiAtRU5PTUVNOworCVNFVF9NT0RV
TEVfT1dORVIoZGV2KTsKKwlTRVRfTkVUREVWX0RFVihkZXYsICZwZGV2LT5kZXYpOworCisJaWYg
KHBjaV9zZXRfZG1hX21hc2socGRldiwgRE1BXzMyQklUX01BU0spKSB7CisJCXByaW50ayhLRVJO
X1dBUk5JTkcgRFJWX05BTUUgIjogMzItYml0IFBDSSBETUEgbm90IGF2YWlsYWJsZS5cbiIpOwor
CQllcnIgPSAtRU5PREVWOworCQlnb3RvIGVycl9vdXRfZnJlZTsKKwl9CisKKwkvKiBFbmFibGUg
TWFzdGVyL0lPIGFjY2VzcywgRGlzYWJsZSBtZW1vcnkgYWNjZXNzICovCisJZXJyID0gcGNpX2Vu
YWJsZV9kZXZpY2UocGRldik7CisJaWYgKGVycikKKwkJZ290byBlcnJfb3V0X2ZyZWU7CisKKwlp
ZiAoIXBjaV9yZXNvdXJjZV9zdGFydChwZGV2LCAwKSkgeworCQlwcmludGsoS0VSTl9FUlIgRFJW
X05BTUUgIjogSS9PIGJhc2UgaXMgemVyb1xuIik7CisJCWVyciA9IC1FTk9ERVY7CisJCWdvdG8g
ZXJyX291dF9kaXNhYmxlOworCX0KKworCWlmIChwY2lfcmVzb3VyY2VfbGVuKHBkZXYsIDApIDwg
KFVMSTUyNlhfSU9fU0laRSkgKSB7CisJCXByaW50ayhLRVJOX0VSUiBEUlZfTkFNRSAiOiBBbGxv
Y2F0ZWQgSS9PIHNpemUgdG9vIHNtYWxsXG4iKTsKKwkJZXJyID0gLUVOT0RFVjsKKwkJZ290byBl
cnJfb3V0X2Rpc2FibGU7CisJfQorCisJaWYgKHBjaV9yZXF1ZXN0X3JlZ2lvbnMocGRldiwgRFJW
X05BTUUpKSB7CisJCXByaW50ayhLRVJOX0VSUiBEUlZfTkFNRSAiOiBGYWlsZWQgdG8gcmVxdWVz
dCBQQ0kgcmVnaW9uc1xuIik7CisJCWVyciA9IC1FTk9ERVY7CisJCWdvdG8gZXJyX291dF9kaXNh
YmxlOworCX0KKworCS8vYWRkIGJ5IGNsZWFyemhhbmcgMjAwNC83LzgKKwlwY2lfcmVhZF9jb25m
aWdfZHdvcmQocGRldiwweDAsJmNvbmZpZ3ZhbCk7CisJbTUyNnhfaWQgPSBjb25maWd2YWw7CisJ
aWYoY29uZmlndmFsID09IFBDSV9VTEk1MjYzX0lEKQorCXsKKwkJLy9wcmludGsoImlzIG01MjYz
XG4iKTsKKwkJcGNpX3JlYWRfY29uZmlnX2R3b3JkKHBkZXYsMHgwYywmY29uZmlndmFsKTsKKwkJ
Y29uZmlndmFsID0gKChjb25maWd2YWwgJiAweGZmZmYwMGZmKSB8IDB4ODAwMCk7CisJCXBjaV93
cml0ZV9jb25maWdfZHdvcmQocGRldiwweDBjLGNvbmZpZ3ZhbCk7CisJfQorCS8qIEluaXQgc3lz
dGVtICYgZGV2aWNlICovCisJZGIgPSBuZXRkZXZfcHJpdihkZXYpOworCisJLyogQWxsb2NhdGUg
VHgvUnggZGVzY3JpcHRvciBtZW1vcnkgKi8KKwlkYi0+ZGVzY19wb29sX3B0ciA9IHBjaV9hbGxv
Y19jb25zaXN0ZW50KHBkZXYsIHNpemVvZihzdHJ1Y3QgdHhfZGVzYykgKiBERVNDX0FMTF9DTlQg
KyAweDIwLCAmZGItPmRlc2NfcG9vbF9kbWFfcHRyKTsKKwlpZihkYi0+ZGVzY19wb29sX3B0ciA9
PSBOVUxMKQorCQlyZXR1cm4gLUVOT01FTTsKKwlkYi0+YnVmX3Bvb2xfcHRyID0gcGNpX2FsbG9j
X2NvbnNpc3RlbnQocGRldiwgVFhfQlVGX0FMTE9DICogVFhfREVTQ19DTlQgKyA0LCAmZGItPmJ1
Zl9wb29sX2RtYV9wdHIpOworCWlmKGRiLT5idWZfcG9vbF9wdHIgPT0gTlVMTCkKKwkJcmV0dXJu
IC1FTk9NRU07CisKKwlkYi0+Zmlyc3RfdHhfZGVzYyA9IChzdHJ1Y3QgdHhfZGVzYyAqKSBkYi0+
ZGVzY19wb29sX3B0cjsKKwlkYi0+Zmlyc3RfdHhfZGVzY19kbWEgPSBkYi0+ZGVzY19wb29sX2Rt
YV9wdHI7CisJZGItPmJ1Zl9wb29sX3N0YXJ0ID0gZGItPmJ1Zl9wb29sX3B0cjsKKwlkYi0+YnVm
X3Bvb2xfZG1hX3N0YXJ0ID0gZGItPmJ1Zl9wb29sX2RtYV9wdHI7CisKKwlkYi0+Y2hpcF9pZCA9
IGVudC0+ZHJpdmVyX2RhdGE7CisJZGItPmlvYWRkciA9IHBjaV9yZXNvdXJjZV9zdGFydChwZGV2
LCAwKTsKKwkKKwlkYi0+cGRldiA9IHBkZXY7CisJZGItPmluaXQgPSAxOworCQorCWRldi0+YmFz
ZV9hZGRyID0gZGItPmlvYWRkcjsKKwlkZXYtPmlycSA9IHBkZXYtPmlycTsKKwlwY2lfc2V0X2Ry
dmRhdGEocGRldiwgZGV2KTsKKwkKKwkvKiBSZWdpc3RlciBzb21lIG5lY2Vzc2FyeSBmdW5jdGlv
bnMgKi8KKwlkZXYtPm9wZW4gPSAmdWxpNTI2eF9vcGVuOworCWRldi0+aGFyZF9zdGFydF94bWl0
ID0gJnVsaTUyNnhfc3RhcnRfeG1pdDsKKwlkZXYtPnN0b3AgPSAmdWxpNTI2eF9zdG9wOworCWRl
di0+Z2V0X3N0YXRzID0gJnVsaTUyNnhfZ2V0X3N0YXRzOworCWRldi0+c2V0X211bHRpY2FzdF9s
aXN0ID0gJnVsaTUyNnhfc2V0X2ZpbHRlcl9tb2RlOworCWRldi0+ZXRodG9vbF9vcHMgPSAmbmV0
ZGV2X2V0aHRvb2xfb3BzOworCXNwaW5fbG9ja19pbml0KCZkYi0+bG9jayk7CisKKwkJCisJLyog
cmVhZCA2NCB3b3JkIHNyb20gZGF0YSAqLworCWZvciAoaSA9IDA7IGkgPCA2NDsgaSsrKQorCQko
KF9fbGUxNiAqKSBkYi0+c3JvbSlbaV0gPSBjcHVfdG9fbGUxNihyZWFkX3Nyb21fd29yZChkYi0+
aW9hZGRyLCBpKSk7CisKKwkvKiBTZXQgTm9kZSBhZGRyZXNzICovCisJaWYoKCh1MTYgKikgZGIt
PnNyb20pWzBdID09IDB4ZmZmZikJCS8qIFNST00gYWJzZW50LCBzbyByZWFkIE1BQyBhZGRyZXNz
IGZyb20gSUQgVGFibGUgKi8KKwl7CisJCW91dGwoMHgxMDAwMCwgZGItPmlvYWRkciArIERDUjAp
OwkvL0RpYWdub3NpcyBtb2RlCisJCW91dGwoMHgxYzAsIGRiLT5pb2FkZHIgKyBEQ1IxMyk7CS8v
UmVzZXQgZGlhbm9zdGljIHBvaW50ZXIgcG9ydAorCQlvdXRsKDAsIGRiLT5pb2FkZHIgKyBEQ1Ix
NCk7CQkvL0NsZWFyIHJlc2V0IHBvcnQKKwkJb3V0bCgweDEwLCBkYi0+aW9hZGRyICsgRENSMTQp
OwkJLy9SZXNldCBJRCBUYWJsZSBwb2ludGVyCisJCW91dGwoMCwgZGItPmlvYWRkciArIERDUjE0
KTsJCS8vQ2xlYXIgcmVzZXQgcG9ydAorCQlvdXRsKDAsIGRiLT5pb2FkZHIgKyBEQ1IxMyk7CQkv
L0NsZWFyIENSMTMKKwkJb3V0bCgweDFiMCwgZGItPmlvYWRkciArIERDUjEzKTsJLy9TZWxlY3Qg
SUQgVGFibGUgYWNjZXNzIHBvcnQKKwkJLy9SZWFkIE1BQyBhZGRyZXNzIGZyb20gQ1IxNAorCQlm
b3IgKGkgPSAwOyBpIDwgNjsgaSsrKQorCQkJZGV2LT5kZXZfYWRkcltpXSA9IGlubChkYi0+aW9h
ZGRyICsgRENSMTQpOworCQkvL1JlYWQgZW5kCisJCW91dGwoMCwgZGItPmlvYWRkciArIERDUjEz
KTsJLy9DbGVhciBDUjEzCisJCW91dGwoMCwgZGItPmlvYWRkciArIERDUjApOwkJLy9DbGVhciBD
UjAKKwkJdWRlbGF5KDEwKTsKKwl9CisJZWxzZQkJLypFeGlzdCBTUk9NKi8KKwl7CisJCWZvciAo
aSA9IDA7IGkgPCA2OyBpKyspCisJCQlkZXYtPmRldl9hZGRyW2ldID0gZGItPnNyb21bMjAgKyBp
XTsKKwl9CisJZXJyID0gcmVnaXN0ZXJfbmV0ZGV2IChkZXYpOworCWlmIChlcnIpCisJCWdvdG8g
ZXJyX291dF9yZXM7CisKKwlwcmludGsoS0VSTl9JTkZPICIlczogVUxpIE0lMDRseCBhdCBwY2kl
cywiLGRldi0+bmFtZSxlbnQtPmRyaXZlcl9kYXRhID4+IDE2LHBjaV9uYW1lKHBkZXYpKTsKKwkK
Kwlmb3IgKGkgPSAwOyBpIDwgNjsgaSsrKQorCQlwcmludGsoIiVjJTAyeCIsIGkgPyAnOicgOiAn
ICcsIGRldi0+ZGV2X2FkZHJbaV0pOworCXByaW50aygiLCBpcnEgJWQuXG4iLCBkZXYtPmlycSk7
CisKKwlwY2lfc2V0X21hc3RlcihwZGV2KTsKKworCXJldHVybiAwOworCitlcnJfb3V0X3JlczoK
KwlwY2lfcmVsZWFzZV9yZWdpb25zKHBkZXYpOworZXJyX291dF9kaXNhYmxlOgorCXBjaV9kaXNh
YmxlX2RldmljZShwZGV2KTsKK2Vycl9vdXRfZnJlZToKKwlwY2lfc2V0X2RydmRhdGEocGRldiwg
TlVMTCk7CisJZnJlZV9uZXRkZXYoZGV2KTsKKworCXJldHVybiBlcnI7Cit9CisKKworc3RhdGlj
IHZvaWQgX19kZXZleGl0IHVsaTUyNnhfcmVtb3ZlX29uZSAoc3RydWN0IHBjaV9kZXYgKnBkZXYp
Cit7CisJc3RydWN0IG5ldF9kZXZpY2UgKmRldiA9IHBjaV9nZXRfZHJ2ZGF0YShwZGV2KTsKKwlz
dHJ1Y3QgdWxpNTI2eF9ib2FyZF9pbmZvICpkYiA9IG5ldGRldl9wcml2KGRldik7CisKKwlVTEk1
MjZYX0RCVUcoMCwgInVsaTUyNnhfcmVtb3ZlX29uZSgpIiwgMCk7CisKKwlwY2lfZnJlZV9jb25z
aXN0ZW50KGRiLT5wZGV2LCBzaXplb2Yoc3RydWN0IHR4X2Rlc2MpICoKKwkJCQlERVNDX0FMTF9D
TlQgKyAweDIwLCBkYi0+ZGVzY19wb29sX3B0ciwKKyAJCQkJZGItPmRlc2NfcG9vbF9kbWFfcHRy
KTsKKwlwY2lfZnJlZV9jb25zaXN0ZW50KGRiLT5wZGV2LCBUWF9CVUZfQUxMT0MgKiBUWF9ERVND
X0NOVCArIDQsCisJCQkJZGItPmJ1Zl9wb29sX3B0ciwgZGItPmJ1Zl9wb29sX2RtYV9wdHIpOwor
CXVucmVnaXN0ZXJfbmV0ZGV2KGRldik7CisJcGNpX3JlbGVhc2VfcmVnaW9ucyhwZGV2KTsKKwlm
cmVlX25ldGRldihkZXYpOwkvKiBmcmVlIGJvYXJkIGluZm9ybWF0aW9uICovCisJcGNpX3NldF9k
cnZkYXRhKHBkZXYsIE5VTEwpOworCVVMSTUyNlhfREJVRygwLCAidWxpNTI2eF9yZW1vdmVfb25l
KCkgZXhpdCIsIDApOworfQorCisKKy8qCisgKglPcGVuIHRoZSBpbnRlcmZhY2UuCisgKglUaGUg
aW50ZXJmYWNlIGlzIG9wZW5lZCB3aGVuZXZlciAiaWZjb25maWciIGFjdGl2YXRlcyBpdC4KKyAq
LworCitzdGF0aWMgaW50IHVsaTUyNnhfb3BlbihzdHJ1Y3QgbmV0X2RldmljZSAqZGV2KQorewor
CWludCByZXQ7CisJc3RydWN0IHVsaTUyNnhfYm9hcmRfaW5mbyAqZGIgPSBuZXRkZXZfcHJpdihk
ZXYpOworCisJVUxJNTI2WF9EQlVHKDAsICJ1bGk1MjZ4X29wZW4iLCAwKTsKKworCXJldCA9IHJl
cXVlc3RfaXJxKGRldi0+aXJxLCAmdWxpNTI2eF9pbnRlcnJ1cHQsIFNBX1NISVJRLCBkZXYtPm5h
bWUsIGRldik7CisJaWYgKHJldCkKKwkJcmV0dXJuIHJldDsKKworCS8qIHN5c3RlbSB2YXJpYWJs
ZSBpbml0ICovCisJZGItPmNyNl9kYXRhID0gQ1I2X0RFRkFVTFQgfCB1bGk1MjZ4X2NyNl91c2Vy
X3NldDsKKwlpZihtNTI2eF9pZCA9PSBQQ0lfVUxJNTI2M19JRCkKKwl7ICAKKwkJLy9wcmludGso
ImlzIDUyNjNcbiIpOworCQlkYi0+Y3I2X2RhdGEgPSBDUjZfREVGQVVMVF9BIHwgdWxpNTI2eF9j
cjZfdXNlcl9zZXQ7CisJfQorCWRiLT50eF9wYWNrZXRfY250ID0gMDsKKwlkYi0+cnhfYXZhaWxf
Y250ID0gMDsKKwlkYi0+bGlua19mYWlsZWQgPSAxOworCW5ldGlmX2NhcnJpZXJfb2ZmKGRldik7
CisJZGItPndhaXRfcmVzZXQgPSAwOworCisJZGItPk5JQ19jYXBhYmlsaXR5ID0gMHhmOwkvKiBB
bGwgY2FwYWJpbGl0eSovCisJZGItPlBIWV9yZWc0ID0gMHgxZTA7CisKKwkvKiBDUjYgb3BlcmF0
aW9uIG1vZGUgZGVjaXNpb24gKi8KKwlkYi0+Y3I2X2RhdGEgfD0gVUxJNTI2WF9UWFRIXzI1NjsK
KwlkYi0+Y3IwX2RhdGEgPSBDUjBfREVGQVVMVDsKKwkKKwkvKiBJbml0aWFsaXplIFVMSTUyNlgg
Ym9hcmQgKi8KKwl1bGk1MjZ4X2luaXQoZGV2KTsKKworCS8qIEFjdGl2ZSBTeXN0ZW0gSW50ZXJm
YWNlICovCisJbmV0aWZfd2FrZV9xdWV1ZShkZXYpOworCisJLyogc2V0IGFuZCBhY3RpdmUgYSB0
aW1lciBwcm9jZXNzICovCisJaW5pdF90aW1lcigmZGItPnRpbWVyKTsKKwlkYi0+dGltZXIuZXhw
aXJlcyA9IFVMSTUyNlhfVElNRVJfV1VUICsgSFogKiAyOworCWRiLT50aW1lci5kYXRhID0gKHVu
c2lnbmVkIGxvbmcpZGV2OworCWRiLT50aW1lci5mdW5jdGlvbiA9ICZ1bGk1MjZ4X3RpbWVyOwor
CWFkZF90aW1lcigmZGItPnRpbWVyKTsKKworCXJldHVybiAwOworfQorCisKKy8qCUluaXRpYWxp
emUgVUxJNTI2WCBib2FyZAorICoJUmVzZXQgVUxJNTI2WCBib2FyZAorICoJSW5pdGlhbGl6ZSBU
WC9SeCBkZXNjcmlwdG9yIGNoYWluIHN0cnVjdHVyZQorICoJU2VuZCB0aGUgc2V0LXVwIGZyYW1l
CisgKglFbmFibGUgVHgvUnggbWFjaGluZQorICovCisKK3N0YXRpYyB2b2lkIHVsaTUyNnhfaW5p
dChzdHJ1Y3QgbmV0X2RldmljZSAqZGV2KQoreworCXN0cnVjdCB1bGk1MjZ4X2JvYXJkX2luZm8g
KmRiID0gbmV0ZGV2X3ByaXYoZGV2KTsKKwl1bnNpZ25lZCBsb25nIGlvYWRkciA9IGRiLT5pb2Fk
ZHI7CisJdTgJcGh5X3RtcDsKKwl1MTYJcGh5X3ZhbHVlOworCXUxNiBwaHlfcmVnX3Jlc2V0Owor
CisJVUxJNTI2WF9EQlVHKDAsICJ1bGk1MjZ4X2luaXQoKSIsIDApOworCisJLyogUmVzZXQgTTUy
NnggTUFDIGNvbnRyb2xsZXIgKi8KKwlvdXRsKFVMSTUyNlhfUkVTRVQsIGlvYWRkciArIERDUjAp
OwkvKiBSRVNFVCBNQUMgKi8KKwl1ZGVsYXkoMTAwKTsKKwlvdXRsKGRiLT5jcjBfZGF0YSwgaW9h
ZGRyICsgRENSMCk7CisJdWRlbGF5KDUpOworCisJLyogUGh5IGFkZHIgOiBJbiBzb21lIGJvYXJk
cyxNNTI2MS9NNTI2MyBwaHkgYWRkcmVzcyAhPSAxICovCisJZGItPnBoeV9hZGRyID0gMTsKKwlm
b3IocGh5X3RtcD0wO3BoeV90bXA8MzI7cGh5X3RtcCsrKQorCXsKKwkJcGh5X3ZhbHVlPXBoeV9y
ZWFkKGRiLT5pb2FkZHIscGh5X3RtcCwzLGRiLT5jaGlwX2lkKTsvL3BlZXIgYWRkCisJCWlmKHBo
eV92YWx1ZSAhPSAweGZmZmYmJnBoeV92YWx1ZSE9MCkKKwkJeworCQkJZGItPnBoeV9hZGRyID0g
cGh5X3RtcDsKKwkJCWJyZWFrOworCQl9CisJfQorCWlmKHBoeV90bXAgPT0gMzIpCisJCXByaW50
ayhLRVJOX1dBUk5JTkcgIkNhbiBub3QgZmluZCB0aGUgcGh5IGFkZHJlc3MhISEiKTsKKwkvKiBQ
YXJzZXIgU1JPTSBhbmQgbWVkaWEgbW9kZSAqLworCWRiLT5tZWRpYV9tb2RlID0gdWxpNTI2eF9t
ZWRpYV9tb2RlOworCisJLy9hZGQgYnkgY2xlYXJ6aGFuZyAyMDA0LzcvOAorCS8qIFJFU0VUIFBo
eXhjZXIgQ2hpcCBieSBHUFIgcG9ydCBiaXQgNyAqLworCS8vb3V0bCgweDE4MCwgaW9hZGRyICsg
RENSMTIpOwkJLyogTGV0IGJpdCA3IG91dHB1dCBwb3J0ICovCisJLy9vdXRsKDB4MCwgaW9hZGRy
ICsgRENSMTIpOwkvKiBDbGVhciBSRVNFVCBzaWduYWwgKi8KKworCS8qIFBoeXhjZXIgY2FwYWJp
bGl0eSBzZXR0aW5nICovCisJcGh5X3JlZ19yZXNldCA9IHBoeV9yZWFkKGRiLT5pb2FkZHIsIGRi
LT5waHlfYWRkciwgMCwgZGItPmNoaXBfaWQpOworCXBoeV9yZWdfcmVzZXQgPSAocGh5X3JlZ19y
ZXNldCB8IDB4ODAwMCk7CisJcGh5X3dyaXRlKGRiLT5pb2FkZHIsIGRiLT5waHlfYWRkciwgMCwg
cGh5X3JlZ19yZXNldCwgZGItPmNoaXBfaWQpOworCXVkZWxheSg1MDApOworCisJLyogUHJvY2Vz
cyBQaHl4Y2VyIE1lZGlhIE1vZGUgKi8KKwl1bGk1MjZ4X3NldF9waHl4Y2VyKGRiKTsKKworCS8q
IE1lZGlhIE1vZGUgUHJvY2VzcyAqLworCWlmICggIShkYi0+bWVkaWFfbW9kZSAmIFVMSTUyNlhf
QVVUTykgKQorCQlkYi0+b3BfbW9kZSA9IGRiLT5tZWRpYV9tb2RlOyAJLyogRm9yY2UgTW9kZSAq
LworCisJLyogSW5pdGlhbGl6ZSBUcmFuc21pdC9SZWNlaXZlIGRlY3JpcHRvciBhbmQgQ1IzLzQg
Ki8KKwl1bGk1MjZ4X2Rlc2NyaXB0b3JfaW5pdChkYiwgaW9hZGRyKTsKKworCS8qIEluaXQgQ1I2
IHRvIHByb2dyYW0gTTUyNlggb3BlcmF0aW9uICovCisJdXBkYXRlX2NyNihkYi0+Y3I2X2RhdGEs
IGlvYWRkcik7CisKKwkvKiBTZW5kIHNldHVwIGZyYW1lICovCisJc2VuZF9maWx0ZXJfZnJhbWUo
ZGV2LCBkZXYtPm1jX2NvdW50KTsJLyogTTUyNjEvTTUyNjMgKi8KKworCS8qIEluaXQgQ1I3LCBp
bnRlcnJ1cHQgYWN0aXZlIGJpdCAqLworCWRiLT5jcjdfZGF0YSA9IENSN19ERUZBVUxUOworCW91
dGwoZGItPmNyN19kYXRhLCBpb2FkZHIgKyBEQ1I3KTsKKworCS8qIEluaXQgQ1IxNSwgVHggamFi
YmVyIGFuZCBSeCB3YXRjaGRvZyB0aW1lciAqLworCW91dGwoZGItPmNyMTVfZGF0YSwgaW9hZGRy
ICsgRENSMTUpOworCisJLyogRW5hYmxlIFVMSTUyNlggVHgvUnggZnVuY3Rpb24gKi8KKwlkYi0+
Y3I2X2RhdGEgfD0gQ1I2X1JYU0MgfCBDUjZfVFhTQzsKKwl1cGRhdGVfY3I2KGRiLT5jcjZfZGF0
YSwgaW9hZGRyKTsKK30KKworCisvKgorICoJSGFyZHdhcmUgc3RhcnQgdHJhbnNtaXNzaW9uLgor
ICoJU2VuZCBhIHBhY2tldCB0byBtZWRpYSBmcm9tIHRoZSB1cHBlciBsYXllci4KKyAqLworCitz
dGF0aWMgaW50IHVsaTUyNnhfc3RhcnRfeG1pdChzdHJ1Y3Qgc2tfYnVmZiAqc2tiLCBzdHJ1Y3Qg
bmV0X2RldmljZSAqZGV2KQoreworCXN0cnVjdCB1bGk1MjZ4X2JvYXJkX2luZm8gKmRiID0gbmV0
ZGV2X3ByaXYoZGV2KTsKKwlzdHJ1Y3QgdHhfZGVzYyAqdHhwdHI7CisJdW5zaWduZWQgbG9uZyBm
bGFnczsKKworCVVMSTUyNlhfREJVRygwLCAidWxpNTI2eF9zdGFydF94bWl0IiwgMCk7CisKKwkv
KiBSZXNvdXJjZSBmbGFnIGNoZWNrICovCisJbmV0aWZfc3RvcF9xdWV1ZShkZXYpOworCisJLyog
VG9vIGxhcmdlIHBhY2tldCBjaGVjayAqLworCWlmIChza2ItPmxlbiA+IE1BWF9QQUNLRVRfU0la
RSkgeworCQlwcmludGsoS0VSTl9FUlIgRFJWX05BTUUgIjogYmlnIHBhY2tldCA9ICVkXG4iLCAo
dTE2KXNrYi0+bGVuKTsKKwkJZGV2X2tmcmVlX3NrYihza2IpOworCQlyZXR1cm4gMDsKKwl9CisK
KwlzcGluX2xvY2tfaXJxc2F2ZSgmZGItPmxvY2ssIGZsYWdzKTsKKworCS8qIE5vIFR4IHJlc291
cmNlIGNoZWNrLCBpdCBuZXZlciBoYXBwZW4gbnJvbWFsbHkgKi8KKwlpZiAoZGItPnR4X3BhY2tl
dF9jbnQgPj0gVFhfRlJFRV9ERVNDX0NOVCkgeworCQlzcGluX3VubG9ja19pcnFyZXN0b3JlKCZk
Yi0+bG9jaywgZmxhZ3MpOworCQlwcmludGsoS0VSTl9FUlIgRFJWX05BTUUgIjogTm8gVHggcmVz
b3VyY2UgJWxkXG4iLCBkYi0+dHhfcGFja2V0X2NudCk7CisJCXJldHVybiAxOworCX0KKworCS8q
IERpc2FibGUgTklDIGludGVycnVwdCAqLworCW91dGwoMCwgZGV2LT5iYXNlX2FkZHIgKyBEQ1I3
KTsKKworCS8qIHRyYW5zbWl0IHRoaXMgcGFja2V0ICovCisJdHhwdHIgPSBkYi0+dHhfaW5zZXJ0
X3B0cjsKKwltZW1jcHkodHhwdHItPnR4X2J1Zl9wdHIsIHNrYi0+ZGF0YSwgc2tiLT5sZW4pOwor
CXR4cHRyLT50ZGVzMSA9IGNwdV90b19sZTMyKDB4ZTEwMDAwMDAgfCBza2ItPmxlbik7CisKKwkv
KiBQb2ludCB0byBuZXh0IHRyYW5zbWl0IGZyZWUgZGVzY3JpcHRvciAqLworCWRiLT50eF9pbnNl
cnRfcHRyID0gdHhwdHItPm5leHRfdHhfZGVzYzsKKworCS8qIFRyYW5zbWl0IFBhY2tldCBQcm9j
ZXNzICovCisJaWYgKCAoZGItPnR4X3BhY2tldF9jbnQgPCBUWF9ERVNDX0NOVCkgKSB7CisJCXR4
cHRyLT50ZGVzMCA9IGNwdV90b19sZTMyKDB4ODAwMDAwMDApOwkvKiBTZXQgb3duZXIgYml0ICov
CisJCWRiLT50eF9wYWNrZXRfY250Kys7CQkJLyogUmVhZHkgdG8gc2VuZCAqLworCQlvdXRsKDB4
MSwgZGV2LT5iYXNlX2FkZHIgKyBEQ1IxKTsJLyogSXNzdWUgVHggcG9sbGluZyAqLworCQlkZXYt
PnRyYW5zX3N0YXJ0ID0gamlmZmllczsJCS8qIHNhdmVkIHRpbWUgc3RhbXAgKi8KKwl9CisKKwkv
KiBUeCByZXNvdXJjZSBjaGVjayAqLworCWlmICggZGItPnR4X3BhY2tldF9jbnQgPCBUWF9GUkVF
X0RFU0NfQ05UICkKKwkJbmV0aWZfd2FrZV9xdWV1ZShkZXYpOworCisJLyogUmVzdG9yZSBDUjcg
dG8gZW5hYmxlIGludGVycnVwdCAqLworCXNwaW5fdW5sb2NrX2lycXJlc3RvcmUoJmRiLT5sb2Nr
LCBmbGFncyk7CisJb3V0bChkYi0+Y3I3X2RhdGEsIGRldi0+YmFzZV9hZGRyICsgRENSNyk7CisJ
CisJLyogZnJlZSB0aGlzIFNLQiAqLworCWRldl9rZnJlZV9za2Ioc2tiKTsKKworCXJldHVybiAw
OworfQorCisKKy8qCisgKglTdG9wIHRoZSBpbnRlcmZhY2UuCisgKglUaGUgaW50ZXJmYWNlIGlz
IHN0b3BwZWQgd2hlbiBpdCBpcyBicm91Z2h0LgorICovCisKK3N0YXRpYyBpbnQgdWxpNTI2eF9z
dG9wKHN0cnVjdCBuZXRfZGV2aWNlICpkZXYpCit7CisJc3RydWN0IHVsaTUyNnhfYm9hcmRfaW5m
byAqZGIgPSBuZXRkZXZfcHJpdihkZXYpOworCXVuc2lnbmVkIGxvbmcgaW9hZGRyID0gZGV2LT5i
YXNlX2FkZHI7CisKKwlVTEk1MjZYX0RCVUcoMCwgInVsaTUyNnhfc3RvcCIsIDApOworCisJLyog
ZGlzYWJsZSBzeXN0ZW0gKi8KKwluZXRpZl9zdG9wX3F1ZXVlKGRldik7CisKKwkvKiBkZWxldGVk
IHRpbWVyICovCisJZGVsX3RpbWVyX3N5bmMoJmRiLT50aW1lcik7CisKKwkvKiBSZXNldCAmIHN0
b3AgVUxJNTI2WCBib2FyZCAqLworCW91dGwoVUxJNTI2WF9SRVNFVCwgaW9hZGRyICsgRENSMCk7
CisJdWRlbGF5KDUpOworCXBoeV93cml0ZShkYi0+aW9hZGRyLCBkYi0+cGh5X2FkZHIsIDAsIDB4
ODAwMCwgZGItPmNoaXBfaWQpOworCisJLyogZnJlZSBpbnRlcnJ1cHQgKi8KKwlmcmVlX2lycShk
ZXYtPmlycSwgZGV2KTsKKworCS8qIGZyZWUgYWxsb2NhdGVkIHJ4IGJ1ZmZlciAqLworCXVsaTUy
NnhfZnJlZV9yeGJ1ZmZlcihkYik7CisKKyNpZiAwCisJLyogc2hvdyBzdGF0aXN0aWMgY291bnRl
ciAqLworCXByaW50ayhEUlZfTkFNRSAiOiBGVTolbHggRUM6JWx4IExDOiVseCBOQzolbHggTE9D
OiVseCBUWEpUOiVseCBSRVNFVDolbHggUkNSODolbHggRkFMOiVseCBUVDolbHhcbiIsCisJCWRi
LT50eF9maWZvX3VuZGVycnVuLCBkYi0+dHhfZXhjZXNzaXZlX2NvbGxpc2lvbiwKKwkJZGItPnR4
X2xhdGVfY29sbGlzaW9uLCBkYi0+dHhfbm9fY2FycmllciwgZGItPnR4X2xvc3NfY2FycmllciwK
KwkJZGItPnR4X2phYmJlcl90aW1lb3V0LCBkYi0+cmVzZXRfY291bnQsIGRiLT5yZXNldF9jcjgs
CisJCWRiLT5yZXNldF9mYXRhbCwgZGItPnJlc2V0X1RYdGltZW91dCk7CisjZW5kaWYKKworCXJl
dHVybiAwOworfQorCisKKy8qCisgKglNNTI2MS9NNTI2MyBpbnN0ZXJydXB0IGhhbmRsZXIKKyAq
CXJlY2VpdmUgdGhlIHBhY2tldCB0byB1cHBlciBsYXllciwgZnJlZSB0aGUgdHJhbnNtaXR0ZWQg
cGFja2V0CisgKi8KKworc3RhdGljIGlycXJldHVybl90IHVsaTUyNnhfaW50ZXJydXB0KGludCBp
cnEsIHZvaWQgKmRldl9pZCwgc3RydWN0IHB0X3JlZ3MgKnJlZ3MpCit7CisJc3RydWN0IG5ldF9k
ZXZpY2UgKmRldiA9IGRldl9pZDsKKwlzdHJ1Y3QgdWxpNTI2eF9ib2FyZF9pbmZvICpkYiA9IG5l
dGRldl9wcml2KGRldik7CisJdW5zaWduZWQgbG9uZyBpb2FkZHIgPSBkZXYtPmJhc2VfYWRkcjsK
Kwl1bnNpZ25lZCBsb25nIGZsYWdzOworCisgICAgICAgLy9VTEk1MjZYX0RCVUcoMCwgInVsaTUy
NnhfaW50ZXJydXB0KCkiLCAwKTsKKworCWlmICghZGV2KSB7CisJCVVMSTUyNlhfREJVRygxLCAi
dWxpNTI2eF9pbnRlcnJ1cHQoKSB3aXRob3V0IERFVklDRSBhcmciLCAwKTsKKwkJcmV0dXJuIElS
UV9OT05FOworCX0KKworCS8vb3V0bCgwLCBpb2FkZHIgKyBEQ1I3KTsKKwlzcGluX2xvY2tfaXJx
c2F2ZSgmZGItPmxvY2ssIGZsYWdzKTsKKwlvdXRsKDAsIGlvYWRkciArIERDUjcpOworCisJLyog
R290IFVMSTUyNlggc3RhdHVzICovCisJZGItPmNyNV9kYXRhID0gaW5sKGlvYWRkciArIERDUjUp
OworCW91dGwoZGItPmNyNV9kYXRhLCBpb2FkZHIgKyBEQ1I1KTsKKwlpZiAoICEoZGItPmNyNV9k
YXRhICYgMHgxODBjMSkgKSB7CisJCXNwaW5fdW5sb2NrX2lycXJlc3RvcmUoJmRiLT5sb2NrLCBm
bGFncyk7CisJCW91dGwoZGItPmNyN19kYXRhLCBpb2FkZHIgKyBEQ1I3KTsKKwkJcmV0dXJuIElS
UV9IQU5ETEVEOworCX0KKworCS8qIERpc2FibGUgYWxsIGludGVycnVwdCBpbiBDUjcgdG8gc29s
dmUgdGhlIGludGVycnVwdCBlZGdlIHByb2JsZW0gKi8KKwkvL291dGwoMCwgaW9hZGRyICsgRENS
Nyk7CisKKwkvKiBDaGVjayBzeXN0ZW0gc3RhdHVzICovCisJaWYgKGRiLT5jcjVfZGF0YSAmIDB4
MjAwMCkgeworCQkvKiBzeXN0ZW0gYnVzIGVycm9yIGhhcHBlbiAqLworCQlVTEk1MjZYX0RCVUco
MSwgIlN5c3RlbSBidXMgZXJyb3IgaGFwcGVuLiBDUjU9IiwgZGItPmNyNV9kYXRhKTsKKwkJZGIt
PnJlc2V0X2ZhdGFsKys7CisJCWRiLT53YWl0X3Jlc2V0ID0gMTsJLyogTmVlZCB0byBSRVNFVCAq
LworCQlzcGluX3VubG9ja19pcnFyZXN0b3JlKCZkYi0+bG9jaywgZmxhZ3MpOworCQlyZXR1cm4g
SVJRX0hBTkRMRUQ7CisJfQorCisJIC8qIFJlY2VpdmVkIHRoZSBjb21pbmcgcGFja2V0ICovCisJ
aWYgKCAoZGItPmNyNV9kYXRhICYgMHg0MCkgJiYgZGItPnJ4X2F2YWlsX2NudCApCisJCXVsaTUy
NnhfcnhfcGFja2V0KGRldiwgZGIpOworCisJLyogcmVhbGxvY2F0ZSByeCBkZXNjcmlwdG9yIGJ1
ZmZlciAqLworCWlmIChkYi0+cnhfYXZhaWxfY250PFJYX0RFU0NfQ05UKQorCQlhbGxvY2F0ZV9y
eF9idWZmZXIoZGIpOworCisJLyogRnJlZSB0aGUgdHJhbnNtaXR0ZWQgZGVzY3JpcHRvciAqLwor
CWlmICggZGItPmNyNV9kYXRhICYgMHgwMSkKKwkJdWxpNTI2eF9mcmVlX3R4X3BrdChkZXYsIGRi
KTsKKworCS8qIFJlc3RvcmUgQ1I3IHRvIGVuYWJsZSBpbnRlcnJ1cHQgbWFzayAqLworCW91dGwo
ZGItPmNyN19kYXRhLCBpb2FkZHIgKyBEQ1I3KTsKKworCXNwaW5fdW5sb2NrX2lycXJlc3RvcmUo
JmRiLT5sb2NrLCBmbGFncyk7CisJcmV0dXJuIElSUV9IQU5ETEVEOworfQorCisKKy8qCisgKglG
cmVlIFRYIHJlc291cmNlIGFmdGVyIFRYIGNvbXBsZXRlCisgKi8KKworc3RhdGljIHZvaWQgdWxp
NTI2eF9mcmVlX3R4X3BrdChzdHJ1Y3QgbmV0X2RldmljZSAqZGV2LCBzdHJ1Y3QgdWxpNTI2eF9i
b2FyZF9pbmZvICogZGIpCit7CisJc3RydWN0IHR4X2Rlc2MgKnR4cHRyOworCXUzMiB0ZGVzMDsK
KworCXR4cHRyID0gZGItPnR4X3JlbW92ZV9wdHI7CisJd2hpbGUoZGItPnR4X3BhY2tldF9jbnQp
IHsKKwkJdGRlczAgPSBsZTMyX3RvX2NwdSh0eHB0ci0+dGRlczApOworCQkvKiBwcmludGsoRFJW
X05BTUUgIjogdGRlczA9JXhcbiIsIHRkZXMwKTsgKi8KKwkJaWYgKHRkZXMwICYgMHg4MDAwMDAw
MCkKKwkJCWJyZWFrOworCisJCS8qIEEgcGFja2V0IHNlbnQgY29tcGxldGVkICovCisJCWRiLT50
eF9wYWNrZXRfY250LS07CisJCWRiLT5zdGF0cy50eF9wYWNrZXRzKys7CisKKwkJLyogVHJhbnNt
aXQgc3RhdGlzdGljIGNvdW50ZXIgKi8KKwkJaWYgKCB0ZGVzMCAhPSAweDdmZmZmZmZmICkgewor
CQkJLyogcHJpbnRrKERSVl9OQU1FICI6IHRkZXMwPSV4XG4iLCB0ZGVzMCk7ICovCisJCQlkYi0+
c3RhdHMuY29sbGlzaW9ucyArPSAodGRlczAgPj4gMykgJiAweGY7CisJCQlkYi0+c3RhdHMudHhf
Ynl0ZXMgKz0gbGUzMl90b19jcHUodHhwdHItPnRkZXMxKSAmIDB4N2ZmOworCQkJaWYgKHRkZXMw
ICYgVERFUzBfRVJSX01BU0spIHsKKwkJCQlkYi0+c3RhdHMudHhfZXJyb3JzKys7CisJCQkJaWYg
KHRkZXMwICYgMHgwMDAyKSB7CS8qIFVuZGVyUnVuICovCisJCQkJCWRiLT50eF9maWZvX3VuZGVy
cnVuKys7CisJCQkJCWlmICggIShkYi0+Y3I2X2RhdGEgJiBDUjZfU0ZUKSApIHsKKwkJCQkJCWRi
LT5jcjZfZGF0YSA9IGRiLT5jcjZfZGF0YSB8IENSNl9TRlQ7CisJCQkJCQl1cGRhdGVfY3I2KGRi
LT5jcjZfZGF0YSwgZGItPmlvYWRkcik7CisJCQkJCX0KKwkJCQl9CisJCQkJaWYgKHRkZXMwICYg
MHgwMTAwKQorCQkJCQlkYi0+dHhfZXhjZXNzaXZlX2NvbGxpc2lvbisrOworCQkJCWlmICh0ZGVz
MCAmIDB4MDIwMCkKKwkJCQkJZGItPnR4X2xhdGVfY29sbGlzaW9uKys7CisJCQkJaWYgKHRkZXMw
ICYgMHgwNDAwKQorCQkJCQlkYi0+dHhfbm9fY2FycmllcisrOworCQkJCWlmICh0ZGVzMCAmIDB4
MDgwMCkKKwkJCQkJZGItPnR4X2xvc3NfY2FycmllcisrOworCQkJCWlmICh0ZGVzMCAmIDB4NDAw
MCkKKwkJCQkJZGItPnR4X2phYmJlcl90aW1lb3V0Kys7CisJCQl9CisJCX0KKworICAgIAkJdHhw
dHIgPSB0eHB0ci0+bmV4dF90eF9kZXNjOworCX0vKiBFbmQgb2Ygd2hpbGUgKi8KKworCS8qIFVw
ZGF0ZSBUWCByZW1vdmUgcG9pbnRlciB0byBuZXh0ICovCisJZGItPnR4X3JlbW92ZV9wdHIgPSB0
eHB0cjsKKworCS8qIFJlc291cmNlIGF2YWlsYWJsZSBjaGVjayAqLworCWlmICggZGItPnR4X3Bh
Y2tldF9jbnQgPCBUWF9XQUtFX0RFU0NfQ05UICkKKwkJbmV0aWZfd2FrZV9xdWV1ZShkZXYpOwkv
KiBBY3RpdmUgdXBwZXIgbGF5ZXIsIHNlbmQgYWdhaW4gKi8KK30KKworCisvKgorICoJUmVjZWl2
ZSB0aGUgY29tZSBwYWNrZXQgYW5kIHBhc3MgdG8gdXBwZXIgbGF5ZXIKKyAqLworCitzdGF0aWMg
dm9pZCB1bGk1MjZ4X3J4X3BhY2tldChzdHJ1Y3QgbmV0X2RldmljZSAqZGV2LCBzdHJ1Y3QgdWxp
NTI2eF9ib2FyZF9pbmZvICogZGIpCit7CisJc3RydWN0IHJ4X2Rlc2MgKnJ4cHRyOworCXN0cnVj
dCBza19idWZmICpza2I7CisJaW50IHJ4bGVuOworCXUzMiByZGVzMDsKKwkKKwlyeHB0ciA9IGRi
LT5yeF9yZWFkeV9wdHI7CisKKwl3aGlsZShkYi0+cnhfYXZhaWxfY250KSB7CisJCXJkZXMwID0g
bGUzMl90b19jcHUocnhwdHItPnJkZXMwKTsKKwkJaWYgKHJkZXMwICYgMHg4MDAwMDAwMCkJLyog
cGFja2V0IG93bmVyIGNoZWNrICovCisJCXsKKwkJCWJyZWFrOworCQl9CisKKwkJZGItPnJ4X2F2
YWlsX2NudC0tOworCQlkYi0+aW50ZXJ2YWxfcnhfY250Kys7CisKKwkJcGNpX3VubWFwX3Npbmds
ZShkYi0+cGRldiwgbGUzMl90b19jcHUocnhwdHItPnJkZXMyKSwgUlhfQUxMT0NfU0laRSwgUENJ
X0RNQV9GUk9NREVWSUNFKTsKKwkJaWYgKCAocmRlczAgJiAweDMwMCkgIT0gMHgzMDApIHsKKwkJ
CS8qIEEgcGFja2V0IHdpdGhvdXQgRmlyc3QvTGFzdCBmbGFnICovCisJCQkvKiByZXVzZSB0aGlz
IFNLQiAqLworCQkJVUxJNTI2WF9EQlVHKDAsICJSZXVzZSBTSyBidWZmZXIsIHJkZXMwIiwgcmRl
czApOworCQkJdWxpNTI2eF9yZXVzZV9za2IoZGIsIHJ4cHRyLT5yeF9za2JfcHRyKTsKKwkJfSBl
bHNlIHsKKwkJCS8qIEEgcGFja2V0IHdpdGggRmlyc3QvTGFzdCBmbGFnICovCisJCQlyeGxlbiA9
ICggKHJkZXMwID4+IDE2KSAmIDB4M2ZmZikgLSA0OworCisJCQkvKiBlcnJvciBzdW1tYXJ5IGJp
dCBjaGVjayAqLworCQkJaWYgKHJkZXMwICYgMHg4MDAwKSB7CisJCQkJLyogVGhpcyBpcyBhIGVy
cm9yIHBhY2tldCAqLworCQkJCS8vcHJpbnRrKERSVl9OQU1FICI6IHJkZXMwOiAlbHhcbiIsIHJk
ZXMwKTsKKwkJCQlkYi0+c3RhdHMucnhfZXJyb3JzKys7CisJCQkJaWYgKHJkZXMwICYgMSkKKwkJ
CQkJZGItPnN0YXRzLnJ4X2ZpZm9fZXJyb3JzKys7CisJCQkJaWYgKHJkZXMwICYgMikKKwkJCQkJ
ZGItPnN0YXRzLnJ4X2NyY19lcnJvcnMrKzsKKwkJCQlpZiAocmRlczAgJiAweDgwKQorCQkJCQlk
Yi0+c3RhdHMucnhfbGVuZ3RoX2Vycm9ycysrOworCQkJfQorCisJCQlpZiAoICEocmRlczAgJiAw
eDgwMDApIHx8CisJCQkJKChkYi0+Y3I2X2RhdGEgJiBDUjZfUE0pICYmIChyeGxlbj42KSkgKSB7
CisJCQkJc2tiID0gcnhwdHItPnJ4X3NrYl9wdHI7CisJCQorCQkJCS8qIEdvb2QgcGFja2V0LCBz
ZW5kIHRvIHVwcGVyIGxheWVyICovCisJCQkJLyogU2hvcnN0IHBhY2tldCB1c2VkIG5ldyBTS0Ig
Ki8KKwkJCQlpZiAoIChyeGxlbiA8IFJYX0NPUFlfU0laRSkgJiYKKwkJCQkJKCAoc2tiID0gZGV2
X2FsbG9jX3NrYihyeGxlbiArIDIpICkKKwkJCQkJIT0gTlVMTCkgKSB7CisJCQkJCS8qIHNpemUg
bGVzcyB0aGFuIENPUFlfU0laRSwgYWxsb2NhdGUgYSByeGxlbiBTS0IgKi8KKwkJCQkJc2tiLT5k
ZXYgPSBkZXY7CisJCQkJCXNrYl9yZXNlcnZlKHNrYiwgMik7IC8qIDE2Ynl0ZSBhbGlnbiAqLwor
CQkJCQltZW1jcHkoc2tiX3B1dChza2IsIHJ4bGVuKSwgcnhwdHItPnJ4X3NrYl9wdHItPnRhaWws
IHJ4bGVuKTsKKwkJCQkJdWxpNTI2eF9yZXVzZV9za2IoZGIsIHJ4cHRyLT5yeF9za2JfcHRyKTsK
KwkJCQl9IGVsc2UgeworCQkJCQlza2ItPmRldiA9IGRldjsKKwkJCQkJc2tiX3B1dChza2IsIHJ4
bGVuKTsKKwkJCQl9CisJCQkJc2tiLT5wcm90b2NvbCA9IGV0aF90eXBlX3RyYW5zKHNrYiwgZGV2
KTsKKwkJCQluZXRpZl9yeChza2IpOworCQkJCWRldi0+bGFzdF9yeCA9IGppZmZpZXM7CisJCQkJ
ZGItPnN0YXRzLnJ4X3BhY2tldHMrKzsKKwkJCQlkYi0+c3RhdHMucnhfYnl0ZXMgKz0gcnhsZW47
CisJCQkJCisJCQl9IGVsc2UgeworCQkJCS8qIFJldXNlIFNLQiBidWZmZXIgd2hlbiB0aGUgcGFj
a2V0IGlzIGVycm9yICovCisJCQkJVUxJNTI2WF9EQlVHKDAsICJSZXVzZSBTSyBidWZmZXIsIHJk
ZXMwIiwgcmRlczApOworCQkJCXVsaTUyNnhfcmV1c2Vfc2tiKGRiLCByeHB0ci0+cnhfc2tiX3B0
cik7CisJCQl9CisJCX0KKworCQlyeHB0ciA9IHJ4cHRyLT5uZXh0X3J4X2Rlc2M7CisJfQorCisJ
ZGItPnJ4X3JlYWR5X3B0ciA9IHJ4cHRyOworfQorCisKKy8qCisgKglHZXQgc3RhdGlzdGljcyBm
cm9tIGRyaXZlci4KKyAqLworCitzdGF0aWMgc3RydWN0IG5ldF9kZXZpY2Vfc3RhdHMgKiB1bGk1
MjZ4X2dldF9zdGF0cyhzdHJ1Y3QgbmV0X2RldmljZSAqZGV2KQoreworCXN0cnVjdCB1bGk1MjZ4
X2JvYXJkX2luZm8gKmRiID0gbmV0ZGV2X3ByaXYoZGV2KTsKKworCVVMSTUyNlhfREJVRygwLCAi
dWxpNTI2eF9nZXRfc3RhdHMiLCAwKTsKKwlyZXR1cm4gJmRiLT5zdGF0czsKK30KKworCisvKgor
ICogU2V0IFVMSTUyNlggbXVsdGljYXN0IGFkZHJlc3MKKyAqLworCitzdGF0aWMgdm9pZCB1bGk1
MjZ4X3NldF9maWx0ZXJfbW9kZShzdHJ1Y3QgbmV0X2RldmljZSAqIGRldikKK3sKKwlzdHJ1Y3Qg
dWxpNTI2eF9ib2FyZF9pbmZvICpkYiA9IGRldi0+cHJpdjsKKwl1bnNpZ25lZCBsb25nIGZsYWdz
OworCisJVUxJNTI2WF9EQlVHKDAsICJ1bGk1MjZ4X3NldF9maWx0ZXJfbW9kZSgpIiwgMCk7CisJ
c3Bpbl9sb2NrX2lycXNhdmUoJmRiLT5sb2NrLCBmbGFncyk7CisKKwlpZiAoZGV2LT5mbGFncyAm
IElGRl9QUk9NSVNDKSB7CisJCVVMSTUyNlhfREJVRygwLCAiRW5hYmxlIFBST00gTW9kZSIsIDAp
OworCQlkYi0+Y3I2X2RhdGEgfD0gQ1I2X1BNIHwgQ1I2X1BCRjsKKwkJdXBkYXRlX2NyNihkYi0+
Y3I2X2RhdGEsIGRiLT5pb2FkZHIpOworCQlzcGluX3VubG9ja19pcnFyZXN0b3JlKCZkYi0+bG9j
aywgZmxhZ3MpOworCQlyZXR1cm47CisJfQorCisJaWYgKGRldi0+ZmxhZ3MgJiBJRkZfQUxMTVVM
VEkgfHwgZGV2LT5tY19jb3VudCA+IFVMSTUyNjFfTUFYX01VTFRJQ0FTVCkgeworCQlVTEk1MjZY
X0RCVUcoMCwgIlBhc3MgYWxsIG11bHRpY2FzdCBhZGRyZXNzIiwgZGV2LT5tY19jb3VudCk7CisJ
CWRiLT5jcjZfZGF0YSAmPSB+KENSNl9QTSB8IENSNl9QQkYpOworCQlkYi0+Y3I2X2RhdGEgfD0g
Q1I2X1BBTTsKKwkJc3Bpbl91bmxvY2tfaXJxcmVzdG9yZSgmZGItPmxvY2ssIGZsYWdzKTsKKwkJ
cmV0dXJuOworCX0KKworCVVMSTUyNlhfREJVRygwLCAiU2V0IG11bHRpY2FzdCBhZGRyZXNzIiwg
ZGV2LT5tY19jb3VudCk7CisJc2VuZF9maWx0ZXJfZnJhbWUoZGV2LCBkZXYtPm1jX2NvdW50KTsg
CS8qIE01MjYxL001MjYzICovCisJc3Bpbl91bmxvY2tfaXJxcmVzdG9yZSgmZGItPmxvY2ssIGZs
YWdzKTsKK30KKworc3RhdGljIHZvaWQKK1VMaV9ldGh0b29sX2dzZXQoc3RydWN0IHVsaTUyNnhf
Ym9hcmRfaW5mbyAqZGIsIHN0cnVjdCBldGh0b29sX2NtZCAqZWNtZCkKK3sKKwkvL3N0cnVjdCBl
MTAwMF9odyAqaHcgPSAmYWRhcHRlci0+aHc7CisKKwl7CisKKwkJZWNtZC0+c3VwcG9ydGVkID0g
KFNVUFBPUlRFRF8xMGJhc2VUX0hhbGYgfAorCQkgICAgICAgICAgICAgICAgICAgU1VQUE9SVEVE
XzEwYmFzZVRfRnVsbCB8CisJCSAgICAgICAgICAgICAgICAgICBTVVBQT1JURURfMTAwYmFzZVRf
SGFsZiB8CisJCSAgICAgICAgICAgICAgICAgICBTVVBQT1JURURfMTAwYmFzZVRfRnVsbCB8CisJ
CSAgICAgICAgICAgICAgICAgICBTVVBQT1JURURfQXV0b25lZyB8CisJCSAgICAgICAgICAgICAg
ICAgICBTVVBQT1JURURfTUlJKTsKKwkJCisJCWVjbWQtPmFkdmVydGlzaW5nID0gKEFEVkVSVElT
RURfMTBiYXNlVF9IYWxmIHwKKwkJICAgICAgICAgICAgICAgICAgIEFEVkVSVElTRURfMTBiYXNl
VF9GdWxsIHwKKwkJICAgICAgICAgICAgICAgICAgIEFEVkVSVElTRURfMTAwYmFzZVRfSGFsZiB8
CisJCSAgICAgICAgICAgICAgICAgICBBRFZFUlRJU0VEXzEwMGJhc2VUX0Z1bGwgfAorCQkgICAg
ICAgICAgICAgICAgICAgQURWRVJUSVNFRF9BdXRvbmVnIHwKKwkJICAgICAgICAgICAgICAgICAg
IEFEVkVSVElTRURfTUlJKTsKKworCisJCWVjbWQtPnBvcnQgPSBQT1JUX01JSTsKKwkJZWNtZC0+
cGh5X2FkZHJlc3MgPSBkYi0+cGh5X2FkZHI7CisKKwkJZWNtZC0+dHJhbnNjZWl2ZXIgPSBYQ1ZS
X0VYVEVSTkFMOworCQkKKworCX0KKworCQorCWVjbWQtPnNwZWVkID0gMTA7CisJZWNtZC0+ZHVw
bGV4ID0gRFVQTEVYX0hBTEY7CisJCisJaWYoZGItPm9wX21vZGU9PVVMSTUyNlhfMTAwTUhGIHx8
IGRiLT5vcF9tb2RlPT1VTEk1MjZYXzEwME1GRCkKKwl7CisJCWVjbWQtPnNwZWVkID0gMTAwOyAg
ICAgICAgICAgICAgIAorCX0KKwlpZihkYi0+b3BfbW9kZT09VUxJNTI2WF8xME1GRCB8fCBkYi0+
b3BfbW9kZT09VUxJNTI2WF8xMDBNRkQpCisJeworCQllY21kLT5kdXBsZXggPSBEVVBMRVhfRlVM
TDsKKwl9CisJaWYoZGItPmxpbmtfZmFpbGVkKQorCXsKKwkJZWNtZC0+c3BlZWQgPSAtMTsKKwkJ
ZWNtZC0+ZHVwbGV4ID0gLTE7CQorCX0KKwkKKwlpZiAoZGItPm1lZGlhX21vZGUgJiBVTEk1MjZY
X0FVVE8pCisJewkKKwkJZWNtZC0+YXV0b25lZyA9IEFVVE9ORUdfRU5BQkxFOworCX0KKwkKKwkK
K30KKworc3RhdGljIHZvaWQgbmV0ZGV2X2dldF9kcnZpbmZvKHN0cnVjdCBuZXRfZGV2aWNlICpk
ZXYsCisJCQkgICAgICAgc3RydWN0IGV0aHRvb2xfZHJ2aW5mbyAqaW5mbykKK3sKKwlzdHJ1Y3Qg
dWxpNTI2eF9ib2FyZF9pbmZvICpucCA9IG5ldGRldl9wcml2KGRldik7CisKKwlzdHJjcHkoaW5m
by0+ZHJpdmVyLCBEUlZfTkFNRSk7CisJc3RyY3B5KGluZm8tPnZlcnNpb24sIERSVl9WRVJTSU9O
KTsKKwlpZiAobnAtPnBkZXYpCisJCXN0cmNweShpbmZvLT5idXNfaW5mbywgcGNpX25hbWUobnAt
PnBkZXYpKTsKKwllbHNlCisJCXNwcmludGYoaW5mby0+YnVzX2luZm8sICJFSVNBIDB4JWx4ICVk
IiwKKwkJCWRldi0+YmFzZV9hZGRyLCBkZXYtPmlycSk7Cit9CisKK3N0YXRpYyBpbnQgbmV0ZGV2
X2dldF9zZXR0aW5ncyhzdHJ1Y3QgbmV0X2RldmljZSAqZGV2LCBzdHJ1Y3QgZXRodG9vbF9jbWQg
KmNtZCkgeworCXN0cnVjdCB1bGk1MjZ4X2JvYXJkX2luZm8gKm5wID0gbmV0ZGV2X3ByaXYoZGV2
KTsKKwkKKwlVTGlfZXRodG9vbF9nc2V0KG5wLCBjbWQpOworCQorCXJldHVybiAwOworfQorCitz
dGF0aWMgdTMyIG5ldGRldl9nZXRfbGluayhzdHJ1Y3QgbmV0X2RldmljZSAqZGV2KSB7CisJc3Ry
dWN0IHVsaTUyNnhfYm9hcmRfaW5mbyAqbnAgPSBuZXRkZXZfcHJpdihkZXYpOworCQkKKwlpZihu
cC0+bGlua19mYWlsZWQpCisJCXJldHVybiAwOworCWVsc2UKKwkJcmV0dXJuIDE7Cit9CisKK3N0
YXRpYyB2b2lkIHVsaTUyNnhfZ2V0X3dvbChzdHJ1Y3QgbmV0X2RldmljZSAqZGV2LCBzdHJ1Y3Qg
ZXRodG9vbF93b2xpbmZvICp3b2wpCit7CisJd29sLT5zdXBwb3J0ZWQgPSBXQUtFX1BIWSB8IFdB
S0VfTUFHSUM7CisJd29sLT53b2xvcHRzID0gMDsKK30KKworc3RhdGljIHN0cnVjdCBldGh0b29s
X29wcyBuZXRkZXZfZXRodG9vbF9vcHMgPSB7CisJLmdldF9kcnZpbmZvCQk9IG5ldGRldl9nZXRf
ZHJ2aW5mbywKKwkuZ2V0X3NldHRpbmdzCQk9IG5ldGRldl9nZXRfc2V0dGluZ3MsCisJLmdldF9s
aW5rCQk9IG5ldGRldl9nZXRfbGluaywKKwkuZ2V0X3dvbAkJPSB1bGk1MjZ4X2dldF93b2wsCit9
OworCisvKgorICoJQSBwZXJpb2RpYyB0aW1lciByb3V0aW5lCisgKglEeW5hbWljIG1lZGlhIHNl
bnNlLCBhbGxvY2F0ZSBSeCBidWZmZXIuLi4KKyAqLworCitzdGF0aWMgdm9pZCB1bGk1MjZ4X3Rp
bWVyKHVuc2lnbmVkIGxvbmcgZGF0YSkKK3sKKwl1MzIgdG1wX2NyODsKKwl1bnNpZ25lZCBjaGFy
IHRtcF9jcjEyPTA7CisJc3RydWN0IG5ldF9kZXZpY2UgKmRldiA9IChzdHJ1Y3QgbmV0X2Rldmlj
ZSAqKSBkYXRhOworCXN0cnVjdCB1bGk1MjZ4X2JvYXJkX2luZm8gKmRiID0gbmV0ZGV2X3ByaXYo
ZGV2KTsKKyAJdW5zaWduZWQgbG9uZyBmbGFnczsKKwl1OCBUbXBTcGVlZD0xMDsKKwkKKwkvL1VM
STUyNlhfREJVRygwLCAidWxpNTI2eF90aW1lcigpIiwgMCk7CisJc3Bpbl9sb2NrX2lycXNhdmUo
JmRiLT5sb2NrLCBmbGFncyk7CisKKwkKKwkvKiBEeW5hbWljIHJlc2V0IFVMSTUyNlggOiBzeXN0
ZW0gZXJyb3Igb3IgdHJhbnNtaXQgdGltZS1vdXQgKi8KKwl0bXBfY3I4ID0gaW5sKGRiLT5pb2Fk
ZHIgKyBEQ1I4KTsKKwlpZiAoIChkYi0+aW50ZXJ2YWxfcnhfY250PT0wKSAmJiAodG1wX2NyOCkg
KSB7CisJCWRiLT5yZXNldF9jcjgrKzsKKwkJZGItPndhaXRfcmVzZXQgPSAxOworCX0KKwlkYi0+
aW50ZXJ2YWxfcnhfY250ID0gMDsKKworCS8qIFRYIHBvbGxpbmcga2ljayBtb25pdG9yICovCisJ
aWYgKCBkYi0+dHhfcGFja2V0X2NudCAmJgorCSAgICAgdGltZV9hZnRlcihqaWZmaWVzLCBkZXYt
PnRyYW5zX3N0YXJ0ICsgVUxJNTI2WF9UWF9LSUNLKSApIHsKKwkJb3V0bCgweDEsIGRldi0+YmFz
ZV9hZGRyICsgRENSMSk7ICAgLy8gVHggcG9sbGluZyBhZ2FpbiAKKworCQkvLyBUWCBUaW1lb3V0
IAorCQlpZiAoIHRpbWVfYWZ0ZXIoamlmZmllcywgZGV2LT50cmFuc19zdGFydCArIFVMSTUyNlhf
VFhfVElNRU9VVCkgKSB7CisJCQlkYi0+cmVzZXRfVFh0aW1lb3V0Kys7CisJCQlkYi0+d2FpdF9y
ZXNldCA9IDE7CisJCQlwcmludGsoICIlczogVHggdGltZW91dCAtIHJlc2V0dGluZ1xuIiwKKwkJ
CSAgICAgICBkZXYtPm5hbWUpOworCQl9CisJfQorCisJaWYgKGRiLT53YWl0X3Jlc2V0KSB7CisJ
CVVMSTUyNlhfREJVRygwLCAiRHluYW1pYyBSZXNldCBkZXZpY2UiLCBkYi0+dHhfcGFja2V0X2Nu
dCk7CisJCWRiLT5yZXNldF9jb3VudCsrOworCQl1bGk1MjZ4X2R5bmFtaWNfcmVzZXQoZGV2KTsK
KwkJZGItPnRpbWVyLmV4cGlyZXMgPSBVTEk1MjZYX1RJTUVSX1dVVDsKKwkJYWRkX3RpbWVyKCZk
Yi0+dGltZXIpOworCQlzcGluX3VubG9ja19pcnFyZXN0b3JlKCZkYi0+bG9jaywgZmxhZ3MpOwor
CQlyZXR1cm47CisJfQorCisJLyogTGluayBzdGF0dXMgY2hlY2ssIER5bmFtaWMgbWVkaWEgdHlw
ZSBjaGFuZ2UgKi8KKwlpZigocGh5X3JlYWQoZGItPmlvYWRkciwgZGItPnBoeV9hZGRyLCA1LCBk
Yi0+Y2hpcF9pZCkgJiAweDAxZTApIT0wKQorCQl0bXBfY3IxMiA9IDM7CisKKwlpZiAoICEodG1w
X2NyMTIgJiAweDMpICYmICFkYi0+bGlua19mYWlsZWQgKSB7CisJCS8qIExpbmsgRmFpbGVkICov
CisJCVVMSTUyNlhfREJVRygwLCAiTGluayBGYWlsZWQiLCB0bXBfY3IxMik7CisJCW5ldGlmX2Nh
cnJpZXJfb2ZmKGRldik7CisJCXByaW50ayhLRVJOX0lORk8gInVsaTUyNng6ICVzIE5JQyBMaW5r
IGlzIERvd25cbiIsZGV2LT5uYW1lKTsKKwkJZGItPmxpbmtfZmFpbGVkID0gMTsKKworCQkvKiBG
b3IgRm9yY2UgMTAvMTAwTSBIYWxmL0Z1bGwgbW9kZTogRW5hYmxlIEF1dG8tTmVnbyBtb2RlICov
CisJCS8qIEFVVE8gZG9uJ3QgbmVlZCAqLworCQlpZiAoICEoZGItPm1lZGlhX21vZGUgJiAweDgp
ICkKKwkJCXBoeV93cml0ZShkYi0+aW9hZGRyLCBkYi0+cGh5X2FkZHIsIDAsIDB4MTAwMCwgZGIt
PmNoaXBfaWQpOworCisJCS8qIEFVVE8gbW9kZSwgaWYgSU5UIHBoeXhjZXIgbGluayBmYWlsZWQs
IHNlbGVjdCBFWFQgZGV2aWNlICovCisJCWlmIChkYi0+bWVkaWFfbW9kZSAmIFVMSTUyNlhfQVVU
TykgeworCQkJZGItPmNyNl9kYXRhJj1+MHgwMDAwMDIwMDsJLyogYml0OT0wLCBIRCBtb2RlICov
CisJCQl1cGRhdGVfY3I2KGRiLT5jcjZfZGF0YSwgZGItPmlvYWRkcik7CisJCX0KKwl9IGVsc2UK
KwkJaWYgKCh0bXBfY3IxMiAmIDB4MykgJiYgZGItPmxpbmtfZmFpbGVkKSB7CisJCQlVTEk1MjZY
X0RCVUcoMCwgIkxpbmsgbGluayBPSyIsIHRtcF9jcjEyKTsKKwkJCWRiLT5saW5rX2ZhaWxlZCA9
IDA7CisKKwkJCS8qIEF1dG8gU2Vuc2UgU3BlZWQgKi8KKwkJCWlmICggKGRiLT5tZWRpYV9tb2Rl
ICYgVUxJNTI2WF9BVVRPKSAmJgorCQkJCXVsaTUyNnhfc2Vuc2Vfc3BlZWQoZGIpICkKKwkJCQlk
Yi0+bGlua19mYWlsZWQgPSAxOworCQkJdWxpNTI2eF9wcm9jZXNzX21vZGUoZGIpOworCQkJCisJ
CQlpZihkYi0+bGlua19mYWlsZWQ9PTApCisJCQl7CisJCQkJaWYoZGItPm9wX21vZGU9PVVMSTUy
NlhfMTAwTUhGIHx8IGRiLT5vcF9tb2RlPT1VTEk1MjZYXzEwME1GRCkKKwkJCQl7CisJCQkJCVRt
cFNwZWVkID0gMTAwOworCQkJCX0KKwkJCQlpZihkYi0+b3BfbW9kZT09VUxJNTI2WF8xME1GRCB8
fCBkYi0+b3BfbW9kZT09VUxJNTI2WF8xMDBNRkQpCisJCQkJeworCQkJCQlwcmludGsoS0VSTl9J
TkZPICJ1bGk1MjZ4OiAlcyBOSUMgTGluayBpcyBVcCAlZCBNYnBzIEZ1bGwgZHVwbGV4XG4iLGRl
di0+bmFtZSxUbXBTcGVlZCk7CisJCQkJfQorCQkJCWVsc2UKKwkJCQl7CisJCQkJCXByaW50ayhL
RVJOX0lORk8gInVsaTUyNng6ICVzIE5JQyBMaW5rIGlzIFVwICVkIE1icHMgSGFsZiBkdXBsZXhc
biIsZGV2LT5uYW1lLFRtcFNwZWVkKTsKKwkJCQl9CisJCQkJbmV0aWZfY2Fycmllcl9vbihkZXYp
OworCQkJfQorCQkJLyogU0hPV19NRURJQV9UWVBFKGRiLT5vcF9tb2RlKTsgKi8KKwkJfQorCQll
bHNlIGlmKCEodG1wX2NyMTIgJiAweDMpICYmIGRiLT5saW5rX2ZhaWxlZCkKKwkJeworCQkJaWYo
ZGItPmluaXQ9PTEpCisJCQl7CisJCQkJcHJpbnRrKEtFUk5fSU5GTyAidWxpNTI2eDogJXMgTklD
IExpbmsgaXMgRG93blxuIixkZXYtPm5hbWUpOworCQkJCW5ldGlmX2NhcnJpZXJfb2ZmKGRldik7
CisJCQl9CisJCX0KKwkJZGItPmluaXQ9MDsKKworCS8qIFRpbWVyIGFjdGl2ZSBhZ2FpbiAqLwor
CWRiLT50aW1lci5leHBpcmVzID0gVUxJNTI2WF9USU1FUl9XVVQ7CisJYWRkX3RpbWVyKCZkYi0+
dGltZXIpOworCXNwaW5fdW5sb2NrX2lycXJlc3RvcmUoJmRiLT5sb2NrLCBmbGFncyk7Cit9CisK
KworLyoKKyAqCUR5bmFtaWMgcmVzZXQgdGhlIFVMSTUyNlggYm9hcmQKKyAqCVN0b3AgVUxJNTI2
WCBib2FyZAorICoJRnJlZSBUeC9SeCBhbGxvY2F0ZWQgbWVtb3J5CisgKglSZXNldCBVTEk1MjZY
IGJvYXJkCisgKglSZS1pbml0aWFsaXplIFVMSTUyNlggYm9hcmQKKyAqLworCitzdGF0aWMgdm9p
ZCB1bGk1MjZ4X2R5bmFtaWNfcmVzZXQoc3RydWN0IG5ldF9kZXZpY2UgKmRldikKK3sKKwlzdHJ1
Y3QgdWxpNTI2eF9ib2FyZF9pbmZvICpkYiA9IG5ldGRldl9wcml2KGRldik7CisKKwlVTEk1MjZY
X0RCVUcoMCwgInVsaTUyNnhfZHluYW1pY19yZXNldCgpIiwgMCk7CisKKwkvKiBTb3B0IE1BQyBj
b250cm9sbGVyICovCisJZGItPmNyNl9kYXRhICY9IH4oQ1I2X1JYU0MgfCBDUjZfVFhTQyk7CS8q
IERpc2FibGUgVHgvUnggKi8KKwl1cGRhdGVfY3I2KGRiLT5jcjZfZGF0YSwgZGV2LT5iYXNlX2Fk
ZHIpOworCW91dGwoMCwgZGV2LT5iYXNlX2FkZHIgKyBEQ1I3KTsJCS8qIERpc2FibGUgSW50ZXJy
dXB0ICovCisJb3V0bChpbmwoZGV2LT5iYXNlX2FkZHIgKyBEQ1I1KSwgZGV2LT5iYXNlX2FkZHIg
KyBEQ1I1KTsKKworCS8qIERpc2FibGUgdXBwZXIgbGF5ZXIgaW50ZXJmYWNlICovCisJbmV0aWZf
c3RvcF9xdWV1ZShkZXYpOworCisJLyogRnJlZSBSeCBBbGxvY2F0ZSBidWZmZXIgKi8KKwl1bGk1
MjZ4X2ZyZWVfcnhidWZmZXIoZGIpOworCisJLyogc3lzdGVtIHZhcmlhYmxlIGluaXQgKi8KKwlk
Yi0+dHhfcGFja2V0X2NudCA9IDA7CisJZGItPnJ4X2F2YWlsX2NudCA9IDA7CisJZGItPmxpbmtf
ZmFpbGVkID0gMTsKKwlkYi0+aW5pdD0xOworCWRiLT53YWl0X3Jlc2V0ID0gMDsKKworCS8qIFJl
LWluaXRpYWxpemUgVUxJNTI2WCBib2FyZCAqLworCXVsaTUyNnhfaW5pdChkZXYpOworCisJLyog
UmVzdGFydCB1cHBlciBsYXllciBpbnRlcmZhY2UgKi8KKwluZXRpZl93YWtlX3F1ZXVlKGRldik7
Cit9CisKKworLyoKKyAqCWZyZWUgYWxsIGFsbG9jYXRlZCByeCBidWZmZXIKKyAqLworCitzdGF0
aWMgdm9pZCB1bGk1MjZ4X2ZyZWVfcnhidWZmZXIoc3RydWN0IHVsaTUyNnhfYm9hcmRfaW5mbyAq
IGRiKQoreworCVVMSTUyNlhfREJVRygwLCAidWxpNTI2eF9mcmVlX3J4YnVmZmVyKCkiLCAwKTsK
KworCS8qIGZyZWUgYWxsb2NhdGVkIHJ4IGJ1ZmZlciAqLworCXdoaWxlIChkYi0+cnhfYXZhaWxf
Y250KSB7CisJCWRldl9rZnJlZV9za2IoZGItPnJ4X3JlYWR5X3B0ci0+cnhfc2tiX3B0cik7CisJ
CWRiLT5yeF9yZWFkeV9wdHIgPSBkYi0+cnhfcmVhZHlfcHRyLT5uZXh0X3J4X2Rlc2M7CisJCWRi
LT5yeF9hdmFpbF9jbnQtLTsKKwl9Cit9CisKKworLyoKKyAqCVJldXNlIHRoZSBTSyBidWZmZXIK
KyAqLworCitzdGF0aWMgdm9pZCB1bGk1MjZ4X3JldXNlX3NrYihzdHJ1Y3QgdWxpNTI2eF9ib2Fy
ZF9pbmZvICpkYiwgc3RydWN0IHNrX2J1ZmYgKiBza2IpCit7CisJc3RydWN0IHJ4X2Rlc2MgKnJ4
cHRyID0gZGItPnJ4X2luc2VydF9wdHI7CisKKwlpZiAoIShyeHB0ci0+cmRlczAgJiBjcHVfdG9f
bGUzMigweDgwMDAwMDAwKSkpIHsKKwkJcnhwdHItPnJ4X3NrYl9wdHIgPSBza2I7CisJCXJ4cHRy
LT5yZGVzMiA9IGNwdV90b19sZTMyKCBwY2lfbWFwX3NpbmdsZShkYi0+cGRldiwgc2tiLT50YWls
LCBSWF9BTExPQ19TSVpFLCBQQ0lfRE1BX0ZST01ERVZJQ0UpICk7CisJCXdtYigpOworCQlyeHB0
ci0+cmRlczAgPSBjcHVfdG9fbGUzMigweDgwMDAwMDAwKTsKKwkJZGItPnJ4X2F2YWlsX2NudCsr
OworCQlkYi0+cnhfaW5zZXJ0X3B0ciA9IHJ4cHRyLT5uZXh0X3J4X2Rlc2M7CisJfSBlbHNlCisJ
CVVMSTUyNlhfREJVRygwLCAiU0sgQnVmZmVyIHJldXNlIG1ldGhvZCBlcnJvciIsIGRiLT5yeF9h
dmFpbF9jbnQpOworfQorCisKKy8qCisgKglJbml0aWFsaXplIHRyYW5zbWl0L1JlY2VpdmUgZGVz
Y3JpcHRvcgorICoJVXNpbmcgQ2hhaW4gc3RydWN0dXJlLCBhbmQgYWxsb2NhdGUgVHgvUnggYnVm
ZmVyCisgKi8KKworc3RhdGljIHZvaWQgdWxpNTI2eF9kZXNjcmlwdG9yX2luaXQoc3RydWN0IHVs
aTUyNnhfYm9hcmRfaW5mbyAqZGIsIHVuc2lnbmVkIGxvbmcgaW9hZGRyKQoreworCXN0cnVjdCB0
eF9kZXNjICp0bXBfdHg7CisJc3RydWN0IHJ4X2Rlc2MgKnRtcF9yeDsKKwl1bnNpZ25lZCBjaGFy
ICp0bXBfYnVmOworCWRtYV9hZGRyX3QgdG1wX3R4X2RtYSwgdG1wX3J4X2RtYTsKKwlkbWFfYWRk
cl90IHRtcF9idWZfZG1hOworCWludCBpOworCisJVUxJNTI2WF9EQlVHKDAsICJ1bGk1MjZ4X2Rl
c2NyaXB0b3JfaW5pdCgpIiwgMCk7CisKKwkvKiB0eCBkZXNjcmlwdG9yIHN0YXJ0IHBvaW50ZXIg
Ki8KKwlkYi0+dHhfaW5zZXJ0X3B0ciA9IGRiLT5maXJzdF90eF9kZXNjOworCWRiLT50eF9yZW1v
dmVfcHRyID0gZGItPmZpcnN0X3R4X2Rlc2M7CisJb3V0bChkYi0+Zmlyc3RfdHhfZGVzY19kbWEs
IGlvYWRkciArIERDUjQpOyAgICAgLyogVFggREVTQyBhZGRyZXNzICovCisKKwkvKiByeCBkZXNj
cmlwdG9yIHN0YXJ0IHBvaW50ZXIgKi8KKwlkYi0+Zmlyc3RfcnhfZGVzYyA9ICh2b2lkICopZGIt
PmZpcnN0X3R4X2Rlc2MgKyBzaXplb2Yoc3RydWN0IHR4X2Rlc2MpICogVFhfREVTQ19DTlQ7CisJ
ZGItPmZpcnN0X3J4X2Rlc2NfZG1hID0gIGRiLT5maXJzdF90eF9kZXNjX2RtYSArIHNpemVvZihz
dHJ1Y3QgdHhfZGVzYykgKiBUWF9ERVNDX0NOVDsKKwlkYi0+cnhfaW5zZXJ0X3B0ciA9IGRiLT5m
aXJzdF9yeF9kZXNjOworCWRiLT5yeF9yZWFkeV9wdHIgPSBkYi0+Zmlyc3RfcnhfZGVzYzsKKwlv
dXRsKGRiLT5maXJzdF9yeF9kZXNjX2RtYSwgaW9hZGRyICsgRENSMyk7CS8qIFJYIERFU0MgYWRk
cmVzcyAqLworCisJLyogSW5pdCBUcmFuc21pdCBjaGFpbiAqLworCXRtcF9idWYgPSBkYi0+YnVm
X3Bvb2xfc3RhcnQ7CisJdG1wX2J1Zl9kbWEgPSBkYi0+YnVmX3Bvb2xfZG1hX3N0YXJ0OworCXRt
cF90eF9kbWEgPSBkYi0+Zmlyc3RfdHhfZGVzY19kbWE7CisJZm9yICh0bXBfdHggPSBkYi0+Zmly
c3RfdHhfZGVzYywgaSA9IDA7IGkgPCBUWF9ERVNDX0NOVDsgaSsrLCB0bXBfdHgrKykgeworCQl0
bXBfdHgtPnR4X2J1Zl9wdHIgPSB0bXBfYnVmOworCQl0bXBfdHgtPnRkZXMwID0gY3B1X3RvX2xl
MzIoMCk7CisJCXRtcF90eC0+dGRlczEgPSBjcHVfdG9fbGUzMigweDgxMDAwMDAwKTsJLyogSUMs
IGNoYWluICovCisJCXRtcF90eC0+dGRlczIgPSBjcHVfdG9fbGUzMih0bXBfYnVmX2RtYSk7CisJ
CXRtcF90eF9kbWEgKz0gc2l6ZW9mKHN0cnVjdCB0eF9kZXNjKTsKKwkJdG1wX3R4LT50ZGVzMyA9
IGNwdV90b19sZTMyKHRtcF90eF9kbWEpOworCQl0bXBfdHgtPm5leHRfdHhfZGVzYyA9IHRtcF90
eCArIDE7CisJCXRtcF9idWYgPSB0bXBfYnVmICsgVFhfQlVGX0FMTE9DOworCQl0bXBfYnVmX2Rt
YSA9IHRtcF9idWZfZG1hICsgVFhfQlVGX0FMTE9DOworCX0KKwkoLS10bXBfdHgpLT50ZGVzMyA9
IGNwdV90b19sZTMyKGRiLT5maXJzdF90eF9kZXNjX2RtYSk7CisJdG1wX3R4LT5uZXh0X3R4X2Rl
c2MgPSBkYi0+Zmlyc3RfdHhfZGVzYzsKKworCSAvKiBJbml0IFJlY2VpdmUgZGVzY3JpcHRvciBj
aGFpbiAqLworCXRtcF9yeF9kbWE9ZGItPmZpcnN0X3J4X2Rlc2NfZG1hOworCWZvciAodG1wX3J4
ID0gZGItPmZpcnN0X3J4X2Rlc2MsIGkgPSAwOyBpIDwgUlhfREVTQ19DTlQ7IGkrKywgdG1wX3J4
KyspIHsKKwkJdG1wX3J4LT5yZGVzMCA9IGNwdV90b19sZTMyKDApOworCQl0bXBfcngtPnJkZXMx
ID0gY3B1X3RvX2xlMzIoMHgwMTAwMDYwMCk7CisJCXRtcF9yeF9kbWEgKz0gc2l6ZW9mKHN0cnVj
dCByeF9kZXNjKTsKKwkJdG1wX3J4LT5yZGVzMyA9IGNwdV90b19sZTMyKHRtcF9yeF9kbWEpOwor
CQl0bXBfcngtPm5leHRfcnhfZGVzYyA9IHRtcF9yeCArIDE7CisJfQorCSgtLXRtcF9yeCktPnJk
ZXMzID0gY3B1X3RvX2xlMzIoZGItPmZpcnN0X3J4X2Rlc2NfZG1hKTsKKwl0bXBfcngtPm5leHRf
cnhfZGVzYyA9IGRiLT5maXJzdF9yeF9kZXNjOworCisJLyogcHJlLWFsbG9jYXRlIFJ4IGJ1ZmZl
ciAqLworCWFsbG9jYXRlX3J4X2J1ZmZlcihkYik7Cit9CisKKworLyoKKyAqCVVwZGF0ZSBDUjYg
dmFsdWUKKyAqCUZpcnN0bHkgc3RvcCBVTEk1MjZYLCB0aGVuIHdyaXR0ZW4gdmFsdWUgYW5kIHN0
YXJ0CisgKi8KKworc3RhdGljIHZvaWQgdXBkYXRlX2NyNih1MzIgY3I2X2RhdGEsIHVuc2lnbmVk
IGxvbmcgaW9hZGRyKQoreworCisJb3V0bChjcjZfZGF0YSwgaW9hZGRyICsgRENSNik7CisJdWRl
bGF5KDUpOworfQorCisKKy8qCisgKglTZW5kIGEgc2V0dXAgZnJhbWUgZm9yIE01MjYxL001MjYz
CisgKglUaGlzIHNldHVwIGZyYW1lIGluaXRpYWxpemUgVUxJNTI2WCBhZGRyZXNzIGZpbHRlciBt
b2RlCisgKi8KKworc3RhdGljIHZvaWQgc2VuZF9maWx0ZXJfZnJhbWUoc3RydWN0IG5ldF9kZXZp
Y2UgKmRldiwgaW50IG1jX2NudCkKK3sKKwlzdHJ1Y3QgdWxpNTI2eF9ib2FyZF9pbmZvICpkYiA9
IG5ldGRldl9wcml2KGRldik7CisJc3RydWN0IGRldl9tY19saXN0ICptY3B0cjsKKwlzdHJ1Y3Qg
dHhfZGVzYyAqdHhwdHI7CisJdTE2ICogYWRkcnB0cjsKKwl1MzIgKiBzdXB0cjsKKwlpbnQgaTsK
KworCVVMSTUyNlhfREJVRygwLCAic2VuZF9maWx0ZXJfZnJhbWUoKSIsIDApOworCisJdHhwdHIg
PSBkYi0+dHhfaW5zZXJ0X3B0cjsKKwlzdXB0ciA9ICh1MzIgKikgdHhwdHItPnR4X2J1Zl9wdHI7
CisKKwkvKiBOb2RlIGFkZHJlc3MgKi8KKwlhZGRycHRyID0gKHUxNiAqKSBkZXYtPmRldl9hZGRy
OworCSpzdXB0cisrID0gYWRkcnB0clswXTsKKwkqc3VwdHIrKyA9IGFkZHJwdHJbMV07CisJKnN1
cHRyKysgPSBhZGRycHRyWzJdOworCisJLyogYnJvYWRjYXN0IGFkZHJlc3MgKi8KKwkqc3VwdHIr
KyA9IDB4ZmZmZjsKKwkqc3VwdHIrKyA9IDB4ZmZmZjsKKwkqc3VwdHIrKyA9IDB4ZmZmZjsKKwor
CS8qIGZpdCB0aGUgbXVsdGljYXN0IGFkZHJlc3MgKi8KKwlmb3IgKG1jcHRyID0gZGV2LT5tY19s
aXN0LCBpID0gMDsgaSA8IG1jX2NudDsgaSsrLCBtY3B0ciA9IG1jcHRyLT5uZXh0KSB7CisJCWFk
ZHJwdHIgPSAodTE2ICopIG1jcHRyLT5kbWlfYWRkcjsKKwkJKnN1cHRyKysgPSBhZGRycHRyWzBd
OworCQkqc3VwdHIrKyA9IGFkZHJwdHJbMV07CisJCSpzdXB0cisrID0gYWRkcnB0clsyXTsKKwl9
CisKKwlmb3IgKDsgaTwxNDsgaSsrKSB7CisJCSpzdXB0cisrID0gMHhmZmZmOworCQkqc3VwdHIr
KyA9IDB4ZmZmZjsKKwkJKnN1cHRyKysgPSAweGZmZmY7CisJfQorCisJLyogcHJlcGFyZSB0aGUg
c2V0dXAgZnJhbWUgKi8KKwlkYi0+dHhfaW5zZXJ0X3B0ciA9IHR4cHRyLT5uZXh0X3R4X2Rlc2M7
CisJdHhwdHItPnRkZXMxID0gY3B1X3RvX2xlMzIoMHg4OTAwMDBjMCk7CisKKwkvKiBSZXNvdXJj
ZSBDaGVjayBhbmQgU2VuZCB0aGUgc2V0dXAgcGFja2V0ICovCisJaWYgKGRiLT50eF9wYWNrZXRf
Y250IDwgVFhfREVTQ19DTlQpIHsKKwkJLyogUmVzb3VyY2UgRW1wdHkgKi8KKwkJZGItPnR4X3Bh
Y2tldF9jbnQrKzsKKwkJdHhwdHItPnRkZXMwID0gY3B1X3RvX2xlMzIoMHg4MDAwMDAwMCk7CisJ
CXVwZGF0ZV9jcjYoZGItPmNyNl9kYXRhIHwgMHgyMDAwLCBkZXYtPmJhc2VfYWRkcik7CisJCW91
dGwoMHgxLCBkZXYtPmJhc2VfYWRkciArIERDUjEpOwkvKiBJc3N1ZSBUeCBwb2xsaW5nICovCisJ
CXVwZGF0ZV9jcjYoZGItPmNyNl9kYXRhLCBkZXYtPmJhc2VfYWRkcik7CisJCWRldi0+dHJhbnNf
c3RhcnQgPSBqaWZmaWVzOworCX0gZWxzZQorCQlwcmludGsoS0VSTl9FUlIgRFJWX05BTUUgIjog
Tm8gVHggcmVzb3VyY2UgLSBTZW5kX2ZpbHRlcl9mcmFtZSFcbiIpOworfQorCisKKy8qCisgKglB
bGxvY2F0ZSByeCBidWZmZXIsCisgKglBcyBwb3NzaWJsZSBhcyBhbGxvY2F0ZSBtYXhpdW1uIFJ4
IGJ1ZmZlcgorICovCisKK3N0YXRpYyB2b2lkIGFsbG9jYXRlX3J4X2J1ZmZlcihzdHJ1Y3QgdWxp
NTI2eF9ib2FyZF9pbmZvICpkYikKK3sKKwlzdHJ1Y3QgcnhfZGVzYyAqcnhwdHI7CisJc3RydWN0
IHNrX2J1ZmYgKnNrYjsKKworCXJ4cHRyID0gZGItPnJ4X2luc2VydF9wdHI7CisKKwl3aGlsZShk
Yi0+cnhfYXZhaWxfY250IDwgUlhfREVTQ19DTlQpIHsKKwkJaWYgKCAoIHNrYiA9IGRldl9hbGxv
Y19za2IoUlhfQUxMT0NfU0laRSkgKSA9PSBOVUxMICkKKwkJCWJyZWFrOworCQlyeHB0ci0+cnhf
c2tiX3B0ciA9IHNrYjsgLyogRklYTUUgKD8pICovCisJCXJ4cHRyLT5yZGVzMiA9IGNwdV90b19s
ZTMyKCBwY2lfbWFwX3NpbmdsZShkYi0+cGRldiwgc2tiLT50YWlsLCBSWF9BTExPQ19TSVpFLCBQ
Q0lfRE1BX0ZST01ERVZJQ0UpICk7CisJCXdtYigpOworCQlyeHB0ci0+cmRlczAgPSBjcHVfdG9f
bGUzMigweDgwMDAwMDAwKTsKKwkJcnhwdHIgPSByeHB0ci0+bmV4dF9yeF9kZXNjOworCQlkYi0+
cnhfYXZhaWxfY250Kys7CisJfQorCisJZGItPnJ4X2luc2VydF9wdHIgPSByeHB0cjsKK30KKwor
CisvKgorICoJUmVhZCBvbmUgd29yZCBkYXRhIGZyb20gdGhlIHNlcmlhbCBST00KKyAqLworCitz
dGF0aWMgdTE2IHJlYWRfc3JvbV93b3JkKGxvbmcgaW9hZGRyLCBpbnQgb2Zmc2V0KQoreworCWlu
dCBpOworCXUxNiBzcm9tX2RhdGEgPSAwOworCWxvbmcgY3I5X2lvYWRkciA9IGlvYWRkciArIERD
Ujk7CisKKwlvdXRsKENSOV9TUk9NX1JFQUQsIGNyOV9pb2FkZHIpOworCW91dGwoQ1I5X1NST01f
UkVBRCB8IENSOV9TUkNTLCBjcjlfaW9hZGRyKTsKKworCS8qIFNlbmQgdGhlIFJlYWQgQ29tbWFu
ZCAxMTBiICovCisJU1JPTV9DTEtfV1JJVEUoU1JPTV9EQVRBXzEsIGNyOV9pb2FkZHIpOworCVNS
T01fQ0xLX1dSSVRFKFNST01fREFUQV8xLCBjcjlfaW9hZGRyKTsKKwlTUk9NX0NMS19XUklURShT
Uk9NX0RBVEFfMCwgY3I5X2lvYWRkcik7CisKKwkvKiBTZW5kIHRoZSBvZmZzZXQgKi8KKwlmb3Ig
KGkgPSA1OyBpID49IDA7IGktLSkgeworCQlzcm9tX2RhdGEgPSAob2Zmc2V0ICYgKDEgPDwgaSkp
ID8gU1JPTV9EQVRBXzEgOiBTUk9NX0RBVEFfMDsKKwkJU1JPTV9DTEtfV1JJVEUoc3JvbV9kYXRh
LCBjcjlfaW9hZGRyKTsKKwl9CisKKwlvdXRsKENSOV9TUk9NX1JFQUQgfCBDUjlfU1JDUywgY3I5
X2lvYWRkcik7CisKKwlmb3IgKGkgPSAxNjsgaSA+IDA7IGktLSkgeworCQlvdXRsKENSOV9TUk9N
X1JFQUQgfCBDUjlfU1JDUyB8IENSOV9TUkNMSywgY3I5X2lvYWRkcik7CisJCXVkZWxheSg1KTsK
KwkJc3JvbV9kYXRhID0gKHNyb21fZGF0YSA8PCAxKSB8ICgoaW5sKGNyOV9pb2FkZHIpICYgQ1I5
X0NSRE9VVCkgPyAxIDogMCk7CisJCW91dGwoQ1I5X1NST01fUkVBRCB8IENSOV9TUkNTLCBjcjlf
aW9hZGRyKTsKKwkJdWRlbGF5KDUpOworCX0KKworCW91dGwoQ1I5X1NST01fUkVBRCwgY3I5X2lv
YWRkcik7CisJcmV0dXJuIHNyb21fZGF0YTsKK30KKworCisvKgorICoJQXV0byBzZW5zZSB0aGUg
bWVkaWEgbW9kZQorICovCisKK3N0YXRpYyB1OCB1bGk1MjZ4X3NlbnNlX3NwZWVkKHN0cnVjdCB1
bGk1MjZ4X2JvYXJkX2luZm8gKiBkYikKK3sKKwl1OCBFcnJGbGFnID0gMDsKKwl1MTYgcGh5X21v
ZGU7CisKKwlwaHlfbW9kZSA9IHBoeV9yZWFkKGRiLT5pb2FkZHIsIGRiLT5waHlfYWRkciwgMSwg
ZGItPmNoaXBfaWQpOworCXBoeV9tb2RlID0gcGh5X3JlYWQoZGItPmlvYWRkciwgZGItPnBoeV9h
ZGRyLCAxLCBkYi0+Y2hpcF9pZCk7CisKKwlpZiAoIChwaHlfbW9kZSAmIDB4MjQpID09IDB4MjQg
KSB7CisJCQorCQlwaHlfbW9kZSA9ICgocGh5X3JlYWQoZGItPmlvYWRkciwgZGItPnBoeV9hZGRy
LCA1LCBkYi0+Y2hpcF9pZCkgJiAweDAxZTApPDw3KTsKKwkJaWYocGh5X21vZGUmMHg4MDAwKQor
CQkJcGh5X21vZGUgPSAweDgwMDA7CisJCWVsc2UgaWYocGh5X21vZGUmMHg0MDAwKQorCQkJcGh5
X21vZGUgPSAweDQwMDA7CisJCWVsc2UgaWYocGh5X21vZGUmMHgyMDAwKQorCQkJcGh5X21vZGUg
PSAweDIwMDA7CisJCWVsc2UKKwkJCXBoeV9tb2RlID0gMHgxMDAwOworCQkKKwkJLyogcHJpbnRr
KERSVl9OQU1FICI6IFBoeV9tb2RlICV4ICIscGh5X21vZGUpOyAqLworCQlzd2l0Y2ggKHBoeV9t
b2RlKSB7CisJCWNhc2UgMHgxMDAwOiBkYi0+b3BfbW9kZSA9IFVMSTUyNlhfMTBNSEY7IGJyZWFr
OworCQljYXNlIDB4MjAwMDogZGItPm9wX21vZGUgPSBVTEk1MjZYXzEwTUZEOyBicmVhazsKKwkJ
Y2FzZSAweDQwMDA6IGRiLT5vcF9tb2RlID0gVUxJNTI2WF8xMDBNSEY7IGJyZWFrOworCQljYXNl
IDB4ODAwMDogZGItPm9wX21vZGUgPSBVTEk1MjZYXzEwME1GRDsgYnJlYWs7CisJCWRlZmF1bHQ6
IGRiLT5vcF9tb2RlID0gVUxJNTI2WF8xME1IRjsgRXJyRmxhZyA9IDE7IGJyZWFrOworCQl9CisJ
fSBlbHNlIHsKKwkJZGItPm9wX21vZGUgPSBVTEk1MjZYXzEwTUhGOworCQlVTEk1MjZYX0RCVUco
MCwgIkxpbmsgRmFpbGVkIDoiLCBwaHlfbW9kZSk7CisJCUVyckZsYWcgPSAxOworCX0KKworCXJl
dHVybiBFcnJGbGFnOworfQorCisKKy8qCisgKglTZXQgMTAvMTAwIHBoeXhjZXIgY2FwYWJpbGl0
eQorICoJQVVUTyBtb2RlIDogcGh5eGNlciByZWdpc3RlcjQgaXMgTklDIGNhcGFiaWxpdHkKKyAq
CUZvcmNlIG1vZGU6IHBoeXhjZXIgcmVnaXN0ZXI0IGlzIHRoZSBmb3JjZSBtZWRpYQorICovCisK
K3N0YXRpYyB2b2lkIHVsaTUyNnhfc2V0X3BoeXhjZXIoc3RydWN0IHVsaTUyNnhfYm9hcmRfaW5m
byAqZGIpCit7CisJdTE2IHBoeV9yZWc7CisJCisJLyogUGh5eGNlciBjYXBhYmlsaXR5IHNldHRp
bmcgKi8KKwlwaHlfcmVnID0gcGh5X3JlYWQoZGItPmlvYWRkciwgZGItPnBoeV9hZGRyLCA0LCBk
Yi0+Y2hpcF9pZCkgJiB+MHgwMWUwOworCisJaWYgKGRiLT5tZWRpYV9tb2RlICYgVUxJNTI2WF9B
VVRPKSB7CisJCS8qIEFVVE8gTW9kZSAqLworCQlwaHlfcmVnIHw9IGRiLT5QSFlfcmVnNDsKKwl9
IGVsc2UgeworCQkvKiBGb3JjZSBNb2RlICovCisJCXN3aXRjaChkYi0+bWVkaWFfbW9kZSkgewor
CQljYXNlIFVMSTUyNlhfMTBNSEY6IHBoeV9yZWcgfD0gMHgyMDsgYnJlYWs7CisJCWNhc2UgVUxJ
NTI2WF8xME1GRDogcGh5X3JlZyB8PSAweDQwOyBicmVhazsKKwkJY2FzZSBVTEk1MjZYXzEwME1I
RjogcGh5X3JlZyB8PSAweDgwOyBicmVhazsKKwkJY2FzZSBVTEk1MjZYXzEwME1GRDogcGh5X3Jl
ZyB8PSAweDEwMDsgYnJlYWs7CisJCX0KKwkJCisJfQorCisgIAkvKiBXcml0ZSBuZXcgY2FwYWJp
bGl0eSB0byBQaHl4Y2VyIFJlZzQgKi8KKwlpZiAoICEocGh5X3JlZyAmIDB4MDFlMCkpIHsKKwkJ
cGh5X3JlZ3w9ZGItPlBIWV9yZWc0OworCQlkYi0+bWVkaWFfbW9kZXw9VUxJNTI2WF9BVVRPOwor
CX0KKwlwaHlfd3JpdGUoZGItPmlvYWRkciwgZGItPnBoeV9hZGRyLCA0LCBwaHlfcmVnLCBkYi0+
Y2hpcF9pZCk7CisKKyAJLyogUmVzdGFydCBBdXRvLU5lZ290aWF0aW9uICovCisJcGh5X3dyaXRl
KGRiLT5pb2FkZHIsIGRiLT5waHlfYWRkciwgMCwgMHgxMjAwLCBkYi0+Y2hpcF9pZCk7CisJdWRl
bGF5KDUwKTsKK30KKworCisvKgorICoJUHJvY2VzcyBvcC1tb2RlCisgCUFVVE8gbW9kZSA6IFBI
WSBjb250cm9sbGVyIGluIEF1dG8tbmVnb3RpYXRpb24gTW9kZQorICoJRm9yY2UgbW9kZTogUEhZ
IGNvbnRyb2xsZXIgaW4gZm9yY2UgbW9kZSB3aXRoIEhVQgorICoJCQlOLXdheSBmb3JjZSBjYXBh
YmlsaXR5IHdpdGggU1dJVENICisgKi8KKworc3RhdGljIHZvaWQgdWxpNTI2eF9wcm9jZXNzX21v
ZGUoc3RydWN0IHVsaTUyNnhfYm9hcmRfaW5mbyAqZGIpCit7CisJdTE2IHBoeV9yZWc7CisKKwkv
KiBGdWxsIER1cGxleCBNb2RlIENoZWNrICovCisJaWYgKGRiLT5vcF9tb2RlICYgMHg0KQorCQlk
Yi0+Y3I2X2RhdGEgfD0gQ1I2X0ZETTsJLyogU2V0IEZ1bGwgRHVwbGV4IEJpdCAqLworCWVsc2UK
KwkJZGItPmNyNl9kYXRhICY9IH5DUjZfRkRNOwkvKiBDbGVhciBGdWxsIER1cGxleCBCaXQgKi8K
KworCXVwZGF0ZV9jcjYoZGItPmNyNl9kYXRhLCBkYi0+aW9hZGRyKTsKKworCS8qIDEwLzEwME0g
cGh5eGNlciBmb3JjZSBtb2RlIG5lZWQgKi8KKwlpZiAoICEoZGItPm1lZGlhX21vZGUgJiAweDgp
KSB7CisJCS8qIEZvcmVjZSBNb2RlICovCisJCXBoeV9yZWcgPSBwaHlfcmVhZChkYi0+aW9hZGRy
LCBkYi0+cGh5X2FkZHIsIDYsIGRiLT5jaGlwX2lkKTsKKwkJaWYgKCAhKHBoeV9yZWcgJiAweDEp
ICkgeworCQkJLyogcGFydGVyIHdpdGhvdXQgTi1XYXkgY2FwYWJpbGl0eSAqLworCQkJcGh5X3Jl
ZyA9IDB4MDsKKwkJCXN3aXRjaChkYi0+b3BfbW9kZSkgeworCQkJY2FzZSBVTEk1MjZYXzEwTUhG
OiBwaHlfcmVnID0gMHgwOyBicmVhazsKKwkJCWNhc2UgVUxJNTI2WF8xME1GRDogcGh5X3JlZyA9
IDB4MTAwOyBicmVhazsKKwkJCWNhc2UgVUxJNTI2WF8xMDBNSEY6IHBoeV9yZWcgPSAweDIwMDA7
IGJyZWFrOworCQkJY2FzZSBVTEk1MjZYXzEwME1GRDogcGh5X3JlZyA9IDB4MjEwMDsgYnJlYWs7
CisJCQl9CisJCQlwaHlfd3JpdGUoZGItPmlvYWRkciwgZGItPnBoeV9hZGRyLCAwLCBwaHlfcmVn
LCBkYi0+Y2hpcF9pZCk7CisgICAgICAgCQkJcGh5X3dyaXRlKGRiLT5pb2FkZHIsIGRiLT5waHlf
YWRkciwgMCwgcGh5X3JlZywgZGItPmNoaXBfaWQpOworCQl9CisJfQorfQorCisKKy8qCisgKglX
cml0ZSBhIHdvcmQgdG8gUGh5IHJlZ2lzdGVyCisgKi8KKworc3RhdGljIHZvaWQgcGh5X3dyaXRl
KHVuc2lnbmVkIGxvbmcgaW9iYXNlLCB1OCBwaHlfYWRkciwgdTggb2Zmc2V0LCB1MTYgcGh5X2Rh
dGEsIHUzMiBjaGlwX2lkKQoreworCXUxNiBpOworCXVuc2lnbmVkIGxvbmcgaW9hZGRyOworCisJ
aWYoY2hpcF9pZCA9PSBQQ0lfVUxJNTI2M19JRCkKKwl7CisJCXBoeV93cml0ZWJ5X2NyMTAoaW9i
YXNlLCBwaHlfYWRkciwgb2Zmc2V0LCBwaHlfZGF0YSk7CisJCXJldHVybjsKKwl9CisJLyogTTUy
NjEvTTUyNjMgQ2hpcCAqLworCWlvYWRkciA9IGlvYmFzZSArIERDUjk7CisKKwkvKiBTZW5kIDMz
IHN5bmNocm9uaXphdGlvbiBjbG9jayB0byBQaHkgY29udHJvbGxlciAqLworCWZvciAoaSA9IDA7
IGkgPCAzNTsgaSsrKQorCQlwaHlfd3JpdGVfMWJpdChpb2FkZHIsIFBIWV9EQVRBXzEsIGNoaXBf
aWQpOworCisJLyogU2VuZCBzdGFydCBjb21tYW5kKDAxKSB0byBQaHkgKi8KKwlwaHlfd3JpdGVf
MWJpdChpb2FkZHIsIFBIWV9EQVRBXzAsIGNoaXBfaWQpOworCXBoeV93cml0ZV8xYml0KGlvYWRk
ciwgUEhZX0RBVEFfMSwgY2hpcF9pZCk7CisKKwkvKiBTZW5kIHdyaXRlIGNvbW1hbmQoMDEpIHRv
IFBoeSAqLworCXBoeV93cml0ZV8xYml0KGlvYWRkciwgUEhZX0RBVEFfMCwgY2hpcF9pZCk7CisJ
cGh5X3dyaXRlXzFiaXQoaW9hZGRyLCBQSFlfREFUQV8xLCBjaGlwX2lkKTsKKworCS8qIFNlbmQg
UGh5IGFkZHJlc3MgKi8KKwlmb3IgKGkgPSAweDEwOyBpID4gMDsgaSA9IGkgPj4gMSkKKwkJcGh5
X3dyaXRlXzFiaXQoaW9hZGRyLCBwaHlfYWRkciAmIGkgPyBQSFlfREFUQV8xIDogUEhZX0RBVEFf
MCwgY2hpcF9pZCk7CisKKwkvKiBTZW5kIHJlZ2lzdGVyIGFkZHJlc3MgKi8KKwlmb3IgKGkgPSAw
eDEwOyBpID4gMDsgaSA9IGkgPj4gMSkKKwkJcGh5X3dyaXRlXzFiaXQoaW9hZGRyLCBvZmZzZXQg
JiBpID8gUEhZX0RBVEFfMSA6IFBIWV9EQVRBXzAsIGNoaXBfaWQpOworCisJLyogd3JpdHRlbiB0
cmFzbml0aW9uICovCisJcGh5X3dyaXRlXzFiaXQoaW9hZGRyLCBQSFlfREFUQV8xLCBjaGlwX2lk
KTsKKwlwaHlfd3JpdGVfMWJpdChpb2FkZHIsIFBIWV9EQVRBXzAsIGNoaXBfaWQpOworCisJLyog
V3JpdGUgYSB3b3JkIGRhdGEgdG8gUEhZIGNvbnRyb2xsZXIgKi8KKwlmb3IgKCBpID0gMHg4MDAw
OyBpID4gMDsgaSA+Pj0gMSkKKwkJcGh5X3dyaXRlXzFiaXQoaW9hZGRyLCBwaHlfZGF0YSAmIGkg
PyBQSFlfREFUQV8xIDogUEhZX0RBVEFfMCwgY2hpcF9pZCk7CisJCit9CisKKworLyoKKyAqCVJl
YWQgYSB3b3JkIGRhdGEgZnJvbSBwaHkgcmVnaXN0ZXIKKyAqLworCitzdGF0aWMgdTE2IHBoeV9y
ZWFkKHVuc2lnbmVkIGxvbmcgaW9iYXNlLCB1OCBwaHlfYWRkciwgdTggb2Zmc2V0LCB1MzIgY2hp
cF9pZCkKK3sKKwlpbnQgaTsKKwl1MTYgcGh5X2RhdGE7CisJdW5zaWduZWQgbG9uZyBpb2FkZHI7
CisKKwlpZihjaGlwX2lkID09IFBDSV9VTEk1MjYzX0lEKQorCQlyZXR1cm4gcGh5X3JlYWRieV9j
cjEwKGlvYmFzZSwgcGh5X2FkZHIsIG9mZnNldCk7CisJLyogTTUyNjEvTTUyNjMgQ2hpcCAqLwor
CWlvYWRkciA9IGlvYmFzZSArIERDUjk7CisJCisJLyogU2VuZCAzMyBzeW5jaHJvbml6YXRpb24g
Y2xvY2sgdG8gUGh5IGNvbnRyb2xsZXIgKi8KKwlmb3IgKGkgPSAwOyBpIDwgMzU7IGkrKykKKwkJ
cGh5X3dyaXRlXzFiaXQoaW9hZGRyLCBQSFlfREFUQV8xLCBjaGlwX2lkKTsKKworCS8qIFNlbmQg
c3RhcnQgY29tbWFuZCgwMSkgdG8gUGh5ICovCisJcGh5X3dyaXRlXzFiaXQoaW9hZGRyLCBQSFlf
REFUQV8wLCBjaGlwX2lkKTsKKwlwaHlfd3JpdGVfMWJpdChpb2FkZHIsIFBIWV9EQVRBXzEsIGNo
aXBfaWQpOworCisJLyogU2VuZCByZWFkIGNvbW1hbmQoMTApIHRvIFBoeSAqLworCXBoeV93cml0
ZV8xYml0KGlvYWRkciwgUEhZX0RBVEFfMSwgY2hpcF9pZCk7CisJcGh5X3dyaXRlXzFiaXQoaW9h
ZGRyLCBQSFlfREFUQV8wLCBjaGlwX2lkKTsKKworCS8qIFNlbmQgUGh5IGFkZHJlc3MgKi8KKwlm
b3IgKGkgPSAweDEwOyBpID4gMDsgaSA9IGkgPj4gMSkKKwkJcGh5X3dyaXRlXzFiaXQoaW9hZGRy
LCBwaHlfYWRkciAmIGkgPyBQSFlfREFUQV8xIDogUEhZX0RBVEFfMCwgY2hpcF9pZCk7CisKKwkv
KiBTZW5kIHJlZ2lzdGVyIGFkZHJlc3MgKi8KKwlmb3IgKGkgPSAweDEwOyBpID4gMDsgaSA9IGkg
Pj4gMSkKKwkJcGh5X3dyaXRlXzFiaXQoaW9hZGRyLCBvZmZzZXQgJiBpID8gUEhZX0RBVEFfMSA6
IFBIWV9EQVRBXzAsIGNoaXBfaWQpOworCisJLyogU2tpcCB0cmFuc2l0aW9uIHN0YXRlICovCisJ
cGh5X3JlYWRfMWJpdChpb2FkZHIsIGNoaXBfaWQpOworCisJLyogcmVhZCAxNmJpdCBkYXRhICov
CisJZm9yIChwaHlfZGF0YSA9IDAsIGkgPSAwOyBpIDwgMTY7IGkrKykgeworCQlwaHlfZGF0YSA8
PD0gMTsKKwkJcGh5X2RhdGEgfD0gcGh5X3JlYWRfMWJpdChpb2FkZHIsIGNoaXBfaWQpOworCX0K
KworCXJldHVybiBwaHlfZGF0YTsKK30KKworc3RhdGljIHUxNiBwaHlfcmVhZGJ5X2NyMTAodW5z
aWduZWQgbG9uZyBpb2Jhc2UsIHU4IHBoeV9hZGRyLCB1OCBvZmZzZXQpCit7CisJdW5zaWduZWQg
bG9uZyBpb2FkZHIsY3IxMF92YWx1ZTsKKwkKKwlpb2FkZHIgPSBpb2Jhc2UgKyBEQ1IxMDsKKwlj
cjEwX3ZhbHVlID0gcGh5X2FkZHI7CisJY3IxMF92YWx1ZSA9IChjcjEwX3ZhbHVlPDw1KSArIG9m
ZnNldDsKKwljcjEwX3ZhbHVlID0gKGNyMTBfdmFsdWU8PDE2KSArIDB4MDgwMDAwMDA7CisJb3V0
bChjcjEwX3ZhbHVlLGlvYWRkcik7CisJdWRlbGF5KDEpOworCXdoaWxlKDEpCisJeworCQljcjEw
X3ZhbHVlID0gaW5sKGlvYWRkcik7CisJCWlmKGNyMTBfdmFsdWUmMHgxMDAwMDAwMCkKKwkJCWJy
ZWFrOworCX0KKwlyZXR1cm4gKGNyMTBfdmFsdWUmMHgwZmZmZik7Cit9CisKK3N0YXRpYyB2b2lk
IHBoeV93cml0ZWJ5X2NyMTAodW5zaWduZWQgbG9uZyBpb2Jhc2UsIHU4IHBoeV9hZGRyLCB1OCBv
ZmZzZXQsIHUxNiBwaHlfZGF0YSkKK3sKKwl1bnNpZ25lZCBsb25nIGlvYWRkcixjcjEwX3ZhbHVl
OworCQorCWlvYWRkciA9IGlvYmFzZSArIERDUjEwOworCWNyMTBfdmFsdWUgPSBwaHlfYWRkcjsK
KwljcjEwX3ZhbHVlID0gKGNyMTBfdmFsdWU8PDUpICsgb2Zmc2V0OworCWNyMTBfdmFsdWUgPSAo
Y3IxMF92YWx1ZTw8MTYpICsgMHgwNDAwMDAwMCArIHBoeV9kYXRhOworCW91dGwoY3IxMF92YWx1
ZSxpb2FkZHIpOworCXVkZWxheSgxKTsKK30KKy8qCisgKglXcml0ZSBvbmUgYml0IGRhdGEgdG8g
UGh5IENvbnRyb2xsZXIKKyAqLworCitzdGF0aWMgdm9pZCBwaHlfd3JpdGVfMWJpdCh1bnNpZ25l
ZCBsb25nIGlvYWRkciwgdTMyIHBoeV9kYXRhLCB1MzIgY2hpcF9pZCkKK3sKKwlvdXRsKHBoeV9k
YXRhICwgaW9hZGRyKTsJCQkvKiBNSUkgQ2xvY2sgTG93ICovCisJdWRlbGF5KDEpOworCW91dGwo
cGh5X2RhdGEgIHwgTURDTEtILCBpb2FkZHIpOwkvKiBNSUkgQ2xvY2sgSGlnaCAqLworCXVkZWxh
eSgxKTsKKwlvdXRsKHBoeV9kYXRhICwgaW9hZGRyKTsJCQkvKiBNSUkgQ2xvY2sgTG93ICovCisJ
dWRlbGF5KDEpOworfQorCisKKy8qCisgKglSZWFkIG9uZSBiaXQgcGh5IGRhdGEgZnJvbSBQSFkg
Y29udHJvbGxlcgorICovCisKK3N0YXRpYyB1MTYgcGh5X3JlYWRfMWJpdCh1bnNpZ25lZCBsb25n
IGlvYWRkciwgdTMyIGNoaXBfaWQpCit7CisJdTE2IHBoeV9kYXRhOworCQorCW91dGwoMHg1MDAw
MCAsIGlvYWRkcik7CisJdWRlbGF5KDEpOworCXBoeV9kYXRhID0gKCBpbmwoaW9hZGRyKSA+PiAx
OSApICYgMHgxOworCW91dGwoMHg0MDAwMCAsIGlvYWRkcik7CisJdWRlbGF5KDEpOworCisJcmV0
dXJuIHBoeV9kYXRhOworfQorCisKK3N0YXRpYyBzdHJ1Y3QgcGNpX2RldmljZV9pZCB1bGk1MjZ4
X3BjaV90YmxbXSA9IHsKKwl7IDB4MTBCOSwgMHg1MjYxLCBQQ0lfQU5ZX0lELCBQQ0lfQU5ZX0lE
LCAwLCAwLCBQQ0lfVUxJNTI2MV9JRCB9LAorCXsgMHgxMEI5LCAweDUyNjMsIFBDSV9BTllfSUQs
IFBDSV9BTllfSUQsIDAsIDAsIFBDSV9VTEk1MjYzX0lEIH0sCisJeyAwLCB9Cit9OworTU9EVUxF
X0RFVklDRV9UQUJMRShwY2ksIHVsaTUyNnhfcGNpX3RibCk7CisKKworc3RhdGljIHN0cnVjdCBw
Y2lfZHJpdmVyIHVsaTUyNnhfZHJpdmVyID0geworCS5uYW1lCQk9ICJ1bGk1MjZ4IiwKKwkuaWRf
dGFibGUJPSB1bGk1MjZ4X3BjaV90YmwsCisJLnByb2JlCQk9IHVsaTUyNnhfaW5pdF9vbmUsCisJ
LnJlbW92ZQkJPSBfX2RldmV4aXRfcCh1bGk1MjZ4X3JlbW92ZV9vbmUpLAorfTsKKworTU9EVUxF
X0FVVEhPUigiUGVlciBDaGVuLCBwZWVyLmNoZW5AdWxpLmNvbS50dyIpOworTU9EVUxFX0RFU0NS
SVBUSU9OKCJVTGkgTTUyNjEvTTUyNjMgZmFzdCBldGhlcm5ldCBkcml2ZXIiKTsKK01PRFVMRV9M
SUNFTlNFKCJHUEwiKTsKKworTU9EVUxFX1BBUk0oZGVidWcsICJpIik7CitNT0RVTEVfUEFSTSht
b2RlLCAiaSIpOworTU9EVUxFX1BBUk0oY3I2c2V0LCAiaSIpOworTU9EVUxFX1BBUk1fREVTQyhk
ZWJ1ZywgIlVMaSBNNTI2MS9NNTI2MyBlbmFibGUgZGVidWdnaW5nICgwLTEpIik7CitNT0RVTEVf
UEFSTV9ERVNDKG1vZGUsICJVTGkgTTUyNjEvTTUyNjM6IEJpdCAwOiAxMC8xMDBNYnBzLCBiaXQg
MjogZHVwbGV4LCBiaXQgODogSG9tZVBOQSIpOworCisvKglEZXNjcmlwdGlvbjoKKyAqCXdoZW4g
dXNlciB1c2VkIGluc21vZCB0byBhZGQgbW9kdWxlLCBzeXN0ZW0gaW52b2tlZCBpbml0X21vZHVs
ZSgpCisgKgl0byByZWdpc3RlciB0aGUgc2VydmljZXMuCisgKi8KKworc3RhdGljIGludCBfX2lu
aXQgdWxpNTI2eF9pbml0X21vZHVsZSh2b2lkKQoreworCWludCByYzsKKworCXByaW50ayh2ZXJz
aW9uKTsKKwlwcmludGVkX3ZlcnNpb24gPSAxOworCisJVUxJNTI2WF9EQlVHKDAsICJpbml0X21v
ZHVsZSgpICIsIGRlYnVnKTsKKworCWlmIChkZWJ1ZykKKwkJdWxpNTI2eF9kZWJ1ZyA9IGRlYnVn
OwkvKiBzZXQgZGVidWcgZmxhZyAqLworCWlmIChjcjZzZXQpCisJCXVsaTUyNnhfY3I2X3VzZXJf
c2V0ID0gY3I2c2V0OworCisgCXN3aXRjaChtb2RlKSB7CisgICAJY2FzZSBVTEk1MjZYXzEwTUhG
OgorCWNhc2UgVUxJNTI2WF8xMDBNSEY6CisJY2FzZSBVTEk1MjZYXzEwTUZEOgorCWNhc2UgVUxJ
NTI2WF8xMDBNRkQ6CisJCXVsaTUyNnhfbWVkaWFfbW9kZSA9IG1vZGU7CisJCWJyZWFrOworCWRl
ZmF1bHQ6dWxpNTI2eF9tZWRpYV9tb2RlID0gVUxJNTI2WF9BVVRPOworCQlicmVhazsKKwl9CisK
KwlyYyA9IHBjaV9tb2R1bGVfaW5pdCgmdWxpNTI2eF9kcml2ZXIpOworCWlmIChyYyA8IDApCisJ
CXJldHVybiByYzsKKworCXJldHVybiAwOworfQorCisKKy8qCisgKglEZXNjcmlwdGlvbjoKKyAq
CXdoZW4gdXNlciB1c2VkIHJtbW9kIHRvIGRlbGV0ZSBtb2R1bGUsIHN5c3RlbSBpbnZva2VkIGNs
ZWFuX21vZHVsZSgpCisgKgl0byB1bi1yZWdpc3RlciBhbGwgcmVnaXN0ZXJlZCBzZXJ2aWNlcy4K
KyAqLworCitzdGF0aWMgdm9pZCBfX2V4aXQgdWxpNTI2eF9jbGVhbnVwX21vZHVsZSh2b2lkKQor
eworCVVMSTUyNlhfREJVRygwLCAidWxpNTI2eF9jbGVhbl9tb2R1bGUoKSAiLCBkZWJ1Zyk7CisJ
cGNpX3VucmVnaXN0ZXJfZHJpdmVyKCZ1bGk1MjZ4X2RyaXZlcik7Cit9CisKK21vZHVsZV9pbml0
KHVsaTUyNnhfaW5pdF9tb2R1bGUpOworbW9kdWxlX2V4aXQodWxpNTI2eF9jbGVhbnVwX21vZHVs
ZSk7Cg==

--0__=C7BBFAC3DFA29FDD8f9e8a93df938690918cC7BBFAC3DFA29FDD--

