Return-Path: <linux-kernel-owner+willy=40w.ods.org-S1751736AbWADLlN@vger.kernel.org>
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S1751736AbWADLlN (ORCPT <rfc822;willy@w.ods.org>);
	Wed, 4 Jan 2006 06:41:13 -0500
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S1751738AbWADLlN
	(ORCPT <rfc822;linux-kernel-outgoing>);
	Wed, 4 Jan 2006 06:41:13 -0500
Received: from mail.suse.de ([195.135.220.2]:21899 "EHLO mx1.suse.de")
	by vger.kernel.org with ESMTP id S1751736AbWADLlL (ORCPT
	<rfc822;linux-kernel@vger.kernel.org>);
	Wed, 4 Jan 2006 06:41:11 -0500
Date: Wed, 04 Jan 2006 12:46:00 +0100
Message-ID: <s5hpsn8md1j.wl%tiwai@suse.de>
From: Takashi Iwai <tiwai@suse.de>
To: Jesper Juhl <jesper.juhl@gmail.com>
Cc: Adrian Bunk <bunk@stusta.de>, Tomasz Torcz <zdzichu@irc.pl>,
       Olivier Galibert <galibert@pobox.com>,
       Alistair John Strachan <s0348365@sms.ed.ac.uk>,
       Jan Engelhardt <jengelh@linux01.gwdg.de>, Andi Kleen <ak@suse.de>,
       perex@suse.cz, alsa-devel@alsa-project.org, James@superbug.demon.co.uk,
       sailer@ife.ee.ethz.ch, linux-sound@vger.kernel.org, zab@zabbo.net,
       kyle@parisc-linux.org, parisc-linux@lists.parisc-linux.org,
       jgarzik@pobox.com, Thorsten Knabe <linux@thorsten-knabe.de>,
       zwane@commfireservices.com, zaitcev@yahoo.com,
       linux-kernel@vger.kernel.org
Subject: Re: [2.6 patch] schedule obsolete OSS drivers for removal
In-Reply-To: <9a8748490601031411p17d4417fyffbfee00ca85ac82@mail.gmail.com>
References: <20050726150837.GT3160@stusta.de>
	<200601031522.06898.s0348365@sms.ed.ac.uk>
	<20060103160502.GB5262@irc.pl>
	<200601031629.21765.s0348365@sms.ed.ac.uk>
	<20060103170316.GA12249@dspnet.fr.eu.org>
	<s5h1wzpnjrx.wl%tiwai@suse.de>
	<20060103203732.GF5262@irc.pl>
	<s5hvex1m472.wl%tiwai@suse.de>
	<9a8748490601031256x916bddav794fecdcf263fb55@mail.gmail.com>
	<20060103215654.GH3831@stusta.de>
	<9a8748490601031411p17d4417fyffbfee00ca85ac82@mail.gmail.com>
User-Agent: Wanderlust/2.12.0 (Your Wildest Dreams) SEMI/1.14.6 (Maruoka)
 FLIM/1.14.7 (=?ISO-8859-4?Q?Sanj=F2?=) APEL/10.6 MULE XEmacs/21.5 (beta21)
 (corn) (+CVS-20050720) (i386-suse-linux)
MIME-Version: 1.0 (generated by SEMI 1.14.6 - "Maruoka")
Content-Type: text/plain; charset=US-ASCII
Sender: linux-kernel-owner@vger.kernel.org
X-Mailing-List: linux-kernel@vger.kernel.org

At Tue, 3 Jan 2006 23:11:47 +0100,
Jesper Juhl wrote:
> 
> On 1/3/06, Adrian Bunk <bunk@stusta.de> wrote:
> > On Tue, Jan 03, 2006 at 09:56:20PM +0100, Jesper Juhl wrote:
> > > On 1/3/06, Takashi Iwai <tiwai@suse.de> wrote:
> > > > At Tue, 3 Jan 2006 21:37:32 +0100,
> > > > Tomasz Torcz wrote:
> > > > >
> > > > > On Tue, Jan 03, 2006 at 09:22:58PM +0100, Takashi Iwai wrote:
> > > > > > At Tue, 3 Jan 2006 18:03:16 +0100,
> > > > > > Olivier Galibert wrote:
> > > > > > >
> > > > > > > > This is exactly why the OSS emulation option in ALSA is really a last resort
> > > > > > > > and should not be an excuse for people to ignore implementing ALSA support
> > > > > > > > directly. More so, it is very good justification for ditching "everything
> > > > > > > > OSS" as soon as possible, at least in new software.
> > > > > > >
> > > > > > > Actually the crappy state of OSS emulation is a good reason to ditch
> > > > > > > ALSA in its current implementation.  As Linus reminded not so long
> > > > > > > ago, backwards compatibility is extremely important.
> > > > > >
> > > > > > Well, we keep the compatibility exactly -- OSS drivers don't support
> > > > > > software mixing in the kernel, too :)
> > > > >
> > > > >  OSS will support software mixing. In kernel. On NetBSD.
> > > > > http://kerneltrap.org/node/4388
> > > >
> > > > Why do we need to keep the compatibility with NetBSD?
> > > >
> > > Software mixing is a really nice feature for people with soundscards
> > > that can't do hardware mixing, so if the OSS compatibility could
> > > transparently do software mixing for apps using OSS api that would be
> > > a very nice extension for a lot of people - I'd say that if NetBSD do
> > > that they've got the right idea.
> >
> > The OSS compatibility in ALSA is only a legacy API for applications not
> > yet converted to use the ALSA API.
> >
> 
> Still would be nice if users of ALSA who have the OSS backwards compat
> enabled would thus also get transparent software mixing for all apps
> using the OSS API.
> not crucial, that's not what I'm saying, just nice if it would be possible.

Technicall it's trivial to implement the soft-mixing in the kernel.
The question is whether it's the right implementation.
We have a user-space softmix for ALSA, and aoss wrapper for OSS using
it.  (I know aoss still has some problems that should be fixed,
though.)


Anyway, the softmix problem has no relation with the deprecation of
OSS drivers in Linux kernel tree.  They don't do softmix.  So,
comparing with NetBSD or claiming the unimplemented feature is
irrelevant with $SUBJECT.


Takashi
