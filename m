Return-Path: <linux-kernel-owner+willy=40w.ods.org@vger.kernel.org>
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id <S314514AbSFYS7x>; Tue, 25 Jun 2002 14:59:53 -0400
Received: (majordomo@vger.kernel.org) by vger.kernel.org
	id <S315529AbSFYS7w>; Tue, 25 Jun 2002 14:59:52 -0400
Received: from pimout4-ext.prodigy.net ([207.115.63.103]:761 "EHLO
	pimout4-int.prodigy.net") by vger.kernel.org with ESMTP
	id <S314514AbSFYS7v>; Tue, 25 Jun 2002 14:59:51 -0400
Message-ID: <026f01c21c7a$3b3df820$fad88842@ribald.com>
From: "Niels Christiansen" <nc@ejna.ribald.com>
To: "Andrew Morton" <akpm@zip.com.au>
Cc: "Linux Kernel Mailing List" <linux-kernel@vger.kernel.org>,
       <lse-tech@lists.sourceforge.net>
References: <OFCB119CD8.D6AE7B3D-ON85256BE2.006AC911@raleigh.ibm.com> <3D18A26A.73E6DD07@zip.com.au>
Subject: Re: [Lse-tech] Re: efficient copy_to_user and copy_from_user routines in Linux Kernel
Date: Tue, 25 Jun 2002 13:58:01 -0500
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 5.50.4807.1700
X-MimeOLE: Produced By Microsoft MimeOLE V5.50.4807.1700
Sender: linux-kernel-owner@vger.kernel.org
X-Mailing-List: linux-kernel@vger.kernel.org


Indeed, I ordered a P4 for these tests while still at IBM but AMD boxes are
not available to Mala, I believe.  Before I got sacked, I even bought a P4
to test this and other things at home but I lost interest in the matter so
never actually got around to testing.

When I did test back in February I created a few test programs and found
that the code generated by GCC Version 3.x and the library that came with
RedHat 6.2 gave almost as good results as the patches Mala then had
available.  Maybe it is time to see if the compiler has improved enough to
scrap the copy code in the kernel in favor of code as generated by the
compiler.

Niels

----- Original Message -----
From: "Andrew Morton" <akpm@zip.com.au>
To: "Mala Anand" <manand@us.ibm.com>
Cc: "Linux Kernel Mailing List" <linux-kernel@vger.kernel.org>;
<lse-tech@lists.sourceforge.net>
Sent: Tuesday, June 25, 2002 12:03 PM
Subject: [Lse-tech] Re: efficient copy_to_user and copy_from_user routines
in Linux Kernel


> Mala Anand wrote:
> >
> > Here is a 2.5.19 patch that improves the performance of IA32
copy_to_user
> > and copy_from_user routines used by :
> >
> > (1) tcpip protocol stack
> > (2) file systems
> >
>
> One question:  have you tested on other CPU types?  This problem is
> very specific to Intel hardware.  On AMD, the eight-byte alignement
> artifact does not exist at all.  It could be that your patch is not
> desirable on such CPUs?
>
> -------------------------------------------------------
> This sf.net email is sponsored by: Jabber Inc.
> Don't miss the IM event of the season | Special offer for OSDN members!
> JabConf 2002, Aug. 20-22, Keystone, CO http://www.jabberconf.com/osdn

