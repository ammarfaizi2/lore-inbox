Return-Path: <linux-kernel-owner@vger.kernel.org>
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id <S130573AbQKGA00>; Mon, 6 Nov 2000 19:26:26 -0500
Received: (majordomo@vger.kernel.org) by vger.kernel.org
	id <S129236AbQKGA0Q>; Mon, 6 Nov 2000 19:26:16 -0500
Received: from ms.csie.ntu.edu.tw ([140.112.30.25]:29665 "EHLO
	cslab.csie.ntu.edu.tw") by vger.kernel.org with ESMTP
	id <S130573AbQKGA0C>; Mon, 6 Nov 2000 19:26:02 -0500
Date: Tue, 7 Nov 2000 08:25:42 +0800 (CST)
From: Chih-Chung Chang <b4506055@csie.ntu.edu.tw>
To: linux-kernel@vger.kernel.org
Subject: [PATCH] VCD support for isofs
Message-ID: <Pine.GSO.4.10.10011070822030.6214-300000@ntucsa>
MIME-Version: 1.0
Content-Type: MULTIPART/MIXED; BOUNDARY="-559023410-851401618-973556742=:6214"
Sender: linux-kernel-owner@vger.kernel.org
X-Mailing-List: linux-kernel@vger.kernel.org

  This message is in MIME format.  The first part should be readable text,
  while the remaining parts are likely unreadable without MIME-aware tools.
  Send mail to mime@docserver.cac.washington.edu for more info.

---559023410-851401618-973556742=:6214
Content-Type: TEXT/PLAIN; charset=US-ASCII


Attached patches add VCD support in isofs.
Against 2.2.16 and 2.4.0-test10.


---559023410-851401618-973556742=:6214
Content-Type: TEXT/PLAIN; charset=US-ASCII; name="patch-isofs-2.2-20001107"
Content-Transfer-Encoding: BASE64
Content-ID: <Pine.GSO.4.10.10011070825420.6214@ntucsa>
Content-Description: 
Content-Disposition: attachment; filename="patch-isofs-2.2-20001107"

ZGlmZiAtdXIgaXNvZnMub3JpZy9maWxlLmMgaXNvZnMvZmlsZS5jDQotLS0g
aXNvZnMub3JpZy9maWxlLmMJTW9uIE1hciAgOCAwNzoyNToyMyAxOTk5DQor
KysgaXNvZnMvZmlsZS5jCVR1ZSBOb3YgIDcgMDg6MDc6NTcgMjAwMA0KQEAg
LTU0LDMgKzU0LDI0IEBADQogCU5VTEwsCSAgICAgICAJCS8qIHRydW5jYXRl
ICovDQogCU5VTEwJCQkvKiBwZXJtaXNzaW9uICovDQogfTsNCisNCitleHRl
cm4gaW50IHJlYWRwYWdlX2Zvcm0yKHN0cnVjdCBmaWxlICosIHN0cnVjdCBw
YWdlICopOw0KK3N0cnVjdCBpbm9kZV9vcGVyYXRpb25zIGlzb2ZzX2ZpbGVf
aW5vZGVfb3BlcmF0aW9uc19mb3JtMiA9IHsNCisJJmlzb2ZzX2ZpbGVfb3Bl
cmF0aW9ucywJLyogZGVmYXVsdCBmaWxlIG9wZXJhdGlvbnMgKi8NCisJTlVM
TCwJCQkvKiBjcmVhdGUgKi8NCisJTlVMTCwJCQkvKiBsb29rdXAgKi8NCisJ
TlVMTCwJCQkvKiBsaW5rICovDQorCU5VTEwsCQkJLyogdW5saW5rICovDQor
CU5VTEwsCQkJLyogc3ltbGluayAqLw0KKwlOVUxMLAkJCS8qIG1rZGlyICov
DQorCU5VTEwsCQkJLyogcm1kaXIgKi8NCisJTlVMTCwJCQkvKiBta25vZCAq
Lw0KKwlOVUxMLAkJCS8qIHJlbmFtZSAqLw0KKwlOVUxMLAkJCS8qIHJlYWRs
aW5rICovDQorCU5VTEwsCQkJLyogZm9sbG93X2xpbmsgKi8NCisJcmVhZHBh
Z2VfZm9ybTIsCQkvKiByZWFkcGFnZSAqLw0KKwlOVUxMLAkJCS8qIHdyaXRl
cGFnZSAqLw0KKwlpc29mc19ibWFwLAkJLyogYm1hcCAqLw0KKwlOVUxMLAkg
ICAgICAgCQkvKiB0cnVuY2F0ZSAqLw0KKwlOVUxMCQkJLyogcGVybWlzc2lv
biAqLw0KK307DQpkaWZmIC11ciBpc29mcy5vcmlnL2lub2RlLmMgaXNvZnMv
aW5vZGUuYw0KLS0tIGlzb2ZzLm9yaWcvaW5vZGUuYwlXZWQgQXVnIDIzIDAz
OjI0OjEwIDIwMDANCisrKyBpc29mcy9pbm9kZS5jCVR1ZSBOb3YgIDcgMDg6
MDg6MDIgMjAwMA0KQEAgLTEwODUsNiArMTA4NSwyMzEgQEANCiAJZ290byBv
dXQ7DQogfQ0KIA0KK2ludCBjZF9pb2N0bChzdHJ1Y3Qgc3VwZXJfYmxvY2sg
KnMsIGludCByZXF1ZXN0LCB1bnNpZ25lZCBsb25nIGFyZykNCit7DQorCWV4
dGVybiBzdHJ1Y3QgZmlsZV9vcGVyYXRpb25zICogZ2V0X2Jsa2ZvcHModW5z
aWduZWQgaW50KTsNCisJa2Rldl90IGRldiA9IHMtPnNfZGV2Ow0KKwlzdHJ1
Y3QgZmlsZV9vcGVyYXRpb25zICpmb3BzID0gZ2V0X2Jsa2ZvcHMoTUFKT1Io
ZGV2KSk7DQorCWludCByZXQgPSAtMTsNCisJaWYoZm9wcyAmJiBmb3BzLT5p
b2N0bCkNCisJew0KKwkJc3RydWN0IGlub2RlIGlub2RlX2Zha2U7DQorCQlt
bV9zZWdtZW50X3Qgb2xkX2ZzPWdldF9mcygpOw0KKwkJc2V0X2ZzKEtFUk5F
TF9EUyk7DQorCQlpbm9kZV9mYWtlLmlfcmRldj1kZXY7DQorCQlyZXQgPSBm
b3BzLT5pb2N0bCgmaW5vZGVfZmFrZSxOVUxMLHJlcXVlc3QsYXJnKTsNCisJ
CXNldF9mcyhvbGRfZnMpOw0KKwl9DQorCXJldHVybiByZXQ7DQorfQ0KKw0K
K3N0YXRpYyBjaGFyICpsYXN0X2J1ZjsNCit1bnNpZ25lZCBjaGFyKiBjZF9y
ZWFkX3Jhd19zZWN0b3Ioc3RydWN0IGlub2RlICppbm9kZSwgaW50IHNlY3Rv
cl9ucikNCit7DQorCXN0YXRpYyBzdHJ1Y3Qgc2VtYXBob3JlIGxhc3RfYnVm
X3NlbSA9IE1VVEVYOw0KKwlzdGF0aWMgc3RydWN0IGlub2RlKiBsYXN0X2lu
b2RlOw0KKwlzdGF0aWMgaW50IGxhc3Rfc2VjdG9yX25yID0gLTE7DQorCXVu
c2lnbmVkIGNoYXIgKmJ1ZjsNCisJc3RydWN0IGNkcm9tX21zZiAqbXNmOw0K
KwlpbnQgbGJhOw0KKw0KKwlidWYgPSBrbWFsbG9jKENEX0ZSQU1FU0laRV9S
QVcsR0ZQX0tFUk5FTCk7DQorCWlmKGJ1ZiA9PSBOVUxMKSByZXR1cm4gTlVM
TDsNCisNCisJZG93bigmbGFzdF9idWZfc2VtKTsNCisNCisJaWYoc2VjdG9y
X25yID09IGxhc3Rfc2VjdG9yX25yICYmIGlub2RlID09IGxhc3RfaW5vZGUp
DQorCS8vIGhvdyB0byBkbyB0aGUgcmlnaHQgY2hlY2svaW52YWxpZGF0ZT8N
CisJew0KKwkJbWVtY3B5KGJ1ZixsYXN0X2J1ZixDRF9GUkFNRVNJWkVfUkFX
KTsNCisJCWdvdG8gb3V0Ow0KKwl9DQorDQorCWxiYSA9IGlzb2ZzX2JtYXAo
aW5vZGUsMCkgKyAxNTAgKyBzZWN0b3JfbnI7DQorCW1zZiA9IChzdHJ1Y3Qg
Y2Ryb21fbXNmICopYnVmOw0KKwltc2YtPmNkbXNmX21pbjAgPSBsYmEvNzUv
NjA7DQorCW1zZi0+Y2Rtc2Zfc2VjMCA9IChsYmEvNzUpJTYwOw0KKwltc2Yt
PmNkbXNmX2ZyYW1lMCA9IGxiYSU3NTsNCisJaWYoY2RfaW9jdGwoaW5vZGUt
Pmlfc2IsQ0RST01SRUFEUkFXLCh1bnNpZ25lZCBsb25nKW1zZikgPCAwKQ0K
Kwl7DQorCQlrZnJlZShidWYpOw0KKwkJYnVmID0gTlVMTDsNCisJfQ0KKwll
bHNlDQorCXsNCisJCWxhc3RfaW5vZGUgPSBpbm9kZTsNCisJCWxhc3Rfc2Vj
dG9yX25yID0gc2VjdG9yX25yOw0KKwkJbWVtY3B5KGxhc3RfYnVmLGJ1ZixD
RF9GUkFNRVNJWkVfUkFXKTsNCisJfQ0KK291dDoNCisJdXAoJmxhc3RfYnVm
X3NlbSk7DQorCXJldHVybiBidWY7DQorfQ0KKw0KKyNkZWZpbmUgRk9STTJf
REFUQV9TSVpFIDIzMjQNCitzdGF0aWMgaW50IGtpc29mc2RfcGlkOw0KK3N0
YXRpYyBpbnQga2lzb2ZzZF9ydW5uaW5nID0gMDsNCitzdGF0aWMgc3Bpbmxv
Y2tfdCBraXNvZnNkX3JlcV9sb2NrID0gU1BJTl9MT0NLX1VOTE9DS0VEOw0K
K3N0YXRpYyBMSVNUX0hFQUQoa2lzb2ZzZF9yZXFfbGlzdCk7CS8qIExpc3Qg
b2YgcmVxdWVzdHMgbmVlZGluZyBzZXJ2aWNpbmcgKi8NCitzdGF0aWMgc3Ry
dWN0IHdhaXRfcXVldWUgKmtpc29mc2Rfd2FpdDsNCisNCitzdHJ1Y3Qga2lz
b2ZzZF9yZXEgew0KKwlzdHJ1Y3QgbGlzdF9oZWFkIHJlcV9saXN0Ow0KKwlz
dHJ1Y3QgaW5vZGUgKmlub2RlOw0KKwlzdHJ1Y3QgcGFnZSAqcGFnZTsNCit9
Ow0KKw0KK3N0YXRpYyBpbnQga2lzb2ZzZF9hZGRfcmVxdWVzdChzdHJ1Y3Qg
aW5vZGUqIGlub2RlLCBzdHJ1Y3QgcGFnZSAqcGFnZSkNCit7DQorCXN0cnVj
dCBraXNvZnNkX3JlcSAqcmVxID0ga21hbGxvYyhzaXplb2Yoc3RydWN0IGtp
c29mc2RfcmVxKSwNCisJCQkJCQlHRlBfS0VSTkVMKTsNCisJaWYocmVxID09
IE5VTEwpIHJldHVybiAtRU5PTUVNOw0KKw0KKwlzZXRfYml0KFBHX2xvY2tl
ZCwgJnBhZ2UtPmZsYWdzKTsNCisJY2xlYXJfYml0KFBHX3VwdG9kYXRlLCAm
cGFnZS0+ZmxhZ3MpOw0KKwljbGVhcl9iaXQoUEdfZXJyb3IsICZwYWdlLT5m
bGFncyk7DQorDQorCUlOSVRfTElTVF9IRUFEKCZyZXEtPnJlcV9saXN0KTsN
CisJcmVxLT5pbm9kZSA9IGlub2RlOw0KKwlyZXEtPnBhZ2UgPSBwYWdlOw0K
Kw0KKwlzcGluX2xvY2soJmtpc29mc2RfcmVxX2xvY2spOw0KKwlsaXN0X2Fk
ZCgmcmVxLT5yZXFfbGlzdCxraXNvZnNkX3JlcV9saXN0LnByZXYpOw0KKwl3
YWtlX3VwKCZraXNvZnNkX3dhaXQpOw0KKwlzcGluX3VubG9jaygma2lzb2Zz
ZF9yZXFfbG9jayk7DQorDQorCXJldHVybiAwOw0KK30NCisNCitzdGF0aWMg
dm9pZCByZWFkcGFnZV9mb3JtMl9yZWFsKHN0cnVjdCBpbm9kZSogaW5vZGUs
IHN0cnVjdCBwYWdlKiBwYWdlKQ0KK3sNCisJY2hhciAqYnVmID0gKGNoYXIg
KilwYWdlX2FkZHJlc3MocGFnZSk7DQorCWludCBzdGFydF9zZWN0b3IsIHN0
YXJ0X2J5dGU7DQorCWludCBzdG9wX3NlY3Rvciwgc3RvcF9ieXRlOw0KKwlp
bnQgc2VjdG9yOw0KKwlpbnQgb2Zmc2V0ID0gcGFnZS0+b2Zmc2V0Ow0KKwkN
CisJLy8gdGhlIGNvZGUgaXMgYWRhcHRlZCBmcm9tIGNkWEEuYyBvZiBjZGZz
LTAuNDENCisNCisJc3RhcnRfc2VjdG9yID0gb2Zmc2V0IC8gRk9STTJfREFU
QV9TSVpFOw0KKwlzdGFydF9ieXRlID0gb2Zmc2V0ICUgRk9STTJfREFUQV9T
SVpFOw0KKwlzdG9wX3NlY3RvciA9IChvZmZzZXQgKyBQQUdFX1NJWkUpIC8g
Rk9STTJfREFUQV9TSVpFOw0KKwlzdG9wX2J5dGUgPSAob2Zmc2V0ICsgUEFH
RV9TSVpFKSAlIEZPUk0yX0RBVEFfU0laRTsNCisJDQorCWlmKHN0b3BfYnl0
ZSA9PSAwKQ0KKwl7DQorCQktLXN0b3Bfc2VjdG9yOw0KKwkJc3RvcF9ieXRl
ID0gRk9STTJfREFUQV9TSVpFOw0KKwl9DQorDQorCWZvcihzZWN0b3IgPSBz
dGFydF9zZWN0b3I7IHNlY3RvciA8PSBzdG9wX3NlY3Rvcjsgc2VjdG9yKysp
DQorCXsNCisJCWludCBjb3B5X2xlbmd0aDsNCisJCXVuc2lnbmVkIGNoYXIg
KmRhdGE7DQorCQl1bnNpZ25lZCBjaGFyICpyYXdfc2VjdG9yID0gY2RfcmVh
ZF9yYXdfc2VjdG9yKGlub2RlLHNlY3Rvcik7DQorCQlpZihyYXdfc2VjdG9y
ID09IE5VTEwpIGJyZWFrOw0KKw0KKwkJZGF0YSA9IHJhd19zZWN0b3IgKyAy
NDsNCisJCWlmKHNlY3RvciA9PSBzdGFydF9zZWN0b3IpDQorCQl7DQorCQkJ
ZGF0YSArPSBzdGFydF9ieXRlOw0KKwkJCWlmKHNlY3RvciAhPSBzdG9wX3Nl
Y3RvcikNCisJCQkJY29weV9sZW5ndGggPSBGT1JNMl9EQVRBX1NJWkUgLSBz
dGFydF9ieXRlOw0KKwkJCWVsc2UNCisJCQkJY29weV9sZW5ndGggPSBzdG9w
X2J5dGUgLSBzdGFydF9ieXRlOw0KKwkJfSANCisJCWVsc2UgaWYgKHNlY3Rv
ciA9PSBzdG9wX3NlY3RvcikNCisJCQljb3B5X2xlbmd0aCA9IHN0b3BfYnl0
ZTsNCisJCWVsc2UNCisJCQljb3B5X2xlbmd0aCA9IEZPUk0yX0RBVEFfU0la
RTsNCisJCQ0KKwkJbWVtY3B5KGJ1ZixkYXRhLGNvcHlfbGVuZ3RoKTsNCisJ
CWJ1ZiArPSBjb3B5X2xlbmd0aDsNCisJCWtmcmVlKHJhd19zZWN0b3IpOw0K
Kwl9DQorDQorCWlmKHNlY3RvciA+IHN0b3Bfc2VjdG9yKQ0KKwkJc2V0X2Jp
dChQR191cHRvZGF0ZSwgJnBhZ2UtPmZsYWdzKTsNCisJZWxzZQ0KKwkJc2V0
X2JpdChQR19lcnJvciwgJnBhZ2UtPmZsYWdzKTsNCisJY2xlYXJfYml0KFBH
X2xvY2tlZCwgJnBhZ2UtPmZsYWdzKTsNCisJd2FrZV91cCgmcGFnZS0+d2Fp
dCk7DQorfQ0KKw0KK3N0YXRpYyB2b2lkIGtpc29mc2RfcHJvY2Vzc19yZXF1
ZXN0KHZvaWQpDQorew0KKwlzcGluX2xvY2soJmtpc29mc2RfcmVxX2xvY2sp
Ow0KKwl3aGlsZSghbGlzdF9lbXB0eSgma2lzb2ZzZF9yZXFfbGlzdCkpDQor
CXsNCisJCXN0cnVjdCBsaXN0X2hlYWQgKiB0bXA7DQorCQlzdHJ1Y3Qga2lz
b2ZzZF9yZXEgKiByZXE7DQorCQkNCisJCXRtcCA9IGtpc29mc2RfcmVxX2xp
c3QubmV4dDsNCisJCWxpc3RfZGVsKHRtcCk7DQorDQorCQlzcGluX3VubG9j
aygma2lzb2ZzZF9yZXFfbG9jayk7DQorCQlyZXEgPSBsaXN0X2VudHJ5KHRt
cCwgc3RydWN0IGtpc29mc2RfcmVxLCByZXFfbGlzdCk7DQorCQlyZWFkcGFn
ZV9mb3JtMl9yZWFsKHJlcS0+aW5vZGUsIHJlcS0+cGFnZSk7DQorCQlrZnJl
ZShyZXEpOw0KKwkJc3Bpbl9sb2NrKCZraXNvZnNkX3JlcV9sb2NrKTsNCisJ
fQ0KKwlzcGluX3VubG9jaygma2lzb2ZzZF9yZXFfbG9jayk7DQorfQ0KKw0K
K3N0YXRpYyB2b2lkIGRhZW1vbml6ZSh2b2lkKQ0KK3sNCisJc3RydWN0IGZz
X3N0cnVjdCAqZnM7DQorDQorCS8qDQorCSAqIElmIHdlIHdlcmUgc3RhcnRl
ZCBhcyByZXN1bHQgb2YgbG9hZGluZyBhIG1vZHVsZSwgY2xvc2UgYWxsIG9m
IHRoZQ0KKwkgKiB1c2VyIHNwYWNlIHBhZ2VzLiAgV2UgZG9uJ3QgbmVlZCB0
aGVtLCBhbmQgaWYgd2UgZGlkbid0IGNsb3NlIHRoZW0NCisJICogdGhleSB3
b3VsZCBiZSBsb2NrZWQgaW50byBtZW1vcnkuDQorCSAqLw0KKwlleGl0X21t
KGN1cnJlbnQpOw0KKw0KKwljdXJyZW50LT5zZXNzaW9uID0gMTsNCisJY3Vy
cmVudC0+cGdycCA9IDE7DQorDQorCS8qIEJlY29tZSBhcyBvbmUgd2l0aCB0
aGUgaW5pdCB0YXNrICovDQorDQorCWV4aXRfZnMoY3VycmVudCk7CS8qIGN1
cnJlbnQtPmZzLT5jb3VudC0tOyAqLw0KKwlmcyA9IGluaXRfdGFzay5mczsN
CisJY3VycmVudC0+ZnMgPSBmczsNCisJYXRvbWljX2luYygmZnMtPmNvdW50
KTsNCisNCit9DQorDQorc3RhdGljIGludCBraXNvZnNkX3RocmVhZCh2b2lk
ICp1bnVzZWQpDQorew0KKwkvKg0KKwkgKiBUaGlzIHRocmVhZCBkb2Vzbid0
IG5lZWQgYW55IHVzZXItbGV2ZWwgYWNjZXNzLA0KKwkgKiBzbyBnZXQgcmlk
IG9mIGFsbCBvdXIgcmVzb3VyY2VzDQorCSAqLw0KKwlleGl0X2ZpbGVzKGN1
cnJlbnQpOyAgLyogZGFlbW9uaXplIGRvZXNuJ3QgZG8gZXhpdF9maWxlcyAq
Lw0KKwlkYWVtb25pemUoKTsNCisNCisJLyogU2V0dXAgYSBuaWNlIG5hbWUg
Ki8NCisJc3RyY3B5KGN1cnJlbnQtPmNvbW0sICJraXNvZnNkIik7DQorDQor
CS8qIFNlbmQgbWUgYSBzaWduYWwgdG8gZ2V0IG1lIGRpZSAoZm9yIGRlYnVn
Z2luZykgKi8NCisJZG8gew0KKwkJa2lzb2ZzZF9wcm9jZXNzX3JlcXVlc3Qo
KTsNCisJCXdhaXRfZXZlbnRfaW50ZXJydXB0aWJsZShraXNvZnNkX3dhaXQs
IWxpc3RfZW1wdHkoJmtpc29mc2RfcmVxX2xpc3QpKTsNCisJfSB3aGlsZSAo
IXNpZ25hbF9wZW5kaW5nKGN1cnJlbnQpKTsNCisNCisJa2lzb2ZzZF9ydW5u
aW5nID0gMDsNCisJcmV0dXJuIDA7DQorfQ0KKw0KK2ludCByZWFkcGFnZV9m
b3JtMihzdHJ1Y3QgZmlsZSAqZmlsZSwgc3RydWN0IHBhZ2UgKnBhZ2UpDQor
ew0KKwlzdHJ1Y3QgaW5vZGUgKmlub2RlID0gZmlsZS0+Zl9kZW50cnktPmRf
aW5vZGU7DQorCWlmKGtpc29mc2RfcnVubmluZykNCisJCXJldHVybiBraXNv
ZnNkX2FkZF9yZXF1ZXN0KGlub2RlLCBwYWdlKTsNCisJZWxzZQ0KKwkJcmV0
dXJuIC1FSU87DQorfQ0KKw0KIHZvaWQgaXNvZnNfcmVhZF9pbm9kZShzdHJ1
Y3QgaW5vZGUgKiBpbm9kZSkNCiB7DQogCXN0cnVjdCBzdXBlcl9ibG9jayAq
c2IgPSBpbm9kZS0+aV9zYjsNCkBAIC0xMjMzLDcgKzE0NTgsMjIgQEANCiAj
ZW5kaWYgSUdOT1JFX1dST05HX01VTFRJX1ZPTFVNRV9TUEVDUw0KIAl7DQog
CSAgaWYgKFNfSVNSRUcoaW5vZGUtPmlfbW9kZSkpDQorCSAgew0KKwkgICAg
ZXh0ZXJuIHN0cnVjdCBpbm9kZV9vcGVyYXRpb25zIGlzb2ZzX2ZpbGVfaW5v
ZGVfb3BlcmF0aW9uc19mb3JtMjsNCisJICAgIHVuc2lnbmVkIGNoYXIgKmJ1
ZjsNCiAJICAgIGlub2RlLT5pX29wID0gJmlzb2ZzX2ZpbGVfaW5vZGVfb3Bl
cmF0aW9uczsNCisJICAgIGJ1ZiA9IGNkX3JlYWRfcmF3X3NlY3Rvcihpbm9k
ZSwwKTsNCisJICAgIGlmKGJ1ZikNCisJICAgIHsNCisJCSAgICBpZihidWZb
MTVdID09IDIgJiYgKGJ1ZlsxOF0mKDE8PDUpKSkNCisJCSAgICB7DQorCQkJ
aW5vZGUtPmlfb3AgPSAmaXNvZnNfZmlsZV9pbm9kZV9vcGVyYXRpb25zX2Zv
cm0yOw0KKwkJCWlub2RlLT5pX3NpemUgPSAoaW5vZGUtPmlfc2l6ZS8yMDQ4
KSpGT1JNMl9EQVRBX1NJWkUrDQorCQkJCQkoaW5vZGUtPmlfc2l6ZSUyMDQ4
KTsNCisJCSAgICB9DQorCQkgICAga2ZyZWUoYnVmKTsNCisJICAgIH0NCisJ
ICB9DQogCSAgZWxzZSBpZiAoU19JU0RJUihpbm9kZS0+aV9tb2RlKSkNCiAJ
ICAgIGlub2RlLT5pX29wID0gJmlzb2ZzX2Rpcl9pbm9kZV9vcGVyYXRpb25z
Ow0KIAkgIGVsc2UgaWYgKFNfSVNMTksoaW5vZGUtPmlfbW9kZSkpDQpAQCAt
MTQzNiw3ICsxNjc2LDI0IEBADQogDQogX19pbml0ZnVuYyhpbnQgaW5pdF9p
c285NjYwX2ZzKHZvaWQpKQ0KIHsNCi0gICAgICAgIHJldHVybiByZWdpc3Rl
cl9maWxlc3lzdGVtKCZpc285NjYwX2ZzX3R5cGUpOw0KKwlpbnQgZXJyOw0K
KyAgICAgICAgZXJyID0gcmVnaXN0ZXJfZmlsZXN5c3RlbSgmaXNvOTY2MF9m
c190eXBlKTsNCisgICAgICAgIGlmKGVyciA8IDApIHJldHVybiBlcnI7DQor
DQorCWxhc3RfYnVmID0ga21hbGxvYyhDRF9GUkFNRVNJWkVfUkFXLEdGUF9L
RVJORUwpOw0KKwlpZihsYXN0X2J1ZiA9PSBOVUxMKSByZXR1cm4gLUVOT01F
TTsNCisNCisJa2lzb2ZzZF9waWQgPSBrZXJuZWxfdGhyZWFkKGtpc29mc2Rf
dGhyZWFkLCBOVUxMLCANCisJCQlDTE9ORV9GUyB8IENMT05FX0ZJTEVTIHwg
Q0xPTkVfU0lHSEFORCk7DQorCWlmKGtpc29mc2RfcGlkID4gMCkgDQorCXsN
CisJCWtpc29mc2RfcnVubmluZyA9IDE7DQorCQlyZXR1cm4gMDsNCisJfQ0K
Kw0KKwlwcmludGsoImluaXRfaXNvOTY2MF9mczoga2VybmVsX3RocmVhZCBm
YWlsZWQuXG4iKTsNCisJdW5yZWdpc3Rlcl9maWxlc3lzdGVtKCZpc285NjYw
X2ZzX3R5cGUpOw0KKwlyZXR1cm4gLTE7DQogfQ0KIA0KICNpZmRlZiBNT0RV
TEUNCkBAIC0xNDQ5LDcgKzE3MDYsMjEgQEANCiANCiB2b2lkIGNsZWFudXBf
bW9kdWxlKHZvaWQpDQogew0KKwlpbnQgcmV0Ow0KKwlyZXQgPSBraWxsX3By
b2Moa2lzb2ZzZF9waWQsIFNJR1RFUk0sIDEpOw0KKwlpZighcmV0KSB7DQor
CQkvKiBXYWl0IDEwIHNlY29uZHMgKi8NCisJCWludCBjb3VudCA9IDEwICog
MTAwOw0KKwkJd2hpbGUgKGtpc29mc2RfcnVubmluZyAmJiAtLWNvdW50KSB7
DQorCQkJY3VycmVudC0+c3RhdGUgPSBUQVNLX0lOVEVSUlVQVElCTEU7DQor
CQkJc2NoZWR1bGVfdGltZW91dCgxKTsNCisJCX0NCisNCisJCWlmKCFjb3Vu
dCkNCisJCQlwcmludGsoIkdpdmluZyB1cCBvbiBraWxsaW5nIGtpc29mc2Qg
ISIpOw0KKwl9DQogCXVucmVnaXN0ZXJfZmlsZXN5c3RlbSgmaXNvOTY2MF9m
c190eXBlKTsNCisJa2ZyZWUobGFzdF9idWYpOw0KIH0NCiANCiAjZW5kaWYN
Cg==
---559023410-851401618-973556742=:6214
Content-Type: TEXT/PLAIN; charset=US-ASCII; name="patch-isofs-2.4-20001107"
Content-Transfer-Encoding: BASE64
Content-ID: <Pine.GSO.4.10.10011070825421.6214@ntucsa>
Content-Description: 
Content-Disposition: attachment; filename="patch-isofs-2.4-20001107"

ZGlmZiAtdXIgaXNvZnMub3JpZy9pbm9kZS5jIGlzb2ZzL2lub2RlLmMNCi0t
LSBpc29mcy5vcmlnL2lub2RlLmMJVGh1IE9jdCAxOSAxNjo0ODo0MiAyMDAw
DQorKysgaXNvZnMvaW5vZGUuYwlUdWUgTm92ICA3IDA4OjA2OjIyIDIwMDAN
CkBAIC05ODUsNiArOTg1LDEyIEBADQogCXN5bmNfcGFnZTogYmxvY2tfc3lu
Y19wYWdlLA0KIAlibWFwOiBfaXNvZnNfYm1hcA0KIH07DQoraW50IHJlYWRw
YWdlX2Zvcm0yKHN0cnVjdCBmaWxlICpmaWxlLCBzdHJ1Y3QgcGFnZSAqcGFn
ZSk7DQorc3RhdGljIHN0cnVjdCBhZGRyZXNzX3NwYWNlX29wZXJhdGlvbnMg
aXNvZnNfYW9wc19mb3JtMiA9IHsNCisJcmVhZHBhZ2U6IHJlYWRwYWdlX2Zv
cm0yLA0KKwlzeW5jX3BhZ2U6IGJsb2NrX3N5bmNfcGFnZSwNCisJYm1hcDog
X2lzb2ZzX2JtYXANCit9Ow0KIA0KIHN0YXRpYyBpbmxpbmUgdm9pZCB0ZXN0
X2FuZF9zZXRfdWlkKHVpZF90ICpwLCB1aWRfdCB2YWx1ZSkNCiB7DQpAQCAt
MTA5Miw2ICsxMDk4LDE5NiBAQA0KIAlnb3RvIG91dDsNCiB9DQogDQoraW50
IGNkX2lvY3RsKHN0cnVjdCBzdXBlcl9ibG9jayAqcywgaW50IHJlcXVlc3Qs
IHVuc2lnbmVkIGxvbmcgYXJnKQ0KK3sNCisJcmV0dXJuIGlvY3RsX2J5X2Jk
ZXYocy0+c19iZGV2LHJlcXVlc3QsYXJnKTsNCit9DQorDQorc3RhdGljIGNo
YXIgKmxhc3RfYnVmOw0KK3Vuc2lnbmVkIGNoYXIqIGNkX3JlYWRfcmF3X3Nl
Y3RvcihzdHJ1Y3QgaW5vZGUgKmlub2RlLCBpbnQgc2VjdG9yX25yKQ0KK3sN
CisJc3RhdGljIERFQ0xBUkVfTVVURVgobGFzdF9idWZfc2VtKTsNCisJc3Rh
dGljIHN0cnVjdCBpbm9kZSogbGFzdF9pbm9kZTsNCisJc3RhdGljIGludCBs
YXN0X3NlY3Rvcl9uciA9IC0xOw0KKwl1bnNpZ25lZCBjaGFyICpidWY7DQor
CXN0cnVjdCBjZHJvbV9tc2YgKm1zZjsNCisJaW50IGxiYTsNCisNCisJYnVm
ID0ga21hbGxvYyhDRF9GUkFNRVNJWkVfUkFXLEdGUF9LRVJORUwpOw0KKwlp
ZihidWYgPT0gTlVMTCkgcmV0dXJuIE5VTEw7DQorDQorCWRvd24oJmxhc3Rf
YnVmX3NlbSk7DQorDQorCWlmKHNlY3Rvcl9uciA9PSBsYXN0X3NlY3Rvcl9u
ciAmJiBpbm9kZSA9PSBsYXN0X2lub2RlKQ0KKwkvLyBob3cgdG8gZG8gdGhl
IHJpZ2h0IGNoZWNrL2ludmFsaWRhdGU/DQorCXsNCisJCW1lbWNweShidWYs
bGFzdF9idWYsQ0RfRlJBTUVTSVpFX1JBVyk7DQorCQlnb3RvIG91dDsNCisJ
fQ0KKw0KKwlsYmEgPSBpc29mc19ibWFwKGlub2RlLDApICsgMTUwICsgc2Vj
dG9yX25yOw0KKwltc2YgPSAoc3RydWN0IGNkcm9tX21zZiAqKWJ1ZjsNCisJ
bXNmLT5jZG1zZl9taW4wID0gbGJhLzc1LzYwOw0KKwltc2YtPmNkbXNmX3Nl
YzAgPSAobGJhLzc1KSU2MDsNCisJbXNmLT5jZG1zZl9mcmFtZTAgPSBsYmEl
NzU7DQorCWlmKGNkX2lvY3RsKGlub2RlLT5pX3NiLENEUk9NUkVBRFJBVywo
dW5zaWduZWQgbG9uZyltc2YpIDwgMCkNCisJew0KKwkJa2ZyZWUoYnVmKTsN
CisJCWJ1ZiA9IE5VTEw7DQorCX0NCisJZWxzZQ0KKwl7DQorCQlsYXN0X2lu
b2RlID0gaW5vZGU7DQorCQlsYXN0X3NlY3Rvcl9uciA9IHNlY3Rvcl9ucjsN
CisJCW1lbWNweShsYXN0X2J1ZixidWYsQ0RfRlJBTUVTSVpFX1JBVyk7DQor
CX0NCitvdXQ6DQorCXVwKCZsYXN0X2J1Zl9zZW0pOw0KKwlyZXR1cm4gYnVm
Ow0KK30NCisNCisjZGVmaW5lIEZPUk0yX0RBVEFfU0laRSAyMzI0DQorc3Rh
dGljIGludCBraXNvZnNkX3BpZDsNCitzdGF0aWMgaW50IGtpc29mc2RfcnVu
bmluZyA9IDA7DQorc3RhdGljIHNwaW5sb2NrX3Qga2lzb2ZzZF9yZXFfbG9j
ayA9IFNQSU5fTE9DS19VTkxPQ0tFRDsNCitzdGF0aWMgTElTVF9IRUFEKGtp
c29mc2RfcmVxX2xpc3QpOwkvKiBMaXN0IG9mIHJlcXVlc3RzIG5lZWRpbmcg
c2VydmljaW5nICovDQorc3RhdGljIERFQ0xBUkVfV0FJVF9RVUVVRV9IRUFE
KGtpc29mc2Rfd2FpdCk7DQorDQorc3RydWN0IGtpc29mc2RfcmVxIHsNCisJ
c3RydWN0IGxpc3RfaGVhZCByZXFfbGlzdDsNCisJc3RydWN0IGlub2RlICpp
bm9kZTsNCisJc3RydWN0IHBhZ2UgKnBhZ2U7DQorfTsNCisNCitzdGF0aWMg
aW50IGtpc29mc2RfYWRkX3JlcXVlc3Qoc3RydWN0IGlub2RlKiBpbm9kZSwg
c3RydWN0IHBhZ2UgKnBhZ2UpDQorew0KKwlzdHJ1Y3Qga2lzb2ZzZF9yZXEg
KnJlcSA9IGttYWxsb2Moc2l6ZW9mKHN0cnVjdCBraXNvZnNkX3JlcSksDQor
CQkJCQkJR0ZQX0tFUk5FTCk7DQorCWlmKHJlcSA9PSBOVUxMKSByZXR1cm4g
LUVOT01FTTsNCisNCisJaWYgKCFQYWdlTG9ja2VkKHBhZ2UpKQ0KKwkJUEFH
RV9CVUcocGFnZSk7DQorCWNsZWFyX2JpdChQR191cHRvZGF0ZSwgJnBhZ2Ut
PmZsYWdzKTsNCisJY2xlYXJfYml0KFBHX2Vycm9yLCAmcGFnZS0+ZmxhZ3Mp
Ow0KKw0KKwlJTklUX0xJU1RfSEVBRCgmcmVxLT5yZXFfbGlzdCk7DQorCXJl
cS0+aW5vZGUgPSBpbm9kZTsNCisJcmVxLT5wYWdlID0gcGFnZTsNCisNCisJ
c3Bpbl9sb2NrKCZraXNvZnNkX3JlcV9sb2NrKTsNCisJbGlzdF9hZGQoJnJl
cS0+cmVxX2xpc3Qsa2lzb2ZzZF9yZXFfbGlzdC5wcmV2KTsNCisJd2FrZV91
cCgma2lzb2ZzZF93YWl0KTsNCisJc3Bpbl91bmxvY2soJmtpc29mc2RfcmVx
X2xvY2spOw0KKw0KKwlyZXR1cm4gMDsNCit9DQorDQorc3RhdGljIHZvaWQg
cmVhZHBhZ2VfZm9ybTJfcmVhbChzdHJ1Y3QgaW5vZGUqIGlub2RlLCBzdHJ1
Y3QgcGFnZSogcGFnZSkNCit7DQorCWNoYXIgKmJ1ZiA9IChjaGFyICopcGFn
ZV9hZGRyZXNzKHBhZ2UpOw0KKwlpbnQgc3RhcnRfc2VjdG9yLCBzdGFydF9i
eXRlOw0KKwlpbnQgc3RvcF9zZWN0b3IsIHN0b3BfYnl0ZTsNCisJaW50IHNl
Y3RvcjsNCisJaW50IG9mZnNldCA9IHBhZ2UtPmluZGV4IDw8IFBBR0VfQ0FD
SEVfU0hJRlQ7Ow0KKwkNCisJLy8gdGhlIGNvZGUgaXMgYWRhcHRlZCBmcm9t
IGNkWEEuYyBvZiBjZGZzLTAuNDENCisNCisJc3RhcnRfc2VjdG9yID0gb2Zm
c2V0IC8gRk9STTJfREFUQV9TSVpFOw0KKwlzdGFydF9ieXRlID0gb2Zmc2V0
ICUgRk9STTJfREFUQV9TSVpFOw0KKwlzdG9wX3NlY3RvciA9IChvZmZzZXQg
KyBQQUdFX1NJWkUpIC8gRk9STTJfREFUQV9TSVpFOw0KKwlzdG9wX2J5dGUg
PSAob2Zmc2V0ICsgUEFHRV9TSVpFKSAlIEZPUk0yX0RBVEFfU0laRTsNCisJ
DQorCWlmKHN0b3BfYnl0ZSA9PSAwKQ0KKwl7DQorCQktLXN0b3Bfc2VjdG9y
Ow0KKwkJc3RvcF9ieXRlID0gRk9STTJfREFUQV9TSVpFOw0KKwl9DQorDQor
CWZvcihzZWN0b3IgPSBzdGFydF9zZWN0b3I7IHNlY3RvciA8PSBzdG9wX3Nl
Y3Rvcjsgc2VjdG9yKyspDQorCXsNCisJCWludCBjb3B5X2xlbmd0aDsNCisJ
CXVuc2lnbmVkIGNoYXIgKmRhdGE7DQorCQl1bnNpZ25lZCBjaGFyICpyYXdf
c2VjdG9yID0gY2RfcmVhZF9yYXdfc2VjdG9yKGlub2RlLHNlY3Rvcik7DQor
CQlpZihyYXdfc2VjdG9yID09IE5VTEwpIGJyZWFrOw0KKw0KKwkJZGF0YSA9
IHJhd19zZWN0b3IgKyAyNDsNCisJCWlmKHNlY3RvciA9PSBzdGFydF9zZWN0
b3IpDQorCQl7DQorCQkJZGF0YSArPSBzdGFydF9ieXRlOw0KKwkJCWlmKHNl
Y3RvciAhPSBzdG9wX3NlY3RvcikNCisJCQkJY29weV9sZW5ndGggPSBGT1JN
Ml9EQVRBX1NJWkUgLSBzdGFydF9ieXRlOw0KKwkJCWVsc2UNCisJCQkJY29w
eV9sZW5ndGggPSBzdG9wX2J5dGUgLSBzdGFydF9ieXRlOw0KKwkJfSANCisJ
CWVsc2UgaWYgKHNlY3RvciA9PSBzdG9wX3NlY3RvcikNCisJCQljb3B5X2xl
bmd0aCA9IHN0b3BfYnl0ZTsNCisJCWVsc2UNCisJCQljb3B5X2xlbmd0aCA9
IEZPUk0yX0RBVEFfU0laRTsNCisJCQ0KKwkJbWVtY3B5KGJ1ZixkYXRhLGNv
cHlfbGVuZ3RoKTsNCisJCWJ1ZiArPSBjb3B5X2xlbmd0aDsNCisJCWtmcmVl
KHJhd19zZWN0b3IpOw0KKwl9DQorDQorCWlmKHNlY3RvciA+IHN0b3Bfc2Vj
dG9yKQ0KKwkJc2V0X2JpdChQR191cHRvZGF0ZSwgJnBhZ2UtPmZsYWdzKTsN
CisJZWxzZQ0KKwkJc2V0X2JpdChQR19lcnJvciwgJnBhZ2UtPmZsYWdzKTsN
CisJY2xlYXJfYml0KFBHX2xvY2tlZCwgJnBhZ2UtPmZsYWdzKTsNCisJd2Fr
ZV91cCgmcGFnZS0+d2FpdCk7DQorfQ0KKw0KK3N0YXRpYyB2b2lkIGtpc29m
c2RfcHJvY2Vzc19yZXF1ZXN0KHZvaWQpDQorew0KKwlzcGluX2xvY2soJmtp
c29mc2RfcmVxX2xvY2spOw0KKwl3aGlsZSghbGlzdF9lbXB0eSgma2lzb2Zz
ZF9yZXFfbGlzdCkpDQorCXsNCisJCXN0cnVjdCBsaXN0X2hlYWQgKiB0bXA7
DQorCQlzdHJ1Y3Qga2lzb2ZzZF9yZXEgKiByZXE7DQorCQkNCisJCXRtcCA9
IGtpc29mc2RfcmVxX2xpc3QubmV4dDsNCisJCWxpc3RfZGVsKHRtcCk7DQor
DQorCQlzcGluX3VubG9jaygma2lzb2ZzZF9yZXFfbG9jayk7DQorCQlyZXEg
PSBsaXN0X2VudHJ5KHRtcCwgc3RydWN0IGtpc29mc2RfcmVxLCByZXFfbGlz
dCk7DQorCQlyZWFkcGFnZV9mb3JtMl9yZWFsKHJlcS0+aW5vZGUsIHJlcS0+
cGFnZSk7DQorCQlrZnJlZShyZXEpOw0KKwkJc3Bpbl9sb2NrKCZraXNvZnNk
X3JlcV9sb2NrKTsNCisJfQ0KKwlzcGluX3VubG9jaygma2lzb2ZzZF9yZXFf
bG9jayk7DQorfQ0KKw0KK3N0YXRpYyBpbnQga2lzb2ZzZF90aHJlYWQodm9p
ZCAqdW51c2VkKQ0KK3sNCisJLyoNCisJICogVGhpcyB0aHJlYWQgZG9lc24n
dCBuZWVkIGFueSB1c2VyLWxldmVsIGFjY2VzcywNCisJICogc28gZ2V0IHJp
ZCBvZiBhbGwgb3VyIHJlc291cmNlcw0KKwkgKi8NCisJZXhpdF9maWxlcyhj
dXJyZW50KTsgIC8qIGRhZW1vbml6ZSBkb2Vzbid0IGRvIGV4aXRfZmlsZXMg
Ki8NCisJZGFlbW9uaXplKCk7DQorDQorCS8qIFNldHVwIGEgbmljZSBuYW1l
ICovDQorCXN0cmNweShjdXJyZW50LT5jb21tLCAia2lzb2ZzZCIpOw0KKw0K
KwkvKiBTZW5kIG1lIGEgc2lnbmFsIHRvIGdldCBtZSBkaWUgKGZvciBkZWJ1
Z2dpbmcpICovDQorCWRvIHsNCisJCWtpc29mc2RfcHJvY2Vzc19yZXF1ZXN0
KCk7DQorCQl3YWl0X2V2ZW50X2ludGVycnVwdGlibGUoa2lzb2ZzZF93YWl0
LCFsaXN0X2VtcHR5KCZraXNvZnNkX3JlcV9saXN0KSk7DQorCX0gd2hpbGUg
KCFzaWduYWxfcGVuZGluZyhjdXJyZW50KSk7DQorDQorCWtpc29mc2RfcnVu
bmluZyA9IDA7DQorCXJldHVybiAwOw0KK30NCisNCitpbnQgcmVhZHBhZ2Vf
Zm9ybTIoc3RydWN0IGZpbGUgKmZpbGUsIHN0cnVjdCBwYWdlICpwYWdlKQ0K
K3sNCisJc3RydWN0IGlub2RlICppbm9kZSA9IGZpbGUtPmZfZGVudHJ5LT5k
X2lub2RlOw0KKwlpZihraXNvZnNkX3J1bm5pbmcpDQorCQlyZXR1cm4ga2lz
b2ZzZF9hZGRfcmVxdWVzdChpbm9kZSwgcGFnZSk7DQorCWVsc2UNCisJCXJl
dHVybiAtRUlPOw0KK30NCisNCiBzdGF0aWMgdm9pZCBpc29mc19yZWFkX2lu
b2RlKHN0cnVjdCBpbm9kZSAqIGlub2RlKQ0KIHsNCiAJc3RydWN0IHN1cGVy
X2Jsb2NrICpzYiA9IGlub2RlLT5pX3NiOw0KQEAgLTEyMzksOCArMTQzNSwy
MCBAQA0KICNlbmRpZiBJR05PUkVfV1JPTkdfTVVMVElfVk9MVU1FX1NQRUNT
DQogCXsNCiAJICBpZiAoU19JU1JFRyhpbm9kZS0+aV9tb2RlKSkgew0KKwkg
ICAgdW5zaWduZWQgY2hhciAqYnVmOw0KIAkgICAgaW5vZGUtPmlfZm9wID0g
JmdlbmVyaWNfcm9fZm9wczsNCiAJICAgIGlub2RlLT5pX2RhdGEuYV9vcHMg
PSAmaXNvZnNfYW9wczsNCisJICAgIGJ1ZiA9IGNkX3JlYWRfcmF3X3NlY3Rv
cihpbm9kZSwwKTsNCisJICAgIGlmKGJ1ZikNCisJICAgIHsNCisJCSAgICBp
ZihidWZbMTVdID09IDIgJiYgKGJ1ZlsxOF0mKDE8PDUpKSkNCisJCSAgICB7
DQorCQkJaW5vZGUtPmlfZGF0YS5hX29wcyA9ICZpc29mc19hb3BzX2Zvcm0y
Ow0KKwkJCWlub2RlLT5pX3NpemUgPSAoaW5vZGUtPmlfc2l6ZS8yMDQ4KSpG
T1JNMl9EQVRBX1NJWkUrDQorCQkJCQkoaW5vZGUtPmlfc2l6ZSUyMDQ4KTsN
CisJCSAgICB9DQorCQkgICAga2ZyZWUoYnVmKTsNCisJICAgIH0NCiAJICB9
IGVsc2UgaWYgKFNfSVNESVIoaW5vZGUtPmlfbW9kZSkpIHsNCiAJICAgIGlu
b2RlLT5pX29wID0gJmlzb2ZzX2Rpcl9pbm9kZV9vcGVyYXRpb25zOw0KIAkg
ICAgaW5vZGUtPmlfZm9wID0gJmlzb2ZzX2Rpcl9vcGVyYXRpb25zOw0KQEAg
LTE0MzAsMTIgKzE2MzgsNDMgQEANCiANCiBzdGF0aWMgaW50IF9faW5pdCBp
bml0X2lzbzk2NjBfZnModm9pZCkNCiB7DQotICAgICAgICByZXR1cm4gcmVn
aXN0ZXJfZmlsZXN5c3RlbSgmaXNvOTY2MF9mc190eXBlKTsNCisJaW50IGVy
cjsNCisgICAgICAgIGVyciA9IHJlZ2lzdGVyX2ZpbGVzeXN0ZW0oJmlzbzk2
NjBfZnNfdHlwZSk7DQorICAgICAgICBpZihlcnIgPCAwKSByZXR1cm4gZXJy
Ow0KKw0KKwlsYXN0X2J1ZiA9IGttYWxsb2MoQ0RfRlJBTUVTSVpFX1JBVyxH
RlBfS0VSTkVMKTsNCisJaWYobGFzdF9idWYgPT0gTlVMTCkgcmV0dXJuIC1F
Tk9NRU07DQorDQorCWtpc29mc2RfcGlkID0ga2VybmVsX3RocmVhZChraXNv
ZnNkX3RocmVhZCwgTlVMTCwgDQorCQkJQ0xPTkVfRlMgfCBDTE9ORV9GSUxF
UyB8IENMT05FX1NJR0hBTkQpOw0KKwlpZihraXNvZnNkX3BpZCA+IDApIA0K
Kwl7DQorCQlraXNvZnNkX3J1bm5pbmcgPSAxOw0KKwkJcmV0dXJuIDA7DQor
CX0NCisNCisJcHJpbnRrKCJpbml0X2lzbzk2NjBfZnM6IGtlcm5lbF90aHJl
YWQgZmFpbGVkLlxuIik7DQorCXVucmVnaXN0ZXJfZmlsZXN5c3RlbSgmaXNv
OTY2MF9mc190eXBlKTsNCisJcmV0dXJuIC0xOw0KIH0NCiANCiBzdGF0aWMg
dm9pZCBfX2V4aXQgZXhpdF9pc285NjYwX2ZzKHZvaWQpDQogew0KLSAgICAg
ICAgdW5yZWdpc3Rlcl9maWxlc3lzdGVtKCZpc285NjYwX2ZzX3R5cGUpOw0K
KwlpbnQgcmV0Ow0KKwlyZXQgPSBraWxsX3Byb2Moa2lzb2ZzZF9waWQsIFNJ
R1RFUk0sIDEpOw0KKwlpZighcmV0KSB7DQorCQkvKiBXYWl0IDEwIHNlY29u
ZHMgKi8NCisJCWludCBjb3VudCA9IDEwICogMTAwOw0KKwkJd2hpbGUgKGtp
c29mc2RfcnVubmluZyAmJiAtLWNvdW50KSB7DQorCQkJY3VycmVudC0+c3Rh
dGUgPSBUQVNLX0lOVEVSUlVQVElCTEU7DQorCQkJc2NoZWR1bGVfdGltZW91
dCgxKTsNCisJCX0NCisNCisJCWlmKCFjb3VudCkNCisJCQlwcmludGsoIkdp
dmluZyB1cCBvbiBraWxsaW5nIGtpc29mc2QgISIpOw0KKwl9DQorCXVucmVn
aXN0ZXJfZmlsZXN5c3RlbSgmaXNvOTY2MF9mc190eXBlKTsNCisJa2ZyZWUo
bGFzdF9idWYpOw0KIH0NCiANCiBFWFBPUlRfTk9fU1lNQk9MUzsNCg==
---559023410-851401618-973556742=:6214--
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
Please read the FAQ at http://www.tux.org/lkml/
