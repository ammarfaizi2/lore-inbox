Return-Path: <linux-kernel-owner+willy=40w.ods.org-S268351AbUHQRRY@vger.kernel.org>
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S268351AbUHQRRY (ORCPT <rfc822;willy@w.ods.org>);
	Tue, 17 Aug 2004 13:17:24 -0400
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S268349AbUHQRRY
	(ORCPT <rfc822;linux-kernel-outgoing>);
	Tue, 17 Aug 2004 13:17:24 -0400
Received: from omx1-ext.sgi.com ([192.48.179.11]:45250 "EHLO
	omx1.americas.sgi.com") by vger.kernel.org with ESMTP
	id S268351AbUHQRPq (ORCPT <rfc822;linux-kernel@vger.kernel.org>);
	Tue, 17 Aug 2004 13:15:46 -0400
Date: Tue, 17 Aug 2004 12:15:35 -0500
From: Erik Jacobson <erikj@subway.americas.sgi.com>
To: Andrew Morton <akpm@osdl.org>
cc: linux-kernel@vger.kernel.org
Subject: Re: [PATCH] Process Aggregates for 2.6.8
In-Reply-To: <Pine.SGI.4.53.0408170958550.711096@subway.americas.sgi.com>
Message-ID: <Pine.SGI.4.53.0408171212260.712440@subway.americas.sgi.com>
References: <Pine.SGI.4.53.0408161127580.663457@subway.americas.sgi.com>
 <20040817000232.36bc64ac.akpm@osdl.org> <Pine.SGI.4.53.0408170958550.711096@subway.americas.sgi.com>
MIME-Version: 1.0
Content-Type: MULTIPART/MIXED; BOUNDARY="-2136806248-455127035-1092762935=:712440"
Sender: linux-kernel-owner@vger.kernel.org
X-Mailing-List: linux-kernel@vger.kernel.org

  This message is in MIME format.  The first part should be readable text,
  while the remaining parts are likely unreadable without MIME-aware tools.
  Send mail to mime@docserver.cac.washington.edu for more info.

---2136806248-455127035-1092762935=:712440
Content-Type: TEXT/PLAIN; charset=US-ASCII

> > Did you get these?
> > ftp://ftp.kernel.org/pub/linux/kernel/people/akpm/patches/2.6/2.6.8.1/2.6.8.1-mm1/broken-out/process-aggregates-warning-fix.patch
> > ftp://ftp.kernel.org/pub/linux/kernel/people/akpm/patches/2.6/2.6.8.1/2.6.8.1-mm1/broken-out/process-aggregates-macro-fix.patch
...
> However, I didn't catch the "macro fix".  I'm updating my stuff to

Attached is a new PAGG patch that includes the fix in
process-aggregates-macro-fix.patch above.  This patch should now be
in line with 2.6.8.1-mm1.

Signed-Off-By: Erik Jacobson <erikj@sgi.com>

--
Erik Jacobson - Linux System Software - Silicon Graphics - Eagan, Minnesota
---2136806248-455127035-1092762935=:712440
Content-Type: TEXT/PLAIN; charset=US-ASCII; name=pagg
Content-Transfer-Encoding: BASE64
Content-ID: <Pine.SGI.4.53.0408171215350.712440@subway.americas.sgi.com>
Content-Description: 
Content-Disposition: attachment; filename=pagg

SW5kZXg6IGxpbnV4L0RvY3VtZW50YXRpb24vcGFnZy50eHQNCj09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT0NCi0tLSAvZGV2L251bGwJMTk3MC0wMS0wMSAwMDow
MDowMC4wMDAwMDAwMDAgKzAwMDANCisrKyBsaW51eC9Eb2N1bWVudGF0aW9u
L3BhZ2cudHh0CTIwMDQtMDgtMTcgMTE6NDk6MjIuMDAwMDAwMDAwIC0wNTAw
DQpAQCAtMCwwICsxLDMyIEBADQorTGludXggUHJvY2VzcyBBZ2dyZWdhdGVz
IChQQUdHKQ0KKy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCisN
CitUaGUgcHJvY2VzcyBhZ2dyZWdhdGVzIGluZnJhc3RydWN0dXJlLCBvciBQ
QUdHLCBwcm92aWRlcyBhIGdlbmVyYWxpemVkDQorbWVjaGFuaXNtIGZvciBw
cm92aWRpbmcgYXJiaXRyYXJ5IHByb2Nlc3MgZ3JvdXBzIGluIExpbnV4LiAg
UEFHRyBjb25zaXN0cw0KK29mIGEgc2VyaWVzIG9mIGZ1bmN0aW9ucyBmb3Ig
cmVnaXN0ZXJpbmcgYW5kIHVucmVnaXN0ZXJpbmcgc3VwcG9ydA0KK2ZvciBu
ZXcgdHlwZXMgb2YgcHJvY2VzcyBhZ2dyZWdhdGlvbiBjb250YWluZXJzIHdp
dGggdGhlIGtlcm5lbC4NCitUaGlzIGlzIHNpbWlsYXIgdG8gdGhlIHN1cHBv
cnQgY3VycmVudGx5IHByb3ZpZGVkIHdpdGhpbiBMaW51eCB0aGF0DQorYWxs
b3dzIGZvciBkeW5hbWljIHN1cHBvcnQgb2YgZmlsZXN5c3RlbXMsIGJsb2Nr
IGFuZCBjaGFyYWN0ZXIgZGV2aWNlcywNCitzeW1ib2wgdGFibGVzLCBuZXR3
b3JrIGRldmljZXMsIHNlcmlhbCBkZXZpY2VzLCBhbmQgZXhlY3V0aW9uIGRv
bWFpbnMuDQorVGhpcyBpbXBsZW1lbnRhdGlvbiBvZiBQQUdHIHByb3ZpZGVz
IGRldmVsb3BlcnMgdGhlIGJhc2ljIGhvb2tzIG5lY2Vzc2FyeQ0KK3RvIGlt
cGxlbWVudCBrZXJuZWwgbW9kdWxlcyBmb3Igc3BlY2lmaWMgcHJvY2VzcyBj
b250YWluZXJzLCBzdWNoIGFzDQordGhlIGpvYiBjb250YWluZXIuDQorDQor
VGhlIGRvX2ZvcmsgZnVuY3Rpb24gaW4gdGhlIGtlcm5lbCB3YXMgYWx0ZXJl
ZCB0byBzdXBwb3J0IFBBR0cuICBJZiBhDQorcHJvY2VzcyBpcyBhdHRhY2hl
ZCB0byBhbnkgUEFHRyBjb250YWluZXJzIGFuZCBzdWJzZXF1ZW50bHkgZm9y
a3MgYQ0KK2NoaWxkIHByb2Nlc3MsIHRoZSBjaGlsZCBwcm9jZXNzIHdpbGwg
YWxzbyBiZSBhdHRhY2hlZCB0byB0aGUgc2FtZSBQQUdHDQorY29udGFpbmVy
cy4gIFRoZSBQQUdHIGNvbnRhaW5lcnMgaW52b2x2ZWQgZHVyaW5nIHRoZSBm
b3JrIGFyZSBub3RpZmllZA0KK3RoYXQgYSBuZXcgcHJvY2VzcyBoYXMgYmVl
biBhdHRhY2hlZC4gIFRoZSBub3RpZmljYXRpb24gaXMgYWNjb21wbGlzaGVk
DQordmlhIGEgY2FsbGJhY2sgZnVuY3Rpb24gcHJvdmlkZWQgYnkgdGhlIFBB
R0cgbW9kdWxlLg0KKw0KK1RoZSBkb19leGl0IGZ1bmN0aW9uIGluIHRoZSBr
ZXJuZWwgaGFzIGFsc28gYmVlbiBhbHRlcmVkLiAgSWYgYSBwcm9jZXNzDQor
aXMgYXR0YWNoZWQgdG8gYW55IFBBR0cgY29udGFpbmVycyBhbmQgdGhhdCBw
cm9jZXNzIGlzIGV4aXRpbmcsIHRoZSBQQUdHDQorY29udGFpbmVycyBhcmUg
bm90aWZpZWQgdGhhdCBhIHByb2Nlc3MgaGFzIGRldGFjaGVkIGZyb20gdGhl
IGNvbnRhaW5lci4NCitUaGUgbm90aWZpY2F0aW9uIGlzIGFjY29tcGxpc2hl
ZCB2aWEgYSBjYWxsYmFjayBmdW5jdGlvbiBwcm92aWRlZCBieQ0KK3RoZSBQ
QUdHIG1vZHVsZS4NCisNCitUaGUgc3lzX2V4ZWN2ZSBmdW5jdGlvbiBoYXMg
YmVlbiBtb2RpZmllZCB0byBzdXBwb3J0IGFuIG9wdGlvbmFsIGNhbGxvdXQN
Cit0aGF0IGNhbiBiZSBydW4gd2hlbiBhIHByb2Nlc3MgaW4gYSBwYWdnIGxp
c3QgZG9lcyBhbiBleGVjLiAgSXQgY2FuIGJlIA0KK3VzZWQsIGZvciBleGFt
cGxlLCBieSBvdGhlciBrZXJuZWwgbW9kdWxlcyB0aGF0IHdpc2ggdG8gZG8g
YWR2YW5jZWQgQ1BVDQorcGxhY2VtZW50IG9uIG11bHRpLXByb2Nlc3NvciBz
eXN0ZW1zIChqdXN0IG9uZSBleGFtcGxlKS4NCisNCkluZGV4OiBsaW51eC9m
cy9leGVjLmMNCj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCi0tLSBsaW51eC5v
cmlnL2ZzL2V4ZWMuYwkyMDA0LTA4LTE0IDAwOjM2OjU2LjAwMDAwMDAwMCAt
MDUwMA0KKysrIGxpbnV4L2ZzL2V4ZWMuYwkyMDA0LTA4LTE3IDExOjQ5OjIy
LjAwMDAwMDAwMCAtMDUwMA0KQEAgLTQ2LDYgKzQ2LDcgQEANCiAjaW5jbHVk
ZSA8bGludXgvc2VjdXJpdHkuaD4NCiAjaW5jbHVkZSA8bGludXgvc3lzY2Fs
bHMuaD4NCiAjaW5jbHVkZSA8bGludXgvcm1hcC5oPg0KKyNpbmNsdWRlIDxs
aW51eC9wYWdnLmg+DQogDQogI2luY2x1ZGUgPGFzbS91YWNjZXNzLmg+DQog
I2luY2x1ZGUgPGFzbS9tbXVfY29udGV4dC5oPg0KQEAgLTExNDAsNiArMTE0
MSw3IEBADQogCXJldHZhbCA9IHNlYXJjaF9iaW5hcnlfaGFuZGxlcigmYnBy
bSxyZWdzKTsNCiAJaWYgKHJldHZhbCA+PSAwKSB7DQogCQlmcmVlX2FyZ19w
YWdlcygmYnBybSk7DQorCQlwYWdnX2V4ZWMoY3VycmVudCk7DQogDQogCQkv
KiBleGVjdmUgc3VjY2VzcyAqLw0KIAkJc2VjdXJpdHlfYnBybV9mcmVlKCZi
cHJtKTsNCkluZGV4OiBsaW51eC9pbmNsdWRlL2xpbnV4L2luaXRfdGFzay5o
DQo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09DQotLS0gbGludXgub3JpZy9pbmNs
dWRlL2xpbnV4L2luaXRfdGFzay5oCTIwMDQtMDgtMTQgMDA6MzY6MTYuMDAw
MDAwMDAwIC0wNTAwDQorKysgbGludXgvaW5jbHVkZS9saW51eC9pbml0X3Rh
c2suaAkyMDA0LTA4LTE3IDExOjQ5OjIyLjAwMDAwMDAwMCAtMDUwMA0KQEAg
LTIsNiArMiw3IEBADQogI2RlZmluZSBfTElOVVhfX0lOSVRfVEFTS19IDQog
DQogI2luY2x1ZGUgPGxpbnV4L2ZpbGUuaD4NCisjaW5jbHVkZSA8bGludXgv
cGFnZy5oPg0KIA0KICNkZWZpbmUgSU5JVF9GSUxFUyBcDQogeyAJCQkJCQkJ
XA0KQEAgLTExMiw2ICsxMTMsNyBAQA0KIAkucHJvY19sb2NrCT0gU1BJTl9M
T0NLX1VOTE9DS0VELAkJCQlcDQogCS5zd2l0Y2hfbG9jawk9IFNQSU5fTE9D
S19VTkxPQ0tFRCwJCQkJXA0KIAkuam91cm5hbF9pbmZvCT0gTlVMTCwJCQkJ
CQlcDQorCUlOSVRfVEFTS19QQUdHKHRzaykJCQkJCQlcDQogfQ0KIA0KIA0K
SW5kZXg6IGxpbnV4L2luY2x1ZGUvbGludXgvcGFnZy5oDQo9PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09DQotLS0gL2Rldi9udWxsCTE5NzAtMDEtMDEgMDA6MDA6
MDAuMDAwMDAwMDAwICswMDAwDQorKysgbGludXgvaW5jbHVkZS9saW51eC9w
YWdnLmgJMjAwNC0wOC0xNyAxMTo1MjowNC4wMDAwMDAwMDAgLTA1MDANCkBA
IC0wLDAgKzEsMjAyIEBADQorLyogDQorICogUEFHRyAoUHJvY2VzcyBBZ2dy
ZWdhdGVzKSBpbnRlcmZhY2UNCisgKg0KKyAqIA0KKyAqIENvcHlyaWdodCAo
YykgMjAwMC0yMDAyLCAyMDA0IFNpbGljb24gR3JhcGhpY3MsIEluYy4gIEFs
bCBSaWdodHMgUmVzZXJ2ZWQuDQorICoNCisgKiBUaGlzIHByb2dyYW0gaXMg
ZnJlZSBzb2Z0d2FyZTsgeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29y
IG1vZGlmeQ0KKyAqIGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdl
bmVyYWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5DQorICogdGhl
IEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbjsgZWl0aGVyIHZlcnNpb24gMiBv
ZiB0aGUgTGljZW5zZSwgb3INCisgKiAoYXQgeW91ciBvcHRpb24pIGFueSBs
YXRlciB2ZXJzaW9uLg0KKyAqDQorICogVGhpcyBwcm9ncmFtIGlzIGRpc3Ry
aWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsDQor
ICogYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhl
IGltcGxpZWQgd2FycmFudHkgb2YNCisgKiBNRVJDSEFOVEFCSUxJVFkgb3Ig
RklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlDQor
ICogR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWls
cy4NCisgKg0KKyAqIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkg
b2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlDQorICogYWxvbmcg
d2l0aCB0aGlzIHByb2dyYW07IGlmIG5vdCwgd3JpdGUgdG8gdGhlIEZyZWUg
U29mdHdhcmUNCisgKiBGb3VuZGF0aW9uLCBJbmMuLCA1OSBUZW1wbGUgUGxh
Y2UsIFN1aXRlIDMzMCwgQm9zdG9uLCBNQSAwMjExMS0xMzA3IFVTQQ0KKyAq
DQorICoNCisgKiBDb250YWN0IGluZm9ybWF0aW9uOiAgU2lsaWNvbiBHcmFw
aGljcywgSW5jLiwgMTUwMCBDcml0dGVuZGVuIExhbmUsDQorICogTW91bnRh
aW4gVmlldywgQ0EgIDk0MDQzLCBvcjoNCisgKiANCisgKiBodHRwOi8vd3d3
LnNnaS5jb20gDQorICogDQorICogRm9yIGZ1cnRoZXIgaW5mb3JtYXRpb24g
cmVnYXJkaW5nIHRoaXMgbm90aWNlLCBzZWU6IA0KKyAqIA0KKyAqIGh0dHA6
Ly9vc3Muc2dpLmNvbS9wcm9qZWN0cy9HZW5JbmZvL05vdGljZUV4cGxhbg0K
KyAqLw0KKw0KKy8qDQorICogRGF0YSBzdHJ1Y3R1cmUgZGVmaW5pdGlvbnMg
YW5kIGZ1bmN0aW9uIHByb3RvdHlwZXMgdXNlZCB0byBpbXBsZW1lbnQNCisg
KiBwcm9jZXNzIGFnZ3JlZ2F0ZXMgKHBhZ2dzKS4NCisgKg0KKyAqIFBhZ2dz
IHByb3ZpZGVzIGEgZ2VuZXJhbGl6ZWQgd2F5IHRvIGltcGxlbWVudCBwcm9j
ZXNzIGdyb3VwaW5ncyBvcg0KKyAqIGNvbnRhaW5lcnMuICBNb2R1bGVzIHVz
ZSB0aGVzZSBmdW5jdGlvbnMgdG8gcmVnaXN0ZXIgd2l0aCB0aGUga2VybmVs
IGFzDQorICogcHJvdmlkZXJzIG9mIHByb2Nlc3MgYWdncmVnYXRpb24gY29u
dGFpbmVycy4gVGhlIHBhZ2cgZGF0YSBzdHJ1Y3R1cmVzDQorICogZGVmaW5l
IHRoZSBjYWxsYmFjayBmdW5jdGlvbnMgYW5kIGRhdGEgYWNjZXNzIHBvaW50
ZXJzIGJhY2sgaW50byB0aGUNCisgKiBwYWdnIG1vZHVsZXMuDQorICovDQor
DQorI2lmbmRlZiBfTElOVVhfUEFHR19IDQorI2RlZmluZSBfTElOVVhfUEFH
R19IDQorDQorI2luY2x1ZGUgPGxpbnV4L3NjaGVkLmg+DQorDQorI2lmZGVm
IENPTkZJR19QQUdHDQorDQorI2RlZmluZSBQQUdHX05BTUVMTgkzMgkJLyog
TWF4IGNoYXJzIGluIFBBR0cgbW9kdWxlIG5hbWUgKi8NCisNCisNCisvKioN
CisgKiBJTklUX1BBR0dfTElTVCAtIHVzZWQgdG8gaW5pdGlhbGl6ZSBhIHBh
Z2dfbGlzdCBzdHJ1Y3R1cmUgYWZ0ZXIgZGVjbGFyYXRpb24gDQorICogQF9s
OiBUYXNrIHN0cnVjdCB0byBpbml0IHRoZSBwYWdnX2xpc3QgYW5kIHNlbWFw
aG9yZSBpbg0KKyAqIA0KKyAqLw0KKyNkZWZpbmUgSU5JVF9QQUdHX0xJU1Qo
X2wpCQkJCQkJXA0KK2RvIHsJCQkJCQkJCQlcDQorCUlOSVRfTElTVF9IRUFE
KCYoX2wpLT5wYWdnX2xpc3QpOwkJCQkJXA0KKwlpbml0X3J3c2VtKCYoX2wp
LT5wYWdnX3NlbSk7CQkJCQkJXA0KK30gd2hpbGUoMCkNCisJDQorDQorLyoN
CisgKiBVc2VkIGJ5IHRhc2tfc3RydWN0IHRvIG1hbmFnZSBsaXN0IG9mIHBh
Z2cgYXR0YWNobWVudHMgZm9yIHRoZSBwcm9jZXNzLiAgDQorICogRWFjaCBw
YWdnIHByb3ZpZGVzIHRoZSBsaW5rIGJldHdlZW4gdGhlIHByb2Nlc3MgYW5k
IHRoZSANCisgKiBjb3JyZWN0IHBhZ2cgY29udGFpbmVyLg0KKyAqDQorICog
U1RSVUNUIE1FTUJFUlM6DQorICogICAgIGhvb2s6CVJlZmVyZW5jZSB0byBw
YWdnIG1vZHVsZSBzdHJ1Y3R1cmUuICBUaGF0IHN0cnVjdA0KKyAqICAgICAJ
CWhvbGRzIHRoZSBuYW1lIGtleSBhbmQgZnVuY3Rpb24gcG9pbnRlcnMuDQor
ICogICAgIGRhdGE6CU9wYXF1ZSBkYXRhIHBvaW50ZXIgLSBkZWZpbmVkIGJ5
IHBhZ2cgbW9kdWxlcy4NCisgKiAgICAgZW50cnk6CUxpc3QgcG9pbnRlcnMN
CisgKi8NCitzdHJ1Y3QgcGFnZyB7DQorICAgICAgIHN0cnVjdCBwYWdnX2hv
b2sJKmhvb2s7DQorICAgICAgIHZvaWQJCSpkYXRhOw0KKyAgICAgICBzdHJ1
Y3QgbGlzdF9oZWFkCWVudHJ5Ow0KK307DQorDQorLyoNCisgKiBVc2VkIGJ5
IHBhZ2cgbW9kdWxlcyB0byBkZWZpbmUgdGhlIGNhbGxiYWNrIGZ1bmN0aW9u
cyBpbnRvIHRoZSANCisgKiBtb2R1bGUuDQorICoNCisgKiBTVFJVQ1QgTUVN
QkVSUzoNCisgKiAgICAgbmFtZTogICAgICAgICAgIFRoZSBuYW1lIG9mIHRo
ZSBwYWdnIGNvbnRhaW5lciB0eXBlIHByb3ZpZGVkIGJ5DQorICogICAgICAg
ICAgICAgICAgICAgICB0aGUgbW9kdWxlLiBUaGlzIHdpbGwgYmUgc2V0IGJ5
IHRoZSBwYWdnIG1vZHVsZS4NCisgKiAgICAgYXR0YWNoOiAgICAgICAgIEZ1
bmN0aW9uIHBvaW50ZXIgdG8gZnVuY3Rpb24gdXNlZCB3aGVuIGF0dGFjaGlu
Zw0KKyAqICAgICAgICAgICAgICAgICAgICAgYSBwcm9jZXNzIHRvIHRoZSBw
YWdnIGNvbnRhaW5lciByZWZlcmVuY2VkIGJ5IA0KKyAqICAgICAgICAgICAg
ICAgICAgICAgdGhpcyBzdHJ1Y3QuDQorICogICAgIGRldGFjaDogICAgICAg
ICBGdW5jdGlvbiBwb2ludGVyIHRvIGZ1bmN0aW9uIHVzZWQgd2hlbiBkZXRh
Y2hpbmcNCisgKiAgICAgICAgICAgICAgICAgICAgIGEgcHJvY2VzcyB0byB0
aGUgcGFnZyBjb250YWluZXIgcmVmZXJlbmNlZCBieSANCisgKiAgICAgICAg
ICAgICAgICAgICAgIHRoaXMgc3RydWN0Lg0KKyAqICAgICBpbml0OiAgICAg
ICAgICAgRnVuY3Rpb24gcG9pbnRlciB0byBpbml0aWFsaXphdGlvbiBmdW5j
dGlvbi4gIFRoaXMNCisgKiAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9u
IGlzIHVzZWQgd2hlbiB0aGUgbW9kdWxlIGlzIGxvYWRlZCB0byBhdHRhY2gN
CisgKiAgICAgICAgICAgICAgICAgICAgIGV4aXN0aW5nIHByb2Nlc3NlcyB0
byBhIGRlZmF1bHQgY29udGFpbmVyIGFzIGRlZmluZWQgYnkNCisgKiAgICAg
ICAgICAgICAgICAgICAgIHRoZSBwYWdnIG1vZHVsZS4gVGhpcyBpcyBvcHRp
b25hbCBhbmQgbWF5IGJlIHNldCB0byANCisgKiAgICAgICAgICAgICAgICAg
ICAgIE5VTEwgaWYgaXQgaXMgbm90IG5lZWRlZCBieSB0aGUgcGFnZyBtb2R1
bGUuDQorICogICAgIGRhdGE6ICAgICAgICAgICBPcGFxdWUgZGF0YSBwb2lu
dGVyIC0gZGVmaW5lZCBieSBwYWdnIG1vZHVsZXMuDQorICogICAgIG1vZHVs
ZTogICAgICAgICBQb2ludGVyIHRvIGtlcm5lbCBtb2R1bGUgc3RydWN0LiAg
VXNlZCB0byBpbmNyZW1lbnQgJiANCisgKiAgICAgICAgICAgICAgICAgICAg
IGRlY3JlbWVudCB0aGUgdXNlIGNvdW50IGZvciB0aGUgbW9kdWxlLg0KKyAq
ICAgICBlbnRyeToJICAgICAgIExpc3QgcG9pbnRlcnMNCisgKiAgICAgZXhl
YzogICAgICAgICAgIEZ1bmN0aW9uIHBvaW50ZXIgdG8gZnVuY3Rpb24gdXNl
ZCB3aGVuIGEgcHJvY2Vzcw0KKyAqICAgICAgICAgICAgICAgICAgICAgaW4g
dGhlIHBhZ2cgY29udGFpbmVyIGV4ZWMncyBhIG5ldyBwcm9jZXNzLiBUaGlz
DQorICogICAgICAgICAgICAgICAgICAgICBpcyBvcHRpb25hbCBhbmQgbWF5
IGJlIHNldCB0byBOVUxMIGlmIGl0IGlzIG5vdCANCisgKiAgICAgICAgICAg
ICAgICAgICAgIG5lZWRlZCBieSB0aGUgcGFnZyBtb2R1bGUuDQorICogICAg
IHJlZmNudDogICAgICAgICBLZWVwIHRyYWNrIG9mIHVzZXIgY291bnQgb2Yg
dGhlIHBhZ2cgaG9vaw0KKyAqLw0KK3N0cnVjdCBwYWdnX2hvb2sgew0KKyAg
ICAgICBzdHJ1Y3QgbW9kdWxlCSptb2R1bGU7DQorICAgICAgIGNoYXIJCSpu
YW1lOwkvKiBOYW1lIEtleSAtIHJlc3RyaWN0ZWQgdG8gMzIgY2hhcmFjdGVy
cyAqLw0KKyAgICAgICB2b2lkCQkqZGF0YTsJLyogT3BhcXVlIG1vZHVsZSBz
cGVjaWZpYyBkYXRhICovDQorICAgICAgIHN0cnVjdCBsaXN0X2hlYWQJZW50
cnk7CS8qIExpc3QgcG9pbnRlcnMgKi8NCisJCSBhdG9taWNfdCByZWZjbnQ7
IC8qIHVzYWdlIGNvdW50ZXIgKi8NCisgICAgICAgaW50CQkoKmluaXQpKHN0
cnVjdCB0YXNrX3N0cnVjdCAqLCBzdHJ1Y3QgcGFnZyAqKTsNCisgICAgICAg
aW50CQkoKmF0dGFjaCkoc3RydWN0IHRhc2tfc3RydWN0ICosIHN0cnVjdCBw
YWdnICosIHZvaWQqKTsNCisgICAgICAgdm9pZAkJKCpkZXRhY2gpKHN0cnVj
dCB0YXNrX3N0cnVjdCAqLCBzdHJ1Y3QgcGFnZyAqKTsNCisgICAgICAgdm9p
ZAkJKCpleGVjKShzdHJ1Y3QgdGFza19zdHJ1Y3QgKiwgc3RydWN0IHBhZ2cg
Kik7DQorfTsNCisNCisNCisvKiBLZXJuZWwgc2VydmljZSBmdW5jdGlvbnMg
Zm9yIHByb3ZpZGluZyBQQUdHIHN1cHBvcnQgKi8NCitleHRlcm4gc3RydWN0
IHBhZ2cgKnBhZ2dfZ2V0KHN0cnVjdCB0YXNrX3N0cnVjdCAqdGFzaywgY2hh
ciAqa2V5KTsNCitleHRlcm4gc3RydWN0IHBhZ2cgKnBhZ2dfYWxsb2Moc3Ry
dWN0IHRhc2tfc3RydWN0ICp0YXNrLCANCisJCQkgICAgICAgc3RydWN0IHBh
Z2dfaG9vayAqcHQpOw0KK2V4dGVybiB2b2lkIHBhZ2dfZnJlZShzdHJ1Y3Qg
cGFnZyAqcGFnZyk7DQorZXh0ZXJuIGludCBwYWdnX2hvb2tfcmVnaXN0ZXIo
c3RydWN0IHBhZ2dfaG9vayAqcHRfbmV3KTsNCitleHRlcm4gaW50IHBhZ2df
aG9va191bnJlZ2lzdGVyKHN0cnVjdCBwYWdnX2hvb2sgKnB0X29sZCk7DQor
ZXh0ZXJuIHZvaWQgX19wYWdnX2F0dGFjaChzdHJ1Y3QgdGFza19zdHJ1Y3Qg
KnRvX3Rhc2ssIA0KKwkJCSBzdHJ1Y3QgdGFza19zdHJ1Y3QgKmZyb21fdGFz
ayk7DQorZXh0ZXJuIHZvaWQgX19wYWdnX2RldGFjaChzdHJ1Y3QgdGFza19z
dHJ1Y3QgKnRhc2spOw0KK2V4dGVybiBpbnQgX19wYWdnX2V4ZWMoc3RydWN0
IHRhc2tfc3RydWN0ICp0YXNrKTsNCisNCisvKioNCisgKiBwYWdnX2F0dGFj
aCAtIGNoaWxkIGluaGVyaXRzIGF0dGFjaG1lbnQgdG8gcGFnZyBjb250YWlu
ZXJzIG9mIGl0cyBwYXJlbnQNCisgKiBAY2hpbGQ6IGNoaWxkIHRhc2sgLSB0
byBpbmhlcml0DQorICogQHBhcmVudDogcGFyZW5ldCB0YXNrIC0gY2hpbGQg
aW5oZXJpdHMgcGFnZyBjb250YWluZXJzIGZyb20gdGhpcyBwYXJlbnQNCisg
KiANCisgKiBmdW5jdGlvbiB1c2VkIHdoZW4gYSBjaGlsZCBwcm9jZXNzIG11
c3QgaW5oZXJpdCBhdHRhY2htZW50IHRvIHBhZ2cNCisgKiBjb250YWluZXJz
IGZyb20gdGhlIHBhcmVudC4NCisgKg0KKyAqLw0KK3N0YXRpYyBpbmxpbmUg
dm9pZCBwYWdnX2F0dGFjaChzdHJ1Y3QgdGFza19zdHJ1Y3QgKmNoaWxkLCAN
CisJCQkgICAgICBzdHJ1Y3QgdGFza19zdHJ1Y3QgKnBhcmVudCkNCit7DQor
CUlOSVRfUEFHR19MSVNUKGNoaWxkKTsNCisJaWYgKCFsaXN0X2VtcHR5KCZw
YXJlbnQtPnBhZ2dfbGlzdCkpDQorCQlfX3BhZ2dfYXR0YWNoKGNoaWxkLCBw
YXJlbnQpOw0KKwlyZXR1cm47DQorfQ0KKw0KKw0KKy8qKg0KKyAqIHBhZ2df
ZGV0YWNoIC0gRGV0YWNoIGEgcHJvY2VzcyBmcm9tIGEgcGFnZyBjb250YWlu
ZXIgaXQgaXMgYSBtZW1iZXIgb2YNCisgKiBAdGFzazogVGhlIHRhc2sgdGhl
IHBhZ2cgd2lsbCBiZSBkZXRhY2hlZCBmcm9tDQorICoNCisgKi8NCitzdGF0
aWMgaW5saW5lIHZvaWQgcGFnZ19kZXRhY2goc3RydWN0IHRhc2tfc3RydWN0
ICp0YXNrKQ0KK3sNCisJaWYgKCFsaXN0X2VtcHR5KCZ0YXNrLT5wYWdnX2xp
c3QpKQ0KKwkJX19wYWdnX2RldGFjaCh0YXNrKTsNCit9DQorDQorLyoqDQor
ICogcGFnZ19leGVjIC0gVXNlZCB3aGVuIGEgcHJvY2VzcyBleGVjJ3MNCisg
KiBAdGFzazogVGhlIHByb2Nlc3MgZG9pbmcgdGhlIGV4ZWMNCisgKg0KKyAq
Lw0KK3N0YXRpYyBpbmxpbmUgdm9pZCBwYWdnX2V4ZWMoc3RydWN0IHRhc2tf
c3RydWN0ICp0YXNrKQ0KK3sNCisJaWYgKCFsaXN0X2VtcHR5KCZ0YXNrLT5w
YWdnX2xpc3QpKQ0KKwkJX19wYWdnX2V4ZWModGFzayk7DQorfQ0KKw0KKy8q
KiANCisgKiBJTklUX1RBU0tfUEFHRyAtIFVzZWQgaW4gSU5JVF9UQVNLIHRv
IHNldCB0aGUgaGVhZCBhbmQgc2VtIG9mIHBhZ2dfbGlzdA0KKyAqIEB0c2s6
IFRoZSB0YXNrIHdvcmsgd2l0aA0KKyAqDQorICogTWFyY28gVXNlZCBpbiBJ
TklUX1RBU0sgdG8gc2V0IHRoZSBoZWFkIGFuZCBzZW0gb2YgcGFnZ19saXN0
Lg0KKyAqIElmIENPTkZJR19QQUdHIGlzIG9mZiwgaXQgaXMgZGVmaW5lZCBh
cyBhbiBlbXB0eSBtYWNybyBiZWxvdy4NCisgKg0KKyAqLw0KKyNkZWZpbmUg
SU5JVF9UQVNLX1BBR0codHNrKSBcDQorCS5wYWdnX2xpc3QgPSBMSVNUX0hF
QURfSU5JVCh0c2sucGFnZ19saXN0KSwgICAgIFwNCisJLnBhZ2dfc2VtICA9
IF9fUldTRU1fSU5JVElBTElaRVIodHNrLnBhZ2dfc2VtKSwNCisNCisjZWxz
ZSAgLyogQ09ORklHX1BBR0cgKi8NCisNCisvKiANCisgKiBSZXBsYWNlbWVu
dCBtYWNyb3MgdXNlZCB3aGVuIFBBR0cgKFByb2Nlc3MgQWdncmVnYXRlcykg
c3VwcG9ydCBpcyBub3QNCisgKiBjb21waWxlZCBpbnRvIHRoZSBrZXJuZWwu
DQorICovDQorI2RlZmluZSBJTklUX1RBU0tfUEFHRyh0c2spDQorI2RlZmlu
ZSBJTklUX1BBR0dfTElTVChsKSBkbyB7IH0gd2hpbGUoMCkNCisjZGVmaW5l
IHBhZ2dfYXR0YWNoKGN0LCBwdCkgIGRvIHsgfSB3aGlsZSgwKQ0KKyNkZWZp
bmUgcGFnZ19kZXRhY2godCkgIGRvIHsgIH0gd2hpbGUoMCkgICAgIA0KKyNk
ZWZpbmUgcGFnZ19leGVjKHQpICBkbyB7ICB9IHdoaWxlKDApICAgICANCisN
CisjZW5kaWYgLyogQ09ORklHX1BBR0cgKi8NCisNCisjZW5kaWYgLyogX0xJ
TlVYX1BBR0dfSCAqLw0KSW5kZXg6IGxpbnV4L2luY2x1ZGUvbGludXgvc2No
ZWQuaA0KPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KLS0tIGxpbnV4Lm9yaWcv
aW5jbHVkZS9saW51eC9zY2hlZC5oCTIwMDQtMDgtMTQgMDA6MzY6MTYuMDAw
MDAwMDAwIC0wNTAwDQorKysgbGludXgvaW5jbHVkZS9saW51eC9zY2hlZC5o
CTIwMDQtMDgtMTcgMTE6NDk6MjIuMDAwMDAwMDAwIC0wNTAwDQpAQCAtNTI3
LDYgKzUyNywxMyBAQA0KICAgCXN0cnVjdCBtZW1wb2xpY3kgKm1lbXBvbGlj
eTsNCiAgIAlzaG9ydCBpbF9uZXh0OwkJLyogY291bGQgYmUgc2hhcmVkIHdp
dGggdXNlZF9tYXRoICovDQogI2VuZGlmDQorDQorI2lmZGVmIENPTkZJR19Q
QUdHDQorLyogTGlzdCBvZiBwYWdnIChwcm9jZXNzIGFnZ3JlZ2F0ZSkgYXR0
YWNobWVudHMgKi8NCisJc3RydWN0IGxpc3RfaGVhZCBwYWdnX2xpc3Q7DQor
CXN0cnVjdCByd19zZW1hcGhvcmUgcGFnZ19zZW07DQorI2VuZGlmDQorDQog
fTsNCiANCiBzdGF0aWMgaW5saW5lIHBpZF90IHByb2Nlc3NfZ3JvdXAoc3Ry
dWN0IHRhc2tfc3RydWN0ICp0c2spDQpJbmRleDogbGludXgvaW5pdC9LY29u
ZmlnDQo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09DQotLS0gbGludXgub3JpZy9p
bml0L0tjb25maWcJMjAwNC0wOC0xNCAwMDozNzozOC4wMDAwMDAwMDAgLTA1
MDANCisrKyBsaW51eC9pbml0L0tjb25maWcJMjAwNC0wOC0xNyAxMTo0OToy
Mi4wMDAwMDAwMDAgLTA1MDANCkBAIC0xMjUsNiArMTI1LDE0IEBADQogCSAg
Zm9yIHByb2Nlc3NpbmcgaXQuIEEgcHJlbGltaW5hcnkgdmVyc2lvbiBvZiB0
aGVzZSB0b29scyBpcyBhdmFpbGFibGUNCiAJICBhdCA8aHR0cDovL2h0dHA6
Ly93d3cuZGUua2VybmVsLm9yZy9wdWIvbGludXgvdXRpbHMvYWNjdC8+Lg0K
IA0KK2NvbmZpZyBQQUdHDQorCWJvb2wgIlN1cHBvcnQgZm9yIHByb2Nlc3Mg
YWdncmVnYXRlcyAoUEFHR3MpIg0KKwloZWxwDQorICAgICBTYXkgWSBoZXJl
IGlmIHlvdSB3aWxsIGJlIGxvYWRpbmcgbW9kdWxlcyB3aGljaCBwcm92aWRl
IHN1cHBvcnQNCisgICAgIGZvciBwcm9jZXNzIGFnZ3JlZ2F0ZSBjb250YWlu
ZXJzLiAgRXhhbXBsZXMgb2Ygc3VjaCBtb2R1bGVzIGluY2x1ZGUgdGhlDQor
ICAgICBMaW51eCBKb2JzIG1vZHVsZSBhbmQgdGhlIExpbnV4IEFycmF5IFNl
c3Npb25zIG1vZHVsZS4gIElmIHlvdSB3aWxsIG5vdCANCisgICAgIGJlIHVz
aW5nIHN1Y2ggbW9kdWxlcywgc2F5IE4uDQorDQogY29uZmlnIFNZU0NUTA0K
IAlib29sICJTeXNjdGwgc3VwcG9ydCINCiAJLS0taGVscC0tLQ0KSW5kZXg6
IGxpbnV4L2tlcm5lbC9NYWtlZmlsZQ0KPT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PQ0KLS0tIGxpbnV4Lm9yaWcva2VybmVsL01ha2VmaWxlCTIwMDQtMDgtMTQg
MDA6MzY6MzIuMDAwMDAwMDAwIC0wNTAwDQorKysgbGludXgva2VybmVsL01h
a2VmaWxlCTIwMDQtMDgtMTcgMTE6NDk6MjIuMDAwMDAwMDAwIC0wNTAwDQpA
QCAtMTgsNiArMTgsNyBAQA0KIG9iai0kKENPTkZJR19QTSkgKz0gcG93ZXIv
DQogb2JqLSQoQ09ORklHX0JTRF9QUk9DRVNTX0FDQ1QpICs9IGFjY3Qubw0K
IG9iai0kKENPTkZJR19DT01QQVQpICs9IGNvbXBhdC5vDQorb2JqLSQoQ09O
RklHX1BBR0cpICs9IHBhZ2cubw0KIG9iai0kKENPTkZJR19JS0NPTkZJRykg
Kz0gY29uZmlncy5vDQogb2JqLSQoQ09ORklHX0lLQ09ORklHX1BST0MpICs9
IGNvbmZpZ3Mubw0KIG9iai0kKENPTkZJR19TVE9QX01BQ0hJTkUpICs9IHN0
b3BfbWFjaGluZS5vDQpJbmRleDogbGludXgva2VybmVsL2ZvcmsuYw0KPT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PQ0KLS0tIGxpbnV4Lm9yaWcva2VybmVsL2Zv
cmsuYwkyMDA0LTA4LTE0IDAwOjM2OjE2LjAwMDAwMDAwMCAtMDUwMA0KKysr
IGxpbnV4L2tlcm5lbC9mb3JrLmMJMjAwNC0wOC0xNyAxMTo0OToyMi4wMDAw
MDAwMDAgLTA1MDANCkBAIC0zNiw2ICszNiw3IEBADQogI2luY2x1ZGUgPGxp
bnV4L21vdW50Lmg+DQogI2luY2x1ZGUgPGxpbnV4L2F1ZGl0Lmg+DQogI2lu
Y2x1ZGUgPGxpbnV4L3JtYXAuaD4NCisjaW5jbHVkZSA8bGludXgvcGFnZy5o
Pg0KIA0KICNpbmNsdWRlIDxhc20vcGd0YWJsZS5oPg0KICNpbmNsdWRlIDxh
c20vcGdhbGxvYy5oPg0KQEAgLTg3LDYgKzg4LDggQEANCiAJV0FSTl9PTihh
dG9taWNfcmVhZCgmdHNrLT51c2FnZSkpOw0KIAlXQVJOX09OKHRzayA9PSBj
dXJyZW50KTsNCiANCisJcGFnZ19kZXRhY2godHNrKTsNCisNCiAJaWYgKHVu
bGlrZWx5KHRzay0+YXVkaXRfY29udGV4dCkpDQogCQlhdWRpdF9mcmVlKHRz
ayk7DQogCXNlY3VyaXR5X3Rhc2tfZnJlZSh0c2spOw0KQEAgLTIzNiw2ICsy
MzksOSBAQA0KIA0KIAlpbml0X3Rhc2sucmxpbVtSTElNSVRfTlBST0NdLnJs
aW1fY3VyID0gbWF4X3RocmVhZHMvMjsNCiAJaW5pdF90YXNrLnJsaW1bUkxJ
TUlUX05QUk9DXS5ybGltX21heCA9IG1heF90aHJlYWRzLzI7DQorDQorCS8q
IEluaXRpYWxpemUgdGhlIHBhZ2cgbGlzdCBpbiBwaWQgMCBiZWZvcmUgaXQg
Y2FuIGNsb25lIGl0c2VsZi4gKi8NCisJSU5JVF9QQUdHX0xJU1QoY3VycmVu
dCk7DQogfQ0KIA0KIHN0YXRpYyBzdHJ1Y3QgdGFza19zdHJ1Y3QgKmR1cF90
YXNrX3N0cnVjdChzdHJ1Y3QgdGFza19zdHJ1Y3QgKm9yaWcpDQpAQCAtMTAy
Miw2ICsxMDI4LDEyIEBADQogCXNjaGVkX2ZvcmsocCk7DQogDQogCS8qDQor
CSAqIGNhbGwgcGFnZyBtb2R1bGVzIHRvIHByb3Blcmx5IGF0dGFjaCBuZXcg
cHJvY2VzcyB0byB0aGUgc2FtZQ0KKwkgKiBwcm9jZXNzIGFnZ3JlZ2F0ZSBj
b250YWluZXJzIGFzIHRoZSBwYXJlbnQgcHJvY2Vzcy4NCisJICovDQorCXBh
Z2dfYXR0YWNoKHAsIGN1cnJlbnQpOw0KKw0KKwkvKg0KIAkgKiBPaywgbWFr
ZSBpdCB2aXNpYmxlIHRvIHRoZSByZXN0IG9mIHRoZSBzeXN0ZW0uDQogCSAq
IFdlIGRvbnQgd2FrZSBpdCB1cCB5ZXQuDQogCSAqLw0KSW5kZXg6IGxpbnV4
L2tlcm5lbC9wYWdnLmMNCj09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCi0tLSAv
ZGV2L251bGwJMTk3MC0wMS0wMSAwMDowMDowMC4wMDAwMDAwMDAgKzAwMDAN
CisrKyBsaW51eC9rZXJuZWwvcGFnZy5jCTIwMDQtMDgtMTcgMTE6NDk6MjIu
MDAwMDAwMDAwIC0wNTAwDQpAQCAtMCwwICsxLDQ3NyBAQA0KKy8qIA0KKyAq
IFBBR0cgKFByb2Nlc3MgQWdncmVnYXRlcykgaW50ZXJmYWNlDQorICoNCisg
KiANCisgKiBDb3B5cmlnaHQgKGMpIDIwMDAtMjAwNCBTaWxpY29uIEdyYXBo
aWNzLCBJbmMuICBBbGwgUmlnaHRzIFJlc2VydmVkLg0KKyAqDQorICogVGhp
cyBwcm9ncmFtIGlzIGZyZWUgc29mdHdhcmU7IHlvdSBjYW4gcmVkaXN0cmli
dXRlIGl0IGFuZC9vciBtb2RpZnkNCisgKiBpdCB1bmRlciB0aGUgdGVybXMg
b2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGFzIHB1Ymxpc2hl
ZCBieQ0KKyAqIHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb247IGVpdGhl
ciB2ZXJzaW9uIDIgb2YgdGhlIExpY2Vuc2UsIG9yDQorICogKGF0IHlvdXIg
b3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi4NCisgKg0KKyAqIFRoaXMgcHJv
Z3JhbSBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwg
YmUgdXNlZnVsLA0KKyAqIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0
aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mDQorICogTUVSQ0hB
TlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NF
LiAgU2VlIHRoZQ0KKyAqIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZv
ciBtb3JlIGRldGFpbHMuDQorICoNCisgKiBZb3Ugc2hvdWxkIGhhdmUgcmVj
ZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5z
ZQ0KKyAqIGFsb25nIHdpdGggdGhpcyBwcm9ncmFtOyBpZiBub3QsIHdyaXRl
IHRvIHRoZSBGcmVlIFNvZnR3YXJlDQorICogRm91bmRhdGlvbiwgSW5jLiwg
NTkgVGVtcGxlIFBsYWNlLCBTdWl0ZSAzMzAsIEJvc3RvbiwgTUEgMDIxMTEt
MTMwNyBVU0ENCisgKg0KKyAqIENvbnRhY3QgaW5mb3JtYXRpb246ICBTaWxp
Y29uIEdyYXBoaWNzLCBJbmMuLCAxNTAwIENyaXR0ZW5kZW4gTGFuZSwNCisg
KiBNb3VudGFpbiBWaWV3LCBDQSAgOTQwNDMsIG9yOg0KKyAqIA0KKyAqIGh0
dHA6Ly93d3cuc2dpLmNvbSANCisgKi8NCisNCisjaW5jbHVkZSA8bGludXgv
Y29uZmlnLmg+DQorI2luY2x1ZGUgPGxpbnV4L3NsYWIuaD4NCisjaW5jbHVk
ZSA8bGludXgvc2NoZWQuaD4NCisjaW5jbHVkZSA8bGludXgvbW9kdWxlLmg+
DQorI2luY2x1ZGUgPGxpbnV4L3BhZ2cuaD4NCisjaW5jbHVkZSA8YXNtL3Nl
bWFwaG9yZS5oPg0KKw0KKy8qIGxpc3Qgb2YgcGFnZyBob29rIGVudHJpZXMg
dGhhdCByZWZlcmVuY2UgdGhlICJtb2R1bGUiIGltcGxlbWVudGF0aW9ucyAq
Lw0KK3N0YXRpYyBMSVNUX0hFQUQocGFnZ19ob29rX2xpc3QpOw0KK3N0YXRp
YyBERUNMQVJFX1JXU0VNKHBhZ2dfaG9va19saXN0X3NlbSk7DQorDQorDQor
LyoqDQorICogcGFnZ19nZXQgLSBnZXQgYSBwYWdnIGdpdmVuIGEgc2VhcmNo
IGtleQ0KKyAqIEB0YXNrOiBXZSBleGFtaW5lIHRoZSBwYWdnX2xpc3QgZnJv
bSB0aGUgZ2l2ZW4gdGFzaw0KKyAqIEBrZXk6IEtleSBuYW1lIG9mIHBhZ2cg
d2Ugd2lzaCB0byByZXRyaWV2ZQ0KKyAqDQorICogR2l2ZW4gYSBwYWdnX2xp
c3QgbGlzdCBzdHJ1Y3R1cmUsIHRoaXMgZnVuY3Rpb24gd2lsbCByZXR1cm4N
CisgKiBhIHBvaW50ZXIgdG8gdGhlIHBhZ2cgc3RydWN0IHRoYXQgbWF0Y2hl
cyB0aGUgc2VhcmNoDQorICoga2V5LiAgSWYgdGhlIGtleSBpcyBub3QgZm91
bmQsIHRoZSBmdW5jdGlvbiB3aWxsIHJldHVybiBOVUxMLg0KKyAqDQorICog
VGhlIGNhbGxlciBzaG91bGQgaG9sZCBhdCBsZWFzdCBhIHJlYWQgbG9jayBv
biB0aGUgcGFnZ19saXN0DQorICogZm9yIHRhc2sgdXNpbmcgZG93bl9yZWFk
KCZ0YXNrLT5wYWdnX2xpc3Quc2VtKS4NCisgKg0KKyAqLw0KK3N0cnVjdCBw
YWdnICoNCitwYWdnX2dldChzdHJ1Y3QgdGFza19zdHJ1Y3QgKnRhc2ssIGNo
YXIgKmtleSkNCit7DQorCXN0cnVjdCBwYWdnICpwYWdnOw0KKw0KKwlsaXN0
X2Zvcl9lYWNoX2VudHJ5KHBhZ2csICZ0YXNrLT5wYWdnX2xpc3QsIGVudHJ5
KSB7DQorCQlpZiAoIXN0cmNtcChwYWdnLT5ob29rLT5uYW1lLGtleSkpDQor
CQkJcmV0dXJuIHBhZ2c7DQorCX0NCisJcmV0dXJuIE5VTEw7DQorfQ0KKw0K
Kw0KKy8qKg0KKyAqIHBhZ2dfYWxsb2MgLSBJbnNlcnQgYSBuZXcgcGFnZyBp
biB0byB0aGUgcGFnZ19saXN0IGZvciBhIHRhc2sNCisgKiBAdGFzazogVGFz
ayB3ZSB3YW50IHRvIGluc2VydCB0aGUgcGFnZyBpbiB0bw0KKyAqIEBwYWdn
X2hvb2s6IFBhZ2cgaG9vayB0byBhc3NvY2lhdGUgd2l0aCB0aGUgbmV3IHBh
Z2cNCisgKg0KKyAqIEdpdmVuIGEgdGFzayBhbmQgYSBwYWdnIGhvb2ssIHRo
aXMgZnVuY3Rpb24gd2lsbCBhbGxvY2F0ZQ0KKyAqIGEgbmV3IHBhZ2cgc3Ry
dWN0dXJlLCBpbml0aWFsaXplIHRoZSBzZXR0aW5ncywgYW5kIGluc2VydCB0
aGUgcGFnZyBpbnRvDQorICogdGhlIHBhZ2dfbGlzdCBmb3IgdGhlIHRhc2su
DQorICoNCisgKiBUaGUgY2FsbGVyIGZvciB0aGlzIGZ1bmN0aW9uIHNob3Vs
ZCBob2xkIGF0IGxlYXN0IGEgcmVhZCBsb2NrIG9uIHRoZQ0KKyAqIHBhZ2df
aG9va19saXN0X3NlbSAtIG9yIGVuc3VyZSB0aGF0IHRoZSBwYWdnIGhvb2sg
ZW50cnkgY2Fubm90IGJlIA0KKyAqIHJlbW92ZWQuIElmIHRoaXMgZnVuY3Rp
b24gd2FzIGNhbGxlZCBmcm9tIHRoZSBwYWdnIG1vZHVsZSAodXN1YWxseSB0
aGUNCisgKiBjYXNlKSwgdGhlbiB0aGUgY2FsbGVyIG5lZWQgbm90IGhvbGQg
dGhpcyBsb2NrLiBUaGUgY2FsbGVyIHNob3VsZCBob2xkIA0KKyAqIGEgd3Jp
dGUgbG9jayBvbiBmb3IgdGhlIHRhc2tzIHBhZ2dfc2VtLiAgVGhpcyBjYW4g
YmUgbG9ja2VkIHVzaW5nIA0KKyAqIGRvd25fd3JpdGUoJnRhc2stPnBhZ2df
c2VtKQ0KKyAqIA0KKyAqLw0KK3N0cnVjdCBwYWdnICoNCitwYWdnX2FsbG9j
KHN0cnVjdCB0YXNrX3N0cnVjdCAqdGFzaywgc3RydWN0IHBhZ2dfaG9vayAq
cGFnZ19ob29rKQ0KK3sNCisJc3RydWN0IHBhZ2cgKnBhZ2c7DQorDQorCXBh
Z2cgPSBrbWFsbG9jKHNpemVvZihzdHJ1Y3QgcGFnZyksIEdGUF9LRVJORUwp
Ow0KKwlpZiAoIXBhZ2cpDQorCQlyZXR1cm4gTlVMTDsNCisNCisJcGFnZy0+
aG9vayA9IHBhZ2dfaG9vazsNCisJcGFnZy0+ZGF0YSA9IE5VTEw7DQorCWF0
b21pY19pbmMoJnBhZ2dfaG9vay0+cmVmY250KTsgIC8qIEluY3JlYXNlIGhv
b2sncyByZWZlcmVuY2UgY291bnQgKi8NCisJbGlzdF9hZGRfdGFpbCgmcGFn
Zy0+ZW50cnksICZ0YXNrLT5wYWdnX2xpc3QpOw0KKwlyZXR1cm4gcGFnZzsN
Cit9DQorDQorDQorLyoqDQorICogcGFnZ19mcmVlIC0gRGVsZXRlIHBhZ2cg
ZnJvbSB0aGUgbGlzdCBhbmQgZnJlZSBpdHMgbWVtb3J5DQorICogQHBhZ2c6
IFRoZSBwYWdnIHRvIGZyZWUNCisgKg0KKyAqIFRoaXMgZnVuY3Rpb24gd2ls
bCBlbnN1cmUgdGhlIHBhZ2cgaXMgZGVsZXRlZCBmb3JtIA0KKyAqIHRoZSBs
aXN0IG9mIHBhZ2cgZW50cmllcyBmb3IgdGhlIHRhc2suIEZpbmFsbHksIHRo
ZSBtZW1vcnkgZm9yIHRoZSANCisgKiBwYWdnIGlzIGRpc2NhcmRlZC4NCisg
Kg0KKyAqIFRoZSBjYWxsZXIgb2YgdGhpcyBmdW5jdGlvbiBzaG91bGQgaG9s
ZCBhIHdyaXRlIGxvY2sgb24gdGhlIHBhZ2dfc2VtDQorICogZm9yIHRoZSB0
YXNrLiBUaGlzIGNhbiBiZSBsb2NrZWQgdXNpbmcgZG93bl93cml0ZSgmdGFz
ay0+cGFnZ19zZW0pLg0KKyAqDQorICogUHJpb3IgdG8gY2FsbGluZyBwYWdn
X2ZyZWUsIHRoZSBwYWdnIHNob3VsZCBoYXZlIGJlZW4gZGV0YWNoZWQgZnJv
bSB0aGUNCisgKiBwYWdnIGNvbnRhaW5lciByZXByZXNlbnRlZCBieSB0aGlz
IHBhZ2cuICBUaGF0IGlzIHVzdWFsbHkgZG9uZSB1c2luZw0KKyAqIHAtPmhv
b2stPmRldGFjaCh0YXNrLCBwYWdnKTsNCisgKiANCisgKi8NCit2b2lkDQor
cGFnZ19mcmVlKHN0cnVjdCBwYWdnICpwYWdnKSANCit7DQorCWF0b21pY19k
ZWMoJnBhZ2ctPmhvb2stPnJlZmNudCk7IC8qIGRlY3IgdGhlIHJlZmVyZW5j
ZSBjb3VudCBvbiB0aGUgaG9vayAqLw0KKwlsaXN0X2RlbCgmcGFnZy0+ZW50
cnkpOw0KKwlrZnJlZShwYWdnKTsNCit9DQorDQorDQorLyoqDQorICogZ2V0
X3BhZ2dfaG9vayAtIEdldCB0aGUgcGFnZyBob29rIG1hdGNoaW5nIHRoZSBy
ZXF1ZXN0ZWQgbmFtZQ0KKyAqIEBrZXk6IFRoZSBuYW1lIG9mIHRoZSBwYWdn
IGhvb2sgdG8gZ2V0DQorICoNCisgKiBHaXZlbiBhIHBhZ2cgaG9vayBuYW1l
IGtleSwgdGhpcyBmdW5jdGlvbiB3aWxsIHJldHVybiBhIHBvaW50ZXINCisg
KiB0byB0aGUgcGFnZ19ob29rIHN0cnVjdCB0aGF0IG1hdGNoZXMgdGhlIG5h
bWUuDQorICogDQorICogWW91IHNob3VsZCBob2xkIGVpdGhlciB0aGUgd3Jp
dGUgb3IgcmVhZCBsb2NrIGZvciBwYWdnX2hvb2tfbGlzdF9zZW0NCisgKiBi
ZWZvcmUgdXNpbmcgdGhpcyBmdW5jdGlvbi4gIFRoaXMgd2lsbCBlbnN1cmUg
dGhhdCB0aGUgcGFnZ19ob29rX2xpc3QNCisgKiBkb2VzIG5vdCBjaGFuZ2Ug
d2hpbGUgaXRlcmF0aW5nIHRocm91Z2ggdGhlIGxpc3QgZW50cmllcy4NCisg
Kg0KKyAqLw0KK3N0YXRpYyBzdHJ1Y3QgcGFnZ19ob29rICoNCitnZXRfcGFn
Z19ob29rKGNoYXIgKmtleSkNCit7DQorCXN0cnVjdCBwYWdnX2hvb2sgKnBh
Z2dfaG9vazsNCisNCisJbGlzdF9mb3JfZWFjaF9lbnRyeShwYWdnX2hvb2ss
ICZwYWdnX2hvb2tfbGlzdCwgZW50cnkpIHsNCisJCWlmICghc3RyY21wKHBh
Z2dfaG9vay0+bmFtZSwga2V5KSkgew0KKwkJCXJldHVybiBwYWdnX2hvb2s7
DQorCQl9DQorCX0NCisJcmV0dXJuIE5VTEw7DQorfQ0KKw0KKy8qKg0KKyAq
IHJlbW92ZV9jbGllbnRfcGFnZ3NfZnJvbV9hbGxfdGFza3MgLSBSZW1vdmUg
YWxsIHBhZ2dzIGFzc29jaWF0ZWQgd2l0aCBob29rDQorICogQHBocDogUGFn
ZyBob29rIGFzc29jaWF0ZWQgd2l0aCBwYWdncyB0byBwdXJnZQ0KKyAqIA0K
KyAqIEdpdmVuIGEgcGFnZyBob29rLCB0aGlzIGZ1bmN0aW9uIHdpbGwgcmVt
b3ZlIGFsbCBwYWdncyBhc3NvY2lhdGVkIHdpdGggdGhhdCANCisgKiBwYWdn
IGhvb2sgZnJvbSBhbGwgdGFza3MgY2FsbGluZyB0aGUgcHJvdmlkZWQgZnVu
Y3Rpb24gb24gZWFjaCBwYWdnLg0KKyAqIA0KKyAqIElmIHRoZXJlIGlzIGEg
ZGV0YWNoIGZ1bmN0aW9uIGFzc29jaWF0ZWQgd2l0aCB0aGUgcGFnZywgaXQg
aXMgY2FsbGVkDQorICogYmVmb3JlIHRoZSBwYWdnIGlzIGZyZWVkLg0KKyAq
DQorICogVGhpcyBpcyBtZWFudCB0byBiZSB1c2VkIGJ5IHBhZ2dfaG9va19y
ZWdpc3RlciBhbmQgcGFnZ19ob29rX3VucmVnaXN0ZXINCisgKg0KKyAqLw0K
K3N0YXRpYyB2b2lkDQorcmVtb3ZlX2NsaWVudF9wYWdnc19mcm9tX2FsbF90
YXNrcyhzdHJ1Y3QgcGFnZ19ob29rICpwaHApDQorew0KKwlpZiAocGhwID09
IE5VTEwpDQorCQlyZXR1cm47DQorDQorCS8qIEJlY2F1c2Ugb2YgaW50ZXJu
YWwgcmFjZSBjb25kaXRpb25zIHdlIGNhbid0IGdhdXJhbnRlZQ0KKwkgKiBn
ZXR0aW5nIGV2ZXJ5IHRhc2sgaW4ganVzdCBvbmUgcGFzcyBzbyB3ZSBqdXN0
IGtlZXAgZ29pbmcNCisJICogdW50aWwgdGhlcmUgYXJlIG5vIHRhc2tzIHdp
dGggcGFnZ3MgZnJvbSB0aGlzIGhvb2sgYXR0YWNoZWQuDQorCSAqIFRoZSBp
bmVmZmljaWVuY3kgb2YgdGhpcyBzaG91bGQgYmUgdGVtcGVyZWQgYnkgdGhl
IGZhY3QgdGhhdCB0aGlzDQorCSAqIGhhcHBlbnMgYXQgbW9zdCBvbmNlIGZv
ciBlYWNoIHJlZ2lzdGVyZWQgY2xpZW50Lg0KKwkgKi8NCisJd2hpbGUgKGF0
b21pY19yZWFkKCZwaHAtPnJlZmNudCkgIT0gMCkgew0KKwkJc3RydWN0IHRh
c2tfc3RydWN0ICpwID0gTlVMTDsNCisNCisJCXJlYWRfbG9jaygmdGFza2xp
c3RfbG9jayk7DQorCQlmb3JfZWFjaF9wcm9jZXNzKHApIHsNCisJCQlzdHJ1
Y3QgcGFnZyAqcGFnZ3A7DQorDQorCQkJZ2V0X3Rhc2tfc3RydWN0KHApOw0K
KwkJCXJlYWRfdW5sb2NrKCZ0YXNrbGlzdF9sb2NrKTsNCisJCQlkb3duX3dy
aXRlKCZwLT5wYWdnX3NlbSk7DQorCQkJcGFnZ3AgPSBwYWdnX2dldChwLCBw
aHAtPm5hbWUpOw0KKwkJCWlmIChwYWdncCAhPSBOVUxMKSB7DQorCQkJCSh2
b2lkKXBocC0+ZGV0YWNoKHAsIHBhZ2dwKTsNCisJCQkJcGFnZ19mcmVlKHBh
Z2dwKTsNCisJCQl9DQorCQkJdXBfd3JpdGUoJnAtPnBhZ2dfc2VtKTsNCisJ
CQlyZWFkX2xvY2soJnRhc2tsaXN0X2xvY2spOw0KKw0KKwkJCS8qIElmIGEg
UEFHRyBnb3QgcmVtb3ZlZCBmcm9tIHRoZSBsaXN0IHdoaWxlIHdlJ3JlIGdv
aW5nIHRocm91Z2gNCisJCQkgKiBlYWNoIHByb2Nlc3MsIHRoZSB0YXNrcyBs
aXN0IGZvciB0aGUgcHJvY2VzcyB3b3VsZCBiZSBlbXB0eS4gIEluDQorCQkJ
ICogdGhhdCBjYXNlLCBicmVhayBvdXQgb2YgdGhpcyBmb3JfZWFjaF9wcm9j
ZXNzIHNvIHdlIGNhbiBkbyBpdA0KKwkJCSAqIGFnYWluLiAqLw0KKwkJCWlm
IChsaXN0X2VtcHR5KCZwLT50YXNrcykpIHsNCisJCQkJcHV0X3Rhc2tfc3Ry
dWN0KHApOw0KKwkJCQlicmVhazsNCisJCQl9IGVsc2UNCisJCQkJcHV0X3Rh
c2tfc3RydWN0KHApOw0KKw0KKwkJfQ0KKwkJcmVhZF91bmxvY2soJnRhc2ts
aXN0X2xvY2spOw0KKwl9DQorfQ0KKw0KKy8qKg0KKyAqIHBhZ2dfaG9va19y
ZWdpc3RlciAtIFJlZ2lzdGVyIGEgbmV3IHBhZ2cgaG9vayBhbmQgZW50ZXIg
aXQgdGhlIGxpc3QNCisgKiBAcGFnZ19ob29rX25ldzogVGhlIG5ldyBwYWdn
IGhvb2sgdG8gcmVnaXN0ZXINCisgKg0KKyAqIFVzZWQgdG8gcmVnaXN0ZXIg
YSBuZXcgcGFnZyBob29rIGFuZCBlbnRlciBpdCBpbnRvIHRoZSBwYWdnX2hv
b2tfbGlzdC4NCisgKiBUaGUgc2VydmljZSBuYW1lIGZvciBhIHBhZ2cgaG9v
ayBpcyByZXN0cmljdGVkIHRvIDMyIGNoYXJhY3RlcnMuDQorICoNCisgKiBJ
ZiBhbiAiaW5pdCgpIiBmdW5jdGlvbiBpcyBzdXBwbGllZCBpbiB0aGUgaG9v
ayBiZWluZyByZWdpc3RlcmVkIHRoZW4gYQ0KKyAqIHBhZ2cgd2lsbCBiZSBh
dHRhY2hlZCB0byBhbGwgZXhpc3RpbmcgdGFza3MgYW5kIHRoZSBzdXBwbGll
ZCAiaW5pdCgpIg0KKyAqIGZ1bmN0aW9uIHdpbGwgYmUgYXBwbGllZCB0byBp
dC4gIElmIGFueSBjYWxsIHRvIHRoZSBzdXBwbGllZCAiaW5pdCgpIg0KKyAq
IGZ1bmN0aW9uIHJldHVybnMgYSBub24gemVybyByZXN1bHQgdGhlIHJlZ2lz
dHJhdGlvbiB3aWxsIGJlIGFib3J0ZWQuIEFzDQorICogcGFydCBvZiB0aGUg
YWJvcnQgcHJvY2VzcywgYWxsIHBhZ2dzIGJlbG9uZ2luZyB0byB0aGUgbmV3
IGNsaWVudCB3aWxsIGJlDQorICogcmVtb3ZlZCBmcm9tIGFsbCB0YXNrcyBh
bmQgdGhlIHN1cHBsaWVkICJkZXRhY2goKSIgZnVuY3Rpb24gd2lsbCBiZQ0K
KyAqIGNhbGxlZCBvbiB0aGVtLiAgDQorICoNCisgKiBJZiBhIG1lbW9yeSBl
cnJvciBpcyBlbmNvdW50ZXJlZCwgdGhlIHBhZ2cgaG9vayBpcyB1bnJlZ2lz
dGVyZWQgYW5kIGFueQ0KKyAqIHRhc2tzIHRoYXQgaGF2ZSBiZWVuIGF0dGFj
aGVkIHRvIHRoZSBpbml0aWFsIHBhZ2cgY29udGFpbmVyIGFyZSBkZXRhY2hl
ZA0KKyAqIGZyb20gdGhhdCBjb250YWluZXIuDQorICoNCisgKi8NCitpbnQN
CitwYWdnX2hvb2tfcmVnaXN0ZXIoc3RydWN0IHBhZ2dfaG9vayAqcGFnZ19o
b29rX25ldykNCit7DQorCXN0cnVjdCBwYWdnX2hvb2sgKnBhZ2dfaG9vayA9
IE5VTEw7DQorDQorCS8qIEFkZCBuZXcgcGFnZyBtb2R1bGUgdG8gYWNjZXNz
IGxpc3QgKi8NCisJaWYgKCFwYWdnX2hvb2tfbmV3KQ0KKwkJcmV0dXJuIC1F
SU5WQUw7CQkJLyogZXJyb3IgKi8NCisJaWYgKCFsaXN0X2VtcHR5KCZwYWdn
X2hvb2tfbmV3LT5lbnRyeSkpDQorCQlyZXR1cm4gLUVJTlZBTDsJCQkvKiBl
cnJvciAqLw0KKwlpZiAocGFnZ19ob29rX25ldy0+bmFtZSA9PSBOVUxMIHx8
IHN0cmxlbihwYWdnX2hvb2tfbmV3LT5uYW1lKSA+IFBBR0dfTkFNRUxOKQ0K
KwkJcmV0dXJuIC1FSU5WQUw7CQkJLyogZXJyb3IgKi8NCisNCisJLyogVHJ5
IHRvIGluc2VydCBuZXcgaG9vayBlbnRyeSBpbnRvIHRoZSBwYWdnIGhvb2sg
bGlzdCAqLw0KKwlkb3duX3dyaXRlKCZwYWdnX2hvb2tfbGlzdF9zZW0pOw0K
Kw0KKwlwYWdnX2hvb2sgPSBnZXRfcGFnZ19ob29rKHBhZ2dfaG9va19uZXct
Pm5hbWUpOw0KKw0KKwlpZiAocGFnZ19ob29rKSB7DQorCQl1cF93cml0ZSgm
cGFnZ19ob29rX2xpc3Rfc2VtKTsNCisJCXByaW50ayhLRVJOX1dBUk5JTkcg
IkF0dGVtcHQgdG8gcmVnaXN0ZXIgZHVwbGljYXRlIg0KKwkJCQkiIFBBR0cg
c3VwcG9ydCAobmFtZT0lcylcbiIsIHBhZ2dfaG9va19uZXctPm5hbWUpOw0K
KwkJcmV0dXJuIC1FQlVTWTsNCisJfQ0KKw0KKwkvKiBPa2F5LCB3ZSBjYW4g
aW5zZXJ0IGludG8gdGhlIHBhZ2cgaG9vayBsaXN0ICovDQorCWxpc3RfYWRk
X3RhaWwoJnBhZ2dfaG9va19uZXctPmVudHJ5LCAmcGFnZ19ob29rX2xpc3Qp
Ow0KKwkvKiBzZXQgdGhlIHJlZiBjb3VudCB0byB6ZXJvICovDQorCWF0b21p
Y19zZXQoJnBhZ2dfaG9va19uZXctPnJlZmNudCwgMCk7DQorDQorCS8qIE5v
dyB3ZSBjYW4gY2FsbCB0aGUgaW5pdGlhbGl6ZXIgZnVuY3Rpb24gKGlmIHBy
ZXNlbnQpIGZvciBlYWNoIHRhc2sgKi8NCisJaWYgKHBhZ2dfaG9va19uZXct
PmluaXQgIT0gTlVMTCkgew0KKwkJaW50IGluaXRfcmVzdWx0ID0gMDsNCisJ
CWludCB0YXNrX2V4aXRlZCA9IDA7DQorDQorCQkvKiBCZWNhdXNlIG9mIGlu
dGVybmFsIHJhY2UgY29uZGl0aW9ucyB3ZSBjYW4ndCBnYXVyYW50ZWUNCisJ
CSAqIGdldHRpbmcgZXZlcnkgdGFzayBpbiBqdXN0IG9uZSBwYXNzIHNvIHdl
IGp1c3Qga2VlcCBnb2luZw0KKwkJICogdW50aWwgd2UgZG9uJ3QgZmluZCBh
bnkgdW5pdGlhbGl6ZWQgdGFza3MuICBUaGUgaW5lZmZpY2llbmN5DQorCQkg
KiBvZiB0aGlzIHNob3VsZCBiZSB0ZW1wZXJlZCBieSB0aGUgZmFjdCB0aGF0
IHRoaXMgaGFwcGVucw0KKwkJICogYXQgbW9zdCBvbmNlIGZvciBlYWNoIHJl
Z2lzdGVyZWQgY2xpZW50Lg0KKwkJICovDQorCQlkbyB7DQorCQkJc3RydWN0
IHRhc2tfc3RydWN0ICpwID0gTlVMTDsNCisNCisJCQlyZWFkX2xvY2soJnRh
c2tsaXN0X2xvY2spOw0KKwkJCWZvcl9lYWNoX3Byb2Nlc3MocCkgew0KKwkJ
CQlzdHJ1Y3QgcGFnZyAqcGFnZ3A7DQorDQorCQkJCWdldF90YXNrX3N0cnVj
dChwKTsNCisJCQkJcmVhZF91bmxvY2soJnRhc2tsaXN0X2xvY2spOw0KKwkJ
CQlkb3duX3dyaXRlKCZwLT5wYWdnX3NlbSk7DQorCQkJCXBhZ2dwID0gcGFn
Z19nZXQocCwgcGFnZ19ob29rX25ldy0+bmFtZSk7DQorCQkJCWlmIChwYWdn
cCA9PSBOVUxMKSB7DQorCQkJCQlwYWdncCA9IHBhZ2dfYWxsb2MocCwgcGFn
Z19ob29rX25ldyk7DQorCQkJCQlpZiAocGFnZ3AgIT0gTlVMTCkNCisJCQkJ
CQlpbml0X3Jlc3VsdCA9IHBhZ2dfaG9va19uZXctPmluaXQocCwgcGFnZ3Ap
Ow0KKwkJCQkJZWxzZQ0KKwkJCQkJCWluaXRfcmVzdWx0ID0gLUVOT01FTTsN
CisJCQkJfQ0KKwkJCQl1cF93cml0ZSgmcC0+cGFnZ19zZW0pOw0KKwkJCQly
ZWFkX2xvY2soJnRhc2tsaXN0X2xvY2spOw0KKwkJCQkvKiBMaWtlIGluIHJl
bW92ZV9jbGllbnRfcGFnZ3NfZnJvbV9hbGxfdGFza3MsIGlmIHRoZSB0YXNr
DQorCQkJCSAqIGRpc2FwcGVhcmVkIG9uIHVzIHdoaWxlIHdlIHdlcmUgZ29p
bmcgdGhyb3VnaCB0aGUNCisJCQkJICogZm9yX2VhY2hfcHJvY2VzcyBsb29w
LCB3ZSBuZWVkIHRvIHN0YXJ0IG92ZXIgd2l0aCB0aGF0IGxvb3AuDQorCQkJ
CSAqIFRoYXQncyB3aHkgd2UgaGF2ZSB0aGUgbGlzdF9lbXB0eSBoZXJlICov
DQorCQkJCXRhc2tfZXhpdGVkID0gbGlzdF9lbXB0eSgmcC0+dGFza3MpOw0K
KwkJCQlwdXRfdGFza19zdHJ1Y3QocCk7DQorCQkJCWlmICgoaW5pdF9yZXN1
bHQgIT0gMCkgfHwgdGFza19leGl0ZWQpIHsNCisJCQkJCWJyZWFrOw0KKwkJ
CQl9DQorCQkJfQ0KKwkJCXJlYWRfdW5sb2NrKCZ0YXNrbGlzdF9sb2NrKTsN
CisJCX0gd2hpbGUgKChpbml0X3Jlc3VsdCA9PSAwKSAmJiB0YXNrX2V4aXRl
ZCk7DQorDQorCQkvKg0KKwkJICogaWYgYW55dGhpbmcgd2VudCB3cm9uZyBk
dXJpbmcgaW5pdGlhbGlzYXRpb24gYWJhbmRvbiB0aGUNCisJCSAqIHJlZ2lz
dHJhdGlvbiBwcm9jZXNzDQorCQkgKi8NCisJCWlmIChpbml0X3Jlc3VsdCAh
PSAwKSB7DQorCQkJcmVtb3ZlX2NsaWVudF9wYWdnc19mcm9tX2FsbF90YXNr
cyhwYWdnX2hvb2tfbmV3KTsNCisJCQlsaXN0X2RlbF9pbml0KCZwYWdnX2hv
b2tfbmV3LT5lbnRyeSk7DQorCQkJdXBfd3JpdGUoJnBhZ2dfaG9va19saXN0
X3NlbSk7DQorDQorCQkJcHJpbnRrKEtFUk5fV0FSTklORyAiUmVnaXN0ZXJp
bmcgUEFHRyBzdXBwb3J0IGZvciINCisJCQkJIiAobmFtZT0lcykgZmFpbGVk
XG4iLCBwYWdnX2hvb2tfbmV3LT5uYW1lKTsNCisNCisJCQlyZXR1cm4gaW5p
dF9yZXN1bHQ7IC8qIGhvb2sgaW5pdCBmdW5jdGlvbiBlcnJvciByZXN1bHQg
Ki8NCisJCX0NCisJfQ0KKw0KKwl1cF93cml0ZSgmcGFnZ19ob29rX2xpc3Rf
c2VtKTsNCisNCisJcHJpbnRrKEtFUk5fSU5GTyAiUmVnaXN0ZXJpbmcgUEFH
RyBzdXBwb3J0IGZvciAobmFtZT0lcylcbiIsDQorCQkJcGFnZ19ob29rX25l
dy0+bmFtZSk7DQorDQorCXJldHVybiAwOwkJCQkJLyogc3VjY2VzcyAqLw0K
Kw0KK30NCisNCisvKioNCisgKiBwYWdnX2hvb2tfdW5yZWdpc3RlciAtIFVu
cmVnaXN0ZXIgcGFnZyBob29rIGFuZCByZW1vdmUgaXQgZnJvbSB0aGUgbGlz
dA0KKyAqIEBwYWdnX2hvb2tfb2xkOiBUaGUgaG9vayB0byB1bnJlZ2lzdGVy
IGFuZCByZW1vdmUNCisgKg0KKyAqIFVzZWQgdG8gdW5yZWdpc3RlciBwYWdn
IGhvb2tzIGFuZCByZW1vdmUgdGhlbSBmcm9tIHRoZSBwYWdnX2hvb2tfbGlz
dC4NCisgKiBPbmNlIHRoZSBwYWdnIGhvb2sgZW50cnkgaW4gdGhlIHBhZ2df
aG9va19saXN0IGlzIGZvdW5kLCBwYWdncyBhc3NvY2lhdGVkDQorICogd2l0
aCB0aGUgaG9vayAoaWYgYW55KSB3aWxsIGhhdmUgdGhlaXIgZGV0YWNoIGZ1
bmN0aW9uIGNhbGxlZCBhbmQgd2lsbA0KKyAqIGJlIGRldGFjaGVkLg0KKyAq
IA0KKyAqLw0KK2ludA0KK3BhZ2dfaG9va191bnJlZ2lzdGVyKHN0cnVjdCBw
YWdnX2hvb2sgKnBhZ2dfaG9va19vbGQpDQorew0KKwlzdHJ1Y3QgcGFnZ19o
b29rICpwYWdnX2hvb2s7DQorDQorCS8qIENoZWNrIHRoZSB2YWxpZGl0eSBv
ZiB0aGUgYXJndW1lbnRzICovDQorCWlmICghcGFnZ19ob29rX29sZCkNCisJ
CXJldHVybiAtRUlOVkFMOwkJCS8qIGVycm9yICovDQorCWlmIChsaXN0X2Vt
cHR5KCZwYWdnX2hvb2tfb2xkLT5lbnRyeSkpDQorCQlyZXR1cm4gLUVJTlZB
TDsJCQkvKiBlcnJvciAqLw0KKwlpZiAocGFnZ19ob29rX29sZC0+bmFtZSA9
PSBOVUxMKQ0KKwkJcmV0dXJuIC1FSU5WQUw7CQkJLyogZXJyb3IgKi8NCisN
CisJZG93bl93cml0ZSgmcGFnZ19ob29rX2xpc3Rfc2VtKTsNCisNCisJcGFn
Z19ob29rID0gZ2V0X3BhZ2dfaG9vayhwYWdnX2hvb2tfb2xkLT5uYW1lKTsN
CisNCisJaWYgKHBhZ2dfaG9vayAmJiBwYWdnX2hvb2sgPT0gcGFnZ19ob29r
X29sZCkgew0KKwkJcmVtb3ZlX2NsaWVudF9wYWdnc19mcm9tX2FsbF90YXNr
cyhwYWdnX2hvb2spOw0KKwkJbGlzdF9kZWxfaW5pdCgmcGFnZ19ob29rLT5l
bnRyeSk7DQorCQl1cF93cml0ZSgmcGFnZ19ob29rX2xpc3Rfc2VtKTsNCisN
CisJCXByaW50ayhLRVJOX0lORk8gIlVucmVnaXN0ZXJpbmcgUEFHRyBzdXBw
b3J0IGZvciINCisJCQkJIiAobmFtZT0lcylcbiIsIHBhZ2dfaG9va19vbGQt
Pm5hbWUpOw0KKw0KKwkJcmV0dXJuIDA7CQkJLyogc3VjY2VzcyAqLw0KKwl9
DQorDQorCXVwX3dyaXRlKCZwYWdnX2hvb2tfbGlzdF9zZW0pOw0KKw0KKwlw
cmludGsoS0VSTl9XQVJOSU5HICJBdHRlbXB0IHRvIHVucmVnaXN0ZXIgUEFH
RyBzdXBwb3J0IChuYW1lPSVzKSINCisJCQkiIGZhaWxlZCAtIG5vdCBmb3Vu
ZFxuIiwgcGFnZ19ob29rX29sZC0+bmFtZSk7DQorCQ0KKwlyZXR1cm4gLUVJ
TlZBTDsJCQkJLyogZXJyb3IgKi8NCit9DQorDQorDQorLyoqDQorICogX19w
YWdnX2F0dGFjaCAtIEF0dGFjaCBhIG5ldyB0YXNrIHRvIHRoZSBzYW1lIGNv
bnRhaW5lcnMgb2YgaXRzIHBhcmVudA0KKyAqIEB0b190YXNrOiBUaGUgY2hp
bGQgdGFzayB0aGF0IHdpbGwgaW5oZXJpdCB0aGUgcGFyZW50J3MgY29udGFp
bmVycw0KKyAqIEBmcm9tX3Rhc2s6IFRoZSBwYXJlbnQgdGFzayANCisgKg0K
KyAqIFVzZWQgdG8gYXR0YWNoIGEgbmV3IHRhc2sgdG8gdGhlIHNhbWUgcGFn
ZyBjb250YWluZXJzIHRvIHdoaWNoIGl0J3MgcGFyZW50DQorICogaXMgYXR0
YWNoZWQuDQorICoNCisgKiBUaGUgImZyb20iIGFyZ3VtZW50IGlzIHRoZSBw
YXJlbnQgdGFzay4gIFRoZSAidG8iIGFyZ3VtZW50IGlzIHRoZSBjaGlsZA0K
KyAqIHRhc2suIA0KKyAqDQorICovDQordm9pZCANCitfX3BhZ2dfYXR0YWNo
KHN0cnVjdCB0YXNrX3N0cnVjdCAqdG9fdGFzaywgc3RydWN0IHRhc2tfc3Ry
dWN0ICpmcm9tX3Rhc2spDQorew0KKwlzdHJ1Y3QgcGFnZyAqZnJvbV9wYWdn
Ow0KKw0KKwkvKiBsb2NrIHRoZSBwYXJlbnRzIHBhZ2dfbGlzdCB3ZSBhcmUg
Y29weWluZyBmcm9tICovDQorCWRvd25fcmVhZCgmZnJvbV90YXNrLT5wYWdn
X3NlbSk7IC8qIHJlYWQgbG9jayB0aGUgcGFnZyBsaXN0ICovDQorDQorCWxp
c3RfZm9yX2VhY2hfZW50cnkoZnJvbV9wYWdnLCAmZnJvbV90YXNrLT5wYWdn
X2xpc3QsIGVudHJ5KSB7DQorCQlzdHJ1Y3QgcGFnZyAqdG9fcGFnZyA9IE5V
TEw7DQorDQorCQl0b19wYWdnID0gcGFnZ19hbGxvYyh0b190YXNrLCBmcm9t
X3BhZ2ctPmhvb2spOw0KKwkJaWYgKCF0b19wYWdnKSB7DQorCQkJZ290byBl
cnJvcl9yZXR1cm47DQorCQl9DQorCQlpZiAodG9fcGFnZy0+aG9vay0+YXR0
YWNoKHRvX3Rhc2ssIHRvX3BhZ2csIGZyb21fcGFnZy0+ZGF0YSkgIT0gMCAp
IA0KKwkJCWdvdG8gZXJyb3JfcmV0dXJuOw0KKwl9DQorDQorCXVwX3JlYWQo
JmZyb21fdGFzay0+cGFnZ19zZW0pOyAvKiB1bmxvY2sgdGhlIHBhZ2cgbGlz
dCAqLw0KKw0KKwlyZXR1cm47CQkJCQkvKiBzdWNjZXNzICovDQorDQorICBl
cnJvcl9yZXR1cm46DQorCS8qIA0KKwkgKiBDbGVhbiB1cCBhbGwgdGhlIHBh
Z2cgYXR0YWNobWVudHMgbWFkZSBvbiBiZWhhbGYgb2YgdGhlIG5ldw0KKwkg
KiB0YXNrLiAgU2V0IG5ldyB0YXNrIHBhZ2cgcHRyIHRvIE5VTEwgZm9yIHJl
dHVybi4NCisJICovDQorCXVwX3JlYWQoJmZyb21fdGFzay0+cGFnZ19zZW0p
OyAvKiB1bmxvY2sgdGhlIHBhZ2cgbGlzdCAqLw0KKwlfX3BhZ2dfZGV0YWNo
KHRvX3Rhc2spOw0KKwlyZXR1cm47CQkJCS8qIGZhaWx1cmUgKi8NCit9DQor
DQorLyoqDQorICogX19wYWdnX2RldGFjaCAtIERldGFjaCBhIHRhc2sgZnJv
bSBhbGwgcGFnZyBjb250YWluZXJzIGl0IGlzIGF0dGFjaGVkIHRvDQorICog
QHRhc2s6IFRhc2sgdG8gZGV0YWNoIGZyb20gcGFnZyBjb250YWluZXJzDQor
ICoNCisgKiBVc2VkIHRvIGRldGFjaCBhIHRhc2sgZnJvbSBhbGwgcGFnZyBj
b250YWluZXJzIHRvIHdoaWNoIGl0IGlzIGF0dGFjaGVkLg0KKyAqIA0KKyAq
Lw0KK3ZvaWQgDQorX19wYWdnX2RldGFjaChzdHJ1Y3QgdGFza19zdHJ1Y3Qg
KnRhc2spDQorew0KKwlzdHJ1Y3QgcGFnZyAqcGFnZzsNCisJc3RydWN0IHBh
Z2cgKnBhZ2d0bXA7DQorDQorCS8qIFJlbW92ZSByZWYuIHRvIHBhZ2dzIGZy
b20gdGFzayBpbW1lZGlhdGVseSAqLw0KKwlkb3duX3dyaXRlKCZ0YXNrLT5w
YWdnX3NlbSk7IC8qIHdyaXRlIGxvY2sgcGFnZyBsaXN0ICovDQorDQorCWxp
c3RfZm9yX2VhY2hfZW50cnlfc2FmZShwYWdnLCBwYWdndG1wLCAmdGFzay0+
cGFnZ19saXN0LCBlbnRyeSkgew0KKwkJcGFnZy0+aG9vay0+ZGV0YWNoKHRh
c2ssIHBhZ2cpOw0KKwkJcGFnZ19mcmVlKHBhZ2cpOw0KKwl9DQorICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICANCisJdXBfd3JpdGUoJnRh
c2stPnBhZ2dfc2VtKTsgLyogd3JpdGUgdW5sb2NrIHRoZSBwYWdnIGxpc3Qg
Ki8NCisgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIA0KKwly
ZXR1cm47ICAgLyogMCA9IHN1Y2Nlc3MsIGVsc2UgcmV0dXJuIGxhc3QgY29k
ZSBmb3IgZmFpbHVyZSAqLw0KK30NCisNCisNCisvKioNCisgKiBfX3BhZ2df
ZXhlYyAtIEV4ZWN1dGUgY2FsbGJhY2sgd2hlbiBhIHByb2Nlc3MgaW4gYSBj
b250YWluZXIgZXhlY3MNCisgKiBAdGFzazogV2UgZ28gdGhyb3VnaCB0aGUg
cGFnZyBsaXN0IGluIHRoZSBnaXZlbiB0YXNrDQorICoNCisgKiBVc2VkIHRv
IHdoZW4gYSBwcm9jZXNzIHRoYXQgaXMgaW4gYSBwYWdnIGNvbnRhaW5lciBk
b2VzIGFuIGV4ZWMuDQorICoNCisgKiBUaGUgImZyb20iIGFyZ3VtZW50IGlz
IHRoZSB0YXNrLiAgVGhlICJuYW1lIiBhcmd1bWVudCBpcyB0aGUgbmFtZQ0K
KyAqIG9mIHRoZSBwcm9jZXNzIGJlaW5nIGV4ZWMnZWQuDQorICoNCisgKi8N
CitpbnQgDQorX19wYWdnX2V4ZWMoc3RydWN0IHRhc2tfc3RydWN0ICp0YXNr
KSANCit7DQorCXN0cnVjdCBwYWdnCSpwYWdnOw0KKw0KKwkvKiBsb2NrIHRo
ZSBwYXJlbnRzIHBhZ2dfbGlzdCB3ZSBhcmUgY29weWluZyBmcm9tICovDQor
CWRvd25fcmVhZCgmdGFzay0+cGFnZ19zZW0pOyAvKiBsb2NrIHRoZSBwYWdn
IGxpc3QgKi8NCisNCisJbGlzdF9mb3JfZWFjaF9lbnRyeShwYWdnLCAmdGFz
ay0+cGFnZ19saXN0LCBlbnRyeSkgew0KKwkJaWYgKHBhZ2ctPmhvb2stPmV4
ZWMpIC8qIGNvbmRpdGlvbmFsIGJlY2F1c2UgaXQncyBvcHRpb25hbCAqLw0K
KwkJCXBhZ2ctPmhvb2stPmV4ZWModGFzaywgcGFnZyk7DQorCX0NCisNCisJ
dXBfcmVhZCgmdGFzay0+cGFnZ19zZW0pOyAvKiB1bmxvY2sgdGhlIHBhZ2cg
bGlzdCAqLw0KKwlyZXR1cm4gMDsNCit9DQorDQorDQorRVhQT1JUX1NZTUJP
TChwYWdnX2dldCk7DQorRVhQT1JUX1NZTUJPTChwYWdnX2FsbG9jKTsNCitF
WFBPUlRfU1lNQk9MKHBhZ2dfZnJlZSk7DQorRVhQT1JUX1NZTUJPTChwYWdn
X2hvb2tfcmVnaXN0ZXIpOw0KK0VYUE9SVF9TWU1CT0wocGFnZ19ob29rX3Vu
cmVnaXN0ZXIpOw0K

---2136806248-455127035-1092762935=:712440--
