Return-Path: <linux-kernel-owner+willy=40w.ods.org-S932425AbWCMUSd@vger.kernel.org>
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S932425AbWCMUSd (ORCPT <rfc822;willy@w.ods.org>);
	Mon, 13 Mar 2006 15:18:33 -0500
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S932435AbWCMUSd
	(ORCPT <rfc822;linux-kernel-outgoing>);
	Mon, 13 Mar 2006 15:18:33 -0500
Received: from mx2.suse.de ([195.135.220.15]:35533 "EHLO mx2.suse.de")
	by vger.kernel.org with ESMTP id S932425AbWCMUSc (ORCPT
	<rfc822;linux-kernel@vger.kernel.org>);
	Mon, 13 Mar 2006 15:18:32 -0500
Date: Mon, 13 Mar 2006 21:18:30 +0100
Message-ID: <s5h3bhmm73d.wl%tiwai@suse.de>
From: Takashi Iwai <tiwai@suse.de>
To: "Simon White" <s_a_white@email.com>
Cc: linux-kernel@vger.kernel.org
Subject: Re: ISA "struct device"
In-Reply-To: <20060313193246.EEFF01F50C4@ws1-2.us4.outblaze.com>
References: <20060313193246.EEFF01F50C4@ws1-2.us4.outblaze.com>
User-Agent: Wanderlust/2.12.0 (Your Wildest Dreams) SEMI/1.14.6 (Maruoka)
 FLIM/1.14.7 (=?ISO-8859-4?Q?Sanj=F2?=) APEL/10.6 MULE XEmacs/21.5 (beta24)
 (dandelion) (i386-suse-linux)
MIME-Version: 1.0 (generated by SEMI 1.14.6 - "Maruoka")
Content-Type: text/plain; charset=US-ASCII
Sender: linux-kernel-owner@vger.kernel.org
X-Mailing-List: linux-kernel@vger.kernel.org

At Mon, 13 Mar 2006 14:32:46 -0500,
Simon White wrote:
> 
> Hi,
> 
> I am supporting various hardsid/catweasel cards that provide _probe
> calls.  These _probe calls are called with struct pci_device and
> friends that contain various information about bus, slot, id,
> resources, etc.
> 
> I see that isa pnp does something similar and all this information is
> appears via /sys presumably for utitilies to pick up and do nice
> things with.
> 
> Am wondering what happens with non pnp isa (unfortunately nolonger
> have an ISA machine to experiment with).  Currently in the driver I
> just use request_region with a few known addresses, with a challange
> respone mechanism to see if it is the right thing.  How does one go
> about getting that into a nice, sensibly filled out "struct device"
> object and register it with /sys, for it to do the right thing.
> Are there any existing examples to follow?

platform_device is the easiest solution for non-PnP ISA drivers.

You can find many drivers when you grep with platform_device
(including 2.6.16-rc* ALSA ISA drivers :)


Takashi
