Return-Path: <linux-kernel-owner+willy=40w.ods.org@vger.kernel.org>
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S264330AbTLVG1O (ORCPT <rfc822;willy@w.ods.org>);
	Mon, 22 Dec 2003 01:27:14 -0500
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S264353AbTLVGZa
	(ORCPT <rfc822;linux-kernel-outgoing>);
	Mon, 22 Dec 2003 01:25:30 -0500
Received: from zero.voxel.net ([209.123.232.253]:3971 "EHLO zero.voxel.net")
	by vger.kernel.org with ESMTP id S264330AbTLVGVu (ORCPT
	<rfc822;linux-kernel@vger.kernel.org>);
	Mon, 22 Dec 2003 01:21:50 -0500
Subject: [PATCH 5/10] CardServices() removal from pcmcia net drivers
From: Andres Salomon <dilinger@voxel.net>
To: linux-kernel@vger.kernel.org
Cc: dahinds@users.sourceforge.net, akpm@osdl.org
Content-Type: multipart/signed; micalg=pgp-sha1; protocol="application/pgp-signature"; boundary="=-j/EYCC6Mjy5YZA6++jhM"
Message-Id: <1072073043.27831.29.camel@spiral.internal>
Mime-Version: 1.0
X-Mailer: Ximian Evolution 1.4.5 
Date: Mon, 22 Dec 2003 01:14:38 -0500
Sender: linux-kernel-owner@vger.kernel.org
X-Mailing-List: linux-kernel@vger.kernel.org


--=-j/EYCC6Mjy5YZA6++jhM
Content-Type: multipart/mixed; boundary="=-XIVTucxALhR5CDIAHXw3"


--=-XIVTucxALhR5CDIAHXw3
Content-Type: text/plain
Content-Transfer-Encoding: quoted-printable

Part 5 of 10

--=-XIVTucxALhR5CDIAHXw3
Content-Disposition: attachment; filename=005-cs_remove.patch
Content-Type: text/x-patch; name=005-cs_remove.patch; charset=us-ascii
Content-Transfer-Encoding: base64

UmV2aXNpb246IGxpbnV4LS1tYWlubGluZS0tMi42LS1wYXRjaC0xOA0KQXJjaGl2ZTogZGlsaW5n
ZXJAdm94ZWwubmV0LS0yMDAzLXNwaXJhbA0KQ3JlYXRvcjogQW5kcmVzIFNhbG9tb24gPGRpbGlu
Z2VyQHZveGVsLm5ldD4NCkRhdGU6IFN1biBEZWMgMjEgMjE6MDg6NTAgRVNUIDIwMDMNClN0YW5k
YXJkLWRhdGU6IDIwMDMtMTItMjIgMDI6MDg6NTAgR01UDQpNb2RpZmllZC1maWxlczogZHJpdmVy
cy9uZXQvcGNtY2lhLzNjNTc0X2NzLmMNCk5ldy1wYXRjaGVzOiBkaWxpbmdlckB2b3hlbC5uZXQt
LTIwMDMtc3BpcmFsL2xpbnV4LS1tYWlubGluZS0tMi42LS1wYXRjaC0xOA0KU3VtbWFyeTogQ2Fy
ZFNlcnZpY2VzKCkgcmVtb3ZhbCwgcHQuIDUNCktleXdvcmRzOiANCg0KUmVtb3ZlIGNhbGxzIHRv
IENhcmRTZXJ2aWNlcygpLCBwYXJ0IDU7IDNjNTc0X2NzLmMuDQoNCiogYWRkZWQgZmlsZXMNCg0K
ICAgIHthcmNofS9saW51eC9saW51eC0tbWFpbmxpbmUvbGludXgtLW1haW5saW5lLS0yLjYvZGls
aW5nZXJAdm94ZWwubmV0LS0yMDAzLXNwaXJhbC9wYXRjaC1sb2cvcGF0Y2gtMTgNCg0KKiBtb2Rp
ZmllZCBmaWxlcw0KDQotLS0gb3JpZy9kcml2ZXJzL25ldC9wY21jaWEvM2M1NzRfY3MuYw0KKysr
IG1vZC9kcml2ZXJzL25ldC9wY21jaWEvM2M1NzRfY3MuYw0KQEAgLTMzMCw3ICszMzAsNyBAQA0K
IAljbGllbnRfcmVnLmV2ZW50X2hhbmRsZXIgPSAmdGM1NzRfZXZlbnQ7DQogCWNsaWVudF9yZWcu
VmVyc2lvbiA9IDB4MDIxMDsNCiAJY2xpZW50X3JlZy5ldmVudF9jYWxsYmFja19hcmdzLmNsaWVu
dF9kYXRhID0gbGluazsNCi0JcmV0ID0gQ2FyZFNlcnZpY2VzKFJlZ2lzdGVyQ2xpZW50LCAmbGlu
ay0+aGFuZGxlLCAmY2xpZW50X3JlZyk7DQorCXJldCA9IHBjbWNpYV9yZWdpc3Rlcl9jbGllbnQo
JmxpbmstPmhhbmRsZSwgJmNsaWVudF9yZWcpOw0KIAlpZiAocmV0ICE9IDApIHsNCiAJCWNzX2Vy
cm9yKGxpbmstPmhhbmRsZSwgUmVnaXN0ZXJDbGllbnQsIHJldCk7DQogCQl0YzU3NF9kZXRhY2go
bGluayk7DQpAQCAtMzY5LDcgKzM2OSw3IEBADQogCX0NCiANCiAJaWYgKGxpbmstPmhhbmRsZSkN
Ci0JCUNhcmRTZXJ2aWNlcyhEZXJlZ2lzdGVyQ2xpZW50LCBsaW5rLT5oYW5kbGUpOw0KKwkJcGNt
Y2lhX2RlcmVnaXN0ZXJfY2xpZW50KGxpbmstPmhhbmRsZSk7DQogDQogCS8qIFVubGluayBkZXZp
Y2Ugc3RydWN0dXJlLCBmcmVlIGJpdHMgKi8NCiAJKmxpbmtwID0gbGluay0+bmV4dDsNCkBAIC0z
ODcsOCArMzg3LDggQEANCiAJZXRoZXJuZXQgZGV2aWNlIGF2YWlsYWJsZSB0byB0aGUgc3lzdGVt
Lg0KICovDQogDQotI2RlZmluZSBDU19DSEVDSyhmbiwgYXJncy4uLikgXA0KLXdoaWxlICgobGFz
dF9yZXQ9Q2FyZFNlcnZpY2VzKGxhc3RfZm49KGZuKSwgYXJncykpIT0wKSBnb3RvIGNzX2ZhaWxl
ZA0KKyNkZWZpbmUgQ1NfQ0hFQ0soZm4sIHJldCkgXA0KKyAgZG8geyBsYXN0X2ZuID0gKGZuKTsg
aWYgKChsYXN0X3JldCA9IChyZXQpKSAhPSAwKSBnb3RvIGNzX2ZhaWxlZDsgfSB3aGlsZSAoMCkN
CiANCiBzdGF0aWMgdm9pZCB0YzU3NF9jb25maWcoZGV2X2xpbmtfdCAqbGluaykNCiB7DQpAQCAt
NDA5LDEyICs0MDksMTIgQEANCiANCiAJdHVwbGUuQXR0cmlidXRlcyA9IDA7DQogCXR1cGxlLkRl
c2lyZWRUdXBsZSA9IENJU1RQTF9DT05GSUc7DQotCUNTX0NIRUNLKEdldEZpcnN0VHVwbGUsIGhh
bmRsZSwgJnR1cGxlKTsNCisJQ1NfQ0hFQ0soR2V0Rmlyc3RUdXBsZSwgcGNtY2lhX2dldF9maXJz
dF90dXBsZShoYW5kbGUsICZ0dXBsZSkpOw0KIAl0dXBsZS5UdXBsZURhdGEgPSAoY2lzZGF0YV90
ICopYnVmOw0KIAl0dXBsZS5UdXBsZURhdGFNYXggPSA2NDsNCiAJdHVwbGUuVHVwbGVPZmZzZXQg
PSAwOw0KLQlDU19DSEVDSyhHZXRUdXBsZURhdGEsIGhhbmRsZSwgJnR1cGxlKTsNCi0JQ1NfQ0hF
Q0soUGFyc2VUdXBsZSwgaGFuZGxlLCAmdHVwbGUsICZwYXJzZSk7DQorCUNTX0NIRUNLKEdldFR1
cGxlRGF0YSwgcGNtY2lhX2dldF90dXBsZV9kYXRhKGhhbmRsZSwgJnR1cGxlKSk7DQorCUNTX0NI
RUNLKFBhcnNlVHVwbGUsIHBjbWNpYV9wYXJzZV90dXBsZShoYW5kbGUsICZ0dXBsZSwgJnBhcnNl
KSk7DQogCWxpbmstPmNvbmYuQ29uZmlnQmFzZSA9IHBhcnNlLmNvbmZpZy5iYXNlOw0KIAlsaW5r
LT5jb25mLlByZXNlbnQgPSBwYXJzZS5jb25maWcucm1hc2tbMF07DQogDQpAQCAtNDI0LDE1ICs0
MjQsMTUgQEANCiAJbGluay0+aW8uSU9BZGRyTGluZXMgPSAxNjsNCiAJZm9yIChpID0gaiA9IDA7
IGogPCAweDQwMDsgaiArPSAweDIwKSB7DQogCQlsaW5rLT5pby5CYXNlUG9ydDEgPSBqIF4gMHgz
MDA7DQotCQlpID0gQ2FyZFNlcnZpY2VzKFJlcXVlc3RJTywgbGluay0+aGFuZGxlLCAmbGluay0+
aW8pOw0KKwkJaSA9IHBjbWNpYV9yZXF1ZXN0X2lvKGxpbmstPmhhbmRsZSwgJmxpbmstPmlvKTsN
CiAJCWlmIChpID09IENTX1NVQ0NFU1MpIGJyZWFrOw0KIAl9DQogCWlmIChpICE9IENTX1NVQ0NF
U1MpIHsNCiAJCWNzX2Vycm9yKGxpbmstPmhhbmRsZSwgUmVxdWVzdElPLCBpKTsNCiAJCWdvdG8g
ZmFpbGVkOw0KIAl9DQotCUNTX0NIRUNLKFJlcXVlc3RJUlEsIGxpbmstPmhhbmRsZSwgJmxpbmst
PmlycSk7DQotCUNTX0NIRUNLKFJlcXVlc3RDb25maWd1cmF0aW9uLCBsaW5rLT5oYW5kbGUsICZs
aW5rLT5jb25mKTsNCisJQ1NfQ0hFQ0soUmVxdWVzdElSUSwgcGNtY2lhX3JlcXVlc3RfaXJxKGxp
bmstPmhhbmRsZSwgJmxpbmstPmlycSkpOw0KKwlDU19DSEVDSyhSZXF1ZXN0Q29uZmlndXJhdGlv
biwgcGNtY2lhX3JlcXVlc3RfY29uZmlndXJhdGlvbihsaW5rLT5oYW5kbGUsICZsaW5rLT5jb25m
KSk7DQogDQogCWRldi0+aXJxID0gbGluay0+aXJxLkFzc2lnbmVkSVJROw0KIAlkZXYtPmJhc2Vf
YWRkciA9IGxpbmstPmlvLkJhc2VQb3J0MTsNCkBAIC00NTEsOCArNDUxLDggQEANCiAJICAgdGhl
IGhhcmR3YXJlIGFkZHJlc3MuICBUaGUgZnV0dXJlIHByb2R1Y3RzIG1heSBpbmNsdWRlIGEgbW9k
ZW0gY2hpcA0KIAkgICBhbmQgcHV0IHRoZSBhZGRyZXNzIGluIHRoZSBDSVMuICovDQogCXR1cGxl
LkRlc2lyZWRUdXBsZSA9IDB4ODg7DQotCWlmIChDYXJkU2VydmljZXMoR2V0Rmlyc3RUdXBsZSwg
aGFuZGxlLCAmdHVwbGUpID09IENTX1NVQ0NFU1MpIHsNCi0JCUNhcmRTZXJ2aWNlcyhHZXRUdXBs
ZURhdGEsIGhhbmRsZSwgJnR1cGxlKTsNCisJaWYgKHBjbWNpYV9nZXRfZmlyc3RfdHVwbGUoaGFu
ZGxlLCAmdHVwbGUpID09IENTX1NVQ0NFU1MpIHsNCisJCXBjbWNpYV9nZXRfdHVwbGVfZGF0YSho
YW5kbGUsICZ0dXBsZSk7DQogCQlmb3IgKGkgPSAwOyBpIDwgMzsgaSsrKQ0KIAkJCXBoeXNfYWRk
cltpXSA9IGh0b25zKGJ1ZltpXSk7DQogCX0gZWxzZSB7DQpAQCAtNDY2LDkgKzQ2Niw5IEBADQog
CQl9DQogCX0NCiAJdHVwbGUuRGVzaXJlZFR1cGxlID0gQ0lTVFBMX1ZFUlNfMTsNCi0JaWYgKENh
cmRTZXJ2aWNlcyhHZXRGaXJzdFR1cGxlLCBoYW5kbGUsICZ0dXBsZSkgPT0gQ1NfU1VDQ0VTUyAm
Jg0KLQkJQ2FyZFNlcnZpY2VzKEdldFR1cGxlRGF0YSwgaGFuZGxlLCAmdHVwbGUpID09IENTX1NV
Q0NFU1MgJiYNCi0JCUNhcmRTZXJ2aWNlcyhQYXJzZVR1cGxlLCBoYW5kbGUsICZ0dXBsZSwgJnBh
cnNlKSA9PSBDU19TVUNDRVNTKSB7DQorCWlmIChwY21jaWFfZ2V0X2ZpcnN0X3R1cGxlKGhhbmRs
ZSwgJnR1cGxlKSA9PSBDU19TVUNDRVNTICYmDQorCQlwY21jaWFfZ2V0X3R1cGxlX2RhdGEoaGFu
ZGxlLCAmdHVwbGUpID09IENTX1NVQ0NFU1MgJiYNCisJCXBjbWNpYV9wYXJzZV90dXBsZShoYW5k
bGUsICZ0dXBsZSwgJnBhcnNlKSA9PSBDU19TVUNDRVNTKSB7DQogCQljYXJkbmFtZSA9IHBhcnNl
LnZlcnNpb25fMS5zdHIgKyBwYXJzZS52ZXJzaW9uXzEub2ZzWzFdOw0KIAl9IGVsc2UNCiAJCWNh
cmRuYW1lID0gIjNDb20gM2M1NzQiOw0KQEAgLTU2NCw5ICs1NjQsOSBAQA0KIAkJcmV0dXJuOw0K
IAl9DQogDQotCUNhcmRTZXJ2aWNlcyhSZWxlYXNlQ29uZmlndXJhdGlvbiwgbGluay0+aGFuZGxl
KTsNCi0JQ2FyZFNlcnZpY2VzKFJlbGVhc2VJTywgbGluay0+aGFuZGxlLCAmbGluay0+aW8pOw0K
LQlDYXJkU2VydmljZXMoUmVsZWFzZUlSUSwgbGluay0+aGFuZGxlLCAmbGluay0+aXJxKTsNCisJ
cGNtY2lhX3JlbGVhc2VfY29uZmlndXJhdGlvbihsaW5rLT5oYW5kbGUpOw0KKwlwY21jaWFfcmVs
ZWFzZV9pbyhsaW5rLT5oYW5kbGUsICZsaW5rLT5pbyk7DQorCXBjbWNpYV9yZWxlYXNlX2lycShs
aW5rLT5oYW5kbGUsICZsaW5rLT5pcnEpOw0KIA0KIAlsaW5rLT5zdGF0ZSAmPSB+REVWX0NPTkZJ
RzsNCiANCkBAIC02MDgsNyArNjA4LDcgQEANCiAJCWlmIChsaW5rLT5zdGF0ZSAmIERFVl9DT05G
SUcpIHsNCiAJCQlpZiAobGluay0+b3BlbikNCiAJCQkJbmV0aWZfZGV2aWNlX2RldGFjaChkZXYp
Ow0KLQkJCUNhcmRTZXJ2aWNlcyhSZWxlYXNlQ29uZmlndXJhdGlvbiwgbGluay0+aGFuZGxlKTsN
CisJCQlwY21jaWFfcmVsZWFzZV9jb25maWd1cmF0aW9uKGxpbmstPmhhbmRsZSk7DQogCQl9DQog
CQlicmVhazsNCiAJY2FzZSBDU19FVkVOVF9QTV9SRVNVTUU6DQpAQCAtNjE2LDcgKzYxNiw3IEBA
DQogCQkvKiBGYWxsIHRocm91Z2guLi4gKi8NCiAJY2FzZSBDU19FVkVOVF9DQVJEX1JFU0VUOg0K
IAkJaWYgKGxpbmstPnN0YXRlICYgREVWX0NPTkZJRykgew0KLQkJCUNhcmRTZXJ2aWNlcyhSZXF1
ZXN0Q29uZmlndXJhdGlvbiwgbGluay0+aGFuZGxlLCAmbGluay0+Y29uZik7DQorCQkJcGNtY2lh
X3JlcXVlc3RfY29uZmlndXJhdGlvbihsaW5rLT5oYW5kbGUsICZsaW5rLT5jb25mKTsNCiAJCQlp
ZiAobGluay0+b3Blbikgew0KIAkJCQl0YzU3NF9yZXNldChkZXYpOw0KIAkJCQluZXRpZl9kZXZp
Y2VfYXR0YWNoKGRldik7DQoNCg0KDQo=

--=-XIVTucxALhR5CDIAHXw3--

--=-j/EYCC6Mjy5YZA6++jhM
Content-Type: application/pgp-signature; name=signature.asc
Content-Description: This is a digitally signed message part

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.2.3 (GNU/Linux)

iD8DBQA/5olT78o9R9NraMQRAkuFAKCg9UrJfr/kPLtPpjiO/gRqpxjNuQCeKgvC
abTNWVhAx4NX+COLLpfnl3Q=
=nFOJ
-----END PGP SIGNATURE-----

--=-j/EYCC6Mjy5YZA6++jhM--

