Return-Path: <linux-kernel-owner+willy=40w.ods.org@vger.kernel.org>
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id <S262420AbTAVTVJ>; Wed, 22 Jan 2003 14:21:09 -0500
Received: (majordomo@vger.kernel.org) by vger.kernel.org
	id <S262602AbTAVTVJ>; Wed, 22 Jan 2003 14:21:09 -0500
Received: from web80311.mail.yahoo.com ([66.218.79.27]:8116 "HELO
	web80311.mail.yahoo.com") by vger.kernel.org with SMTP
	id <S262420AbTAVTVI>; Wed, 22 Jan 2003 14:21:08 -0500
Message-ID: <20030122193012.88140.qmail@web80311.mail.yahoo.com>
Date: Wed, 22 Jan 2003 11:30:12 -0800 (PST)
From: Kevin Lawton <kevinlawton2001@yahoo.com>
Subject: Re: Simple patches for Linux as a guest OS in a plex86 VM (please consider)
To: Andi Kleen <ak@suse.de>
Cc: linux-kernel@vger.kernel.org
In-Reply-To: <p7365sh0zcw.fsf@oldwotan.suse.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Sender: linux-kernel-owner@vger.kernel.org
X-Mailing-List: linux-kernel@vger.kernel.org


--- Andi Kleen <ak@suse.de> wrote:
> Kevin Lawton <kevinlawton2001@yahoo.com> writes:
> > 
> > I'm working on running Linux as a guest OS inside a
> > lightweight cut-down plex86 environment.  My goal is to
> > run a stock Linux kernel, which can be slimmed down to
> 
> Wouldn't it be easier if you just compile the kernel 
> with a simple gcc wrapper that replaces all pushfl and popfl with your new 
> sequences in the assembly code generated by gcc and also in assembly files 
> compiled with the gcc wrapper?

I'm not big on the idea of scripts massaging code - especially when
they do something unintended.  It's easier to run a periodic find
script that greps for use of such instructions, if new cases
are introduced.  Anyways, there were really only a few cases where
pushf/popf would have even mattered.  Some stuff was just
EFLAGS.{ID/AC} identification.  I greatly prefer the #define mods.

The new kernel source was quite clean of this stuff, and did a great
job centrailizing stuff in include/asm-i386.

-Kevin

__________________________________________________
Do you Yahoo!?
New DSL Internet Access from SBC & Yahoo!
http://sbc.yahoo.com
