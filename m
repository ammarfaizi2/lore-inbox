Return-Path: <linux-kernel-owner+willy=40w.ods.org-S1751245AbWBMJDL@vger.kernel.org>
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S1751245AbWBMJDL (ORCPT <rfc822;willy@w.ods.org>);
	Mon, 13 Feb 2006 04:03:11 -0500
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S1751661AbWBMJDL
	(ORCPT <rfc822;linux-kernel-outgoing>);
	Mon, 13 Feb 2006 04:03:11 -0500
Received: from sv1.valinux.co.jp ([210.128.90.2]:55461 "EHLO sv1.valinux.co.jp")
	by vger.kernel.org with ESMTP id S1751245AbWBMJDK (ORCPT
	<rfc822;linux-kernel@vger.kernel.org>);
	Mon, 13 Feb 2006 04:03:10 -0500
Date: Mon, 13 Feb 2006 18:03:09 +0900
From: IWAMOTO Toshihiro <iwamoto@valinux.co.jp>
To: Rik van Riel <riel@redhat.com>
Cc: Shantanu Goel <sgoel01@yahoo.com>,
       Marcelo Tosatti <marcelo.tosatti@cyclades.com>,
       "linux-kernel@vger.kernel.org" <linux-kernel@vger.kernel.org>
Subject: Re: [VM PATCH] rotate_reclaimable_page fails frequently
In-Reply-To: <Pine.LNX.4.63.0602061936250.26192@cuia.boston.redhat.com>
References: <20060206060147.13989.qmail@web33013.mail.mud.yahoo.com>
	<Pine.LNX.4.63.0602061936250.26192@cuia.boston.redhat.com>
User-Agent: Wanderlust/2.15.1 (Almost Unreal) SEMI/1.14.6 (Maruoka)
 FLIM/1.14.7 (=?ISO-8859-4?Q?Sanj=F2?=) APEL/10.6 Emacs/21.4
 (i386-pc-linux-gnu) MULE/5.0 (SAKAKI)
MIME-Version: 1.0 (generated by SEMI 1.14.6 - "Maruoka")
Content-Type: text/plain; charset=US-ASCII
Message-Id: <20060213090309.A505774033@sv1.valinux.co.jp>
Sender: linux-kernel-owner@vger.kernel.org
X-Mailing-List: linux-kernel@vger.kernel.org

At Mon, 6 Feb 2006 19:37:08 -0500 (EST),
Rik van Riel wrote:
> 
> On Sun, 5 Feb 2006, Shantanu Goel wrote:
> 
> > Ideally, for workloads that want to avoid paging as
> > much as possible, we should perhaps have a mode where
> > we never activate unmapped pages and let them all
> > reside on the inactive list.  mark_page_accessed()
> > would simply move an unmapped page to the head of the
> > inactive list on the 2nd reference.
> 
> Clock-pro (Peter's implementation, I still need to fix mine),
> should do the right thing automatically in situations like
> this...

Really?
IIRC, his patch used to have a logic to keep mapped pages hot, which
is similar to vanilla linux's reclaim_mapped thing, but it seems to be
commented out now.

--
IWAMOTO Toshihiro
