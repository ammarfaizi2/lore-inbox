Return-Path: <linux-kernel-owner+willy=40w.ods.org@vger.kernel.org>
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S272235AbTHEApJ (ORCPT <rfc822;willy@w.ods.org>);
	Mon, 4 Aug 2003 20:45:09 -0400
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S272312AbTHEApJ
	(ORCPT <rfc822;linux-kernel-outgoing>);
	Mon, 4 Aug 2003 20:45:09 -0400
Received: from [202.20.92.128] ([202.20.92.128]:23509 "EHLO quattro.co.nz")
	by vger.kernel.org with ESMTP id S272235AbTHEApE (ORCPT
	<rfc822;linux-kernel@vger.kernel.org>);
	Mon, 4 Aug 2003 20:45:04 -0400
Message-ID: <028101c35aea$d2753690$0401a8c0@SIMON>
From: "Simon Garner" <sgarner@expio.co.nz>
To: "Andi Kleen" <ak@muc.de>
Cc: <linux-kernel@vger.kernel.org>
References: <gC1o.2gU.5@gated-at.bofh.it> <m3k79t7ykk.fsf@averell.firstfloor.org>
Subject: Re: MSI K8D-Master - GART error 3
Date: Tue, 5 Aug 2003 12:45:01 +1200
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2720.3000
X-MIMEOLE: Produced By Microsoft MimeOLE V6.00.2600.0000
Sender: linux-kernel-owner@vger.kernel.org
X-Mailing-List: linux-kernel@vger.kernel.org

Andi Kleen <ak@muc.de> wrote:

> There is nothing in any of my trees that generates such a message.
> If it was GART related  it would be either "GART TLB error ..." or
> "extended error gart error". But even that should not happen anymore,
> see below.
>
> I don't know what the RedHat kernel does, they may have changed the
> MCE handler over the reference port.
>

A quick google brings up this reference:
http://www.iglu.org.il/lxr/source/arch/x86_64/kernel/bluesmoke.c

The error appears to be generated by the code starting around line 152
in that file.

Btw, what is 'bluesmoke'?


>> The system also has an Adaptec 2120S scsi raid card.
>
> Probably the driver is doing something bad with the pci_dma API
> (which uses the GART on x86-64)
>

Certainly I had a lot of trouble with this card, I was pleased the
aacraid driver worked enough to let me even install this time - the Red
Hat GinGin64 installer gave a kernel panic - so I wouldn't be surprised
if this card/driver were the cause. :(


> You can always disable it with mce=off or better mce=0
> as the message seems to be caused by the periodic non fatal MCE check
> timer.
>

What will I lose by disabling this?

I just tried booting with mce=0 and I am still getting the same errors.


> However there was a bug in the MCE handler where it managed to turn on
> an GART related MCE event through the backdoor that doesn't work
> correctly and is sometimes raised spuriously. But at least in the SuSE
> beta9 kernel or recent x86-64.org kernels this should have been
> fixed. But it doesn't generate such a error message anyways,
> so it's hard to know what the exact cause is.
>
> I would suggest to retry with a recent x86-64.org CVS kernel and see
> if it still happens there.
>

I will give that a go and see what happens.

Thanks for the response Andi.

-Simon


