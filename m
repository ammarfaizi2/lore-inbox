Return-Path: <linux-kernel-owner+willy=40w.ods.org@vger.kernel.org>
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S261873AbTKTN1K (ORCPT <rfc822;willy@w.ods.org>);
	Thu, 20 Nov 2003 08:27:10 -0500
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S261875AbTKTN1K
	(ORCPT <rfc822;linux-kernel-outgoing>);
	Thu, 20 Nov 2003 08:27:10 -0500
Received: from ip4.73.1311O-CUD12K-02.ish.de ([62.143.73.4]:10455 "EHLO moya")
	by vger.kernel.org with ESMTP id S261873AbTKTN1H (ORCPT
	<rfc822;linux-kernel@vger.kernel.org>);
	Thu, 20 Nov 2003 08:27:07 -0500
From: Ralph Metzler <rjkm@metzlerbros.de>
Message-ID: <16316.48731.954740.275481@metzlerbros.de>
Date: Thu, 20 Nov 2003 14:15:07 +0100
To: Ingo Oeser <ioe-lkml@rameria.de>
Cc: William Lee Irwin III <wli@holomorphy.com>,
       Nick Piggin <piggin@cyberone.com.au>, Jeff Garzik <jgarzik@pobox.com>,
       jt@hpl.hp.com, Linux kernel mailing list <linux-kernel@vger.kernel.org>,
       Pontus Fuchs <pof@users.sourceforge.net>
Subject: Re: Announce: ndiswrapper
In-Reply-To: <200311201057.07503.ioe-lkml@rameria.de>
References: <20031120031137.GA8465@bougret.hpl.hp.com>
	<3FBC402E.6070109@cyberone.com.au>
	<20031120043848.GG19856@holomorphy.com>
	<200311201057.07503.ioe-lkml@rameria.de>
X-Mailer: VM 7.07 under 21.4 (patch 6) "Common Lisp" XEmacs Lucid
Mime-Version: 1.0 (generated by tm-edit 1.8)
Content-Type: text/plain; charset=US-ASCII
Sender: linux-kernel-owner@vger.kernel.org
X-Mailing-List: linux-kernel@vger.kernel.org

Ingo Oeser writes:
 > We already have a second-class flavor of open source in the kernel right
 > now. There are drivers that do "magic value at magic address" in a quite
 > sophisticated manner. Combine this with firmware load from Windows DLLs
 > and you basically HAVE closed source, since the driver is on the device
 > itself and we just invoke it via i2c commands.
 > 
 > On NVidia drivers we might complain, that we don't see, which kernel
 > functions are used and for what. On these drivers we don't even see what
 > is done, since the device can issue DMA at will and thus scribble over
 > random kernel memory on firmware malfunction. And maybe this scribbling
 > is not that lethal to Windows for some reasons (e.g. area never used or
 > reserved area) so it will never be fixed.
 > 
 > Just have a look at some DVB hardware drivers. As much as I like *what*
 > is done there, I don't like how it is done.

Those drivers (at least the ones in the kernel right now) cannot issue any
DMA from inside the firmware. They also cannot crash the system, only
themselves. Basically they are like a separate computer connected via 
a network-like connection (in this case dual ported RAM). The code
controlling the PCI bridge is open. 

You are right that if the firmware can do things like initiating DMA
transfers this is a big problem. Of course this can also happen with
hardware which has bugs in permanently burnt-in microcode or even in the
silicon itself. 


Regards,
Ralph Metzler
