Return-Path: <linux-kernel-owner+willy=40w.ods.org-S964826AbWFNAHy@vger.kernel.org>
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S964826AbWFNAHy (ORCPT <rfc822;willy@w.ods.org>);
	Tue, 13 Jun 2006 20:07:54 -0400
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S964827AbWFNAHy
	(ORCPT <rfc822;linux-kernel-outgoing>);
	Tue, 13 Jun 2006 20:07:54 -0400
Received: from alpha.logic.tuwien.ac.at ([128.130.175.20]:18876 "EHLO
	alpha.logic.tuwien.ac.at") by vger.kernel.org with ESMTP
	id S964826AbWFNAHx (ORCPT <rfc822;linux-kernel@vger.kernel.org>);
	Tue, 13 Jun 2006 20:07:53 -0400
Date: Wed, 14 Jun 2006 02:07:49 +0200
To: Andrew Morton <akpm@osdl.org>, linux-kernel@vger.kernel.org
Subject: 2.6.17-rc6-mm2, modpost segfaults
Message-ID: <20060614000749.GB11977@gamma.logic.tuwien.ac.at>
Mime-Version: 1.0
Content-Type: text/plain; charset=iso-8859-15
Content-Disposition: inline
Content-Transfer-Encoding: 8bit
User-Agent: Mutt/1.3.28i
From: Norbert Preining <preining@logic.at>
Sender: linux-kernel-owner@vger.kernel.org
X-Mailing-List: linux-kernel@vger.kernel.org

Hi all!

[please Cc]

When building an external modules (pwc) I always get segfaults of
modpost:
/bin/sh: line 1:  6586 Segmentation fault      (core dumped) scripts/mod/modpost -i /usr/src/linux-2.6.17-rc6-mm2/Module.symvers -I /src/kernel/pwc/pwc-10.0.12-rc1/Modules.symvers -o /src/kernel/pwc/pwc-10.0.12-rc1/Modules.symvers vmlinux /src/kernel/pwc/pwc-10.0.12-rc1/pwc.o
make[2]: *** [__modpost] Error 139

the gdb modpost core backtrace gives:

warning: Can't read pathname for load map: Input/output error.
Reading symbols from /lib/tls/libc.so.6...done.
Loaded symbols for /lib/tls/libc.so.6
Reading symbols from /lib/ld-linux.so.2...done.
Loaded symbols for /lib/ld-linux.so.2
Failed to read a valid object file image from memory.
Core was generated by `scripts/mod/modpost -i /usr/src/linux-2.6.17-rc6-mm2/Module.symvers -I /src/ker'.
Program terminated with signal 11, Segmentation fault.
#0  0xb7e471db in strlen () from /lib/tls/libc.so.6
(gdb) bt
#0  0xb7e471db in strlen () from /lib/tls/libc.so.6
#1  0xb7e19b00 in vfprintf () from /lib/tls/libc.so.6
#2  0xb7e38671 in vsnprintf () from /lib/tls/libc.so.6
#3  0x08049229 in buf_printf ()
#4  0x000001f4 in ?? ()
#5  0x0804e6ad in _IO_stdin_used ()
#6  0xbf815e88 in ?? ()
#7  0xb7de9b6e in ?? () from /lib/tls/libc.so.6
#8  0x00000027 in ?? ()
#9  0x00000000 in ?? ()
(gdb)


Do I do something wrong?

Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining AT logic DOT at>             Università di Siena
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
GREAT WAKERING (participial vb.)
Panic which sets in when you badly need to go to the lavatory and
cannot make up your mind about what book or magazine to take with you.
			--- Douglas Adams, The Meaning of Liff
