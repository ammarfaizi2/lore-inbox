Return-Path: <linux-kernel-owner@vger.kernel.org>
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id <S272626AbRHaHpi>; Fri, 31 Aug 2001 03:45:38 -0400
Received: (majordomo@vger.kernel.org) by vger.kernel.org
	id <S272627AbRHaHp3>; Fri, 31 Aug 2001 03:45:29 -0400
Received: from hitpro.hitachi.co.jp ([133.145.224.7]:52452 "EHLO
	hitpro.hitachi.co.jp") by vger.kernel.org with ESMTP
	id <S272626AbRHaHpO>; Fri, 31 Aug 2001 03:45:14 -0400
From: Tsunehiko Baba <tsn@niagara.crl8.crl.hitachi.co.jp>
Date: Fri, 31 Aug 2001 16:42:12 +0900
Message-ID: <kt1yls1xrf.wl@niagara.crl8.crl.hitachi.co.jp>
To: linux-kernel@vger.kernel.org
Subject: simple patches for Linux 2.4.9-ac5 or Linux 2.4.10-pre2 on PPC
Organization: Central Research Lab., Hitachi, Ltd.
X-Face: 8pn_qW,"\K8}3;t37X],+RRE$ZCxFtMv~~$re{*jHFl@TjwV@c\F=*6+oTj!jOv>6/xzR@;
 cuz\XF'wx|T)Ax[RMQ0e=%YI&?S8oH!=_meAoFcuOoJ~:~660`wj629$[bSOJetzPqRZ?PsT_w@C:d
X-Face-Version: X-Face utility v1.3.6.10 - "Yellow Submarine (remix)"
X-Beat: Internet Time @321 08.31.2001
User-Agent: SEMI/1.14.3 (=?ISO-2022-JP?B?GyRCNW0lTkMrGyhC?=) FLIM/1.14.3
 (=?ISO-2022-JP?B?GyRCQCZLNThmTk1BMBsoQg==?=) APEL/10.3 Emacs/20.7
 (sparc-sun-solaris2.7) MULE/4.0 (=?ISO-2022-JP?B?GyRCMlYxYxsoQg==?=)
MIME-Version: 1.0 (generated by SEMI 1.14.3 - =?ISO-2022-JP?B?IhskQjVtGyhC?=
 =?ISO-2022-JP?B?GyRCJU5DKxsoQiI=?=)
Content-Type: multipart/mixed;
 boundary="Multipart_Fri_Aug_31_16:42:12_2001-1"
Sender: linux-kernel-owner@vger.kernel.org
X-Mailing-List: linux-kernel@vger.kernel.org

--Multipart_Fri_Aug_31_16:42:12_2001-1
Content-Type: text/plain; charset=US-ASCII


Hi, All.

I tried to compile 2.4.10-pre2 or 2.4.9-ac5 on ppc but failed.
To avoid some errors, I made following patches.
Please check and apply these patches. 

Best Regards.
--
Tsunehiko Baba <tsn@crl.hitachi.co.jp>


--Multipart_Fri_Aug_31_16:42:12_2001-1
Content-Type: text/plain; charset=US-ASCII

*** include/linux/vt_kern.h.orig	Thu Aug 30 20:22:52 2001
--- include/linux/vt_kern.h	Thu Aug 30 20:28:35 2001
***************
*** 32,38 ****
  } *vt_cons[MAX_NR_CONSOLES];
  
  extern void (*kd_mksound)(unsigned int hz, unsigned int ticks);
! extern int (*kbd_rate)(struct kbd_repeat *rep);
  
  /* console.c */
  
--- 32,38 ----
  } *vt_cons[MAX_NR_CONSOLES];
  
  extern void (*kd_mksound)(unsigned int hz, unsigned int ticks);
! extern int (*kbd_rate_fn)(struct kbd_repeat *rep);
  
  /* console.c */
  
*** drivers/char/pc_keyb.c.orig	Thu Aug 30 20:50:47 2001
--- drivers/char/pc_keyb.c	Thu Aug 30 20:53:28 2001
***************
*** 603,609 ****
  		return 1;
  }
  
! static int pckbd_rate(struct kbd_repeat *rep)
  {
  	if (rep == NULL)
  		return -EINVAL;
--- 603,609 ----
  		return 1;
  }
  
! int pckbd_rate(struct kbd_repeat *rep)
  {
  	if (rep == NULL)
  		return -EINVAL;
*** drivers/ide/ide-pci.c.orig	Mon Aug 13 17:56:19 2001
--- drivers/ide/ide-pci.c	Thu Aug 30 20:55:38 2001
***************
*** 445,451 ****
   * settings of split-mirror pci-config space, place chipset into init-mode,
   * and/or preserve an interrupt if the card is not native ide support.
   */
! static unsigned int __init ide_special_settings (struct pci_dev *dev, const char *name)
  {
  	switch(dev->device) {
  		case PCI_DEVICE_ID_TTI_HPT366:
--- 445,451 ----
   * settings of split-mirror pci-config space, place chipset into init-mode,
   * and/or preserve an interrupt if the card is not native ide support.
   */
! unsigned int __init ide_special_settings (struct pci_dev *dev, const char *name)
  {
  	switch(dev->device) {
  		case PCI_DEVICE_ID_TTI_HPT366:
*** drivers/ide/sl82c105.c.orig	Wed Jun 27 17:12:04 2001
--- drivers/ide/sl82c105.c	Thu Aug 30 20:56:52 2001
***************
*** 27,32 ****
--- 27,33 ----
  #include "ide_modes.h"
  
  extern char *ide_xfer_verbose (byte xfer_rate);
+ extern unsigned int __init ide_special_settings (struct pci_dev *dev, const char *name);
  
  #ifdef CONFIG_ARCH_NETWINDER
  /*

--Multipart_Fri_Aug_31_16:42:12_2001-1--
