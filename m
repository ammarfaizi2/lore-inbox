Return-Path: <linux-kernel-owner+willy=40w.ods.org-S1751640AbWCXLDY@vger.kernel.org>
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S1751640AbWCXLDY (ORCPT <rfc822;willy@w.ods.org>);
	Fri, 24 Mar 2006 06:03:24 -0500
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S1751638AbWCXLDY
	(ORCPT <rfc822;linux-kernel-outgoing>);
	Fri, 24 Mar 2006 06:03:24 -0500
Received: from cantor2.suse.de ([195.135.220.15]:1461 "EHLO mx2.suse.de")
	by vger.kernel.org with ESMTP id S1751454AbWCXLDX (ORCPT
	<rfc822;linux-kernel@vger.kernel.org>);
	Fri, 24 Mar 2006 06:03:23 -0500
Date: Fri, 24 Mar 2006 12:03:18 +0100
Message-ID: <s5hu09onlzd.wl%tiwai@suse.de>
From: Takashi Iwai <tiwai@suse.de>
To: Rene Herman <rene.herman@keyaccess.nl>
Cc: ALSA devel <alsa-devel@alsa-project.org>,
       Linux Kernel <linux-kernel@vger.kernel.org>
Subject: Re: [ALSA] ISA drivers bailing on first !enable[i]
In-Reply-To: <44238482.50401@keyaccess.nl>
References: <44238482.50401@keyaccess.nl>
User-Agent: Wanderlust/2.12.0 (Your Wildest Dreams) SEMI/1.14.6 (Maruoka)
 FLIM/1.14.7 (=?ISO-8859-4?Q?Sanj=F2?=) APEL/10.6 MULE XEmacs/21.5 (beta25)
 (eggplant) (i386-suse-linux)
MIME-Version: 1.0 (generated by SEMI 1.14.6 - "Maruoka")
Content-Type: text/plain; charset=US-ASCII
Sender: linux-kernel-owner@vger.kernel.org
X-Mailing-List: linux-kernel@vger.kernel.org

At Fri, 24 Mar 2006 06:32:50 +0100,
Rene Herman wrote:
> 
> Hi Takashi.
> 
> After the change to the platform_driver stuff in 2.6.16, all ISA card
> module_inits loop over the cards using:
> 
> 	for (i = 0; i < SNDRV_CARDS && enable[i]; i++) {
> 
> This means that the driver bails completely on the first !enable[i].
> This did not use to be the case and does not seem right. I believe it
> should rather be:
> 
> 	for (i = 0; i < SNDRV_CARDS; i++) {
> 		if (!enable[i])
> 			continue;
> 
> This would restore the previous behaviour for the enable parameter; ie,
> only ignore the one.
> 
> Assuming this was indeed the idea, I've attached a patch against 2.6.16.
> If it's correct, but you need it against ALSA CVS instead, please say so

Yes, these are correct fixes.  Most of them should have been already
in the latest ALSA tree, i.e. also in Linus git tree now.

Could you check what's still missing?  I might missed some drivers.


Thanks.

Takashi
