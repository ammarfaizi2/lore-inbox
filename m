Return-Path: <linux-kernel-owner+willy=40w.ods.org-S964825AbWFZGXh@vger.kernel.org>
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S964825AbWFZGXh (ORCPT <rfc822;willy@w.ods.org>);
	Mon, 26 Jun 2006 02:23:37 -0400
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S964827AbWFZGXh
	(ORCPT <rfc822;linux-kernel-outgoing>);
	Mon, 26 Jun 2006 02:23:37 -0400
Received: from omx2-ext.sgi.com ([192.48.171.19]:63453 "EHLO omx2.sgi.com")
	by vger.kernel.org with ESMTP id S964825AbWFZGXf (ORCPT
	<rfc822;linux-kernel@vger.kernel.org>);
	Mon, 26 Jun 2006 02:23:35 -0400
X-Mailer: exmh version 2.7.2 01/07/2005 with nmh-1.1
From: Keith Owens <kaos@ocs.com.au>
To: "Miles Lane" <miles.lane@gmail.com>
cc: "Adrian Bunk" <bunk@stusta.de>,
       "Kristen Accardi" <kristen.c.accardi@intel.com>,
       "Dave Hansen" <haveblue@us.ibm.com>, "Andrew Morton" <akpm@osdl.org>,
       LKML <linux-kernel@vger.kernel.org>, gregkh@suse.de,
       len.brown@intel.com, linux-acpi@vger.kernel.org
Subject: Re: 2.6.17-mm2 -- drivers/built-in.o: In function `is_pci_dock_device':acpiphp_glue.c:(.text+0x12364): undefined reference to `is_dock_device' 
In-reply-to: Your message of "Mon, 26 Jun 2006 15:56:49 +1000."
             <13783.1151301409@kao2.melbourne.sgi.com> 
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Date: Mon, 26 Jun 2006 16:22:47 +1000
Message-ID: <15233.1151302967@kao2.melbourne.sgi.com>
Sender: linux-kernel-owner@vger.kernel.org
X-Mailing-List: linux-kernel@vger.kernel.org

Keith Owens (on Mon, 26 Jun 2006 15:56:49 +1000) wrote:
>"Miles Lane" (on Sun, 25 Jun 2006 13:13:04 -0700) wrote:
>>Should I attach my entire .config file in the future?  It's large enough that
>>I try to trim it to avoid bloating people's inboxes.
>
>Mail the result of
>
>  sed -ne 's/^CONFIG_//p' .config
>
>That is typically less than 40% of the full .config size, and it can be
>fully regenerated by
>
>  yes '' | make oldconfig

Sorry, that should be

  yes 'n' | make oldconfig

and it turns out that this no longer works.  It used to work with the
old config system, but Kconfig gets confused by choices if the input
.config only has the selected choice and is missing the alternates.
For example, Kconfig accepts this

  CONFIG_X86_PC=y
  # CONFIG_X86_ELAN is not set
  # CONFIG_X86_VOYAGER is not set
  # CONFIG_X86_NUMAQ is not set
  # CONFIG_X86_SUMMIT is not set
  # CONFIG_X86_BIGSMP is not set
  # CONFIG_X86_VISWS is not set
  # CONFIG_X86_GENERICARCH is not set
  # CONFIG_X86_ES7000 is not set
  # CONFIG_M386 is not set
  # CONFIG_M486 is not set
  # CONFIG_M586 is not set
  # CONFIG_M586TSC is not set
  # CONFIG_M586MMX is not set

But will not accept CONFIG_X86_PC=y on its own.  Kconfig insists that
you manually select an option, even though only one valid option has
already been selected.  IOW, .config lines that are commented out
sometimes mean something to Kconfig :(

