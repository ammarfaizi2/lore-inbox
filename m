Return-Path: <linux-kernel-owner+willy=40w.ods.org@vger.kernel.org>
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id <S317619AbSHOX2V>; Thu, 15 Aug 2002 19:28:21 -0400
Received: (majordomo@vger.kernel.org) by vger.kernel.org
	id <S317639AbSHOX2V>; Thu, 15 Aug 2002 19:28:21 -0400
Received: from holomorphy.com ([66.224.33.161]:36028 "EHLO holomorphy")
	by vger.kernel.org with ESMTP id <S317619AbSHOX2S>;
	Thu, 15 Aug 2002 19:28:18 -0400
Date: Thu, 15 Aug 2002 16:30:35 -0700
From: William Lee Irwin III <wli@holomorphy.com>
To: linux-kernel@vger.kernel.org
Subject: Re: 2.5.31 kmap_atomic copy_*_user benefits
Message-ID: <20020815233035.GU15685@holomorphy.com>
Mail-Followup-To: William Lee Irwin III <wli@holomorphy.com>,
	linux-kernel@vger.kernel.org
References: <20020815232126.GR15685@holomorphy.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Description: brief message
Content-Disposition: inline
In-Reply-To: <20020815232126.GR15685@holomorphy.com>
User-Agent: Mutt/1.3.25i
Organization: The Domain of Holomorphy
Sender: linux-kernel-owner@vger.kernel.org
X-Mailing-List: linux-kernel@vger.kernel.org

On Thu, Aug 15, 2002 at 04:21:26PM -0700, William Lee Irwin III wrote:
> In the follow-ups I'll include oprofile numbers for each and vmstat logs.

vmstat log before:

Script started on Thu Aug 15 18:06:12 2002
$ vmstat 10
   procs                      memory    swap          io     system         cpu
 r  b  w   swpd   free   buff  cache  si  so    bi    bo   in    cs  us  sy  id
 0  0  0      0 16030500      0  17152   0   0     6     1   64     3   0   0  99
 0  0  0      0 15958620      0  18220   0   0   106     0 1011    60   0   1  99
 0 512  1      0 15653616      0 262312   0   0    48   158 1060   786   0  43  57
129 383  1      0 15089556      0 808580   0   0     8    44 1084   410   0  93   6
149 363  0      0 14426392      0 1451152   0   0    27     2 1194   679   0  98   2
401 111  1      0 13826876      0 2027240   0   0    26   357 1086   690   0  99   0
493 19  1      0 13209856      0 2631808   0   0    13   871 1132   789   0 100   0
411 101  1      0 12637416      0 3192400   0   0    32     0 1008  1121   0 100   0
421 91  1      0 11984456      0 3831656   0   0    19     0 1173  1202   0 100   0
 0 512  1      0 11692000      0 4114760   0   0    29  1664 1059   618   0  52  48
507  5  1      0 11133820      0 4660992   0   0    19  2908 1165   646   0  96   3
460 52  1      0 10588860      0 5195184   0   0    54  2638 1110  1017   0 100   0
511  1  1      0 9983548      0 5787468   0   0    12  3038 1254  1203   0 100   0
456 56  1      0 9454660      0 6305104   0   0    46  2752 1115  1041   0 100   0
512  0  1      0 8850200      0 6896792   0   0    10  3439 1330  1002   0 100   0
475 37  1      0 8340844      0 7395540   0   0    30  2836 1115   914   0 100   0
501 11  1      0 7884784      0 7841860   0   0    44  2962 1119   663   1  99   0
511  1  1      0 7467560      0 8250548   0   0    12  2878 1110   448   1  99   0
504  8  1      0 7101380      0 8609880   0   0    51  2746 1122   333   1  99   0
49 463  1      0 6775144      0 8927748   0   0    17  2854 1119   293   1  99   0
 1 511  1      0 6743308      0 8957548   0   0     1  2863 1106    26   0   9  91
   procs                      memory    swap          io     system         cpu
 r  b  w   swpd   free   buff  cache  si  so    bi    bo   in    cs  us  sy  id
 0 512  1      0 6734056      0 8966760   0   0     0  2956 1104     9   0   2  98
 1 511  1      0 6726252      0 8974336   0   0     0  2942 1103     8   0   2  98
 0 512  1      0 6718468      0 8981972   0   0     0  2906 1101     8   0   2  98
 0 512  1      0 6709704      0 8990412   0   0     0  2988 1105     9   0   2  98
 0 512  1      0 6701000      0 8999160   0   0     0  2834 1101     8   0   2  98
 1 511  1      0 6692044      0 9007868   0   0     0  2845 1101     8   0   1  98
 0 512  1      0 6681136      0 9018320   0   0     0  2917 1101     8   0   2  98
 0 512  1      0 6672436      0 9027192   0   0     0  2862 1102     8   0   2  98
 1 511  1      0 6663200      0 9035896   0   0     0  2930 1104     9   0   2  98
 0 512  1      0 6654712      0 9044048   0   0     0  2904 1102     9   0   1  99
 1 511  1      0 6625628      0 9072692   0   0    21  2835 1103     9   0   3  96
 1 511  1      0 6595384      0 9102340   0   0     0  2791 1101    10   0   4  96
 1 511  1      0 6566500      0 9130468   0   0     1  2870 1103     8   0   3  97
 1 511  1      0 6535240      0 9161088   0   0     1  2891 1104     7   0   2  97
 1 511  1      0 6506408      0 9189280   0   0     1  2831 1102     8   0   3  97
 2 510  1      0 6474892      0 9219692   0   0     1  2954 1104    10   0   4  96
 1 511  1      0 6446944      0 9247368   0   0     2  2793 1101     9   0   2  98
 0 512  1      0 6417712      0 9276400   0   0     3  2808 1104    15   0   3  97
 0 512  1      0 6386148      0 9306724   0   0     3  2932 1103    13   0   3  97
 0 512  1      0 6355680      0 9336752   0   0     2  2917 1106    10   0   4  96
 3 509  1      0 6328132      0 9363816   0   0     4  2737 1103    17   0   3  97
   procs                      memory    swap          io     system         cpu
 r  b  w   swpd   free   buff  cache  si  so    bi    bo   in    cs  us  sy  id
 0 513  1      0 6296992      0 9393708   0   0     3  2887 1104    14   0   4  96
 0 512  1      0 6270080      0 9420724   0   0     2  2767 1106    11   0   3  97
 0 512  1      0 6239632      0 9449904   0   0     3  2905 1103    17   0   4  96
 0 512  1      0 6211120      0 9477884   0   0     3  2786 1101    10   0   3  97
 0 512  1      0 6182544      0 9506248   0   0     4  2821 1103    11   0   3  97
 0 512  1      0 6153224      0 9534520   0   0     2  2890 1102    11   0   3  97
 0 512  1      0 6123908      0 9563556   0   0    39  2789 1106    18   0   5  95
 0 512  1      0 6095808      0 9591008   0   0     4  2829 1104    12   0   3  97
 0 512  1      0 6065320      0 9620528   0   0     2  2877 1103    11   0   3  97
 0 512  1      0 6036204      0 9649112   0   0     2  2813 1105    18   0   4  95
 0 512  1      0 6008404      0 9676656   0   0     1  2832 1105    11   0   4  96
 0 512  1      0 5979352      0 9705188   0   0     0  2834 1102    11   0   3  97
 0 512  1      0 5950212      0 9733380   0   0     0  2839 1103    12   0   3  96
 0 512  1      0 5920924      0 9761812   0   0     1  2861 1106    11   0   3  96
 2 510  1      0 5892504      0 9789956   0   0     2  2773 1105    11   0   3  97
 1 511  1      0 5862944      0 9818284   0   0     0  2831 1105    14   0   4  96
 0 512  1      0 5833700      0 9846684   0   0     2  2799 1107    21   0   4  95
 1 511  1      0 5806112      0 9874076   0   0     0  2743 1105    17   0   4  96
 0 512  1      0 5777160      0 9902324   0   0     2  2774 1106    31   1   6  94
 0 512  1      0 5749864      0 9929472   0   0     0  2732 1102    11   0   3  97
 1 511  1      0 5720448      0 9958276   0   0     1  2817 1106    15   0   4  96
   procs                      memory    swap          io     system         cpu
 r  b  w   swpd   free   buff  cache  si  so    bi    bo   in    cs  us  sy  id
 1 511  1      0 5690996      0 9987028   0   0     0  2880 1107    16   0   4  95
 0 512  1      0 5661268      0 10015812   0   0     2  2858 1104    12   0   4  96
 0 512  1      0 5632096      0 10044776   0   0     2  2748 1103    11   0   3  97
 7 505  1      0 5607828      0 10068312   0   0    21  2858 1129    30   1   6  93
 0 512  1      0 5575800      0 10099712   0   0    34  2713 1108    33   0  13  87
 6 506  1      0 5545128      0 10128844   0   0     2  2984 1114    35   0   5  94
 0 512  1      0 5514480      0 10159328   0   0   112  2824 1115    46   1   9  91
 0 512  1      0 5485404      0 10187644   0   0     3  2894 1111    37   1   6  94
 2 510  1      0 5457668      0 10214952   0   0     3  2747 1114    35   1   7  93
 0 512  1      0 5426568      0 10244836   0   0     2  2930 1113    34   1   6  94
 0 512  1      0 5397912      0 10272996   0   0     2  2798 1106    19   0   4  96
 0 512  1      0 5370080      0 10300712   0   0     4  2766 1109    58   1   6  93
 0 512  1      0 5341324      0 10328744   0   0     1  2763 1107    27   0   5  95
 1 511  1      0 5313236      0 10356208   0   0     2  2810 1108    15   0   4  96
 0 512  1      0 5283084      0 10385644   0   0     2  2814 1107    31   0   5  95
 0 512  1      0 5254348      0 10413472   0   0     2  2876 1107    19   0   4  96
 0 512  1      0 5226876      0 10440616   0   0     5  2738 1113    88   1  24  76
 1 511  1      0 5197164      0 10469304   0   0     2  2863 1113    40   1   6  93
 0 512  1      0 5169448      0 10496036   0   0     1  2792 1104    24   0   5  94
 0 512  1      0 5141960      0 10523728   0   0    26  2728 1107    27   0   4  96
 1 511  1      0 5112580      0 10551664   0   0     0  2825 1112    67   1  21  78
   procs                      memory    swap          io     system         cpu
 r  b  w   swpd   free   buff  cache  si  so    bi    bo   in    cs  us  sy  id
 0 512  1      0 5084232      0 10579604   0   0     0  2718 1110    37   1   9  91
 0 512  1      0 5057348      0 10606140   0   0     1  2722 1113    63   1  29  70
 1 511  1      0 5031844      0 10631100   0   0     1  2781 1110    40   1   6  93
 0 512  1      0 5000676      0 10661360   0   0     1  2666 1111    63   1  24  75
 1 511  1      0 4973048      0 10688612   0   0     0  2761 1106    13   0   3  96
 1 511  1      0 4945132      0 10715932   0   0     1  2729 1108    36   1   8  92
 1 511  1      0 4913792      0 10746284   0   0     3  2759 1113    70   1  25  74
17 495  1      0 4893276      0 10766836   0   0     0  2751 1130    33   1  10  89
 0 512  1      0 4859448      0 10799772   0   0    21  2715 1111    51   1  28  71
 1 511  1      0 4830860      0 10827544   0   0    31  2740 1112    61   1  15  84
 0 512  1      0 4803540      0 10854056   0   0     2  2730 1112    55   1  23  76
46 466  1      0 4783896      0 10873464   0   0     3  2530 1126   186   2  52  46
 0 512  1      0 4727848      0 10927944   0   0     2  2751 1113    87   1  40  59
 1 511  1      0 4699816      0 10955220   0   0     2  2783 1118    67   1  10  89
 2 510  1      0 4671984      0 10982724   0   0     1  2745 1109    19   0   4  96
 1 511  1      0 4647732      0 11006304   0   0     2  2754 1113    43   1   8  91
 0 512  1      0 4615392      0 11037568   0   0     1  2788 1109    36   1   8  91
 0 512  1      0 4588104      0 11064532   0   0     2  2715 1108    36   1   6  94
 5 507  1      0 4558404      0 11093124   0   0     4  2792 1119   100   1  20  79
 0 512  1      0 4532236      0 11119008   0   0     2  2700 1112    35   1   6  93
 1 511  1      0 4503824      0 11146548   0   0     0  2821 1109    26   1   5  94
   procs                      memory    swap          io     system         cpu
 r  b  w   swpd   free   buff  cache  si  so    bi    bo   in    cs  us  sy  id
 0 512  1      0 4464900      0 11185036   0   0     4  2688 1121   145   1  55  43
15 497  1      0 4452708      0 11196928   0   0     1  2780 1134    77   1  18  82
21 491  1      0 4415616      0 11232624   0   0     4  2718 1123   170   2  77  21
 1 511  1      0 4387976      0 11259524   0   0     1  2716 1107    49   1  13  87
 0 512  1      0 4357528      0 11289292   0   0     2  2632 1116   157   2  50  48
18 494  1      0 4336624      0 11310296   0   0     2  2617 1116   137   1  20  79
 1 511  1      0 4306500      0 11339308   0   0     1  2760 1110    66   1  22  77
51 461  1      0 4290888      0 11354840   0   0    14  2668 1119   115   1  40  59
30 482  1      0 4263016      0 11381860   0   0     2  2684 1116   108   1  49  50
146 366  2      0 4229972      0 11414624   0   0     2  2630 1121   185   2  98   0
 0 512  1      0 4189560      0 11453328   0   0     3  2691 1117   157   1  64  35
 0 512  1      0 4167640      0 11474876   0   0     2  2700 1113    83   1  16  83
10 502  1      0 4145668      0 11496432   0   0     0  2606 1118   105   2  56  42
74 438  1      0 4116664      0 11524812   0   0    10  2618 1122   161   2  96   2
187 325  1      0 4118092      0 11523044   0   0     1  2624 1123   211   2  98   0
304 208  2      0 4063200      0 11577608   0   0     2  2656 1147   194   2  98   0
37 475  1      0 4044028      0 11595504   0   0     2  2662 1130   185   2  70  28
157 355  1      0 4037396      0 11601984   0   0     2  2572 1119   179   2  98   0
263 249  2      0 4008540      0 11630764   0   0     2  2554 1121   195   2  98   0
375 137  1      0 3996592      0 11642044   0   0     1  2672 1120   187   2  98   0
484 28  2      0 3954796      0 11683672   0   0     2  2620 1121   179   2  98   0
   procs                      memory    swap          io     system         cpu
 r  b  w   swpd   free   buff  cache  si  so    bi    bo   in    cs  us  sy  id
512  0  1      0 3962612      0 11675468   0   0     2  1278 1144   203   2  98   0
512  0  2      0 3931376      0 11706564   0   0     0  1572 1143   183   2  98   0
511  0  2      0 3924356      0 11715812   0   0     3  1295 1144   218   2  98   0
511  0  1      0 3923176      0 11714456   0   0     2  1528 1144   199   2  98   0
510  1  2      0 3926740      0 11712952   0   0     2  2152 1127   208   2  98   0
511  0  2      0 3919160      0 11720444   0   0     0  1216 1143   204   2  98   0
509  2  2      0 3952668      0 11686496   0   0     0  1290 1151   206   2  98   0
511  0  2      0 3944192      0 11694232   0   0     0  1400 1142   193   2  98   0
511  0  1      0 3979192      0 11660256   0   0     0  1696 1135   191   2  98   0
509  0  2      0 3997656      0 11642040   0   0     1   775 1153   190   2  98   0
509  0  1      0 3999412      0 11640236   0   0     0  1667 1138   189   2  98   0
509  0  1      0 3988136      0 11648228   0   0     0   955 1157   195   2  98   0
508  1  1      0 4006224      0 11633260   0   0     1  1168 1140   226   2  98   0
508  0  1      0 4036952      0 11599396   0   0     0  1557 1146   214   2  98   0
507  0  2      0 4051844      0 11584960   0   0     0  1533 1144   206   2  98   0
503  0  2      0 4112112      0 11528108   0   0     0  2127 1124   181   2  98   0
501  2  1      0 4093032      0 11547088   0   0     0  1604 1144   203   2  98   0
503  0  1      0 4100296      0 11539728   0   0     1  1536 1141   192   2  98   0
503  0  1      0 4153784      0 11486160   0   0     0  1292 1143   228   2  98   0
500  1  1      0 4202116      0 11438076   0   0     0   722 1156   219   2  98   0
499  0  1      0 4232768      0 11407708   0   0     0  1074 1147   190   2  98   0
   procs                      memory    swap          io     system         cpu
 r  b  w   swpd   free   buff  cache  si  so    bi    bo   in    cs  us  sy  id
498  0  1      0 4245960      0 11394600   0   0     0  1031 1153   197   2  98   0
496  0  1      0 4317348      0 11323444   0   0     0  1301 1147   213   2  98   0
495  0  3      0 4349556      0 11289944   0   0     0  2063 1139   183   2  98   0
494  0  1      0 4374812      0 11263824   0   0     0  2022 1136   204   2  98   0
484  6  1      0 4455692      0 11184128   0   0     0  1586 1140   194   2  98   0
488  0  1      0 4519336      0 11119252   0   0     0  2726 1127   173   2  98   0
458 25  3      0 4604064      0 11036628   0   0     0  1864 1140   235   2  98   0
479  0  1      0 4727324      0 10914252   0   0     0  2126 1131   178   2  98   0
475  0  2      0 4785124      0 10855204   0   0     0  2500 1129   178   2  98   0
469  1  1      0 4870052      0 10771256   0   0     0  2451 1122   178   2  98   0
468  0  1      0 4894780      0 10746320   0   0     0  2528 1125   167   2  98   0
461  0  1      0 5098844      0 10543828   0   0     0  2067 1125   184   2  98   0
455  0  1      0 5200836      0 10442688   0   0     0  2351 1131   172   2  98   0
447  0  1      0 5355456      0 10289656   0   0     0  2373 1127   184   2  98   0
444  0  1      0 5522224      0 10122984   0   0     0  2478 1125   174   2  98   0
431  0  2      0 5718152      0 9929460   0   0     0  2605 1122   178   2  98   0
425  0  1      0 5927768      0 9720220   0   0     0  2769 1123   174   2  98   0
408  0  1      0 6235760      0 9414664   0   0     0  2754 1127   174   2  98   0
401  0  1      0 6417560      0 9234080   0   0     0  2753 1120   162   2  98   0
381  8  1      0 6679396      0 8974080   0   0     0  2613 1122   180   2  98   0
374  1  1      0 7014740      0 8640536   0   0     0  2711 1121   182   2  98   0
   procs                      memory    swap          io     system         cpu
 r  b  w   swpd   free   buff  cache  si  so    bi    bo   in    cs  us  sy  id
366  0  2      0 7226640      0 8429968   0   0     0  2670 1125   182   2  98   0
352  0  2      0 7540784      0 8118040   0   0     0  2644 1123   177   2  98   0
348  0  1      0 7635932      0 8023952   0   0     0  2611 1122   172   2  98   0
343  0  1      0 7744096      0 7916516   0   0     0  2706 1124   158   2  98   0
339  0  1      0 7799716      0 7861344   0   0     0  2628 1117   158   2  98   0
335  0  1      0 7896960      0 7764748   0   0     0  2652 1119   159   2  98   0
331  0  1      0 8022476      0 7639148   0   0     0  2694 1123   167   2  98   0
325  0  1      0 8140000      0 7522724   0   0     0  2628 1119   169   2  98   0
316  0  2      0 8306312      0 7357656   0   0     0  2605 1121   162   2  98   0
308  0  2      0 8510444      0 7154704   0   0     0  2617 1121   196   2  98   0
301  1  1      0 8651348      0 7014896   0   0     0  2601 1117   158   2  98   0
293  0  1      0 8832568      0 6835252   0   0     0  2580 1119   157   2  98   0
286  0  1      0 9002060      0 6666908   0   0     0  2717 1123   165   2  98   0
278  0  1      0 9158980      0 6511276   0   0     0  2668 1118   150   2  98   0
273  0  1      0 9280348      0 6390320   0   0     0  2685 1121   155   2  98   0
256  0  2      0 9620268      0 6053080   0   0     0  2656 1121   170   2  98   0
253  0  2      0 9684960      0 5988192   0   0     0  2698 1119   151   2  98   0
249  0  1      0 9764732      0 5909552   0   0     0  2599 1119   154   2  98   0
243  0  1      0 9900232      0 5774964   0   0     0  2648 1119   150   2  98   0
236  0  1      0 10040144      0 5635812   0   0     0  2643 1117   152   2  98   0
227  0  2      0 10264664      0 5413280   0   0     0  2614 1123   168   2  98   0
   procs                      memory    swap          io     system         cpu
 r  b  w   swpd   free   buff  cache  si  so    bi    bo   in    cs  us  sy  id
219  1  2      0 10438612      0 5239980   0   0     0  2752 1124   155   2  98   0
213  0  1      0 10621820      0 5057548   0   0     0  2649 1118   150   2  98   0
203  0  1      0 10914592      0 4766988   0   0     0  2594 1120   165   2  98   0
189  0  1      0 11160692      0 4522212   0   0     0  2727 1119   155   2  98   0
185  0  1      0 11303236      0 4380332   0   0     0  2677 1120   159   2  98   0
176  0  1      0 11492392      0 4192492   0   0     0  2744 1119   159   2  98   0
169  0  1      0 11630124      0 4055636   0   0     0  2772 1121   148   2  98   0
156  0  1      0 11889592      0 3798296   0   0     0  2682 1120   153   2  98   0
141  0  2      0 12219120      0 3470760   0   0     0  2584 1116   157   2  98   0
132  0  2      0 12410372      0 3280848   0   0     0  2520 1113   149   2  98   0
121  0  1      0 12632632      0 3060512   0   0     0  2676 1120   148   2  98   0
115  0  1      0 12802380      0 2891428   0   0     0  2601 1116   148   2  98   0
101  0  1      0 13116068      0 2580380   0   0     0  2716 1122   165   2  98   0
83  2  1      0 13489008      0 2209960   0   0     0  2719 1119   155   2  98   0
80  0  1      0 13639208      0 2060280   0   0     0  2803 1119   157   2  98   0
60  0  1      0 14028280      0 1674380   0   0     0  2750 1117   152   2  98   0
47  0  1      0 14323412      0 1380688   0   0     0  2802 1119   142   2  98   0
33  0  1      0 14667540      0 1039752   0   0     0  2701 1121   154   2  98   0
13  1  1      0 15073012      0 636504   0   0     0  2751 1118   132   2  97   1
 0  1  2      0 15368508      0 342820   0   0     0  2741 1100   103   1  21  78
 0  0  1      0 15451236      0 332436   0   0     0   744 1134    19   0   2  97

Script done on Thu Aug 15 18:41:37 2002
