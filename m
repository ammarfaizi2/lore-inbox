Return-Path: <linux-kernel-owner+willy=40w.ods.org-S262567AbUKLQn6@vger.kernel.org>
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S262567AbUKLQn6 (ORCPT <rfc822;willy@w.ods.org>);
	Fri, 12 Nov 2004 11:43:58 -0500
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S262559AbUKLQn6
	(ORCPT <rfc822;linux-kernel-outgoing>);
	Fri, 12 Nov 2004 11:43:58 -0500
Received: from l247150.ppp.asahi-net.or.jp ([218.219.247.150]:11976 "EHLO
	mitou.ysato.dip.jp") by vger.kernel.org with ESMTP id S262576AbUKLQmT
	(ORCPT <rfc822;linux-kernel@vger.kernel.org>);
	Fri, 12 Nov 2004 11:42:19 -0500
Date: Sat, 13 Nov 2004 01:42:17 +0900
Message-ID: <m2hdnvuihi.wl%ysato@users.sourceforge.jp>
From: Yoshinori Sato <ysato@users.sourceforge.jp>
To: Linus Torvalds <torvalds@osdl.org>, Andrew Morton <akpm@osdl.org>
Cc: linux-kernel@vger.kernel.org
Subject: [PATCH] CONFIG_UNIX98_PTY=n warning fix
User-Agent: Wanderlust/2.11.30 (Wonderwall) SEMI/1.14.6 (Maruoka)
 FLIM/1.14.6 (Marutamachi) APEL/10.6 Emacs/21.3 (i386-pc-linux-gnu)
 MULE/5.0 (SAKAKI)
MIME-Version: 1.0 (generated by SEMI 1.14.6 - "Maruoka")
Content-Type: text/plain; charset=US-ASCII
Sender: linux-kernel-owner@vger.kernel.org
X-Mailing-List: linux-kernel@vger.kernel.org

Signed-off-by: Yoshinori Sato <ysato@users.sourceforge.jp>

diff -Nru a/drivers/char/tty_io.c b/drivers/char/tty_io.c
--- a/drivers/char/tty_io.c	2004-11-13 01:12:50 +09:00
+++ b/drivers/char/tty_io.c	2004-11-13 01:12:50 +09:00
@@ -136,6 +136,7 @@
 extern int pty_limit;		/* Config limit on Unix98 ptys */
 static DEFINE_IDR(allocated_ptys);
 static DECLARE_MUTEX(allocated_ptys_lock);
+static int ptmx_open(struct inode *, struct file *);
 #endif
 
 extern void disable_early_printk(void);
@@ -147,7 +148,6 @@
 ssize_t redirected_tty_write(struct file *, const char __user *, size_t, loff_t *);
 static unsigned int tty_poll(struct file *, poll_table *);
 static int tty_open(struct inode *, struct file *);
-static int ptmx_open(struct inode *, struct file *);
 static int tty_release(struct inode *, struct file *);
 int tty_ioctl(struct inode * inode, struct file * file,
 	      unsigned int cmd, unsigned long arg);

-- 
Yoshinori Sato
<ysato@users.sourceforge.jp>
