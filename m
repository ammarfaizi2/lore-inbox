Return-Path: <linux-kernel-owner+willy=40w.ods.org-S261936AbVGESfk@vger.kernel.org>
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S261936AbVGESfk (ORCPT <rfc822;willy@w.ods.org>);
	Tue, 5 Jul 2005 14:35:40 -0400
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S261924AbVGESfk
	(ORCPT <rfc822;linux-kernel-outgoing>);
	Tue, 5 Jul 2005 14:35:40 -0400
Received: from mx1.redhat.com ([66.187.233.31]:3205 "EHLO mx1.redhat.com")
	by vger.kernel.org with ESMTP id S261948AbVGESa7 (ORCPT
	<rfc822;linux-kernel@vger.kernel.org>);
	Tue, 5 Jul 2005 14:30:59 -0400
Message-ID: <42CAD1DF.3030405@redhat.com>
Date: Tue, 05 Jul 2005 14:30:55 -0400
From: William Cohen <wcohen@redhat.com>
User-Agent: Mozilla Thunderbird 1.0.2-1.3.3 (X11/20050513)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: linux-kernel@vger.kernel.org
Subject: Re: [RFC] exit_thread() speedups in x86 process.c
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Sender: linux-kernel-owner@vger.kernel.org
X-Mailing-List: linux-kernel@vger.kernel.org

One of the difficulties function reordering is getting useful data to 
figure out a reasonable order for the functions. People do guess wrong 
on the frequency of particular functions. Also naive ordering techniques 
like just ordering functions based on frequency do not work well.

A North Carolina State University senior project was done to generate 
ordering to improve TLB and cache hit ratios using the information 
generated by valgrind for user-space programs:

http://www.bclennox.com/cgi-bin/show.cgi?page=home

Xen is running the domains (and kernels) in user-space. Would it be 
possible to adapt valgrind/xen to run a domain so that similar 
information could be collected about a particular kernel?  Being able to 
use valgrind on the kernel could allow other analysis of the kernel 
code, e.g. find unwanted TLB flushes.

-Will

I am not subscribed to the list, so please cc me on responses.
