Return-Path: <linux-kernel-owner+willy=40w.ods.org-S965178AbVHPJ7Q@vger.kernel.org>
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S965178AbVHPJ7Q (ORCPT <rfc822;willy@w.ods.org>);
	Tue, 16 Aug 2005 05:59:16 -0400
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S965179AbVHPJ7Q
	(ORCPT <rfc822;linux-kernel-outgoing>);
	Tue, 16 Aug 2005 05:59:16 -0400
Received: from NK210-202-245-3.vdsl.static.apol.com.tw ([210.202.245.3]:27615
	"EHLO uli.com.tw") by vger.kernel.org with ESMTP id S965178AbVHPJ7P
	(ORCPT <rfc822;linux-kernel@vger.kernel.org>);
	Tue, 16 Aug 2005 05:59:15 -0400
Subject: Re: Re: [patch] net/tulip: LAN driver for ULI M5261/M5263
To: Jeff Garzik <jgarzik@pobox.com>
Cc: Alexey Dobriyan <adobriyan@gmail.com>, Alan Cox <alan@redhat.com>,
       Clear.Zhang@uli.com.tw, netdev@vger.kernel.org,
       linux-kernel@vger.kernel.org, Emily.Jiang@uli.com.tw
X-Mailer: Lotus Notes R5.0 (Intl) 30 March 1999
Message-ID: <OF308CFA6C.C728268D-ON4825705F.00365A7A@uli.com.tw>
From: Peer.Chen@uli.com.tw
Date: Tue, 16 Aug 2005 17:58:31 +0800
MIME-Version: 1.0
X-MIMETrack: Serialize by Router on ulicnm01/ULI(Release 5.0.11  |July 24, 2002) at 2005-08-16
 17:58:32,
	Itemize by SMTP Server on ulim01/ULI(Release 5.0.11  |July 24, 2002) at
 2005/08/16 05:58:33 PM,
	Serialize by Router on ulim01/ULI(Release 5.0.11  |July 24, 2002) at 2005/08/16
 05:58:37 PM
Content-type: multipart/mixed; 
	Boundary="0__=C7BBFACCDFA5DCEA8f9e8a93df938690918cC7BBFACCDFA5DCEA"
Content-Disposition: inline
Sender: linux-kernel-owner@vger.kernel.org
X-Mailing-List: linux-kernel@vger.kernel.org

--0__=C7BBFACCDFA5DCEA8f9e8a93df938690918cC7BBFACCDFA5DCEA
Content-transfer-encoding: base64
Content-type: text/plain; charset=gb2312


DQpKZWZmOg0KVGhlIGF0dGFjaGVkIGZpbGUgaXMgdGhlIGluY3JlbWVudGFsIHBhdGNoIHRvIHRo
ZSBvcmlnaW5hbCB1bGk1MjZ4LmMgSSBzZW5kDQp5b3UgZmlyc3QgdGltZSwNCkkgbW9kaWZ5IHRo
ZSBzb3VyY2UgYWNjb3JkaW5nIHRvIHlvdXIgYWR2aWNlLCB0aGFua3MuDQoNClNpZ25lZC1vZmYt
Ynk6IFBlZXIgQ2hlbiA8UGVlci5DaGVuQHVsaS5jb20udHc+DQooU2VlIGF0dGFjaGVkIGZpbGU6
IHBhdGNoX3VsaTUyNnhfaW5jKQ0KDQpCZXN0IFJlZ2FyZHMNClBlZXINCg0KDQp8LS0tLS0tLS0t
Ky0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCnwgICAgICAgICB8ICAgICAgICAgICBKZWZm
IEdhcnppayAgICAgfA0KfCAgICAgICAgIHwgICAgICAgICAgIDxqZ2FyemlrQHBvYm94LmN8DQp8
ICAgICAgICAgfCAgICAgICAgICAgb20+ICAgICAgICAgICAgIHwNCnwgICAgICAgICB8ICAgICAg
ICAgICAgICAgICAgICAgICAgICAgfA0KfCAgICAgICAgIHwgICAgICAgICAgIDIwMDUtMDgtMTIg
MDM6MTV8DQp8ICAgICAgICAgfCAgICAgICAgICAgICAgICAgICAgICAgICAgIHwNCnwtLS0tLS0t
LS0rLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICA+LS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tfA0KICB8ICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgfA0KICB8ICAgICAgICDK1bz+yMujuiBQZWVyLkNoZW5AdWxpLmNvbS50dyAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgfA0KICB8ICAgICAgICCzrcvNo7ogICBBbGV4ZXkg
RG9icml5YW4gPGFkb2JyaXlhbkBnbWFpbC5jb20+LCBBbGFuIENveCA8YWxhbkByZWRoYXQuY29t
PiwgQ2xlYXIuWmhhbmdAdWxpLmNvbS50dywgICAgICAgICAgICAgICAgICAgfA0KICB8ICAgICAg
ICBuZXRkZXZAdmdlci5rZXJuZWwub3JnLCBFbWlseS5KaWFuZ0B1bGkuY29tLnR3ICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgfA0KICB8ICAgICAgICDW98zio7ogICBSZTogW3BhdGNoXSBuZXQvdHVsaXA6IExBTiBk
cml2ZXIgZm9yIFVMSSBNNTI2MS9NNTI2MyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgfA0KICA+LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tfA0KDQoNCg0KUGVlci5D
aGVuQHVsaS5jb20udHcgd3JvdGU6DQo+IEplZmY6DQo+IEkgaGF2ZSByZW1vdmVkIHRoZSB1bGk1
MjZ4IHN1cHBvcnQgZnJvbSB0dWxpcCBjb3JlIGRyaXZlcixjaGVjayB0aGUgcGF0Y2gNCj4gZmls
ZSBmb3IgZGV0YWlsLHRoYW5rcy4NCg0KUGF0Y2ggYXBwbGllZCwgdGhhbmtzIQ0KDQoNCj4gQWxl
eGV5Og0KPiBIZXJlIHRoZSBuZXcgcGF0Y2gscGxlYXNlIGNoZWNrIGl0LCB0aGFua3MuDQo+IChT
ZWUgYXR0YWNoZWQgZmlsZTogcGF0Y2h1bGk1MjZ4KQ0KDQpQbGVhc2Ugc3VibWl0IGEgcGF0Y2gg
LWluY3JlbWVudGFsLSB0byB0aGUgb3JpZ2luYWwgdWxpNTI2eC5jIHRoYXQgeW91DQpzZW50Lg0K
DQpJIGhhdmUgYWxyZWFkeSBhcHBsaWVkIHlvdXIgb3JpZ2luYWwgcGF0Y2gsIHNvIEkgYW0gdW5h
YmxlIHRvIGFwcGx5IHRoaXMNCm5ldyBwYXRjaC4NCg0KQWxzbzoNCg0KMSkgT2J0YWluIFBDSSB2
ZW5kb3IsIGRldmljZSBJRHMgZnJvbSBwZGV2LT52ZW5kb3IgYW5kIHBkZXYtPmRldmljZSwgbm90
DQpieSByZWFkaW5nIFBDSSBjb25maWcgcmVnaXN0ZXJzIGRpcmVjdGx5Og0KDQogICAgICAgICAv
L2FkZCBieSBjbGVhcnpoYW5nIDIwMDQvNy84DQogICAgICAgICBwY2lfcmVhZF9jb25maWdfZHdv
cmQocGRldiwweDAsJmNvbmZpZ3ZhbCk7DQogICAgICAgICBtNTI2eF9pZCA9IGNvbmZpZ3ZhbDsN
CiAgICAgICAgIGlmKGNvbmZpZ3ZhbCA9PSAweDUyNjMxMGI5KQ0KICAgICAgICAgew0KICAgICAg
ICAgICAgICAgICAvL3ByaW50aygiaXMgbTUyNjNcbiIpOw0KICAgICAgICAgICAgICAgICBwY2lf
cmVhZF9jb25maWdfZHdvcmQocGRldiwweDBjLCZjb25maWd2YWwpOw0KICAgICAgICAgICAgICAg
ICBjb25maWd2YWwgPSAoKGNvbmZpZ3ZhbCAmIDB4ZmZmZjAwZmYpIHwgMHg4MDAwKTsNCiAgICAg
ICAgICAgICAgICAgcGNpX3dyaXRlX2NvbmZpZ19kd29yZChwZGV2LDB4MGMsY29uZmlndmFsKTsN
CiAgICAgICAgIH0NCg0KDQoyKSBDaGVjayByZXR1cm4gdmFsdWUgb2YgcGNpX2FsbG9jX2NvbnNp
c3RlbnQoKSBmb3IgZmFpbHVyZSwgYW5kIGhhbmRsZQ0KY2xlYW51cDoNCg0KPiAgICAgICAgIGRi
LT5kZXNjX3Bvb2xfcHRyID0gcGNpX2FsbG9jX2NvbnNpc3RlbnQocGRldiwgc2l6ZW9mKHN0cnVj
dA0KdHhfZGVzYykgKg0KPiBERVNDX0FMTF9DTlQgKyAweDIwLCAmZGItPmRlc2NfcG9vbF9kbWFf
cHRyKTsNCj4gICAgICAgICBkYi0+YnVmX3Bvb2xfcHRyID0gcGNpX2FsbG9jX2NvbnNpc3RlbnQo
cGRldiwgVFhfQlVGX0FMTE9DICoNClRYX0RFU0NfQ05UDQo+ICArIDQsICZkYi0+YnVmX3Bvb2xf
ZG1hX3B0cik7DQoNCg0KMykgdWxpNTI2eF9yZW1vdmVfb25lKCkgc2hvdWxkIGNhbGwgcGNpX2Rp
c2FibGVfZGV2aWNlKCkNCg0KDQoNCg0K

--0__=C7BBFACCDFA5DCEA8f9e8a93df938690918cC7BBFACCDFA5DCEA
Content-type: application/octet-stream; 
	name="=?gb2312?B?cGF0Y2hfdWxpNTI2eF9pbmM=?="
Content-Disposition: attachment; filename="=?gb2312?B?cGF0Y2hfdWxpNTI2eF9pbmM=?="
Content-Transfer-Encoding: base64

LS0tIGxpbnV4LTIuNi4xMi9kcml2ZXJzL25ldC90dWxpcC91bGk1MjZ4LmMub3JpZwkyMDA1LTA4
LTE2IDE1OjM2OjE4Ljg1MzM1MDg4MCArMDgwMAorKysgbGludXgtMi42LjEyL2RyaXZlcnMvbmV0
L3R1bGlwL3VsaTUyNnguYwkyMDA1LTA4LTE2IDE1OjM2OjE4LjA4NjQ2NzQ2NCArMDgwMApAQCAt
NTYsOCArNTYsNyBAQAogI2RlZmluZSBSWF9BTExPQ19TSVpFICAgMHg2MjAKICNkZWZpbmUgVUxJ
NTI2WF9SRVNFVCAgICAxCiAjZGVmaW5lIENSMF9ERUZBVUxUICAgICAwCi0jZGVmaW5lIENSNl9E
RUZBVUxUICAgICAweDAwMDgwMDAwICAgICAgLyogSEQgKi8KLSNkZWZpbmUgQ1I2X0RFRkFVTFRf
QSAgICAgMHgyMjI0MDAwMAorI2RlZmluZSBDUjZfREVGQVVMVCAgICAgMHgyMjIwMDAwMAogI2Rl
ZmluZSBDUjdfREVGQVVMVCAgICAgMHgxODBjMQogI2RlZmluZSBDUjE1X0RFRkFVTFQgICAgMHgw
NiAgICAgICAgICAgIC8qIFR4SmFiYmVyIFJ4V2F0Y2hkb2cgKi8KICNkZWZpbmUgVERFUzBfRVJS
X01BU0sgIDB4NDMwMiAgICAgICAgICAvKiBUWEpULCBMQywgRUMsIEZVRSAqLwpAQCAtMTAzLDEw
ICsxMDIsMTMgQEAKIAogI2RlZmluZSBTUk9NX1Y0MV9DT0RFICAgMHgxNAogCi0jZGVmaW5lIFNS
T01fQ0xLX1dSSVRFKGRhdGEsIGlvYWRkcikgb3V0bChkYXRhfENSOV9TUk9NX1JFQUR8Q1I5X1NS
Q1MsaW9hZGRyKTt1ZGVsYXkoNSk7b3V0bChkYXRhfENSOV9TUk9NX1JFQUR8Q1I5X1NSQ1N8Q1I5
X1NSQ0xLLGlvYWRkcik7dWRlbGF5KDUpO291dGwoZGF0YXxDUjlfU1JPTV9SRUFEfENSOV9TUkNT
LGlvYWRkcik7dWRlbGF5KDUpOwotCi0vKiBTdGVuIENoZWNrICovCi0jZGVmaW5lIERFVklDRSBu
ZXRfZGV2aWNlCisjZGVmaW5lIFNST01fQ0xLX1dSSVRFKGRhdGEsIGlvYWRkcikJCQkJCVwKKwkJ
b3V0bChkYXRhfENSOV9TUk9NX1JFQUR8Q1I5X1NSQ1MsaW9hZGRyKTsJCVwKKwkJdWRlbGF5KDUp
OwkJCQkJCVwKKwkJb3V0bChkYXRhfENSOV9TUk9NX1JFQUR8Q1I5X1NSQ1N8Q1I5X1NSQ0xLLGlv
YWRkcik7CVwKKwkJdWRlbGF5KDUpOwkJCQkJCVwKKwkJb3V0bChkYXRhfENSOV9TUk9NX1JFQUR8
Q1I5X1NSQ1MsaW9hZGRyKTsJCVwKKwkJdWRlbGF5KDUpOwogCiAvKiBTdHJ1Y3R1cmUvZW51bSBk
ZWNsYXJhdGlvbiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovCiBzdHJ1Y3QgdHhf
ZGVzYyB7CkBAIC0xMjMsNyArMTI1LDcgQEAgc3RydWN0IHJ4X2Rlc2MgewogCiBzdHJ1Y3QgdWxp
NTI2eF9ib2FyZF9pbmZvIHsKIAl1MzIgY2hpcF9pZDsJCQkvKiBDaGlwIHZlbmRvci9EZXZpY2Ug
SUQgKi8KLQlzdHJ1Y3QgREVWSUNFICpuZXh0X2RldjsJLyogbmV4dCBkZXZpY2UgKi8KKwlzdHJ1
Y3QgbmV0X2RldmljZSAqbmV4dF9kZXY7CS8qIG5leHQgZGV2aWNlICovCiAJc3RydWN0IHBjaV9k
ZXYgKnBkZXY7CQkvKiBQQ0kgZGV2aWNlICovCiAJc3BpbmxvY2tfdCBsb2NrOwogCkBAIC0yMTIs
MjIgKzIxNCwyMSBAQCBzdGF0aWMgdTMyIHVsaTUyNnhfY3I2X3VzZXJfc2V0OwogLyogRm9yIG1v
ZHVsZSBpbnB1dCBwYXJhbWV0ZXIgKi8KIHN0YXRpYyBpbnQgZGVidWc7CiBzdGF0aWMgdTMyIGNy
NnNldDsKLXN0YXRpYyB1MzIgbTUyNnhfaWQ7CiBzdGF0aWMgdW5zaWduZWQgY2hhciBtb2RlID0g
ODsKIAogLyogZnVuY3Rpb24gZGVjbGFyYXRpb24gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLSAqLwotc3RhdGljIGludCB1bGk1MjZ4X29wZW4oc3RydWN0IERFVklDRSAqKTsK
LXN0YXRpYyBpbnQgdWxpNTI2eF9zdGFydF94bWl0KHN0cnVjdCBza19idWZmICosIHN0cnVjdCBE
RVZJQ0UgKik7Ci1zdGF0aWMgaW50IHVsaTUyNnhfc3RvcChzdHJ1Y3QgREVWSUNFICopOwotc3Rh
dGljIHN0cnVjdCBuZXRfZGV2aWNlX3N0YXRzICogdWxpNTI2eF9nZXRfc3RhdHMoc3RydWN0IERF
VklDRSAqKTsKLXN0YXRpYyB2b2lkIHVsaTUyNnhfc2V0X2ZpbHRlcl9tb2RlKHN0cnVjdCBERVZJ
Q0UgKik7CitzdGF0aWMgaW50IHVsaTUyNnhfb3BlbihzdHJ1Y3QgbmV0X2RldmljZSAqKTsKK3N0
YXRpYyBpbnQgdWxpNTI2eF9zdGFydF94bWl0KHN0cnVjdCBza19idWZmICosIHN0cnVjdCBuZXRf
ZGV2aWNlICopOworc3RhdGljIGludCB1bGk1MjZ4X3N0b3Aoc3RydWN0IG5ldF9kZXZpY2UgKik7
CitzdGF0aWMgc3RydWN0IG5ldF9kZXZpY2Vfc3RhdHMgKiB1bGk1MjZ4X2dldF9zdGF0cyhzdHJ1
Y3QgbmV0X2RldmljZSAqKTsKK3N0YXRpYyB2b2lkIHVsaTUyNnhfc2V0X2ZpbHRlcl9tb2RlKHN0
cnVjdCBuZXRfZGV2aWNlICopOwogc3RhdGljIHN0cnVjdCBldGh0b29sX29wcyBuZXRkZXZfZXRo
dG9vbF9vcHM7Ci1zdGF0aWMgdTE2IHJlYWRfc3JvbV93b3JkKGxvbmcgLGludCk7Ci1zdGF0aWMg
aXJxcmV0dXJuX3QgdWxpNTI2eF9pbnRlcnJ1cHQoaW50ICwgdm9pZCAqLCBzdHJ1Y3QgcHRfcmVn
cyAqKTsKK3N0YXRpYyB1MTYgcmVhZF9zcm9tX3dvcmQobG9uZywgaW50KTsKK3N0YXRpYyBpcnFy
ZXR1cm5fdCB1bGk1MjZ4X2ludGVycnVwdChpbnQsIHZvaWQgKiwgc3RydWN0IHB0X3JlZ3MgKik7
CiBzdGF0aWMgdm9pZCB1bGk1MjZ4X2Rlc2NyaXB0b3JfaW5pdChzdHJ1Y3QgdWxpNTI2eF9ib2Fy
ZF9pbmZvICosIHVuc2lnbmVkIGxvbmcpOwogc3RhdGljIHZvaWQgYWxsb2NhdGVfcnhfYnVmZmVy
KHN0cnVjdCB1bGk1MjZ4X2JvYXJkX2luZm8gKik7CiBzdGF0aWMgdm9pZCB1cGRhdGVfY3I2KHUz
MiwgdW5zaWduZWQgbG9uZyk7Ci1zdGF0aWMgdm9pZCBzZW5kX2ZpbHRlcl9mcmFtZShzdHJ1Y3Qg
REVWSUNFICogLGludCk7CitzdGF0aWMgdm9pZCBzZW5kX2ZpbHRlcl9mcmFtZShzdHJ1Y3QgbmV0
X2RldmljZSAqLCBpbnQpOwogc3RhdGljIHUxNiBwaHlfcmVhZCh1bnNpZ25lZCBsb25nLCB1OCwg
dTgsIHUzMik7CiBzdGF0aWMgdTE2IHBoeV9yZWFkYnlfY3IxMCh1bnNpZ25lZCBsb25nLCB1OCwg
dTgpOwogc3RhdGljIHZvaWQgcGh5X3dyaXRlKHVuc2lnbmVkIGxvbmcsIHU4LCB1OCwgdTE2LCB1
MzIpOwpAQCAtMjM3LDE4ICsyMzgsMTggQEAgc3RhdGljIHUxNiBwaHlfcmVhZF8xYml0KHVuc2ln
bmVkIGxvbmcsIAogc3RhdGljIHU4IHVsaTUyNnhfc2Vuc2Vfc3BlZWQoc3RydWN0IHVsaTUyNnhf
Ym9hcmRfaW5mbyAqKTsKIHN0YXRpYyB2b2lkIHVsaTUyNnhfcHJvY2Vzc19tb2RlKHN0cnVjdCB1
bGk1MjZ4X2JvYXJkX2luZm8gKik7CiBzdGF0aWMgdm9pZCB1bGk1MjZ4X3RpbWVyKHVuc2lnbmVk
IGxvbmcpOwotc3RhdGljIHZvaWQgdWxpNTI2eF9yeF9wYWNrZXQoc3RydWN0IERFVklDRSAqLCBz
dHJ1Y3QgdWxpNTI2eF9ib2FyZF9pbmZvICopOwotc3RhdGljIHZvaWQgdWxpNTI2eF9mcmVlX3R4
X3BrdChzdHJ1Y3QgREVWSUNFICosIHN0cnVjdCB1bGk1MjZ4X2JvYXJkX2luZm8gKik7CitzdGF0
aWMgdm9pZCB1bGk1MjZ4X3J4X3BhY2tldChzdHJ1Y3QgbmV0X2RldmljZSAqLCBzdHJ1Y3QgdWxp
NTI2eF9ib2FyZF9pbmZvICopOworc3RhdGljIHZvaWQgdWxpNTI2eF9mcmVlX3R4X3BrdChzdHJ1
Y3QgbmV0X2RldmljZSAqLCBzdHJ1Y3QgdWxpNTI2eF9ib2FyZF9pbmZvICopOwogc3RhdGljIHZv
aWQgdWxpNTI2eF9yZXVzZV9za2Ioc3RydWN0IHVsaTUyNnhfYm9hcmRfaW5mbyAqLCBzdHJ1Y3Qg
c2tfYnVmZiAqKTsKLXN0YXRpYyB2b2lkIHVsaTUyNnhfZHluYW1pY19yZXNldChzdHJ1Y3QgREVW
SUNFICopOworc3RhdGljIHZvaWQgdWxpNTI2eF9keW5hbWljX3Jlc2V0KHN0cnVjdCBuZXRfZGV2
aWNlICopOwogc3RhdGljIHZvaWQgdWxpNTI2eF9mcmVlX3J4YnVmZmVyKHN0cnVjdCB1bGk1MjZ4
X2JvYXJkX2luZm8gKik7Ci1zdGF0aWMgdm9pZCB1bGk1MjZ4X2luaXQoc3RydWN0IERFVklDRSAq
KTsKK3N0YXRpYyB2b2lkIHVsaTUyNnhfaW5pdChzdHJ1Y3QgbmV0X2RldmljZSAqKTsKIHN0YXRp
YyB2b2lkIHVsaTUyNnhfc2V0X3BoeXhjZXIoc3RydWN0IHVsaTUyNnhfYm9hcmRfaW5mbyAqKTsK
IAotLyogVUxJNTI2WCBuZXR3b3JrIGJhb3JkIHJvdXRpbmUgLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLSAqLworLyogVUxJNTI2WCBuZXR3b3JrIGJvYXJkIHJvdXRpbmUgLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLSAqLwogCiAvKgotICoJU2VhcmNoIFVMSTUyNlggYm9hcmQgLGFsbG9j
YXRlIHNwYWNlIGFuZCByZWdpc3RlciBpdAorICoJU2VhcmNoIFVMSTUyNlggYm9hcmQsIGFsbG9j
YXRlIHNwYWNlIGFuZCByZWdpc3RlciBpdAogICovCiAKIHN0YXRpYyBpbnQgX19kZXZpbml0IHVs
aTUyNnhfaW5pdF9vbmUgKHN0cnVjdCBwY2lfZGV2ICpwZGV2LApAQCAtMjU3LDggKzI1OCw3IEBA
IHN0YXRpYyBpbnQgX19kZXZpbml0IHVsaTUyNnhfaW5pdF9vbmUgKHMKIAlzdHJ1Y3QgdWxpNTI2
eF9ib2FyZF9pbmZvICpkYjsJLyogYm9hcmQgaW5mb3JtYXRpb24gc3RydWN0dXJlICovCiAJc3Ry
dWN0IG5ldF9kZXZpY2UgKmRldjsKIAlpbnQgaSwgZXJyOwotCXUzMiBjb25maWd2YWw7Ci0KKwkK
IAlVTEk1MjZYX0RCVUcoMCwgInVsaTUyNnhfaW5pdF9vbmUoKSIsIDApOwogCiAJaWYgKCFwcmlu
dGVkX3ZlcnNpb24rKykKQEAgLTI3MSw3ICsyNzEsNyBAQCBzdGF0aWMgaW50IF9fZGV2aW5pdCB1
bGk1MjZ4X2luaXRfb25lIChzCiAJU0VUX01PRFVMRV9PV05FUihkZXYpOwogCVNFVF9ORVRERVZf
REVWKGRldiwgJnBkZXYtPmRldik7CiAKLQlpZiAocGNpX3NldF9kbWFfbWFzayhwZGV2LCAweGZm
ZmZmZmZmKSkgeworCWlmIChwY2lfc2V0X2RtYV9tYXNrKHBkZXYsIERNQV8zMkJJVF9NQVNLKSkg
ewogCQlwcmludGsoS0VSTl9XQVJOSU5HIERSVl9OQU1FICI6IDMyLWJpdCBQQ0kgRE1BIG5vdCBh
dmFpbGFibGUuXG4iKTsKIAkJZXJyID0gLUVOT0RFVjsKIAkJZ290byBlcnJfb3V0X2ZyZWU7CkBA
IC0zMDAsMjMgKzMwMCwyMyBAQCBzdGF0aWMgaW50IF9fZGV2aW5pdCB1bGk1MjZ4X2luaXRfb25l
IChzCiAJCWdvdG8gZXJyX291dF9kaXNhYmxlOwogCX0KIAotCS8vYWRkIGJ5IGNsZWFyemhhbmcg
MjAwNC83LzgKLQlwY2lfcmVhZF9jb25maWdfZHdvcmQocGRldiwweDAsJmNvbmZpZ3ZhbCk7Ci0J
bTUyNnhfaWQgPSBjb25maWd2YWw7Ci0JaWYoY29uZmlndmFsID09IDB4NTI2MzEwYjkpCi0Jewot
CQkvL3ByaW50aygiaXMgbTUyNjNcbiIpOwotCQlwY2lfcmVhZF9jb25maWdfZHdvcmQocGRldiww
eDBjLCZjb25maWd2YWwpOwotCQljb25maWd2YWwgPSAoKGNvbmZpZ3ZhbCAmIDB4ZmZmZjAwZmYp
IHwgMHg4MDAwKTsKLQkJcGNpX3dyaXRlX2NvbmZpZ19kd29yZChwZGV2LDB4MGMsY29uZmlndmFs
KTsKLQl9CiAJLyogSW5pdCBzeXN0ZW0gJiBkZXZpY2UgKi8KIAlkYiA9IG5ldGRldl9wcml2KGRl
dik7CiAKIAkvKiBBbGxvY2F0ZSBUeC9SeCBkZXNjcmlwdG9yIG1lbW9yeSAqLwogCWRiLT5kZXNj
X3Bvb2xfcHRyID0gcGNpX2FsbG9jX2NvbnNpc3RlbnQocGRldiwgc2l6ZW9mKHN0cnVjdCB0eF9k
ZXNjKSAqIERFU0NfQUxMX0NOVCArIDB4MjAsICZkYi0+ZGVzY19wb29sX2RtYV9wdHIpOworCWlm
KGRiLT5kZXNjX3Bvb2xfcHRyID09IE5VTEwpCisJeworCQllcnIgPSAtRU5PTUVNOworCQlnb3Rv
IGVycl9vdXRfbm9tZW07CisJfQogCWRiLT5idWZfcG9vbF9wdHIgPSBwY2lfYWxsb2NfY29uc2lz
dGVudChwZGV2LCBUWF9CVUZfQUxMT0MgKiBUWF9ERVNDX0NOVCArIDQsICZkYi0+YnVmX3Bvb2xf
ZG1hX3B0cik7Ci0KKwlpZihkYi0+YnVmX3Bvb2xfcHRyID09IE5VTEwpCisJeworCQllcnIgPSAt
RU5PTUVNOworCQlnb3RvIGVycl9vdXRfbm9tZW07CisJfQorCQogCWRiLT5maXJzdF90eF9kZXNj
ID0gKHN0cnVjdCB0eF9kZXNjICopIGRiLT5kZXNjX3Bvb2xfcHRyOwogCWRiLT5maXJzdF90eF9k
ZXNjX2RtYSA9IGRiLT5kZXNjX3Bvb2xfZG1hX3B0cjsKIAlkYi0+YnVmX3Bvb2xfc3RhcnQgPSBk
Yi0+YnVmX3Bvb2xfcHRyOwpAQCAtMzQ3LDcgKzM0Nyw3IEBAIHN0YXRpYyBpbnQgX19kZXZpbml0
IHVsaTUyNnhfaW5pdF9vbmUgKHMKIAkJKCh1MTYgKikgZGItPnNyb20pW2ldID0gY3B1X3RvX2xl
MTYocmVhZF9zcm9tX3dvcmQoZGItPmlvYWRkciwgaSkpOwogCiAJLyogU2V0IE5vZGUgYWRkcmVz
cyAqLwotCWlmKCgodTE2ICopIGRiLT5zcm9tKVswXSA9PSAweGZmZmYpCQkvKiBTUk9NIGFic2Vu
dCwgc28gcmVhZCBNQUMgYWRkcmVzcyBmcm9tIElEIFRhYmxlICovCisJaWYoKCh1MTYgKikgZGIt
PnNyb20pWzBdID09IDB4ZmZmZiB8fCAoKHUxNiAqKSBkYi0+c3JvbSlbMF0gPT0gMCkJCS8qIFNS
T00gYWJzZW50LCBzbyByZWFkIE1BQyBhZGRyZXNzIGZyb20gSUQgVGFibGUgKi8KIAl7CiAJCW91
dGwoMHgxMDAwMCwgZGItPmlvYWRkciArIERDUjApOwkvL0RpYWdub3NpcyBtb2RlCiAJCW91dGwo
MHgxYzAsIGRiLT5pb2FkZHIgKyBEQ1IxMyk7CS8vUmVzZXQgZGlhbm9zdGljIHBvaW50ZXIgcG9y
dApAQCAtMzg1LDYgKzM4NSwxNCBAQCBzdGF0aWMgaW50IF9fZGV2aW5pdCB1bGk1MjZ4X2luaXRf
b25lIChzCiAKIGVycl9vdXRfcmVzOgogCXBjaV9yZWxlYXNlX3JlZ2lvbnMocGRldik7CitlcnJf
b3V0X25vbWVtOgorCWlmKGRiLT5kZXNjX3Bvb2xfcHRyKQorCQlwY2lfZnJlZV9jb25zaXN0ZW50
KHBkZXYsIHNpemVvZihzdHJ1Y3QgdHhfZGVzYykgKiBERVNDX0FMTF9DTlQgKyAweDIwLAorCQkJ
ZGItPmRlc2NfcG9vbF9wdHIsIGRiLT5kZXNjX3Bvb2xfZG1hX3B0cik7CisJCQkKKwlpZihkYi0+
YnVmX3Bvb2xfcHRyICE9IE5VTEwpCisJCXBjaV9mcmVlX2NvbnNpc3RlbnQocGRldiwgVFhfQlVG
X0FMTE9DICogVFhfREVTQ19DTlQgKyA0LAorCQkJZGItPmJ1Zl9wb29sX3B0ciwgZGItPmJ1Zl9w
b29sX2RtYV9wdHIpOwogZXJyX291dF9kaXNhYmxlOgogCXBjaV9kaXNhYmxlX2RldmljZShwZGV2
KTsKIGVycl9vdXRfZnJlZToKQEAgLTQwMiwzMiArNDEwLDMwIEBAIHN0YXRpYyB2b2lkIF9fZGV2
ZXhpdCB1bGk1MjZ4X3JlbW92ZV9vbmUKIAogCVVMSTUyNlhfREJVRygwLCAidWxpNTI2eF9yZW1v
dmVfb25lKCkiLCAwKTsKIAotIAlpZiAoZGV2KSB7Ci0JCXBjaV9mcmVlX2NvbnNpc3RlbnQoZGIt
PnBkZXYsIHNpemVvZihzdHJ1Y3QgdHhfZGVzYykgKgotCQkJCQlERVNDX0FMTF9DTlQgKyAweDIw
LCBkYi0+ZGVzY19wb29sX3B0ciwKLSAJCQkJCWRiLT5kZXNjX3Bvb2xfZG1hX3B0cik7Ci0JCXBj
aV9mcmVlX2NvbnNpc3RlbnQoZGItPnBkZXYsIFRYX0JVRl9BTExPQyAqIFRYX0RFU0NfQ05UICsg
NCwKLQkJCQkJZGItPmJ1Zl9wb29sX3B0ciwgZGItPmJ1Zl9wb29sX2RtYV9wdHIpOwotCQl1bnJl
Z2lzdGVyX25ldGRldihkZXYpOwotCQlwY2lfcmVsZWFzZV9yZWdpb25zKHBkZXYpOwotCQlmcmVl
X25ldGRldihkZXYpOwkvKiBmcmVlIGJvYXJkIGluZm9ybWF0aW9uICovCi0JCXBjaV9zZXRfZHJ2
ZGF0YShwZGV2LCBOVUxMKTsKLQl9Ci0KKwlwY2lfZnJlZV9jb25zaXN0ZW50KGRiLT5wZGV2LCBz
aXplb2Yoc3RydWN0IHR4X2Rlc2MpICoKKwkJCQlERVNDX0FMTF9DTlQgKyAweDIwLCBkYi0+ZGVz
Y19wb29sX3B0ciwKKyAJCQkJZGItPmRlc2NfcG9vbF9kbWFfcHRyKTsKKwlwY2lfZnJlZV9jb25z
aXN0ZW50KGRiLT5wZGV2LCBUWF9CVUZfQUxMT0MgKiBUWF9ERVNDX0NOVCArIDQsCisJCQkJZGIt
PmJ1Zl9wb29sX3B0ciwgZGItPmJ1Zl9wb29sX2RtYV9wdHIpOworCXVucmVnaXN0ZXJfbmV0ZGV2
KGRldik7CisJcGNpX3JlbGVhc2VfcmVnaW9ucyhwZGV2KTsKKwlmcmVlX25ldGRldihkZXYpOwkv
KiBmcmVlIGJvYXJkIGluZm9ybWF0aW9uICovCisJcGNpX3NldF9kcnZkYXRhKHBkZXYsIE5VTEwp
OworCXBjaV9kaXNhYmxlX2RldmljZShwZGV2KTsKIAlVTEk1MjZYX0RCVUcoMCwgInVsaTUyNnhf
cmVtb3ZlX29uZSgpIGV4aXQiLCAwKTsKIH0KIAogCiAvKgogICoJT3BlbiB0aGUgaW50ZXJmYWNl
LgotICoJVGhlIGludGVyZmFjZSBpcyBvcGVuZWQgd2hlbmV2ZXIgImlmY29uZmlnIiBhY3RpdmVz
IGl0LgorICoJVGhlIGludGVyZmFjZSBpcyBvcGVuZWQgd2hlbmV2ZXIgImlmY29uZmlnIiBhY3Rp
dmF0ZXMgaXQuCiAgKi8KIAotc3RhdGljIGludCB1bGk1MjZ4X29wZW4oc3RydWN0IERFVklDRSAq
ZGV2KQorc3RhdGljIGludCB1bGk1MjZ4X29wZW4oc3RydWN0IG5ldF9kZXZpY2UgKmRldikKIHsK
IAlpbnQgcmV0OwogCXN0cnVjdCB1bGk1MjZ4X2JvYXJkX2luZm8gKmRiID0gbmV0ZGV2X3ByaXYo
ZGV2KTsKLQorCQogCVVMSTUyNlhfREJVRygwLCAidWxpNTI2eF9vcGVuIiwgMCk7CiAKIAlyZXQg
PSByZXF1ZXN0X2lycShkZXYtPmlycSwgJnVsaTUyNnhfaW50ZXJydXB0LCBTQV9TSElSUSwgZGV2
LT5uYW1lLCBkZXYpOwpAQCAtNDM2LDExICs0NDIsNiBAQCBzdGF0aWMgaW50IHVsaTUyNnhfb3Bl
bihzdHJ1Y3QgREVWSUNFICpkCiAKIAkvKiBzeXN0ZW0gdmFyaWFibGUgaW5pdCAqLwogCWRiLT5j
cjZfZGF0YSA9IENSNl9ERUZBVUxUIHwgdWxpNTI2eF9jcjZfdXNlcl9zZXQ7Ci0JaWYobTUyNnhf
aWQgPT0gMHg1MjYzMTBiOSkKLQl7ICAKLQkJLy9wcmludGsoImlzIDUyNjNcbiIpOwotCQlkYi0+
Y3I2X2RhdGEgPSBDUjZfREVGQVVMVF9BIHwgdWxpNTI2eF9jcjZfdXNlcl9zZXQ7Ci0JfQogCWRi
LT50eF9wYWNrZXRfY250ID0gMDsKIAlkYi0+cnhfYXZhaWxfY250ID0gMDsKIAlkYi0+bGlua19m
YWlsZWQgPSAxOwpAQCAtNDU0LDcgKzQ1NSw3IEBAIHN0YXRpYyBpbnQgdWxpNTI2eF9vcGVuKHN0
cnVjdCBERVZJQ0UgKmQKIAlkYi0+Y3I2X2RhdGEgfD0gVUxJNTI2WF9UWFRIXzI1NjsKIAlkYi0+
Y3IwX2RhdGEgPSBDUjBfREVGQVVMVDsKIAkKLQkvKiBJbml0aWxpemUgVUxJNTI2WCBib2FyZCAq
LworCS8qIEluaXRpYWxpemUgVUxJNTI2WCBib2FyZCAqLwogCXVsaTUyNnhfaW5pdChkZXYpOwog
CiAJLyogQWN0aXZlIFN5c3RlbSBJbnRlcmZhY2UgKi8KQEAgLTQ3MSwxNCArNDcyLDE0IEBAIHN0
YXRpYyBpbnQgdWxpNTI2eF9vcGVuKHN0cnVjdCBERVZJQ0UgKmQKIH0KIAogCi0vKglJbml0aWxp
emUgVUxJNTI2WCBib2FyZAorLyoJSW5pdGlhbGl6ZSBVTEk1MjZYIGJvYXJkCiAgKglSZXNldCBV
TEk1MjZYIGJvYXJkCi0gKglJbml0aWxpemUgVFgvUnggZGVzY3JpcHRvciBjaGFpbiBzdHJ1Y3R1
cmUKKyAqCUluaXRpYWxpemUgVFgvUnggZGVzY3JpcHRvciBjaGFpbiBzdHJ1Y3R1cmUKICAqCVNl
bmQgdGhlIHNldC11cCBmcmFtZQogICoJRW5hYmxlIFR4L1J4IG1hY2hpbmUKICAqLwogCi1zdGF0
aWMgdm9pZCB1bGk1MjZ4X2luaXQoc3RydWN0IERFVklDRSAqZGV2KQorc3RhdGljIHZvaWQgdWxp
NTI2eF9pbml0KHN0cnVjdCBuZXRfZGV2aWNlICpkZXYpCiB7CiAJc3RydWN0IHVsaTUyNnhfYm9h
cmRfaW5mbyAqZGIgPSBuZXRkZXZfcHJpdihkZXYpOwogCXVuc2lnbmVkIGxvbmcgaW9hZGRyID0g
ZGItPmlvYWRkcjsKQEAgLTUxMCwxMSArNTExLDYgQEAgc3RhdGljIHZvaWQgdWxpNTI2eF9pbml0
KHN0cnVjdCBERVZJQ0UgKgogCS8qIFBhcnNlciBTUk9NIGFuZCBtZWRpYSBtb2RlICovCiAJZGIt
Pm1lZGlhX21vZGUgPSB1bGk1MjZ4X21lZGlhX21vZGU7CiAKLQkvL2FkZCBieSBjbGVhcnpoYW5n
IDIwMDQvNy84Ci0JLyogUkVTRVQgUGh5eGNlciBDaGlwIGJ5IEdQUiBwb3J0IGJpdCA3ICovCi0J
Ly9vdXRsKDB4MTgwLCBpb2FkZHIgKyBEQ1IxMik7CQkvKiBMZXQgYml0IDcgb3V0cHV0IHBvcnQg
Ki8KLQkvL291dGwoMHgwLCBpb2FkZHIgKyBEQ1IxMik7CS8qIENsZWFyIFJFU0VUIHNpZ25hbCAq
LwotCiAJLyogUGh5eGNlciBjYXBhYmlsaXR5IHNldHRpbmcgKi8KIAlwaHlfcmVnX3Jlc2V0ID0g
cGh5X3JlYWQoZGItPmlvYWRkciwgZGItPnBoeV9hZGRyLCAwLCBkYi0+Y2hpcF9pZCk7CiAJcGh5
X3JlZ19yZXNldCA9IChwaHlfcmVnX3Jlc2V0IHwgMHg4MDAwKTsKQEAgLTUyOCw3ICs1MjQsNyBA
QCBzdGF0aWMgdm9pZCB1bGk1MjZ4X2luaXQoc3RydWN0IERFVklDRSAqCiAJaWYgKCAhKGRiLT5t
ZWRpYV9tb2RlICYgVUxJNTI2WF9BVVRPKSApCiAJCWRiLT5vcF9tb2RlID0gZGItPm1lZGlhX21v
ZGU7IAkvKiBGb3JjZSBNb2RlICovCiAKLQkvKiBJbml0aWxpYXplIFRyYW5zbWl0L1JlY2VpdmUg
ZGVjcmlwdG9yIGFuZCBDUjMvNCAqLworCS8qIEluaXRpYWxpemUgVHJhbnNtaXQvUmVjZWl2ZSBk
ZWNyaXB0b3IgYW5kIENSMy80ICovCiAJdWxpNTI2eF9kZXNjcmlwdG9yX2luaXQoZGIsIGlvYWRk
cik7CiAKIAkvKiBJbml0IENSNiB0byBwcm9ncmFtIE01MjZYIG9wZXJhdGlvbiAqLwpAQCAtNTU1
LDcgKzU1MSw3IEBAIHN0YXRpYyB2b2lkIHVsaTUyNnhfaW5pdChzdHJ1Y3QgREVWSUNFICoKICAq
CVNlbmQgYSBwYWNrZXQgdG8gbWVkaWEgZnJvbSB0aGUgdXBwZXIgbGF5ZXIuCiAgKi8KIAotc3Rh
dGljIGludCB1bGk1MjZ4X3N0YXJ0X3htaXQoc3RydWN0IHNrX2J1ZmYgKnNrYiwgc3RydWN0IERF
VklDRSAqZGV2KQorc3RhdGljIGludCB1bGk1MjZ4X3N0YXJ0X3htaXQoc3RydWN0IHNrX2J1ZmYg
KnNrYiwgc3RydWN0IG5ldF9kZXZpY2UgKmRldikKIHsKIAlzdHJ1Y3QgdWxpNTI2eF9ib2FyZF9p
bmZvICpkYiA9IG5ldGRldl9wcml2KGRldik7CiAJc3RydWN0IHR4X2Rlc2MgKnR4cHRyOwpAQCAt
NjIxLDcgKzYxNyw3IEBAIHN0YXRpYyBpbnQgdWxpNTI2eF9zdGFydF94bWl0KHN0cnVjdCBza18K
ICAqCVRoZSBpbnRlcmZhY2UgaXMgc3RvcHBlZCB3aGVuIGl0IGlzIGJyb3VnaHQuCiAgKi8KIAot
c3RhdGljIGludCB1bGk1MjZ4X3N0b3Aoc3RydWN0IERFVklDRSAqZGV2KQorc3RhdGljIGludCB1
bGk1MjZ4X3N0b3Aoc3RydWN0IG5ldF9kZXZpY2UgKmRldikKIHsKIAlzdHJ1Y3QgdWxpNTI2eF9i
b2FyZF9pbmZvICpkYiA9IG5ldGRldl9wcml2KGRldik7CiAJdW5zaWduZWQgbG9uZyBpb2FkZHIg
PSBkZXYtPmJhc2VfYWRkcjsKQEAgLTY2NSwxOSArNjYxLDE2IEBAIHN0YXRpYyBpbnQgdWxpNTI2
eF9zdG9wKHN0cnVjdCBERVZJQ0UgKmQKIAogc3RhdGljIGlycXJldHVybl90IHVsaTUyNnhfaW50
ZXJydXB0KGludCBpcnEsIHZvaWQgKmRldl9pZCwgc3RydWN0IHB0X3JlZ3MgKnJlZ3MpCiB7Ci0J
c3RydWN0IERFVklDRSAqZGV2ID0gZGV2X2lkOworCXN0cnVjdCBuZXRfZGV2aWNlICpkZXYgPSBk
ZXZfaWQ7CiAJc3RydWN0IHVsaTUyNnhfYm9hcmRfaW5mbyAqZGIgPSBuZXRkZXZfcHJpdihkZXYp
OwogCXVuc2lnbmVkIGxvbmcgaW9hZGRyID0gZGV2LT5iYXNlX2FkZHI7CiAJdW5zaWduZWQgbG9u
ZyBmbGFnczsKIAotICAgICAgIC8vVUxJNTI2WF9EQlVHKDAsICJ1bGk1MjZ4X2ludGVycnVwdCgp
IiwgMCk7Ci0KIAlpZiAoIWRldikgewogCQlVTEk1MjZYX0RCVUcoMSwgInVsaTUyNnhfaW50ZXJy
dXB0KCkgd2l0aG91dCBERVZJQ0UgYXJnIiwgMCk7CiAJCXJldHVybiBJUlFfTk9ORTsKIAl9CiAK
LQkvL291dGwoMCwgaW9hZGRyICsgRENSNyk7CiAJc3Bpbl9sb2NrX2lycXNhdmUoJmRiLT5sb2Nr
LCBmbGFncyk7CiAJb3V0bCgwLCBpb2FkZHIgKyBEQ1I3KTsKIApAQCAtNjkwLDkgKzY4Myw2IEBA
IHN0YXRpYyBpcnFyZXR1cm5fdCB1bGk1MjZ4X2ludGVycnVwdChpbnQKIAkJcmV0dXJuIElSUV9I
QU5ETEVEOwogCX0KIAotCS8qIERpc2FibGUgYWxsIGludGVycnVwdCBpbiBDUjcgdG8gc29sdmUg
dGhlIGludGVycnVwdCBlZGdlIHByb2JsZW0gKi8KLQkvL291dGwoMCwgaW9hZGRyICsgRENSNyk7
Ci0KIAkvKiBDaGVjayBzeXN0ZW0gc3RhdHVzICovCiAJaWYgKGRiLT5jcjVfZGF0YSAmIDB4MjAw
MCkgewogCQkvKiBzeXN0ZW0gYnVzIGVycm9yIGhhcHBlbiAqLwpAQCAtNzI3LDEwICs3MTcsOSBA
QCBzdGF0aWMgaXJxcmV0dXJuX3QgdWxpNTI2eF9pbnRlcnJ1cHQoaW50CiAgKglGcmVlIFRYIHJl
c291cmNlIGFmdGVyIFRYIGNvbXBsZXRlCiAgKi8KIAotc3RhdGljIHZvaWQgdWxpNTI2eF9mcmVl
X3R4X3BrdChzdHJ1Y3QgREVWSUNFICpkZXYsIHN0cnVjdCB1bGk1MjZ4X2JvYXJkX2luZm8gKiBk
YikKK3N0YXRpYyB2b2lkIHVsaTUyNnhfZnJlZV90eF9wa3Qoc3RydWN0IG5ldF9kZXZpY2UgKmRl
diwgc3RydWN0IHVsaTUyNnhfYm9hcmRfaW5mbyAqIGRiKQogewogCXN0cnVjdCB0eF9kZXNjICp0
eHB0cjsKLS8vCXVuc2lnbmVkIGxvbmcgaW9hZGRyID0gZGV2LT5iYXNlX2FkZHI7CiAJdTMyIHRk
ZXMwOwogCiAJdHhwdHIgPSBkYi0+dHhfcmVtb3ZlX3B0cjsKQEAgLTc4Nyw3ICs3NzYsNyBAQCBz
dGF0aWMgdm9pZCB1bGk1MjZ4X2ZyZWVfdHhfcGt0KHN0cnVjdCBECiAgKglSZWNlaXZlIHRoZSBj
b21lIHBhY2tldCBhbmQgcGFzcyB0byB1cHBlciBsYXllcgogICovCiAKLXN0YXRpYyB2b2lkIHVs
aTUyNnhfcnhfcGFja2V0KHN0cnVjdCBERVZJQ0UgKmRldiwgc3RydWN0IHVsaTUyNnhfYm9hcmRf
aW5mbyAqIGRiKQorc3RhdGljIHZvaWQgdWxpNTI2eF9yeF9wYWNrZXQoc3RydWN0IG5ldF9kZXZp
Y2UgKmRldiwgc3RydWN0IHVsaTUyNnhfYm9hcmRfaW5mbyAqIGRiKQogewogCXN0cnVjdCByeF9k
ZXNjICpyeHB0cjsKIAlzdHJ1Y3Qgc2tfYnVmZiAqc2tiOwpAQCAtODcxLDcgKzg2MCw3IEBAIHN0
YXRpYyB2b2lkIHVsaTUyNnhfcnhfcGFja2V0KHN0cnVjdCBERVYKICAqCUdldCBzdGF0aXN0aWNz
IGZyb20gZHJpdmVyLgogICovCiAKLXN0YXRpYyBzdHJ1Y3QgbmV0X2RldmljZV9zdGF0cyAqIHVs
aTUyNnhfZ2V0X3N0YXRzKHN0cnVjdCBERVZJQ0UgKmRldikKK3N0YXRpYyBzdHJ1Y3QgbmV0X2Rl
dmljZV9zdGF0cyAqIHVsaTUyNnhfZ2V0X3N0YXRzKHN0cnVjdCBuZXRfZGV2aWNlICpkZXYpCiB7
CiAJc3RydWN0IHVsaTUyNnhfYm9hcmRfaW5mbyAqZGIgPSBuZXRkZXZfcHJpdihkZXYpOwogCkBA
IC04ODQsNyArODczLDcgQEAgc3RhdGljIHN0cnVjdCBuZXRfZGV2aWNlX3N0YXRzICogdWxpNTI2
eAogICogU2V0IFVMSTUyNlggbXVsdGljYXN0IGFkZHJlc3MKICAqLwogCi1zdGF0aWMgdm9pZCB1
bGk1MjZ4X3NldF9maWx0ZXJfbW9kZShzdHJ1Y3QgREVWSUNFICogZGV2KQorc3RhdGljIHZvaWQg
dWxpNTI2eF9zZXRfZmlsdGVyX21vZGUoc3RydWN0IG5ldF9kZXZpY2UgKiBkZXYpCiB7CiAJc3Ry
dWN0IHVsaTUyNnhfYm9hcmRfaW5mbyAqZGIgPSBkZXYtPnByaXY7CiAJdW5zaWduZWQgbG9uZyBm
bGFnczsKQEAgLTkxNiwzNCArOTA1LDI2IEBAIHN0YXRpYyB2b2lkIHVsaTUyNnhfc2V0X2ZpbHRl
cl9tb2RlKHN0cnUKIHN0YXRpYyB2b2lkCiBVTGlfZXRodG9vbF9nc2V0KHN0cnVjdCB1bGk1MjZ4
X2JvYXJkX2luZm8gKmRiLCBzdHJ1Y3QgZXRodG9vbF9jbWQgKmVjbWQpCiB7Ci0JLy9zdHJ1Y3Qg
ZTEwMDBfaHcgKmh3ID0gJmFkYXB0ZXItPmh3OwotCi0JewotCi0JCWVjbWQtPnN1cHBvcnRlZCA9
IChTVVBQT1JURURfMTBiYXNlVF9IYWxmIHwKLQkJICAgICAgICAgICAgICAgICAgIFNVUFBPUlRF
RF8xMGJhc2VUX0Z1bGwgfAotCQkgICAgICAgICAgICAgICAgICAgU1VQUE9SVEVEXzEwMGJhc2VU
X0hhbGYgfAotCQkgICAgICAgICAgICAgICAgICAgU1VQUE9SVEVEXzEwMGJhc2VUX0Z1bGwgfAot
CQkgICAgICAgICAgICAgICAgICAgU1VQUE9SVEVEX0F1dG9uZWcgfAotCQkgICAgICAgICAgICAg
ICAgICAgU1VQUE9SVEVEX01JSSk7CisJZWNtZC0+c3VwcG9ydGVkID0gKFNVUFBPUlRFRF8xMGJh
c2VUX0hhbGYgfAorCSAgICAgICAgICAgICAgICAgICBTVVBQT1JURURfMTBiYXNlVF9GdWxsIHwK
KwkgICAgICAgICAgICAgICAgICAgU1VQUE9SVEVEXzEwMGJhc2VUX0hhbGYgfAorCSAgICAgICAg
ICAgICAgICAgICBTVVBQT1JURURfMTAwYmFzZVRfRnVsbCB8CisJICAgICAgICAgICAgICAgICAg
IFNVUFBPUlRFRF9BdXRvbmVnIHwKKwkgICAgICAgICAgICAgICAgICAgU1VQUE9SVEVEX01JSSk7
CiAJCQotCQllY21kLT5hZHZlcnRpc2luZyA9IChBRFZFUlRJU0VEXzEwYmFzZVRfSGFsZiB8Ci0J
CSAgICAgICAgICAgICAgICAgICBBRFZFUlRJU0VEXzEwYmFzZVRfRnVsbCB8Ci0JCSAgICAgICAg
ICAgICAgICAgICBBRFZFUlRJU0VEXzEwMGJhc2VUX0hhbGYgfAotCQkgICAgICAgICAgICAgICAg
ICAgQURWRVJUSVNFRF8xMDBiYXNlVF9GdWxsIHwKLQkJICAgICAgICAgICAgICAgICAgIEFEVkVS
VElTRURfQXV0b25lZyB8Ci0JCSAgICAgICAgICAgICAgICAgICBBRFZFUlRJU0VEX01JSSk7CisJ
ZWNtZC0+YWR2ZXJ0aXNpbmcgPSAoQURWRVJUSVNFRF8xMGJhc2VUX0hhbGYgfAorCSAgICAgICAg
ICAgICAgICAgICBBRFZFUlRJU0VEXzEwYmFzZVRfRnVsbCB8CisJICAgICAgICAgICAgICAgICAg
IEFEVkVSVElTRURfMTAwYmFzZVRfSGFsZiB8CisJICAgICAgICAgICAgICAgICAgIEFEVkVSVElT
RURfMTAwYmFzZVRfRnVsbCB8CisJICAgICAgICAgICAgICAgICAgIEFEVkVSVElTRURfQXV0b25l
ZyB8CisJICAgICAgICAgICAgICAgICAgIEFEVkVSVElTRURfTUlJKTsKIAogCi0JCWVjbWQtPnBv
cnQgPSBQT1JUX01JSTsKLQkJZWNtZC0+cGh5X2FkZHJlc3MgPSBkYi0+cGh5X2FkZHI7CisJZWNt
ZC0+cG9ydCA9IFBPUlRfTUlJOworCWVjbWQtPnBoeV9hZGRyZXNzID0gZGItPnBoeV9hZGRyOwog
Ci0JCWVjbWQtPnRyYW5zY2VpdmVyID0gWENWUl9FWFRFUk5BTDsKKwllY21kLT50cmFuc2NlaXZl
ciA9IFhDVlJfRVhURVJOQUw7CiAJCQotCi0JfQotCi0JCiAJZWNtZC0+c3BlZWQgPSAxMDsKIAll
Y21kLT5kdXBsZXggPSBEVVBMRVhfSEFMRjsKIAkKQEAgLTk2NSw4ICs5NDYsNiBAQCBVTGlfZXRo
dG9vbF9nc2V0KHN0cnVjdCB1bGk1MjZ4X2JvYXJkX2luCiAJewkKIAkJZWNtZC0+YXV0b25lZyA9
IEFVVE9ORUdfRU5BQkxFOwogCX0KLQkKLQkKIH0KIAogc3RhdGljIHZvaWQgbmV0ZGV2X2dldF9k
cnZpbmZvKHN0cnVjdCBuZXRfZGV2aWNlICpkZXYsCkBAIC0xMDIyLDcgKzEwMDEsNyBAQCBzdGF0
aWMgdm9pZCB1bGk1MjZ4X3RpbWVyKHVuc2lnbmVkIGxvbmcgCiB7CiAJdTMyIHRtcF9jcjg7CiAJ
dW5zaWduZWQgY2hhciB0bXBfY3IxMj0wOwotCXN0cnVjdCBERVZJQ0UgKmRldiA9IChzdHJ1Y3Qg
REVWSUNFICopIGRhdGE7CisJc3RydWN0IG5ldF9kZXZpY2UgKmRldiA9IChzdHJ1Y3QgbmV0X2Rl
dmljZSAqKSBkYXRhOwogCXN0cnVjdCB1bGk1MjZ4X2JvYXJkX2luZm8gKmRiID0gbmV0ZGV2X3By
aXYoZGV2KTsKICAJdW5zaWduZWQgbG9uZyBmbGFnczsKIAl1OCBUbXBTcGVlZD0xMDsKQEAgLTEx
MzUsMTAgKzExMTQsMTAgQEAgc3RhdGljIHZvaWQgdWxpNTI2eF90aW1lcih1bnNpZ25lZCBsb25n
IAogICoJU3RvcCBVTEk1MjZYIGJvYXJkCiAgKglGcmVlIFR4L1J4IGFsbG9jYXRlZCBtZW1vcnkK
ICAqCVJlc2V0IFVMSTUyNlggYm9hcmQKLSAqCVJlLWluaXRpbGl6ZSBVTEk1MjZYIGJvYXJkCisg
KglSZS1pbml0aWFsaXplIFVMSTUyNlggYm9hcmQKICAqLwogCi1zdGF0aWMgdm9pZCB1bGk1MjZ4
X2R5bmFtaWNfcmVzZXQoc3RydWN0IERFVklDRSAqZGV2KQorc3RhdGljIHZvaWQgdWxpNTI2eF9k
eW5hbWljX3Jlc2V0KHN0cnVjdCBuZXRfZGV2aWNlICpkZXYpCiB7CiAJc3RydWN0IHVsaTUyNnhf
Ym9hcmRfaW5mbyAqZGIgPSBuZXRkZXZfcHJpdihkZXYpOwogCkBAIC0xMTYzLDcgKzExNDIsNyBA
QCBzdGF0aWMgdm9pZCB1bGk1MjZ4X2R5bmFtaWNfcmVzZXQoc3RydWN0CiAJZGItPmluaXQ9MTsK
IAlkYi0+d2FpdF9yZXNldCA9IDA7CiAKLQkvKiBSZS1pbml0aWxpemUgVUxJNTI2WCBib2FyZCAq
LworCS8qIFJlLWluaXRpYWxpemUgVUxJNTI2WCBib2FyZCAqLwogCXVsaTUyNnhfaW5pdChkZXYp
OwogCiAJLyogUmVzdGFydCB1cHBlciBsYXllciBpbnRlcmZhY2UgKi8KQEAgLTEyNzMsNyArMTI1
Miw3IEBAIHN0YXRpYyB2b2lkIHVsaTUyNnhfZGVzY3JpcHRvcl9pbml0KHN0cnUKIAogLyoKICAq
CVVwZGF0ZSBDUjYgdmFsdWUKLSAqCUZpcnN0bHkgc3RvcCBVTEk1MjZYICwgdGhlbiB3cml0dGVu
IHZhbHVlIGFuZCBzdGFydAorICoJRmlyc3RseSBzdG9wIFVMSTUyNlgsIHRoZW4gd3JpdHRlbiB2
YWx1ZSBhbmQgc3RhcnQKICAqLwogCiBzdGF0aWMgdm9pZCB1cGRhdGVfY3I2KHUzMiBjcjZfZGF0
YSwgdW5zaWduZWQgbG9uZyBpb2FkZHIpCkBAIC0xMjg2LDEwICsxMjY1LDEwIEBAIHN0YXRpYyB2
b2lkIHVwZGF0ZV9jcjYodTMyIGNyNl9kYXRhLCB1bnMKIAogLyoKICAqCVNlbmQgYSBzZXR1cCBm
cmFtZSBmb3IgTTUyNjEvTTUyNjMKLSAqCVRoaXMgc2V0dXAgZnJhbWUgaW5pdGlsaXplIFVMSTUy
NlggYWRkcmVzcyBmaWx0ZXIgbW9kZQorICoJVGhpcyBzZXR1cCBmcmFtZSBpbml0aWFsaXplIFVM
STUyNlggYWRkcmVzcyBmaWx0ZXIgbW9kZQogICovCiAKLXN0YXRpYyB2b2lkIHNlbmRfZmlsdGVy
X2ZyYW1lKHN0cnVjdCBERVZJQ0UgKmRldiwgaW50IG1jX2NudCkKK3N0YXRpYyB2b2lkIHNlbmRf
ZmlsdGVyX2ZyYW1lKHN0cnVjdCBuZXRfZGV2aWNlICpkZXYsIGludCBtY19jbnQpCiB7CiAJc3Ry
dWN0IHVsaTUyNnhfYm9hcmRfaW5mbyAqZGIgPSBuZXRkZXZfcHJpdihkZXYpOwogCXN0cnVjdCBk
ZXZfbWNfbGlzdCAqbWNwdHI7CkBAIC0xNzE4LDcgKzE2OTcsNyBAQCBNT0RVTEVfUEFSTV9ERVND
KG1vZGUsICJVTGkgTTUyNjEvTTUyNjM6CiAKIC8qCURlc2NyaXB0aW9uOgogICoJd2hlbiB1c2Vy
IHVzZWQgaW5zbW9kIHRvIGFkZCBtb2R1bGUsIHN5c3RlbSBpbnZva2VkIGluaXRfbW9kdWxlKCkK
LSAqCXRvIGluaXRpbGl6ZSBhbmQgcmVnaXN0ZXIuCisgKgl0byByZWdpc3RlciB0aGUgc2Vydmlj
ZXMuCiAgKi8KIAogc3RhdGljIGludCBfX2luaXQgdWxpNTI2eF9pbml0X21vZHVsZSh2b2lkKQo=

--0__=C7BBFACCDFA5DCEA8f9e8a93df938690918cC7BBFACCDFA5DCEA--

