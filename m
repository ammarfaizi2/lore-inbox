Return-Path: <linux-kernel-owner+willy=40w.ods.org@vger.kernel.org>
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id <S317639AbSHOX3J>; Thu, 15 Aug 2002 19:29:09 -0400
Received: (majordomo@vger.kernel.org) by vger.kernel.org
	id <S317642AbSHOX3I>; Thu, 15 Aug 2002 19:29:08 -0400
Received: from holomorphy.com ([66.224.33.161]:36284 "EHLO holomorphy")
	by vger.kernel.org with ESMTP id <S317639AbSHOX25>;
	Thu, 15 Aug 2002 19:28:57 -0400
Date: Thu, 15 Aug 2002 16:31:14 -0700
From: William Lee Irwin III <wli@holomorphy.com>
To: linux-kernel@vger.kernel.org
Subject: Re: 2.5.31 kmap_atomic copy_*_user benefits
Message-ID: <20020815233114.GV15685@holomorphy.com>
Mail-Followup-To: William Lee Irwin III <wli@holomorphy.com>,
	linux-kernel@vger.kernel.org
References: <20020815232126.GR15685@holomorphy.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Description: vmstat log
Content-Disposition: inline
In-Reply-To: <20020815232126.GR15685@holomorphy.com>
User-Agent: Mutt/1.3.25i
Organization: The Domain of Holomorphy
Sender: linux-kernel-owner@vger.kernel.org
X-Mailing-List: linux-kernel@vger.kernel.org

On Thu, Aug 15, 2002 at 04:21:26PM -0700, William Lee Irwin III wrote:
> In the follow-ups I'll include oprofile numbers for each and vmstat logs.

vmstat log from after:

Script started on Thu Aug 15 18:59:14 2002
$ vmstat 10
   procs                      memory    swap          io     system         cpu
 r  b  w   swpd   free   buff  cache  si  so    bi    bo   in    cs  us  sy  id
 0  0  0      0 16002532      0  42580   0   0    14     1   65     6   0   1  99
 0  0  0      0 16002524      0  42588   0   0     1     0 1006    12   0   0 100
 1  1  0      0 15930364      0  43740   0   0   116    17 1055    66   0   2  98
43 469  0      0 15685644      0 234880   0   0   100     3 1053  1276   0  15  85
23 489  0      0 14662044      0 1231044   0   0    87     0 1066  4888   1  73  26
20 492  1      0 13579932      0 2285476   0   0    55   175 1071  5795   1  81  18
26 486  1      0 12964732      0 2885648   0   0    26   586 1179  3185   1  46  53
26 486  1      0 11873320      0 3950852   0   0    90   537 1198  6224   2  86  12
17 495  1      0 10867228      0 4933188   0   0    63   532 1205  6209   3  86  12
21 491  1      0 10177340      0 5603044   0   0    42  1738 1191  4521   2  64  34
21 491  1      0 9294060      0 6464972   0   0    54  2562 1154  6687   3  84  12
21 491  1      0 8515076      0 7224868   0   0    56  2646 1172  7587   4  81  16
23 489  1      0 7827388      0 7895268   0   0    20  2805 1152  7307   4  81  16
28 484  1      0 7144504      0 8562912   0   0    49  2669 1172  7645   4  80  16
 1 511  1      0 6947076      0 8753936   0   0    20  2867 1127  3413   2  31  67
 1 511  1      0 6941276      0 8759728   0   0     0  2764 1103     8   0   2  98
 0 512  1      0 6935196      0 8765788   0   0     0  2722 1102     9   0   2  98
 1 511  1      0 6932872      0 8768024   0   0     0  2796 1102     9   0   2  98
 1 511  1      0 6925744      0 8774612   0   0     0  2820 1107    10   0   2  98
 0 512  1      0 6919924      0 8780860   0   0     0  2736 1103    10   0   2  98
 0 512  1      0 6911104      0 8789408   0   0     0  2794 1106    11   0   2  98
   procs                      memory    swap          io     system         cpu
 r  b  w   swpd   free   buff  cache  si  so    bi    bo   in    cs  us  sy  id
 1 511  1      0 6882308      0 8817992   0   0    81  2778 1114    19   0   4  96
 0 512  1      0 6852444      0 8846940   0   0     1  2782 1111    33   1   4  95
 0 512  1      0 6822936      0 8875476   0   0     1  2854 1112    27   1   5  95
 0 512  1      0 6794624      0 8903744   0   0     1  2711 1111    23   0   4  96
 1 511  1      0 6766444      0 8931032   0   0     1  2807 1112    19   0   4  96
 2 510  1      0 6737392      0 8959148   0   0     2  2815 1131   211   1   7  92
 0 512  1      0 6710268      0 8986204   0   0     1  2739 1114    16   0   3  97
 2 510  1      0 6681840      0 9013796   0   0     1  2831 1113    17   0   3  96
 0 512  1      0 6651576      0 9043280   0   0     1  2774 1113    37   0   4  95
 0 512  1      0 6624220      0 9070548   0   0     2  2698 1114    31   1   5  95
 1 511  1      0 6595480      0 9097904   0   0     0  2755 1110    12   0   3  97
 0 512  1      0 6568812      0 9124480   0   0     2  2651 1108    10   0   3  97
 2 510  1      0 6543284      0 9149532   0   0     1  2669 1110    26   0   3  97
 4 508  1      0 6517608      0 9174580   0   0     2  2758 1119    24   0   4  96
 0 512  1      0 6482120      0 9208992   0   0    35  2822 1113    25   1   4  95
 1 511  1      0 6455904      0 9234968   0   0     2  2778 1114    21   0   4  96
 0 512  1      0 6427148      0 9262844   0   0     2  2766 1113    73   0   4  95
 0 512  1      0 6398152      0 9291056   0   0     3  2812 1113    25   0   4  96
 0 512  1      0 6369636      0 9318848   0   0     2  2684 1110    30   0   4  96
 4 508  1      0 6340556      0 9346788   0   0     2  2798 1113    78   0   4  95
 0 512  1      0 6314476      0 9372824   0   0     3  2639 1112    60   1   5  94
   procs                      memory    swap          io     system         cpu
 r  b  w   swpd   free   buff  cache  si  so    bi    bo   in    cs  us  sy  id
 2 510  1      0 6292692      0 9394500   0   0     2  2614 1114    25   0   4  96
 1 511  1      0 6256836      0 9428792   0   0    33  2877 1112    27   0   4  96
 5 507  1      0 6230128      0 9455580   0   0     3  2665 1122    78   1   5  95
 0 512  1      0 6202904      0 9482552   0   0     1  2707 1111    11   0   3  97
 1 511  1      0 6174600      0 9509992   0   0     2  2781 1111    15   0   3  96
 1 511  1      0 6144816      0 9538540   0   0    34  2706 1113    19   0   4  96
 0 512  1      0 6122140      0 9562136   0   0     0  2573 1109    10   0   2  97
 0 512  1      0 6089840      0 9592612   0   0     2  2753 1121   404   1  10  89
 1 511  1      0 6065520      0 9616676   0   0     2  2641 1116    34   1   5  95
 0 512  1      0 6036664      0 9644620   0   0     2  2764 1120   105   1   6  93
 1 511  1      0 6009552      0 9671124   0   0     1  2674 1107    16   0   3  96
 0 512  1      0 5981040      0 9698748   0   0     1  2725 1114    38   1   6  94
 0 512  1      0 5950392      0 9729124   0   0     2  2671 1113    34   1   5  95
 1 511  1      0 5929216      0 9749660   0   0     1  2711 1117    31   1   5  94
 3 509  1      0 5898468      0 9779472   0   0    36  2843 1127   341   2  10  89
 0 512  1      0 5867756      0 9809476   0   0     1  2693 1111    20   0   4  95
 1 511  1      0 5841120      0 9835296   0   0     1  2712 1120    89   1   6  93
 0 512  1      0 5813404      0 9862876   0   0     2  2648 1112    28   0   4  95
 0 512  1      0 5785760      0 9889380   0   0     1  2761 1111    16   0   4  96
 1 511  1      0 5759816      0 9915052   0   0     2  2577 1119    68   1   5  94
 2 510  1      0 5733596      0 9940948   0   0     1  2604 1117    87   1   7  92
   procs                      memory    swap          io     system         cpu
 r  b  w   swpd   free   buff  cache  si  so    bi    bo   in    cs  us  sy  id
 0 512  1      0 5703988      0 9969072   0   0     2  2811 1119    50   1   5  94
 1 511  1      0 5677608      0 9995452   0   0     0  2611 1113    38   0   4  95
 0 512  1      0 5648928      0 10023256   0   0     1  2700 1110    14   0   3  96
 0 512  1      0 5622476      0 10049120   0   0     2  2647 1114   105   1   6  93
 0 512  1      0 5595304      0 10075880   0   0     2  2640 1114    97   1   5  94
11 501  1      0 5566652      0 10104140   0   0    29  2677 1131   157   1   8  91
 0 512  1      0 5539044      0 10130500   0   0    44  2735 1115    64   1   6  93

 1 511  1      0 5509824      0 10159292   0   0     1  2794 1112    18   1   4  95
 1 511  1      0 5479264      0 10188748   0   0     4  2924 1115    92   1   6  93
 0 512  1      0 5451112      0 10216728   0   0     1  2833 1109    20   0   4  96
 3 509  1      0 5422476      0 10244456   0   0     4  2769 1116   104   1   7  92
 0 512  1      0 5395264      0 10271476   0   0     3  2740 1115    88   1   6  93
 0 512  1      0 5365012      0 10300472   0   0     3  2918 1114    64   1   6  93
 0 512  1      0 5335636      0 10329120   0   0     3  2842 1113    68   1   6  93
 0 512  1      0 5307068      0 10357588   0   0     1  2784 1112    80   1   6  93
 1 511  1      0 5277820      0 10385904   0   0     2  2860 1118   391   1   9  89
 1 511  1      0 5250884      0 10412244   0   0     2  2848 1111    34   1   5  94
 1 510  1      0 5232856      0 10428864   0   0     3  2885 1158   416   2  12  86
 0 511  1      0 5204232      0 10456380   0   0     2  2983 1132    93   1   5  95
 1 510  1      0 5175584      0 10484564   0   0     1  2873 1113    54   0   4  96
 0 511  1      0 5146928      0 10513124   0   0     1  2802 1116   196   1   6  93
   procs                      memory    swap          io     system         cpu
 r  b  w   swpd   free   buff  cache  si  so    bi    bo   in    cs  us  sy  id
 0 511  1      0 5119044      0 10540228   0   0     1  2939 1128   165   1   5  94
 2 509  1      0 5090140      0 10568236   0   0     0  2900 1144   225   1   6  93
 1 510  1      0 5060380      0 10597712   0   0     1  2854 1123   183   1   5  95
 0 511  1      0 5034576      0 10623048   0   0     4  2884 1131   233   1   6  93
 0 511  1      0 5005072      0 10652112   0   0     0  2882 1119   226   1   5  94
 1 510  1      0 4976928      0 10679624   0   0     2  2909 1124   440   1   9  90
 3 508  1      0 4944776      0 10710280   0   0     2  3004 1128   478   1   9  90
 1 511  1      0 4919448      0 10735704   0   0     2  2809 1124   969   1  13  86
 1 510  1      0 4887604      0 10766520   0   0     2  3048 1131   285   1   7  92
 2 509  1      0 4859396      0 10793948   0   0     2  2884 1124   280   1   6  93
12 499  1      0 4829296      0 10823572   0   0     0  2933 1131   287   1   6  93
 0 511  1      0 4797996      0 10854836   0   0     2  2755 1122   356   1   6  93
 3 508  1      0 4776392      0 10875784   0   0     5  2811 1129   769   1  11  87
 0 511  1      0 4743864      0 10907520   0   0     0  2953 1133  1265   2  16  82
 0 510  1      0 4721440      0 10929336   0   0     2  2931 1127   502   1  13  85
 1 509  1      0 4694216      0 10955792   0   0     2  2870 1118   276   1   7  92
 0 510  1      0 4666732      0 10982952   0   0     1  2876 1119   328   1   7  92
 1 509  1      0 4638948      0 11009820   0   0     2  2957 1117   286   1   6  94
 0 510  1      0 4610756      0 11037696   0   0     2  2852 1119   307   1   7  92
 2 508  1      0 4583104      0 11064692   0   0     0  2906 1118   339   1   7  93
11 499  1      0 4560252      0 11087580   0   0     1  2845 1162   843   1  10  88
   procs                      memory    swap          io     system         cpu
 r  b  w   swpd   free   buff  cache  si  so    bi    bo   in    cs  us  sy  id
 6 504  1      0 4521020      0 11125024   0   0   165  2869 1165  1538   2  14  84
 8 500  1      0 4531608      0 11114800   0   0   597  2870 1219  2330   2  21  77
 0 508  1      0 4487936      0 11157312   0   0   365  2976 1169  1824   2  18  80
 0 506  1      0 4496284      0 11149280   0   0     3  2810 1146  2037   3  20  77
 3 503  1      0 4468680      0 11176552   0   0     0  2907 1130   652   1   6  93
 0 506  1      0 4438204      0 11206216   0   0     2  2952 1133  1979   2  14  84
 0 506  1      0 4409364      0 11234576   0   0     0  2903 1122   370   1   8  91
29 474  1      0 4441240      0 11202836   0   0     3  3190 1291  2299   3  37  60
28 471  1      0 4477508      0 11167108   0   0     2  2930 1195 10508   7  79  14
19 477  1      0 4503452      0 11141696   0   0     4  2867 1209  9993   7  75  18
23 471  2      0 4483828      0 11161828   0   0     3  2976 1253  8403   6  76  17
18 475  1      0 4465124      0 11183244   0   0     4  2478 1193  9252   7  72  22
26 465  2      0 4460604      0 11187652   0   0     2  1678 1240  8358   7  73  20
16 473  1      0 4481356      0 11163940   0   0     1  1336 1238  9286   7  72  22
32 456  1      0 4472860      0 11171464   0   0     2  2210 1252  9309   7  71  22
22 466  1      0 4615392      0 11031960   0   0     0  1413 1212 10223   7  67  26
21 462  6      0 4774272      0 10871584   0   0     0  1874 1322  8649   6  76  18
17 461  5      0 4874708      0 10771480   0   0     0  1738 1202  9156   6  71  23
35 438  2      0 5011440      0 10638120   0   0     0  1246 1232  8524   7  74  20
18 446  4      0 5079604      0 10568312   0   0     0  2760 1213  8706   7  74  20
29 428  3      0 5274500      0 10374876   0   0     0  1940 1234  8993   6  74  20
   procs                      memory    swap          io     system         cpu
 r  b  w   swpd   free   buff  cache  si  so    bi    bo   in    cs  us  sy  id
15 434  4      0 5490296      0 10161236   0   0     0  2080 1225  8980   6  73  21
11 439  1      0 5616836      0 10035308   0   0     0  2126 1196 10325   7  67  26
18 423  4      0 5881364      0 9769676   0   0     0   932 1221  8675   6  75  19
12 415  4      0 6120552      0 9534052   0   0     0  1750 1218  9150   6  73  20
14 400  7      0 6486700      0 9169252   0   0     0  2546 1202  8861   6  73  21
23 375  3      0 6892552      0 8767868   0   0     0  1910 1210  8789   6  75  19
13 367  7      0 7189680      0 8473360   0   0     0  1978 1195  8727   6  74  20
19 345  9      0 7579952      0 8082436   0   0     0  2484 1180  8758   6  75  19
22 329  3      0 7990672      0 7673816   0   0     0  2966 1201  9331   6  72  22
15 321  2      0 8531100      0 7135212   0   0     0  2958 1172  9089   6  73  21
27 277  6      0 9068984      0 6602336   0   0     0  3030 1197  8460   5  75  19
28 246  2      0 9624396      0 6051168   0   0     0  2983 1170  8323   6  76  18
27 226  4      0 10193168      0 5485828   0   0     0  2852 1159  8433   6  74  20
44 177  5      0 10833884      0 4849916   0   0     0  2955 1174  7071   5  80  15
23 164  5      0 11593864      0 4095216   0   0     0  2956 1166  7079   5  80  15
19 123  7      0 12347016      0 3348140   0   0     0  3083 1168  5243   5  82  13
45 66  2      0 13234756      0 2465732   0   0     0  2824 1142  4539   4  82  14
21  4  1      0 15005744      0 707192   0   0     0  2997 1119   476   1  58  41
 0  0  1      0 15411664      0 377924   0   0     0  1531 1131    52   0  14  86

Script done on Thu Aug 15 19:24:01 2002
