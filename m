Return-Path: <linux-kernel-owner@vger.kernel.org>
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id <S282795AbRK0EfH>; Mon, 26 Nov 2001 23:35:07 -0500
Received: (majordomo@vger.kernel.org) by vger.kernel.org
	id <S282794AbRK0Ee6>; Mon, 26 Nov 2001 23:34:58 -0500
Received: from ikura.fe.dis.titech.ac.jp ([131.112.171.65]:50158 "HELO
	ikura.fe.dis.titech.ac.jp") by vger.kernel.org with SMTP
	id <S282792AbRK0Eey>; Mon, 26 Nov 2001 23:34:54 -0500
Date: Tue, 27 Nov 2001 13:34:50 +0900
Message-ID: <w537kscq1at.wl@megaela.fe.dis.titech.ac.jp>
From: GOTO Masanori <gotom@debian.or.jp>
To: ltd@cisco.com
Cc: alan@lxorguk.ukuu.org.uk, ngrennan@okcforum.org,
        linux-kernel@vger.kernel.org
Subject: Re: Unresponiveness of 2.4.16
In-Reply-To: In your message of "Mon, 26 Nov 2001 14:44:19 -0800"
	<4.3.2.7.2.20011126143930.045eec28@171.69.24.15>
In-Reply-To: <1006812135.1420.0.camel@cygnusx-1.okcforum.org>
	<E168U3m-00077F-00@the-village.bc.nu>
	<4.3.2.7.2.20011126143930.045eec28@171.69.24.15>
User-Agent: Wanderlust/2.2.15 (More Than Words) EMIKO/1.13.9 (Euglena tripteris) FLIM/1.13.2 (Kasanui) APEL/10.2 MULE XEmacs/21.1 (patch 10) (Capitol Reef) (i386-debian-linux)
MIME-Version: 1.0 (generated by EMIKO 1.13.9 - "Euglena tripteris")
Content-Type: text/plain; charset=US-ASCII
Sender: linux-kernel-owner@vger.kernel.org
X-Mailing-List: linux-kernel@vger.kernel.org

At Mon, 26 Nov 2001 14:44:19 -0800,
Lincoln Dale <ltd@cisco.com> wrote:
> At 10:17 PM 26/11/2001 +0000, Alan Cox wrote:
> > > 2.4.16 becomes very unresponsive for 30 seconds or so at a time during
> > > large unarchiving of tarballs, like tar -zxf mozilla-src.tar.gz. The
> > > file is about 36mb. I run top in one window, run free repeatedly in
> >
> >This seems to be one of the small as yet unresolved problems with the newer
> >VM code in 2.4.16. I've not managed to prove its the VM or the differing
> >I/O scheduling rules however.
> 
> it is I/O scheduling.
> 
> i have a system with a large amount of RAM.
> it has both 15K RPM SCSI disks (off a symbios controller) and some bog-slow 
> IDE/ATA disks which the system decides to use PIO for rather than DMA.  (i 
> don't use them for anything other than bootup so don't really care about it 
> deciding to use PIO..).
> 
> a copy to/from the 15K RPM SCSI disks doesn't show any performance problems.
> a copy to/from the PIO-based IDE disks has the same effect -- 20/30 seconds 
> of no interactiveness -- even a "vmstat 1" *stops* for 20-30 seconds while 
> 200+MB of buffer-cache data gets written out to disk.

I guess this problem repeatly posted...
Is it related with IDE chip or chipset code?
I use Athlon on KT133A plus 2 IDE disks, and I'm also experiencing
such problem with only 1 disk. But I don't know it's PIO-based or not.

-- gotom



