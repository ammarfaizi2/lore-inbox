Return-Path: <linux-kernel-owner@vger.kernel.org>
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id <S276392AbRI2BD3>; Fri, 28 Sep 2001 21:03:29 -0400
Received: (majordomo@vger.kernel.org) by vger.kernel.org
	id <S276393AbRI2BDU>; Fri, 28 Sep 2001 21:03:20 -0400
Received: from [211.100.88.201] ([211.100.88.201]:1287 "HELO linux.tcpip.cxm")
	by vger.kernel.org with SMTP id <S276392AbRI2BDO>;
	Fri, 28 Sep 2001 21:03:14 -0400
Date: Sat, 29 Sep 2001 09:04:07 +0800
From: hugang <linuxbest@soul.com.cn>
To: linux-kernel@vger.kernel.org
Subject: [Patch]Patch for nfsroot and auto dhcp.
Message-Id: <20010929090407.23242ff9.linuxbest@soul.com.cn>
Organization: soul
X-Mailer: Sylpheed version 0.6.2 (GTK+ 1.2.10; i686-pc-linux-gnu)
Mime-Version: 1.0
Content-Type: multipart/mixed;
 boundary="Multipart_Sat__29_Sep_2001_09:04:07_+0800_08450bc8"
Sender: linux-kernel-owner@vger.kernel.org
X-Mailing-List: linux-kernel@vger.kernel.org

This is a multi-part message in MIME format.

--Multipart_Sat__29_Sep_2001_09:04:07_+0800_08450bc8
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit

Hello all

	This patch is for 2.4.10 .
	


--Multipart_Sat__29_Sep_2001_09:04:07_+0800_08450bc8
Content-Type: application/octet-stream;
 name="nfsroot.patch"
Content-Disposition: attachment;
 filename="nfsroot.patch"
Content-Transfer-Encoding: base64

ZGlmZiAtdXJOIGxpbnV4L2ZzL0NvbmZpZy5pbiBsaW51eC1rZXJuZWwvZnMvQ29uZmlnLmluCi0t
LSBsaW51eC9mcy9Db25maWcuaW4JVHVlIEp1bCAgMyAwNTowMzowNCAyMDAxCisrKyBsaW51eC1r
ZXJuZWwvZnMvQ29uZmlnLmluCUZyaSBTZXAgMjggMTE6MTE6NDAgMjAwMQpAQCAtODAsNyArODAs
OSBAQAogICAgZGVwX3RyaXN0YXRlICdDb2RhIGZpbGUgc3lzdGVtIHN1cHBvcnQgKGFkdmFuY2Vk
IG5ldHdvcmsgZnMpJyBDT05GSUdfQ09EQV9GUyAkQ09ORklHX0lORVQKICAgIGRlcF90cmlzdGF0
ZSAnTkZTIGZpbGUgc3lzdGVtIHN1cHBvcnQnIENPTkZJR19ORlNfRlMgJENPTkZJR19JTkVUCiAg
ICBkZXBfbWJvb2wgJyAgUHJvdmlkZSBORlN2MyBjbGllbnQgc3VwcG9ydCcgQ09ORklHX05GU19W
MyAkQ09ORklHX05GU19GUwotICAgZGVwX2Jvb2wgJyAgUm9vdCBmaWxlIHN5c3RlbSBvbiBORlMn
IENPTkZJR19ST09UX05GUyAkQ09ORklHX05GU19GUyAkQ09ORklHX0lQX1BOUAoraWYgWyAiJENP
TkZJR19JUF9QTlAiICE9ICJuIiBdOyB0aGVuCisgICBkZXBfYm9vbCAnICBSb290IGZpbGUgc3lz
dGVtIG9uIE5GUycgQ09ORklHX1JPT1RfTkZTICRDT05GSUdfTkZTX0ZTCitmaQogCiAgICBkZXBf
dHJpc3RhdGUgJ05GUyBzZXJ2ZXIgc3VwcG9ydCcgQ09ORklHX05GU0QgJENPTkZJR19JTkVUCiAg
ICBkZXBfbWJvb2wgJyAgUHJvdmlkZSBORlN2MyBzZXJ2ZXIgc3VwcG9ydCcgQ09ORklHX05GU0Rf
VjMgJENPTkZJR19ORlNECmRpZmYgLXVyTiBsaW51eC9mcy9uZnMvTWFrZWZpbGUgbGludXgta2Vy
bmVsL2ZzL25mcy9NYWtlZmlsZQotLS0gbGludXgvZnMvbmZzL01ha2VmaWxlCVNhdCBEZWMgMzAg
MDY6MDc6MjMgMjAwMAorKysgbGludXgta2VybmVsL2ZzL25mcy9NYWtlZmlsZQlGcmkgU2VwIDI4
IDExOjExOjQwIDIwMDEKQEAgLTEyLDYgKzEyLDggQEAKIG9iai15ICAgIDo9IGlub2RlLm8gZmls
ZS5vIHJlYWQubyB3cml0ZS5vIGRpci5vIHN5bWxpbmsubyBwcm9jLm8gXAogCSAgICBuZnMyeGRy
Lm8gZmx1c2hkLm8gdW5saW5rLm8KIAorZXhwb3J0LW9ianMgOj0gbmZzcm9vdC5vCisKIG9iai0k
KENPTkZJR19ST09UX05GUykgKz0gbmZzcm9vdC5vIG1vdW50X2NsbnQubyAgICAgIAogb2JqLSQo
Q09ORklHX05GU19WMykgKz0gbmZzM3Byb2MubyBuZnMzeGRyLm8KIApkaWZmIC11ck4gbGludXgv
ZnMvbmZzL25mc3Jvb3QuYyBsaW51eC1rZXJuZWwvZnMvbmZzL25mc3Jvb3QuYwotLS0gbGludXgv
ZnMvbmZzL25mc3Jvb3QuYwlGcmkgQXVnIDE3IDAwOjU1OjUyIDIwMDEKKysrIGxpbnV4LWtlcm5l
bC9mcy9uZnMvbmZzcm9vdC5jCUZyaSBTZXAgMjggMTE6MTE6NDAgMjAwMQpAQCAtODIsNiArODIs
NyBAQAogI2luY2x1ZGUgPGxpbnV4L21ham9yLmg+CiAjaW5jbHVkZSA8bGludXgvdXRzbmFtZS5o
PgogI2luY2x1ZGUgPG5ldC9pcGNvbmZpZy5oPgorI2luY2x1ZGUgPGxpbnV4L21vZHVsZS5oPgog
CiAvKiBEZWZpbmUgdGhpcyB0byBhbGxvdyBkZWJ1Z2dpbmcgb3V0cHV0ICovCiAjdW5kZWYgTkZT
Uk9PVF9ERUJVRwpAQCAtMTA0LDYgKzEwNSwxOCBAQAogc3RhdGljIGludCBuZnNfcG9ydCBfX2lu
aXRkYXRhID0gMDsJCS8qIFBvcnQgdG8gY29ubmVjdCB0byBmb3IgTkZTICovCiBzdGF0aWMgaW50
IG1vdW50X3BvcnQgX19pbml0ZGF0YSA9IDA7CQkvKiBNb3VudCBkYWVtb24gcG9ydCBudW1iZXIg
Ki8KIAorc3RhdGljIHUzMiByb290X3NlcnZlcl9hZGRyIF9faW5pdGRhdGEgPSBJTkFERFJfTk9O
RSA7CitzdGF0aWMgdTggIHJvb3Rfc2VydmVyX3BhdGhbMjU2XSBfX2luaXRkYXRhID0geyAwICwg
fTsKKworCitpbnQgX19pbml0ZGF0YSByb290X3NlcnZlcl9zZXQodTMyIHNlcnZlcl9hZGRyLCB1
OCBzZXJ2ZXJfcGF0aFtdKXsKKwlpbnQgaSA7CisJcm9vdF9zZXJ2ZXJfYWRkciA9ICBzZXJ2ZXJf
YWRkciA7CisJZm9yIChpID0gMCA7IGkgPCAyNTUgOyBpKysgKQorCQlyb290X3NlcnZlcl9wYXRo
W2ldID0gc2VydmVyX3BhdGhbaV07Cit9CisKK0VYUE9SVF9TWU1CT0wocm9vdF9zZXJ2ZXJfc2V0
KTsKIAogLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKgogCmRpZmYgLXVyTiBsaW51eC9pbmNsdWRlL25ldC9p
cGNvbmZpZy5oIGxpbnV4LWtlcm5lbC9pbmNsdWRlL25ldC9pcGNvbmZpZy5oCi0tLSBsaW51eC9p
bmNsdWRlL25ldC9pcGNvbmZpZy5oCVdlZCBNYXkgIDIgMTE6NTk6MjQgMjAwMQorKysgbGludXgt
a2VybmVsL2luY2x1ZGUvbmV0L2lwY29uZmlnLmgJRnJpIFNlcCAyOCAxMToxMjoyOSAyMDAxCkBA
IC02LDYgKzYsOSBAQAogICogIEF1dG9tYXRpYyBJUCBMYXllciBDb25maWd1cmF0aW9uCiAgKi8K
IAorI2lmbmRlZiBJUENPTkZJR19ICisjZGVmaW5lIElQQ09ORklHX0gKKwogLyogVGhlIGZvbGxv
d2luZyBhcmUgaW5pdGRhdGE6ICovCiAKIGV4dGVybiBpbnQgaWNfZW5hYmxlOwkJLyogRW5hYmxl
IG9yIGRpc2FibGUgdGhlIHdob2xlIHNoZWJhbmcgKi8KQEAgLTIwLDEwICsyMyw3IEBACiAKIGV4
dGVybiB1MzIgaWNfc2VydmFkZHI7CQkvKiBCb290IHNlcnZlciBJUCBhZGRyZXNzICovCiAKLWV4
dGVybiB1MzIgcm9vdF9zZXJ2ZXJfYWRkcjsJLyogQWRkcmVzcyBvZiBORlMgc2VydmVyICovCi1l
eHRlcm4gdTggcm9vdF9zZXJ2ZXJfcGF0aFtdOwkvKiBQYXRoIHRvIG1vdW50IGFzIHJvb3QgKi8K
LQotCitleHRlcm4gaW50IHJvb3Rfc2VydmVyX3NldCh1MzIgLCB1OCAqKTsKIAogLyogVGhlIGZv
bGxvd2luZyBhcmUgcGVyc2lzdGVudCAobm90IGluaXRkYXRhKTogKi8KIApAQCAtMzYsMyArMzYs
NSBAQAogI2RlZmluZSBJQ19CT09UUAkweDAxCS8qICAgQk9PVFAgKG9yIERIQ1AsIHNlZSBiZWxv
dykgKi8KICNkZWZpbmUgSUNfUkFSUAkJMHgwMgkvKiAgIFJBUlAgKi8KICNkZWZpbmUgSUNfVVNF
X0RIQ1AgICAgMHgxMDAJLyogSWYgb24sIHVzZSBESENQIGluc3RlYWQgb2YgQk9PVFAgKi8KKwor
I2VuZGlmCmRpZmYgLXVyTiBsaW51eC9uZXQvY29yZS9NYWtlZmlsZSBsaW51eC1rZXJuZWwvbmV0
L2NvcmUvTWFrZWZpbGUKLS0tIGxpbnV4L25ldC9jb3JlL01ha2VmaWxlCVNhdCBEZWMgMzAgMDY6
MDc6MjQgMjAwMAorKysgbGludXgta2VybmVsL25ldC9jb3JlL01ha2VmaWxlCUZyaSBTZXAgMjgg
MTE6MTE6NDAgMjAwMQpAQCAtOSw3ICs5LDcgQEAKIAogT19UQVJHRVQgOj0gY29yZS5vCiAKLWV4
cG9ydC1vYmpzIDo9IG5ldGZpbHRlci5vIHByb2ZpbGUubworZXhwb3J0LW9ianMgOj0gbmV0Zmls
dGVyLm8gcHJvZmlsZS5vIGRldi5vCiAKIG9iai15IDo9IHNvY2subyBza2J1ZmYubyBpb3ZlYy5v
IGRhdGFncmFtLm8gc2NtLm8KIApkaWZmIC11ck4gbGludXgvbmV0L2NvcmUvZGV2LmMgbGludXgt
a2VybmVsL25ldC9jb3JlL2Rldi5jCi0tLSBsaW51eC9uZXQvY29yZS9kZXYuYwlUaHUgU2VwIDI3
IDE4OjE3OjE5IDIwMDEKKysrIGxpbnV4LWtlcm5lbC9uZXQvY29yZS9kZXYuYwlGcmkgU2VwIDI4
IDExOjExOjQwIDIwMDEKQEAgLTI4NDYsMyArMjg0Niw2IEBACiAJcmV0dXJuIGNhbGxfdXNlcm1v
ZGVoZWxwZXIoYXJndiBbMF0sIGFyZ3YsIGVudnApOwogfQogI2VuZGlmCisKK0VYUE9SVF9TWU1C
T0woZGV2X2NoYW5nZV9mbGFncyk7CisKZGlmZiAtdXJOIGxpbnV4L25ldC9pcHY0L0NvbmZpZy5p
biBsaW51eC1rZXJuZWwvbmV0L2lwdjQvQ29uZmlnLmluCi0tLSBsaW51eC9uZXQvaXB2NC9Db25m
aWcuaW4JV2VkIE1heSAgMiAxMTo1OToyNCAyMDAxCisrKyBsaW51eC1rZXJuZWwvbmV0L2lwdjQv
Q29uZmlnLmluCUZyaSBTZXAgMjggMTE6MTE6NDAgMjAwMQpAQCAtMTgsMTMgKzE4LDE1IEBACiAg
ICBib29sICcgICAgSVA6IHZlcmJvc2Ugcm91dGUgbW9uaXRvcmluZycgQ09ORklHX0lQX1JPVVRF
X1ZFUkJPU0UKICAgIGJvb2wgJyAgICBJUDogbGFyZ2Ugcm91dGluZyB0YWJsZXMnIENPTkZJR19J
UF9ST1VURV9MQVJHRV9UQUJMRVMKIGZpCi1ib29sICcgIElQOiBrZXJuZWwgbGV2ZWwgYXV0b2Nv
bmZpZ3VyYXRpb24nIENPTkZJR19JUF9QTlAKLWlmIFsgIiRDT05GSUdfSVBfUE5QIiA9ICJ5IiBd
OyB0aGVuCit0cmlzdGF0ZSAnICBJUDoga2VybmVsIGxldmVsIGF1dG9jb25maWd1cmF0aW9uJyBD
T05GSUdfSVBfUE5QCitpZiBbICIkQ09ORklHX0lQX1BOUCIgIT0gIm4iIF07IHRoZW4KICAgIGJv
b2wgJyAgICBJUDogREhDUCBzdXBwb3J0JyBDT05GSUdfSVBfUE5QX0RIQ1AKICAgIGJvb2wgJyAg
ICBJUDogQk9PVFAgc3VwcG9ydCcgQ09ORklHX0lQX1BOUF9CT09UUAogICAgYm9vbCAnICAgIElQ
OiBSQVJQIHN1cHBvcnQnIENPTkZJR19JUF9QTlBfUkFSUAogIyBub3QgeWV0IHJlYWR5Li4KICMg
ICBib29sICcgICAgSVA6IEFSUCBzdXBwb3J0JyBDT05GSUdfSVBfUE5QX0FSUAkJCisgICBkZWZp
bmVfYm9vbCAJQ09ORklHX1JPT1RfTkZTCXkKKyAgIGRlZmluZV9ib29sIAlDT05GSUdfTkZTX0ZT
IAl5CiBmaQogdHJpc3RhdGUgJyAgSVA6IHR1bm5lbGluZycgQ09ORklHX05FVF9JUElQCiB0cmlz
dGF0ZSAnICBJUDogR1JFIHR1bm5lbHMgb3ZlciBJUCcgQ09ORklHX05FVF9JUEdSRQpkaWZmIC11
ck4gbGludXgvbmV0L2lwdjQvaXBjb25maWcuYyBsaW51eC1rZXJuZWwvbmV0L2lwdjQvaXBjb25m
aWcuYwotLS0gbGludXgvbmV0L2lwdjQvaXBjb25maWcuYwlXZWQgTWF5ICAyIDExOjU5OjI0IDIw
MDEKKysrIGxpbnV4LWtlcm5lbC9uZXQvaXB2NC9pcGNvbmZpZy5jCUZyaSBTZXAgMjggMTE6MTE6
NDAgMjAwMQpAQCAtNTQsNiArNTQsOCBAQAogI2luY2x1ZGUgPGFzbS91YWNjZXNzLmg+CiAjaW5j
bHVkZSA8YXNtL2NoZWNrc3VtLmg+CiAKKyNpbmNsdWRlIDxsaW51eC9tb2R1bGUuaD4KKwogLyog
RGVmaW5lIHRoaXMgdG8gYWxsb3cgZGVidWdnaW5nIG91dHB1dCAqLwogI3VuZGVmIElQQ09ORklH
X0RFQlVHCiAKQEAgLTEyMyw5ICsxMjUsNiBAQAogCiB1MzIgaWNfc2VydmFkZHIgX19pbml0ZGF0
YSA9IElOQUREUl9OT05FOwkvKiBCb290IHNlcnZlciBJUCBhZGRyZXNzICovCiAKLXUzMiByb290
X3NlcnZlcl9hZGRyIF9faW5pdGRhdGEgPSBJTkFERFJfTk9ORTsJLyogQWRkcmVzcyBvZiBORlMg
c2VydmVyICovCi11OCByb290X3NlcnZlcl9wYXRoWzI1Nl0gX19pbml0ZGF0YSA9IHsgMCwgfTsJ
LyogUGF0aCB0byBtb3VudCBhcyByb290ICovCi0KIC8qIFBlcnNpc3RlbnQgZGF0YTogKi8KIAog
aW50IGljX3Byb3RvX3VzZWQ7CQkJLyogUHJvdG9jb2wgdXNlZCwgaWYgYW55ICovCkBAIC0xNTAs
NiArMTQ5LDkgQEAKIHN0YXRpYyBpbnQgaWNfZGhjcF9tc2d0eXBlIF9faW5pdGRhdGEgPSAwOwkv
KiBESENQIG1zZyB0eXBlIHJlY2VpdmVkICovCiAjZW5kaWYKIAorc3RhdGljIHUzMiByb290X3Nl
cnZlcl9hZGRyID0gSU5BRERSX05PTkU7CitzdGF0aWMgdTggIHJvb3Rfc2VydmVyX3BhdGhbMjU2
XSA9IHsgMCAsIH07CisKIAogLyoKICAqCU5ldHdvcmsgZGV2aWNlcwpAQCAtMTIxMiw3ICsxMjE0
LDcgQEAKIAlyZXR1cm4gMDsKIH0KIAotbW9kdWxlX2luaXQoaXBfYXV0b19jb25maWcpOworLy9t
b2R1bGVfaW5pdChpcF9hdXRvX2NvbmZpZyk7CiAKIAogLyoKQEAgLTEzNDIsMyArMTM0NCwyMSBA
QAogCiBfX3NldHVwKCJpcD0iLCBpcF9hdXRvX2NvbmZpZ19zZXR1cCk7CiBfX3NldHVwKCJuZnNh
ZGRycz0iLCBuZnNhZGRyc19jb25maWdfc2V0dXApOworCisKK2ludCBpbml0X21vZHVsZSh2b2lk
KQoreworI2lmZGVmIE1PRFVMRQorCWljX2VuYWJsZSA9IDE7CisjZW5kaWYKKwlpcF9hdXRvX2Nv
bmZpZygpOworICAgICAgIC8vbmZzYWRkcnNfY29uZmlnX3NldHVwKCJpcD1kaGNwIik7CisJcm9v
dF9zZXJ2ZXJfc2V0KHJvb3Rfc2VydmVyX2FkZHIsIHJvb3Rfc2VydmVyX3BhdGgpOworCXJldHVy
biAwOworfQorCitpbnQgY2xlYW51cF9tb2R1bGUodm9pZCkKK3sKKwkgcHJvY19uZXRfcmVtb3Zl
KCJwbnAiKTsKKwkgcmV0dXJuIDA7Cit9Cg==

--Multipart_Sat__29_Sep_2001_09:04:07_+0800_08450bc8--
