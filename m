Return-Path: <linux-kernel-owner+willy=40w.ods.org@vger.kernel.org>
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id <S261427AbSLYWPK>; Wed, 25 Dec 2002 17:15:10 -0500
Received: (majordomo@vger.kernel.org) by vger.kernel.org
	id <S261446AbSLYWPK>; Wed, 25 Dec 2002 17:15:10 -0500
Received: from [203.199.93.15] ([203.199.93.15]:48647 "EHLO
	WS0005.indiatimes.com") by vger.kernel.org with ESMTP
	id <S261427AbSLYWPJ>; Wed, 25 Dec 2002 17:15:09 -0500
From: "arun4linux" <arun4linux@indiatimes.com>
Message-Id: <200212252214.DAA26705@WS0005.indiatimes.com>
To: "Roger Larsson" <roger.larsson@norran.net>
CC: <linux-kernel@vger.kernel.org>
Reply-To: "arun4linux" <arun4linux@indiatimes.com>
Subject: Re: Re: Lowering Latency
Date: Thu, 26 Dec 2002 03:39:53 +0530
X-URL: http://indiatimes.com
Content-Type: text/plain; charset=us-ascii
Sender: linux-kernel-owner@vger.kernel.org
X-Mailing-List: linux-kernel@vger.kernel.org

<<Your driver latency should not be a problem. It should be interrupt latency and not much more. 

>>I need to process a minimum of 3000 interrupts per minute generated by a PCI based controller.
And my development environment is RedHat 8.0. I can't change both of these. And the application is tightly coupled with the driver. Driver exports the PCI base addresses to the application using mmap and application accesses the card directly.

Arun

"Roger Larsson" wrote:



On Tuesday 24 December 2002 16:55, arun4linux wrote:
&gt; Hello,
&gt; 
&gt; I'm writing a module device driver on RH 8.0 (2.4.18-14 kernel).
&gt; I'd like to know is there any way I can give maximum priority to my module.
&gt; Or can I make my module a non-preemptable one?
&gt; I could see from drivers/char/oprofile/compat.h that preempt_disable() 
doesn't do anything. (Mine is an uniprocessor machine.)

It does in 2.5 kernels. That is why it is a compat in 2.4 :-)
[2.4 does not have kernel preemption unless you add the specific patches]

&gt; I don't want to touch the rest of the kernel. I dont want to apply any 
patch.
&gt; All I want to do is get the maximum time from the CPU and lower my driver's 
latency.

Your driver latency should not be a problem. It should be interrupt latency 
and not much more. Are you sure that it is the drivers latency that is the
problem? How have you come to that conclusion?
(if it is in the milliseconds range then it is not the driver, but driver to 
application - and you need a low latency patch)

&gt; Is it possible?

Yes, if that really is the problem. There are two hard RT approaches.
RTLinux and RTAI/Adeos (but it is important to read their respective 
licenses...) It it is driver to application those are overkills...

&gt; If it's possible, please do let me know, how to achieve this.
&gt; 
&gt; Wishing you all a merry christmas and a prosperous new year.
&gt; 
&gt; Arun
&gt; 

/RogerL

-- 
Roger Larsson
Skellefteå
Sweden




Get Your Private, Free E-mail from Indiatimes at http://email.indiatimes.com

 Buy the best in Movies at http://www.videos.indiatimes.com

Now bid just 7 Days in Advance and get Huge Discounts on Indian Airlines Flights. So log on to http://indianairlines.indiatimes.com and Bid Now!

