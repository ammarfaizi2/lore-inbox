Return-Path: <linux-kernel-owner+willy=40w.ods.org-S261874AbUKBQdE@vger.kernel.org>
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S261874AbUKBQdE (ORCPT <rfc822;willy@w.ods.org>);
	Tue, 2 Nov 2004 11:33:04 -0500
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S261873AbUKBQdC
	(ORCPT <rfc822;linux-kernel-outgoing>);
	Tue, 2 Nov 2004 11:33:02 -0500
Received: from mx1.redhat.com ([66.187.233.31]:14573 "EHLO mx1.redhat.com")
	by vger.kernel.org with ESMTP id S262018AbUKBQaC (ORCPT
	<rfc822;linux-kernel@vger.kernel.org>);
	Tue, 2 Nov 2004 11:30:02 -0500
From: David Howells <dhowells@redhat.com>
In-Reply-To: <20041102093610.GB5841@infradead.org> 
References: <20041102093610.GB5841@infradead.org>  <76b4a884-2c3c-11d9-91a1-0002b3163499@redhat.com> <200411011930.iA1JULKN023227@warthog.cambridge.redhat.com> 
To: Christoph Hellwig <hch@infradead.org>
Cc: torvalds@osdl.org, akpm@osdl.org, davidm@snapgear.com,
       linux-kernel@vger.kernel.org, uclinux-dev@uclinux.org
Subject: Re: [PATCH 10/14] FRV: Make calibrate_delay() optional 
User-Agent: EMH/1.14.1 SEMI/1.14.5 (Awara-Onsen) FLIM/1.14.5 (Demachiyanagi) APEL/10.6 Emacs/21.3 (i386-redhat-linux-gnu) MULE/5.0 (SAKAKI)
MIME-Version: 1.0 (generated by SEMI 1.14.5 - "Awara-Onsen")
Content-Type: text/plain; charset=US-ASCII
Date: Tue, 02 Nov 2004 16:29:39 +0000
Message-ID: <25906.1099412979@redhat.com>
Sender: linux-kernel-owner@vger.kernel.org
X-Mailing-List: linux-kernel@vger.kernel.org


> this changelog certainly does not apply to the delay loop calibration.

I just duplicated the banners from init/main.c and tacked some extra bits on
the front.

> any reason it's in lib?  Better move this to kernel and properly compile
> it conditionally.

So that it get built and placed in an archive library, thus allowing the
linker to decide whether to include it or not, without having to use
conditional stuff and without having to change every other arch to enable it.

I suppose I could do something like this in init/Makefile:

	if ($(CONFIG_DISABLE_GENERIC_CALIBRATE_DELAY),y)
	obj-y += calibrate.o
	endif

That would allow me to avoid having to change all the archs.

David
