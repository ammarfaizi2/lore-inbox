Return-Path: <linux-kernel-owner+willy=40w.ods.org@vger.kernel.org>
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S263372AbUCXN50 (ORCPT <rfc822;willy@w.ods.org>);
	Wed, 24 Mar 2004 08:57:26 -0500
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S263379AbUCXN50
	(ORCPT <rfc822;linux-kernel-outgoing>);
	Wed, 24 Mar 2004 08:57:26 -0500
Received: from ns.suse.de ([195.135.220.2]:28639 "EHLO Cantor.suse.de")
	by vger.kernel.org with ESMTP id S263372AbUCXN5Y (ORCPT
	<rfc822;linux-kernel@vger.kernel.org>);
	Wed, 24 Mar 2004 08:57:24 -0500
Date: Wed, 24 Mar 2004 14:57:20 +0100
Message-ID: <s5hfzby1h6n.wl@alsa2.suse.de>
From: Takashi Iwai <tiwai@suse.de>
To: Andrea Arcangeli <andrea@suse.de>
Cc: William Lee Irwin III <wli@holomorphy.com>,
       Nick Piggin <piggin@cyberone.com.au>, Andrew Morton <akpm@osdl.org>,
       mjy@geizhals.at, linux-kernel@vger.kernel.org
Subject: Re: CONFIG_PREEMPT and server workloads
In-Reply-To: <20040320150311.GN9009@dualathlon.random>
References: <40591EC1.1060204@geizhals.at>
	<20040318060358.GC29530@dualathlon.random>
	<20040318015004.227fddfb.akpm@osdl.org>
	<20040318145129.GA2246@dualathlon.random>
	<405A584B.40601@cyberone.com.au>
	<20040319050948.GN2045@holomorphy.com>
	<20040320121423.GA9009@dualathlon.random>
	<20040320145111.GD2045@holomorphy.com>
	<20040320150311.GN9009@dualathlon.random>
User-Agent: Wanderlust/2.10.1 (Watching The Wheels) SEMI/1.14.5 (Awara-Onsen) FLIM/1.14.5 (Demachiyanagi) APEL/10.6 MULE XEmacs/21.4 (patch 13) (Rational FORTRAN) (i386-suse-linux)
MIME-Version: 1.0 (generated by SEMI 1.14.5 - "Awara-Onsen")
Content-Type: text/plain; charset=US-ASCII
Sender: linux-kernel-owner@vger.kernel.org
X-Mailing-List: linux-kernel@vger.kernel.org

At Sat, 20 Mar 2004 16:03:11 +0100,
Andrea Arcangeli wrote:
> 
> On Sat, Mar 20, 2004 at 06:51:11AM -0800, William Lee Irwin III wrote:
> > I may have missed one of his posts where he gave the results from the
> > RT test suite. I found a list of functions with some kind of numbers,
> > though I didn't see a description of what those numbers were and was
> > looking for something more detailed (e.g. the output of the RT
> > instrumentation things he had with and without preempt). This is all
> > mostly curiosity and sort of hoping this gets carried out vaguely
> > scientifically anyway, so I'm not really arguing one way or the other.
> 
> agreed. what I've seen so far is a great number of graphs, they were
> scientific enough for my needs and covering real life different
> workloads, but I'm not sure what Takashi published exactly, you may want
> to discuss it with him.

sorry, there is no exact descrption (yet) in public, except for the
pdf of slides i presented ago:

	http://www.alsa-project.org/~iwai/audio-latency.pdf

the data there are already old (based on 2.6.0-test9), and were
measured by the old version of latency-test program (modifed version
from Benno Senor's latencytest suite).


basically, the latency-test program measures the latency between the
time of (periodical) irq and the time when user RT-thread is woken
up under different workloads.  the user thread can perform an
artificial CPU load (busy loop) to simulate the situation that any RT
process does a heavy job.

the resultant plot shows the critical deadline, the total latency and
the CPU latency (busy loop) responses, as you can see in the above
pdf.

the latest version of latency-test suite is found at

	http://www.alsa-project.org/~iwai/latencytest-0.5.3.tar.gz

it uses its own kernel module to generate irqs from RTC and to trace
stacks.

i'll show the results of the recent kernels tomorrow...


--
Takashi Iwai <tiwai@suse.de>		ALSA Developer - www.alsa-project.org
