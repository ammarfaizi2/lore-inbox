Return-Path: <linux-kernel-owner+willy=40w.ods.org-S1751430AbWJRIAX@vger.kernel.org>
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S1751430AbWJRIAX (ORCPT <rfc822;willy@w.ods.org>);
	Wed, 18 Oct 2006 04:00:23 -0400
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S1751427AbWJRIAX
	(ORCPT <rfc822;linux-kernel-outgoing>);
	Wed, 18 Oct 2006 04:00:23 -0400
Received: from ns.suse.de ([195.135.220.2]:6546 "EHLO mx1.suse.de")
	by vger.kernel.org with ESMTP id S1751397AbWJRIAW (ORCPT
	<rfc822;linux-kernel@vger.kernel.org>);
	Wed, 18 Oct 2006 04:00:22 -0400
Date: Wed, 18 Oct 2006 10:00:09 +0200
Message-ID: <s5h4pu25a0m.wl%tiwai@suse.de>
From: Takashi Iwai <tiwai@suse.de>
To: Randy Dunlap <randy.dunlap@oracle.com>
Cc: Adrian Bunk <bunk@stusta.de>, Prakash Punnoor <prakash@punnoor.de>,
       mingo@redhat.com, linux-kernel@vger.kernel.org,
       Stephen Hemminger <shemminger@osdl.org>, perex@suse.cz,
       alsa-devel@alsa-project.org, hnguyen@de.ibm.com
Subject: Re: [RFC: 2.6.19 patch] snd-hda-intel: default MSI to off
In-Reply-To: <20061017142957.b4f0c1fe.randy.dunlap@oracle.com>
References: <200610050938.10997.prakash@punnoor.de>
	<5aa69f860610051030l7323ec2el545873570052f077@mail.gmail.com>
	<200610052309.01155.prakash@punnoor.de>
	<20061017211301.GE3502@stusta.de>
	<20061017142957.b4f0c1fe.randy.dunlap@oracle.com>
User-Agent: Wanderlust/2.12.0 (Your Wildest Dreams) SEMI/1.14.6 (Maruoka)
 FLIM/1.14.7 (=?ISO-8859-4?Q?Sanj=F2?=) APEL/10.6 MULE XEmacs/21.5 (beta25)
 (eggplant) (+CVS-20060326) (i386-suse-linux)
MIME-Version: 1.0 (generated by SEMI 1.14.6 - "Maruoka")
Content-Type: text/plain; charset=US-ASCII
Sender: linux-kernel-owner@vger.kernel.org
X-Mailing-List: linux-kernel@vger.kernel.org

At Tue, 17 Oct 2006 14:29:57 -0700,
Randy Dunlap wrote:
> 
> On Tue, 17 Oct 2006 23:13:01 +0200 Adrian Bunk wrote:
> 
> > On Thu, Oct 05, 2006 at 11:08:57PM +0200, Prakash Punnoor wrote:
> > > Am Donnerstag 05 Oktober 2006 19:30 schrieb Fatih A????c??:
> > > > 2006/10/5, Prakash Punnoor <prakash@punnoor.de>:
> > > > > Hi,
> > > > >
> > > > > subjects say it all. Without irqpoll my nic doesn't work anymore. I added
> > > > > Ingo
> > > > > to cc, as my IRQs look different, so it may be a prob of APIC routing or
> > > > > the
> > > > > like.
> > > 
> > > > > Can you try booting with pci=nomsi ? I have a similar problem with my
> > > 
> > > I used snd-hda-intel.disable_msi=1 and this actually helped! Now the nforce 
> > > nic works w/o problems. So it was the audio driver causing havoc on the nic. 
> > >...
> > 
> > Unless someone finds and fixes what causes such problems, I'd therefore 
> > suggest the patch below to let MSI support to be turned off by default.
> 
> MSI works with my sound, ethernet, and SATA:
> 
>  66:    1131814          0         PCI-MSI  libata
>  98:      89556          0         PCI-MSI  HDA Intel
> 106:     943530          0         PCI-MSI  eth0
> 
> so maybe this should be done for nforce chipsets or
> whatever is seeing the problem?

I agree that this is pretty much depending on the hardware, so
disabling all might be exaggerated.
The sound with MSI works on all of my test machines with Intel
chipset, so far.


Takashi
