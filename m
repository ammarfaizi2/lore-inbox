Return-Path: <linux-kernel-owner@vger.kernel.org>
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id <S291038AbSBSKWo>; Tue, 19 Feb 2002 05:22:44 -0500
Received: (majordomo@vger.kernel.org) by vger.kernel.org
	id <S291043AbSBSKWY>; Tue, 19 Feb 2002 05:22:24 -0500
Received: from E0-IBE.r.miee.ru ([194.226.0.89]:48144 "EHLO ibe.miee.ru")
	by vger.kernel.org with ESMTP id <S291038AbSBSKWN>;
	Tue, 19 Feb 2002 05:22:13 -0500
From: Samium Gromoff <root@ibe.miee.ru>
Message-Id: <200202191252.g1JCqOR11998@ibe.miee.ru>
Subject: Ess Solo-1 interrupt behaviour
To: linux-kernel@vger.kernel.org
Date: Tue, 19 Feb 2002 15:52:24 +0300 (MSK)
X-Mailer: ELM [version 2.5 PL6]
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Sender: linux-kernel-owner@vger.kernel.org
X-Mailing-List: linux-kernel@vger.kernel.org

        I`ve recently spotted that a solo1 pci soundcard generates
16000+ interrupts/second with esd started idling.

	What strikes me as odd is that my old good isa sb16 vibra
does only 600+ interrupts.

	Also i`ve had some strange experience of this interrupt load
affecting the disk io.
	The situation was the next: i`ve had a large transfer to a samba
boxen with this poor solo1 soundcard. I would like to emphasize that i
turn off the drive write-caching ability in order to gain reliability,
and that with write cacheing the following issues are hardly noticeable.
	So yes, i was copying large amount of data thru the 10mbit rtl8029s
to the samba box. What i`ve tested are two situations: with esd on ==
effective 16,5k interrupts/second, and with esd off, and thus no interrupts
generated by the solo1 card.
	What i`ve noticed quite disappointed me: with esd turned on, the disk
writeout activity (well, the seek activity) was _much_ higher.
	Ie i`ve stopped esd, the seekage dropped down, i`ve started esd - 
seekage goes back.

	So we basically have here two strange issues:
		1. Ess Solo-1 driver generates awful lots of interrupts (16k/s)
		2. Heavy interrupt load forces the elevator to make bad
	decisions

	Info: linux-2.4.17-rmap12e, p2-300 128M RAM, rtl8029 NIC, Ess Solo-1 SB

regards, Samium Gromoff
