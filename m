Return-Path: <linux-kernel-owner@vger.kernel.org>
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id <S288834AbSBRWrS>; Mon, 18 Feb 2002 17:47:18 -0500
Received: (majordomo@vger.kernel.org) by vger.kernel.org
	id <S288851AbSBRWrJ>; Mon, 18 Feb 2002 17:47:09 -0500
Received: from gemini.rz.uni-ulm.de ([134.60.246.16]:53172 "EHLO
	mail.rz.uni-ulm.de") by vger.kernel.org with ESMTP
	id <S288834AbSBRWrE>; Mon, 18 Feb 2002 17:47:04 -0500
Date: Mon, 18 Feb 2002 23:46:57 +0100
From: Markus Schaber <markus.schaber@student.uni-ulm.de>
To: linux-kernel@vger.kernel.org
Subject: Re: weird ip sequence number
Message-Id: <20020218234657.6041d061.markus.schaber@student.uni-ulm.de>
In-Reply-To: <E16cucO-0006kg-00@the-village.bc.nu>
In-Reply-To: <Pine.SOL.4.10.10202181413160.8734-100000@dogbert>
	<E16cucO-0006kg-00@the-village.bc.nu>
Organization: Uni Ulm
X-Mailer: Sylpheed version 0.7.0claws57 (GTK+ 1.2.10; i686-pc-linux-gnu)
X-Face: Nx5T&>Nj$VrVPv}sC3IL&)TqHHOKCz/|)R$i"*r@w0{*I6w;UNU_hdl1J4NI_m{IMztq=>cmM}1gCLbAF+9\#CGkG8}Y{x%SuQ>1#t:;Z(|\qdd[i]HStki~#w1$TPF}:0w-7"S\Ev|_a$K<GcL?@F\BY,ut6tC0P<$eV&ypzvlZ~R00!A
X-message-flag: Warning! Outlook and Outlook Express are braindead! Please use correct software!
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
Sender: linux-kernel-owner@vger.kernel.org
X-Mailing-List: linux-kernel@vger.kernel.org

Hi,

Alan Cox wrote:

> > Although there are few chances that our randomly chosen ip_id
> > collides with the other packet's ip_id generated by kernel, I don't
> > want this possibility to happen.
> 
> So pick one at random. However its a pretty strange way to abuse IP.

And be shure that - according to the standards - the ID/protocol pair should be unique, that means every IP protocol (udp/tcp/icmp/etc...) can have his own, independent ID generation.
 
> > So is there any method to get a true ip_id from the kernel? 
> > I want this ip_id to do my own fragmentation on a packet.
> Linux does not generate ip idents on DF frames. You can't fragment a
> DF frame anyway so the problem does not arrive. Frames without DF get
> assigned ip ids

I think the OP has some conceptual misunderstanding here. The IP IDs are considered "internal", this means not visible to upper layer protocols.

As soon as an user of IP wants to do his own fragmentation for user data, he/she/it should use his own packet or data ID numbers (as e. G. TCP does with the sequence number, or the ping with the included sequence number).

Markus

-- 
"GPL software is not free - the cost is cooperation"
