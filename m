Return-Path: <linux-kernel-owner+willy=40w.ods.org-S261838AbUJZAbS@vger.kernel.org>
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S261838AbUJZAbS (ORCPT <rfc822;willy@w.ods.org>);
	Mon, 25 Oct 2004 20:31:18 -0400
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S261900AbUJYPBo
	(ORCPT <rfc822;linux-kernel-outgoing>);
	Mon, 25 Oct 2004 11:01:44 -0400
Received: from sd291.sivit.org ([194.146.225.122]:50880 "EHLO sd291.sivit.org")
	by vger.kernel.org with ESMTP id S261838AbUJYOof (ORCPT
	<rfc822;linux-kernel@vger.kernel.org>);
	Mon, 25 Oct 2004 10:44:35 -0400
Date: Mon, 25 Oct 2004 16:45:49 +0200
From: Stelian Pop <stelian@popies.net>
To: Vojtech Pavlik <vojtech@suse.cz>
Cc: Dmitry Torokhov <dtor_core@ameritech.net>, linux-kernel@vger.kernel.org
Subject: Re: [PATCH 0/5] Sonypi driver model & PM changes
Message-ID: <20041025144549.GD3161@crusoe.alcove-fr>
Reply-To: Stelian Pop <stelian@popies.net>
Mail-Followup-To: Stelian Pop <stelian@popies.net>,
	Vojtech Pavlik <vojtech@suse.cz>,
	Dmitry Torokhov <dtor_core@ameritech.net>,
	linux-kernel@vger.kernel.org
References: <200410210154.58301.dtor_core@ameritech.net> <20041025125629.GF6027@crusoe.alcove-fr> <20041025135036.GA3161@crusoe.alcove-fr> <20041025135742.GA1733@ucw.cz>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <20041025135742.GA1733@ucw.cz>
User-Agent: Mutt/1.4.1i
Sender: linux-kernel-owner@vger.kernel.org
X-Mailing-List: linux-kernel@vger.kernel.org

On Mon, Oct 25, 2004 at 03:57:43PM +0200, Vojtech Pavlik wrote:

> The number is 240 and it's the number of possible PS/2 scancode
> combinations, and since at this time X can only understand the PS/2
> protocol (and not native Linux events), this is the only way how to pass
> keypresses to X.
> 
> I believe that although this way may be easier, it leads to madness.

It is also impossible for me to go this way because there is no way
to put 20+ events between 226 and 240...

> >   I also haven't looked yet at adding a new modifier in the console
> >   mode...
>  
> IIRC X has only 8 modifier keys and all are already defined and you
> can't define any more. But I doubt you're using all of them on your
> keyboard. It should be possible to assign Fn to one of them.

That's what I thought too. However, it seems to work only when the
keysym associated with the modifier is a well known key (Control_L,
Control_R, Alt_L etc).

If I do (214 is the keycode generated by my Fn key):
	keycode 214 = Control_L
	clear mod3
	add mod3 = Control_L
then Fn + F1 will generate Mod3 + F1 (but Control_L will not work as 
a Control modifier anymore).

But if I do:
	keycode 214 = function
	clear mod3
	add mod3 = function
then (at least) WindowMaker does not see the modifier anymore (only
a 'function' single key press is received).

Stelian.
-- 
Stelian Pop <stelian@popies.net>    
